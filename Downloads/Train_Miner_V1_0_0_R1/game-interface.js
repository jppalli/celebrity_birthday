(()=>{"use strict";var e={748:(e,t,n)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,s(i.key),i)}}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}n.d(t,{m:()=>F});var a=function(){return e=function e(t){var n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.params=o,this.isAutoPausing=!0,this.types=o.types||(null===(n=this.parent.settings)||void 0===n||null===(i=n.ads)||void 0===i?void 0:i.types)||{initial:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0},interstitial:{enabled:!0,cooldown:60,preload:250,retry:2e3,timeout:250,state:0,ready:!1},rewarded:{enabled:!0,preload:500,retry:2e3,timeout:250,state:0,reward:!0,ready:!1},banner:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0}},this.callbacks={onRewardedAdAvailabilityChange:null,onInterstitialAdAvailabilityChange:null,onOffsetChange:null},this.states={OFF:0,IDLE:1,PRELOADING:2,READY:3,PLAYING:4,CLOSED:5,0:"OFF",1:"IDLE",2:"PRELOADING",3:"READY",4:"PLAYING",5:"CLOSED"},this.offsets={top:0,right:0,bottom:0,left:0},this.cooldownPassive=10,this.skipValidation={rewarded:!1,interstitial:!1},this.isInterstitialAdReadyResult,this.isRewardedAdReadyResult,this.info={interstitial:{checked:[],called:[]},rewarded:{checked:[],called:[]}}},t=[{key:"init",value:function(){var e,t,n,i,o,s,a,r,l,c,u,d,h=this;this.parent.console.log("[ads] init..."),this.isAutoPausing=void 0!==(null===(e=this.params)||void 0===e?void 0:e.isAutoPausing)?null===(t=this.params)||void 0===t?void 0:t.isAutoPausing:void 0!==(null===(n=this.parent.settings)||void 0===n||null===(i=n.ads)||void 0===i?void 0:i.isAutoPausing)?null===(o=this.parent.settings)||void 0===o||null===(s=o.ads)||void 0===s?void 0:s.isAutoPausing:this.isAutoPausing,["interstitial","rewarded"].forEach((function(e){var t;h.types[e].eventIds=(null===(t=h.parent.settings[e])||void 0===t?void 0:t.eventIds)||[],h.parent.console.log("[ads] %s eventIds",e,h.types[e].eventIds)})),["interstitial","rewarded"].forEach((function(e){var t,n,i;h.types[e].allowlist=(null===(t=h.parent.settings[e])||void 0===t?void 0:t.allowlist)||[],h.types[e].blocklist=(null===(n=h.parent.settings[e])||void 0===n?void 0:n.blocklist)||[],h.types[e].allowEmpty=!0===(null===(i=h.parent.settings[e])||void 0===i?void 0:i.allowEmpty),h.parent.console.log("[ads] %s allowlist",e,h.types[e].allowlist),h.parent.console.log("[ads] %s blocklist",e,h.types[e].blocklist),h.parent.console.log("[ads] %s allowEmpty: %s",e,!0===h.types[e].allowEmpty?"true":"false")}));var f={interstitial:[],rewarded:[]};return["interstitial","rewarded"].forEach((function(e){var t;h.types[e].eventIds=(null===(t=h.parent.settings[e])||void 0===t?void 0:t.eventIds)||[],h.types[e].eventIds.forEach((function(t){h.isValid(t,e)&&f[e].push(t)}))})),["interstitial","rewarded"].forEach((function(e){h.types[e].eventIds=f[e],h.parent.console.log("[ads] %s valid eventIds",e,h.types[e].eventIds)})),this.types.interstitial.cooldown=null!==(a=null!==(r=null===(l=this.params)||void 0===l||null===(c=l.interstitial)||void 0===c?void 0:c.cooldown)&&void 0!==r?r:null===(u=this.parent.settings)||void 0===u||null===(d=u.interstitial)||void 0===d?void 0:d.cooldown)&&void 0!==a?a:this.types.interstitial.cooldown,new Promise((function(e){Object.keys(h.types).forEach((function(e){h.types[e].enabled&&(setInterval((function(){h.types[e].ready!==(h.types[e].state===h.states.READY)&&(h.types[e].ready=h.types[e].state===h.states.READY,"interstitial"===e?"function"==typeof h.callbacks.onInterstitialAdAvailabilityChange&&h.types[e].eventIds.forEach((function(t){h.callbacks.onInterstitialAdAvailabilityChange(t,h.types[e].ready)})):"rewarded"===e&&"function"==typeof h.callbacks.onRewardedAdAvailabilityChange&&h.types[e].eventIds.forEach((function(t){h.callbacks.onRewardedAdAvailabilityChange(t,h.types[e].ready)})))}),250),h.setState(e,h.states.IDLE),h.types[e].preload>0&&setInterval((function(){h.types[e].enabled&&!0!==h.types[e].skip&&h.preload(e)}),h.types[e].preload))})),e()}))}},{key:"setState",value:function(e,t){this.parent.console.log("[ads] setState",e,this.states[t]),this.types[e].state=t,this.types[e].isLandscape=window.innerWidth>window.innerHeight}},{key:"preload",value:function(e){var t=this;Object.keys(this.types).includes(e)&&this.types[e].state===this.states.IDLE&&(this.types[e].fails=this.types[e].fails||0,this.types[e].attempts=this.types[e].attempts||0,this.types[e].attempts>0&&this.types[e].fails>=this.types[e].attempts||(this.setState(e,this.states.PRELOADING),this.parent._preloadAd(e).then((function(){t.types[e].fails=0,t.parent.console.log("[ads] [%s] preloading... OK",e),t.setState(e,t.states.READY)}),(function(){t.types[e].fails++,t.parent.console.log("[ads] [%s] preloading... FAILED (attempt: %s)",e,t.types[e].fails),t.setState(e,t.states.CLOSED),setTimeout((function(){t.setState(e,t.states.IDLE)}),t.types[e].retry)})).catch((function(e){t.parent.console.error("[ads] _preloadAd",e)}))))}},{key:"hasCooledDown",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.types[e];if(void 0===n)return!0;if(!(n.last&&n.cooldown>=0))return!0;var i=n.cooldown,o=Math.round((Date.now()-n.last)/1e3);return o<i?(!0!==t&&this.parent.console.log("[ads] [%s/cooldown]: %s seconds left",e,i-o),!1):!("interstitial"===e&&this.cooldownPassive>0&&(o=Math.round((Date.now()-this.types.rewarded.last)/1e3))<this.cooldownPassive&&(!0!==t&&this.parent.console.log("[ads] [%s/(passive) cooldown]: %s seconds left",e,this.cooldownPassive-o),1))}},{key:"hasRewardedAd",value:function(e){return this.info.rewarded.checked.includes(e)||this.info.rewarded.checked.push(e),Promise.resolve(this.isRewardedAdReady(e))}},{key:"hasInterstitialAd",value:function(e){return this.info.interstitial.checked.includes(e)||this.info.interstitial.checked.push(e),Promise.resolve(this.isInterstitialAdReady(e))}},{key:"onRewardedAdAvailabilityChange",value:function(e){var t=this;this.parent.console.log("[ads] listener 'onRewardedAdAvailabilityChange' added"),this.callbacks.onRewardedAdAvailabilityChange=e,"function"==typeof this.callbacks.onRewardedAdAvailabilityChange&&this.types.rewarded.eventIds.forEach((function(e){t.callbacks.onRewardedAdAvailabilityChange(e,t.types.rewarded.ready)}))}},{key:"onInterstitialAdAvailabilityChange",value:function(e){var t=this;this.parent.console.log("[ads] listener 'onInterstitialAdAvailabilityChange' added"),this.callbacks.onInterstitialAdAvailabilityChange=e,"function"==typeof this.callbacks.onInterstitialAdAvailabilityChange&&this.types.interstitial.eventIds.forEach((function(e){t.callbacks.onInterstitialAdAvailabilityChange(e,t.types.interstitial.ready)}))}},{key:"isRewardedAdAvailable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.info.rewarded.checked.includes(e)||this.info.rewarded.checked.push(e),this.isRewardedAdReady(e)}},{key:"isInterstitialAdAvailable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.info.interstitial.checked.includes(e)||this.info.interstitial.checked.push(e),this.isInterstitialAdReady(e)}},{key:"isAdReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"interstitial",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"interstitial"===e?this.isInterstitialAdReady(t):"rewarded"===e&&this.isRewardedAdReady(t)}},{key:"isRewardedAdReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.isValid(e,"rewarded"),n=this.parent._hasRewardedAd(e),i=this.types.rewarded.state===this.states.READY,o=this.hasCooledDown("rewarded",!0),s=t&&n&&i&&o,a={eventId:e,isValid:t,_hasRewardedAd:n,isReady:i,hasCooledDown:o,result:s};return s||this.isRewardedAdReadyResult===JSON.stringify(a)||(this.isRewardedAdReadyResult=JSON.stringify(a),this.parent.console.log("[ads] isRewardedAdReady has changed",a)),s}},{key:"isInterstitialAdReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.isValid(e),n=this.parent._hasInterstitialAd(e),i=this.types.interstitial.state===this.states.READY,o=this.hasCooledDown("interstitial",!0),s=t&&n&&i&&o,a={eventId:e,isValid:t,_hasInterstitialAd:n,isReady:i,hasCooledDown:o,result:s};return s||this.isInterstitialAdReadyResult===JSON.stringify(a)||(this.isInterstitialAdReadyResult=JSON.stringify(a),this.parent.console.log("[ads] isInterstitialAdReady has changed",a)),s}},{key:"setOffsets",value:function(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];"object"===i(e)?(!0===e.reset&&(this.offsets.top=this.offsets.right=this.offsets.bottom=this.offsets.left=0),this.offsets.top=void 0!==e.top?e.top:this.offsets.top,this.offsets.right=void 0!==e.right?e.right:this.offsets.right,this.offsets.bottom=void 0!==e.bottom?e.bottom:this.offsets.bottom,this.offsets.left=void 0!==e.left?e.left:this.offsets.left):(!0===s&&(this.offsets.top=this.offsets.right=this.offsets.bottom=this.offsets.left=0),this.offsets.top=void 0!==e?e:this.offsets.top,this.offsets.right=void 0!==t?t:this.offsets.right,this.offsets.bottom=void 0!==n?n:this.offsets.bottom,this.offsets.left=void 0!==o?o:this.offsets.left),this.parent.console.log("[ads] setOffsets(%s, %s, %s, %s)",this.offsets.top,this.offsets.right,this.offsets.bottom,this.offsets.left),"function"==typeof this.callbacks.onOffsetChange&&this.callbacks.onOffsetChange(this.offsets)}},{key:"onOffsetChange",value:function(e){this.callbacks.onOffsetChange=e,"function"==typeof this.callbacks.onOffsetChange&&this.callbacks.onOffsetChange(this.offsets)}},{key:"getOffsets",value:function(){return this.offsets}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"interstitial",n=!1;return new Promise((function(i){if(void 0===e.types[t])return e.parent.console.log("[ads] type '%s' is undefined!",t),i();if(e.types[t].state!==e.states.READY)return e.parent.console.log("[ads] [%s] skipped (state: %s)",t,e.states[e.types[t].state]),"rewarded"===t?i({isRewardGranted:n}):i();if(!e.hasCooledDown(t))return e.parent.console.log("[ads] [%s] skipped (cooldown)",t),"rewarded"===t?i({isRewardGranted:n}):i();e.setState(t,e.states.PLAYING),e.isAutoPausing&&(e.parent.gameStates.mute(!0,!0),e.parent.gameStates.pause(!0,!0)),e.parent.gameStates.stopGameplay();var o=function(t){e.types[t].last=Date.now(),setTimeout((function(){i("rewarded"===t?{isRewardGranted:n}:{}),e.isAutoPausing&&(e.parent.gameStates.pause(!1,!0),e.parent.gameStates.mute(!1,!0)),e.parent.gameStates.startGameplay()}),e.types[t].timeout),e.setState(t,e.states.CLOSED),setTimeout((function(){e.setState(t,e.states.IDLE)}),250)};switch(t){case"interstitial":return e.parent._showAd(t).then((function(){o(t)})).catch((function(e){o(t)}));case"rewarded":return e.parent._showAd(t).then((function(e){n=e,o(t)})).catch((function(e){o(t)}));default:return}}))}},{key:"testAd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"interstitial";return new Promise((function(t,n){var i=!1,o=function(){t({type:e,args:{success:i}})};return"interstitial"===e?"undefined"!=typeof Swal?Swal.fire({title:"<strong>[INTERSTITIAL AD]</strong>",html:"<i>This dialog represents an interstitial ad.</i><br /><br /><b>Important:</b> In any case, the game should now be muted!",confirmButtonText:"Close",didDestroy:function(){o()}}):(alert("[INTERSTITIAL AD]\nThis dialog represents an interstitial ad.\nIMPORTANT: In any case, the game should now be muted!"),o()):"rewarded"===e?"undefined"!=typeof Swal?Swal.fire({title:"<strong>[REWARDED AD]</strong>",html:"<i>This dialog represents a rewarded ad.</i><br /><br /><b>Important:</b> In any case, the game should now be muted!",showDenyButton:!0,confirmButtonText:"Grant reward",denyButtonText:"Deny reward",didDestroy:function(){o()}}).then((function(e){i=e.isConfirmed})):(confirm("[REWARDED AD]\nThis dialog represents a rewarded ad.\nIMPORTANT: In any case, the game should now be muted!\n\nShould a reward be granted?")&&(i=!0),o()):void o()}))}},{key:"getPlacementType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=function(e,t){var n=["preroll","start","pause","resume","quit","browse","next","break"];if(e="string"==typeof e?e.toLowerCase():"",t="string"==typeof t?t.toLowerCase():"",n.includes(t))return t;var i=e.toLowerCase().split(":");if(i.length){if("break"===i[0])return"break";if(n.includes(i[i.length-1]))return i[i.length-1]}return"browse"}(e,t);return this.parent.console.log("[ads] placementType: %s ('%s', '%s')",n,e||"n/a",t||"n/a"),n}},{key:"isValid",value:function(){var e,t,n,i,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"interstitial";if(!0===this.skipValidation[a])return!0;if(!0!==(null===(e=this.types[a])||void 0===e?void 0:e.allowEmpty)&&("string"!=typeof s||!s.length))return!1;if(0===(null===(t=this.types[a])||void 0===t?void 0:t.allowlist.length)&&0===(null===(n=this.types[a])||void 0===n?void 0:n.blocklist.length))return!0;var r=function(e,t){var n=t.filter((function(t){return function(e,t){var n=t.replace(/[-\/\\^$+?.()|[\]{}]/g,"\\$&");return new RegExp("^".concat(n.replace(/\*/g,".*"),"$")).test(e)}(e,t)}));return n.length,n.sort((function(e,t){return t.length-e.length}))[0]},l=r(s,null===(i=this.types[a])||void 0===i?void 0:i.allowlist),c=r(s,null===(o=this.types[a])||void 0===o?void 0:o.blocklist);return!(!l&&!c)&&(l&&c?l.length>c.length:!!l)}},{key:"innerWidth",get:function(){return window.innerWidth}},{key:"innerHeight",get:function(){return window.innerHeight}}],t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.params=n,this.url="//download.gameanalytics.com/js/GameAnalytics-4.4.5.min.js",this.build="",this.game_key="",this.secret_key="",this.isEnabled=!1,this.setEnabledInfoLog=!1,this.setEnabledEventSubmission=!1,this.parent.settings=this.parent.settings||{},this.parent.settings.gameanalytics=this.parent.settings.gameanalytics||{}}return t=e,n=[{key:"init",value:function(){var t,n,i,o,s,a,r,l,c=this;return this.url=this.params.url||(null===(t=this.parent.settings)||void 0===t||null===(n=t.gameanalytics)||void 0===n?void 0:n.url)||this.url,this.build=this.params.build||(null===(i=this.parent.settings)||void 0===i||null===(o=i.gameanalytics)||void 0===o?void 0:o.build)||this.build,this.game_key=this.params.game_key||(null===(s=this.parent.settings)||void 0===s||null===(a=s.gameanalytics)||void 0===a?void 0:a.game_key)||this.game_key,this.secret_key=this.params.secret_key||(null===(r=this.parent.settings)||void 0===r||null===(l=r.gameanalytics)||void 0===l?void 0:l.secret_key)||this.secret_key,this.parent.settings=this.parent.settings||{},this.parent.settings.gameanalytics=this.parent.settings.gameanalytics||{},["isEnabled","setEnabledInfoLog","setEnabledEventSubmission"].forEach((function(e){c[e]=void 0!==c.params[e]?c.params[e]:void 0!==c.parent.settings.gameanalytics[e]?c.parent.settings.gameanalytics[e]:c[e]})),this.parent.console.log("[analytics] init..."),this.isEnabled?this.build.length&&this.game_key.length&&this.secret_key.length?new Promise((function(t){return c.parent.helpers.loadFiles(c.url).then((function(){void 0!==e&&(e("setEnabledInfoLog",c.setEnabledInfoLog),e("setEnabledEventSubmission",c.setEnabledEventSubmission),e("configureBuild",c.build),e("initialize",c.game_key,c.secret_key),t()),t()})).catch((function(e){c.parent.console.error(e)}))})):(this.parent.console.warn("[analytics] One or more parameter values were invalid: Build: '%s', Game key: '%s' & Secret key: '%s' -> Initialization aborted!",this.build,this.game_key,this.secret_key),Promise.resolve()):(this.parent.console.info("[analytics] isEnabled: false -> Initialization aborted!"),Promise.resolve())}},{key:"track",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(window.gameanalytics=window.gameanalytics||{},void 0!==window.gameanalytics.GameAnalytics)switch("string"==typeof e?e=e.toLowerCase():(t.eventType=t.eventType||"",e=t.eventType.toLowerCase()),e){case"ga:business":gameanalytics.GameAnalytics.addBusinessEvent(t.cartType,t.itemType,t.itemId,t.amount,t.currency);break;case"ga:resource":gameanalytics.GameAnalytics.addResourceEvent(t.flowType,t.itemType,t.itemId,t.amount,t.resourceCurrency);break;case"ga:progression":gameanalytics.GameAnalytics.addProgressionEvent(t.progressionStatus,t.progression01,t.progression02,t.progression03,t.value);break;case"ga:error":gameanalytics.GameAnalytics.addErrorEvent(t.severity,t.message);break;case"ga:design":gameanalytics.GameAnalytics.addDesignEvent(t.eventId,t.value)}}}],n&&l(t.prototype,n),i&&l(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,p(i.key),i)}}function v(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}var y=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"getCacheKey",(function(){return Math.floor((new Date).getTime()/6e5)})),this.parent=t,this.params=n,this.urlSearchParams=[];try{this.urlSearchParams=new URLSearchParams(window.location.search||""),this.parent.console.debug("urlSearchParams",this.urlSearchParams)}catch(e){this.parent.console.error(e)}this.imagesBaseURL="images/",this.imagesSizes={small:"64x64",medium:"128x128",large:"256x256",xlarge:"512x512"},this.icons={flame:128293,robot:129302,handshake:129309,rocket:128640,muted:128263,unmuted:128265,finish:127937,coffee:9749,noentry:9940,party:127881,trophy:127942,skull:128128,biceps:128170,clapper:127916,satellite:128225,scream:128561,warning:9888,error:128683,pause:9208,resume:9199,stop:9209,menu:9776,flag:128681,gear:9881,joystick:128377,hourglass:9203,bellhop:128718,sleep:128164,ladder:129692,tornado:127786,pill:128138,toy:129528,restart:8634,door:55357,house:8962,next:9197,level:9167,picture:128444},this.isLocalhost="localhost"===location.hostname||"127.0.0.1"===location.hostname||"::1"===location.hostname,this.pressTimer=null},t=[{key:"getLocale",value:function(){var e=this;return["locale","lang"].forEach((function(t){if(null===e.parent.settings[t])try{e.parent.settings[t]=new URL(window.location.href).searchParams.get(t)}catch(e){}})),this.parent.settings.lang||this.parent.settings.locale||(navigator.language||navigator.userLanguage).substr(0,2)}},{key:"getIcon",value:function(e){return e in this.icons?String.fromCodePoint(this.icons[e]):null}},{key:"getImageURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"logo.png";return e="string"==typeof e&&e.length?e+"/":"",t="string"==typeof t&&t in this.imagesSizes?this.imagesSizes[t]+"/":"",n="string"==typeof n&&n.length?n:"logo.png",this.imagesBaseURL+e+t+n}},{key:"initEruda",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;"undefined"!=typeof eruda&&"function"==typeof eruda.init&&(document.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("touchstart",(function(n){var i=n.touches[0];i.clientX>.9*window.innerWidth&&i.clientY>.9*window.innerHeight&&(e.pressTimer=setTimeout((function(){eruda.init(),console.log("[eruda] activated by longpress")}),t||5e3))})),document.addEventListener("touchend",(function(){clearTimeout(e.pressTimer)})))}},{key:"truncateString",value:function(e,t){return e.length>t?e.slice(0,t-3)+"...":e}},{key:"loadFiles",value:function(e){var t,n=this,i=document.getElementsByTagName("head")[0];return"string"==typeof e&&(e=[e]),new Promise((function(o,s){Array.isArray(e)?(e.push((function(){o()})),e.reduce((function(e,o){return e.then((function(){return new Promise((function(e,s){var a=document.createElement("script");if("function"==typeof o)return o(),e();switch(o.split(".").pop()){case"js":default:a.src=o,n.parent.console.log("[intern] Loading %s...",o),i.appendChild(a),a.onload=function(){e()},a.onerror=function(){e()};break;case"css":(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.href=o,i.appendChild(t),e()}}))}))}),Promise.resolve())):o({info:"no files"})}))}},{key:"getArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:[]}},{key:"getURLSearchParam",value:function(e){return"object"===f(this.urlSearchParams)&&"function"==typeof this.urlSearchParams.get?this.urlSearchParams.get(e):null}},{key:"updateSettings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n){return e.readTextFile("famobi.json",(function(i){t=e.mergeObjects(t,i),t=e.mergeObjects(t,e.parent.params),["locale","lang","mock","isVerboseLoggingEnabled","delay","isMuted","persistent"].forEach((function(n){null!==f(e.getURLSearchParam(n))&&(t[n]=e.getURLSearchParam(n))})),t.GAME_ID=t.GAME_ID||t.gameId||t.gameID||t.GAMEID||e.retrieveGameId()||null,["1","true"].includes(t.isVerboseLoggingEnabled)&&(t.console=t.console||{},t.console.isVerboseLoggingEnabled=!0),delete t.gameId,delete t.gameID,delete t.GAMEID,n(t)}))}))}},{key:"mergeObjects",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in t)"object"!==f(t[n])||Array.isArray(t[n])?e[n]=t[n]:e.hasOwnProperty(n)?e[n]=h(h({},e[n]),t[n]):e[n]=t[n];return e}},{key:"readTextFile",value:function(e,t){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",e,!0),n.onload=function(){if(4===n.readyState&&"200"==n.status)try{var e=JSON.parse(n.responseText);t(e)}catch(e){t({})}else t({})},n.onerror=function(){t({})},n.send(null)}},{key:"loadTemplate",value:function(e){return fetch(e).then((function(t){return t.ok||console.error("Failed to load template: %s",e),t.text()}))}},{key:"retrieveGameId",value:function(){for(var e=null,t=document.getElementsByTagName("script"),n=null,i=0;i<t.length;i++){var o=t[i].getAttribute("src");if(o&&o.includes("game-interface.js")){n=t[i];break}}if(n){var s=n.getAttribute("src");"string"==typeof s&&(s.startsWith("http")||(s="http:"+s));try{e=new URL(s).searchParams.get("gameId")}catch(e){}}return e}},{key:"showPauseOverlay",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.getElementById("GameInterfacePauseOverlay");if(null===t){(t=document.createElement("div")).setAttribute("id","GameInterfacePauseOverlay"),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.background="rgba(0, 0, 0, 0.8)",t.style.pointerEvents="none",t.style.display="none",["pointerdown","MSPointerDown","touchstart","mousedown"].forEach((function(e){t.addEventListener(e,(function(e){e.stopPropagation()}))}));var n=document.querySelector("canvas");n&&n.parentNode.insertBefore(t,n.nextSibling)}t&&(t.style.display=e?"block":"none",t.style.pointerEvents=e?"auto":"none")}},{key:"getLevel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!Number.isInteger(e))try{e=parseInt("string"==typeof e?e.replace(/\D/g,""):e)}catch(e){}return Number.isInteger(e)?e:t}},{key:"disablePause",value:function(){var e=this,t=setInterval((function(){if("undefined"!=typeof pc){var e=pc.AppBase||pc.Application;e&&e.getApplication()&&n()}}),100),n=function(){clearInterval(t),e.parent.console.log("Injecting do-not-pause hack...");var n=pc.AppBase||pc.Application,i=n.getApplication(),o=pc.platform.browser,s="hidden",a=void 0,r=function(){document[s]?(pc.platform.browser=!1,i.autoRender=!1,function(){if(a)e.parent.console.warn("manual render is already active!");else{var t=i.stats&&i.stats.frame&&i.stats.frame.fps||60;a=setInterval((function(){return i.tick()}),1e3/Math.max(t,60))}}()):(a&&(pc.platform.browser=o,i.autoRender=!0,i.tick()),a&&clearInterval(a),a=void 0)};i.on("destroy",(function(){"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",r,!1),document.removeEventListener("mozvisibilitychange",r,!1),document.removeEventListener("msvisibilitychange",r,!1),document.removeEventListener("webkitvisibilitychange",r,!1))})),n.prototype.isHidden=function(){return!1},n.prototype.onVisibilityChange=function(){},"undefined"!=typeof document&&(void 0!==document.hidden?(s="hidden",document.addEventListener("visibilitychange",r,!1)):void 0!==document.mozHidden?(s="mozHidden",document.addEventListener("mozvisibilitychange",r,!1)):void 0!==document.msHidden?(s="msHidden",document.addEventListener("msvisibilitychange",r,!1)):void 0!==document.webkitHidden&&(console.warn("webkitHidden"),s="webkitHidden",document.addEventListener("webkitvisibilitychange",r,!1)))}}},{key:"isVerboseLoggingEnabled",value:function(){return!!this.parent.console.isVerboseLoggingEnabled||!0===window.isVerboseLoggingEnabled}}],t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,w(i.key),i)}}function w(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=m(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var k=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.params=n,this.type="log",this.isVerboseLoggingEnabled=!1,this.isForced=!1,this.prefix="GameInterface",this.scopes={"[ads]":{name:"ADS",color:"#3b88c3"},"[analytics]":{name:"ANALYTICS",color:"#9b59b6"},"[storage]":{name:"STORAGE",color:"#03fc2c"},"[gameStates]":{name:"GAMESTATES",color:"#f1c40f"},"[intern]":{name:"INTERN",color:"#253342"},"[console]":{name:"CONSOLE",color:"#F07857"},"[mock]":{name:"MOCK",color:"#32a0a8"},"[leaderboard]":{name:"LDRBRD",color:"#544680"},"[game]":{name:"GAME",color:"#2ecc71"},"[scoring]":{name:"SCORING",color:"#581845"}}},t=[{key:"init",value:function(){var e,t,n,i,o,s,a,r,l;return this.isVerboseLoggingEnabled=void 0!==(null===(e=this.params)||void 0===e?void 0:e.isVerboseLoggingEnabled)?null===(t=this.params)||void 0===t?void 0:t.isVerboseLoggingEnabled:void 0!==(null===(n=this.parent.settings)||void 0===n||null===(i=n.console)||void 0===i?void 0:i.isVerboseLoggingEnabled)?null===(o=this.parent.settings)||void 0===o||null===(s=o.console)||void 0===s?void 0:s.isVerboseLoggingEnabled:this.isVerboseLoggingEnabled,this.prefix=(null===(a=this.params)||void 0===a?void 0:a.prefix)||(null===(r=this.parent.settings)||void 0===r||null===(l=r.console)||void 0===l?void 0:l.prefix)||this.prefix,this.parent.console.log("[console] init..."),new Promise((function(e){e()}))}},{key:"log",value:function(){return this.type="log",this.isForced=!1,this.print.apply(this,arguments)}},{key:"debug",value:function(){return this.type="debug",this.isForced=!1,this.print.apply(this,arguments)}},{key:"warn",value:function(){return this.type="warn",this.isForced=!1,this.print.apply(this,arguments)}},{key:"info",value:function(){return this.type="info",this.isForced=!1,this.print.apply(this,arguments)}},{key:"error",value:function(){return this.type="error",this.isForced=!1,this.print.apply(this,arguments)}},{key:"table",value:function(){return this.type="table",this.isForced=!1,this.print.apply(this,arguments)}},{key:"force",value:function(){return this.type="log",this.isForced=!0,this.print.apply(this,arguments)}},{key:"print",value:function(){var e;if(this.isForced||this.isVerboseLoggingEnabled||!0===window.isVerboseLoggingEnabled){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=n[0].split(" ")[0];o in this.scopes?(n[0]=n[0].replace(o+" ",""),n[0]=n[0].replace(o,""),n[0]="%c".concat(this.prefix,"%c %c").concat(this.scopes[o].name,"%c ")+n[0],n.splice(1,0,"display: inline-block; color: #fff; background: #e74c3c; padding: 1px 4px; border-radius: 3px;"),n.splice(2,0,""),n.splice(3,0,"display: inline-block; color: #fff; background: "+this.scopes[o].color+"; padding: 1px 4px; border-radius: 3px;"),n.splice(4,0,"")):(n[0]="%c".concat(this.prefix,"%c ")+n[0],n.splice(1,0,"display: inline-block; color: #fff; background: #e74c3c; padding: 1px 4px; border-radius: 3px;"),n.splice(2,0,"")),(e=console)[this.type].apply(e,n)}}}],t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,E(i.key),i)}}function E(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=S(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==S(t)?t:t+""}var P=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.params=n,this.savegame={},this.key="savegame",this.prefix="",this.timeout=null,this.hasChanged=!1,this.isAutoSaving=!0,this.delay=0,this.persistent=!0},t=[{key:"init",value:function(){var e,t,n,i,o,s,a,r,l,c,u,d,h,f,g,v,p,y,m,b,w,k,S,A,E=this;return this.key=(null===(e=this.params)||void 0===e?void 0:e.key)||(null===(t=this.parent.settings)||void 0===t||null===(n=t.storage)||void 0===n?void 0:n.key)||this.key,this.prefix=(null===(i=this.params)||void 0===i?void 0:i.prefix)||(null===(o=this.parent.settings)||void 0===o||null===(s=o.storage)||void 0===s?void 0:s.prefix)||(null===(a=this.parent.settings)||void 0===a?void 0:a.GAME_ID)||this.prefix,this.delay=null!==(r=null!==(l=null===(c=this.params)||void 0===c?void 0:c.delay)&&void 0!==l?l:null===(u=this.parent.settings)||void 0===u||null===(d=u.storage)||void 0===d?void 0:d.delay)&&void 0!==r?r:this.delay,this.isAutoSaving=null!==(h=null!==(f=null===(g=this.params)||void 0===g?void 0:g.isAutoSaving)&&void 0!==f?f:null===(v=this.parent.settings)||void 0===v||null===(p=v.storage)||void 0===p?void 0:p.isAutoSaving)&&void 0!==h?h:this.isAutoSaving,this.persistent=null!==(y=null!==(m=null!==(b=null===(w=this.params)||void 0===w?void 0:w.persistent)&&void 0!==b?b:null===(k=this.parent.settings)||void 0===k?void 0:k.persistent)&&void 0!==m?m:null===(S=this.parent.settings)||void 0===S||null===(A=S.storage)||void 0===A?void 0:A.persistent)&&void 0!==y?y:this.persistent,"string"==typeof this.persistent&&(this.persistent=["true","1"].includes(this.persistent)),this.prefix.length&&!this.prefix.endsWith(":")&&(this.prefix+=":"),this.parent.console.log("[storage] init... (prefix: '%s', key: '%s', delay: %s, isAutoSaving: %s)",this.prefix,this.key,this.delay,this.isAutoSaving),this.isAutoSaving&&(document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&E.hasChanged&&(E.parent.console.debug("[storage] forced saving (triggered by 'visibilitychange' event)"),E.save(!0))})),window.addEventListener("beforeunload",(function(e){E.hasChanged&&(E.parent.console.debug("[storage] forced saving (triggered by 'beforeunload' event)"),E.save(!0))}))),new Promise((function(e){if(!E.persistent)return E.parent.console.warn("[storage] initial loading of savegame got skipped (parameter 'persistent' is false)"),Promise.resolve();E.parent._storage.getItem(E.prefix+E.key).then((function(t){try{E.parent.console.debug("[storage] retrieving data...",t),E.savegame=JSON.parse(t)||{},E.parent.console.debug("[storage] data parsed!",E.savegame)}catch(e){E.parent.console.error("[storage] retrieving/parsing data failed...",e),E.savegame={}}e()}))}))}},{key:"setItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!0!==(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&this.parent.isPreview&&this.parent.console.force("[storage] setItem('%s')",e),this.hasChanged=this.savegame[e]!==t,this.savegame[e]=t,this.save(n)}},{key:"getItem",value:function(e){return!0!==(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this.parent.isPreview&&this.parent.console.force("[storage] getItem('%s')",e),void 0!==this.savegame[e]?this.savegame[e]:null}},{key:"removeItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];delete this.savegame[e],this.hasChanged=!0,this.save(t)}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.savegame={},this.hasChanged=!0,this.save(e)}},{key:"save",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.hasChanged||!0===t)&&(!0!==t?this.isAutoSaving&&!this.timeout&&(this.timeout=setTimeout((function(){e.timeout=null,e._save()}),this.delay)):this._save())}},{key:"_save",value:function(){if(this.persistent){var e=JSON.stringify(this.savegame);this.parent.console.debug("[storage] saving data to '%s'...",this.prefix+this.key,e),this.parent._storage.setItem(this.prefix+this.key,e),this.hasChanged=!1}else this.parent.console.warn("[storage] saving of savegame got skipped (parameter 'persistent' is false)")}}],t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,G(i.key),i)}}function G(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=I(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}var O=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.params=n,this.muted=!1,this.paused=!1,this._muted=!1,this._paused=!1,this.isGameplay=!1,this.isGameplayStarted=!1,this.isGameplayStopped=!1,this.callbacks={onAudioStateChange:null,onPauseStateChange:null,onMuteStateChange:null,onGoToHome:null,onGoToNextLevel:null,onGoToLevel:null,onRestartGame:null,onQuitGame:null,onGameOver:null,onGameplayStart:null,onGameplayStop:null,onResize:null},this.score=null,this.progress=null,this.level=null,this.isLandscape=window.innerWidth>window.innerHeight,this.resizeTimeout=null},t=[{key:"init",value:function(){var e=this;return new Promise((function(t){e.parent.console.log("[gameStates] init..."),(!0===e.parent.settings.isMuted||["1","true"].includes(e.parent.settings.isMuted))&&(e.parent.console.log("[gameStates] forcing initial muting..."),e.muted=e._muted=!0),t()}))}},{key:"startGameplay",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.isGameplay=!0),this.isGameplay&&!this.isGameplayStarted&&(this.isGameplayStarted=!0,this.isGameplayStopped=!1,this.parent.console.log("[gameStates] startGameplay"),"function"==typeof this.callbacks.onGameplayStart&&this.callbacks.onGameplayStart())}},{key:"stopGameplay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isGameplay&&!this.isGameplayStopped&&(this.isGameplayStopped=!0,this.isGameplayStarted=!1,this.parent.console.log("[gameStates] stopGameplay"),"function"==typeof this.callbacks.onGameplayStop&&this.callbacks.onGameplayStop()),e&&(this.isGameplay=!1)}},{key:"mute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.parent.console.log("[gameStates] %s%s...",e?"muting":"unmuting",t?" (triggered by ad)":""),this.parent.console.debug("[gameStates] mute()",e,this.muted,this._muted);var n=this.muted;t?e=this.muted=e||this._muted:this._muted=this.muted=e,this.muted!==n&&"function"==typeof this.callbacks.onAudioStateChange&&this.callbacks.onAudioStateChange(e),this.muted!==n&&"function"==typeof this.callbacks.onMuteStateChange&&this.callbacks.onMuteStateChange(e)}},{key:"pause",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.parent.console.log("[gameStates] %s%s...",e?"pausing":"resuming",t?" (triggered by ad)":"");var n=this.paused;t?e=this.paused=e||this._paused:this._paused=this.paused=e,this.paused!==n&&"function"==typeof this.callbacks.onPauseStateChange&&this.callbacks.onPauseStateChange(e)}},{key:"onPauseStateChange",value:function(e){this.callbacks.onPauseStateChange=e}},{key:"onAudioStateChange",value:function(e){this.callbacks.onAudioStateChange=e}},{key:"onMuteStateChange",value:function(e){this.callbacks.onMuteStateChange=e}},{key:"onGoToHome",value:function(e){this.callbacks.onGoToHome=e}},{key:"onGoToNextLevel",value:function(e){this.callbacks.onGoToNextLevel=e}},{key:"onGoToLevel",value:function(e){this.callbacks.onGoToLevel=e}},{key:"onRestartGame",value:function(e){this.callbacks.onRestartGame=e}},{key:"onQuitGame",value:function(e){this.callbacks.onQuitGame=e}},{key:"onGameOver",value:function(e){this.callbacks.onGameOver=e}},{key:"goToHome",value:function(){"function"==typeof this.callbacks.onGoToHome&&this.callbacks.onGoToHome()}},{key:"goToNextLevel",value:function(){"function"==typeof this.callbacks.onGoToNextLevel&&this.callbacks.onGoToNextLevel()}},{key:"goToLevel",value:function(e){"function"==typeof this.callbacks.onGoToLevel&&this.callbacks.onGoToLevel(e)}},{key:"restartGame",value:function(){"function"==typeof this.callbacks.onRestartGame&&this.callbacks.onRestartGame()}},{key:"quitGame",value:function(){"function"==typeof this.callbacks.onQuitGame&&this.callbacks.onQuitGame()}},{key:"gameOver",value:function(){"function"==typeof this.callbacks.onGameOver&&this.callbacks.onGameOver()}},{key:"isMuted",value:function(){return this.muted}},{key:"isPaused",value:function(){return this.paused}},{key:"onGameplayStart",value:function(e){this.callbacks.onGameplayStart=e}},{key:"onGameplayStop",value:function(e){this.callbacks.onGameplayStop=e}},{key:"onResize",value:function(e){this.callbacks.onResize=e}}],t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function L(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,T(i.key),i)}}function T(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=C(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}var D=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.params=n,this.scores={current:{},best:{}},this.isAutoSaving=!1,this.key="scoring"},t=[{key:"init",value:function(){var e=this;return new Promise((function(t){var n,i,o,s,a,r,l,c,u;e.key=(null===(n=e.params)||void 0===n?void 0:n.key)||(null===(i=e.parent.settings)||void 0===i||null===(o=i.scoring)||void 0===o?void 0:o.key)||e.key,e.isAutoSaving=void 0!==(null===(s=e.params)||void 0===s?void 0:s.isAutoSaving)?null===(a=e.params)||void 0===a?void 0:a.isAutoSaving:void 0!==(null===(r=e.parent.settings)||void 0===r||null===(l=r.scoring)||void 0===l?void 0:l.isAutoSaving)?null===(c=e.parent.settings)||void 0===c||null===(u=c.scoring)||void 0===u?void 0:u.isAutoSaving:e.isAutoSaving,e.parent.console.log("[scoring] init... (key: '%s', isAutoSaving: %s)",e.key,e.isAutoSaving?"true":"false");try{e.parent.console.debug("[scoring] retrieving scores...");var d=e.parent.storage.getItem(e.key,!0)||"{}";e.scores.best=JSON.parse(d),e.parent.console.debug("[scoring] scores parsed!",e.scores)}catch(t){e.parent.console.error("[scoring] retrieving/parsing scores failed...",t),e.scores.best={}}t()}))}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Number.isInteger(t)||(t="endless"),this.scores.current=this.scores.current||{},this.scores.best=this.scores.best||{},this.scores.current[t]=e,this.scores.best[t]=this.scores.best[t]||0,e>this.scores.best[t]&&(this.scores.best[t]=e,(!0===n||this.isAutoSaving)&&this.save())}},{key:"get",value:function(e){return Number.isInteger(e)||(e="endless"),this.scores.current=this.scores.current||{},this.scores.best=this.scores.best||{},e in this.scores.current||(this.scores.current[e]=0),e in this.scores.best||(this.scores.best[e]=0),{current:this.scores.current[e],best:this.scores.best[e]}}},{key:"save",value:function(){var e=JSON.stringify(this.scores.best);this.parent.console.log("[scoring] saving '%s'...",this.key,e),this.parent.storage.setItem(this.key,e,!1,!0)}},{key:"reset",value:function(){this.scores.current={},this.scores.best={},this.save()}}],t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,x(i.key),i)}}function M(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=j(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}var F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M(this,"_storage",{setItem:function(e,t){return Promise.resolve(window.localStorage.setItem(e,t))},getItem:function(e){return Promise.resolve(window.localStorage.getItem(e))}}),this.gameFiles=t,this.params=n,this.settings={gameID:null,locale:"en",files:[],features:{audio:!0,pause:!0,score:!0,progress:!0,copyright:!0,credits:!0,version:!0,rewarded:!0,tutorial:!0,visibilitychange:!0,home:!0},ads:{types:{initial:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0},interstitial:{enabled:!0,cooldown:60,preload:250,retry:2e3,timeout:250,state:0},rewarded:{enabled:!0,preload:500,retry:2e3,timeout:250,state:0,reward:!0},banner:{enabled:!1,preload:250,retry:2e3,timeout:250,state:0}}},gameanalytics:{isEnabled:!1,url:"//download.gameanalytics.com/js/GameAnalytics-4.4.5.min.js",build:"",game_key:"",secret_key:"",setEnabledInfoLog:!0,setEnabledEventSubmission:!0},console:{isVerboseLoggingEnabled:!1},storage:{key:"savegame",prefix:""}}}return t=e,n=[{key:"init",value:function(){var t=this;return this.console=new k(this),this.ads=new a(this),this.gameAnalytics=new u(this),this.helpers=new y(this),this.storage=new P(this),this.gameStates=new O(this),this.scoring=new D(this),this.console.log("[intern] init..."),new Promise((function(n){t.helpers.updateSettings(t.settings).then((function(i){t.settings=i,t.console.init().then((function(){t.helpers.loadFiles(t.settings.files||[]).then((function(){t._initSDK().then((function(){t.ads.init().then((function(){t.storage.init().then((function(){t.scoring.init().then((function(){t.gameAnalytics.init().then((function(){t.gameStates.init().then((function(){t.helpers.loadFiles(t.gameFiles).then((function(){console.log("%cPortalIF: %c".concat(t.constructor.version," %c| MainGameIF: %c").concat(e.version," %c| Game: %c").concat(t.settings.version||"n/a"),"color: #3498db; font-weight: bold;","color: #2ecc71;","color: #95a5a6;","color: #e74c3c; font-weight: bold;","color: #f1c40f;","color: #9b59b6; font-weight: bold;"),n()}))}))}))}))}))}))})).catch((function(e){t.console.error("[intern]",e)}))}))}))}))}))}},{key:"hasFeature",value:function(e){return!!this.settings.features[e]}},{key:"sendPreloadProgress",value:function(e){}},{key:"gameReady",value:function(){this.console.log("[game] gameReady()")}},{key:"gameStart",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gameStates.level=e,this.console.log("[game] gameStart(%s)",e),this.track("ga:progression",{progressionStatus:"Start",progression01:e}),Promise.resolve()}},{key:"sendProgress",value:function(e){}},{key:"sendScore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.gameStates.score=e}},{key:"gameComplete",value:function(){return this.console.log("[game] gameComplete()"),this.track("ga:progression",{progressionStatus:"Complete",progression01:this.gameStates.level}),Promise.resolve()}},{key:"gameOver",value:function(){return this.console.log("[game] gameOver()"),this.track("ga:progression",{progressionStatus:"Fail",progression01:this.gameStates.level,progression02:"gameover"}),Promise.resolve()}},{key:"gameQuit",value:function(){return this.console.log("[game] gameQuit()"),this.track("ga:progression",{progressionStatus:"Fail",progression01:this.gameStates.level,progression02:"quit"}),Promise.resolve()}},{key:"gamePause",value:function(){return this.console.log("[game] gamePause()"),Promise.resolve()}},{key:"gameResume",value:function(){return this.console.log("[game] gameResume()"),Promise.resolve()}},{key:"gameMuted",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.console.log("[game] gameMuted(%s)",e?"":"false")}},{key:"onGoToHome",value:function(e){return this.gameStates.onGoToHome(e)}},{key:"onGoToNextLevel",value:function(e){return this.gameStates.onGoToNextLevel(e)}},{key:"onGoToLevel",value:function(e){return this.gameStates.onGoToLevel(e)}},{key:"onRestartGame",value:function(e){return this.gameStates.onRestartGame(e)}},{key:"onQuitGame",value:function(e){return this.gameStates.onQuitGame(e)}},{key:"onGameOver",value:function(e){return this.gameStates.onGameOver(e)}},{key:"onAudioStateChange",value:function(e){return this.gameStates.onAudioStateChange(e)}},{key:"onMuteStateChange",value:function(e){return this.gameStates.onMuteStateChange(e)}},{key:"isMuted",value:function(){return this.gameStates.isMuted()}},{key:"onPauseStateChange",value:function(e){return this.gameStates.onPauseStateChange(e)}},{key:"isPaused",value:function(){return this.gameStates.isPaused()}},{key:"isInterstitialAdAvailable",value:function(e){return this.ads.isInterstitialAdAvailable(e)}},{key:"showInterstitialAd",value:function(e,t){var n=this;return new Promise((function(i){n._showInterstitialAd(e,t).then((function(){n.console.debug("[ads] _showInterstitialAd('%s', '%s') %cresolved",e,t,"color: green"),n.ads.show("interstitial").then((function(){i()}))})).catch((function(o){n.console.debug("[ads] _showInterstitialAd('%s', '%s') %crejected",e,t,"color: red"),i()}))}))}},{key:"hasRewardedAd",value:function(e){return this.ads.hasRewardedAd(e)}},{key:"hasInterstitialAd",value:function(e){return this.ads.hasInterstitialAd(e)}},{key:"isRewardedAdAvailable",value:function(e){return this.ads.isRewardedAdAvailable(e)}},{key:"showRewardedAd",value:function(e){var t=this;return new Promise((function(n){t._showRewardedAd(e).then((function(){t.console.debug("[ads] _showRewardedAd('%s') %cresolved",e,"color: green"),t.ads.show("rewarded").then((function(e){n(e)}))})).catch((function(i){t.console.debug("[ads] _showRewardedAd('%s') %crejected",e,"color: red"),n()}))}))}},{key:"onRewardedAdAvailabilityChange",value:function(e){return this.ads.onRewardedAdAvailabilityChange(e)}},{key:"onInterstitialAdAvailabilityChange",value:function(e){return this.ads.onInterstitialAdAvailabilityChange(e)}},{key:"onOffsetChange",value:function(e){return this.ads.onOffsetChange(e)}},{key:"getOffsets",value:function(){return this.ads.getOffsets()}},{key:"getCurrentLanguage",value:function(){return this.helpers.getLocale()}},{key:"innerWidth",get:function(){return this.ads.innerWidth}},{key:"innerHeight",get:function(){return this.ads.innerHeight}},{key:"track",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gameAnalytics.track(e,t)}},{key:"log",value:function(){}},{key:"_initSDK",value:function(){return Promise.resolve()}},{key:"_preloadAd",value:function(){return Promise.resolve()}},{key:"_hasRewardedAd",value:function(e){return!0}},{key:"_hasInterstitialAd",value:function(e){return!0}},{key:"_showInterstitialAd",value:function(){return Promise.resolve()}},{key:"_showRewardedAd",value:function(){return Promise.resolve()}},{key:"_showAd",value:function(e){return"rewarded"===e?Promise.resolve(!0):Promise.resolve()}},{key:"getCopyrightLogoURL",value:function(e,t){var n="copyright"+("light"===(t=["dark","light"].includes(t)?t:"dark")?"/light":"");return this.helpers.getImageURL(n,e,"logo.png")}},{key:"info",value:function(){return{ads:this.ads.info}}}],n&&_(t.prototype,n),i&&_(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();M(F,"version","1.9.7")},565:(e,t,n)=>{n.d(t,{C:()=>y});var i=n(748);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function a(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"auth",{parent:null,callbacks:{onAuthStatusChange:null,onOpenAuthForm:null},isUserAuthorized:function(){return this.parent.console.log("[mock] auth.isUserAuthorized()"),new Promise((function(e){setTimeout((function(){e(Math.random()>.5)}),250)}))},onAuthStatusChange:function(e){this.parent.console.log("[mock] auth.onAuthStatusChange(callback)",o(e)),"function"==typeof e&&(this.callbacks.onAuthStatusChange=e)},onOpenAuthForm:function(e){this.parent.console.log("[mock] auth.onOpenAuthForm(callback)",o(e)),"function"==typeof e&&(this.callbacks.onOpenAuthForm=e)}}),a(this,"ads",{parent:null,showInterstitialAd:function(){var e=this;return new Promise((function(t){e.parent.console.log("[mock] ads.showInterstitialAd"),e.parent.ads.testAd().then((function(e){t()}))}))},showRewardAd:function(){var e=this;return new Promise((function(t){e.parent.console.log("[mock] ads.showRewardAd");var n=!1;e.parent.ads.testAd("rewarded").then((function(e){var i;n="rewarded"===e.type&&!0===(null===(i=e.args)||void 0===i?void 0:i.success),t({value:n})}))}))}}),a(this,"analytics",{parent:null,CONSOLE:1,GOOGLE:2,APP_INSIGHTS:3,ALL:1e3,dimensions:null,configureProvider:function(e){var t=this;return new Promise((function(n){setTimeout((function(){t.parent.console.log("[mock] analytics.configureProvider(data)",e),n()}),250)}))},sendEvent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.parent.console.log("[mock] analytics.sendEvent(eventCategory, eventAction, dimensions)",e,t,n)},sendMenuActionsEvent:function(e){this.parent.console.log("[mock] analytics.sendMenuActionsEvent('%s')",e)},sendAppStartedEvent:function(){this.parent.console.log("[mock] analytics.sendAppStartedEvent()")},sendMainScreenReadyEvent:function(){this.parent.console.log("[mock] analytics.sendMainScreenReadyEvent()")},sendStartButtonClickedEvent:function(e){this.parent.console.log("[mock] analytics.sendStartButtonClickedEvent('%s')",e)},sendFirstMoveEvent:function(){this.parent.console.log("[mock] analytics.sendFirstMoveEvent()")},sendFirstRightAnswerEvent:function(){this.parent.console.log("[mock] analytics.sendFirstRightAnswerEvent()")},setGameVersion:function(e){this.parent.console.log("[mock] analytics.setGameVersion('%s')",e)},sendFirstMatchEvent:function(){this.parent.console.log("[mock] analytics.sendFirstMatchEvent()")},sendFirstShotEvent:function(){this.parent.console.log("[mock] analytics.sendFirstShotEvent()")},sendGameScreenPageView:function(){this.parent.console.log("[mock] analytics.sendGameScreenPageView()")},sendHelpEvent:function(){this.parent.console.log("[mock] analytics.sendHelpEvent()")},sendFUEEvent:function(){this.parent.console.log("[mock] analytics.sendFUEEvent()")},sendPageView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.parent.console.log("[mock] analytics.sendPageView('%s', dimensions)",e,t)},sendReshuffleEvent:function(){this.parent.console.log("[mock] analytics.sendReshuffleEvent()")},sendErrorEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.parent.console.log("[mock] analytics.sendErrorEvent(dimensions)",e)},sendRoundEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.parent.console.log("[mock] analytics.sendRoundEvent(dimensions)",e)},sendGameplayReadyEvent:function(){this.parent.console.log("[mock] analytics.sendGameplayReadyEvent()")},sendRoundEndEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.parent.console.log("[mock] analytics.sendRoundEndEvent('%s', dimensions)",e,t)},sendGameEndEvent:function(e){this.parent.console.log("[mock] analytics.sendGameEndEvent('%s')",e)},sendGameOverPageView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.parent.console.log("[mock] analytics.sendGameOverPageView(dimensions)",e)},setDimensions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.parent.console.log("[mock] analytics.setDimensions(dimensions)",e),this.dimensions=e},trackException:function(e){this.parent.console.log("[mock] analytics.trackException(error)",e)}}),a(this,"lifecycle",{parent:null,LifecycleEvent:{GAME_PAUSE:"GAME_PAUSE",GAME_RESUME:"GAME_RESUME"},registerEventCallback:function(e,t){this.parent.console.log("[mock] lifecycle.registerEventCallback('%s', %s)",e,o(t))},onTestReady:function(){this.parent.console.log("[mock] lifecycle.onTestReady()")},onGameEnd:function(){this.parent.console.log("[mock] lifecycle.onGameEnd()")},onInteract:function(){this.parent.console.log("[mock] lifecycle.onInteract()")},onGameStart:function(){this.parent.console.log("[mock] lifecycle.onGameStart()")},onChangeScore:function(e){this.parent.console.log("[mock] lifecycle.onChangeScore(%s)",e)}}),a(this,"persistence",{parent:null,getLocalStorageItem:function(e){return this.parent.console.log("[mock] persistence.getLocalStorageItem('%s')",e),Promise.resolve(window.localStorage.getItem("local:"+e))},setLocalStorageItem:function(e,t){return this.parent.console.log("[mock] persistence.setLocalStorageItem('%s', '%s')",e,this.parent.helpers.truncateString(t,100)),Promise.resolve(window.localStorage.setItem("local:"+e,t))},getRemoteStorageItem:function(e){return this.parent.console.log("[mock] persistence.getRemoteStorageItem('%s')",e),Promise.resolve(window.localStorage.getItem("remote:"+e))},setRemoteStorageItem:function(e,t){return this.parent.console.log("[mock] persistence.setRemoteStorageItem('%s', '%s')",e,this.parent.helpers.truncateString(t,100)),Promise.resolve(window.localStorage.setItem("remote:"+e,t))}}),this.parent=t,this.params=n,this.isDebugMode=!1,this.auth.parent=t,this.analytics.parent=t,this.lifecycle.parent=t,this.persistence.parent=t,this.ads.parent=t,this.version="2.0.0",this.parent.console.info("[mock] Arkadium mocked!")},(t=[{key:"getInstance",value:function(){return Promise.resolve(this)}},{key:"debugMode",value:function(e){this.parent.console.log("[mock] debugMode(%s)",e?"true":"false"),this.isDebugMode=e}},{key:"test",value:function(e,t){switch(e){case"onOpenAuthForm":"function"==typeof this.auth.callbacks.onOpenAuthForm&&this.auth.callbacks.onOpenAuthForm(t);break;case"onAuthStatusChange":"function"==typeof this.auth.callbacks.onAuthStatusChange&&this.auth.callbacks.onAuthStatusChange(t)}}}])&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,p(i.key),i)}}function d(e,t,n){return t=f(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function v(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),v(e=d(this,t,[n,i]),"_storage",{parent:null,getItem:function(e){var t=this;return new Promise((function(n){t.parent.useRemoteStorage?(t.parent.console.log("[intern] getRemoteStorageItem"),window.sdk.persistence.getRemoteStorageItem(e).then((function(i){null===i?(t.parent.console.log("No remote data found -> Migrating storage from local to remote"),window.sdk.persistence.getLocalStorageItem(e).then((function(e){n(e)}))):n(i)})).catch((function(e){t.parent.console.log("Error initializing remote storage:",e),n(null)}))):(t.parent.console.log("[intern] getLocalStorageItem"),window.sdk.persistence.getLocalStorageItem(e).then((function(e){n(e)})).catch((function(e){t.parent.console.log("Error initializing local storage:",e),n(null)})))}))},setItem:function(e,t){var n=this;return new Promise((function(i){n.parent.useRemoteStorage?window.sdk.persistence.setRemoteStorageItem(e,t).catch((function(e){n.parent.console.log("Failed to save to remote storage:",e)})):window.sdk.persistence.setLocalStorageItem(e,t).catch((function(e){n.parent.console.log("Failed to save to local storage:",e)})),i()}))}}),e.isDebugMode=!1,e.isUserAuthorized=!1,e.useRemoteStorage=!1,e.appInsightsID=null,e.gameVersion=null,e.events=[],e._storage.parent=e,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,i=[{key:"_initSDK",value:function(){var e=this;return new Promise((function(t,n){e.helpers.loadFiles(["https://cdn.jsdelivr.net/npm/sweetalert2@11","https://developers.arkadium.com/cdn/sdk/v2/sdk.js"]).then((function(){var i,o,s;if(e.ads.types.interstitial.enabled=!1,e.appInsightsID=null===(i=e.settings)||void 0===i?void 0:i.appInsightsID,e.gameVersion=null===(o=e.settings)||void 0===o?void 0:o.gameVersion,e.levelCount=null===(s=e.settings)||void 0===s?void 0:s.levelCount,"string"!=typeof e.appInsightsID||!e.appInsightsID.length)return n("appInsightsID is missing!");["1","true"].includes(e.settings.mock)&&(window.ArkadiumGameSDK=new l(e)),e.isDebugMode=!!e.helpers.getURLSearchParam("isDebugMode");var a=function(){if(void 0===window.ArkadiumGameSDK)return n("ArkadiumGameSDK is undefined");window.ArkadiumGameSDK.getInstance().then((function(i){if(void 0===i)return n("ArkadiumGameSDK.getInstance() - SDK is undefined");window.sdk=i,e.isDebugMode&&window.sdk.debugMode(e.isDebugMode),window.sdk.analytics.configureProvider({provider:window.sdk.analytics.APP_INSIGHTS,appId:e.appInsightsID}),"string"==typeof e.gameVersion&&e.gameVersion.length&&window.sdk.analytics.setGameVersion(e.gameVersion),window.addEventListener("beforeunload",(function(t){window.sdk.lifecycle.onGameEnd(),e.isDebugMode&&t.preventDefault()})),window.addEventListener("visibilitychange",(function(e){"hidden"!==document.visibilityState&&window.sdk.lifecycle.onInteract()})),window.addEventListener("focus",(function(e){"hidden"!==document.visibilityState&&sdk.lifecycle.onInteract()}));var o=function(t){if(e.console.log("[intern] auth.onAuthStatusChange() - isAuthorized: ",t?"true":"false"),e.isUserAuthorized!==t){var n=function(){location.reload()};"undefined"!=typeof Swal?Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.onmouseenter=Swal.stopTimer,e.onmouseleave=Swal.resumeTimer},didDestroy:function(){n()}}).fire({icon:"success",title:t?"Signed in successfully":"Signed out successfully"}):n()}};window.sdk.auth.onOpenAuthForm((function(t){e.console.log("[intern] auth.onOpenAuthForm() - isOpened: ",t?"true":"false")})),window.sdk.lifecycle.registerEventCallback(window.sdk.lifecycle.LifecycleEvent.GAME_PAUSE,(function(){e.gameStates.pause(!0)})),window.sdk.lifecycle.registerEventCallback(window.sdk.lifecycle.LifecycleEvent.GAME_RESUME,(function(){e.gameStates.pause(!1)})),["train-miner"].includes(e.settings.GAME_ID)&&function(t){var n=document.getElementById(t);if(null!==n){var i,o=function(){i=setTimeout((function(){null!==e.gameStates.level&&(e.events.includes("sendFirstMoveEvent")||(e.events.push("sendFirstMoveEvent"),window.sdk.analytics.sendFirstMoveEvent()),l())}),250)},s=function(){return clearTimeout(i)},a=function(){return clearTimeout(i)},r=function(){return clearTimeout(i)};n.addEventListener("pointerdown",o),n.addEventListener("pointerup",s),n.addEventListener("pointercancel",a),n.addEventListener("pointerleave",r)}function l(){n.removeEventListener("pointerdown",o),n.removeEventListener("pointerup",s),n.removeEventListener("pointercancel",a),n.removeEventListener("pointerleave",r)}}("game"),window.sdk.auth.isUserAuthorized().then((function(n){e.isUserAuthorized=!!n,e.console.log("[intern] isUserAuthorized: %s",e.isUserAuthorized?"true":"false"),e.useRemoteStorage=e.isUserAuthorized,window.sdk.auth.onAuthStatusChange(o),t()})).catch((function(e){window.sdk.auth.onAuthStatusChange(o),t()}))})).catch((function(t){return e.console.error("[intern] ArkadiumGameSDK.getInstance()",t),n("ArkadiumGameSDK.getInstance()")}))};e.console.log("document.readyState: %s",document.readyState),"loading"===document.readyState?(e.console.info("add event listener for DOMContentLoaded ..."),document.addEventListener("DOMContentLoaded",(function(){a()}))):a()}))}))}},{key:"gameReady",value:function(){this.console.log("gameReady()"),this.gameStates.ready||(this.gameStates.ready=!0,window.sdk.lifecycle.onTestReady())}},{key:"sendProgress",value:function(e){null!==this.gameStates.progress&&this.gameStates.progress!==e&&(this.events.includes("sendFirstMoveEvent")||(this.events.push("sendFirstMoveEvent"),window.sdk.analytics.sendFirstMoveEvent())),this.gameStates.progress=e}},{key:"sendScore",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.gameStates.score=e,this.gameStates.hasFirstMatchEventSent||(this.gameStates.hasFirstMatchEventSent=!0,window.sdk.analytics.sendFirstMatchEvent())}},{key:"gameStart",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(n){e.gameStates.level=t,e.console.log("[game] gameStart(%s)",t),window.sdk.analytics.sendGameScreenPageView(),window.sdk.lifecycle.onGameStart(),window.sdk.analytics.sendRoundEvent({round:t}),window.sdk.analytics.sendGameplayReadyEvent(),n()}))}},{key:"gameComplete",value:function(){var e=this;return new Promise((function(t){e.console.log("[game] gameComplete()"),window.sdk.analytics.sendRoundEndEvent("Finished"),void 0!==e.levelCount?e.levelCount===e.gameStates.level&&window.sdk.analytics.sendGameEndEvent("Win"):window.sdk.analytics.sendGameEndEvent("Win"),t()}))}},{key:"gameOver",value:function(){var e=this;return new Promise((function(t){e.console.log("[game] gameOver()"),window.sdk.analytics.sendRoundEndEvent("Not_Finished"),void 0!==e.levelCount?e.levelCount===e.gameStates.level&&window.sdk.analytics.sendGameEndEvent("Lose"):window.sdk.analytics.sendGameEndEvent("Lose"),window.sdk.analytics.sendGameOverPageView(),t()}))}},{key:"gameQuit",value:function(){var e=this;return new Promise((function(t){e.console.log("[game] gameQuit()"),window.sdk.analytics.sendRoundEndEvent("Not_Finished"),window.sdk.analytics.sendGameEndEvent("Quit"),t()}))}},{key:"_preloadAd",value:function(e){return Promise.resolve()}},{key:"_showInterstitialAd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.ads.isValid(e)?Promise.resolve():(this.console.warn("[intern] rejecting showInterstitialAd('%s')... (eventId is not valid)",e),Promise.reject())}},{key:"_showRewardedAd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.ads.isValid(e,"rewarded")?Promise.resolve():(this.console.warn("[intern] rejecting showRewardedAd('%s')... (eventId is not valid)",e),Promise.reject())}},{key:"_showAd",value:function(e){var t=this;return new Promise((function(n){"interstitial"===e?window.sdk.ads.showInterstitialAd().then((function(){n()})):window.sdk.ads.showRewardAd().then((function(e){t.console.log("[ads] reward.value",e.value),n(e.value)}))}))}}],i&&u(n.prototype,i),o&&u(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,o}(i.m);v(y,"version","1.0.6")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i;n(748);i=n(565).C,window.GameInterface={init:function(e,t){return new Promise((function(n){window.GameInterface=new i(e,t),window.GameInterface.init().then((function(){n()}))}))}}})();