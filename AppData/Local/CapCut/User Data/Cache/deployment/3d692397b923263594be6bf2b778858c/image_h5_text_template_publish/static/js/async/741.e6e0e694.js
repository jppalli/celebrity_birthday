"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[741],{56576:(e,t,n)=>{n.d(t,{Z:()=>r});n(50959);var s=n(84875),l=n.n(s),i=n(84736),c=n(48240),a=n(11527);const r=({className:e,value:t,selected:n,disabled:s,onClick:r})=>(0,a.jsx)(i.Vp,{className:l()(e,c.Z.tag,n&&c.Z.selected,s&&c.Z.disabled),color:n?"cyan":void 0,onClick:()=>null==r?void 0:r(t),children:t},t)},6068:(e,t,n)=>{n.d(t,{Z:()=>u});var s=n(50959),l=n(84875),i=n.n(l),c=n(84736),a=n(56576),r=n(70498),o=n(11527);const u=({className:e,title:t,loading:n,loadingText:l,value:u,options:d,onSelect:h})=>{const p=(0,s.useCallback)((e=>u.includes(e)),[u]),g=(0,s.useMemo)((()=>d.filter((e=>!u.includes(e)))),[u,d]);return 0===g.length?null:(0,o.jsxs)("div",{className:i()([r.Z.block,e]),children:[(0,o.jsx)("p",{className:r.Z.title,children:t}),(0,o.jsx)("div",{className:r.Z.content,children:n?(0,o.jsxs)("div",{className:r.Z.loading,children:[(0,o.jsx)("span",{className:r.Z.text,children:l}),(0,o.jsx)(c.yC,{size:"small"})]}):g.map((e=>(0,o.jsx)(a.Z,{selected:p(e),value:e,onClick:()=>h(e)},e)))})]})}},85471:(e,t,n)=>{n.d(t,{Z:()=>u});var s=n(50959),l=n(23479),i=n(45599),c=n(25807),a=n(69905),r=n(6068),o=n(11527);const u=(0,l.Pi)((({value:e,onSelect:t})=>{const[n,l]=(0,s.useState)([]),{t:u}=(0,i.$)();return(0,s.useEffect)((()=>{const e=(0,a.cF)(a.Qt.TagEachUser,c.$.userInfo.uid).get();l(e)}),[c.$.userInfo.uid,e]),(0,o.jsx)(r.Z,{title:u("pc_recently_used_web"),value:e,options:n,onSelect:t})}))},12890:(e,t,n)=>{var s=n(50959),l=n(23479),i=n(26800),c=n(3298),a=n(45599),r=n(6068),o=n(94435),u=n(11527);(0,l.Pi)((({title:e,uri:t,value:n,itemType:l,onSelect:d})=>{const[h,p]=(0,s.useState)([]),[g,v]=(0,s.useState)([]),[m,_]=(0,s.useState)(!1),f=(0,s.useRef)({selfConfigTagsReady:{}}),{t:b}=(0,a.$)(),w=(0,s.useMemo)((()=>[...g,...h]),[h,g]),x=(0,i.Z)((e=>{const{title:t,uri:n}=e;return t?f.current.cvid&&f.current.uri===n?{cvid:f.current.cvid,title:t}:n?{image_uri:n,title:t}:null:null})),y=(0,s.useCallback)((async()=>{try{_(!0);const n=x({title:e,uri:t});await Promise.all([n&&(0,o.Uz)(n).then((e=>{v(e.cv_tags),f.current.cvid=e.cvid,n.image_uri&&(f.current.uri=n.image_uri)})),!f.current.selfConfigTagsReady[l]&&(0,o.On)({effect_type:l}).then((e=>{p(e.rec_tags),f.current.selfConfigTagsReady[l]=!0}))])}finally{_(!1)}}),[e,t,l]);return(0,c.Z)(y,500,[y]),(0,s.useEffect)((()=>{y()}),[l]),(0,u.jsx)(r.Z,{title:b("recommend_signature_web"),loading:m,loadingText:b("loading_web"),value:n,options:w,onSelect:d})}))},95968:(e,t,n)=>{n.d(t,{u:()=>y});var s=n(50959),l=n(10422),i=n(84736),c=n(26800),a=n(3298),r=n(45599),o=n(23479),u=n(25807),d=n(69905),h=n(60251),p=n(8129),g=n(86439),v=n(94435),m=n(16743),_=n(85471),f=(n(12890),n(56576)),b=n(9006),w=n(11527);const x=(0,o.Pi)((({recommendConfig:e,value:t=[],itemType:n,disabled:o,disableRecommend:x,disableLatest:y,onChange:Z,placeholder:C,max:k=15,temporaryId:j,ignoreAddTagOnBlurSelector:S,onRecentTagSelect:E})=>{const T=(0,s.useRef)(!1),[I,L]=(0,s.useState)(""),[N,R]=(0,s.useState)(""),M=(0,s.useRef)(!1),A=M.current?N:I,[O,P]=(0,s.useState)([]),[D,F]=(0,s.useState)([]),{t:$}=(0,r.$)(),z=e=>(0,d.cF)(d.Qt.TagEachUser,u.$.userInfo.uid).set("add",[e]),B=(0,c.Z)((e=>{F(I?e:[])}));(0,a.Z)((async()=>{if(!n||!I)return;const e=await(0,v.EO)({query:I,count:10}),t=(null==e?void 0:e.sug_tags)||[];B(t)}),500,[I,n]),(0,s.useEffect)((()=>{I||F([])}),[I]);const Q=(0,s.useCallback)((e=>{if(k&&e.length>k)return i.FN.error($("pc_stickers_release_max_tag_web",{X:k})),void(null==Z||Z(e.slice(0,k)));null==Z||Z(e)}),[Z]),U=(0,c.Z)((e=>{t.includes(e)||Q([...t,e])})),Y=(0,s.useMemo)((()=>new h.l),[]),H=(0,c.Z)((async e=>{const n=await Y.lock("",(async()=>{if(t.includes(e))return!0;let n=!1;try{const t=await(0,v._K)({words:e,scene:v.Xb.Tag});n=!1===(null==t?void 0:t.is_hit)}catch(s){return(0,p.RF)("[TagSelect] call checkAntiDirt failed",s,{tag:e}),i.FN.error($("pc_tag_retry_web")),!1}return n?(U(e),!0):((0,p.c6)("[TagSelect] checkAntiDirt not passed",{tag:e}),i.FN.error($("pc_tag_illegal_fail_web")),!1)}));return null!=n&&n})),V=(0,c.Z)((e=>{if(0===e.length)return;const n=t.filter((t=>!e.includes(t)));Q(n)})),W=(0,s.useRef)(null),{saveSelectionIfNeeded:q}=(0,m.u)({getInputElem:()=>{var e;return null===(e=W.current)||void 0===e?void 0:e.inputRef.current}}),X=e=>{const t=(0,g.aF)(e,30);q(t),L(t)},K=(0,c.Z)((e=>{X(""),t.includes(e)?V([e]):(U(e),z(e))})),G=e=>{const t=O.includes(e);P(t?O.filter((t=>t!==e)):[...O,e])},J=(0,c.Z)((()=>{V(O),P([])})),ee=(0,c.Z)((()=>W.current&&W.current.inputRef.current&&W.current.tagInputRef.current?{tagInput:W.current,tagInputElem:W.current.tagInputRef.current,inputElem:W.current.inputRef.current}:null)),te=(0,c.Z)((e=>{const t=ee();return!!(t&&e&&e instanceof Element)&&e.closest(".semi-tagInput")===t.tagInputElem})),ne=(0,c.Z)((e=>!!(e&&e instanceof Element)&&null!==e.closest(".semi-tag"))),se=(0,c.Z)((e=>{const t=e.target,n=ee();if(!n||!te(t))return;const{tagInput:s,tagInputElem:l,inputElem:i}=n,{selectionStart:c,selectionEnd:a}=i;return O.length>0&&ne(t)?(J(),null==i||i.setSelectionRange(0,0),void s.focus()):void 0})),le=(0,c.Z)((e=>{const t=e.target;ee()&&te(t)&&ne(t)&&(te(e.relatedTarget)&&ne(e.relatedTarget)||P([]))}));(0,s.useEffect)((()=>{const e=e=>{"Delete"===e.code||"Backspace"===e.code?(T.current=!0,se(e)):T.current=!1};return window.addEventListener("keydown",e,!0),window.addEventListener("blur",le,!0),()=>{window.removeEventListener("keydown",e,!0),window.removeEventListener("blur",le,!0)}}),[]);const ie=(0,c.Z)((e=>{e.replace(/ {1,}/g,"")===I.replace(/ {1,}/g,"")&&X("")})),ce=async e=>{const[t]=e;Promise.resolve().then((()=>X(I)));const n=t.replace(/ {1,}/g,"");if(0===n.length)return;await H(n)&&(z(n),ie(I))},ae=async e=>{if(M.current)return void R(e);const t=e.replace(/ {1,}$/,""),n=t.replace(/ {1,}/g,"");if(X(t),t===e||!t||T.current)return;await H(n)&&(z(n),ie(I))};(0,s.useEffect)((()=>{var e;const t=null===(e=W.current)||void 0===e?void 0:e.inputRef.current;if(!t)return;const n=()=>{M.current=!0,R(t.value)},s=()=>(0,l.unstable_batchedUpdates)((()=>{M.current=!1,R(""),ae(t.value)}));return t.addEventListener("compositionstart",n),t.addEventListener("compositionend",s),()=>{t.removeEventListener("compositionstart",n),t.removeEventListener("compositionend",s)}}),[]);(0,s.useEffect)((()=>{j&&L("")}),[j]);return(0,w.jsxs)("div",{className:b.Z.tagSelect,children:[(0,w.jsx)(i.Lt,{position:"bottomLeft",trigger:"focus",className:b.Z.suggestListDropdown,style:{maxHeight:200,overflow:"scroll"},render:(0,w.jsx)(i.Lt.Menu,{children:D.map((e=>(0,w.jsx)(i.Lt.Item,{className:b.Z.dropItem,onClick:()=>K(e),children:e},e)))}),children:(0,w.jsx)(i.EG,{ref:W,inputValue:A,onInputChange:ae,value:t,placeholder:C,renderTagItem:(e,t,n)=>(0,w.jsx)(f.Z,{value:e,selected:O.includes(e),disabled:o,onClick:G},e),onAdd:ce,onBlur:e=>{if(e.relatedTarget&&e.relatedTarget instanceof Element){const t=[`.${b.Z.suggestListDropdown}`,S].filter((e=>e)).join(",");if(null!==e.relatedTarget.closest(t)||ne(e.relatedTarget))return}ce([I])},disabled:o})}),!1,!o&&!y&&(0,w.jsx)(_.Z,{value:t,onSelect:e=>{K(e),null==E||E()}})]})})),y=(0,i.Q2)(x)},31686:(e,t,n)=>{n.d(t,{Z:()=>g});n(50959);var s=n(45599),l=n(84736),i=n(89556),c=n(53237),a=n(94435),r=n(46309);const o="root-gly6Qn",u="link-pZCc56",d="selectWrapper-PYDCrg",h="activitySelect-pwnL0y";var p=n(11527);const g=e=>{const{t}=(0,s.$)(),{value:n,onChange:g,taskList:v,loading:m,viewMoreUrl:_,onOrientationViewMoreClick:f}=e,[b,w]=(0,i.Z)(void 0,{dimension:"width"}),x=e=>{var t;null==g||g({postChannel:null!==(t=null==n?void 0:n.postChannel)&&void 0!==t?t:a.iu.Targeted,activityId:e})};return(0,p.jsxs)("div",{className:o,children:[(0,p.jsxs)(l.FX,{type:"card",value:null==n?void 0:n.postChannel,onChange:e=>{null==g||g({postChannel:e.target.value})},direction:"horizontal",name:"material-publish-group-pureCard",children:[(0,p.jsx)(l.Y8,{value:a.iu.Targeted,extra:(0,p.jsxs)("div",{style:{height:"100%"},children:[(0,p.jsx)("div",{children:t("cc_pc_material_visual_effect_publish_creation_type_event_desc_web")}),(0,p.jsx)("span",{className:u,onClick:e=>{null==f||f(),e.preventDefault(),(0,r.Yo)({url:_})},children:t("cc_pc_material_visual_effect_publish_creation_type_event_detail_web")})]}),children:t("cc_pc_material_visual_effect_publish_creation_type_event_web")}),(0,p.jsx)(l.Y8,{value:a.iu.Open,extra:(0,p.jsx)("div",{style:{height:"100%"},children:(0,p.jsx)("div",{children:t("cc_pc_material_visual_effect_publish_creation_type_free_desc_web")})}),children:t("cc_pc_material_visual_effect_publish_creation_type_free_web")})]}),(0,p.jsx)("div",{className:d,ref:b,onClick:()=>{const e=document.getElementById("formAreaWrapper");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},children:(null==n?void 0:n.postChannel)===a.iu.Targeted&&(0,p.jsx)(l.Ph,{maxHeight:180,value:null==n?void 0:n.activityId,loading:m,placeholder:t("cc_pc_material_visual_effect_publish_creation_type_event_select_web"),className:h,optionList:v,renderOptionItem:t=>{var n;const{label:s,desc:l,value:i,onClick:a}=t,r=i===(null===(n=e.value)||void 0===n?void 0:n.activityId);return(0,p.jsxs)("div",{className:"custom-select-option",onClick:e=>{null==a||a(e),null==x||x(i)},style:{maxWidth:w.width-12},children:[r&&(0,p.jsx)(c.r,{className:"checkedIcon"}),!r&&(0,p.jsx)("div",{className:"placeholder"}),s]})}})})]})}},14590:(e,t,n)=>{n.d(t,{R:()=>v});var s=n(84875),l=n.n(s),i=n(84736),c=n(45599),a=n(73622),r=n(21919),o=n(84997),u=n(17941);const d="root-HoHMo9",h="disabled-VOcU3h",p="help-Q9jnn3";var g=n(11527);const v=(0,i.Q2)((e=>{const{t}=(0,c.$)(),{value:n,onChange:s,sendLogService:v,disabledTooltip:m,tooltip:_,...f}=e,{className:b,disabled:w}=f,x=r.YW.AuthorAgreement,{showModal:y,showModalWithoutReview:Z}=(0,r.ZP)({handleBtnText:t("pc_template_authorize_confirm_web"),closeIcon:!0,protocol:x,needReview:!0,onOk:()=>{(0,u.F)(x),null==s||s(!0),v.sendSubscriptionStatementLog({action:"confirm",entry_from:"checkbox"}),v.sendClickSubscriptionCheckboxLog(!0)}}),{handleMouseEnter:C}=(0,o.w)({cursor:"not-allowed",content:m}),{handleMouseEnter:k}=(0,o.w)({content:_}),{handleMouseOver:j}=(0,o.S)({checkIsTarget:e=>null!==e.closest(".semi-checkbox-addon")}),S=l()(f.className);return(0,g.jsxs)("div",{className:l()(d,w&&h,b),onMouseEnter:e=>{w&&m?C(e):_&&k(e)},onMouseOver:w&&m?void 0:j,children:[(0,g.jsx)(i.XZ,{...f,className:S,checked:n,onChange:e=>{const t=Boolean(e.target.checked);if(t&&!(0,u.K)(x))return y(),v.sendSubscriptionStatementLog({action:"show",entry_from:"checkbox"}),void v.sendPageActionLog({action:"choose_subscription_authorize"});v.sendClickSubscriptionCheckboxLog(t),null==s||s(t)},children:t("cc_pc_material_visual_effect_publish_authorize_desc_web")}),(0,g.jsx)(a.r,{className:p,onClick:()=>{Z(),v.sendSubscriptionStatementLog({action:"show",entry_from:"question_mark"}),v.sendPageActionLog({action:"click_subscription_detail"})}})]})}))},11304:(e,t,n)=>{n.d(t,{E:()=>i});var s=n(59787),l=n(94435);class i{constructor(e){(0,s.Z)(this,"_effectType",void 0),(0,s.Z)(this,"_isInitialized",!1),(0,s.Z)(this,"authConfig",{mustPaidAuth:!1,mustCommerceAuth:!1}),(0,s.Z)(this,"resourceCommonConfig",{maxTitleLen:0}),this._effectType=e,this.init()}async init(){{const e=await(0,l.A1)({effect_type:this._effectType});this.authConfig={mustPaidAuth:e.auth_config.must_paid_auth,mustCommerceAuth:e.auth_config.must_commerce_auth}}this._isInitialized=!0}}},53237:(e,t,n)=>{n.d(t,{r:()=>c});var s,l=n(50959);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},i.apply(this,arguments)}const c=e=>l.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none","aria-hidden":"true",viewBox:"0 0 24 24"},e),s||(s=l.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M21.352 4.265a1.5 1.5 0 0 1 .383 2.087l-10 14.5a1.5 1.5 0 0 1-2.334.169l-6.5-7a1.5 1.5 0 0 1 2.198-2.042l5.228 5.63 8.938-12.96a1.5 1.5 0 0 1 2.087-.384Z",clipRule:"evenodd"})))},48240:(e,t,n)=>{n.d(t,{Z:()=>s});const s={tag:"tag-ZaY7YS",selected:"selected-umR1Vs",disabled:"disabled-A37DzB"}},70498:(e,t,n)=>{n.d(t,{Z:()=>s});const s={block:"block-smxiey",title:"title-aqS4Cg",content:"content-IyBLdN",loading:"loading-QuFv_G",text:"text-ukrQOj"}},9006:(e,t,n)=>{n.d(t,{Z:()=>s});const s={tagSelect:"tagSelect-KEPqcU",dropItem:"dropItem-bpnHuZ",suggestListDropdown:"suggestListDropdown-fV0lMc"}}}]);