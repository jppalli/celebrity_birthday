"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[621],{44704:(e,t,n)=>{n.d(t,{i:()=>o.Z});var o=n(16613)},40509:(e,t,n)=>{n.d(t,{S1:()=>s.Wq,ZP:()=>c,vc:()=>a.v});var o=n(50959),r=n(49340),s=n(82725),i=(n(43982),n(11527)),a=n(5777);const c=()=>((0,o.useEffect)((()=>{(0,s.ZP)()}),[]),(0,i.jsx)(r.j3,{}))},66564:(e,t,n)=>{n.d(t,{G:()=>s});var o=n(8129),r=n(46309);async function s(e,t){try{return(await(0,r.Gw)({nodeKey:e,keys:t})).nodeKey}catch(n){(0,o.RF)("[getSettings] error",n,{nodeKey:e,keys:t})}return{}}},5777:(e,t,n)=>{n.d(t,{v:()=>s,w:()=>r});let o={};function r(e){o=e}const s=()=>({intl:{clientOptions:{getOverrideOptions:()=>o}}})},54847:(e,t,n)=>{n.d(t,{appModel:()=>p});var o=n(59787),r=n(66589),s=n(27206),i=n(46309),a=n(8129),c=n(5777);const p=new class{constructor(){(0,o.Z)(this,"appInfo",{language:"",appID:"",region:"",appVersion:"",appVersionName:void 0,currentScene:"",did:""}),(0,o.Z)(this,"debugInfo",{useBOE:!1,boeChannel:"",usePPE:!1,ppeChannel:""}),(0,o.Z)(this,"isInitFailed",!1),(0,o.Z)(this,"isInited",!1),(0,o.Z)(this,"initAppInfoPromise",null),(0,r.ky)(this)}async initAppInfo(){return this.isInitFailed=!1,this.initAppInfoPromise||(this.initAppInfoPromise=this.initAppInfoImpl().catch((e=>{throw this.initAppInfoPromise=null,e}))),this.initAppInfoPromise}async initAppInfoImpl(){console.log("start");try{const e=await(0,i.BN)();(0,r.z)((()=>{this.appInfo={...e,appVersionName:this.getAppVersionName(e.appVersion)}})),console.log("done appInfo",e.language,e.appID,e.region),(0,a.$G)({deviceId:this.appInfo.did,ctx:{appVersion:this.appInfo.appVersionName,os:e.os,osVersion:e.osVersion,language:this.appInfo.language,region:this.appInfo.region}}),(0,c.w)({fallbackHash:"bfd6e1ae3f60e599efaf26a8d39d56f0",lazyUpdate:!0})}finally{await s.ZP.changeLanguage({locale:this.appInfo.language})}return this.appInfo}getAppVersionName(e){const t=Number.parseInt(e,10);if(!t)return;const n=Math.floor(t/Math.pow(256,2)),o=t-n*Math.pow(256,2),r=Math.floor(o/256);return`${n}.${r}.${o-256*r}`}setInitFailed(){this.isInitFailed=!0}setInited(){this.isInited=!0}async initDebugInfo(){}}},62262:(e,t,n)=>{n.d(t,{w:()=>r});var o=n(59787);class r extends Error{constructor(e,t){super(e),this.context=t,(0,o.Z)(this,"name","HeycanError")}}},98052:(e,t,n)=>{n.d(t,{Jn:()=>o.ZP,mu:()=>l});var o=n(38508),r=n(97373),s=n(77508),i=n(41503),a=n(76896),c=n(2555);o.ZP.use(new i.Z);class p extends Error{constructor(e,t,n){super(t),this.code=e,this.msg=t,this.error=n}}o.ZP.use(new class extends r.b{name(){return"HeycanPlugin"}async beforeCall({event:e}){if((0,a.c)()&&!window.window.webkit.messageHandlers[e])throw new p(s.GL.NOT_FOUND,`bridge not found, bridgeName=${e}`)}async trigger(e){e.triggerLocal()}});const l=async(e,t)=>{const{timeout_ms:n=3e3,...r}=t||{},i=new c.B;return Promise.race([o.ZP.call(e,r).finally((()=>i.cancel())),new Promise(((t,o)=>{if(!n)return;const r=new p(s.GL.TIMEOUT,`timed out by fe, bridgeName=${e}, timeout=${n}`);i.timeout(n).then((()=>o(r)))}))])}},76896:(e,t,n)=>{n.d(t,{c:()=>s});var o=n(22310);const{userAgent:r}=navigator,s=(0,o.Z)((()=>/macintosh/i.test(r)&&!/(ipod|iphone|ipad)/i.test(r)));(0,o.Z)((()=>/windows/i.test(r)))},74235:(e,t,n)=>{n.d(t,{ZP:()=>o,xB:()=>r});function o(e,t,n){if(void 0===t)return JSON.parse(e);try{return JSON.parse(e)||t}catch(o){return n&&n(o),t}}function r(e){const{len:t,i18n:n}=e,[o]=(n.language||"").split("-");return"zh"===o?Math.floor(t/2):t}},82725:(e,t,n)=>{n.d(t,{Wq:()=>p,ZP:()=>l,cb:()=>c});n(84781);var o=n(44704),r=n(54847),s=n(25807),i=n(76896),a=n(8129);async function c(e){try{await r.appModel.initAppInfo(),await s.$.initUserInfo(),r.appModel.setInited()}catch(t){if((0,a.RF)("initAppAndUserInfo failed",t),r.appModel.setInitFailed(),null!=e&&e.throwOnError)throw t}}async function p(){try{await r.appModel.initAppInfo()}catch(e){(0,a.RF)("tryInitCoreAppInfo failed",e),r.appModel.setInitFailed()}}function l(){document.oncontextmenu=()=>!1,document.ondragover=e=>e.preventDefault(),document.ondrop=e=>e.preventDefault(),document.addEventListener("keydown",(e=>{("w"===e.key&&e.metaKey||"w"===e.key&&e.ctrlKey)&&e.preventDefault()}));const e=(0,i.c)()?o.i.macos:o.i.windows;document.body.classList.add(e),r.appModel.initDebugInfo(),c()}},97362:(e,t,n)=>{n.d(t,{v_:()=>g});var o=n(22310),r=n(80418),s=n(73224),i=n(98052),a=n(54847),c=n(62262),p=n(8129),l=n(66564);let d=!1;const u=(0,o.Z)((async()=>{return"true"===(await(0,l.G)("abtest_use_new_host",["enabled"])).enabled})),h=["/lv/v1/user/","/lv/v1/ad_maker/","/lv/v1/commerce/","/lv/v1/creator/"],f=["/artist/v1/homepage/get_effect_list"];async function m(e,t){const n=await u(),o=n&&d,l=n&&!d,g=e.startsWith("/")?`${function(e,t){{const n=(null==t?void 0:t.useNewHost)||!1;if(e){if(h.some((t=>e.startsWith(t))))return n?"https://feed-api.capcutapi.com":"https://feed-api.capcut.com";if(f.includes(e))return n?"https://heycan-api.capcutapi.com":"https://api-heycan-pc-sg.capcut.com"}return n?"https://editor-api.capcutapi.com":"https://editor-api-sg.capcut.com"}}(e,{useNewHost:l})}${e}`:e,y=r.parseUrl(g),{region:w,language:v,appVersionName:I}=a.appModel.appInfo,Z={url:r.stringifyUrl({url:y.url,query:{...!t.disableRegion&&{region:w},language:v,version_name:I,...y.query}}),method:t.method,needCommonParams:!0,header:{"Content-Type":"application/json",...t.headers},header_signing:!0,...t.data&&{data:JSON.stringify(t.data)},...t.timeout&&{timeout_ms:t.timeout}},b=(n,r,s)=>{const i={rawUrl:e,useNewHost:l,disableNewHostByLoginError:o,...Z,...s};"error"===n?(0,p.RF)(r,null,i):t.onlyLogOnError||(0,p.c6)(r,i)},$=e=>s.I18n.t("pc_stickers_prompt_failed_{X}",{X:e});b("info",`[request] start - ${e}`);let _=null;const x=performance.now();try{_=await i.Jn.call("request",Z)}catch(M){const n=performance.now()-x>=(t.timeout||2e4),o=`[request] ${n?"timeout":"failed"} - jsb - ${e}`;throw b("error",o,{code:M.code,errorText:JSON.stringify(M),timeout:n}),new c.w(o,{code:M.code,displayMessage:$("jsb")})}const P={httpCode:_.httpCode,code:_.response.ret,errmsg:_.response.errmsg,logid:_.response.logid||_.response.log_id};if(200!==_.httpCode){const t=`[request] failed - httpCode ${_.httpCode} - ${e}`;throw b("error",t,P),new c.w(t,{...P,displayMessage:$(`http ${_.httpCode}`)})}if("success"!==_.response.errmsg){const n=`[request] failed - ${P.code} ${P.errmsg} - ${e}`;if(b("error",n,P),l&&"1015"===String(P.code)&&location.pathname.endsWith("/publish-text-template.html"))return d=!0,m(e,t);throw new c.w(n,{...P,displayMessage:$(`${P.code} ${P.errmsg}`)})}return b("info",`[request] success ${e}`,P),_.response.data}function g(e,t,n){return m(e,{method:"POST",data:t,...n})}},8129:(e,t,n)=>{n.d(t,{$G:()=>f,RF:()=>p,c6:()=>c,hC:()=>m});var o=n(11449),r=n(74637),s=n.n(r);const i=()=>s()().format("MM-DD HH:mm:ss.SSSZ");function a(e,t){try{var n,o;const r=String(e).trim(),s=null!==(n=null===(o=r.match(/^\[\w+\]/))||void 0===o?void 0:o[0])&&void 0!==n?n:"",i=s.slice(1,-1),a=r.slice(s.length).replace(/\{\S*?\}/g,"").trim().replace(/[\s:-]+/g,"-");return{module:i,scene:t.scene?`${a}-${t.scene}`:a}}catch(r){return{module:"",scene:t.scene||""}}}async function c(e,t){const n=`${i()} ${e}`,{module:r,scene:s}=a(e,{...t}),c={...t,module:r,scene:s};(0,o.Z)("sendLog",{level:"info",content:n,extra:c})}async function p(e,t,n){const r="HeycanError"===(null==t?void 0:t.name)?t.context:t;t&&(0,o.Z)("captureException",t,{...r,...n});const s=`${i()} ${e}`,{module:c,scene:p}=a(e,{...r,...n}),l={stack:null==t?void 0:t.stack,message:null==t?void 0:t.message,...r,...n,module:c,scene:p};(0,o.Z)("sendLog",{level:"error",content:s,extra:l}),console.error(`[slardar] ${s}`,{...l}),t&&console.error(t)}const l=[],d=1e3;function u(e){const t=e.post;e.post=n=>{const{success:o,fail:r}=n;t({...n,success:t=>{(()=>{if(0===l.length)return;const t=l.shift();t&&e.post(t)})(),null==o||o(t)},fail:e=>{l.push(n),l.length>d&&l.shift(),null==r||r(e)}})}}let h=!1;function f(e){h||(h=!0,o.Z.on("init",(()=>{var e;const t=null===(e=o.Z.config())||void 0===e?void 0:e.transport;t&&u(t)})));const{ctx:t,...n}=e;(0,o.Z)("config",n),t&&o.Z.context&&(0,o.Z)("context.merge",t)}function m(e){const{module:t,scene:n,metrics:r,categories:s}=e;(0,o.Z)("sendEvent",{name:"heycan_performance_timing",metrics:r,categories:{...s,module:t,scene:n}})}},43982:()=>{},16613:(e,t,n)=>{n.d(t,{Z:()=>o});const o={macos:"macos",windows:"windows",heycanRatioGroupEllipsis:"heycan-ratio-group-ellipsis",heycanCheckboxEllipsis:"heycan-checkbox-ellipsis",heycanFormFieldEllipsis:"heycan-form-field-ellipsis",heycanPopoverWrapperClearStyle:"heycan-popover-wrapper-clear-style",heycanTextareaThemeGrey:"heycan-textarea-theme-grey",heycanInputThemeGrey:"heycan-input-theme-grey"}},53649:(e,t,n)=>{n(34415),n(69163),n(40398),n(8971),n(91351),n(28200),n(62824),n(74024),n(10972),n(544),n(24799),n(12021),n(79577),n(40641),n(40413),n(8810),n(63931),n(23645),n(28937),n(33686),n(82313),n(76990),n(48069),n(61113),n(88932),n(61294),n(33180),n(42060),n(61892),n(37469)},44296:()=>{window.__assetPrefix__="."},38459:(e,t,n)=>{n.d(t,{Z:()=>o});const o=function(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(r);++o<r;)s[o]=e[o+t];return s}},61833:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(54523),r=n(49634),s=n(99313),i=n(82433);const a=function(e,t,n){if(!(0,i.Z)(n))return!1;var a=typeof t;return!!("number"==a?(0,r.Z)(n)&&(0,s.Z)(t,n.length):"string"==a&&t in n)&&(0,o.Z)(n[t],e)}},82665:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(38459),r=n(61833),s=n(248),i=Math.ceil,a=Math.max;const c=function(e,t,n){t=(n?(0,r.Z)(e,t,n):void 0===t)?1:a((0,s.Z)(t),0);var c=null==e?0:e.length;if(!c||t<1)return[];for(var p=0,l=0,d=Array(i(c/t));p<c;)d[l++]=(0,o.Z)(e,p,p+=t);return d}}}]);