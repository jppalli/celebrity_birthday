"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[124],{84736:(e,t,i)=>{i.d(t,{EG:()=>g.Z,Ex:()=>o.Z,FN:()=>f.Z,FX:()=>u.Z,Form:()=>_.Z,Kx:()=>n.Z,Lt:()=>l.Z,Ph:()=>d.Z,Q2:()=>v.Z,Vp:()=>m.Z,XZ:()=>r.ZP,Y8:()=>c.ZP,u:()=>h.Z,u_:()=>s.Z,yC:()=>p.Z,z8:()=>x.z,zx:()=>a.Z});i(32913);var a=i(99891),r=i(76021),s=i(15194),l=i(89270),n=i(88161),o=i(63522),c=i(86581),u=i(45820),d=i(37953),p=i(48611),m=i(40996),g=i(83335),f=i(23997),h=i(11643),_=i(60679),v=i(5455),x=i(96194)},84997:(e,t,i)=>{i.d(t,{S:()=>_,w:()=>h});var a=i(50959),r=i(44478),s=i(26800),l=i(84875),n=i.n(l),o=i(84736),c=i(45599),u=i(20468),d=i(2555),p=i(76896),m=i(45584),g=i(11527);const f=(0,a.forwardRef)(((e,t)=>{const{tooltipProps:i,getPopupContainer:r,onClosePopover:l,position:c,cursor:u="default"}=e,[f,h]=(0,a.useState)(!0),[_,v]=(0,a.useState)(!1),{top:x}=c,T=c.left-10,w=(0,a.useRef)(null),y=(0,a.useRef)(null),b=(0,s.Z)((()=>{var e;null===(e=y.current)||void 0===e||e.destroy(),v(!1),h(!1)})),S=(0,s.Z)((()=>{var e;const t=r().querySelector(`.${m.Z.tooltipWrapper}`);if(!t||(null===(e=y.current)||void 0===e?void 0:e.tooltipWrapper)===t)return;t.addEventListener("animationend",b);const i=new d.B;i.timeout(500).then(b),y.current={tooltipWrapper:t,destroy:()=>{t.removeEventListener("animationend",b),i.cancel(),y.current=null}}}));(0,a.useImperativeHandle)(t,(()=>({hide:()=>{S(),v(!0)}})));const F=(0,a.useMemo)((()=>({default:{height:18,width:12},"not-allowed":{height:(0,p.c)()?30:15,width:15}})),[]),C=F[u]||F.default;return(0,g.jsx)(o.u,{autoAdjustOverflow:!0,position:"bottomLeft",motion:!1,...i,className:n()(i.className,m.Z.tooltipWrapper,_&&m.Z.fadingOut),trigger:"custom",visible:f,showArrow:!1,rePosKey:`${x}-${T}`,getPopupContainer:r,onVisibleChange:e=>{var t;!e&&l(),null===(t=i.onVisibleChange)||void 0===t||t.call(i,e)},children:(0,g.jsx)("div",{className:m.Z.point,tabIndex:-1,ref:w,style:{top:x,left:T,...C}})})}));function h(e){const{zIndex:t=1060,cursor:i="default",checkIsTarget:l,getEllipsisDOM:n,...o}=e,d=(0,a.useRef)(null),p=(0,a.useRef)(null),[h,_]=(0,a.useState)(null),{i18n:v}=(0,c.$)(),x=()=>{const{content:e}=o;if("function"!=typeof e)return e;if(!d.current)return null;const{targetElement:t}=d.current;return i=>e({...i,target:t})},T=(0,s.Z)((()=>{d.current&&(d.current.destroy(),d.current=null,_(null))})),w=(0,s.Z)((()=>{var e;null===(e=d.current)||void 0===e||e.destroy(),d.current=null})),y=(0,s.Z)(((e,i)=>{const a=null==n?void 0:n(i);if(a&&a.offsetWidth>=a.scrollWidth)return;if(d.current){if(!d.current.hasLeaved&&d.current.targetElement===i)return;T()}const s=document.createElement("div");s.className=m.Z.root,s.style.zIndex=`${t}`;const l=e=>{_({left:e.clientX,top:e.clientY})},o=e=>{i===e.target&&(d.current&&(d.current.hasLeaved=!0),p.current?p.current.hide():T())};i.addEventListener("mousemove",l),i.addEventListener("mouseleave",o),document.body.appendChild(s);const c=(0,r.createRoot)(s);d.current={container:s,targetElement:i,hasLeaved:!1,reactRoot:c,destroy:()=>{s.remove(),Promise.resolve().then((()=>c.unmount())),i.removeEventListener("mousemove",l),i.removeEventListener("mouseleave",o)}},_({left:e.clientX,top:e.clientY})})),b=(0,s.Z)((e=>{const t=e.currentTarget;y(e,t)})),S=(0,s.Z)((e=>{var t;const i=e.target;(null!==(t=null==l?void 0:l(i))&&void 0!==t?t:e.currentTarget===i)&&y(e,i)}));return(0,a.useLayoutEffect)((()=>w),[]),(0,a.useLayoutEffect)((()=>{(()=>{if(!d.current||!h)return;const{reactRoot:e,container:a}=d.current;a.style.zIndex=`${t}`,e.render((0,g.jsx)(u.a,{i18n:v,children:(0,g.jsx)(f,{ref:p,tooltipProps:{...o,content:x()},getPopupContainer:()=>a,onClosePopover:T,position:h,cursor:i})}))})()})),{handleMouseEnter:b,handleMouseOver:S}}function _(e={}){const{getEllipsisDOM:t=(e=>e),content:i=(({target:e})=>e.textContent),...a}=e;return h({...a,getEllipsisDOM:t,content:i})}},21919:(e,t,i)=>{i.d(t,{YW:()=>v,ZP:()=>y,rr:()=>T});var a=i(50959),r=i(23479),s=i(84875),l=i.n(s),n=i(73224),o=i(45599),c=i(20468),u=i(84736),d=i(41750),p=i(5696),m=i(8129),g=i(84997),f=i(7911),h=i(68212),_=i(11527);let v=function(e){return e.Origin="originUserAuthProtocol",e.OriginalForSubscription="originalWorkProtocolForSubscription",e.OriginalForCommercial="originalWorkProtocolForCommercial",e.Creator="createProtocol",e.AuthorAgreement="AuthorAgreementProtocol",e}({});const x={[v.Origin]:(0,p.OD)(),[v.OriginalForSubscription]:(0,p.OD)(),[v.OriginalForCommercial]:(0,p.NZ)(),[v.Creator]:(0,p.dr)({}),[v.AuthorAgreement]:(0,p.kx)()},T={[v.Origin]:"Original Work Notice",[v.OriginalForSubscription]:"Original Work Notice",[v.OriginalForCommercial]:"Original Work Notice",[v.Creator]:n.I18n.t("pc_capcut_creator_agreement_web"),[v.AuthorAgreement]:n.I18n.t("cc_pc_material_publish_paid_authorize_popup_title_web")},w=(0,r.Pi)((({onCancel:e,onOk:t,protocol:i,handleBtnText:r,closeIcon:s=!1,needReview:n=!0,useIframe:c=!0,needHasRead:p=!0,renderConfirmExtra:v,getCanConfirmExtra:w})=>{const{t:y}=(0,o.$)(),[b,S]=(0,a.useState)(!1),[F,C]=(0,a.useState)(!1),I=!p||b,L=()=>!n||I&&F&&(!w||w()),{handleMouseEnter:k}=(0,g.w)({content:y("pc_template_authorize_read_all_web"),cursor:"not-allowed"}),j=(0,a.useRef)(null),R={disabled:!I,handleMouseEnter:!n||I?void 0:k},P=()=>{L()&&(null==t||t())};(0,a.useEffect)((()=>{const e=e=>{const t=e.data;try{const e=JSON.parse(t),i=document.getElementById("protocol-content"),a="protocal"===e.from||"protocol"===e.from;if(a&&"load"===e.event)if(i){const{clientHeight:t}=i;e.scrollHeight<=t&&S(!0)}else S(!0);a&&"bottom"===e.event&&S(!0)}catch(i){S(!0),(0,m.RF)("[Protocol] handle protocol message",i,{text:t})}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);const O=()=>{if(j.current&&!c){const{scrollHeight:e,clientHeight:t,scrollTop:i}=j.current;!I&&i+t>=e&&S(!0)}};return(0,a.useEffect)((()=>{var e;return null===(e=j.current)||void 0===e||e.addEventListener("scroll",O),()=>{var e;null===(e=j.current)||void 0===e||e.removeEventListener("scroll",O)}}),[j.current]),(0,a.useLayoutEffect)((()=>{const e=document.getElementById("protocol-content");if(e&&!c){const{scrollHeight:t,clientHeight:i}=e;S(!(t>i)),j.current=e}}),[]),(0,_.jsxs)("div",{className:f.Z.protocol,children:[(0,_.jsxs)("div",{className:h.Z.root,children:[(0,_.jsx)("div",{className:h.Z.title,children:T[i]}),(0,_.jsx)("div",{className:h.Z.right,children:s&&(0,_.jsx)(d.r,{className:h.Z.closeIcon,onClick:()=>{null==e||e("close")}})})]}),(0,_.jsx)("div",{className:l()(f.Z.content,!n&&f.Z.withBorder,n&&f.Z.flexHeight),id:"protocol-content",children:c?(0,_.jsx)("iframe",{id:"frame",src:x[i]}):(0,_.jsx)("div",{className:f.Z.protocolContent,children:null})}),r&&n?(0,_.jsxs)("div",{className:f.Z.confirmArea,children:[(0,_.jsx)(u.XZ,{className:f.Z.confirmCheckbox,checked:F,disabled:R.disabled,onMouseEnter:R.handleMouseEnter,onChange:e=>C(Boolean(e.target.checked)),autoFocus:!1,children:(0,_.jsx)("span",{className:f.Z.confirmCheckboxText,children:y("pc_template_authorize_read_agree_web",{X:(0,_.jsx)("span",{className:f.Z.confirmCheckboxProtocolTitle,children:T[i]},"X")})})}),null==v?void 0:v()]}):null,(()=>{const e=r;return e?(0,_.jsx)("div",{className:l()(f.Z.footer,n&&f.Z.withBorder),children:(0,_.jsx)(u.zx,{className:f.Z.btn,type:"primary",theme:"solid",disabled:!L(),onClick:P,children:e})}):null})()]})})),y=e=>{const{onCancel:t,onOk:i}=e,[r,s]=(0,a.useState)(!1),[l,n]=(0,a.useState)({}),d=(0,a.useRef)({}),{i18n:p,t:m}=(0,o.$)(),g=e=>{null==t||t(e),s(!1)},f=()=>{l.withoutReview||null==i||i(),s(!1)};return(0,a.useEffect)((()=>()=>{var e,t;return null==d||null===(e=d.current)||void 0===e||null===(t=e.destroy)||void 0===t?void 0:t.call(e)}),[]),(0,a.useEffect)((()=>{var t,i;r?(()=>{const t={...e,...l.withoutReview&&{handleBtnText:m("pc_i_see_web"),needReview:!1,closeIcon:!0}},{destroy:i}=u.u_.info({width:376,height:e.needReview?"auto":564,maskClosable:!1,header:null,title:null,icon:null,centered:!0,content:(0,_.jsx)(c.a,{i18n:p,children:(0,_.jsx)(w,{...t,onCancel:g,onOk:f})}),footer:null});d.current.destroy=i})():null==d||null===(t=d.current)||void 0===t||null===(i=t.destroy)||void 0===i||i.call(t)}),[r]),{visible:r,showModal:()=>{s(!0),n({})},showModalWithoutReview:()=>{s(!0),n({withoutReview:!0})}}}},70252:(e,t,i)=>{i.d(t,{l:()=>m});var a=i(50959),r=i(84875),s=i.n(r),l=i(84736),n=i(26800),o=i(86439),c=i(16743),u=i(20182),d=i(11527);const p=e=>{var t;const i=(0,a.useRef)(!1),[r,p]=(0,a.useState)(""),{allowEnter:m=!0,value:g,...f}=e,{className:h,maxLength:_,onChange:v,onCompositionEnd:x,onCompositionStart:T}=f,w=i.current?r:g,y=(0,n.Z)((e=>{const t=e||"";return m?t:t.replace(/\n/g,"")})),b=(0,n.Z)((e=>{const t=y(e);return void 0!==_?(0,o.aF)(t,_):t})),S=(0,n.Z)((e=>{i.current=!0,p(e.currentTarget.value),null==T||T(e)})),F=(0,a.useRef)(null),{saveSelectionIfNeeded:C}=(0,c.u)({getInputElem:()=>F.current}),I=(0,n.Z)(((e,t)=>{C(e),null==v||v(e,t)})),L=(0,n.Z)((e=>{const t=b(e.currentTarget.value);i.current=!1,p(t),I(t,e),null==x||x(e)})),k=(0,n.Z)(((e,t)=>{const a=y(e);if(i.current)return void p(a);if(void 0===_)return void I(a,t);const r=b(a);I(r,t)})),j=(0,a.useMemo)((()=>({maxRows:3})),[]);return(0,d.jsx)(l.Kx,{autoComplete:"off",...f,ref:F,value:w,className:s()(h,u.Z.textarea),maxLength:void 0,autosize:null!==(t=f.autosize)&&void 0!==t?t:j,rows:1,onChange:k,onCompositionStart:S,onCompositionEnd:L})},m=(0,l.Q2)(p)},67078:(e,t,i)=>{i.d(t,{$X:()=>l,eD:()=>n,pn:()=>r,sR:()=>s});var a=i(94435);function r({isVip:e,isBusiness:t,authFiles:i}){var r;const s=null!==(r=null==i?void 0:i.map((({uri:e})=>({uri:e}))))&&void 0!==r?r:[];return{root:{is_vip:!1,copyright:{copyright_info:[{scene:a.$x.Vip,auth_status:e?a.U9.Authorized:a.U9.Unauthorized,third_party_agreements:[]},{scene:a.$x.Business,auth_status:t?a.U9.Authorized:a.U9.Unauthorized,third_party_agreements:t?s:[]}]}},commonData:{is_business:!1,is_original:Boolean(e||t)}}}function s(e){const{isOriginal:t=!1,isVip:i=!1,isBusiness:a=!1,authFiles:s}=e;const{root:l}=r({isVip:i,isBusiness:a,authFiles:s});return{copyright:l.copyright}}function l(e,t){return Boolean(null==e?void 0:e.copyright_info.some((e=>e.scene===t&&e.auth_status===a.U9.Authorized)))}function n(e){const t=function(e){const t={isBusiness:!1,isVip:!1,uris:[]};return null==e||e.copyright_info.forEach((e=>{switch(e.scene){case a.$x.Vip:return void(t.isVip=e.auth_status===a.U9.Authorized);case a.$x.Business:return t.isBusiness=e.auth_status===a.U9.Authorized,void(e.thrid_party_agreements&&(t.uris=e.thrid_party_agreements.filter((({uri:e})=>e)).map((({uri:e})=>e))));default:return}})),t}(e.copyright);return{isBusiness:t.isBusiness,isVip:t.isVip,authFiles:t.uris.map(((e,t)=>({uri:e,file:new File([],String(t+1).padStart(2,"0"))})))}}},9679:(e,t,i)=>{i.d(t,{$v:()=>u,Ad:()=>m,DV:()=>o,Es:()=>f,S4:()=>d,SB:()=>h,Sj:()=>c,_4:()=>g,ce:()=>p,iL:()=>l,j2:()=>n});var a=i(17095);function r(e){return void 0===e?e:String(Math.round(e/1024))}function s(e){const{material_category:t,material_type:i,collection_detail:a}=e;return{material_category:t,material_type:i,...a&&"collection"===i&&{collection_detail:a}}}function l(e){const{action:t,extra:i={},material_cnt:r}=e;(0,a.g)({eventName:"personal_page_material_publish_page_action",params:{action:t,material_cnt:r,...s(e),...i}})}function n(e){const{error_report:t,upload_status:i,time:l,isCompressed:n,sizeBeforeCompress:o,sizeAfterCompress:c,resolutionBeforeCompress:u,resolutionAfterCompress:d,extra:p={}}=e;(0,a.g)({eventName:"personal_page_material_upload_status",params:{...s(e),error_report:t,upload_status:i,time:l,is_compressed:n?1:0,...n&&{material_size_before_compress:r(o),material_size_after_compress:r(c),material_resolution_before_compress:u,material_resolution_after_compress:d},...p}})}function o(e){const{error_report:t}=e;(0,a.g)({eventName:"personal_page_material_import_error_report",params:{...s(e),error_report:t}})}function c(e){if(0===e.length)return;const t=function(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((([e,i])=>{const a=i||"";t[e]=t[e]?`${t[e]},${a}`:a}))})),t}(e),i=new Set(t.material_type.split(","));1===i.size&&(t.material_type=i.values().next().value),(0,a.g)({eventName:"personal_page_material_publish_error_report",params:t})}function u(e){const{status:t,material_type:i,material_category:s,title:l,description:n,isOriginal:o,tags:c,material_format:u,material_size:d,resolution:p,error_type:m,cover_type:g,time:f,extra:h={},authorize_range:_,isVipAuthorized:v,isBusinessAuthorized:x,is_official_task:T,task_id:w,material_id:y,material_subcategory:b,effect_type_title:S,effect_type_id:F}=e;return(0,a.g)({eventName:"personal_page_material_publish_status",params:{status:t,material_type:i,material_category:s,material_title:l,material_introduction:n,is_original:o?"1":"0",hashtag:c.join(","),material_format:u,material_size:r(d),resolution:p,authorize_range:_,is_official_task:T,task_id:w,material_id:y,material_subcategory:b,effect_type_title:S,effect_type_id:F,..."fail"===t&&{error_type:m},cover_type:g,time:f,is_subscription_authorized:v?1:0,is_commercial_authorized:x?1:0,...h}})}function d(e){return(0,a.g)({eventName:"personal_page_material_publish_page_result",params:e})}function p(e){const{action:t,material_category:i,material_type:r,entry_from:s}=e;return(0,a.g)({eventName:"ugc_material_subscription_original_statment",params:{action:t,material_category:i,material_type:r,entry_from:s}})}function m(e){const{action:t,material_category:i,material_type:r,entry_from:s,hasCopyrightAuthorization:l}=e;return(0,a.g)({eventName:"ugc_material_commercial_original_statment",params:{action:t,material_category:i,material_type:r,entry_from:s,..."boolean"==typeof l&&{has_copyright_authorization:l?"1":"0"}}})}function g(e){const{action:t,page_type:i,material_category:r,material_type:s,button_name:l}=e;return(0,a.g)({eventName:"ugc_material_creator_sign_agreement",params:{action:t,page_type:i,material_category:r,material_type:s,...l&&{button_name:l}}})}function f(e){const{multiLang:t,...i}=e,r=e=>({zh:"cn",en:"en",ja:"jp",ko:"kr"}[e]||""),s=e=>{var i;return null!==(i=null==t?void 0:t.map(e).join(","))&&void 0!==i?i:""};return(0,a.g)({eventName:"material_tool_publish_status",params:{...i,...t&&{language_setting:s((({isMultiLang:e})=>e?"multi":"single")),language_type:s((({langs:e})=>r(e[0]))),language_total_type:s((({langs:e})=>e.map(r).join(";")))}}})}function h(e){const{caption_template_cnt:t,captionAnimationIds:i=[],text_template_cnt:r,material_type:s,text_special_effect_cnt:l}=e;return(0,a.g)({eventName:"material_tool_click_publish_confirm",params:{caption_template_cnt:t,caption_animation_id:i.join(","),text_template_cnt:r,material_type:s,text_special_effect_cnt:l}})}},70426:(e,t,i)=>{i.r(t),i.d(t,{default:()=>yt});var a=i(23479),r=i(45599),s=i(50959),l=i(9608),n=i(11527);const o=(0,a.Pi)((e=>{const{className:t}=e,{t:i}=(0,r.$)(),a=(0,s.useMemo)((()=>[{key:"textTemplate",title:i("pc_text_template_desc_web"),instructions:[{key:"",title:i("pc_text_template_release_effect_web")}]}]),[]),o=(0,s.useMemo)((()=>()=>"init"),[]);return(0,n.jsx)(l.v,{className:t,groups:a,initGroup:"textTemplate",activeGroup:"textTemplate",resetExpandedGroupKey:"textTemplate",getStatus:o})}));var c=i(26800),u=i(12390),d=i(17641),p=i(84875),m=i.n(p),g=i(36983),f=i(69836),h=i(23073),_=i(66589);const v="en";var x=i(97311),T=i(28706),w=i(45735),y=i(94435),b=i(67078),S=i(42983),F=i(8129),C=i(25807);function I(e){const{id:t,resourceId:i,isMultiLang:a}=e,r=e.languages.map(((e,t)=>function(e,t){const{lang:i,resourceId:a,templateZipData:r}=e,{coverFile:s,extraJson:l}=r.template;return{lang:i,resourceId:a,templateZipData:r,cover:(0,T.B4)({src:t.needSrc?(0,x.y8)(s):"",file:s}),staticFrame:(0,T.wt)({}),file:(0,_.LO)({...(0,T.Dz)({}),previewTime:0,extraJson:l},{extraJson:_.LO.ref}),publishType:a?"update":"create"}}(e,{needSrc:!0}))),s=C.$.isEnableAuthorization;return(0,_.LO)({id:t,resourceId:a?i:r[0].resourceId,title:"",tags:[],isOriginal:!1,isBusiness:!1,isVip:s,isHighPriority:!1,isMultiLang:a,languages:r,onlineData:{isOriginal:!1,isVip:!1,isBusiness:!1,resourceId:i,langResourceIds:[],langResourceIdMap:{}}},{onlineData:_.LO.ref})}const L=new(i(11304).E)(S.Ab.TextTemplate);function k(e){const{mustPaidAuth:t}=L.authConfig,{postChannel:i,targetedActivityId:a}=e,r=i===y.iu.Open||i===y.iu.Targeted&&Boolean(a);return Boolean(e.title&&e.tags.length&&e.languages[0].staticFrame.src&&(t&&e.isVip||!t)&&r)}function j(e){return e.languages[0]}function R(e,t){const i=e.languages[0],{resourceId:a,title:r,tags:s,isVip:l,isBusiness:n,isOriginal:o,isHighPriority:c,languages:u,onlineData:d,postChannel:p,targetedActivityId:m}=e,{sdkVersion:g}=i.templateZipData,f=t.authFileUploadServiceManager.getUploadedFiles(e.id),h=y.r0.UserPostPcMultiLangTextTemplate,_=c?`${h}_without_review`:h;if(d.resourceId){const t=(0,b.sR)({isOriginal:o,isVip:l,isBusiness:n,authFiles:f,onlineData:d}),{newResourceIdList:c}=function(e){const{onlineData:t,languages:i}=e;let a=!1;const r=[...t.langResourceIds];for(const s of i){const e=t.langResourceIdMap[s.lang];if(e&&e===s.resourceId)continue;const i=r.findIndex((t=>t===(null!=e?e:s.resourceId)));-1===i?r.push(s.resourceId):r[i]=s.resourceId,(0,F.c6)("[TextTemplateService] makeMultiLangTextTemplateReq update resourceIdList",{existingId:e,updatedId:s.resourceId,isAdd:-1===i,languageResourceIds:t.langResourceIds,langResourceIdMap:t.langResourceIdMap}),a=!0}return{newResourceIdList:r,isResourceIdListUpdated:a}}(e);return{id:a,...i.lang===v&&{title:r,description:r,icon:{image_uri:i.cover.uri,static_uri:i.staticFrame.uri},tags:s,...t},collection_info:{resource_id_list:c}}}const x=(0,b.pn)({isVip:l,isBusiness:n,authFiles:f}),T=u.map((e=>e.resourceId));return{effect_type:S.Ab.MultiLanguageTextTemplate,is_vip:l,...x.root,common_data:{title:r,description:r,icon:{image_uri:i.cover.uri,static_uri:i.staticFrame.uri},sdk_version:g,source:_,tags:s,is_original:o,is_business:n,post_channel:p===y.iu.Targeted?`${y.iu.Targeted}_${m}`:p,web_extra:JSON.stringify({targeted_id:m}),...x.commonData},collection_info:{resource_id_list:T}}}const P="root-Pqbzod",O="statusBar-LA3WnC",A=(0,a.Pi)((e=>{const{className:t,textTemplate:i,isSelected:a,onClick:r}=e,s=j(i),l=!s.staticFrame.src;return(0,n.jsxs)("div",{className:m()(P,t),onClick:()=>{r(i)},children:[(0,n.jsx)(g.Y,{src:l?"":s.cover.src,isInvalid:!1,isSelected:a,size:80,onContextMenu:e=>{e.preventDefault(),r(i)}}),(0,n.jsx)(f.ir,{className:O,loading:l,invalid:!1,errorToolip:"",isInfoComplete:k(i),title:i.title})]})}));var Z=i(61022),D=i(84736),N=i(31086),E=i(57609),M=i(2514),U=i(539),V=i(46309),z=i(3718),B=i(39486),$=i(86156),H=i(54847),W=i(82725),q=i(86324),Q=i(1946),J=i(35686),Y=i(21130),X=i(9679),G=i(84677),K=i(62262);const ee={[S.Ab.TextTemplate]:S.Ab.MultiLanguageTextTemplate},te=1;var ie=i(79668),ae=i(98052);var re=i(2555),se=i(18370),le=i(74575),ne=i(33372);function oe(){const e=(0,U.G)({watch:()=>n.isAllUploaded}),t=(0,U.G)({watch:()=>n.isDepUploaded&&!n.isAllUploadedWatcher.isPromptingConfirmToCancel}),i=(0,le.e)({watch:()=>n.textTemplateList.materials.every((e=>e.languages.every((e=>e.staticFrame.src))))}),a=(0,s.useMemo)((()=>new B.w),[]),{t:l}=(0,r.$)(),n=(0,Z.fv)((()=>({formApi:null,setFormApi:e=>{n.formApi=e},performanceTimingCollector:(0,se.uY)(),initOp:new $.q({fetchFirstPage:async()=>{H.appModel.isInited||await(0,W.cb)({throwOnError:!0}),n.performanceTimingCollector.addTiming("initFullAppInfoDone"),(0,F.c6)("[SingleStore] getTextTemplateSingleInitialData req --\x3e");const e=await(0,ae.mu)("getTextTemplateSingleInitialData",{});(0,F.c6)("[SingleStore] getTextTemplateSingleInitialData resp <--",(0,h.Z)(e,"type","singles")),n.performanceTimingCollector.addTiming("getInitialDataDone");const t=n.fetchOnlineTextTemplates(e),i=[],a=[],r=[];for(const c of e.singles){const e=await n.makeInitTextTemplate(c,a,r);i.push(e)}n.performanceTimingCollector.addTiming("initTextTemplateDone"),(0,F.c6)("[SingleStore] await fetchOnlineTextTemplates start");const s=await t;n.performanceTimingCollector.addTiming("fetchOnlineDataDone"),(0,F.c6)("[SingleStore] mergeOnlineTextTemplate start");for(const c of i)n.mergeOnlineTextTemplate(c,s);(0,F.c6)("[SingleStore] make init flowerText sticker start");const l=a.map((e=>(0,ne.Sv)(e))),o=r.map((e=>(0,ne.wu)(e)));return()=>{n.textTemplateList.replaceByMap(i,(e=>e)),n.flowerTextList.replaceByMap(l,(e=>e)),n.stickers=o;const e=n.textTemplateList.materials[0];n.textTemplateList.select(e),n.initStaticFrame(n.textTemplateList.materials),n.initUploadFiles(),n.performanceTimingCollector.addSetStateTiming(se.Pk)}},slardarErrorLog:(e,t)=>{(0,F.RF)(`[SingleStore] ${e} failed`,t),n.performanceTimingCollector.addSetStateTiming(se.Pk,{scene:"initFailed"})}}),async makeInitTextTemplate(e,t,i){const{id:a,isMultiLang:r}=e,s=[];(0,F.c6)("[SingleStore] makeInitTextTemplate start",{id:a});const l=r?e.languages:e.languages.slice(0,1);for(const n of l){const{lang:r}=n;(0,F.c6)("[SingleStore] makeInitTextTemplate one language start",{id:a,lang:r});const l=new q.v({id:`${r}-${e.id}`,effectType:S.Ab.TextTemplate,fetchZipBase64:async()=>{const{zipData:t}=await(0,V.FI)({id:e.id,lang:r});return t}});await l.init(),s.push({lang:r,resourceId:n.resourceId,templateZipData:l});for(const e of l.flowerTexts){const i=e.id;let a=t.find((e=>e.groupId&&e.groupId===i));a||(a={groupId:i,subFlowerTexts:[]},t.push(a)),a.subFlowerTexts.push({lang:r,data:e})}for(const e of l.stickers)i.some((t=>t.id===e.id))||i.push(e)}return(0,F.c6)("[SingleStore] makeInitTextTemplate done",{id:a}),I({id:a,isMultiLang:r,resourceId:e.resourceId,languages:s})},fetchOnlineTextTemplates:async({type:e,singles:t})=>"update"!==e?{}:async function({effectType:e,singles:t}){const i=ee[e],a={},r=[];for(const c of t){var s;const t=c.isMultiLang?c.resourceId:null===(s=c.languages[0])||void 0===s?void 0:s.resourceId;if(!t)continue;const a=c.isMultiLang?i:e;if(void 0===a)throw new K.w(`effectType=${e} doesn't support multi lang`,{effectType:e});r.push({id:t,effect_type:a,source:te})}if(0===r.length)return(0,F.c6)("[OnlineData] fetchOnlineTemplates no reqItems"),a;(0,F.c6)("[OnlineData] fetchOnlineTemplates mgetItem start",{ids:r.map((e=>e.id))});const l=await(0,y.yF)({items:r,pack_optional:{need_tag:!0,need_parent_tag:!1,need_copyright:!0},controller_policy_optional:{from_cache:!1}});(0,F.c6)("[OnlineData] fetchOnlineTemplates mgetItem success",{ids:l.effect_item_list.map((e=>e.common_attr.id))});const n=[];if(l.effect_item_list.forEach((t=>{var r;a[t.common_attr.id]=t,t.common_attr.effect_type===i&&(null===(r=t.collection)||void 0===r||r.resource_id_list.forEach((t=>n.push({id:t,effect_type:e,source:te}))))})),0===n.length)return(0,F.c6)("[OnlineData] fetchOnlineTemplates no subLangReqItems"),a;(0,F.c6)("[OnlineData] fetchOnlineTemplates subLanguage mgetItem start",{ids:n.map((e=>e.id))});const o=await(0,y.yF)({items:n,pack_optional:{need_tag:!0,need_parent_tag:!1,need_copyright:!0},filter_optional:{no_filter_by_rule:!0},controller_policy_optional:{from_cache:!1}});return(0,F.c6)("[OnlineData] fetchOnlineTemplates subLanguage mgetItem success",{ids:o.effect_item_list.map((e=>e.common_attr.id))}),o.effect_item_list.forEach((e=>{a[e.common_attr.id]=e})),a}({effectType:S.Ab.TextTemplate,singles:t}),mergeOnlineTextTemplate(e,t){const i=function({effectType:e,resourceId:t,mainLang:i,firstLanguage:a,onlineTemplates:r}){var s,l;if(!t)return null;const n=r[a.lang===i?t:a.resourceId||t];if(!n)return(0,F.RF)("[OnlineData] extractOnlineTemplate item not found",null,{id:t,firstLanguage:a,mainLang:i}),null;const{title:o,tag_list:c=[],is_original:u}=n.common_attr,{isBusiness:d,isVip:p,authFiles:m}=(0,b.eD)(n),g={form:{title:o,tags:Array.from(new Set(c.map((e=>e.name)))),isOriginal:u,isBusiness:d,isVip:p,isHighPriority:String(n.common_attr.publish_source).endsWith("_without_review")},authFiles:m,onlineData:{isOriginal:u,isBusiness:d,isVip:p,copyright:n.copyright,langResourceIds:[],langResourceIdMap:{}}},f=r[t],h=ee[e];if(!h||(null==f?void 0:f.common_attr.effect_type)!==h)return g;g.onlineData.langResourceIds=null!==(s=null===(l=f.collection)||void 0===l?void 0:l.resource_id_list)&&void 0!==s?s:[],g.onlineData.langResourceIdMap={};for(const v of g.onlineData.langResourceIds){var _;const e=null===(_=r[v])||void 0===_?void 0:_.common_attr.item_language;e?g.onlineData.langResourceIdMap[e]=v:(0,F.RF)("[OnlineData] extractOnlineTemplate lang is empty",null,{id:v,hasItem:Boolean(r[v])})}return g}({effectType:S.Ab.TextTemplate,resourceId:e.resourceId,mainLang:v,firstLanguage:e.languages[0],onlineTemplates:t});i&&((0,G.L)(e,i.form),(0,G.L)(e.onlineData,i.onlineData),i.authFiles.length&&n.authFileUploadServiceManager.ensure(e.id).addOnlineFiles(i.authFiles))},get mainFormLayout(){const{fetchStatus:e}=n.initOp;return e.isFailed?"error":e.hasFetched?"mainForm":"loading"},get needConfirmModalOnClose(){return!0},get field(){return{canBusiness:C.$.permissions.includes(C.v.EffectSetBusiness),canVip:C.$.permissions.includes(C.v.EffectSetVip),canHighPrio:C.$.permissions.includes(C.v.EffectHighPrio)}},pubService:new N.Z,sendLogService:new Y.D5({itemType:S.Ab.TextTemplate}),authorSignService:new E.I({signScene:z.d.BusinessArtist}),authFileUploadServiceManager:new M.r({}),isAllUploadedWatcher:e,fileOp:new T.N0({uploadConfigService:a}),textTemplateList:new J.T({}),flowerTextList:new J.T({}),stickers:[],init(){n.initOp.initFetchFirstPage(null)},retryInit(){n.initOp.retryFetchFirstPage()},selectTextTemplateCard(e){n.saveCurrentForm(),n.textTemplateList.select(e),n.flowerTextList.select(null)},selectFlowerTextCard(e){n.saveCurrentForm(),n.flowerTextList.select(e),n.textTemplateList.select(null)},initTextTemplateForm(e){var t;null===(t=n.formApi)||void 0===t||t.setValues({textTemplate:{title:e.title,tags:[...e.tags],isOriginal:e.isOriginal,isVip:e.isVip,isBusiness:e.isBusiness,isHighPriority:e.isHighPriority}})},saveTextTemplateForm(e){var t;const i=null===(t=n.formApi)||void 0===t?void 0:t.getValues().textTemplate;i&&(0,G.L)(e,{title:i.title||"",tags:i.tags,isOriginal:i.isOriginal||!1,isVip:i.isVip||!1,isBusiness:i.isBusiness||!1,isHighPriority:i.isHighPriority||!1})},initFlowerTextForm(e){var t;null===(t=n.formApi)||void 0===t||t.setValues({flowerText:{title:e.title,tags:[...e.tags]}})},applyTagsToAll(e){n.flowerTextList.updateAll((t=>{t.tags=[...e]}))},saveFlowerTextForm(e){var t;const i=null===(t=n.formApi)||void 0===t?void 0:t.getValues().flowerText;i&&(0,G.L)(e,{title:i.title||"",tags:i.tags})},saveCurrentForm(){n.textTemplateList.selected?n.saveTextTemplateForm(n.textTemplateList.selected):n.flowerTextList.selected&&n.saveFlowerTextForm(n.flowerTextList.selected)},initStaticFrameTimer:new re.B,async initStaticFrame(e){for(const t of e){const{id:e,languages:i}=t;for(let a=0;a<i.length;a+=1){const r=i[a];await n.fileOp.initStaticFrame({id:`${r.lang}-${e}`,getInitIndex:()=>0===a?null:t.languages[0].staticFrame.index,staticFrame:r.staticFrame,templateZipData:r.templateZipData}),await n.initStaticFrameTimer.timeout(100)}}},async initUploadFiles(){try{await a.getUploadConfigs("initUploadFiles")}catch{}for(const e of n.textTemplateList.materials)n.initUploadTextTemplateFiles(e);(0,ne.er)(n.fileOp,{flowerTexts:n.flowerTextList.materials,stickers:n.stickers})},initUploadTextTemplateFiles(e){for(const t of e.languages)n.fileOp.initUploadCover({getCover:()=>t.cover,getInitValues:()=>({id:(0,Q.V)("text-template-cover")})})},async retryUpload(){n.depPublishStatus.isCanceled=!1;try{await a.getUploadConfigs("retryUploadFiles")}catch{n.depPublishStatus.isFailed=!0}for(const e of n.textTemplateList.materials)for(const t of e.languages)n.fileOp.retryUpload(t.cover,t.staticFrame,t.file);(0,ne.Id)(n.fileOp,{flowerTexts:n.flowerTextList.materials,stickers:n.stickers})},handleUploadCancel(){t.stop(),i.stop(),n.isAllUploadedWatcher.stop(),n.depPublishStatus.isCanceled=!0},async initUploadStaticFrame(e){await i.start();for(const t of e.languages)n.fileOp.initUploadCover({getCover:()=>t.staticFrame,getInitValues:()=>({id:(0,Q.V)("text-template-static-frame"),file:new File([(0,x.Jr)(t.staticFrame.src)],"icon.png",{type:"image/png"})})})},handleStaticFrameChange(e,t){for(const i of e.languages)n.fileOp.updateStaticFrame(i.staticFrame,t)},async publishDeps(){const{textTemplateList:e,flowerTextList:t,stickers:i}=n,a=e.materials[0],r=(0,h.Z)(a,"isVip","isBusiness","isOriginal","isHighPriority"),s=(0,ne.Kl)(t.materials,r),l=(0,ne.Rd)(i,{...r,getTitle:(e,t)=>{const i=String(t+1).padStart(2,"0");return`${a.title}-${i}`}}),o=await n.pubService.batchPublish([...s,...l]),c=(0,ne.Wl)({flowerTexts:n.flowerTextList.materials,stickers:n.stickers}),u=o.map((e=>e.resource_id));return(0,F.c6)("[SingleStore] deps publish success",{resourceIdList:u,depResourceIdMap:c}),{depResourceIdMap:c}},clearTextTemplateZip(){n.fileOp.templateZipCacheMap.clear();for(const e of n.textTemplateList.materials)for(const t of e.languages)n.fileOp.saveTemplateZipCache(e.id,t.lang,t.file)},async initUploadTextTemplateZip(e,t){const{textTemplateList:i}=n;for(const a of i.materials)for(const i of a.languages){const{lang:r,staticFrame:s,templateZipData:l}=i;if(await n.fileOp.initUploadTemplateZip({id:a.id,lang:r,zipFile:i.file,staticFrame:s,templateZipData:l,depResourceIdMap:e,checkIsCanceled:()=>t.isCanceled}),t.isCanceled)return}},depPublishStatus:{isFailed:!1,isCanceled:!1,isDone:!1},async startUploadAndPublishDeps(e){try{for(const e of n.textTemplateList.materials)n.initUploadStaticFrame(e);await t.start();const{depResourceIdMap:i}=await n.publishDeps();if(e.isCanceled)return;await n.initUploadTextTemplateZip(i,e),(0,_.z)((()=>{e.isDone=!0}))}catch(i){(0,_.z)((()=>{e.isFailed=!0})),(0,F.RF)("[SingleStore] startUploadAndPublishDeps failed",i)}},get depUploadStats(){const e={pending:0,succeeded:0,failed:0};for(const t of n.flowerTextList.materials)for(const i of t.subFlowerTexts)(0,T.r)(e,i.cover,i.file);for(const t of n.stickers)(0,T.r)(e,t.cover);return e},get isDepUploaded(){const{pending:e,failed:t}=n.depUploadStats;return!e&&!t},get uploadStats(){const e={uninited:0,...n.depUploadStats};for(const a of n.textTemplateList.materials)for(const t of a.languages)(0,T.r)(e,t.cover,t.staticFrame,t.file);const{isFailed:t,isDone:i}=n.depPublishStatus;return t?e.failed+=1:i?e.succeeded+=1:e.pending+=1,e},get isAllUploaded(){const{pending:e,failed:t}=n.uploadStats;return!e&&!t},get isReadyToPublish(){const{textTemplateList:e,flowerTextList:t}=n;return e.length>0&&e.materials.every((e=>k(e)))&&t.materials.every((e=>(0,ne.QX)(e)))&&!n.isPublishSucceeded},async uploadAndPublish(e){n.saveCurrentForm(),n.sendMaterialToolClickPublishLog(),n.retryUploadAndPublishDeps(),null==e||e.show(),await n.isAllUploadedWatcher.start();try{await n.publish()}finally{null==e||e.hide()}},async retryUploadAndPublishDeps(){n.clearTextTemplateZip(),n.depPublishStatus={isFailed:!1,isCanceled:!1,isDone:!1};const{depPublishStatus:e}=n;await n.retryUpload(),n.startUploadAndPublishDeps(e)},isPublishing:!1,isPublishSucceeded:!1,async publish(){n.isPublishing=!0;try{await n.publishImpl()}catch(e){return D.FN.error(l("pc_sticker_release_failed_retry_web")),(0,_.z)((()=>{n.isPublishing=!1})),n.sendMaterialToolPublishLog("fail"),void(0,F.RF)("[SingleStore] publish failed",e)}(0,_.z)((()=>{n.isPublishing=!1,n.isPublishSucceeded=!0})),D.FN.info({content:l("pc_text_template_release_success_web",{num:n.textTemplateList.length}),textMaxWidth:"80vw"}),n.sendMaterialToolPublishLog("success"),(0,F.c6)("[SingleStore] publish success"),setTimeout((()=>(0,V.gk)({showHomePage:!0})),3e3)},async publishImpl(){const e=n.textTemplateList.materials.map((e=>{const{isMultiLang:t}=e,{authFileUploadServiceManager:i}=n;return e.languages.map((a=>{const r=`${a.lang}-${e.id}`,s=t?function(e,t){const i={...(0,h.Z)(e,["title","tags","isHighPriority","isVip","isBusiness","isOriginal","postChannel","targetedActivityId"]),...(0,h.Z)(t,"lang","cover","staticFrame","file"),authFiles:[],baseSource:y.r0.UserPostPcInMultiLangTextTemplate};return"update"===t.publishType?(0,w.xo)({id:t.resourceId,onlineData:e.onlineData,...i}):(0,w.Ob)({effectType:S.Ab.TextTemplate,templateZipData:t.templateZipData,extraJson:t.file.extraJson,...i})}(e,a):function(e,t){const i=j(e),a={...(0,h.Z)(e,["title","tags","isHighPriority","isVip","isBusiness","isOriginal","postChannel","targetedActivityId"]),...(0,h.Z)(i,"cover","staticFrame","file"),authFiles:t.authFileUploadServiceManager.getUploadedFiles(e.id),baseSource:y.r0.UserPostPc};return"update"===i.publishType?(0,w.xo)({id:i.resourceId,onlineData:e.onlineData,...a}):(0,w.Ob)({effectType:S.Ab.TextTemplate,templateZipData:i.templateZipData,extraJson:i.file.extraJson,...a})}(e,{authFileUploadServiceManager:i});return{id:r,req:s,onResult:(0,_.aD)((({req:i,resourceId:s,error:l,errorText:o,time:c})=>{n.sendLogService.sendMaterialPublishStatusLog({time:c,status:l?"fail":"success",error_type:o,publishParams:i,path:"",targetedActivityId:e.targetedActivityId}),l?(0,F.RF)(`[SingleStore] single publish failed {${r}}`,l):(a.resourceId=s,t||(e.resourceId=s),(0,F.c6)(`[SingleStore] single publish success {${r}}`,{resourceId:s}))})),onUpdateResult:(0,_.aD)((({req:e,resourceId:t,error:i,errorText:a,time:s})=>{i?(0,F.RF)(`[SingleStore] single update failed {${r}}`,i):(0,F.c6)(`[SingleStore] single update success {${r}}`,{resourceId:t})}))}}))})).flat();(0,F.c6)("[SingleStore] single publish start",{resourceIdList:e.map((e=>e.id))});const t=await n.pubService.batchPublish(e);(0,F.c6)("[SingleStore] single publish done",{resourceIdList:t.map((e=>e.resource_id))});const i=n.textTemplateList.materials.filter((e=>e.isMultiLang)).map((e=>{const{authFileUploadServiceManager:t}=n,{id:i}=e;return{id:i,req:R(e,{authFileUploadServiceManager:t}),onResult:(0,_.aD)((({req:t,resourceId:a,error:r,errorText:s,time:l})=>{r?(0,F.RF)(`[SingleStore] multi lang publish failed {${i}}`,r):(e.resourceId=a,(0,F.c6)(`[SingleStore] multi lang publish success {${i}}`,{resourceId:a}))})),onUpdateResult:(0,_.aD)((({req:e,resourceId:t,error:a,errorText:r,time:s})=>{a?(0,F.RF)(`[SingleStore] multi lang update failed {${i}}`,a):(0,F.c6)(`[SingleStore] multi lang update success {${i}}`,{resourceId:t})}))}}));(0,F.c6)("[SingleStore] multi lang publish start",{resourceIdList:i.map((e=>e.id))}),await n.pubService.batchPublish(i);const a=n.textTemplateList.materials.map((e=>e.resourceId));(0,F.c6)("[SingleStore] multi lang publish done",{resourceIdList:a});const r=n.textTemplateList.materials.filter((e=>e.isMultiLang&&!e.onlineData.resourceId)).map((e=>({id:e.id,resourceId:e.resourceId})));var s;r.length&&((0,F.c6)("[SingleStore] syncTemplateResourceId req --\x3e",{templates:r}),await(s={templates:r},(0,ae.mu)("syncTemplateResourceId",s)),(0,F.c6)("[SingleStore] syncTemplateResourceId resp <--"));n.textTemplateList.materials.some((e=>!e.onlineData.resourceId))?(await n.pubService.pollUntilAllInEffectList({ids:a.slice(-N.f),types:[S.Ab.TextTemplate,S.Ab.MultiLanguageTextTemplate]}),(0,F.c6)("[SingleStore] poll done")):(0,F.c6)("[SingleStore] no need to poll")},sendMaterialToolClickPublishLog(){const{textTemplateList:e,flowerTextList:t}=n;(0,X.SB)({text_template_cnt:e.length,material_type:"single",text_special_effect_cnt:t.length})},sendMaterialToolPublishLog(e){const{textTemplateList:t,flowerTextList:i}=n;(0,X.Es)({text_template_cnt:t.length,text_special_effect_cnt:i.length,material_type:"single",status:e,success_cnt:t.materials.filter((e=>e.resourceId)).length,multiLang:t.materials.map((e=>({isMultiLang:e.isMultiLang,langs:e.languages.map((e=>e.lang))})))})},collectLogData(){const e=["id","uri","isUploadFailed"],t=n.textTemplateList.materials.map((t=>({...(0,h.Z)(t,"id","resourceId","isMultiLang"),languages:t.languages.map((t=>({...(0,h.Z)(t,"lang","resourceId"),cover:(0,h.Z)(t.cover,e),staticFrame:(0,h.Z)(t.staticFrame,[...e,"index"]),file:(0,h.Z)(t.file,e),extraJson:t.file.extraJson})))}))),i=n.flowerTextList.materials.map((t=>({...(0,h.Z)(t,"id","isDepMaterial","sdkVersion"),subFlowerTexts:t.subFlowerTexts.map((t=>({...(0,h.Z)(t,"id","lang","resourceId"),cover:(0,h.Z)(t.cover,e),file:(0,h.Z)(t.file,e)})))}))),a=n.stickers.map((t=>({...(0,h.Z)(t,"id","resourceId","isDepMaterial","isSequence"),cover:(0,h.Z)(t.cover,e)}))),r={textTemplates:t,textTemplateCount:t.length,flowerTexts:i,stickers:a,isReadyToPublish:n.isReadyToPublish,depPublishStatus:{...n.depPublishStatus},uploadStats:{...n.uploadStats}};(0,F.c6)("[SingleStore] collectLogData",r)}})));return(0,ie.L)({watch:()=>{n.uploadStats,n.isReadyToPublish},collect:n.collectLogData}),(0,s.useEffect)((()=>(window.store=n,n.init(),n.authorSignService.init(),()=>{n.initStaticFrameTimer.cancel()})),[]),n}const ce=(0,s.createContext)(null),ue=()=>(0,s.useContext)(ce);var de=i(73008);const pe=(0,a.Pi)((e=>{const{className:t}=e,i=ue();return(0,n.jsx)("div",{className:m()(de.Z.root,t),children:(0,n.jsx)("div",{className:de.Z.container,children:i.textTemplateList.materials.map(((e,t)=>(0,n.jsx)(A,{className:de.Z.card,textTemplate:e,isSelected:i.textTemplateList.selectedId===e.id,onClick:i.selectTextTemplateCard},e.id)))})})}));var me=i(89563);const ge=(0,a.Pi)((e=>{const{className:t}=e,i=ue();return(0,n.jsx)("div",{className:m()(de.Z.root,t),children:(0,n.jsx)("div",{className:de.Z.container,children:i.flowerTextList.materials.map(((e,t)=>(0,n.jsx)(me.M,{className:de.Z.card,flowerText:e,isSelected:i.flowerTextList.selectedId===e.id,onClick:i.selectFlowerTextCard},e.id)))})})}));var fe=i(70252),he=i(95968),_e=i(37991),ve=i(84997);const xe="authGroup-Yuaspf",Te="label-EV9bRs",we="right-pmBY1Y",ye="root-Hmk_Iv",be="fieldLabel-OCVTxU",Se="useAll-oywefT",Fe="showRequired-ORkP2V",Ce="box-eWwoEb",Ie=(0,s.memo)((e=>{const{text:t,className:i}=e,{handleMouseEnter:a}=(0,ve.S)({content:({target:e})=>e.textContent});return(0,n.jsx)("div",{className:m()(Te,i),onMouseEnter:a,children:t})})),Le=e=>{const{t}=(0,r.$)(),{className:i,boxClassName:a,title:s,children:l,onClickUseAll:o,hiddenFieldLabel:c=!1,required:u=!1}=e;return(0,n.jsxs)("div",{className:m()(ye,i),children:[!c&&(0,n.jsxs)("div",{className:be,children:[(0,n.jsx)("div",{className:m()({[Fe]:u}),children:null!=s?s:t("pc_template_authorize_settings_web")}),o&&(0,n.jsx)("span",{className:Se,onClick:o,children:t("pc_material_release_apply_all")})]}),(0,n.jsx)("div",{className:m()(Ce,a),children:l})]})};var ke=i(14590),je=i(31686),Re=i(26758),Pe=i(22310),Oe=i(73224);let Ae=function(e){return e[e.Deleted=22]="Deleted",e[e.Offline=23]="Offline",e[e.Banned=25]="Banned",e[e.Online=102]="Online",e[e.Reviewing=141]="Reviewing",e[e.SelfView=144]="SelfView",e[e.HomepageOnline=103]="HomepageOnline",e}({}),Ze=function(e){return e[e.Unknown=0]="Unknown",e[e.WaitReview=1]="WaitReview",e[e.RiskReviewing=2]="RiskReviewing",e[e.QualityReviewing=3]="QualityReviewing",e[e.RiskReviewFailed=4]="RiskReviewFailed",e[e.QualityReviewFailed=5]="QualityReviewFailed",e[e.CopyrightReviewing=6]="CopyrightReviewing",e[e.CopyrightReviewFailed=7]="CopyrightReviewFailed",e[e.Passed=100]="Passed",e}({});const{t:De}=Oe.I18n;let Ne=function(e){return e.all="all",e.paster="paster",e.wordart="wordart",e.soundEffect="soundEffect",e.textTemplate="textTemplate",e.subtitleTemplate="subtitleTemplate",e.video="video",e.stickerFramePack="sticker_frame_zip",e.emoticons="emoticons",e.formula="formula",e.filter="filter",e.filterCollection="filter_collection",e.stickerCollection="sticker_collection",e}({});let Ee=function(e){return e[e.all=0]="all",e[e.wordart=1]="wordart",e[e.paster=2]="paster",e[e.soundEffect=3]="soundEffect",e[e.video=4]="video",e[e.Song=5]="Song",e[e.TextTemplate=6]="TextTemplate",e[e.Special=7]="Special",e[e.FaceSpecial=8]="FaceSpecial",e[e.Image=9]="Image",e[e.SubtitleTemplate=48]="SubtitleTemplate",e[e.Filter=12]="Filter",e[e.StickerCollection=102]="StickerCollection",e[e.FilterCollection=112]="FilterCollection",e[e.emoticons=105]="emoticons",e[e.stickerFramePack=1e3]="stickerFramePack",e[e.formula=50]="formula",e}({});S.Ab.TextTemplate,De("text_template"),S.Ab.Sticker,De("sticker"),S.Ab.WordArt,De("flower_character"),S.Ab.Filter,De("filter"),S.Ab.Sticker,De("pc_template_authorize_sticker_web"),S.Ab.WordArt,De("pc_template_authorize_effect_web"),S.Ab.Font,De("pc_template_authorize_font_web");const Me={[Ee.paster]:De("original_stickers_web"),[Ee.TextTemplate]:De("pc_text_template_origial_material_web"),[Ee.SubtitleTemplate]:De("pc_subtitle_original"),[Ee.wordart]:De("original_cursive"),[Ee.soundEffect]:De("pc_material_release_original_material"),[Ee.Filter]:De("pc_material_release_original_material"),[Ee.Special]:De("pc_material_release_original_material"),[Ee.video]:De("pc_material_release_original_material")};Ee.all,Ne.all,Ee.paster,Ne.paster,Ee.wordart,Ne.wordart,Ee.soundEffect,Ne.soundEffect,Ee.video,Ne.video,Ee.emoticons,Ne.emoticons,Ee.formula,Ne.formula,Ee.Filter,Ne.filter,Ee.FilterCollection,Ne.filterCollection,Ee.TextTemplate,Ne.textTemplate,Ee.SubtitleTemplate,Ne.subtitleTemplate,Ee.StickerCollection,Ne.stickerCollection,Ne.wordart,Ee.wordart,Ne.paster,Ee.paster,Ne.soundEffect,Ee.soundEffect,Ne.video,Ee.video,Ne.emoticons,Ee.emoticons,Ne.formula,Ee.formula,Ne.filter,Ee.Filter,Ne.filterCollection,Ee.FilterCollection,Ne.textTemplate,Ee.TextTemplate,Ee.SubtitleTemplate,Ne.subtitleTemplate,Ne.stickerCollection,Ee.StickerCollection,Ne.all,Ne.paster,Ne.wordart,Ne.soundEffect,Ne.video,Ne.emoticons,Ne.formula,Ee.paster,Ee.StickerCollection,Ee.wordart,Ee.soundEffect,Ee.video,Ee.stickerFramePack,Ee.emoticons,Ee.formula,Ee.Image,Ee.Special,Ee.FaceSpecial,Ee.TextTemplate,Ee.SubtitleTemplate,Ee.Filter,Ee.FilterCollection,Ee.paster,Ee.wordart,Ee.soundEffect,Ee.video,Ee.emoticons,Ee.TextTemplate,Ee.SubtitleTemplate;let Ue=function(e){return e[e.default=0]="default",e[e.latest=1]="latest",e[e.hotest=2]="hotest",e}({});Ue.default,Ue.latest,Ue.hotest,Ee.all,Ee.paster,Ee.video,Ee.soundEffect,Ee.wordart;Ae.Offline,Ae.Online,Ae.HomepageOnline,Ae.HomepageOnline,Ze.Passed,Ze.Passed,Ae.Reviewing,Ae.SelfView,Ae.HomepageOnline,Ae.SelfView,Ze.WaitReview,Ze.RiskReviewing,Ze.QualityReviewing,Ze.CopyrightReviewing,Ae.HomepageOnline,Ze.WaitReview,Ze.RiskReviewing,Ze.QualityReviewing,Ze.CopyrightReviewing,Ze.WaitReview,Ze.RiskReviewing,Ze.QualityReviewing,Ze.CopyrightReviewing,Ae.HomepageOnline,Ae.SelfView,Ae.Banned,Ae.HomepageOnline,Ze.Unknown,Ze.RiskReviewFailed,Ze.QualityReviewFailed,Ze.CopyrightReviewFailed,Ae.SelfView,Ze.Unknown,Ze.RiskReviewFailed,Ze.QualityReviewFailed,Ze.CopyrightReviewFailed,Ze.Passed,Ze.Unknown,Ze.RiskReviewFailed,Ze.QualityReviewFailed,Ze.CopyrightReviewFailed,Ae.HomepageOnline,Ze.QualityReviewFailed,Ze.CopyrightReviewFailed,Ae.SelfView,Ze.QualityReviewFailed,Ze.CopyrightReviewFailed,Ze.Passed;let Ve=function(e){return e[e.Douyin=0]="Douyin",e[e.Heycon=1]="Heycon",e[e.VideoCut=2]="VideoCut",e[e.WebVideoCut=3]="WebVideoCut",e[e.Ulike=4]="Ulike",e[e.Effect=5]="Effect",e}({});Ve.Douyin,Ve.Heycon,Ve.VideoCut,Ve.WebVideoCut,Ve.Ulike,Ve.Effect,Ve.Douyin,Ve.Heycon,Ve.VideoCut,Ve.WebVideoCut,Ve.Ulike,Ve.Effect,Ve.Douyin,Ve.Heycon,Ve.VideoCut,Ve.WebVideoCut,Ve.Ulike,Ve.Effect;const ze=(0,Pe.Z)((()=>({zh:De("pc_text_tamplate_language_cn_web"),en:De("pc_text_tamplate_language_en_web"),ja:De("pc_text_tamplate_language_jp_web"),ko:De("pc_text_tamplate_language_kr_web")})));var Be=i(69905),$e=i(21919);const He="originFlag-Lhtbs4",We="row-yLNK03",qe="help-yUKWDh",Qe=e=>{const{value:t,onChange:i,...a}=e,[l,o]=(0,s.useState)([]),{t:c}=(0,r.$)(),{itemType:u,className:d,checkboxCls:p}=e,{get:g,set:f}=(0,Be.ZP)(Be.Qt.UseHasAgree,C.$.userInfo.uid),{showModal:h}=(0,$e.ZP)({handleBtnText:c("pc_i_see_web"),needReview:!1,protocol:$e.YW.Origin,onOk:()=>{if(!C.$.userInfo.uid)return;f("add",[$e.YW.Origin]);const e=g();o(e)}});return(0,s.useEffect)((()=>{if(C.$.userInfo.uid){const e=g();o(e)}}),[C.$.userInfo.uid]),(0,n.jsx)("div",{className:m()([He,d]),children:(0,n.jsxs)("div",{className:We,children:[(0,n.jsx)(D.XZ,{...a,checked:t,className:p,onChange:e=>{e.target.checked&&(l.includes($e.YW.Origin)||h()),null==i||i(e.target.checked)},children:Me[u]}),(0,n.jsx)(Re.Z,{size:"small",className:qe,onClick:h})]})})},Je=((0,D.Q2)(Qe),"root-j3LlEm"),Ye="cover-jaNzlL",Xe="title-U5EHzZ",Ge="main-MmgxyZ",Ke="container-WuIo82",et="language-pBRH5f",tt="langText-So03cx",it=(0,a.Pi)((e=>{const{className:t,loading:i,languages:a}=e,l=(0,Z.fv)((()=>({coverSrcMap:new Map,copyCoverSrcFromProps(e){const t=new Set;for(const i of e.languages){const{src:e}=i.cover;e&&(t.add(e),l.coverSrcMap.has(e)||(l.coverSrcMap.set(e,""),l.copyOneCoverSrc(e)))}for(const[i,a]of l.coverSrcMap)t.has(i)||(l.destroyCopyedSrc(a),l.coverSrcMap.delete(i))},async copyOneCoverSrc(e){if(e.startsWith("data:"))return void l.coverSrcMap.set(e,e);const t=await(0,x.J9)(e);l.coverSrcMap.has(e)?(0,_.z)((()=>{l.coverSrcMap.set(e,t)})):l.destroyCopyedSrc(t)},destroyCopyedSrc(e){e.startsWith("blob")&&URL.revokeObjectURL(e)},destroy(){for(const e of l.coverSrcMap.values())l.destroyCopyedSrc(e)}})));(0,s.useEffect)((()=>{l.copyCoverSrcFromProps(e)})),(0,s.useEffect)((()=>()=>l.destroy()),[]);const{t:o}=(0,r.$)(),{handleMouseEnter:c}=(0,ve.S)({}),u=e=>{if(i)return"";return l.coverSrcMap.get(e.src)||""};return(0,n.jsxs)("div",{className:m()(Je,t),children:[(0,n.jsx)("div",{className:Xe,children:o("pc_text_template_language_version_web")}),(0,n.jsx)("div",{className:Ge,children:(0,n.jsx)("div",{className:Ke,children:a.map((({lang:e,cover:t})=>(0,n.jsxs)("div",{className:et,children:[(0,n.jsx)(g.Y,{className:Ye,src:u(t),isSelected:!1,isInvalid:!1,size:80}),(0,n.jsx)("div",{className:tt,onMouseEnter:c,children:ze()[e]})]},e)))})})]})}));var at=i(45033),rt=i(56130);const st="root-Q49OJq",lt="cover-gS1Ikh",nt="selectStaticFrame-ts9UIy",ot="titleField-B79mNJ",ct="highPriorityWrapper-zaPxnc",ut="multiLangVersionList-YvOCYN",{Label:dt}=D.Form,pt=(0,a.Pi)((e=>{const{textTemplate:t}=e,{t:i}=(0,r.$)(),a=ue(),{authConfig:l}=L,{mustPaidAuth:o}=l,{targetedActivityId:c,postChannel:u}=t,[d,p]=(0,s.useState)([]);(0,s.useLayoutEffect)((()=>a.initTextTemplateForm(t)),[]),(0,s.useEffect)((()=>{d.length||async function(){return(await(0,y.ip)({effect_type:S.Ab.TextTemplate})).tasks.map((e=>({label:e.title,value:e.task_id})))}().then((e=>{p(e)}))}),[]);const{getDisplayLength:m}=(0,at._)(),f=j(t),{openFramePicker:h}=(0,_e.v)(),v=(0,le.e)({watch:()=>j(t).staticFrame.list.length>0}),x=Boolean(t.languages[0].staticFrame.src),T=(0,s.useMemo)((()=>(0,_.Fl)((()=>t.languages.map((e=>({lang:e.lang,cover:e.cover})))))),[]),w=Boolean(t.onlineData.resourceId);return(0,n.jsxs)("div",{className:st,children:[(0,n.jsx)(g.Y,{className:lt,src:f.staticFrame.src,isInvalid:!1,isSelected:!1,size:128}),(0,n.jsx)("div",{className:nt,onClick:()=>{h({onOK:e=>a.handleStaticFrameChange(t,e),fetchData:async()=>{await v.start();const{list:e,index:t}=f.staticFrame;return{list:e,index:t}}})},children:i("pc_stickers_release_cover_edit_web")}),(0,n.jsx)(fe.l,{fieldClassName:ot,label:i("pc_text_template_name_n_web"),field:"textTemplate.title",maxLength:40,allowEnter:!1,placeholder:i("pc_stickers_release_xy_name_web",{X:1,Y:m(40)}),rules:[{required:!0,message:""}],onChange:(0,_.aD)((e=>t.title=e))}),(0,n.jsx)(he.u,{label:(0,n.jsx)("div",{className:rt.Z.labelHeader,children:(0,n.jsx)(D.Form.Label,{required:!0,children:i("pc_text_template_tag_settings_web")})}),placeholder:i("please_enter_the_label_enter_key_to_confirm_the_input_web"),field:"textTemplate.tags",itemType:S.Ab.TextTemplate,recommendConfig:{title:t.title,uri:f.cover.uri},ignoreAddTagOnBlurSelector:`.${rt.Z.applyToAll}`,onChange:(0,_.aD)((e=>t.tags=e))}),(0,n.jsxs)("div",{children:[(0,n.jsx)(dt,{required:!0,text:i("cc_pc_material_visual_effect_publish_creation_type_web")}),(0,n.jsx)(je.Z,{value:{postChannel:u,activityId:c},onChange:e=>{var i;t.postChannel=e.postChannel,t.targetedActivityId=e.activityId,null===(i=a.formApi)||void 0===i||i.setValue("textTemplate",{...a.formApi.getValue("textTemplate"),postChannel:e.postChannel,targetedActivityId:e.activityId})},taskList:d,loading:!d.length,viewMoreUrl:"https://bytedance.sg.larkoffice.com/docx/XPbkdNb0qoSdGwxdjSTl3lTjgtf",onOrientationViewMoreClick:()=>{a.sendLogService.sendPageActionLog({action:"click_more_official_task"})}})]}),t.isMultiLang&&(0,n.jsx)(it,{className:ut,loading:!x,languages:T.get()}),!1,(0,n.jsx)(Le,{required:o,children:(0,n.jsx)("div",{className:xe,children:(0,n.jsx)(ke.R,{noLabel:!0,field:"textTemplate.isVip",disabled:C.$.isEnableAuthorization,disabledTooltip:i("cc_pc_material_visual_effect_publish_authorized_hover_web"),tooltip:o?i("cc_pc_material_visual_effect_publish_authorize_hover_web"):"",sendLogService:a.sendLogService,onChange:e=>{var i;e&&a.sendLogService.sendPageActionLog({action:"choose_subscription_authorize"}),t.isVip=e,null===(i=a.formApi)||void 0===i||i.setValue("textTemplate",{...a.formApi.getValue("textTemplate"),isVip:e})}})})}),a.field.canHighPrio&&(0,n.jsx)(Le,{className:ct,hiddenFieldLabel:!0,children:(0,n.jsxs)("div",{className:xe,children:[(0,n.jsx)(Ie,{text:i("pc_text_template_release_settings_web")}),(0,n.jsx)("div",{className:we,children:(0,n.jsx)(D.z8,{noLabel:!0,field:"textTemplate.isHighPriority",disabled:w,children:i("pc_text_template_release_priority_web")})})]})})]})}));var mt=i(88370);const gt="topSectionHeader-r1QPRt",ft=(0,a.Pi)((e=>{const{className:t}=e,i=ue(),{t:a}=(0,r.$)(),l=(0,c.Z)((()=>{})),o=(0,s.useRef)(null);return(0,u.O)({className:t,layout:i.mainFormLayout,uploadAreaProps:{titleForUploadArea:"",titleForMainForm:a("pc_text_template_add_click_web"),subTitle:"",draggingTitle:"",draggingDisabled:!0,disabled:!0,disabledTooltip:"",onClick:l,onDrop:l},setFormApi:i.setFormApi,renderImportArea:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.S,{className:gt,title:a("pc_text_template_n_collection_web",{X:i.textTemplateList.length})}),(0,n.jsx)(pe,{}),i.flowerTextList.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.S,{title:a("pc_text_template_affiliated_web",{X:i.flowerTextList.length})}),(0,n.jsx)(ge,{})]})]}),renderFormArea:()=>i.textTemplateList.selected?(0,n.jsx)(pt,{textTemplate:i.textTemplateList.selected},i.textTemplateList.selectedId):i.flowerTextList.selected?(0,n.jsx)(mt.p,{flowerText:i.flowerTextList.selected,initFlowerTextForm:i.initFlowerTextForm,applyTagsToAll:i.applyTagsToAll,maxTitleLength:40},i.flowerTextList.selectedId):null,scrollAreaRef:o,onRetry:i.retryInit})}));var ht=i(38803),_t=i(36775);const vt=(0,a.Pi)((e=>{const{className:t}=e,i=ue(),{t:a}=(0,r.$)(),l=(0,s.useRef)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ht.P,{className:t,leftText:"",isPublishDisabled:!i.isReadyToPublish,isPublishing:i.isPublishing,needConfirmModalOnClose:i.needConfirmModalOnClose,onPublish:()=>{i.uploadAndPublish(l.current)},onCancel:()=>(0,V.gk)({showHomePage:!1})}),(0,n.jsx)(_t.q,{ref:l,uploadStats:i.uploadStats,onRetryUpload:i.retryUploadAndPublishDeps,onCancel:i.handleUploadCancel,onShowUploadFail:()=>{},onPromptConfirmToCancel:i.isAllUploadedWatcher.handlePromptConfirmToCancel})]})}));(0,a.Pi)((e=>{const[t,i]=(0,s.useState)(!1);(0,s.useEffect)((()=>{window.showStickerDebugWindow=()=>{var e,t;i(!0),null===(e=window.getSelection())||void 0===e||e.removeAllRanges(),null===(t=window.vconsole)||void 0===t||t.showSwitch()}}),[]);const a=(0,s.useRef)(null),{store:r}=window;return t?(0,n.jsxs)("div",{style:{position:"fixed",top:10,left:0,bottom:10,width:250,zIndex:2,backgroundColor:"white",padding:8,display:"flex",flexDirection:"column",overflow:"auto",color:"black"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsx)("div",{children:"\u5bfc\u5165\u7684\u6587\u5b57\u6a21\u677f\u72b6\u6001"}),(0,n.jsxs)("div",{style:{display:"flex"},children:[(0,n.jsx)("div",{style:{cursor:"pointer",marginInlineEnd:8},onClick:()=>{var e,t;const i=(null===(e=a.current)||void 0===e?void 0:e.innerText)||"",r=document.createElement("textarea");r.value=i,document.body.append(r),r.select(),document.execCommand("copy"),r.blur(),D.FN.info("\u590d\u5236\u6210\u529f"),null===(t=r.parentNode)||void 0===t||t.removeChild(r)},children:"\u590d\u5236"}),(0,n.jsx)("div",{style:{cursor:"pointer"},onClick:()=>i(!1),children:"\u5173\u95ed"})]})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr",rowGap:10,columnGap:8,marginTop:10},ref:a,children:[r.textTemplateList.materials.map(((e,t)=>(0,n.jsxs)(s.Fragment,{children:[e.languages.map(((i,a)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("div",{children:["\u6587\u5b57\u6a21\u677f",t+1,(0,n.jsx)("br",{}),i.lang," ",0===a&&"\u4e3b"]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:6},children:[0===a&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["id: ",e.id]}),(0,n.jsx)("div",{children:e.isMultiLang?`\u591a\u8bed\u8a00 resourceId: ${e.resourceId||"\u65e0"}`:"\u5355\u8bed\u8a00"})]}),(0,n.jsxs)("div",{children:["\u5355\u54c1 resourceId: ",i.resourceId||"\u65e0"]}),i.templateZipData.flowerTexts.map((e=>(0,n.jsxs)("div",{children:["\u9644\u5c5e\u82b1\u5b57: ",e.id]},e.id))),i.templateZipData.stickers.map((e=>(0,n.jsxs)("div",{children:["\u9644\u5c5e\u8d34\u7eb8: ",e.id]},e.id)))]})]},i.lang))),(0,n.jsx)("div",{children:"=========="}),(0,n.jsx)("div",{children:"===================="})]},t))),r.flowerTextList.materials.map(((e,t)=>(0,n.jsxs)(s.Fragment,{children:[e.subFlowerTexts.map(((i,a)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("div",{children:["\u82b1\u5b57",t+1,(0,n.jsx)("br",{}),i.lang," ",0===a&&"\u4e3b"]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",rowGap:6},children:[0===a&&(0,n.jsxs)("div",{children:["groupId: ",e.groupId]}),(0,n.jsxs)("div",{children:["id: ",i.id]}),(0,n.jsxs)("div",{children:["resourceId: ",i.resourceId||"\u65e0"]})]})]},i.lang))),(0,n.jsx)("div",{children:"=========="}),(0,n.jsx)("div",{children:"==================="})]},t))),r.stickers.map(((e,t)=>(0,n.jsxs)(s.Fragment,{children:[(0,n.jsxs)("div",{children:["\u8d34\u7eb8",t+1]}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",rowGap:6},children:(0,n.jsxs)("div",{children:["id: ",e.id]})})]},t)))]})]}):null}));var xt=i(12904),Tt=i(65546),wt=i(89100);const yt=(0,a.Pi)((e=>{const t=oe(),{t:i}=(0,r.$)();return(0,xt.F)({title:i("pc_text_template_item_release_web"),pid:"publish-text-template-single"}),(0,Tt.d)(),(0,n.jsxs)(ce.Provider,{value:t,children:[(0,n.jsxs)("div",{className:wt.Z.page,children:[(0,n.jsxs)("div",{className:wt.Z.content,children:[(0,n.jsx)(o,{className:wt.Z.instruction}),(0,n.jsx)(ft,{className:wt.Z.mainForm})]}),(0,n.jsx)(vt,{className:wt.Z.footer})]}),!1]})}))},17941:(e,t,i)=>{i.d(t,{F:()=>l,K:()=>s});var a=i(25807),r=i(69905);function s(e){const t=a.$.userInfo.uid;return!!t&&(0,r.cF)(r.Qt.UseHasAgree,t).get().includes(e)}function l(e){const t=a.$.userInfo.uid;t&&(0,r.cF)(r.Qt.UseHasAgree,t).set("add",[e])}},97311:(e,t,i)=>{i.d(t,{C3:()=>o,J9:()=>n,Jr:()=>s,lm:()=>c,y8:()=>l});var a=i(96706),r=i.n(a);const s=(e,t="image/png")=>{let i=e;e.startsWith("data:")&&(i=e.split(",")[1]);const a=atob(i),r=new Array(a.length);for(let l=0;l<a.length;l++)r[l]=a.charCodeAt(l);const s=new Uint8Array(r);return new Blob([s],{type:t})},l=e=>URL.createObjectURL(e),n=async e=>{const t=await fetch(e),i=await t.blob();return l(i)};const o=async e=>{const t=await e.arrayBuffer(),i=new Uint8Array(t);return r()(i)},c=e=>e.toLowerCase().split(".").pop()},69905:(e,t,i)=>{i.d(t,{Qt:()=>r,ZP:()=>n,cF:()=>l});var a=i(50959);let r=function(e){return e.TagEachUser="TagEachUser",e.UseHasAgree="useHasAgree",e}({});const s={TagEachUser:20};function l(e,t,i=s[e]){return{get:()=>JSON.parse(localStorage.getItem(e)||"{}")[t]||[],set:(a,r)=>{const s=JSON.parse(localStorage.getItem(e)||"{}"),l=s[t]||[];let n=[];"add"===a?(Array.isArray(r)?l.unshift(...r):l.unshift(r),n=Array.isArray(r)?Array.from(new Set(l.slice(0,i))):r):"remove"===a?n=l.filter((e=>Array.isArray(r)?r.includes(e):e!==r)):"change"===a&&(n=r),s[t]=n;const o=JSON.stringify(s);localStorage.setItem(e,o)}}}const n=(e,t,i)=>(0,a.useMemo)((()=>l(e,t,i)),[e,t,i])},73622:(e,t,i)=>{i.d(t,{r:()=>l});var a,r=i(50959);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},s.apply(this,arguments)}const l=e=>r.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",width:10,height:10,fill:"none",viewBox:"0 0 10 10"},e),a||(a=r.createElement("path",{fill:"currentColor",d:"M5.005 10c2.735 0 5-2.265 5-5S7.735 0 5 0 0 2.265 0 5s2.27 5 5.005 5Zm0-.888A4.096 4.096 0 0 1 .898 5 4.092 4.092 0 0 1 5 .888 4.108 4.108 0 0 1 9.118 5a4.097 4.097 0 0 1-4.113 4.112Zm-.108-3.116c.253 0 .413-.15.418-.346v-.062c.005-.263.17-.433.5-.655.475-.31.805-.599.805-1.171 0-.816-.727-1.26-1.568-1.26-.836 0-1.394.393-1.538.842a.83.83 0 0 0-.041.247c0 .227.175.351.36.351.28 0 .331-.144.486-.325.16-.258.382-.413.696-.413.429 0 .702.243.702.599 0 .32-.206.48-.63.774-.345.242-.603.5-.603.965v.057c0 .268.15.397.413.397Zm-.01 1.47a.527.527 0 0 0 .541-.516c0-.294-.242-.516-.542-.516a.53.53 0 0 0-.541.516c0 .29.253.516.541.516Z"})))},20182:(e,t,i)=>{i.d(t,{Z:()=>a});const a={textarea:"textarea-LCPYTj"}}}]);