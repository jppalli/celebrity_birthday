"use strict";(self.webpackChunkartist_op_web=self.webpackChunkartist_op_web||[]).push([[749],{79679:(e,t,r)=>{r.d(t,{D:()=>g});var i=r(50959),a=r(44478),n=r(26800),o=r(84875),s=r.n(o),c=r(84736),l=r(45599),u=r(20468),m=r(44704),p=r(86057),_=r(11527);const d=e=>{const{position:t,getPopupContainer:r,onClosePopover:a,popoverProps:o}=e,[l,u]=(0,i.useState)(!0),d=(0,n.Z)((()=>u(!1))),g=(0,i.useRef)(null);return(0,i.useLayoutEffect)((()=>{var e;null===(e=g.current)||void 0===e||e.focus()}),[]),(0,_.jsx)(c.J2,{autoAdjustOverflow:!0,position:"bottomLeft",clickToHide:!0,...o,className:s()(o.className,m.i.heycanPopoverWrapperClearStyle),trigger:"custom",visible:l,onEscKeyDown:d,onClickOutSide:d,getPopupContainer:r,onVisibleChange:e=>{var t;!e&&a(),null===(t=o.onVisibleChange)||void 0===t||t.call(o,e)},children:(0,_.jsx)("div",{className:p.Z.point,tabIndex:-1,ref:g,style:{...t}})})};function g(e){const{zIndex:t=1e3,...r}=e,[o,s]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),{i18n:g}=(0,l.$)(),f=(0,n.Z)((()=>{o&&(o.destroy(),s(null),m(null))})),h=(0,n.Z)((()=>{null==o||o.destroy()})),y=(0,n.Z)((e=>{if(o)return;const r=document.createElement("div");r.className=p.Z.root,r.style.zIndex=`${t}`;r.addEventListener("wheel",(e=>{e.currentTarget===r&&(e.preventDefault(),e.stopPropagation())}),!1),window.addEventListener("resize",f),document.body.appendChild(r);const i=(0,a.createRoot)(r);s({container:r,reactRoot:i,destroy:()=>{r.remove(),Promise.resolve().then((()=>i.unmount())),window.removeEventListener("resize",f)}}),m(e)})),v=(0,n.Z)((e=>{e.preventDefault(),e.stopPropagation(),y({left:e.clientX,top:e.clientY})}));return(0,i.useLayoutEffect)((()=>h),[]),(0,i.useLayoutEffect)((()=>{o&&c&&o.reactRoot.render((0,_.jsx)(u.a,{i18n:g,children:(0,_.jsx)(d,{popoverProps:r,getPopupContainer:()=>o.container,onClosePopover:f,position:c})})),o&&(o.container.style.zIndex=`${t}`)})),{handleContextMenu:v}}},503:(e,t,r)=>{r.d(t,{m:()=>n});var i=r(3731),a=r(11527);function n(e){const{items:t}=e,r=e=>{e.currentTarget===e.target&&e.stopPropagation()};return(0,a.jsx)("div",{className:i.Z.menu,onClick:r,children:(0,a.jsx)("div",{className:i.Z.menuItemContainer,onClick:r,children:t.map((({key:e,render:t},r)=>t({key:e,index:r,className:i.Z.menuItem})))})})}},74474:(e,t,r)=>{r.d(t,{y:()=>d});var i=r(93302),a=r(50959),n=r(98205),o=r(28516),s=r(23479);const c=(e,t,r)=>r>e&&r<t;var l=r(11527);const u={cursor:"move"},m=(0,s.Pi)((({children:e,index:t,id:r,className:s,onMoveCard:m,onHoverCard:p,onCardClick:_,startPoint:d,scrollAreaRef:g,rect:f,onRect:h})=>{const y=(0,a.useRef)(null),[{handlerId:v},b]=(0,n.L)({accept:"sticker",collect:e=>({handlerId:e.getHandlerId()})}),x=()=>(new Date).getTime()-d.current.clickTime[0]>1e3,[{isDragging:C},k]=(0,o.c)({type:"sticker",item:()=>({id:r,index:t}),collect:e=>({isDragging:e.isDragging(),monitor:e}),canDrag:()=>x()});b(k(y));const P=e=>{var r,i;if(!g.current||!y.current)return;if(!x())return;const a=g.current.getBoundingClientRect(),{top:n,bottom:o}=a;if(c(n,n+20,e.clientY)&&g.current.scrollTop>0)return g.current.scrollTop-=2,void p(t,-1);if(c(o-20,o,e.clientY)&&g.current.scrollTop+g.current.clientHeight<g.current.scrollHeight)return g.current.scrollTop+=2,void p(t,-1);const{hoverIndex:s,direction:l}=((e,t)=>{const r=e.findIndex((e=>c(e.left,e.right,t.x)&&c(e.top,e.bottom,t.y)));if(r<0)return{hoverIndex:-1,direction:0};const i=(e[r].right+e[r].left)/2;return{hoverIndex:r,direction:t.x<i?-1:0}})(f,{x:e.clientX+((null===(r=d.current.centerOffset)||void 0===r?void 0:r.x)||0),y:e.clientY+((null===(i=d.current.centerOffset)||void 0===i?void 0:i.y)||0)});p(t,s,l)},T=(0,i.Z)((e=>P(e)),20);return(0,a.useEffect)((()=>{if(y.current){const e=y.current.getBoundingClientRect();null==h||h(t,e)}}),[y.current,h,t]),(0,l.jsx)("div",{draggable:!0,ref:y,className:s,style:{...u,opacity:C?0:1},"data-handler-id":v,onDrag:T,onDragStart:e=>{var r;if(!g.current||!y.current)return;_(t);const i=(null===(r=g.current)||void 0===r?void 0:r.scrollTop)||0,a=y.current.getBoundingClientRect();d.current={x:(null==e?void 0:e.clientX)||-1,y:(null==e?void 0:e.clientY)||-1,start:!0,scrollTop:i,centerOffset:{x:(a.left+a.right)/2-e.clientX,y:(a.top+a.bottom)/2-e.clientY},index:t,clickTime:d.current.clickTime}},onDragEnd:()=>{x()&&m()},children:e})}));var p=r(26699),_=r(4690);const d=(0,s.Pi)((function({list:e,className:t,getId:r,renderCard:i,onMoveCard:n,onHoverCard:o,onCardClick:s,scrollAreaRef:c}){const[u,d]=(0,a.useState)(-1),[g,f]=(0,a.useState)(-1),h=(0,a.useRef)({x:-1,y:-1,start:!1,scrollTop:0,index:-1,clickTime:[-3e3,0]}),y=(0,a.useRef)([]),v=(e,t)=>{(()=>{const e=Date.now()-h.current.clickTime[0]>1e3;h.current.clickTime=e?[h.current.clickTime[1],Date.now()]:[h.current.clickTime[0],Date.now()]})(),s(e,t)},b=()=>{-1!==u&&(n(h.current.index,u+g),d(-1),h.current={x:-1,y:-1,start:!1,scrollTop:0,index:-1,clickTime:h.current.clickTime})},x=(e,t,r=0)=>{h.current.start&&(d(t),f(r),null==o||o(u))},C=(e,t)=>{y.current[e]=t},k=e=>e!==u?null:g?"left":"right";return(0,l.jsx)(p.W,{backend:_.PD,children:e.map(((e,a)=>(0,l.jsx)(m,{index:a,className:t,scrollAreaRef:c,startPoint:h,rect:y.current,id:r(e),onRect:C,onHoverCard:x,onMoveCard:b,onCardClick:()=>v(e,a),children:i(e,k(a))},a)))})}))},38803:(e,t,r)=>{r.d(t,{Z:()=>f});var i=r(50959),a=r(84875),n=r.n(a),o=r(84736),s=r(26800),c=r(45599),l=r(46309),u=r(67927),m=r(21919),p=r(54847),_=r(5696),d=r(80432),g=r(11527);const f=({className:e,leftText:t,isPublishDisabled:r,isPublishing:a,needConfirmModalOnClose:f,onPublish:h,beforeCancel:y,onCancel:v})=>{const{t:b}=(0,c.$)(),x=(0,s.Z)((async()=>{if(y&&y(),f){if(await u.Z.warn({mainText:b("pc_sticker_cancel_web"),subText:b("pc_sticker_click_unrecoverable_web"),confirmBtnText:b("pc_stickers_release_confirm_quit_web"),cancelBtnText:b("pc_stickers_release_cancel_web")})!==u.L.Confirm)return}v?v():(0,l.Nt)()})),C=m.YW.Creator,{language:k,region:P}=p.appModel.appInfo,T=(0,i.useMemo)((()=>(0,_.dr)({lang:k,region:P})),[k,P]);return(0,g.jsxs)("div",{className:n()(e,d.Z.root),children:[(0,g.jsx)("div",{className:d.Z.left,onClick:undefined,children:t}),(0,g.jsxs)("div",{className:d.Z.right,children:[(0,g.jsx)("span",{className:d.Z.remind,onClick:()=>{window.open(T,"_blank")},children:b("pc_sticker_release_agree_{X}_web",{X:(0,g.jsx)("span",{className:d.Z.protocol,children:m.rr[C]},"protocol")})}),(0,g.jsxs)("div",{className:d.Z.buttonContainer,children:[(0,g.jsx)(o.zx,{className:d.Z.button,type:"primary",theme:"solid",disabled:r,loading:a,onClick:h,children:b("pc_stickers_release_web")}),(0,g.jsx)(o.zx,{className:d.Z.button,type:"secondary",theme:"solid",onClick:x,children:b("pc_stickers_release_cancel_web")})]})]})]})}},21130:(e,t,r)=>{r.d(t,{D5:()=>m,pg:()=>_,t9:()=>p});var i=r(59787),a=r(50959),n=r(42983),o=r(97311),s=r(94435),c=r(9679),l=r(67078);const u={[n.Ab.Sticker]:"sticker",[n.Ab.Filter]:"filter",[n.Ab.FilterCollection]:"filter",[n.Ab.AudioEffect]:"audio",[n.Ab.Video]:"video",[n.Ab.TextTemplate]:"text_template",[n.Ab.SubtitleTemplate]:"caption_template",[n.Ab.WordArt]:"flower",[n.Ab.LocalEffects]:"effect"};class m{constructor({itemType:e}){(0,i.Z)(this,"materialTypeParams",{material_category:"",material_type:""}),(0,i.Z)(this,"isCollection",!1),this.isCollection=e>100,this.materialTypeParams={material_category:u[e]||"",material_type:e>100?"collection":"single"}}sendPageActionLog(e){(0,c.iL)({...this.materialTypeParams,...e,...this.isCollection&&{collection_detail:e.collection_detail||"collection_all"}})}sendMaterialUploadStatusLog(e){(0,c.j2)({...this.materialTypeParams,...e})}sendMaterialImportErrorLog(e){return(0,c.DV)({...this.materialTypeParams,...e})}sendMaterialPublishErrorLog(e){return(0,c.Sj)(e.map((e=>({...this.materialTypeParams,...e}))))}sendMaterialPublishStatusLog(e,t){var r;const{status:i,error_type:a,cover_type:n,resolution:u,time:m,path:p,targetedActivityId:_}=e,{common_data:d,is_vip:g}=e.publishParams,f=[];return d.is_business&&f.push("business"),g&&f.push("subscribe"),(0,c.$v)({...this.materialTypeParams,status:i,title:d.title,isOriginal:Boolean(d.is_original),tags:d.tags||[],material_format:(0,o.lm)(p),material_size:null===(r=d.file)||void 0===r?void 0:r.size,description:d.description,resolution:u,error_type:a,time:m,cover_type:n,authorize_range:f.join(","),isVipAuthorized:(0,l.$X)(e.publishParams.copyright,s.$x.Vip),isBusinessAuthorized:(0,l.$X)(e.publishParams.copyright,s.$x.Business),is_official_task:d.post_channel===s.iu.Open?0:1,task_id:_,...t})}sendMaterialPublishPageResultLog(e){(0,c.S4)({...this.materialTypeParams,...e})}sendClickSubscriptionCheckboxLog(e){this.sendPageActionLog({action:e?"check_box_subscription":"cancel_check_box_subscription"})}sendSubscriptionStatementLog(e){(0,c.ce)({...this.materialTypeParams,...e})}sendClickCommercialCheckboxLog(e){this.sendPageActionLog({action:e?"check_box_commercial":"cancel_check_box_commercial"})}sendCommercialStatementLog(e){(0,c.Ad)({...this.materialTypeParams,...e})}sendAuthorSignLog(e){(0,c._4)({...this.materialTypeParams,...e})}}function p(e){(0,a.useEffect)((()=>{e.sendPageActionLog({action:"upload_page_show"})}),[])}function _(e){const{mainFormLayout:t,sendLogServ:r}=e;(0,a.useEffect)((()=>{"mainForm"===t&&r.sendPageActionLog({action:"detail_page_show"})}),[t])}},67078:(e,t,r)=>{r.d(t,{$X:()=>n,pn:()=>a});var i=r(94435);function a({isVip:e,isBusiness:t,authFiles:r}){var a;const n=null!==(a=null==r?void 0:r.map((({uri:e})=>({uri:e}))))&&void 0!==a?a:[];return{root:{is_vip:!1,copyright:{copyright_info:[{scene:i.$x.Vip,auth_status:e?i.U9.Authorized:i.U9.Unauthorized,third_party_agreements:[]},{scene:i.$x.Business,auth_status:t?i.U9.Authorized:i.U9.Unauthorized,third_party_agreements:t?n:[]}]}},commonData:{is_business:!1,is_original:Boolean(e||t)}}}function n(e,t){return Boolean(null==e?void 0:e.copyright_info.some((e=>e.scene===t&&e.auth_status===i.U9.Authorized)))}},51654:(e,t,r)=>{r.d(t,{u:()=>s});var i=r(50959),a=r(66589),n=r(46309),o=r(61022);function s(e){const t=(0,o.fv)((()=>({get watchResult(){return e.watch()}})));(0,i.useEffect)((()=>{const e=(0,a.EH)((()=>{const e=t.watchResult;(0,n.c0)({isNeed:e})}));return()=>{e()}}),[])}},9679:(e,t,r)=>{r.d(t,{$v:()=>u,Ad:()=>_,DV:()=>c,S4:()=>m,Sj:()=>l,_4:()=>d,ce:()=>p,iL:()=>o,j2:()=>s});var i=r(17095);function a(e){return void 0===e?e:String(Math.round(e/1024))}function n(e){const{material_category:t,material_type:r,collection_detail:i}=e;return{material_category:t,material_type:r,...i&&"collection"===r&&{collection_detail:i}}}function o(e){const{action:t,extra:r={},material_cnt:a}=e;(0,i.g)({eventName:"personal_page_material_publish_page_action",params:{action:t,material_cnt:a,...n(e),...r}})}function s(e){const{error_report:t,upload_status:r,time:o,isCompressed:s,sizeBeforeCompress:c,sizeAfterCompress:l,resolutionBeforeCompress:u,resolutionAfterCompress:m,extra:p={}}=e;(0,i.g)({eventName:"personal_page_material_upload_status",params:{...n(e),error_report:t,upload_status:r,time:o,is_compressed:s?1:0,...s&&{material_size_before_compress:a(c),material_size_after_compress:a(l),material_resolution_before_compress:u,material_resolution_after_compress:m},...p}})}function c(e){const{error_report:t}=e;(0,i.g)({eventName:"personal_page_material_import_error_report",params:{...n(e),error_report:t}})}function l(e){if(0===e.length)return;const t=function(e){const t={};return e.forEach((e=>{Object.entries(e).forEach((([e,r])=>{const i=r||"";t[e]=t[e]?`${t[e]},${i}`:i}))})),t}(e),r=new Set(t.material_type.split(","));1===r.size&&(t.material_type=r.values().next().value),(0,i.g)({eventName:"personal_page_material_publish_error_report",params:t})}function u(e){const{status:t,material_type:r,material_category:n,title:o,description:s,isOriginal:c,tags:l,material_format:u,material_size:m,resolution:p,error_type:_,cover_type:d,time:g,extra:f={},authorize_range:h,isVipAuthorized:y,isBusinessAuthorized:v,is_official_task:b,task_id:x,material_id:C,material_subcategory:k,effect_type_title:P,effect_type_id:T}=e;return(0,i.g)({eventName:"personal_page_material_publish_status",params:{status:t,material_type:r,material_category:n,material_title:o,material_introduction:s,is_original:c?"1":"0",hashtag:l.join(","),material_format:u,material_size:a(m),resolution:p,authorize_range:h,is_official_task:b,task_id:x,material_id:C,material_subcategory:k,effect_type_title:P,effect_type_id:T,..."fail"===t&&{error_type:_},cover_type:d,time:g,is_subscription_authorized:y?1:0,is_commercial_authorized:v?1:0,...f}})}function m(e){return(0,i.g)({eventName:"personal_page_material_publish_page_result",params:e})}function p(e){const{action:t,material_category:r,material_type:a,entry_from:n}=e;return(0,i.g)({eventName:"ugc_material_subscription_original_statment",params:{action:t,material_category:r,material_type:a,entry_from:n}})}function _(e){const{action:t,material_category:r,material_type:a,entry_from:n,hasCopyrightAuthorization:o}=e;return(0,i.g)({eventName:"ugc_material_commercial_original_statment",params:{action:t,material_category:r,material_type:a,entry_from:n,..."boolean"==typeof o&&{has_copyright_authorization:o?"1":"0"}}})}function d(e){const{action:t,page_type:r,material_category:a,material_type:n,button_name:o}=e;return(0,i.g)({eventName:"ugc_material_creator_sign_agreement",params:{action:t,page_type:r,material_category:a,material_type:n,...o&&{button_name:o}}})}},17095:(e,t,r)=>{r.d(t,{g:()=>a});var i=r(46309);function a(e){console.log("[sendLog]",e.eventName,e.params),(0,i.qx)(e)}},97311:(e,t,r)=>{r.d(t,{lm:()=>i});r(96706);const i=e=>e.toLowerCase().split(".").pop()},86057:(e,t,r)=>{r.d(t,{Z:()=>i});const i={root:"root-qThJ3Y",point:"point-ytHHVg"}},3731:(e,t,r)=>{r.d(t,{Z:()=>i});const i={menu:"menu-v4m02G",menuItemContainer:"menuItemContainer-K5Eent",menuItem:"menuItem-eU7buP"}}}]);