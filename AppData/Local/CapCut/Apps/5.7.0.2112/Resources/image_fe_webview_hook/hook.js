function _construct(e,t,r){if(_isNativeReflectConstruct())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,t);var o=new(e.bind.apply(e,n));return r&&_setPrototypeOf(o,r.prototype),o}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _regeneratorRuntime(){"use strict";_regeneratorRuntime=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),s=new E(n||[]);return o(a,"_invoke",{value:R(e,r,s)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",h="suspendedYield",p="executing",_="completed",w={};function y(){}function g(){}function v(){}var m={};c(m,a,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(q([])));x&&x!==r&&n.call(x,a)&&(m=x);var k=v.prototype=y.prototype=Object.create(m);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(o,i,a,s){var u=d(e[o],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function R(t,r,n){var o=f;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===_){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===w)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===f)throw o=_,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var c=d(t,r,n);if("normal"===c.type){if(o=n.done?_:h,c.arg===w)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=_,n.method="throw",n.arg=c.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,w;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,w):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function q(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return g.prototype=v,o(k,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:g,configurable:!0}),g.displayName=c(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},O(S.prototype),c(S.prototype,s,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(k),c(k,u,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=q,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:q(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),w}},t}function _createForOfIteratorHelperLoose(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep(i,n,o,a,s,"throw",e)}a(void 0)}))}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_extends.apply(this,arguments)}!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e="URLSearchParams"in self,t=("Symbol"in self&&Symbol,"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(e){return!1}}()),r="FormData"in self,n="ArrayBuffer"in self;function o(e){return e&&DataView.prototype.isPrototypeOf(e)}if(n)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(e){return e&&i.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function c(e){var t=new FileReader,r=u(t);return t.readAsArrayBuffer(e),r}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function f(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new Headers(t.headers),this.url=t.url||"",this._initBody(e)}(function(){return this.bodyUsed=!1,this._initBody=function(i){var s=this;this._bodyInit=i,i?"string"==typeof i?this._bodyText=i:t&&Blob.prototype.isPrototypeOf(i)?this._bodyBlob=i:r&&FormData.prototype.isPrototypeOf(i)?this._bodyFormData=i:e&&URLSearchParams.prototype.isPrototypeOf(i)?this._bodyText=i.toString():n&&t&&o(i)?(this._bodyArrayBuffer=l(i.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n&&(ArrayBuffer.prototype.isPrototypeOf(i)||a(i))?this._bodyArrayBuffer=l(i):this._bodyText=i=Object.prototype.toString.call(i):this._bodyText="",this.headers.get("content-type")||("string"==typeof i?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(i)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8")),this.body=new ReadableStream({start:function(e){s._bodyArrayBuffer instanceof ArrayBuffer?(e.enqueue(new Uint8Array(s._bodyArrayBuffer)),e.close()):s._bodyText?(e.enqueue(M(s._bodyText)),e.close()):e.close()}})},t&&(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(c)}),this.text=function(){var e,t,r,n=s(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=u(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}).call(f.prototype),f.prototype.clone=function(){return new f(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers(this.headers),url:this.url})},f.error=function(){var e=new f(null,{status:0,statusText:""});return e.type="error",e};var h=[301,302,303,307,308];f.redirect=function(e,t){if(-1===h.indexOf(t))throw new RangeError("Invalid status code");return new f(null,{status:t,headers:{location:e}})};var p=self.DOMException;try{new p}catch(e){(p=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),p.prototype.constructor=p}function _(e){return ArrayBuffer.prototype.isPrototypeOf(e)||a(e)}function w(e){return Blob.prototype.isPrototypeOf(e)}function y(e){return URLSearchParams.prototype.isPrototypeOf(e)}function g(){if(I("fixResponseInstanceOf")&&window.Symbol){Object.defineProperty(window.Response,window.Symbol.hasInstance,{value:function(e){return e instanceof f||function(e){var t=window.Response.prototype;for(e=e.__proto__;;){if(null===e)return!1;if(e===t)return!0;e=e.__proto__}}(e)}})}}function v(e){void 0===e&&(e="");try{var t;return null==(t=A(e).search)||null==(t=t.slice(1))?void 0:t.split("&").some((function(e){var t=e.split("="),r=t[0],n=t[1];return"x_cc_webview_res_type"===r&&"binary"===n}))}catch(e){return!1}}var m=/iPhone|iPad/.test(navigator.userAgent),b=/Android/gi.test(navigator.userAgent),x=/windows/gi.test(navigator.userAgent),k=/Macintosh|Mac OS X/.test(navigator.userAgent),O=function(){return m?"ios_web":b?"android_web":x?"windows_web":k?"mac_web":"unknown"};function S(){return I("local_test")}var R={info:function(e){if(S()){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e]&&console[e].apply(null,r)}},log:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];R.info.apply(R,["log"].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];R.info.apply(R,["error"].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];R.info.apply(R,["warn"].concat(t))}};function L(e){var t={};return e instanceof Headers?e.forEach((function(e,r){t[r]=e})):e&&Object.getOwnPropertyNames(e).forEach((function(r){t[r]=e[r]})),t}var A=function(e){var t=document.createElement("a");return t.href=e,t};function T(e){if(!window.__capcutwebview_hook_whitelist_setting__||!window.__capcutwebview_hook_whitelist_setting__.excludes||!window.__capcutwebview_hook_whitelist_setting__.excludes.length)return!0;var t=e;t.startsWith("http")||(t=location.protocol+"://"+location.origin+(t.startsWith("/")?"":"/")+t);var r=window.__capcutwebview_hook_whitelist_setting__.excludes;for(var n in r)if(t.indexOf(r[n])>-1)return!1;return!0}function E(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});try{var n,o=_extends({eventName:e},t,r,{url:location.href,version:window.__capcutwebview_hook_version__,source:O(),user_agent:navigator.userAgent});if(R.log("cwh_slardar_report",o),m)return null==(n=window.webkit)||null==(n=n.messageHandlers)||null==(n=n.__WebViewReport)||n.postMessage(o),!0;if(x)cefQuery({request:JSON.stringify({callType:"__WebViewReport",data:o})});else{var i,a;if(k)return null==(i=window.webkit)||null==(i=i.messageHandlers)||null==(i=i.__WebViewReport)||i.postMessage(JSON.stringify(o)),!0;null==(a=window.__WebViewReport)||a.postMessage(JSON.stringify(o))}}catch(e){R.error("report error",e)}}function q(e){return Object.prototype.toString.call(e).slice(8,-1)}function P(e){return void 0===e&&(e="get"),["post","put","patch","delete"].includes(e.toLowerCase())}function C(e){return void 0===e&&(e="get"),["get","head","options"].includes(e.toLowerCase())}var B=function(e){return void 0===e&&(e="get"),["get","head","options","delete","post","put","patch"].includes(e.toLowerCase())};function W(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),S()&&e.message){var r="[local_test]: "+e.message+"; please contact CapCut Cross Platform Team if you have any problem. This toast does not appear online";R.warn(r),function(e){e&&setTimeout((function(){var t=document.createElement("div");t.textContent=e,t.style.cssText="z-index: 10000;position: fixed;left: 0px;right: 0px;top: 100px;text-align: center;background-color: rgba(84, 84, 84, 0.92);color: white;border-radius: 4px;padding: 4px;margin: 16px;font-size:14px;",(document.body||document.documentElement).appendChild(t),setTimeout((function(){(document.body||document.documentElement).removeChild(t)}),2e3)}),1e3)}(r)}E("webview_hook_monitor",_extends({action:e.action},e.category),e.metrics)}function j(e,t){try{var r=q(e);null!=e&&"String"!==r&&"Object"!==r&&W({level:"console",message:"The request data type "+r+" is not supported",action:"cwh_request_body",category:{data_type:r,request_url:t}},{hdt:{ruleId:30001}})}catch(e){R.error("checkBody error")}}function H(e){return e.arrayBuffer().then(U)}function U(e){return e=new Uint8Array(o(e)?e.buffer:e),window.btoa(e.reduce((function(e,t){return e+String.fromCharCode(t)}),""))}function F(e){for(var t=window.atob(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n.buffer}function I(e){try{var t;0;var r=window.__webview_ajax_hook_js_switch__||{};if(!r[e])return!1;var n=A(location.href),o=n.host+n.pathname;return!((null==(t=r[e])||null==(t=t.excludes)?void 0:t.findIndex((function(e){return o.startsWith(e)})))>=0)}catch(e){return!1}}var M=function(e){return(new TextEncoder).encode(e)};function N(){for(var e="WebKitFormBoundary",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<16;r++)e+=t.charAt(Math.floor(62*Math.random()));return e}var D=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t){var r,n,o,i,a,s,u,c,l;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=N(),n=M("------"+r+"\n"),o=[],i=_regeneratorRuntime().mark((function e(){var t,r,i,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.value,r=t[0],i=t[1],o.push(n),!Blob.prototype.isPrototypeOf(i)){e.next=14;break}return File.prototype.isPrototypeOf(i)?o.push(M('Content-Disposition: form-data; name="'+r+'"; filename="'+i.name+'";\r\n')):o.push(M('Content-Disposition: form-data; name="'+r+'";\r\n')),o.push(M("content-type: "+i.type+"\r\n\r\n")),e.next=9,new Promise((function(e,t){var r=new FileReader;r.onload=function(){e(new Uint8Array(r.result))},r.onerror=function(){t(r.error)},r.readAsArrayBuffer(i)}));case 9:a=e.sent,o.push(a),o.push(M("\n")),e.next=16;break;case 14:o.push(M('Content-Disposition: form-data; name="'+r+'"\r\n\r\n')),o.push(M(i+"\n"));case 16:case"end":return e.stop()}}),e)})),a=_createForOfIteratorHelperLoose(t.entries());case 5:if((s=a()).done){e.next=9;break}return e.delegateYield(i(),"t0",7);case 7:e.next=5;break;case 9:return o.push(M("------"+r+"--")),u=o.reduce((function(e,t){return e+t.length}),0),c=new Uint8Array(u),l=0,o.forEach((function(e){c.set(e,l),l+=e.length})),e.abrupt("return",Promise.resolve({formData:!0,result:U(c),contentType:"multipart/form-data; boundary=----"+r}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=location.href.indexOf("enable_looki=true")>-1,G=["uid","user_id","userId","userid"],J=function(e){if(V){e.headers["enable-looki"]="true";var t=location.href.slice(location.href.indexOf("?")+1);t=location.href.slice(0,location.href.indexOf("#"));for(var r,n=_createForOfIteratorHelperLoose(new URLSearchParams(t).entries());!(r=n()).done;){var o=r.value,i=o[0],a=o[1];if("uid_from_share_owner"!==i)for(var s=0,u=G;s<u.length;s++){var c=u[s];if(i.indexOf(c)>-1)return void(e.headers["has-third-uid"]=a)}else e.headers["uid-from-share-owner"]=a}}},X=function(e){return"__capcutwebview_ajax_hook_"+e},Q=function(){var e=X("planb");return 1===window[e]};function z(){window.__unhook_fetch__&&window.__unhook_fetch__();var e;window.fetch&&(window._realFetch=window._realFetch||window.fetch,window.__unhook_fetch__=function(){window.fetch=window._realFetch},window.fetch=function(e,t){var r,n="",o="GET",i={},a={},s="unhook",u=!1,c=!1,l="default",d=!1,h=!1;if("string"==typeof e&&void 0===t)n=e,r=Promise.resolve(void 0);else if("string"==typeof e&&"object"==typeof t)n=e,o=t.method||o,t.body&&t.body.constructor===FormData.prototype.constructor?(l="form data",r=D(t.body),c=!0,d=!0):_(t.body)?(l="array buffer",d=!0,r=Promise.resolve(U(t.body))):y(t.body)?(l="url search",h=!0,r=Promise.resolve(t.body.toString())):w(t.body)?(l="blob",d=!0,r=H(t.body)):r=Promise.resolve(t.body),a=_extends({},a,L(t.headers));else if("object"==typeof e&&"function"==typeof e.json){var p;n=e.url||"",o=e.method||o,"application/x-www-form-urlencoded"===e.headers.get("content-type")?(l="urlencoded",r=e.text()):(null==(p=e._raw_body)?void 0:p.constructor)===FormData.prototype.constructor?(l="form data",r=D(e._raw_body),c=!0,d=!0):y(e._raw_body)?(l="url search",h=!0,r=e.text()):_(e._raw_body)?(l="array buffer",d=!0,r=Promise.resolve(U(e._raw_body))):w(e._raw_body)?(l="blob",d=!0,r=H(e._raw_body)):P(o)&&(r=e.text()),a=_extends({},a,L(e.headers))}c&&(a["content-type"]="multipart/form-data"),h&&!a["content-type"]&&(a["content-type"]="application/x-www-form-urlencoded;charset=UTF-8"),a["User-Agent"]=navigator.userAgent;var g=C(o),b=Q();if(g&&b&&(r=r||Promise.resolve(null),n=n||e),r){var O={};return r.then((function(r){i=r,r&&r.formData&&(i=r.result,a=_extends({},a,{"content-type":r.contentType}));var c,h,p=P(o);return b?u=B(o):(u=B(o),T(n)||(R.warn("shouldn't hook url: "+n),u=!1,s="exclude")),!g||n.startsWith("http")||n.startsWith("/")||(u=!1),u&&(window._is_offline_closed?(u=!1,s="offline_closed"):null==i?(i=void 0,s="body_empty",p&&(a["content-type"]=a["content-type"]||"application/json")):s="hook"),u?new Promise((function(r,s){var u=t&&t.signal||e&&e.signal;if(u&&u.aborted)return s(new DOMException("Aborted","AbortError"));var c=window.global_index;window.xxxRequestId=c,window.global_map[c]={callbackNative:function(e){if(u&&u.aborted)return s(new DOMException("Aborted","AbortError"));e.responseURL&&-1===e.responseURL.indexOf("monitor")&&-1===e.responseURL.indexOf("mcs.")&&R.log("receive fetch message",e);var t,n={status:e.status,statusText:e.statusText,headers:(t=e.headers||"",new Headers(t))};n.url="responseURL"in e?e.responseURL:n.headers.get("X-Request-URL");var o=e.data;e.isResponseBinary&&(o=F(o));var i=new f(o,n);r(i)}},global_index++,O.id=c,j(i,n),O.data=i,O.method=o,O.url=n,O.headers=a,O.source=l,O.category="fetch",O.version="1.0.0.103",J(O),O.url.startsWith("//")?O.url=location.protocol+O.url:O.url.startsWith("/")&&(O.url=location.origin+O.url),d&&(O.isBinary=!0),v(n)&&(O.isResponseBinary=!0),-1===O.url.indexOf("monitor")&&-1===O.url.indexOf("mcs.")&&R.log("send fetch message: "+O.url,O);try{var h;if(m)null==(h=window.webkit)||null==(h=h.messageHandlers)||null==(h=h.__WebViewRequest)||h.postMessage(O);else if(x)cefQuery({request:JSON.stringify({callType:"__WebViewRequest",data:O})});else if(k){var p;null==(p=window.webkit)||null==(p=p.messageHandlers)||null==(p=p.__WebViewRequest)||p.postMessage(JSON.stringify(O))}else{var _;"success"!==(null==(_=window.__WebViewRequest)?void 0:_.postMessage(JSON.stringify(O)))&&window._realFetch(e,t).then(r).catch(s)}}catch(e){window.imy_realxhr_callback(c,{status:0,data:e.message||""}),E("webview_ttnet_request_failed",{method:O.method.toLowerCase(),request_url:O.url,category:"fetch",msg:e.message||""})}})):(E("webview_no_ttnet_request",((h={method:null==(c=o)||null==c.toLowerCase?void 0:c.toLowerCase(),request_url:n,category:"fetch"}).category={category_1:s},h)),window._realFetch(e,t))})).catch((function(e){var t;throw W({message:"hook fetch call failed. "+o+" "+n,action:"hook_fetch_fail",category:{method:null==(t=o)||null==t.toLowerCase?void 0:t.toLowerCase(),request_url:n,url:location.href,msg:(null==e?void 0:e.message)||""},metrics:{metric_1:Number(u)}}),R.error("error",e),e}))}return window._realFetch(e,t)}),window._setbackXML_=function(){window.XMLHttpRequest=window._ahrealxhr,"function"==typeof window._realFetch&&(window.fetch=window._realFetch)},I("request_constructor")&&(e=window.Request,window.Request=function(t,r){var n;void 0===r&&(r={});var o=new e(t,r);return o._raw_body=t instanceof window.Request?null!=(n=r.body)?n:t._raw_body:r.body,o},window.Request.prototype=e.prototype)}function K(){window.__unhook_xhr__&&window.__unhook_xhr__();var e=(new Date).getTime();e=parseInt(e/1e3%1e5),window.global_index=e+1,window.global_map={},window.imy_realxhr_callback=function(e,t){var r=global_map[e];if(r&&!r.is_abort&&r.callbackNative(t),!r)try{Array.prototype.slice.call(document.querySelectorAll("iframe")).forEach((function(r){r.contentWindow.postMessage({key:"imy_realxhr_callback",id:e,message:t},"*")}))}catch(e){R.error(e)}global_map[e]=null},window.addEventListener("message",(function(e){if(e&&e.data){var t=e.data||{};"imy_realxhr_callback"===t.key&&t.id&&t.message&&window.imy_realxhr_callback(t.id,t.message)}}),!1),function(e){function t(e){return function(){var t;E("webview_hook_monitor",{action:"capcut_webview_hook_prototype_call",category_1:e}),R.warn("XMLHttpRequest.prototype."+e+" called");for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(t=o(e)).call.apply(t,[this].concat(n))}}function r(e){return function(){return this.hasOwnProperty(e+"_")?this[e+"_"]:this._xhr[e]}}function n(t){return function(r){var n=this._xhr,o=this;0==t.indexOf("on")?e[t]?n[t]=function(){e[t](o)||r.apply(n,arguments)}:n[t]=r:this[t+"_"]=r}}function o(t){return function(){var r=[].slice.call(arguments);if(e[t]){var n=e[t].call(this,r,this._xhr);if(!0===n)return;if(n&&("getResponseHeader"===t||"getAllResponseHeaders"===t))return n}return this._xhr[t].apply(this._xhr,r)}}window._ahrealxhr=window._ahrealxhr||XMLHttpRequest,window.__unhook_xhr__=function(){window.XMLHttpRequest=window._ahrealxhr},window.XMLHttpRequest=function(){for(var t in this._xhr=new window._ahrealxhr,this._xhr){var i="";try{i=typeof this._xhr[t]}catch(e){E("webview_hook_monitor",{action:"xhr_attr_error",msg:null==e?void 0:e.message})}"function"===i?this[t]=o(t):Object.defineProperty(this,t,{get:r(t),set:n(t)})}for(var a in e)this[a]||(this[a]=o(a))},window.XMLHttpRequest.UNSENT=0,window.XMLHttpRequest.OPENED=1,window.XMLHttpRequest.HEADERS_RECEIVED=2,window.XMLHttpRequest.LOADING=3,window.XMLHttpRequest.DONE=4,window.XMLHttpRequest.prototype={open:t("open"),send:t("send"),setRequestHeader:t("setRequestHeader"),upload:t("upload"),timeout:t("timeout"),withCredentials:t("withCredentials"),abort:t("abort"),constructor:window.XMLHttpRequest},window._ahrealxhr}({getResponseHeader:function(e,t){if(this.needHook){var r=e&&e[0]?e[0].trim():"";if(r=r.toLowerCase())for(var n in this.responseHeaders)if(r==n.toLowerCase())return this.responseHeaders[n]}},getAllResponseHeaders:function(e,t){if(this.needHook&&this.responseHeaders){var r=this.responseHeaders,n="";return Object.keys(r).forEach((function(e){n=n+e+": "+r[e]+"\r\n"})),n}},setRequestHeader:function(e,t){try{this._headers||(this._headers={});e[0];var r=e[1];r&&(r=r.toString().trim()),this._headers[e[0]]=e[1]}catch(e){R.error(e)}},open:function(e,t){this.open_arguments=e},send:function(e,t){var r,n,o,i,a,s=this,u=Q(),c=function(){s.withCredentials&&(s._xhr.withCredentials=!0),s.responseType&&(s._xhr.responseType=s.responseType),s.timeout&&(s._xhr.timeout=s.timeout)},l=function(e,t){s.request_id=global_index,global_map[s.request_id]=s,global_index++,window.imy_realxhr_callback(s.request_id,{status:0,data:e+(t&&t.message?","+t.message:"")})},d=function(){var t="unhook",r=s.open_arguments[1],n=s.open_arguments&&s.open_arguments[0],o=!1;if(o=u?n&&(P(n)||C(n)):n&&B(n),!C(n)||r.startsWith("http")||r.startsWith("/")||(o=!1,t="non_http"),o&&(t="hook",window._is_offline_closed?(o=!1,t="offline_closed"):!1===s.open_arguments[2]?(o=!1,t="async"):/^about:wk/.test(r)&&(o=!1,t="about:wk")),s.needHook=o,R.log("bytedance://log_event_v3?event=wkwebview_hook&params="+JSON.stringify({value:t})),o){s.request_id=global_index,global_map[s.request_id]=s,global_index++;var i={};s.isBinary&&(i.isBinary=!0),v(s.open_arguments[1])&&(i.isResponseBinary=!0),i.id=s.request_id,j(e[0],s.open_arguments[1]),i.data=e[0],i.method=s.open_arguments[0],i.url=s.open_arguments[1],i.headers=s._headers||{},i.headers["User-Agent"]=navigator.userAgent,i.headers.referer=location.href,i.headers.origin=location.protocol+"//"+location.host,i.source=s.source||"unknown",i.category="xhr",i.version="1.0.0.103",i.url.startsWith("//")?i.url=location.protocol+i.url:i.url.startsWith("/")&&(i.url=location.origin+i.url),J(i),s.readyState=3,-1===i.url.indexOf("monitor")&&-1===i.url.indexOf("mcs.")&&R.log("send xhr message: "+i.url,i);try{var a,d;if(m)return null==(a=window.webkit)||null==(a=a.messageHandlers)||null==(a=a.__WebViewRequest)||a.postMessage(i),!0;if(x)return cefQuery({request:JSON.stringify({callType:"__WebViewRequest",data:i})}),!0;if(k)return null==(d=window.webkit)||null==(d=d.messageHandlers)||null==(d=d.__WebViewRequest)||d.postMessage(JSON.stringify(i)),!0;var f,h,p,_=null==(f=window.__WebViewRequest)?void 0:f.postMessage(JSON.stringify(i));if("success"===_)return!0;E("webview_ttnet_request_failed",{method:null==(h=s.open_arguments)||null==(h=h[0])||null==h.toLowerCase?void 0:h.toLowerCase(),request_url:null==(p=s.open_arguments)?void 0:p[1],category:"xhr",msg:_})}catch(e){var w,y;E("webview_ttnet_request_failed",{method:null==(w=s.open_arguments)||null==(w=w[0])||null==w.toLowerCase?void 0:w.toLowerCase(),request_url:null==(y=s.open_arguments)?void 0:y[1],category:"xhr",msg:e.message||""}),l("run send native fail")}}else{var g,b,O;c(),E("webview_no_ttnet_request",((O={method:null==(g=s.open_arguments)||null==(g=g[0])||null==g.toLowerCase?void 0:g.toLowerCase(),request_url:null==(b=s.open_arguments)?void 0:b[1],category:"xhr"}).category={category_1:t},O))}};if(!u&&!T(null==(r=this.open_arguments)?void 0:r[1]))return R.warn("shouldn't hook url: "+(null==(n=this.open_arguments)?void 0:n[1])),E("webview_no_ttnet_request",((a={method:null==(o=this.open_arguments)||null==(o=o[0])||null==o.toLowerCase?void 0:o.toLowerCase(),request_url:null==(i=this.open_arguments)?void 0:i[1],category:"xhr"}).category={category_1:"exclude"},a)),c(),!1;return e&&e[0]&&e[0].constructor===FormData.prototype.constructor?(this.source="form data",this.isBinary=!0,this.setRequestHeader("content-type","multipart/form-data"),D(e[0]).then((function(t){e[0]=t.result,s.setRequestHeader("content-type",t.contentType),d()})).catch((function(e){R.log("error of formData2Multipart",e),l("error of formData2Multipart",e)})),!0):u||"get"!==this.open_arguments[0].toLowerCase()?_(e[0])?(this.source="array buffer",this.isBinary=!0,e[0]=U(e[0]),d(),!0):w(e[0])?(this.source="blob",this.isBinary=!0,H(e[0]).then((function(t){e[0]=t,d()})).catch((function(e){R.log("error of encodeBuffer2Base64",e),l("run send native fail",e)})),!0):y(e[0])?(this.source="url search",function(e){void 0===e&&(e={}),e=L(e);for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if("content-type"===n.toLocaleLowerCase())return e[n]}return""}(this._headers)||this.setRequestHeader("content-type","application/x-www-form-urlencoded;charset=UTF-8"),e[0]=e[0].toString(),d(),!0):(this.source="default",d()):(this.source="get",d())},abort:function(){this.is_abort=!0},callbackNative:function(e,t){var r=e[0];return this.is_abort?this.readyState=1:(r.responseURL&&-1===r.responseURL.indexOf("monitor")&&-1===r.responseURL.indexOf("mcs.")&&R.log("receive xhr message",r),this.status=r.status,this.responseText=r.data?r.data:"",this.response=r.data?r.data:"",r.isResponseBinary&&(this.response=F(this.response),"blob"===this.responseType&&(this.response=new Blob([this.response]))),this.responseHeaders=r.headers,this.readyState=4),this.readyState>=3&&(this.status>=200&&this.status<300?this.statusText="OK":this.statusText="Fail"),this.dispatchEvent(new Event("readystatechange")),this.dispatchEvent(new Event("load")),4==this.readyState?this.onload&&this.onload():this.onerror&&this.onerror(),this.onloadend&&this.onloadend(),!0}})}function Y(){try{!function(){var e="__ttnetWebviewPerformanceMetrics__";function t(){var t,r=window[e];return!1===r||void 0===r||void 0===(null==(t=r.timing)||null==(t=t.request)?void 0:t.start_time)}function r(e){return void 0===e&&(e=0),Math.floor(1e3*e)}function n(e){return void 0===e&&(e=0),e<=0?0:e}function o(){var t,o,i=window[e],a=(null==(t=i.timing)?void 0:t.detailed_duration)||{},s=(null==(o=i.timing)?void 0:o.request)||{},u=null==i?void 0:i.redirect,c=null==i?void 0:i.webViewRequestStart,l=a.dns,d=a.tcp,f=a.ssl,h=a.send,p=s.request_sent_time,_=s.response_recv_time,w=s.duration,y=s.start_time;return{dns:n(l),tcp:n(d),ssl:n(f),send:n(h),duration:n(w),request_sent_time:r(p),response_recv_time:r(_),start_time:r(y),isRedirect:Boolean(u),redirectEnd:(null==u?void 0:u.end)||0,redirectStart:(null==u?void 0:u.start)||0,redirectCount:(null==u?void 0:u.count)||0,webViewRequestStart:c}}window.__realPerformanceTiming__||(window.__realGetEntriesByType__=performance.getEntriesByType,window.__realPerformanceTiming__=performance.timing,Object.defineProperty(performance,"timing",{get:function(){var e;if(t())return window.__realPerformanceTiming__;var r=o(),n=r.dns,i=r.tcp,a=r.ssl,s=r.send,u=r.request_sent_time,c=r.response_recv_time,l=r.duration,d=r.start_time,f=r.isRedirect,h=r.redirectEnd,p=r.redirectStart,_=r.webViewRequestStart,w=d,y=u-s,g=y,v=g-a-i,b=g-a,x=v,k=x-n,O=c,S=w+l,R=f&&!m?{navigationStart:_,redirectEnd:h,redirectStart:p}:{};return _extends({},null==(e=window.__realPerformanceTiming__)||null==e.toJSON?void 0:e.toJSON(),R,{fetchStart:w,domainLookupStart:k,domainLookupEnd:x,connectStart:v,secureConnectionStart:b,connectEnd:g,requestStart:y,responseStart:O,responseEnd:S})},configurable:!0,enumerable:!1}),performance.getEntriesByType=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=window.__realGetEntriesByType__.apply(performance,r);if(t())return i;if(i&&"navigation"===r[0]&&i.length){var a,s=null==(a=i[0])||null==a.toJSON?void 0:a.toJSON(),u=o(),c=u.dns,l=u.tcp,d=u.ssl,f=u.send,h=u.request_sent_time,p=u.response_recv_time,_=u.duration,w=u.start_time,y=u.isRedirect,g=u.redirectEnd,v=u.redirectStart,b=u.redirectCount,x=u.webViewRequestStart,k=y&&!m?x:window.__realPerformanceTiming__.navigationStart,O=w-k,S=h-f-k,R=S-d-l;return[_extends({},s,y&&!m?{redirectEnd:g-k,redirectStart:v-k,redirectCount:b}:{},{fetchStart:O,domainLookupStart:R-c,domainLookupEnd:R,connectStart:R,secureConnectionStart:S-d,connectEnd:S,requestStart:S,responseStart:p-k,responseEnd:O+_})].concat(i.slice(1))}return i},window.__revertFixPerformanceTiming__=function(){window.__realPerformanceTiming__&&(Object.defineProperty(performance,"timing",{value:window.__realPerformanceTiming__}),window.__realPerformanceTiming__=void 0),window.__realGetEntriesByType__&&(performance.getEntriesByType=window.__realGetEntriesByType__,window.__realGetEntriesByType__=void 0)})}()}catch(e){R.error("fixPerformanceTiming error"),R.error(e)}}var Z=function(e,t){Object.keys(t).forEach((function(r){e[r]=t[r]}))};function $(){try{I("cookie")&&function(){var e=Object.getOwnPropertyDescriptor(Document.prototype,"cookie")||Object.getOwnPropertyDescriptor(HTMLDocument.prototype,"cookie");if(e&&e.configurable){var t=3,r={message:"Using document.cookie directly must be tested in CapCut Webview",action:"cwh_cookie"},n={hdt:{ruleId:30003}};Object.defineProperty(document,"cookie",{get:function(){return t>0&&(W(_extends({},r,{category:{category_1:"get"}}),n),t--),e.get.call(document)},set:function(o){t>0&&W(_extends({},r,{category:{category_1:"set"}}),n),t--,e.set.call(document,o)}})}}(),I("websocket")&&function(){if("function"==typeof window.WebSocket){var e=window.WebSocket,t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=_construct(e,r),i=r[0],a=!1;return S()&&i&&(i.indexOf("//localhost:")>-1||i.indexOf("//127.0.0.1:")>-1)&&(a=!0),!a&&W({message:"CapCut WebView does not support WebSocket",action:"cwh_websocket",category:{url:r[0]}},{hdt:{ruleId:30002}}),o};Z(t,e),window.WebSocket=t,window.WebSocket.prototype=t.prototype}}(),I("web_worker")&&function(){if("function"==typeof window.Worker){var e=window.Worker,t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=_construct(e,r);return W({message:"Using WebWorker in CapCut WebView is dangerous",action:"cwh_worker"},{hdt:{ruleId:30004}}),o};window.Worker=t,window.Worker.prototype=t.prototype}}(),I("service_worker")&&function(){if("serviceWorker"in navigator){var e=navigator.serviceWorker.register;navigator.serviceWorker.register=function(){W({message:"Using ServiceWorker in CapCut WebView is dangerous",action:"cwh_service_worker"},{hdt:{ruleId:30005}});for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(this,r)}}}(),I("iframe")&&(e=!1,setTimeout((function(){var t=new MutationObserver((function(){if(!e){var r=document.querySelector("iframe");if(r){var n;if(null!=(n=r.id)&&n.includes("JSBridgeIframe"))return;e=!0,W({message:"Using Iframe in CapCut Webview is dangerous",action:"cwh_iframe",category:{request_url:r.src,category_1:r.id}},{hdt:{ruleId:30006}}),t.disconnect()}}}));t.observe(document.documentElement,{childList:!0,subtree:!0})}),200)),I("shared_worker")&&function(){if("function"==typeof window.SharedWorker){var e=window.SharedWorker,t=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=_construct(e,r);return W({message:"Using SharedWorker in iOS 16.1 CapCut WebView will cause exception",action:"cwh_shared_worker"},{hdt:{ruleId:30008}}),o};window.SharedWorker=t,window.SharedWorker.prototype=t.prototype}}(),I("webrtc")&&function(){var e=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(e){var t=e;window.RTCPeerConnection=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=_construct(t,r);return W({message:"Using WebRTC in CapCut WebView is dangerous",action:"cwh_webrtc"},{hdt:{ruleId:30007}}),o}}}()}catch(e){R.error("hook api error")}var e}var ee=Date.now(),te=function(){var e,t;z(),K(),function(){if("function"==typeof navigator.sendBeacon){var e=navigator.sendBeacon;navigator.sendBeacon=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if("string"!=typeof r[1])return W({action:"cwh_send_beacon",message:"Sending non-string data using sendBeacon is not recommended in CapCut",category:{data_type:q(r[1]),msg:"non-string data"}},{hdt:{ruleId:30007}}),e.apply(this,r);var o={data:r[1],url:r[0],method:"post",headers:{referer:location.href,origin:location.protocol+"//"+location.host,"content-type":"text/plain;charset=UTF-8"},category:"beacon",version:"1.0.0.103"};V&&(o.enableLooki=!0),-1===o.url.indexOf("monitor")&&-1===o.url.indexOf("mcs.")&&R.log("send beacon message",o);try{var i;if(m)null==(i=window.webkit)||null==(i=i.messageHandlers)||null==(i=i.__WebViewRequest)||i.postMessage(o);else if(x)cefQuery({request:JSON.stringify({callType:"__WebViewRequest",data:o})});else if(k){var a;null==(a=window.webkit)||null==(a=a.messageHandlers)||null==(a=a.__WebViewRequest)||a.postMessage(JSON.stringify(o))}else{var s;null==(s=window.__WebViewRequest)||s.postMessage(JSON.stringify(o))}}catch(e){W({action:"cwh_send_beacon_error",message:null==e?void 0:e.message,category:{msg:null==e?void 0:e.message}})}}}}(),Y(),g(),$(),window.__capcutwebview_hook_version__="gecko_1.0.0.103",E("webview_hook_monitor",{action:"cwh_init",category_1:"success"},{metric_1:Date.now()-ee}),e={initStartTime:ee,initEndTime:Date.now()},t=X("metric"),window[t]=_extends({},window[t],e)};String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){var r=t>0?0|t:0;return this.substring(r,r+e.length)===e}}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e});!function(){try{console.log("check hook","gecko_1.0.0.103");var e=sessionStorage.getItem("__disable_hook_version__");if(window.__capcutwebview_hook_version__||"gecko_1.0.0.103"===e)return;console.log("__capcutwebview_hook_whitelist_setting__",window.__capcutwebview_hook_whitelist_setting__);var t=window.__capcutwebview_hook_whitelist_setting__||{htmlAllowedList:[],htmlBlockList:[]},r=t.htmlBlockList,n=t.htmlAllowedList;if(!b){for(var o=!1,i=0;i<(n||[]).length;i++){var a=n[i];a=a.startsWith("http")?a.replace("http://","https://"):"https://"+a,location.href.startsWith(a)&&(o=!0)}if(!o)return void W({message:"don't allowed html",action:"do_not_allowed_html",category:{category_1:location.href}})}for(var s=0;s<(r||[]).length;s++){var u=r[s];if(u=u.startsWith("http")?u.replace("http://","https://"):"https://"+u,location.href.startsWith(u))return void W({message:"block html",action:"block_html",category:{category_1:u}})}0,console.log("start hook"),te()}catch(e){W({message:null==e?void 0:e.message,action:"cwh_init",category:{msg:null==e?void 0:e.message,category_1:"fail"},metrics:{metric_1:Date.now()-ee}})}}()}));
