(self.webpackChunksmart_edit=self.webpackChunksmart_edit||[]).push([[585],{49326:function(e,t,n){"use strict";var s=n(53685),r=n(77508),a=n(26427),i=n(11243),o=n(24571),c=n(57261),u=n(52301),l=n(37434),d=n(99909),h=n(79326),p=n(13274),m=n(13568),g=function(e){function t(){return(0,c.A)(this,t),(0,l.A)(this,t,arguments)}return(0,d.A)(t,e),(0,u.A)(t,[{key:"name",value:function(){return"SmartEditorPlugin"}},{key:"beforeCall",value:function(e){var t=e.params,n=e.event,s=e;return"request"===n&&(s={event:n,params:(0,a.A)((0,a.A)({},t),{},{data:JSON.stringify(t.data)})}),new Promise((function(e,t){e(s)}))}},{key:"afterCall",value:function(e){switch(e.request().event){case"getCache":var t,n=null===(t=e.result.data)||void 0===t?void 0:t.data;n&&(e.result.data=JSON.parse(decodeURIComponent(n)));break;case"request":e.result.data=e.result.data.response}}}])}(h.h),v=new m.A,f=new g;p.Ay.use(v),p.Ay.use(f),window.Capcut={JSBridge:window.JSBridge};var x=JSON.parse('{"mob_chatbot_copy":"Copy","mob_chatbot_addtoeditor":"Add to text edit","mob_chatbot_welcome_message":"What will you create today?","mob_chatbot_Noticeofuse":"Notice","mob_chatbot_typepanel_placeholder text":"Ask me to...","mob_chatbot_chat_warning":"AI responses might be inaccurate.","mob_chatbot_speechbubble_thinking":"Working on it...","mob_chatbot_Noticeofuse_gotit":"OK","copy_success":"Copied","network_error_please_retry":"No internet connection. Connect to the internet and try again.","has_cleared_context":"Context cleared","mob_chatbot_productname":"Ask bot","mob_chatbot_lackability":"Sorry, I\u2019m not able to do that for now. Try asking me something else.","mob_chatbot_dislike":"Dislike","mob_chatbot_quote":"Quote","mob_chatbot_externalexternal":"Quote the text in the editor?","mob_chatbot_generation_stopped":"Generation Stopped","mob_chatbot_safe_notice":"This content may pose a safety risk. Please ask your question again.","askbot_dialogue_generated_results":"Generated results","askbot_dialogue_reference_materials":"Reference materials","askbot_dialogue_summary_article":"The summary derived from the {length} article(s) is as follows:"}');function M(e,t){var n,s=null!==(n=x[e])&&void 0!==n?n:"";return t?s.replace(/\$\{([a-zA-Z_]\w.*)\}/g,(function(e,n){return t[n]})):s}var N,y=n(72583),w=n(75168),_=n(69955),j=n(42459),b=n(42719),z=n.n(b),S=Object.defineProperty,A=(e,t)=>{for(var n in t)S(e,n,{get:t[n],enumerable:!0})},I={apiUrl:{base:"",upsert(){return`${this.base}/aigc/conversation/text_generation_upsert`},upsertStream(){return`${this.base}/aigc/conversation/text_generation_upsert_stream`},cancelStream(){return`${this.base}/aigc/conversation/text_generation_cancel`}},cacheKey:{agreement(){return"p2t.auth.agreed"},staticConfig(){return"p2t.settings.static"},serializedSession(){return"p2t.session.serialized"}}},C={cache:{get(e){throw new Error("Lib.cache.get not implemented")},set(e){throw new Error("Lib.cache.set not implemented")}},app:{request(e){throw new Error("Lib.app.request not implemented.")}},i18n:{t(e,t){throw new Error("Lib.i18n.t not implemented.")}}};(e=>{let t;var n;let s;var r;let a;let i;(n=t=e.Initiator||(e.Initiator={})).User="user",n.System="system",(r=s=e.Source||(e.Source={})).Session="session",r.History="history",(a=e.Script||(e.Script={})).create=function(e,t){return e.init=t.init,e},(e=>{let t;var n;let s;var r;(n=t=e.Status||(e.Status={}))[n.Finish=0]="Finish",n[n.Violation=1]="Violation",n[n.Pending=2]="Pending",(r=s=e.RichMessageStatus||(e.RichMessageStatus={}))[r.Unknown=0]="Unknown",r[r.Processing=1]="Processing",r[r.Succeed=2]="Succeed"})(i=e.WebSocket||(e.WebSocket={}))})(N||(N={}));var T={};function k(e){return C.app.request({method:"POST",url:I.apiUrl.upsert(),data:{...e},needCommonParams:!0,timeout_ms:9e4})}function D(e){return C.app.request({method:"POST",url:I.apiUrl.upsertStream(),data:{...e},needCommonParams:!0,timeout_ms:9e4})}function E(e){return C.app.request({method:"POST",url:I.apiUrl.cancelStream(),data:{...e},needCommonParams:!0,timeout_ms:9e4})}A(T,{cancelStream:()=>E,upsert:()=>k,upsertStream:()=>D});var L=T,P=class{constructor(e){this.state=e}},R={},O=new class{bind(e,t){R[e]=t}},Q=new Proxy(O,{get(e,t,n){return t in e||(e[t]=R[t]()),e[t]}}),Y=class extends P{upsert(e){return L.upsert({...e,version:"v2",session_id:Q.Session.state.upsertSessionId.$value,host_info:{}})}async upsertStream(e){const t=Q.Session.state.ids.$value.findLast((e=>{var t;return"RichText"===(null==(t=Q.Session.find(e))?void 0:t.type)})),n=t?Q.Session.find(t):null,s={...e,version:"v2",rich_text_uuid:null==n?void 0:n.activeRichText.uuid,session_id:Q.Session.state.upsertSessionId.$value,uuid:Q.Session.state.uuid.$value},r=await L.upsertStream(s);return Q.API.state.params.update(s),r}cancelStream(){const{upsertSessionId:e,upsertQueryId:t}=Q.Session.state.$value;if(t)return L.cancelStream({query_id:e,session_id:t})}},U=class extends P{async init(){const e=I.cacheKey.agreement(),t=await C.cache.get({key:e});this.state.update({agreed:null==t?void 0:t.agreed})}agree(){this.state.update({agreed:!0});C.cache.set({key:I.cacheKey.agreement(),value:{agreed:!0}})}},V=class extends P{select(e){this.state.update({selecting:e})}confirm(e){this.state.update({confirmed:e,selecting:null})}},W=class extends P{focus(e={}){const t=this.state.$value,{prompt:n=t.prompt}=e;this.state.update({focus:!0,prompt:n})}blur(){this.state.update({focus:!1})}update(e){this.state.update({...this.state.$value,...e})}},Z=class{constructor(e){this.session=e}get API(){return Q.API}prompt(...e){this.session.prompt(...e)}hide(e){this.session.hide(e)}has(e){return this.session.has(e)}run(e,t){return this.session.run(e,t)}find(e){return this.session.find(e)}update(e,t){return this.session.update(e,t)}cancelPrevious(){return this.session.cancelPrevious()}updateTask(e){return this.session.updateTask(e)}hideTask(){return this.session.hideTask()}getLastNth(e){const{ids:t,store:n}=this.session.state.$value;return n[t[t.length-1-e]]}},H=((e="",t=0)=>()=>(t=t||Date.now(),`${e=e||(0,y.yT)(6,36)}_${t++}`))();function q(e,t){const n={...e,...t(e)};return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),n}var F=class extends P{constructor(){super(...arguments),this.id="",this.scripts={},this.history=new Map}async init(e,t){this.id=t,this.scripts=e;try{await this.restore()}catch(n){}this.state.update({status:w.n.Success})}prompt(...e){const{ids:t,store:n}=this.state.$value,s=e.map((e=>e.id)),r=e.reduce(((e,t)=>({...e,[t.id]:t})),{});this.state.update({ids:t.concat(s),store:{...n,...r}})}hide(e){const{ids:t,store:n}=this.state.$value,s=t.filter((t=>t!==e.id)),r={[e.id]:null};this.state.update({ids:s,store:{...n,...r}})}update(e,t){const{store:n}=this.state.$value,s={[e.id]:q(e,t)};return this.state.update({store:{...n,...s}}),s[e.id]}cancelPrevious(){const e=this.last();(null==e?void 0:e.status)===w.n.Pending&&(this.state.upsertQueryId.update(""),this.update(e,(e=>({...e,status:w.n.Canceled}))))}getTask(){const e=this.last();return"Task"===(null==e?void 0:e.type)?e:null}updateTask(e){const t=this.getTask();return t?this.update(t,e):null}hideTask(){const e=this.getTask();(null==e?void 0:e.status)===w.n.Pending&&this.hide(e)}last(){const{ids:e,store:t}=this.state.$value;return 0===e.length?null:t[e[e.length-1]]}has(e){return-1!==this.state.$value.ids.indexOf(e)}find(e){return this.state.$value.store[e]}async run(e,t,n){const s=new Z(this),r=(e,t)=>r=>{const a=(null==n?void 0:n.id)||H(),i=this.history.get(a);let o=null==i?void 0:i.state;o||(o=y.cP.create(t.init(r),0),o.subscribe((e=>this.save()))),this.history.set(a,{name:e,params:r,state:o});t.call(null,s,{state:o},r);this.save()},a=Object.keys(this.scripts).reduce(((e,t)=>({...e,[t]:r(t,this.scripts[t])})),{});await async function(e,t){const n=new Function("context",`\n      with(context) {\n        ${e};\n      }\n    `);return await n.call(null,t)}(e,{...a,params:t,console:console,setTimeout:setTimeout})}save(){const e={id:this.id,upsertSessionId:this.state.$value.upsertSessionId,scripts:[]};this.history.forEach(((t,n)=>{const{name:s,params:r,state:a}=t;e.scripts.push({id:n,name:s,params:r,state:a.$value})})),C.cache.set({key:I.cacheKey.serializedSession(),value:e})}async restore(){const e=I.cacheKey.serializedSession(),t=await C.cache.get({key:e});(null==t?void 0:t.id)===this.id&&(this.state.upsertSessionId.update(t.upsertSessionId),t.scripts.forEach((e=>{const{id:t,name:n,params:s}=e,r={...e.state,source:N.Source.History};this.history.set(t,{name:n,params:s,state:y.cP.create(r,0)}),this.run(`${n}(params)`,s,{id:t})})))}},$=class extends P{init(){}config(e){this.state.update(e)}async initFromLocalConfig(){const e=I.cacheKey.staticConfig(),t=await C.cache.get({key:e});this.state.update(t)}},B={api:{params:{},logID:""},auth:{agreed:!1,content:""},session:{ids:[],store:{},status:w.n.Pending,upsertSessionId:"",upsertQueryId:"",uuid:`${Math.floor(1e8*Math.random())}${Math.floor(1e10*Math.random())}`},editor:{focus:!1,prompt:""},quote:{confirmed:null,selecting:null},settings:{auth:{content:[""]},guide:{items:[]}}},J={};A(J,{chatbot_writer_conversation_sug_action:()=>ee,chatbot_writer_conversation_sug_show:()=>X,chatbot_writer_home_show:()=>K,chatbot_writer_input_panel_action:()=>G,chatbot_writer_output_url_click:()=>se,chatbot_writer_output_url_show:()=>ne,chatbot_writer_runtime_error:()=>te});var K=(e,t)=>({action:"show",page_from:e.params.page_from}),G=e=>({click:"send",page_from:e.params.page_from}),X=(e,t)=>({page_from:e.params.page_from,...t}),ee=(e,t)=>({page_from:e.params.page_from,...t}),te=(e,t)=>{let n="";try{n=JSON.stringify(t.context).slice(0,800)}catch(s){}return{...t,page_from:e.params.page_from,context:n}},ne=(e,t)=>({page_from:e.params.page_from,...t}),se=(e,t)=>({page_from:e.params.page_from,...t}),re=(new _.C).register({events:J}),ae=class{constructor(e){var t,n;this.text="",this.richTexts=[],this.id=e.id||H(),this.type=e.type||"",this.status=null!=(t=e.status)?t:w.n.Normal,this.initiator=e.initiator||N.Initiator.System,this.source=null!=(n=e.source)?n:N.Source.Session}},ie=class extends ae{constructor(e){super({type:"Text",...e}),this.text=e.text}},oe=class e extends ae{constructor(t){super({type:"RichText",...t}),this.richTexts=[],this.activeRichTextIndex=e.defaultActiveRichTextIndex,this.richTexts=t.richTexts}get activeRichText(){return this.richTexts[this.activeRichTextIndex]}};oe.defaultActiveRichTextIndex=0;var ce=oe,ue=class extends ie{constructor(e){super({...e,type:"Task",status:w.n.Pending,initiator:N.Initiator.System})}},le=class extends ie{constructor(e){super({...e,type:"Instruct",initiator:N.Initiator.User}),this.quote="",this.quote=e.quote}},de=class extends ie{constructor(e){super({...e,type:"Divider"})}},he=N.Script.create(((e,t)=>{e.hideTask();const n=t.state.$value,s=new ie({text:n.params.content,source:n.source});e.prompt(s)}),{init:e=>({params:e})}),pe=new y.al,me={sg:{appKey:"34b53a6f4a1794fc9ef19acf7269208e",url:"frontier.byteoversea.com"},va:{appKey:"464a4a91e5a8af20b3ed20a3c3cf8777",url:"frontier-va.byteoversea.com"},cn:{appKey:"a2bbe1190e232930874b281d07043a20",url:"frontier100-normal.zijieapi.com"}},ge=(e,t)=>z()("73"+t+e+"f8a69f1719916z").toLowerCase(),ve=e=>{const{did:t,region:n="cn"}=e,{appKey:s,url:r}=me[n];return{fpID:"73",aID:"617174",appKey:s,accessKey:ge(t,s),deviceID:t,isDebug:!1,url:r,enableTransformTextPayload:!0,customParams:{uid:Q.Session.state.uuid.$value}}},fe=class e{constructor(){this._isCapcut=!1,this.region=void 0,this.messages={},this.handleClose=e=>{pe.emit("websocket.close",e)},this.handleError=e=>{pe.emit("websocket.error",e),re.event("chatbot_writer_runtime_error",{type:"websocket",id:"onerror",context:e})},this.handleOpen=e=>{pe.emit("websocket.open",e)},this.handleMessage=e=>{var t;const{method:n,textPayload:s,...r}=e.message;try{const e="string"==typeof s?JSON.parse(s||"{}"):s;if(!e.queryID)return;const{queryID:r,content:a="",messages:i=[]}=e;switch(n){case 20001:this.messages[r].status=N.WebSocket.Status.Finish;break;case 20002:this.messages[r].status=N.WebSocket.Status.Violation;break;case 20003:(null==(t=this.messages[r])?void 0:t.content)?this.messages[r].content+=a:this.messages[r]={content:a,status:N.WebSocket.Status.Pending};break;case 20004:pe.emit("message.loading",{content:a});break;case 20005:this.messages[r]={status:N.WebSocket.Status.Pending,richMessages:i}}}catch(a){re.event("chatbot_writer_runtime_error",{type:"websocket",id:"message",context:{method:n,textPayload:s}})}}}static getInstance(){return this._instance||(this._instance=new e),this._instance}async auth(e,t){this._did=e,this._isCapcut=t,await this.initFws()}async initFws(){if(!this._did)return;this.closeFws();const e=await this.raceFwsConnect(this._did);e.onopen=this.handleOpen,e.onmessage=this.handleMessage,e.onclose=this.handleClose,e.onerror=this.handleError,this._fws=e}async raceFwsConnect(e){if(this.region)return new j.FWS(ve({did:e,region:this.region}));if(!this._isCapcut){this.region="cn";const t=ve({did:e,region:"cn"});return new j.FWS(t)}const t=ve({did:e,region:"va"}),n=ve({did:e,region:"sg"});return new Promise((e=>{const s=new j.FWS(t),r=new j.FWS(n);s.onopen=()=>{r.close(),this.region="va",e(s)},r.onopen=()=>{s.close(),this.region="sg",e(r)}}))}getFwsUrl(){var e;return(null==(e=this._fws)?void 0:e.url)||""}closeFws(){var e;null==(e=this._fws)||e.close()}onLoadingUpdate(e){return pe.tap("message.loading",e)}async checkAndRestoreWsConnection(){var e,t,n;return"success"!==await(null==(e=this._fws)?void 0:e.pingOnce())||(null==(t=this._fws)?void 0:t.readyState)!==(null==(n=this._fws)?void 0:n.OPEN)?this.reconnect():Promise.resolve()}async reconnect(){return new Promise(((e,t)=>{let n=!1;pe.tap("websocket.open",(()=>{n=!0,e()})),pe.tap("websocket.error",(e=>{n=!1,t(e)})),this.initFws().catch((e=>t(e))),setTimeout((()=>{n||t("connect websocket timeout")}),5e3)}))}};fe._instance=null;var xe=fe;function Me(e){const t=xe.getInstance().onLoadingUpdate((({content:t})=>{e.updateTask((e=>({...e,text:e.status===w.n.Pending?t:e.text})))}));return()=>{null==t||t()}}var Ne=N.Script.create((async(e,t)=>{const n=xe.getInstance(),s=t.state.$value,{queryID:r="",content:a}=s.params;if(a){const t=new ie({text:a,status:w.n.Normal,source:s.source});return e.hideTask(),void e.prompt(t)}Q.Session.state.upsertQueryId.update(r);let i=new ie({text:"",status:w.n.Pending}),o=!1;const c=()=>{e.getLastNth(0).status!==w.n.Canceled?(e.hideTask(),e.prompt(i),o=!0):Q.Session.state.upsertQueryId.update("")};let u=0,l=0,d="",h=Date.now();const p=Me(e),m=setInterval((()=>{const e=Q.Session.state.upsertQueryId.$value;if(!e)return clearInterval(m),void p();const s=n.messages[e];s&&d!==s.content&&(d=s.content||"",t.state.params.update({queryID:r,content:d})),g(s),v()}),35),g=t=>{u&&u===d.length&&(null==t?void 0:t.status)===N.WebSocket.Status.Finish&&(i=e.update(i,(e=>({...e,status:w.n.Normal}))),clearInterval(m),p()),(null==t?void 0:t.status)===N.WebSocket.Status.Violation&&(o||c(),i=e.update(i,(()=>({text:C.i18n.t("mob_chatbot_safe_notice"),status:w.n.Error}))),clearInterval(m),p()),Date.now()-h>3e4&&(o?i=e.update(i,(e=>({...e,status:w.n.Normal}))):(c(),i=e.update(i,(()=>({text:C.i18n.t("network_error_please_retry"),status:w.n.Normal}))),re.event("chatbot_writer_runtime_error",{type:"script",id:"showText",context:{log_id:Q.API.state.logID.$value,frontier_url:n.getFwsUrl(),api_params:JSON.stringify(Q.API.state.params.$value)}})),clearInterval(m),p())},v=()=>{u<d.length&&(o||c(),"\n"===d[u]&&l<6?l++:(l=0,i=e.update(i,(e=>{const t=e.status!==w.n.Error?(e.text+d[u++]).replace(/\n{2,}/g,"\n"):e.text;return{...e,text:t}}))),h=Date.now())}}),{init:e=>({params:e})}),ye=N.Script.create(((e,t)=>{e.hideTask();const n=t.state.$value,s=new ie({text:C.i18n.t("mob_chatbot_lackability"),source:n.source});e.prompt(s)}),{init:e=>({params:e})}),we=N.Script.create(((e,t)=>{e.hideTask();const n=t.state.$value,s=new de({text:C.i18n.t("has_cleared_context"),source:n.source}),r=e.getLastNth(0);"Instruct"===(null==r?void 0:r.type)&&e.hide(r),e.prompt(s)}),{init:e=>({params:e})}),_e=N.Script.create((async(e,t)=>{var n,s;e.cancelPrevious();const r=t.state.$value,a=new le({text:r.params.prompt,quote:r.params.quote,source:r.source});if(e.prompt(a),r.status===w.n.Pending){const a=new ue({text:""}),o=xe.getInstance();e.prompt(a);const c=Me(e);try{await o.checkAndRestoreWsConnection();const i=await Q.API.upsertStream(r.params);if(c(),!e.has(a.id))return;await new Promise((e=>setTimeout(e,100)));const u=null==(n=null==i?void 0:i.data)?void 0:n.answer.scripts,l=null==(s=null==i?void 0:i.data)?void 0:s.session_id,d=null==i?void 0:i.log_id;t.state.update({status:w.n.Success}),Q.Session.state.upsertSessionId.update(l||""),Q.API.state.logID.update(d||""),u||re.event("chatbot_writer_runtime_error",{type:"api",context:i}),await e.run(u||"unsupported()",{})}catch(i){if(c(),!e.has(a.id))return;re.event("chatbot_writer_runtime_error",{type:"script",id:"SendPrompt",context:i}),e.update(a,(e=>({text:C.i18n.t("network_error_please_retry"),status:w.n.Error})))}}}),{init:e=>({params:e,status:w.n.Pending})}),je=N.Script.create((async(e,t)=>{const n=xe.getInstance(),s=t.state.$value,{queryID:r="",messages:a}=s.params;if(a){const t=[];return a.forEach((e=>{t.push(new ce({richTexts:e.richMessages,status:w.n.Normal,source:s.source}))})),e.hideTask(),void e.prompt(...t)}Q.Session.state.upsertQueryId.update(r);let i=[],o=Date.now(),c=!1;const u={},l=[],d=Me(e),h=setInterval((()=>{const e=Q.Session.state.upsertQueryId.$value;if(!e)return clearInterval(h),void d();const s=n.messages[e];(null==s?void 0:s.richMessages)&&(i=s.richMessages.map((e=>({...e,richMessages:e.richMessages.map((e=>({...e,content:e.content.replace(/\[citation\:\d+?\]/g,"")})))}))),t.state.params.update({queryID:r,messages:i})),m(s)?v():d()}),35),p=()=>{if(e.getLastNth(0).status===w.n.Canceled)return void Q.Session.state.upsertQueryId.update("");const t=new ce({richTexts:[],status:w.n.Pending});e.hideTask(),e.prompt(t),l.push(t),c=!0},m=t=>(null==t?void 0:t.status)===N.WebSocket.Status.Finish&&g()?(l.forEach((t=>{t.status===w.n.Pending&&(t=e.update(t,(e=>({...e,status:w.n.Normal}))))})),clearInterval(h),!1):(null==t?void 0:t.status)===N.WebSocket.Status.Violation?(c||p(),l.length&&(l[l.length-1]=e.update(l[l.length-1],(()=>({text:C.i18n.t("mob_chatbot_safe_notice"),status:w.n.Error})))),clearInterval(h),!1):!(Date.now()-o>3e4)||(c?l[l.length-1]=e.update(l[l.length-1],(e=>({...e,status:w.n.Normal}))):(p(),l.length&&(l[l.length-1]=e.update(l[l.length-1],(()=>({text:C.i18n.t("network_error_please_retry"),status:w.n.Normal})))),re.event("chatbot_writer_runtime_error",{type:"script",id:"showRichText",context:{log_id:Q.API.state.logID.$value,frontier_url:n.getFwsUrl(),api_params:JSON.stringify(Q.API.state.params.$value)}})),clearInterval(h),!1),g=()=>i.every(((e,t)=>e.richMessages.every(((e,n)=>e.content.length-1<=u[`${t}-${n}`])))),v=()=>{i.forEach(((t,n)=>{if(l[n]){const s=l[n],r=e.find(s.id),a=t.richMessages,i=[];a.forEach(((e,t)=>{const s=`${n}-${t}`,r=(u[s]||0)+1,a=e.content.slice(0,r),o=a.length===e.content.length;a.length<e.content.length&&(u[s]=r);const c=e.status?o&&e.status===N.WebSocket.RichMessageStatus.Succeed:void 0;i.push({...e,completed:c,content:e.content.slice(0,u[s])})})),l[n]=e.update(s,(e=>{var t;return{...e,activeRichTextIndex:null!=(t=null==r?void 0:r.activeRichTextIndex)?t:e.activeRichTextIndex,richTexts:i}}))}else if(l[n-1]&&l[n-1].status===w.n.Pending&&(l[n-1]=e.update(l[n-1],(e=>({...e,status:w.n.Normal})))),c){const s=[];t.richMessages.forEach(((e,t)=>{u[`${n}-${t}`]=0,s.push({...e,content:e.content[0]})}));const r=new ce({richTexts:s,status:w.n.Pending});l.push(r),0===n&&e.hideTask(),e.prompt(r),c=!0}else p();o=Date.now()}))}}),{init:e=>({params:e})}),be={SendPrompt:_e,unsupported:ye,GenerateText:he,ShowText:Ne,PromptViolation:we,ShowRichText:je};var ze=n(7916),Se=ze.parse(location.search.slice(1)),Ae=new Proxy({},{get:function(e,t){return function(e){return function(e,t){return new Promise((function(n,s){console.log("-- callJSB",e,t),p.Ay.call(e,t,(function(e){var t=e||{},r=t.code,a=void 0===r?Ie.Fail:r,i=t.data;if(a!==Ie.Succeed)s(e);else try{n(i)}catch(o){s(e)}}))}))}(t,e)}}}),Ie=function(e){return e[e.Succeed=1]="Succeed",e[e.Fail=0]="Fail",e[e.NotAuthroized=-1]="NotAuthroized",e[e.UnknownError=-1e3]="UnknownError",e[e.NoHandler=-2]="NoHandler",e[e.ParameterError=-3]="ParameterError",e}(Ie||{});var Ce=Ae,Te=n(26507),ke=n(51003),De=[{key:"copy",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgaWQ9ImNvcHkiPgo8cGF0aCBpZD0iVW5pb24iIGQ9Ik0xNCAxMC4zMzMzQzE0IDEwLjUxNzQgMTMuODUwOCAxMC42NjY3IDEzLjY2NjcgMTAuNjY2N0gxM0MxMi44MTU5IDEwLjY2NjcgMTIuNjY2NyAxMC41MTc0IDEyLjY2NjcgMTAuMzMzM1YzLjMzMzMzSDUuNjY2NjdDNS40ODI1NyAzLjMzMzMzIDUuMzMzMzMgMy4xODQwOSA1LjMzMzMzIDNWMi4zMzMzM0M1LjMzMzMzIDIuMTQ5MjQgNS40ODI1NyAyIDUuNjY2NjcgMkgxMi42NjY3QzEzLjQwMyAyIDE0IDIuNTk2OTUgMTQgMy4zMzMzM1YxMC4zMzMzWk0zLjMzMzMzIDZMMy4zMzMzMyAxMi42NjY3SDEwVjZIMy4zMzMzM1pNMiA2QzIgNS4yNjM2MiAyLjU5Njk1IDQuNjY2NjcgMy4zMzMzMyA0LjY2NjY3SDEwQzEwLjczNjQgNC42NjY2NyAxMS4zMzMzIDUuMjYzNjIgMTEuMzMzMyA2VjEyLjY2NjdDMTEuMzMzMyAxMy40MDMgMTAuNzM2NCAxNCAxMCAxNEgzLjMzMzMzQzIuNTk2OTUgMTQgMiAxMy40MDMgMiAxMi42NjY3VjZaIiBmaWxsPSJjdXJyZW50Q29sb3IiIGZpbGwtb3BhY2l0eT0iMC41Ii8+CjwvZz4KPC9zdmc+Cg==",text:M("mob_chatbot_copy")},{key:"use",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KCTxwYXRoCgkJZmlsbC1ydWxlPSJldmVub2RkIgoJCWNsaXAtcnVsZT0iZXZlbm9kZCIKCQlkPSJNMTIgMy4zMzMzM0gzLjMzMzMzVjEySDcuMzMzMzNWMTMuMzMzM0gzLjMzMzMzQzIuNTk2OTUgMTMuMzMzMyAyIDEyLjczNjQgMiAxMlYzLjMzMzMzQzIgMi41OTY5NSAyLjU5Njk1IDIgMy4zMzMzMyAySDEyQzEyLjczNjQgMiAxMy4zMzMzIDIuNTk2OTUgMTMuMzMzMyAzLjMzMzMzVjcuMzMzMzNIMTJWMy4zMzMzM1pNNS4wMDA0OSA4LjAwMjAyQzQuODE2MzkgOC4wMDE0MiA0LjY2NzExIDguMTUwMTggNC42NjcwNSA4LjMzNDI3TDQuNjY2ODMgOS4wMDA5NEM0LjY2Njc3IDkuMTg1MDMgNC44MTU5NiA5LjMzNDc2IDUuMDAwMDUgOS4zMzUzNUw4LjMzMzM3IDkuMzQ2MTRDOC41MTc0NiA5LjM0NjczIDguNjY2NzUgOS4xOTc5OCA4LjY2NjgxIDkuMDEzODhMOC42NjcwMiA4LjM0NzIyQzguNjY3MDggOC4xNjMxMiA4LjUxNzkgOC4wMTM0IDguMzMzOCA4LjAxMjgxTDUuMDAwNDkgOC4wMDIwMlpNNC42NjY2NyA2LjM0MTExQzQuNjY2NjcgNi41MjUyIDQuODE1OTEgNi42NzQyMiA1IDYuNjczOTZMMTAuMzMzMyA2LjY2NjE4QzEwLjUxNzQgNi42NjU5MSAxMC42NjY3IDYuNTE2NDYgMTAuNjY2NyA2LjMzMjM2VjUuNjY1NjlDMTAuNjY2NyA1LjQ4MTYgMTAuNTE3NCA1LjMzMjU4IDEwLjMzMzMgNS4zMzI4NUw1IDUuMzQwNjJDNC44MTU5IDUuMzQwODkgNC42NjY2NyA1LjQ5MDM1IDQuNjY2NjcgNS42NzQ0NFY2LjM0MTExWiIKCQlmaWxsPSJjdXJyZW50Q29sb3IiCgkJZmlsbC1vcGFjaXR5PSIwLjUiCgkvPgoJPHBhdGgKCQlmaWxsLXJ1bGU9ImV2ZW5vZGQiCgkJY2xpcC1ydWxlPSJldmVub2RkIgoJCWQ9Ik0xNC42NjY3IDExLjMzMzNDMTQuNjY2NyAxMi44MDYxIDEzLjQ3MjggMTQgMTIgMTRDMTAuNTI3MiAxNCA5LjMzMzMzIDEyLjgwNjEgOS4zMzMzMyAxMS4zMzMzQzkuMzMzMzMgOS44NjA1NyAxMC41MjcyIDguNjY2NjcgMTIgOC42NjY2N0MxMy40NzI4IDguNjY2NjcgMTQuNjY2NyA5Ljg2MDU3IDE0LjY2NjcgMTEuMzMzM1pNMTEuNzgzMyA5LjY2NjY3QzExLjY0NTMgOS42NjY2NyAxMS41MzMzIDkuNzc4NiAxMS41MzMzIDkuOTE2NjdWMTAuODY2N0gxMC41ODMzQzEwLjQ0NTMgMTAuODY2NyAxMC4zMzMzIDEwLjk3ODYgMTAuMzMzMyAxMS4xMTY3VjExLjU1QzEwLjMzMzMgMTEuNjg4MSAxMC40NDUzIDExLjggMTAuNTgzMyAxMS44SDExLjUzMzNWMTIuNzVDMTEuNTMzMyAxMi44ODgxIDExLjY0NTMgMTMgMTEuNzgzMyAxM0gxMi4yMTY3QzEyLjM1NDcgMTMgMTIuNDY2NyAxMi44ODgxIDEyLjQ2NjcgMTIuNzVWMTEuOEgxMy40MTY3QzEzLjU1NDcgMTEuOCAxMy42NjY3IDExLjY4ODEgMTMuNjY2NyAxMS41NVYxMS4xMTY3QzEzLjY2NjcgMTAuOTc4NiAxMy41NTQ3IDEwLjg2NjcgMTMuNDE2NyAxMC44NjY3SDEyLjQ2NjdWOS45MTY2N0MxMi40NjY3IDkuNzc4NiAxMi4zNTQ3IDkuNjY2NjcgMTIuMjE2NyA5LjY2NjY3SDExLjc4MzNaIgoJCWZpbGw9ImN1cnJlbnRDb2xvciIKCQlmaWxsLW9wYWNpdHk9IjAuNSIKCS8+Cjwvc3ZnPg==",text:M("mob_chatbot_addtoeditor")}],Ee={apiUrl:{base:"https://editor-api.capcutapi.com"}},Le={guide:{items:[{title:"Video Copy",content:"Write a marketing copy for CapCut"},{title:"Change Tone",content:"Make my article conversational"},{title:"Copy Summary",content:"Summarize my article with a title"},{title:"Info Search",content:"Introduce Central Park in New York"}]},auth:{content:["By using this feature, you understand that the content is generated by an AI model based on your input. Please do not include personal, sensitive, or confidential information."]}},Pe=new URLSearchParams(location.search);re.config({params:function(){return{page_from:Pe.get("page_from")}},event:function(e,t){Ce.reportAppLog({eventName:e,params:t})}});var Re,Oe=function(){var e=(0,o.A)((0,i.A)().mark((function e(t){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.setItem(t.key,JSON.stringify(t.value))}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,o.A)((0,i.A)().mark((function e(t){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",JSON.parse(localStorage.getItem(t.key)));case 4:e.prev=4,e.t0=e.catch(0);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t){return e.apply(this,arguments)}}();function Ye(e){var t=Te.useState(e.$value),n=(0,r.A)(t,2),s=n[0],a=n[1];return Te.useEffect((function(){return e.subscribe((function(e){return a(e)}))}),[]),s}Re={var:(0,a.A)({},Ee),lib:{app:{request:Ce.request},cache:{get:Qe,set:Oe},i18n:{t:M}}},(0,y.$Z)(I,Re.var),Object.assign(C.app,Re.lib.app),Object.assign(C.i18n,Re.lib.i18n),Object.assign(C.cache,Re.lib.cache),Q.bind("API",(()=>new Y(y.cP.create(B.api,0)))),Q.bind("Auth",(()=>new U(y.cP.create(B.auth,0)))),Q.bind("Quote",(()=>new V(y.cP.create(B.quote,0)))),Q.bind("Editor",(()=>new W(y.cP.create(B.editor,0)))),Q.bind("Session",(()=>new F(y.cP.create(B.session,0)))),Q.bind("Settings",(()=>new $(y.cP.create(B.settings,0)))),Q.Auth.init(),Q.Settings.init(),Q.Settings.config(Le),Q.Session.init(be,Se.id),Ce.getAppInfo().then((function(e){var t=(e.data||{}).did,n=void 0===t?"":t;xe.getInstance().auth(n,!0)}));var Ue=function(){var e=window.getSelection(),t=!1;if(0===e.rangeCount)return null;for(var n=null,s=0;s<e.rangeCount;s++){for(var r=e.getRangeAt(s).startContainer.parentNode;null!=r;){var a,i=null===(a=r)||void 0===a?void 0:a.id;if(i&&i.startsWith("message")){t=!0,n=i.split("-")[1];break}r=r.parentNode}if(t)break}return n},Ve=function(){var e=Ue();if(e){var t=window.getSelection(),n=t.toString().trim();if(n){var s=t.getRangeAt(0).getBoundingClientRect(),r=s.top+document.getElementById("scroll-root").scrollTop;setTimeout((function(){Q.Quote.select({id:e,content:n.replace(/\n{2,}/g,"\n"),rect:{left:s.left,top:r}})}),200)}}},We=n(6978),Ze=n(21851),He=n.n(Ze),qe=n(90677),Fe=n(665),$e="root-U83Rb1",Be="guide-Wp0eER",Je="title-tryyST",Ke="prompt-XucFq8",Ge=function(e){var t=e.items,n=e.onItemClick,s=(0,Te.useRef)(null),r=(0,Te.useRef)(null),a=(0,Te.useRef)(0),i=(0,Te.useRef)(null),o=(0,Te.useRef)(null),c=function(){var e=i.current,t=Math.max.apply(Math,(0,Fe.A)(e.map((function(e){return e.getBoundingClientRect().height}))));o.current.forEach((function(e){e.style.height="".concat(t+40,"px")}))};return(0,Te.useEffect)((function(){return i.current=Array.from(document.querySelectorAll("#content")),o.current=Array.from(document.querySelectorAll("#container")),c(),s.current=new ResizeObserver((function(e){var t,n=(0,qe.A)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value.contentRect.width;s!==a.current&&(a.current=s,c())}}catch(r){n.e(r)}finally{n.f()}})),s.current.observe(r.current),function(){s.current.disconnect()}}),[]),(0,ke.jsx)("div",{className:He()("fadein",$e),children:t.map((function(e){return(0,ke.jsx)("div",{id:"container",className:Be,onClick:function(){return n(e)},children:(0,ke.jsxs)("div",{ref:r,id:"content",children:[(0,ke.jsx)("p",{className:He()("elli",Je),children:e.title}),(0,ke.jsx)("p",{className:He()("elli-2",Ke),children:e.content})]})},e.title)}))})},Xe="root-DHbBdT",et="main-dNjPg3",tt="content-vVbfyq",nt="text-J2bZBW",st="btn-B47eH_",rt=function(e){var t=e.content,n=e.unmount,s=e.onAgree,r=e.onUnmounted;return(0,ke.jsxs)("div",{className:He()(Xe,et,n&&"fadeout"),onAnimationEnd:function(){n&&r()},children:[(0,ke.jsxs)("div",{className:tt,children:[t.map((function(e){return(0,ke.jsx)("p",{className:nt,children:e},e)})),!1]}),(0,ke.jsx)("span",{className:st,onClick:s,children:M("mob_chatbot_Noticeofuse_gotit")})]})},at="root-ICW8g8",it="logo-JF0VdQ",ot="slogan-VRfsC8",ct="main-bix6Ou",ut=function(e){var t=Ye(Q.Auth.state),n=Ye(Q.Settings.state),s=e.unmount,a=e.onUnmounted,i=(0,Te.useState)(!1),o=(0,r.A)(i,2),c=o[0],u=o[1];return(0,ke.jsxs)("div",{className:He()(at,s&&"fadeout"),onAnimationEnd:function(){s&&a()},children:[(0,ke.jsx)("img",{src:"https://sf-fe.capcut.com/obj/capcut-static-sg/ies/monorepo/smart_edit_capcut/static/image/waiting_95.8237273e.webp",className:it}),(0,ke.jsx)("p",{className:ot,children:t.agreed?M("mob_chatbot_welcome_message"):M("mob_chatbot_Noticeofuse")}),(0,ke.jsxs)("div",{className:ct,children:[t.agreed&&(0,ke.jsx)(Ge,{items:n.guide.items,onItemClick:function(e){Q.Editor.focus({prompt:e.content})}}),(!t.agreed||c)&&(0,ke.jsx)(rt,{content:n.auth.content,unmount:c,onAgree:function(){Q.Auth.agree(),u(!0)},onUnmounted:function(){u(!1)}})]})]})};function lt(e){setTimeout((function(){var t;null==e||null===(t=e.lastChild)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"end"})}),100)}var dt="root-NtMauu",ht="main-fwOdbE",pt="text-GY3R3l",mt="loading-uT9ifT",gt="cancel-text-OnoNK1",vt="loading-container-dQvVyc",ft="loading-text-p7eX6M",xt="root-F9dNoi",Mt="line-ytwex_",Nt="text-KsVH_q",yt=n(731),wt="toast-JQM3eV",_t="nomask-hsu5zE",jt="main-ekOVbG",bt="text-aRG9Ss",zt=function(e){var t=e.content,n=e.masking;return(0,ke.jsx)("div",{className:"".concat(He()(wt,n?null:_t,e.className)," toast-warpper"),children:(0,ke.jsxs)("div",{className:jt,children:[(0,ke.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",fill:"none",viewBox:"0 0 20 20",children:(0,ke.jsx)("path",{fill:"#2DD196",fillRule:"evenodd",d:"M10 18.333a8.333 8.333 0 1 0 0-16.667 8.333 8.333 0 0 0 0 16.667Zm3.986-9.474a.5.5 0 0 0 0-.707l-.471-.471a.5.5 0 0 0-.708 0l-3.64 3.64-1.974-1.974a.5.5 0 0 0-.707 0l-.471.472a.5.5 0 0 0 0 .707l2.798 2.799a.5.5 0 0 0 .708 0l4.465-4.466Z",clipRule:"evenodd"})}),(0,ke.jsx)("div",{className:"".concat(bt," toast-content"),children:t})]})})};function St(e,t){var n=e.content,r=e.duration,a=void 0===r?3e3:r,i=e.masking,o=e.className,c=document.createElement("div");document.body.appendChild(c);var u=(0,s.createRoot)(c,{});u.render((0,ke.jsx)(zt,{content:n,masking:i,className:o}));var l=!1;function d(){l||(l=!0,u.unmount(),t&&"function"==typeof t&&t())}return setTimeout((function(){return d()}),a),d}function At(e){return It.apply(this,arguments)}function It(){return(It=(0,o.A)((0,i.A)().mark((function e(t){var n;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:e.next=13;break;case 5:e.prev=5,e.t0=e.catch(0),(n=document.createElement("textArea")).value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n);case 13:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var Ct=function(e,t){return Ce.publishEvent({eventName:"TRIGGER_COPY_IN_CHATBOT_EVENT",data:{content:e,modelSource:t}})};function Tt(e,t){return kt.apply(this,arguments)}function kt(){return(kt=(0,o.A)((0,i.A)().mark((function e(t,n){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return re.event("chatbot_writer_conversation_sug_action",{click:"copy",model_source:null==n?void 0:n.model}),e.next=3,At(t);case 3:return St({content:M("copy_success")}),e.next=6,Ct(t,null==n?void 0:n.model);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e,t){re.event("chatbot_writer_conversation_sug_action",{click:"export",model_source:null==t?void 0:t.model}),Ce.publishEvent({eventName:"ADD_TO_SMART_EDITOR_EVENT",data:{content:e}})}var Et="root-DKTutB",Lt="item-wxCmWp",Pt="text-MZ1U9G",Rt=function(e){var t=e.items,n=e.handler;return(0,ke.jsx)("div",{className:He()("h",Et),children:t.map((function(e){return(0,ke.jsxs)("div",{className:He()("h",Lt),onClick:function(){return n(e)},children:["use"===e.key&&(0,ke.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3.33333H3.33333V12H7.33333V13.3333H3.33333C2.59695 13.3333 2 12.7364 2 12V3.33333C2 2.59695 2.59695 2 3.33333 2H12C12.7364 2 13.3333 2.59695 13.3333 3.33333V7.33333H12V3.33333ZM5.00049 8.00202C4.81639 8.00142 4.66711 8.15018 4.66705 8.33427L4.66683 9.00094C4.66677 9.18503 4.81596 9.33476 5.00005 9.33535L8.33337 9.34614C8.51746 9.34673 8.66675 9.19798 8.66681 9.01388L8.66702 8.34722C8.66708 8.16312 8.5179 8.0134 8.3338 8.01281L5.00049 8.00202ZM4.66667 6.34111C4.66667 6.5252 4.81591 6.67422 5 6.67396L10.3333 6.66618C10.5174 6.66591 10.6667 6.51646 10.6667 6.33236V5.66569C10.6667 5.4816 10.5174 5.33258 10.3333 5.33285L5 5.34062C4.8159 5.34089 4.66667 5.49035 4.66667 5.67444V6.34111Z",fill:"currentColor"}),(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.6667 11.3333C14.6667 12.8061 13.4728 14 12 14C10.5272 14 9.33333 12.8061 9.33333 11.3333C9.33333 9.86057 10.5272 8.66667 12 8.66667C13.4728 8.66667 14.6667 9.86057 14.6667 11.3333ZM11.7833 9.66667C11.6453 9.66667 11.5333 9.7786 11.5333 9.91667V10.8667H10.5833C10.4453 10.8667 10.3333 10.9786 10.3333 11.1167V11.55C10.3333 11.6881 10.4453 11.8 10.5833 11.8H11.5333V12.75C11.5333 12.8881 11.6453 13 11.7833 13H12.2167C12.3547 13 12.4667 12.8881 12.4667 12.75V11.8H13.4167C13.5547 11.8 13.6667 11.6881 13.6667 11.55V11.1167C13.6667 10.9786 13.5547 10.8667 13.4167 10.8667H12.4667V9.91667C12.4667 9.7786 12.3547 9.66667 12.2167 9.66667H11.7833Z",fill:"currentColor"})]}),"copy"===e.key&&(0,ke.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ke.jsx)("g",{id:"copy",children:(0,ke.jsx)("path",{id:"Union",d:"M14 10.3333C14 10.5174 13.8508 10.6667 13.6667 10.6667H13C12.8159 10.6667 12.6667 10.5174 12.6667 10.3333V3.33333H5.66667C5.48257 3.33333 5.33333 3.18409 5.33333 3V2.33333C5.33333 2.14924 5.48257 2 5.66667 2H12.6667C13.403 2 14 2.59695 14 3.33333V10.3333ZM3.33333 6L3.33333 12.6667H10V6H3.33333ZM2 6C2 5.26362 2.59695 4.66667 3.33333 4.66667H10C10.7364 4.66667 11.3333 5.26362 11.3333 6V12.6667C11.3333 13.403 10.7364 14 10 14H3.33333C2.59695 14 2 13.403 2 12.6667V6Z",fill:"currentColor"})})}),(0,ke.jsx)("span",{className:Pt,children:e.text})]},e.key)}))})},Ot="root-FOP5pt",Qt="main-VrKx8T",Yt="main-error-gtGHAC",Ut="text-tFBnLe",Vt="text-error-QN8HlM",Wt="cancel-text-uxlvcB",Zt="menu-dCSn04",Ht=new(n(32684).A),qt=function(e,t){return e[t].content};function Ft(e){return Ht.render(e)}Ht.renderer.rules.code_inline=qt,Ht.renderer.rules.code_block=qt,Ht.renderer.rules.fence=qt;var $t="line-hVcJKV",Bt="loading-ePw2QD",Jt="loading-inner-1-_XdXGz",Kt="loading-inner-2-dx_ZMd",Gt="loading-inner-3-gZ7p_w",Xt=Te.forwardRef((function(e,t){return(0,ke.jsxs)("div",{ref:t,className:He()($t,Bt),children:[(0,ke.jsx)("div",{className:He()($t,Jt)}),(0,ke.jsx)("div",{className:He()($t,Kt)}),(0,ke.jsx)("div",{className:He()($t,Gt)})]})})),en="root-wn0cdu",tn="text-F3F1GH",nn="quote-AHCKXd";function sn(e){var t=(0,Te.useRef)();return t.current=e,(0,Te.useCallback)((function(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(s))}),[])}var rn="root-Zyp0g3",an="main-nEV6TV",on="main-error-n2MMDm",cn="text-K7I8yF",un="text-error-J0qp9q",ln="cancel-text-qAxx2w",dn="menu-LXTXNv",hn="summary-Ogzo1H",pn=function(e){return(0,ke.jsx)("svg",(0,a.A)((0,a.A)({xmlns:"http://www.w3.org/2000/svg",width:15,height:14,fill:"none",viewBox:"0 0 15 14"},e),{},{children:(0,ke.jsx)("path",{fill:"#1C283D",fillOpacity:.5,fillRule:"evenodd",d:"M8.408 9.687a.7.7 0 0 1-.984 0L2.874 5.19a.29.29 0 0 1-.003-.412l.574-.581a.29.29 0 0 1 .413-.002l4.058 4.01 4.059-4.01a.29.29 0 0 1 .412.002l.574.58c.113.115.112.3-.002.413z",clipRule:"evenodd"})}))},mn=function(e){return(0,ke.jsx)("svg",(0,a.A)((0,a.A)({xmlns:"http://www.w3.org/2000/svg",width:14,height:14,fill:"none",viewBox:"0 0 14 14"},e),{},{children:(0,ke.jsx)("path",{fill:"#090C14",fillRule:"evenodd",d:"M7.413 2.463a2.917 2.917 0 0 1 4.125 4.125L9.493 8.634l-.825-.825 2.045-2.046a1.75 1.75 0 1 0-2.475-2.475L6.192 5.334l-.825-.825zm-4.95 4.95a2.917 2.917 0 1 0 4.125 4.126l1.997-1.997-.825-.825-1.997 1.997a1.75 1.75 0 0 1-2.475-2.476l1.996-1.996-.825-.825zm5.843-2.01a.375.375 0 0 0-.53 0l-2.35 2.35a.375.375 0 0 0 0 .53l.295.294a.375.375 0 0 0 .53 0l2.35-2.35a.375.375 0 0 0 0-.53z",clipRule:"evenodd"})}))},gn=n(89732),vn=n.n(gn),fn="reference-XgVl8b",xn="title-PExRVZ",Mn="toggle-icon-FS8vZt",Nn="expand-ZGwQVS",yn="container-sQggdv",wn="item-nAMvQY",_n="icon-wrapper-pxryw2",jn="icon-t1lzem",bn="link-vCP81r",zn="index-Dcdo9R",Sn="time-j1OU1k",An="divider-u5RjD9",In=function(e){var t=e.reference,n=(0,Te.useState)(!1),s=(0,r.A)(n,2),i=s[0],o=s[1],c=function(e){return e.logo_url?(0,ke.jsx)("img",{src:e.logo_url,className:jn,crossOrigin:"anonymous"}):(0,ke.jsx)(mn,{className:jn})},u=(0,Te.useMemo)((function(){return t.map((function(e){var t=vn()(e.publish_time),n=t.unix();return(0,a.A)((0,a.A)({},e),{},{dateText:n?t.format("YYYY.MM.DD"):null})}))}),[t]),l=function(){re.event("chatbot_writer_output_url_click",{output_type:"search"})};return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("div",{className:fn,children:[(0,ke.jsxs)("div",{className:xn,onClick:function(){return o((function(e){return!e}))},children:[(0,ke.jsx)("span",{children:M("askbot_dialogue_reference_materials")}),(0,ke.jsx)(pn,{className:He()(Mn,i?Nn:void 0)})]}),i&&(0,ke.jsx)("div",{className:yn,children:u.map((function(e,t){return(0,ke.jsxs)("div",{className:wn,children:[(0,ke.jsxs)("span",{className:zn,children:[t+1,". "]}),(0,ke.jsx)("div",{className:_n,children:c(e)}),(0,ke.jsx)("a",{className:bn,href:e.url,target:"_blank",rel:"noreferrer",onClick:l,children:e.title}),e.dateText?(0,ke.jsxs)("span",{className:Sn,children:["[",e.dateText,"]"]}):null]},t)}))})]}),(0,ke.jsx)("div",{className:An})]})},Cn="header-Bt7fP1",Tn="pagination-p1FgNa",kn="cursor-p2mGsn",Dn="disable-ufP5T_",En="icon-wAvT80",Ln="arrow-left-Xa2Ov_",Pn=function(e){return(0,ke.jsx)("svg",(0,a.A)((0,a.A)({xmlns:"http://www.w3.org/2000/svg",width:12,height:12,fill:"none",viewBox:"0 0 12 12"},e),{},{children:(0,ke.jsx)("path",{fill:"#1B3D5F",fillOpacity:.2,fillRule:"evenodd",d:"M8.303 6.422a.6.6 0 0 0 0-.843l-3.854-3.9a.25.25 0 0 0-.354-.003l-.498.492a.25.25 0 0 0-.002.354L7.033 6 3.595 9.48a.25.25 0 0 0 .002.354l.498.492a.25.25 0 0 0 .354-.002z",clipRule:"evenodd"})}))},Rn=function(e){var t=e.current,n=e.length,s=e.onChange,r=function(e){e>=0&&e<n&&s(e)},a=0===t,i=t===n-1;return(0,ke.jsxs)("div",{className:Cn,children:[(0,ke.jsx)("span",{children:M("askbot_dialogue_generated_results")}),(0,ke.jsx)("div",{className:He()(kn,(0,yt.A)({},Dn,a)),onClick:function(){r(t-1)},children:(0,ke.jsx)(Pn,{className:He()(En,Ln)})}),(0,ke.jsx)("span",{className:Tn,children:"".concat(t+1,"/").concat(n)}),(0,ke.jsx)("div",{className:He()(kn,(0,yt.A)({},Dn,i)),onClick:function(){r(t+1)},children:(0,ke.jsx)(Pn,{className:En})})]})},On="root-SW1zi2",Qn="probe-KQLNJS",Yn="quote-fq0rue",Un={Task:function(e){var t,n=e.data,s=n.text,r=n.status;return(0,ke.jsx)("div",{className:He()("fadein",dt),children:(0,ke.jsx)("div",{className:ht,children:(t=(0,ke.jsx)("img",{src:"https://sf-fe.capcut.com/obj/capcut-static-sg/ies/monorepo/smart_edit_capcut/static/image/loading.3c982d50.gif",className:mt}),r===We.n.Canceled?(0,ke.jsx)("p",{className:gt,children:M("mob_chatbot_generation_stopped")}):r===We.n.Pending?(0,ke.jsxs)("div",{className:vt,children:[s&&(0,ke.jsx)("p",{className:ft,children:s}),t]}):s?(0,ke.jsx)("p",{className:pt,children:s}):t)})})},Divider:function(e){var t=e.data.text;return(0,ke.jsxs)("div",{className:xt,children:[(0,ke.jsx)("span",{className:Mt}),(0,ke.jsx)("span",{className:Nt,children:t}),(0,ke.jsx)("span",{className:Mt})]})},Text:function(e){var t=e.data,n=t.id,s=t.text,a=t.status,i=(0,Te.useState)(""),o=(0,r.A)(i,2),c=o[0],u=o[1],l=(0,Te.useState)(14),d=(0,r.A)(l,2),h=d[0],p=d[1],m=(0,Te.useRef)(null),g=(0,Te.useRef)(null),v=new ResizeObserver((function(){return f()}));(0,Te.useEffect)((function(){var e=Ft(s.replace(/\n/g,"\n\n"));s.endsWith("##")&&p(28),u(e)}),[s]);var f=function(){var e=document.getElementById("scroll-root");e.scrollHeight-e.scrollTop-e.offsetHeight<500&&(e.scrollTop=e.scrollHeight)};(0,Te.useEffect)((function(){a===We.n.Pending&&m.current&&v.observe(m.current),a===We.n.Normal&&m.current&&v.unobserve(m.current)}),[a]);var x=(0,Te.useState)(!1),N=(0,r.A)(x,2),y=N[0],w=N[1],_=(0,Te.useState)({x:0,y:0}),j=(0,r.A)(_,2),b=j[0],z=j[1],S=(0,Te.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),z({x:e.clientX,y:e.clientY}),w(!0),window.getSelection().removeAllRanges();var t=function(){w(!1),document.removeEventListener("click",t),document.removeEventListener("scroll",t)};document.addEventListener("click",t),document.addEventListener("scroll",t)}),[]);return(0,ke.jsx)("div",{className:He()("fadein",Ot),children:(0,ke.jsxs)("div",{className:He()(Qt,(0,yt.A)({},Yt,a===We.n.Error)),children:[(0,ke.jsx)("div",{ref:m,id:"message-".concat(n),className:He()(Ut,(0,yt.A)({},Vt,a===We.n.Error)),onContextMenu:S,dangerouslySetInnerHTML:{__html:c}}),a===We.n.Pending&&(0,ke.jsx)("div",{style:{height:"".concat(h,"px")}}),a===We.n.Canceled&&(0,ke.jsx)("div",{className:He()(Wt),children:M("mob_chatbot_generation_stopped")}),(a===We.n.Normal||a===We.n.Canceled)&&(0,ke.jsx)(Rt,{items:De,handler:function(e){switch(e.key){case"copy":Tt(s);break;case"use":Dt(s)}}}),y&&(0,ke.jsx)("div",{className:Zt,style:{left:b.x,top:b.y},onClick:function(){Ce.showFeedbackDialog({positive:!1,enterForm:"chat-bot",extraParams:{sell_points:"",mode:"",script_id:"",prompt_request_id:"",prompt:"",text:s}}),re.event("chatbot_writer_conversation_sug_action",{click:"dislike"})},children:M("mob_chatbot_dislike")}),t.status===We.n.Pending&&(0,ke.jsx)(Xt,{ref:g})]})})},Instruct:function(e){var t=e.data,n=t.text,s=t.quote;return(0,ke.jsxs)("div",{className:He()("fadein",en),children:[s&&(0,ke.jsx)("p",{className:He()("quote",nn),children:s}),(0,ke.jsx)("p",{className:tn,children:n})]})},RichText:function(e){var t=e.data,n=t.id,s=t.richTexts,i=t.status,o=t.activeRichTextIndex,c=t.activeRichText,u=t.text,l=(0,Te.useState)(""),d=(0,r.A)(l,2),h=d[0],p=d[1],m=(0,Te.useState)(14),g=(0,r.A)(m,2),v=g[0],f=g[1],x=(0,Te.useRef)(null),y=(0,Te.useRef)(null),w=null!=c?c:{},_=w.content,j=w.reference,b=void 0===j?[]:j,z=w.model,S=u||_||"";!function(e){var t=e.activeRichText,n=e.source,s=null!=t?t:{},r=s.uuid,a=s.model,i=null!=r?r:a,o=(0,Te.useRef)(new Map);(0,Te.useEffect)((function(){a&&n!==N.Source.History&&(o.current.get(i)||(re.event("chatbot_writer_conversation_sug_show",{model_source:a}),o.current.set(i,!0)))}),[n,i])}(t),function(e){var t=e.source,n=e.activeRichText,s=(null!=n?n:{}).reference;(0,Te.useEffect)((function(){null!=s&&s.length&&t!==N.Source.History&&re.event("chatbot_writer_output_url_show",{output_type:"search"})}),[t,null==s?void 0:s.length])}(t);var A=sn((function(){if(i===We.n.Pending){var e=document.getElementById("scroll-root");if(!e)return;e.scrollHeight-e.scrollTop-e.offsetHeight<500&&(e.scrollTop=e.scrollHeight)}})),I=(0,Te.useRef)(new ResizeObserver(A));(0,Te.useEffect)((function(){var e=Ft(S.replace(/\n/g,"\n\n"));S.endsWith("##")&&f(28),p(e)}),[s,S]),(0,Te.useEffect)((function(){return I.current&&x.current?(i===We.n.Pending&&I.current.observe(x.current),i===We.n.Normal&&I.current.unobserve(x.current),function(){x.current&&I.current.unobserve(x.current)}):function(){}}),[i]);var C=sn((function(e){switch(e.key){case"copy":Tt(S,{model:z});break;case"use":Dt(S,{model:z})}})),T=(0,Te.useState)(!1),k=(0,r.A)(T,2),D=k[0],E=k[1],L=(0,Te.useState)({x:0,y:0}),P=(0,r.A)(L,2),R=P[0],O=P[1],Y=(0,Te.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),O({x:e.clientX,y:e.clientY}),E(!0),window.getSelection().removeAllRanges();var t=function(){E(!1),document.removeEventListener("click",t),document.removeEventListener("scroll",t)};document.addEventListener("click",t),document.addEventListener("scroll",t)}),[]),U=i===We.n.Normal||(null==c?void 0:c.completed),V=i===We.n.Pending&&!(null!=c&&c.completed),W=i===We.n.Error,Z=i===We.n.Canceled,H=!W&&s.length>1,q=!W&&Boolean(b.length),F=b.length&&U,$=U||Z,B=V;return(0,ke.jsx)("div",{className:He()("fadein",rn),children:(0,ke.jsxs)("div",{className:He()(an,(0,yt.A)({},on,i===We.n.Error)),children:[H&&(0,ke.jsx)(Rn,{current:o,length:s.length,onChange:function(e){Q.Session.update(t,(function(t){return(0,a.A)((0,a.A)({},t),{},{activeRichTextIndex:e})}))}}),q&&(0,ke.jsx)("div",{className:hn,children:M("askbot_dialogue_summary_article",{length:b.length})}),(0,ke.jsx)("div",{ref:x,id:"message-".concat(n),className:He()(cn,(0,yt.A)({},un,i===We.n.Error)),onContextMenu:Y,dangerouslySetInnerHTML:{__html:h}}),V&&(0,ke.jsx)("div",{style:{height:"".concat(v,"px")}}),Z&&(0,ke.jsx)("div",{className:He()(ln),children:M("mob_chatbot_generation_stopped")}),F?(0,ke.jsx)(In,{reference:b}):null,$?(0,ke.jsx)(Rt,{items:De,handler:C}):null,D&&(0,ke.jsx)("div",{className:dn,style:{left:R.x,top:R.y},onClick:function(){Ce.showFeedbackDialog({positive:!1,enterForm:"chat-bot",extraParams:{sell_points:"",mode:"",script_id:"",prompt_request_id:"",prompt:"",text:S}}),re.event("chatbot_writer_conversation_sug_action",{click:"dislike"})},children:M("mob_chatbot_dislike")}),B&&(0,ke.jsx)(Xt,{ref:y})]})})}},Vn=function(){var e,t=Ye(Q.Quote.state),n=Ye(Q.Session.state),s=(0,Te.useRef)(null);(0,Te.useLayoutEffect)((function(){lt(s.current)}),[]),(0,Te.useEffect)((function(){return Q.Session.state.subscribe((function(e,t){var n=e.ids,r=e.store,a=t.ids,i=t.store,o=r[n[n.length-1]],c=i[a[a.length-1]];if(((null==o?void 0:o.id)!==(null==c?void 0:c.id)||(null==o?void 0:o.status)!==We.n.Pending||(null==c?void 0:c.status)!==We.n.Pending)&&o!==c){if("RichText"===o.type&&"RichText"===c.type){var u=c;if(o.activeRichTextIndex!==u.activeRichTextIndex)return}lt(s.current)}}))}),[]),(0,Te.useEffect)((function(){var e,t=(e=function(){var e=(0,o.A)((0,i.A)().mark((function e(t){var n,s,r,a;return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t.ctrlKey||t.metaKey)&&"c"===t.key){e.next=3;break}return e.abrupt("return");case 3:if(!(n=Ue())){e.next=11;break}return s=Q.Session.find(n),r="activeRichText"in s?s.activeRichText.model:void 0,re.event("chatbot_writer_conversation_sug_action",{click:"ctr_c",model_source:r}),a=window.getSelection().toString(),e.next=11,Ct(a,r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),document.body.addEventListener("keydown",e),function(){return document.body.removeEventListener("keydown",e)});return t}),[]);return(0,ke.jsxs)("div",{className:On,ref:s,id:"scroll-root",children:[n.ids.map((function(e){var s=n.store[e],r=Un[s.type];return(0,ke.jsx)(r,{data:s,quote:t.selecting},e)})),(null===(e=t.selecting)||void 0===e?void 0:e.id)&&(0,ke.jsx)("div",{className:Yn,onMouseDown:function(e){e.preventDefault(),e.stopPropagation(),Q.Editor.focus(),setTimeout((function(){return Q.Quote.confirm(t.selecting)}),100)},style:{left:"".concat(t.selecting.rect.left,"px"),top:"".concat(t.selecting.rect.top,"px")},children:M("mob_chatbot_quote")}),(0,ke.jsx)("div",{className:Qn})]})},Wn="root-pRa1WR",Zn="tips-O1XnDH",Hn="inputBar-SRxye4",qn="input-MGBvCk",Fn="main-jZbLgv",$n="submit-yxHTvc",Bn="submitDisabled-SdZcG7",Jn="quoteContainer-V8cPPF",Kn="quote-wTnar5",Gn="quoteText-hSl2KA",Xn="clearQuote-hrqVfl",es="root-jNZOvQ",ts="main-Hjq4vH",ns="action-YmeJB7",ss="quote-gWF6Zq",rs="text-nVmyBn",as=function(e){var t=e.unmount,n=e.onQuote,s=e.onClose;return(0,ke.jsxs)("div",{className:He()("fadein",es,ts,t&&"fadeout-down"),onAnimationEnd:function(){t&&s()},children:[(0,ke.jsx)("span",{className:rs,children:M("mob_chatbot_externalexternal")}),(0,ke.jsxs)("div",{className:ns,children:[(0,ke.jsx)("span",{onClick:n,className:ss,children:M("mob_chatbot_quote")}),(0,ke.jsx)("svg",{onClick:s,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{cursor:"pointer"},children:(0,ke.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.86839 8.00035L2.90231 11.9668C2.77215 12.0969 2.77215 12.308 2.90231 12.4382L3.56225 13.0982C3.69242 13.2283 3.90349 13.2283 4.03367 13.0982L7.99972 9.13176L11.966 13.0984C12.0962 13.2286 12.3072 13.2286 12.4374 13.0984L13.0973 12.4384C13.2275 12.3082 13.2275 12.0972 13.0973 11.967L9.13104 8.00035L13.0973 4.03371C13.2275 3.90354 13.2275 3.6925 13.0973 3.56232L12.4374 2.90233C12.3072 2.77214 12.0962 2.77214 11.966 2.90233L7.99972 6.86893L4.03367 2.90254C3.9035 2.77235 3.69242 2.77235 3.56225 2.90254L2.90231 3.56254C2.77215 3.69271 2.77215 3.90375 2.90231 4.03392L6.86839 8.00035Z",fill:"#090C14"})})]})]})},is=function(e){var t=(0,Te.useState)(!1),n=(0,r.A)(t,2),s=n[0],a=n[1],c=(0,Te.useState)(!1),u=(0,r.A)(c,2),l=u[0],d=u[1],h=(0,Te.useRef)(""),p=(0,Te.useRef)(null),m=Ye(Q.Auth.state),g=Ye(Q.Editor.state),v=Ye(Q.Quote.state).confirmed,f=m.agreed&&!!g.prompt,x=function(){var t=(0,o.A)((0,i.A)().mark((function t(){return(0,i.A)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.prompt.trim()){t.next=2;break}return t.abrupt("return");case 2:e.onSubmit((function(){var e=p.current;Q.Editor.update({prompt:""}),e.style.height="auto",Q.Quote.confirm(null),Q.Session.run("SendPrompt(params)",{prompt:g.prompt,quote:null==v?void 0:v.content}),re.event("chatbot_writer_input_panel_action",{})}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var e=(0,o.A)((0,i.A)().mark((function e(){return(0,i.A)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q.API.cancelStream(),Q.Session.cancelPrevious(),x();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){d(!1)};return(0,Te.useEffect)((function(){return setTimeout((function(){a(!0)}),5e3),!e.isActualInConversation&&Se.quote&&Ce.getCache({key:Se.id}).then((function(e){e.content&&(h.current=e.content,d(!0))})).catch((function(){})),Q.Editor.state.subscribe((function(e,t){e.focus!==t.focus&&p.current[e.focus?"focus":"blur"](),p.current.value=e.prompt}))}),[]),(0,ke.jsxs)("div",{className:Wn,children:[(0,ke.jsxs)("div",{className:Fn,children:[v&&(0,ke.jsx)("div",{className:Jn,children:(0,ke.jsxs)("div",{className:Kn,children:[(0,ke.jsx)("p",{className:He()("quote",Gn),children:v.content}),(0,ke.jsx)("svg",{className:Xn,onClick:function(){Q.Quote.confirm(null)},xmlns:"http://www.w3.org/2000/svg",width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",children:(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.36839 8.00035L3.40231 11.9668C3.27215 12.0969 3.27215 12.308 3.40231 12.4382L4.06225 13.0982C4.19242 13.2283 4.40349 13.2283 4.53367 13.0982L8.49972 9.13176L12.466 13.0984C12.5962 13.2286 12.8072 13.2286 12.9374 13.0984L13.5973 12.4384C13.7275 12.3082 13.7275 12.0972 13.5973 11.967L9.63104 8.00035L13.5973 4.03371C13.7275 3.90354 13.7275 3.6925 13.5973 3.56232L12.9374 2.90233C12.8072 2.77214 12.5962 2.77214 12.466 2.90233L8.49972 6.86893L4.53367 2.90254C4.4035 2.77235 4.19242 2.77235 4.06225 2.90254L3.40231 3.56254C3.27215 3.69271 3.27215 3.90375 3.40231 4.03392L7.36839 8.00035Z",fill:"#1F2F45",fillOpacity:"0.4"})})]})}),(0,ke.jsxs)("div",{className:Hn,children:[(0,ke.jsx)("textarea",{placeholder:M("mob_chatbot_typepanel_placeholder text"),ref:p,rows:1,id:"input",disabled:!m.agreed,className:qn,onBlur:function(){Q.Editor.blur()},onFocus:function(){Q.Editor.focus(),l&&y()},onChange:function(e){var t=p.current;t.style.height="auto",t.style.height=t.scrollHeight+"px",Q.Editor.update({prompt:e.target.value})},onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),x())}}),e.isMessagePending?(0,ke.jsxs)("svg",{onClick:N,className:$n,width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,ke.jsx)("circle",{cx:"21",cy:"21",r:"12",fill:"#090C14"}),(0,ke.jsx)("rect",{x:"17",y:"17",width:"8",height:"8",rx:"1",fill:"white"})]}):(0,ke.jsxs)("svg",{width:"42",height:"42",viewBox:"0 0 42 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:He()($n,!f&&Bn),onClick:x,children:[(0,ke.jsx)("circle",{cx:"21",cy:"21",r:"12",fill:f?"#090C14":"#273C56",fillOpacity:f?"1":"0.2"}),(0,ke.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.8594 18.0372L25.8518 22.0283L27.0642 20.8163L21.6085 15.3623C21.2737 15.0277 20.7309 15.0277 20.3961 15.3623L14.9404 20.8163L16.1528 22.0283L20.1452 18.0372V26.8763H21.8594V18.0372Z",fill:"white"})]})]})]}),(0,ke.jsx)("span",{className:Zn,children:M("mob_chatbot_chat_warning")}),l&&(0,ke.jsx)(as,{unmount:s,onQuote:function(){Q.Editor.focus(),Q.Quote.confirm({id:"-1",content:h.current,rect:null})},onClose:y})]})},os="root-wPM8Iz",cs="main-olUyyl",us=function(){var e,t=Ye(Q.Auth.state),n=Ye(Q.Session.state),s=(0,Te.useRef)(null),a=(0,Te.useState)(!1),i=(0,r.A)(a,2),o=i[0],c=i[1],u=(0,Te.useState)(n.ids.length>0),l=(0,r.A)(u,2),d=l[0],h=l[1];(0,Te.useEffect)((function(){return document.addEventListener("mouseup",Ve),function(){document.removeEventListener("mouseup",Ve)}}),[]);if(n.status===We.n.Pending)return null;var p=d||n.ids.length>0,m=(null===(e=Q.Session.last())||void 0===e?void 0:e.status)===We.n.Pending;return(0,ke.jsxs)("div",{className:os,onMouseDown:function(){Q.Quote.select(null)},children:[(0,ke.jsxs)("div",{className:cs,children:[(!p||o)&&(0,ke.jsx)(ut,{unmount:o,onUnmounted:function(){var e;c(!1),h(!0),null===(e=s.current)||void 0===e||e.call(s),s.current=null}}),p&&(0,ke.jsx)(Vn,{})]}),t.agreed&&(0,ke.jsx)(is,{isMessagePending:m,isActualInConversation:p,onSubmit:function(e){if(!o)return d?void e():(s.current=e,void c(!0));s.current=e}})]})},ls=document.getElementById("root");ls&&(Ce.setTitle({title:M("mob_chatbot_productname")}),re.event("chatbot_writer_home_show",{}),s.createRoot(ls).render((0,ke.jsx)(us,{})))},29160:function(){},97911:function(e,t,n){"use strict";n(26152),n(76672),n(46481),n(38320),n(1973),n(28638),n(67239),n(22293),n(18730),n(57180),n(7544),n(24766),n(75505),n(29262),n(69089),n(13657),n(41506),n(26343),n(55932),n(37757),n(68750),n(48532),n(75187),n(90238),n(53651),n(64063),n(8462),n(32670),n(76241),n(57129),n(72352),n(95467),n(46855),n(6380),n(98579),n(95784),n(5613),n(52871),n(51928),n(94171),n(34047),n(10565),n(12519),n(37349),n(60587),n(84428),n(63001),n(58605),n(95850),n(11528),n(43049),n(58288),n(85830),n(6974),n(30336),n(86636),n(1061),n(42861),n(75276),n(65781),n(11240),n(14012),n(72749),n(94012),n(55216),n(30511),n(45954),n(46745),n(66882),n(39725),n(14022),n(59151),n(75385),n(63840),n(63986),n(9297),n(49259),n(7211),n(69566),n(78039),n(85160),n(8491),n(63240),n(88626),n(81983),n(19457),n(20115),n(27376),n(97899),n(23418),n(39948),n(72678),n(62839),n(66888),n(12492),n(29349),n(54384),n(94300),n(62680),n(30917),n(52930),n(1764),n(55384),n(17511),n(893),n(48426),n(6886),n(51492),n(2593),n(62263),n(90332),n(46142),n(22769),n(72327),n(36739),n(34910),n(348),n(43294),n(91332),n(50679),n(96002),n(18565),n(31991),n(99046),n(32091),n(13542),n(8603),n(81181),n(63632),n(59922),n(40202),n(32921),n(11768),n(67786),n(88277),n(51351),n(45126),n(12318),n(34205),n(88990),n(80161),n(99547),n(83214),n(66586),n(63232),n(54816),n(32251),n(68142),n(44138),n(41376),n(99539),n(47194),n(6662),n(32678),n(51730),n(21797),n(20922),n(97588),n(14118),n(91323),n(83945),n(26476),n(24511),n(24957),n(49667),n(73759),n(65151),n(42255),n(50683),n(67543),n(64746),n(19586),n(57879),n(9931),n(17047),n(69831),n(2080),n(15701),n(36222),n(95352),n(98356),n(53391),n(11829),n(40339),n(28371),n(99275),n(16007),n(37331),n(25488),n(24985),n(45324),n(80574),n(69491),n(59605),n(10130),n(96895),n(9476),n(10344),n(46286),n(35825),n(5894),n(62291),n(61440),n(84311),n(25218),n(12628),n(30342),n(75686),n(87974),n(509),n(27902),n(78230),n(43633),n(91957),n(87902),n(39511),n(50409),n(71852),n(40279),n(25433),n(34210),n(74935),n(85645),n(93888),n(10202),n(47161),n(82363),n(91228),n(58771),n(2297),n(10972),n(7334),n(42548),n(68491),n(7347),n(6092),n(79869),n(31578),n(17233),n(41110),n(91845),n(35682),n(19980),n(89642),n(28889),n(75343),n(76799),n(61786),n(6565),n(36143),n(64689),n(57147),n(5237),n(9690),n(56301),n(81190),n(68560),n(24028),n(60471),n(50687),n(68843),n(70654),n(23682),n(61692),n(3385),n(14484),n(26851),n(95812),n(63107),n(93458),n(91365),n(96474),n(46685),n(77195),n(87740),n(89358),n(67587),n(91099),n(7096),n(59704),n(75938),n(29602),n(64432),n(68045),n(62160),n(40274),n(75887),n(58534),n(66724),n(50924),n(30378),n(25804),n(52499),n(95346),n(24529),n(6967),n(80162),n(20730),n(1904),n(93044),n(15559),n(98722),n(44815),n(14824),n(47981),n(69138),n(92454),n(94079),n(59521),n(86077),n(6097),n(49427),n(17646),n(60658),n(12237),n(37685),n(47361),n(77223),n(53586),n(5481),n(53419),n(88995),n(88996),n(32813),n(69871),n(80748),n(38896),n(61003),n(78163),n(6629),n(53796),n(53216),n(9418),n(98042),n(88026),n(59251),n(67070),n(79913),n(17364),n(76548),n(47453),n(48831),n(59060),n(65028),n(37755),n(54965),n(61881),n(61299),n(2760),n(84455),n(31045),n(27920),n(200),n(7602),n(45250),n(78471),n(28423),n(68567),n(66868),n(5857),n(70540),n(16407),n(41898),n(32946),n(31848),n(27371),n(99536),n(54962),n(71724),n(46451),n(82555),n(38040),n(80118),n(2735),n(97078),n(18985),n(95998),n(95453),n(83669),n(10958),n(7752),n(31885),n(24148),n(22641),n(21315),n(26039),n(55861),n(407),n(52770),n(45731),n(62208),n(49342),n(70665),n(42588),n(4536),n(6504),n(42824),n(62467),n(96029),n(94470),n(85671),n(8867),n(54465),n(48867),n(88687),n(2006),n(47661),n(75872)},39002:function(){"use strict";window.__assetPrefix__="."}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[740,594,521],(function(){return t(39002),t(97911),t(49326)}));e.O()}]);