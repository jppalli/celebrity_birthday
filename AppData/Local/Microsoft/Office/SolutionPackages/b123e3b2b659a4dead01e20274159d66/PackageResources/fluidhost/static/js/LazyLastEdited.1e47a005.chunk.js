"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[45590],{590:(e,t,i)=>{i.r(t),i.d(t,{default:()=>z});var r=i(27051),a=i(70579),o=i(65043),s=i(55316),n=i(31025),u=i(77205),m=i(39888),l=i(47373),h=i(60202),c=i(94845),A=i(66857),p=i(13261),T=i(33633);const g=(0,c.n)({button:(0,r.A)((0,r.A)((0,r.A)((0,r.A)({minWidth:"unset"},A.Pt.padding(p.L.spacingHorizontalSNudge)),A.Pt.borderRadius(p.L.borderRadiusCircular)),A.Pt.border("0")),{},{"&:hover, &:active, &:hover:active":{backgroundColor:p.L.colorNeutralBackground5Hover,"@media (forced-colors:active)":{"& > p":{color:"HighlightText"},["& .".concat(T.gn.initials)]:{color:"CanvasText"},backgroundColor:"Highlight"}}}),editedDescription:(0,r.A)((0,r.A)((0,r.A)({color:p.L.colorNeutralForeground3,fontSize:p.L.fontSizeBase200,fontWeight:p.L.fontWeightRegular,lineHeight:p.L.fontSizeBase400},A.Pt.padding("0")),A.Pt.margin("0")),{},{marginLeft:p.L.spacingHorizontalXS})});function d(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function v(e){const t=d(new Date(Date.now()));return new Date(t.setDate(t.getDate()+e))}function W(e,t){const i=v(t),r=d(e);return a=r,i.getTime()===a.getTime();var a}function f(e){return new Date(Date.now()).getFullYear()===e.getFullYear()}const y={weekday:"short",day:"numeric",month:"short"},w=(0,r.A)((0,r.A)({},y),{},{year:"numeric"}),b={hour:"numeric",minute:"numeric"},D={day:"numeric",month:"short"},L=(0,r.A)((0,r.A)({},D),{},{year:"numeric"}),N={day:"numeric",month:"long"},M=(0,r.A)((0,r.A)({},N),{},{year:"numeric"}),C=(0,r.A)((0,r.A)((0,r.A)({},M),b),{},{hour12:!0}),P=new Map([[1,y],[2,w],[3,{weekday:"short"}],[4,{weekday:"long"}],[5,b],[6,D],[7,L],[8,{day:"numeric",month:"numeric",year:"numeric"}],[10,N],[9,M],[11,C]]),k=new Map;function x(e,t){const i="".concat(e,":").concat(t);if(k.has(i))return k.get(i);const r=P.get(t),a=new Intl.DateTimeFormat(e,r);return k.set(i,a),a}function H(e,t){const i=new Date(Date.now()).getTime()-e,r=Math.floor(i/6e4),{locale:a,longFormat:o,stringTable:s,authorName:n}=t;if(r<=2)return n&&s.relativeTimestampJustNowWithAuthor?s.relativeTimestampJustNowWithAuthor({authorName:n}):s.relativeTimestampJustNow;if(r<60)return n&&s.relativeTimestampMinutesAgoWithAuthor?s.relativeTimestampMinutesAgoWithAuthor({minutes:r,authorName:n}):s.relativeTimestampMinutesAgo({minutes:r});const u=new Date(e);if(function(e){return W(e,0)}(u)){const e=Math.floor(i/36e5);return n&&s.relativeTimestampHoursAgoWithAuthor?s.relativeTimestampHoursAgoWithAuthor({hours:e,authorName:n}):s.relativeTimestampHoursAgo({hours:e})}const m=x(a,5).format(u);if(function(e){return W(e,-1)}(u))return n&&s.relativeTimestampYesterdayWithAuthor?s.relativeTimestampYesterdayWithAuthor({time:m,authorName:n}):s.relativeTimestampYesterday({time:m});if(function(e,t){const i=v(-t),r=d(e),a=v(0);return r.getTime()>=Math.min(i.getTime(),a.getTime())&&r.getTime()<=Math.max(i.getTime(),a.getTime())}(u,7)){const e=x(a,o?4:3).format(u);return n&&s.relativeTimestampWithinLastDaysWithAuthor?s.relativeTimestampWithinLastDaysWithAuthor({day:e,time:m,authorName:n}):s.relativeTimestampWithinLastDays({day:e,time:m})}let l;l=o?f(u)?10:9:f(u)?6:7;const h=x(a,l).format(u);return n&&s.relativeTimestampGenericWithAuthor?s.relativeTimestampGenericWithAuthor({date:h,authorName:n}):h}var Y=i(84087),G=i(20897);const z=e=>{const{lastEditDetails:t,presenceColorProvider:i,pageLogger:c,tokenProvider:A,localization:p,stringTable:T,stylingProvider:d,compact:v,settingsProvider:W}=e,[f,y]=o.useState(),w=o.useRef(t),b=g(),D=(0,Y.a)(),L=o.useCallback(e=>{D.current&&y(e)},[D]),N=o.useMemo(()=>new h.nl(i,L,c,A,W),[i,L,c,A,W]);o.useEffect(()=>{c&&!A&&(0,l.Ot)(c,{eventName:"MissingTokenProvider"})},[c,A]),o.useEffect(()=>{N.setPresenceColorProvider(i)},[N,i]),o.useEffect(()=>{const e=setInterval(C.current,6e4);return()=>{clearInterval(e),N.dispose()}},[N]);const M=()=>{const e=H(w.current.timestamp,{stringTable:T,locale:p.locale});N.updateCoauthor({id:t.user.id,name:t.user.name||t.user.id,description:e,activeStatus:!0,isGuest:t.user.isGuest})},C=o.useRef(M);C.current=M,o.useEffect(()=>{w.current=t,C.current()},[t]);const P=()=>{N.resetPresenceColorCache(),C.current()};return(0,G._)(d,"themeNameChanged",P),(0,G._)(d,m.j.themePropertiesChanged,P),f?(0,a.jsx)(s.m,{content:(k=f.name,H(w.current.timestamp,{stringTable:(0,r.A)((0,r.A)({},T),{},{relativeTimestampJustNowWithAuthor:T.relativeTimestampJustNowWithAuthorTooltipText,relativeTimestampMinutesAgoWithAuthor:T.relativeTimestampMinutesAgoWithAuthorTooltipText,relativeTimestampHoursAgoWithAuthor:T.relativeTimestampHoursAgoWithAuthorTooltipText,relativeTimestampYesterdayWithAuthor:T.relativeTimestampYesterdayWithAuthorTooltipText,relativeTimestampWithinLastDaysWithAuthor:T.relativeTimestampWithinLastDaysWithAuthorTooltipText,relativeTimestampGenericWithAuthor:T.relativeTimestampGenericWithAuthorTooltipText}),locale:p.locale,authorName:k})),relationship:"label",positioning:"below",showDelay:0,children:(0,a.jsxs)(n.$,{"data-testid":"lastEditedTestId","aria-label":(e=>H(w.current.timestamp,{stringTable:(0,r.A)((0,r.A)({},T),{},{relativeTimestampJustNowWithAuthor:T.relativeTimestampJustNowWithAuthorAriaLabel,relativeTimestampMinutesAgoWithAuthor:T.relativeTimestampMinutesAgoWithAuthorAriaLabel,relativeTimestampHoursAgoWithAuthor:T.relativeTimestampHoursAgoWithAuthorAriaLabel,relativeTimestampYesterdayWithAuthor:T.relativeTimestampYesterdayWithAuthorAriaLabel,relativeTimestampWithinLastDaysWithAuthor:T.relativeTimestampWithinLastDayWithAuthorAriaLabel,relativeTimestampGenericWithAuthor:T.relativeTimestampGenericWithAuthorAriaLabel}),locale:p.locale,authorName:e,longFormat:!0}))(f.name),role:"status",className:b.button,children:[(0,a.jsx)(u.e,{color:"colorful",image:{src:f.imageUrl},name:f.name,size:20}),v?null:(0,a.jsx)("p",{className:b.editedDescription,children:f.description})]})}):null;var k}}}]);
//# sourceMappingURL=LazyLastEdited.1e47a005.chunk.js.map