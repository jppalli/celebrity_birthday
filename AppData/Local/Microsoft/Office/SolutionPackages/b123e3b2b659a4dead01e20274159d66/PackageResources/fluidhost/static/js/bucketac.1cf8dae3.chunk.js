"use strict";(self.webpackChunkfluidhost=self.webpackChunkfluidhost||[]).push([[25785],{1965:(e,t,o)=>{o.r(t),o.d(t,{BucketActionCreator:()=>f});var s=o(38752),n=o(36591),i=o(24723),r=o(52274),a=o(78332),c=o(64226),u=o(96891),l=o(27916),d=o(55491),m=o.n(d),h=o(98424);class f extends n.C{get name(){return u.M.BucketActionCreator}async fetchBucketsForPlan(e,t){(await this.logicModuleProviders.bucketModule()).fetchBucketsForPlanAsync(e,t).catch(async t=>{if(!(t.error instanceof r.U)){var o;const i=await this.logicModuleProviders.notificationModule();if((null===(o=t.error)||void 0===o?void 0:o.name)===l.Zg)i.showInfoInternal(c.fc.PlanConvertingInfo);else{var s,n;const o=null===(s=t.response)||void 0===s?void 0:s.status,r=null===(n=t.response)||void 0===n?void 0:n.statusText;i.showErrorInternal(c.fc.GetBucketsForPlanError,o,r,e,t.response)}}})}async fetchBucket(e,t){(await this.logicModuleProviders.bucketModule()).fetchBucketAsync(e,t).catch(e=>{})}async createBucket(e){const t=await this.logicModuleProviders.bucketModule(),o=await this.logicModuleProviders.notificationModule();t.createBucketAsync(e).then(e=>{o.enqueueHiddenToastNotification("SharedComponents_CreateBucketToastTitle",[],e.title)}).catch(t=>{if(!(t.error instanceof r.U)){var s;if((null===(s=t.error)||void 0===s?void 0:s.name)===l.Zg)o.showInfoInternal(c.fc.PlanConvertingInfo);else{var n,i;const s=null===(n=t.response)||void 0===n?void 0:n.status,r=null===(i=t.response)||void 0===i?void 0:i.statusText;o.showErrorInternal(c.fc.CreateBucketError,s,r,void 0,t.response,[e.title])}}})}async deleteBucket(e,t){var o;const s=this.entityStoreSet.bucketStore.getBucket(e),n=null!==(o=null===s||void 0===s?void 0:s.title)&&void 0!==o?o:"";let d=!1;const m=this.entityStoreSet.taskStore.getTasksForBucket(e),h=await this.logicModuleProviders.notificationModule();null!=m&&m.forEach(async e=>{if(e.taskCreationSourceType!==i.w3.Publication){this.loggers.usageLogger.logData(this.name,u.M.DeleteTask);(await this.logicModuleProviders.taskModule()).deleteTaskAsync(e.id,e.itemVersion).catch(t=>{if(!(t.error instanceof r.U)){var o;if((null===(o=t.error)||void 0===o?void 0:o.name)===l.Zg)h.showInfoInternal(c.fc.PlanConvertingInfo);else{var s,n;const o=null===(s=t.response)||void 0===s?void 0:s.status,i=null===(n=t.response)||void 0===n?void 0:n.statusText;h.showErrorInternal(c.fc.DeleteTaskError,o,i,e.id,t.response)}}})}else d=!0}),d&&this.loggers.usageLogger.logData(this.name,u.M.DeleteBucketWithPublishedTasks),this.loggers.usageLogger.logData(this.name,u.M.DeleteBucket);(await this.logicModuleProviders.bucketModule()).deleteBucketAsync(e,t).then(()=>{d?h.enqueueToastNotification("Toasts_DeleteBucketWithPublishedTasksToastTitle",[n]):h.enqueueHiddenToastNotification("SharedComponents_DeleteBucketToastTitle",[],n)}).catch(t=>{if(!(t.error instanceof r.U)){var o;if((null===(o=t.error)||void 0===o?void 0:o.name)===l.Zg)h.showInfoInternal(c.fc.PlanConvertingInfo);else{var s,n;const o=null===(s=t.response)||void 0===s?void 0:s.status,i=null===(n=t.response)||void 0===n?void 0:n.statusText;h.showErrorInternal(c.fc.DeleteBucketError,o,i,e,t.response)}}}),null==s&&d&&e.indexOf(a.iR)>-1&&h.enqueueToastNotification("Toasts_DeleteUncategorizedBucketWithPublishedTasksToastTitle",[])}async updateBucket(e,t){const o=e.getDiff(t);(await this.logicModuleProviders.bucketModule()).updateBucketAsync(e,t).then(()=>{this.announceBucketUpdates(o,e)}).catch(async t=>{if(!(t.error instanceof r.U)){var o;const i=await this.logicModuleProviders.notificationModule();if((null===(o=t.error)||void 0===o?void 0:o.name)===l.Zg)i.showInfoInternal(c.fc.PlanConvertingInfo);else{var s,n;const o=null===(s=t.response)||void 0===s?void 0:s.status,r=null===(n=t.response)||void 0===n?void 0:n.statusText;i.showErrorInternal(c.fc.UpdateBucketError,o,r,e.id,t.response)}}})}async announceBucketUpdates(e,t){const o=await this.logicModuleProviders.notificationModule();m()(e,(e,s)=>{switch(s){case"orderHint":const s=h.O.compareOrderHints(t.orderHint,e);s<0?o.enqueueHiddenToastNotification("SharedComponents_BucketMovedLeftToastTitle",[t.title]):s>0&&o.enqueueHiddenToastNotification("SharedComponents_BucketMovedRightToastTitle",[t.title]);break;case"title":o.enqueueHiddenToastNotification("SharedComponents_ChangeBucketTitleToastTitle",[e])}})}constructor(e,t,o,n){super(e,t,o,s.B.clientSettings,n)}}},27916:(e,t,o)=>{var s,n,i,r,a;o.d(t,{Zg:()=>c}),function(e){e[e.OK=0]="OK",e[e.ContainsDefaultReservedWords=1]="ContainsDefaultReservedWords",e[e.MissingPrefixSuffix=2]="MissingPrefixSuffix",e[e.ContainsCustomBlockedWords=3]="ContainsCustomBlockedWords",e[e.ContainsMSStandardBlockedWords=4]="ContainsMSStandardBlockedWords",e[e.MailNicknameNotOK=5]="MailNicknameNotOK",e[e.Unknown=6]="Unknown"}(s||(s={})),function(e){e.Forbidden="Forbidden",e.NotFound="NotFound",e.CreatePlanForGroupFailed="CreatePlanForGroupFailed",e.MaximumPlansOwnedByUserReached="MaximumPlansOwnedByUserReached",e.UnknownError="UnknownError"}(n||(n={})),function(e){e.Offline="Offline"}(i||(i={})),function(e){e.DynamicImportError="DynamicImportError"}(r||(r={})),function(e){e.MaximumProjectsOwnedByUser="MaximumProjectsOwnedByUser",e.MaximumProjectsSharedWithUser="MaximumProjectsSharedWithUser",e.MaximumTasksCreatedByUser="MaximumTasksCreatedByUser",e.MaximumTasksAssignedToUser="MaximumTasksAssignedToUser",e.MaximumTasksInProject="MaximumTasksInProject",e.MaximumActiveTasksInProject="MaximumActiveTasksInProject",e.MaximumBucketsInProject="MaximumBucketsInProject",e.MaximumUsersSharedWithProject="MaximumUsersSharedWithProject",e.MaximumReferencesOnTask=" MaximumReferencesOnTask",e.MaximumChecklistItemsOnTask="MaximumChecklistItemsOnTask",e.MaximumAssigneesInTasks="MaximumAssigneesInTasks",e.MaximumFavoritePlansForUser="MaximumFavoriteProjectsForUser",e.MaximumRecentPlansForUser="MaximumRecentProjectsForUser",e.MaximumContextsOnPlan="MaximumContextsOnPlan"}(a||(a={}));const c="ArchivedEntityCanNotBeUpdated"},36591:(e,t,o)=>{o.d(t,{C:()=>s});class s{constructor(e,t,o,s,n){this.dispatcher=e,this.logicModuleProviders=t,this.entityStoreSet=o,this.clientSettings=s,this.loggers=n}}}}]);
//# sourceMappingURL=bucketac.1cf8dae3.chunk.js.map