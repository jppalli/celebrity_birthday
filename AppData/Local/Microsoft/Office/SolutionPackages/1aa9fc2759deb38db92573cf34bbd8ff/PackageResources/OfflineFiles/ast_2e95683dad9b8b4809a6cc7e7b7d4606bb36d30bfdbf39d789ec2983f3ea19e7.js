/*!
 * SDK version: 1.10.8
 * Commit: 7c7f457d
 */
(()=>{"use strict";Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()||(Object.defineProperty=function(e,t,n){e[t]=n.value});var e;var t=function(){var e,t,n,a,r;return{getContainer:function(){return e||(e=r.querySelector("#ancookie-container")),e},getMessageElement:function(){return t||(t=r.querySelector("#ancookie-msg")),t},getSliderElement:function(){return n||(n=r.querySelector("#ancookie-slider")),n},getNav:function(){return a||(a=r.querySelector("#ancookie-nav div")),a},setParentNode:function(e){r=e}}}();function n(e){return e.offsetWidth}var a="http://ib.adnxs.com/seg?add=1&redir=",r="//ib.adnxs.com/getuidj",i=!1;function o(){i||(i=!0,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?(function(){if("true"!==document.cookie.replace(/(?:(?:^|.*;\s*)anCookiesetFooter\s*\=\s*([^;]*).*$)|^.*$/,"$1")){var a=function(){var e=document.createElement("div");e.id="cookiemsg-slider";return e.innerHTML='<style media="screen">.ancookie-header {\n  background: #d3d3d3;\n  text-overflow: ellipsis;\n  border-collapse: collapse;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  min-height: 38px;\n}\n\n.ancookie-header * {\n  font-size: 12px;\n  font-family: Verdana, Arial, Helvetica, sans-serif !important;\n  color: #555;\n  line-height: normal !important;\n  margin: 0;\n  padding: 0;\n}\n\n.ancookie-header p {\n  padding: 10px 10px 10px 38px;\n  text-align: left;\n}\n\n.ancookie-header a:link,\n.ancookie-header a:hover,\n.ancookie-header a:visited,\n.ancookie-header a:active {\n  color: #e6e6e6;\n  text-decoration: underline;\n  font-weight: 700;\n}\n\n.ancookie-header {\n  position: fixed;\n  opacity: 0.9;\n}\n\n.ancookie-header * {\n  font-size: 11px !important;\n}\n\n#ancookie-msg {\n  height: 34px;\n  opacity: 0;\n}\n\n@media only screen and (min-width: 1224px) {\n  .ancookie-header * {\n    font-size: 12px !important;\n  }\n\n  #ancookie-msg {\n    height: 20px;\n    opacity: 0;\n  }\n}\n\n@media only screen and (min-device-width: 768px) and (max-device-width: 1024px) {\n  .ancookie-header {\n    position: fixed;\n  }\n}\n\n.ancookie-header {\n  z-index: 9999;\n  opacity: 1;\n}\n\n#ancookie-slider {\n  overflow: hidden;\n  padding: 10px;\n  box-sizing: border-box;\n}\n\n#ancookie-slider p {\n  position: relative;\n  margin: 0;\n  padding: 0;\n  opacity: 0;\n  -webkit-column-gap: 20px;\n  -webkit-column-rule-width: 0;\n}\n\n#ancookie-nav {\n  position: absolute;\n  right: 0;\n  left: 0;\n  top: -11px;\n  z-index: 200;\n  text-align: center;\n}\n\n#ancookie-nav div {\n  display: inline-block;\n  padding: 0 10px;\n  background-color: #d3d3d3;\n  border-radius: 10px 10px 0 0;\n}\n\n#ancookie-nav span {\n  display: inline-block;\n  width: 6px;\n  height: 6px;\n  background-color: #e6e6e6;\n  border-radius: 50%;\n  margin: 1px 2px;\n  box-sizing: border-box;\n  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);\n  -webkit-opacity: 0.5;\n}\n\n#ancookie-nav span.selected {\n  background-color: #555;\n  -webkit-transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);\n  -webkit-opacity: 1;\n}\n\n#ancookie-close {\n  position: absolute;\n  right: 5px;\n  bottom: 20px;\n  cursor: pointer;\n  -webkit-transform: scale(1.5);\n  transform: scale(1.5);\n}\n</style><div class="ancookie-header" id="ancookie-container">\n  <div id="ancookie-nav">\n    <div></div>\n  </div>\n  <div id="ancookie-slider">\n    <p id="ancookie-msg">Your browser blocks 3rd party cookies by default. By clicking on page you allow our partner AppNexus to place cookies to show relevant ads. Read more or opt out of these cookies <a href="https://www.appnexus.com/en/company/platform-privacy-policy#choices" target="_blank" style="color: #4f4f4f;">here</a>. This notice appears once </p>\n    <div id="ancookie-close">&times</div>\n  </div>\n</div>\n',e}();document.body.appendChild(a),function(a){t.setParentNode(a),t.getContainer().querySelector("#ancookie-close").addEventListener("click",(function(){a.remove()}));var r,i=function(){var a=t.getSliderElement(),i=n(a),o=t.getMessageElement();o.setAttribute("style","-webkit-transition: none; -webkit-transform: translateX(0); -webkit-column-width: "+i+"px;");var s=t.getNav();s.innerHTML="",clearTimeout(r),r=setTimeout((function(){clearInterval(e),o.style.webkitTransition="opacity 0.3s ease-out",o.style.opacity=1;var r=a.scrollWidth+10;1<Math.round(r/i)&&(function(e){for(var t="<span class=selected></span>",n=1;n<2;n++)t+="<span></span>";e.innerHTML=t}(s),function(){var a,r=n(t.getSliderElement()),i={cycles:2,isFirstSlide:!0};e=setInterval((function(){i.cycles||clearInterval(e),a=i.isFirstSlide?1:0,i=function(e,n,a){var r=t.getMessageElement();r.style.webkitTransition="opacity 0.3s ease-out, -webkit-transform 1.2s cubic-bezier(0.23, 1, 0.32, 1)",r.style.webkitTransform="translateX("+e+"px)",0==e&&a.cycles--,a.isFirstSlide=!a.isFirstSlide;for(var i=t.getContainer().querySelectorAll("span"),o=0;o<i.length;o++)"selected"===i[o].className?i[o].removeAttribute("class"):i[o].setAttribute("class","selected");return a}(-1*a*r,0,i)}),3e3)}())}),300)};i(),window.addEventListener("resize",i)}(a),document.cookie="anCookiesetFooter=true; expires=Fri, 31 Dec 9999 23:59:59 GMT"}}(),function(e,t){var n;try{n=new XMLHttpRequest}catch(e){return}n.open("GET",e),n.withCredentials=!0,n.onreadystatechange=function(){if(4===n.readyState&&200===n.status)try{var e=JSON.parse(n.responseText);t(e)}catch(e){console.error(e)}},n.send()}(r,s)):console.log("Not safari, skipping link override"))}function s(e){console.log(e.uid),0===(parseInt(e.uid,10)||0)&&function(){console.log("Perfoming link override.");for(var e=0;e<document.links.length;e++){var t=document.links[e];t.href=a+encodeURIComponent(t.href)}}()}const d={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let c;const l=new Uint8Array(16);function u(){if(!c){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");c=crypto.getRandomValues.bind(crypto)}return c(l)}const p=[];for(let e=0;e<256;++e)p.push((e+256).toString(16).slice(1));const g=function(e,t,n){if(d.randomUUID&&!t&&!e)return d.randomUUID();const a=(e=e||{}).random||(e.rng||u)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase()}(a)};function m(e=""){const t=["adsdk.microsoft.com","adsdkprod.azureedge.net","adsdkpreprod.azureedge.net","cdn.adnxs-simple.com/v/app/","adsdk.bing.net"].some((t=>e.includes(t))),n=location.href.includes("pleaseTrackMeAdTelemetry");return t||n}function f(...e){return e.filter(Boolean).join(".")}function h(e){return JSON.stringify(e,((e,t)=>t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:t))}const y=()=>{var e,t;try{return null===(e=window.top)||void 0===e?void 0:e.location.href}catch(e){return(null===(t=window.location.ancestorOrigins)||void 0===t?void 0:t.length)>0?window.location.ancestorOrigins[window.location.ancestorOrigins.length-1]:window.location.href}},b=new class{constructor(){this.sessionData={},this.placementData={},this.sampleRate=1,this.skipLogging=!1,this.inited=!1,this.populateSessionData()}populateSessionData(){var e,t;const n={devicePixelRatio:(null===window||void 0===window?void 0:window.devicePixelRatio)||1,width:null===window||void 0===window?void 0:window.screen.width,height:null===window||void 0===window?void 0:window.screen.height},a=function(){var e;const t=(null===navigator||void 0===navigator?void 0:navigator.connection)||(null===navigator||void 0===navigator?void 0:navigator.mozConnection)||(null===navigator||void 0===navigator?void 0:navigator.webkitConnection)||null;return null!==(e=null==t?void 0:t.effectiveType)&&void 0!==e?e:"none"}();this.sessionData={sessionUuid:g(),ua:window.navigator.userAgent,url:y(),sdkType:"ast",sdkVersion:"1.10.8",screenWidth:Math.floor(null!==(e=n.width)&&void 0!==e?e:0),screenHeight:Math.floor(null!==(t=n.height)&&void 0!==t?t:0),dpr:n.devicePixelRatio,networkType:a,lang:navigator.language}}setSampleRate(e){this.sampleRate=function(){var e,t;return null!==(t=null===(e=y())||void 0===e?void 0:e.includes("allowAdTelemetry=1"))&&void 0!==t&&t}()?1:e,this.skipLogging=this.skipLoggingBySampleRate()}skipLoggingBySampleRate(){return Math.random()>this.sampleRate}addSessionData(e){this.sessionData=Object.assign(Object.assign({},this.sessionData),e)}addPlacementData(e,t){this.placementData[e]||(this.placementData[e]={}),this.placementData[e]=Object.assign(Object.assign({},this.placementData[e]),t)}getSessionData(){return this.sessionData}getPlacementData(e){var t;return e&&null!==(t=this.placementData[e])&&void 0!==t?t:{}}};let v={endpoint:"https://bat.bing.net/adsdk/logs"};class w{skipLogging(e){var t;if(null==e?void 0:e.forceLogging)return!1;if(null===(t=b.getSessionData().url)||void 0===t?void 0:t.includes("//localhost"))return!0;if(b.skipLogging){if(null==e?void 0:e.sampling){const t=Math.max(0,Math.min(1,e.sampling));return Math.random()>t}return!0}return!1}runOnlyIfLoggingEnabled(e){this.skipLogging()||e()}log(e,t,n){var a;const r=Object.assign(Object.assign(Object.assign(Object.assign({},b.getSessionData()),b.getPlacementData(t)),e),{timestamp:(new Date).getTime()});if(!b.inited)throw Error(`Telemetry is not inited, call initTelemetry first. Event with type=${r.type} is ignored.`);this.skipLogging(n)||null===(a=fetch(v.endpoint,{method:"POST",body:h(r),headers:{"Content-Type":"application/json"},credentials:"omit"}))||void 0===a||a.catch((e=>{}))}}const I=new class extends w{trackEvent(e,t){this.log("string"==typeof e?{type:e}:e,t)}trackCustomEvent(e,t,n){var{type:a}=e,r=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(e,["type"]);this.log({type:f("custom",a),data:r},t,n)}};var k;!function(e){e[e.Critical=1]="Critical",e[e.HighImpact=2]="HighImpact",e[e.Alert=3]="Alert"}(k||(k={}));const E="ast",_=new class extends w{logError(e,t,n,a){var r;const i=n;this.log({severity:e,type:f("error",t),message:null==n?void 0:n.message,data:n?{filename:null==i?void 0:i.filename,lineno:null==i?void 0:i.lineno,colno:null==i?void 0:i.colno,stack:(null==i?void 0:i.stack)||(null===(r=null==n?void 0:n.error)||void 0===r?void 0:r.stack),type:null==n?void 0:n.type,debugData:null==n?void 0:n.debugData}:void 0},a)}trackCriticalError(e,t,n){this.logError(k.Critical,e,t,n)}trackHighImpactError(e,t,n){this.logError(k.HighImpact,e,t,n)}trackAlertError(e,t,n){this.logError(k.Alert,e,t,n)}},S={sdkInit:"sdkInit",adServerRequest:"adServerRequest",adServerRequestFill:"adServerRequestFill",adServerRequestNoFill:"adServerRequestNoFill",impression:"impression",mrcView:"mrcView",adClick:"adClick"},C=e=>f("mediation",e);var T;C("optIn"),C("optOut"),C("adServerRequest"),C("adServerRequestFill"),C("adServerRequestNoFill"),C("impression"),C("mrcView"),C("adClick"),C("timeout"),function(e){e.resource="resource",e.measure="measure"}(T||(T={}));const A=new class extends w{constructor(){super(...arguments),this.resourcesToTrackFilters={sdksFiles:m},this.logResourcePerf=e=>{const{duration:t,name:n}=e;if(!n.includes(v.endpoint))for(const[e,a]of Object.entries(this.resourcesToTrackFilters))if(a(n)){this.log({type:f("perf",T.resource,e),data:{duration:Math.ceil(t),name:n}});break}}}disconnectPerfObserver(){this.observer&&this.observer.disconnect()}createStartMark(e){performance.mark(`${e}_start`)}trackMark(e,t,n){performance.mark(`${e}_end`),this.logMarks({measureName:e,startMarkName:`${e}_start`,endMarkName:`${e}_end`},t,n)}logMarks({measureName:e,startMarkName:t,endMarkName:n},a,r){const i=performance.measure(e,t,n);if(!i)return;const{duration:o}=i;this.log({type:f("perf",T.measure,e),data:Object.assign(Object.assign({},a),{duration:Math.ceil(o)})},r)}init(){this.connectPerfObserver(),this.sendResourcesTiming()}sendResourcesTiming(){performance.getEntriesByType&&window.performance.getEntriesByType("resource").forEach(this.logResourcePerf)}connectPerfObserver(){window.PerformanceObserver&&(this.observer=new PerformanceObserver((e=>{e.getEntries().forEach(this.logResourcePerf)})),this.observer.observe({entryTypes:["resource"]}))}addResourceToTrack(e,t){this.resourcesToTrackFilters[e]=t}},x=JSON.parse('{"H3":{"p":"utif_","C":"div_utif_"},"$9":{"Z":"WARN"},"Oi":{"M":"ast_debug","d2":"ast_dongle","c8":"ast_debug_member","AI":"ast_debug_bidder","Ux":"ast_test","Me":"ast_toolkit","eC":{"BASE":"ast_override_","DIV":"div","INDEX":"index","TAG_ID":"tag_id","INV_CODE":"inv_code","PUBLISHER_ID":"publisher_id"}},"ZJ":{"ZH":"undefined","qv":"object","uk":"number"},"Ss":{"IE":"msie","E":"opera"},"Sz":{"S":"loaded"},"sR":{"Yh":"/ut/v3","hK":"ib.adnxs.com","sp":"ib.adnxs-simple.com","VW":"/ut/v3/prebid","HM":"msft-ssp.adnxs.com"},"Me":{"Ve":"ad_type","D4":"banner","KB":"content"},"Ap":{"s6":"native"},"AD":{"Wy":"creative_id","Wo":"notify_url","JN":"no_ad_url","w$":"impression_urls","Q9":"trackers"},"AI":{"FF":"rtb","wm":"csm","A_":"ssm"},"Ve":{"D4":"banner","s6":"native","G_":"video"},"i$":{"Ji":"//acdn.adnxs-simple.com/video/astMediation/AstMediationManager.js","EJ":"//acdn.adnxs-simple.com/mediation/v2/mediation.js","Mf":"//acdn.adnxs-simple.com/ast/safeframe/1-0-0/html/safeframe-v2.html","dV":"https://acdn.adnxs.com/ast/topics/1-0-0/html/topics.html","CR":"https://acdn.adnxs.com/ast/ig/1-0-0/html/joinInterestGroup.html","xw":"https://acdn.adnxs.com/ast/getCookies/1-0-0/html/getCookies.html","no":"https://acdn.adnxs.com/dmp/async_usersync.html","tz":"acdn.adnxs-simple.com","_F":"https://adsdkprod.azureedge.net/assets/scripts/om/omid-verification-client-v1.js"},"qY":{"REQUEST":"adRequested","AVAILABLE":"adAvailable","LOADED":"adLoaded","LOADED_MEDIATED":"adLoadedMediated","AD_SLOT_RENDER_START":"adSlotRenderStart","NO_BID_MEDIATED":"adNoBidMediated","REQUEST_FAIL":"adRequestFailure","NO_BID":"adNoBid","DEFAULT":"adDefault","ERROR":"adError","COLLAPSE":"adCollapse","BAD_REQUEST":"adBadRequest","MRC_VIEW":"mrcView"},"eZ":{"FIRST_CONTENTFUL_PAINT":"first-contentful-paint","IFRAME_RENDER_START":"iframe-render-start"},"ZE":{"sO":"Array","An":"String","FH":"Function","pF":"Number","I6":"Object","HX":"Boolean"},"l2":{"D":3000,"X":{"gH":"expanded","g":"collapsed","AR":"focus-change","VD":"geom-update","dl":"cmp"}},"uK":{"CREATIVE":"creative"},"nP":{"G":{"W":"adresponse","D":"impression"}},"Gy":{"L":{"R5":"adResponseError","Ny":"endpointError","SI":"omidLoadError","NV":"loggingError","im":"perfObserverError","PL":"paintEventError"}},"gw":{"qY":{"AVAILABLE":"privateAuctionAvailable","SKIPPED":"privateAuctionSkipped","INITIATED":"privateAuctionInitiated","FAILURE":"privateAuctionFailure","AD_AVAILABLE":"privateAuctionAdAvailable","NO_AD_AVAILABLE":"privateAuctionNoAdAvailable","AD_SERVED":"privateAuctionAdServed"},"PI":{"Oz":"https://bat.bing.com/","m":"https://ib.adnxs.com/ps/ib/pa/kv","HI":"https://bat.bing.com/pa/ps/x/cdn/bidding/bidding-current.js","Eh":"https://bat.bing.com/pa/ps/x/cdn/scoring/scoring-current.js"}},"xH":{"JOIN_INTEREST_GROUPS":"ast_jig_iframe","TOPICS":"ast_topics_iframe","GET_COOKIES":"ast_get_cookies"}}'),q=x.AI.FF,R=x.Me.D4,$=x.Me.KB,M="https:"===window.document.location.protocol?"https:":"http:",D={},P={},O=function(e){{const t=e.tagId||e.adResponse.tag_id,n=e.targetId,a=e.adTrackingId,r=performance.now();let i;D[`${n}_${a}`]=r,I.trackCustomEvent({type:x.eZ.IFRAME_RENDER_START,targetId:n,batchId:e.batchId,performance:r,adTrackingId:a},t);const o=function(e){return`${x.H3.p+e.targetId}_${Ee()}`}(e),s=Oe();return i=null!==s.document.getElementById(o)?s.document.getElementById(o):s.document.createElement("iframe"),i.id=o,i.name=o,i.setAttribute("height",e.initialHeight),i.setAttribute("width",e.initialWidth),i.tabIndex="-1",i.width=`${e.initialWidth}px`,i.height=`${e.initialHeight}px`,i.border="0",i.hspace="0",i.vspace="0",i.marginWidth="0",i.marginHeight="0",i.style.border="0",i.scrolling="no",i.frameBorder="0",i}},N=function(e){return O(e)},L=function(e,t){{const n=O(e);if(e.alwaysUseXDomainIframe||e.enableSafeFrame){let a;ye(`targetId: ${e.targetId} is using safeFrame. Loading this ad into sandboxed iframe`),t.renderer_url?a="\x3c!-- renderer loading in SF--\x3e":e.isBannerMediation?a=apntag.getAdMarkup(e.targetId,e.uuid):e.isVideoMediation?a=e.adResponse.ad[q][R][$]:(a=j(e),a=a.replace("/&/g","&amp;").replace("/</g","&lt;").replace("/>/g","&gt;").replace('/"/g',"&quot;").replace("/'/g","&#39;"),a=`${a}`);const r=e.curWindow;delete e.curWindow;const i={targetId:e.targetId,ad:a,host:`${r.location.protocol}//${r.location.host}`,geom:e.geom,debug:Ce(),hasFocus:document.hasFocus(),hostSfSupport:e.safeframe,isMediated:e.isMediated,rendererUrl:t.renderer_url,enableMediationEvents:apntag.requests.enableMediationEvents,expandByCreative:Te(e.targetId),currentTag:e};e.safeframe.meta&&(i.meta=e.safeframe.meta),n.name=JSON.stringify(i),e.curWindow=r,e.safeframe.sandbox&&(n.sandbox="allow-forms allow-modals allow-orientation-lock allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-presentation allow-same-origin allow-scripts")}if(e.renderingManagement&&e.renderingManagement.sandboxAdIframe&&!n.hasAttribute("sandbox")){const t=e.renderingManagement.sandboxAttributes||[];t.length>0&&(Ie(`renderingManagement.sandboxAdIframe was enabled, enabling sandbox attributes: ${t.join(" ")}`),n.setAttribute("sandbox",t.join(" ")))}return e.customIframeProps&&Se(e.customIframeProps,((e,t)=>{n[t]=e})),n}},U=function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src=M+x.i$.Mf;else{let n="";n=j(t);try{e.contentWindow.contents=n}catch(t){e.src=`javascript:document.write('<script>document.domain="${document.domain}"<\/script>')`,e.contentWindow.contents=n}const a=document.getElementsByTagName("base");let r;a.length&&(r=a.target,a[0].target="_self"),e.src='javascript:window["contents"];',a.length&&(a[0].target=r)}},F=function(e,t){if(t.alwaysUseXDomainIframe||t.enableSafeFrame)e.src=M+x.i$.Mf;else{let n="";const a=function(e){{let t;try{t=e.contentWindow?e.contentWindow.document:e.contentDocument.document?e.contentDocument.document:e.contentDocument}catch(e){ve(`Error getting iframe document: ${e}`)}return t}}(e);n=j(t),a.open("text/html","replace"),a.write(n),a.close()}},B=function(e){const t=e.strategy,n=e.data,a=e.domElement,r=e.postMsgPayload,i=e.responseCb,o=Oe().document.createElement("iframe");return(r||i)&&function(e,t,n,a="https://acdn.adnxs.com"){{const r=new MessageChannel,i=r.port1;e.addEventListener("load",(()=>{const o=JSON.stringify({astMsg:{payload:t}});e.contentWindow.postMessage("port setup",a,[r.port2]),"function"==typeof n&&(i.onmessage=n),i.postMessage(o)}),{once:!0})}}(o,r,i),o.width=0,o.height=0,o.border="0",o.hspace="0",o.vspace="0",o.tabIndex="-1",o.marginWidth="0",o.marginHeight="0",o.style.border="0",o.style.display="none",o.scrolling="no",o.frameBorder="0","WithContent"===t&&function(e,t,n){z(e,n),e.contentWindow.document.open(),e.contentWindow.document.write(t),e.contentWindow.document.close()}(o,n,a),"WithAttributes"===t&&function(e,t,n){e.src=t.src,e.id=t.id,e.name=t.name,t.allow&&(e.allow=t.allow),t.sandbox&&(e.sandbox=t.sandbox),z(e,n)}(o,n,a),"WithContentAndAttributes"===t&&function(e,t,n){{const a=t.content,r=t.attributes;z(e,n),a&&(e.contentWindow.document.open(),e.contentWindow.document.write(a),e.contentWindow.document.close());for(const t in r)r.hasOwnProperty(t)&&e.setAttribute(t,r[t])}}(o,n,a),o};function z(e,t){const n=Oe();if(t){const a=t instanceof Element?t:n.document.getElementById(t);a&&a.appendChild(e)}else{const t=n.document.getElementsByTagName("body");t.length&&t[0].appendChild(e)}}function j(e){const t=e.targetId;let n="";return e.isMediated?(n=e.ad.mediatedContent,ye(`Invoking mediation for displaying banner ad: ${t}`)):e.adResponse&&1===e.adResponse.ads.length&&(n=Ne(e.adResponse.ads)[R][$]),function(e,t,n){const a=function(e,t){return t?"":`window.onerror = function(e) {\n        if(window.parent && window.parent.apntag) {\n          window.parent.apntag.recordErrorEvent(e,"${e}");\n          return true;\n        }\n      };`}(e,n),r=apntag.requests.tags[e],i={targetId:e,batchId:r?.batchId,adomain:r?.adResponse?.ads[0]?.adomain||"",buyerMemberId:r?.adResponse?.ads[0]?.buyer_member_id,msxCreativeId:r?.adResponse?.ads[0]?.msft?.msx_creative_id||"",crids:r?.adResponse?.ads[0]?.msft?.crids||"",auctionId:r?.adResponse?.auction_id||""},o=function(e,t,n,a,r,i,o){return`(${function(e,t,n,a,r,i,o){let s=!1;try{new PerformanceObserver((function(d){const c=!(!window.$sf||!window.$sf.ext);d.getEntries().forEach((d=>{if("first-contentful-paint"===d.name&&!s){s=!0;const l={targetId:e,eventName:"first-contentful-paint",duration:d.duration,startTime:d.startTime,loadTime:d.loadTime,safeframe:c,adomain:n,buyerMemberId:a,msxCreativeId:r,crids:i,auctionId:o,batchId:t};window.top&&(c?window.top.postMessage(l,"*"):window.top.postMessage(l))}}))})).observe({entryTypes:["paint"]})}catch(t){window.top&&window.top.postMessage({targetId:e,eventName:"perfObserverError",error:t.message},"*")}}.toString()})("${e}", ${t}, "${n}", ${a}, "${r}", "${i}", "${o}");`}(i.targetId,i.batchId,i.adomain,i.buyerMemberId,i.msxCreativeId,i.crids,i.auctionId);return`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head>\n    <script>inDapIF=true;\n    apntag_targetId = "${e}";\n    ${a}\n    ${o}\n    <\/script>\n    </head>\n    <body>\n    <script>\n    document.body.id = "${e}";\n    <\/script>\n    ${t}\n    </body></html>`}(t,n,e.alwaysUseXDomainIframe||e.enableSafeFrame)}const W=x.ZE.sO,V=x.ZE.An,H=x.ZE.FH,G=x.ZE.pF,J=x.ZE.I6,Y=Object.prototype.hasOwnProperty;let X=!1;const Z=x.Oi.M,K=x.ZJ.ZH,Q=x.AI.FF,ee=x.AI.wm,te=x.AI.A_,ne=x.uK;let ae=null;try{ae="object"==typeof console.info&&null!==console.info?console.info:console.info.bind(window.console)}catch(e){}const re=function(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent(`on${t}`,n)},ie=function(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.detachEvent&&e.detachEvent(`on${t}`,n)},oe=function(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`},se=function(e){return oe(e,J)},de=function(e){return oe(e,H)},ce=function(e){return oe(e,V)},le=function(e){return oe(e,W)},ue=function(e){return oe(e,G)};function pe(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}const ge=function(e){if(!e)return!0;if(le(e)||ce(e))return 0===e.length;for(const t in e)if(Y.call(e,t))return!1;return!0},me=function(){return window.console&&window.console.log},fe=function(){return(new Date).getTime()},he=function(){const e=new Date;return`[${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}:${e.getMilliseconds()}] `},ye=function(e,...t){if(Ce()&&me()){const n=he(),a=Ue()?"SAFEFRAME MESSAGE: ":"MESSAGE: ";console.log(n+a+e,...t)}},be=function(e,...t){if(Ce()&&me()){const n=he(),a=Ue()?"SAFEFRAME WARN: ":"WARN: ";console.warn?console.warn(n+a+e,...t):console.log(n+a+e,...t)}},ve=function(e,t,...n){if(Ce()&&me()){const a=t||"GENERAL_ERROR",r=he(),i=Ue()?"SAFEFRAME ":"";console.error?console.error(`${r+i+a}: ${e}`,...n):console.log(`${r+i+a}: ${e}`,...n)}},we=function(e){Ce()&&me()&&console.timeStamp&&console.timeStamp(e)},Ie=function(e,t){if(Ce()&&me()){const n=he();if(ae){t&&0!==t.length||(t="");const a=Ue()?"SAFEFRAME INFO: ":"INFO: ";ae(n+a+e+(""===t?"":" : params : "),t)}}},ke=function(e,t,n){{const a=e.document,r=a.createElement("script");r.type="text/javascript",r.async=!0,n&&"function"==typeof n&&(r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,n())}:r.onload=function(){n()}),r.src=t;let i=a.getElementsByTagName("head");return i=i.length?i:a.getElementsByTagName("body"),i.length&&(i=i[0],i.insertBefore(r,i.firstChild)),r}},Ee=function(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},_e=function(e,t,n){let a;if(n=`anx_${n}${(new Date).getTime()}`,e&&t){a=new Image,a.id=n,a.src=t,a.height=0,a.width=0,a.style.display="none";try{e.insertBefore(a,e.firstChild);const t=setTimeout((()=>{if(a.parentNode)try{a.parentNode.removeChild(a)}catch(e){}clearTimeout(t)}),5e3)}catch(e){ve(`Error logging impression for tag: ${n} :${e.message}`)}return a}},Se=function(e,t){if(ge(e))return;if(de(e.forEach))return e.forEach(t);let n=0;const a=e.length;if(a>0)for(;n<a;n++)t(e[n],n,e);else for(n in e)Y.call(e,n)&&t(e[n],n,e)},Ce=function(){return!(!Ue()&&(Oe().apntag=Oe().apntag||{},apntag&&!1===apntag.debug&&!1===X&&(apntag.debug="TRUE"===qe(Z).toUpperCase(),X=!0),!apntag||!apntag.debug))},Te=function(e){const t=apntag.requests.tags[e],n=t&&t.initCollapsed,a=n&&n.expandBy&&ze(ne).indexOf(n.expandBy)>=0;return n&&a},Ae=function(e,t){return!!e&&-1!==e.indexOf(t)},xe=function(){try{return window.top.location.search}catch(e){try{return window.location.search}catch(e){return""}}},qe=function(e,t){const n=new RegExp(`[\\?&]${e}=([^&#]*)`).exec(t||xe());return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},Re=function(e,t){return e.hasOwnProperty?e.hasOwnProperty(t):typeof e[t]!==K&&e.constructor.prototype[t]!==e[t]},$e=function(e){let t=[];return le(e)?t=e:ce(e)&&t.push(e),t},Me=function(e,t){if(ge(e))return[];if(de(e.map))return e.map(t);const n=[];return Se(e,((a,r)=>{n.push(t(a,r,e))})),n},De=function(e,t,n){return null==t?n:ce(t)?t:ue(t)?t.toString():void be(`Unsuported type for param: ${e} required type: String`)},Pe=function(e,t,n,a){return null==t?a:oe(t,n)?t:(be(`Unsuported type for param: ${e} required type: ${n}`),n===G&&(t=Number(t)),isNaN(t)?a:t)},Oe=function(){return window},Ne=function(e){if(e&&e.length>0){if(e[0][Q])return e[0][Q];if(e[0][ee])return e[0][ee];if(e[0][te])return e[0][te]}},Le=function(e){if(null===e||!(e instanceof Object))return e;const t=e instanceof Array?[]:{};for(const n in e)t[n]=Le(e[n]);return t};function Ue(){return!(typeof $sf===K||!$sf.ext||!$sf.ext.debug)}const Fe=function(e){return x.H3.C+e?.targetId},Be=function(){return`${Oe().document.location.protocol}//${x.i$.tz}`},ze=function(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},je=function(e,t){let n;if(de(e))return function(){return e&&(n=e.apply(t||this,arguments),e=null),n}},We=function(e,t){const n={};return["debug","displayed","initialHeight","initialWidth","invCode","member","showTagCalled","sizes","targetId","utCalled","utDivId","utiframeId","uuid","keywords"].forEach((t=>{n[t]=e[t]})),t&&(n.on=t.on,n.off=t.off,n.modifyTag=t.modifyTag,n.setKeywords=t.setKeywords),n},Ve=function(e){apntag.requests.tags=apntag.requests.tags||{};let t=!0;return typeof apntag.requests.tags[e]===K&&(t=!1),t},He=function(){apntag.requests.hasLeft=!1,Se(apntag.requests.tags,((e,t)=>{e.displayed||e.prebid||e.isMediated||(be(`${t} is not displayed.`,x.$9.Z),apntag.requests.hasLeft=!0)})),apntag.requests.hasLeft||ye("all Tags are displayed.")},Ge=function(){let e=0;return function(){return e++,e}}(),Je=function(e){let t,n;if(Array.isArray(e)&&e.length>0)if(Array.isArray(e[0])&&e[0].length>0){const a=e[0];2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]&&(n=a[0],t=a[1])}else 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(n=e[0],t=e[1]);return[n,t]},Ye=function(e){const t=[];let n={};if(le(e)&&2===e.length&&!le(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"==typeof e&&null!==e)for(let a=0;a<e.length;a++){const r=e[a];n={},n.width=parseInt(r[0],10),n.height=parseInt(r[1],10),t.push(n)}return t};function Xe(e){let t=["auto","auto"];if(e){const n=Je(e);0!==n[0]&&1!==n[0]&&0!==n[1]&&1!==n[1]&&2!==n[1]&&(t=n)}return t}function Ze({iframeAttributes:e,postMsgPayload:t,asyncIframeResponseCb:n,exitCb:a,iframeTimeoutMs:r=3e3}){{const i=B({strategy:"WithAttributes",data:e,postMsgPayload:t,responseCb:function(e){if(e.data){const t="string"==typeof e.data?JSON.parse(e.data):e.data;if(t&&t.astResponse){clearTimeout(o);const e=de(n)?n:a;if(t.astResponse.error){const n="Received error message from an AST iframe:";ve(n,null,t.astResponse.error),_.trackCriticalError(x.Gy.L.R5,new Error(`${n} ${t.astResponse.error}`)),e()}else t.astResponse.fnNotSupported?(be(t.astResponse.fnNotSupported),e()):e(t.astResponse.payload)}}}}),o=setTimeout((()=>{be(`${e.id} iframe took too long to return a response for some unknown reason.  Aborting the process and continuing auction.`),a()}),r);n&&i&&i.addEventListener("load",(()=>{clearTimeout(o),a()}),{once:!0})}}const Ke=(e,t)=>{const n=t||document.getElementById(e);let a={},r={};if(n){a={width:n.offsetWidth,height:n.offsetHeight};const e=n.getBoundingClientRect();r={left:e.left+window.scrollX,top:e.top+window.scrollY}}return{size:a,position:r}},Qe=function(e){return!(e&&apntag.requests.tags[e]&&!apntag.requests.tags[e].startRemove)},et=(e,t,n,a,r)=>{let i;return i=e||(n?n.message:"Unable to identify error AST encountered, please try to check browser console for any errors on the page."),{code:a,errMessage:i,exception:n,targetId:t,tagData:r}},tt=Array.prototype.slice,nt=Me(x.qY,(e=>e)),at=Me(x.gw.qY,(e=>e)),rt=nt.concat(at),it=function(){const e={},t={};return t.on=function(t,n,a){if(function(e){return function(e,t){if(ge(e))return!1;let n=e.length;for(;n--;)if(e[n]===t)return!0;return!1}(rt,e)}(t)){const r={};r[n]=a,e[t]=e[t]||[],e[t].push(r)}else ve(`Wrong event name : ${t} Valid event names :${rt}`)},t.emit=function(t){!function(t,n){const a=n[0],r=tt.call(n,1);ye(`Emitting event for: ${t} for ad tag: ${a}`),Se(e[t],(e=>{let t="";if(t=Re(e,"*")?e["*"]:e[a],null!=t&&"function"==typeof t)try{t.apply(null,r)}catch(e){ve(`events._dispatch: Error executing event handler function: ${e.message}`)}}))}(t,tt.call(arguments,1))},t.off=function(t,n,a){ge(e[t])||Se(e[t],(e=>{"*"===n&&null!==e[Object.keys(e)[0]]&&void 0!==e[Object.keys(e)[0]]?void 0!==a&&Object.values(e)!==a||(e[Object.keys(e)[0]]=null):null!==e[n]&&void 0!==e[n]&&(void 0!==a&&e[n]!==a||(e[n]=null))}))},t.get=function(){return e},t}(),ot="https:"===function(){try{return Oe().top.document.location.protocol}catch(e){return Oe().document.location.protocol}}()?"https:":"http:",st=[];let dt=!1;const ct=ot+x.i$.Ji,lt=ot+x.i$.EJ,ut=x.Me.Ve,pt=x.Ve.D4,gt=x.Ve.G_,mt=function(e){let t=!1;return e&&Se(e,(e=>{"csm"===e.content_source&&(t=!0)})),t},ft=function(e){let t=pt;return Array.isArray(e)&&e.length>0&&e[0][ut]===gt&&(t=gt),t},ht=function(e,t,n,a){e===gt&&(null!==t&&st.push(t),dt&&window.APNVideo_AstMediationManager?Se(st,(e=>{if(!e.called)try{window.APNVideo_AstMediationManager.selectAd(e.uuid,e,n,a),e.called=!0}catch(e){ve("Error invoking video mediation","mediationmanager.js",null,e)}})):(A.addResourceToTrack("AstMediationManager",(e=>e.includes(ct))),ke(window,ct,(()=>{ht(gt,null,n,a)})),dt=!0))},yt=function(e,t){let n={};return Se(e,(e=>{e.uuid===t.uuid&&e.mediationOptions&&(n=e.mediationOptions)})),n},bt=function(e){return e.isMediated||e.isRtbVideoFallback?e.adResponse.ad:e.adResponse.ads[0]},vt=function(e){return e.isMediated||e.isRtbVideoFallback||(e.adResponse.ad=e.adResponse.ads[0]),e},wt=function(e){const t=e.content_source,n=e.ad_type;if(t)return e[t][n]},It=function(e,t){{let n="<script>";return n+="var APN_macros = {};",n+=`APN_macros.uuid = "${e}";`,n+=`APN_macros.enableMediationEvents = ${apntag.requests.enableMediationEvents};`,n+=`APN_macros.expandByCreative = ${Te(e)};`,n+="APN_macros.ads = ",n+=`window.parent.apntag.getAdMarkup("${e}", "${t.uuid}");`,n+=";",n+=`document.write('<scr' + 'ipt src="${lt}"></scr' + 'ipt>');`,n+="<\/script>",n}};var kt,Et,_t,St;const Ct=(e,t)=>e.some((e=>e.brand.toLowerCase()===t)),Tt=null!==(Et=null===(kt=window.navigator)||void 0===kt?void 0:kt.userAgentData)&&void 0!==Et?Et:void 0,At=null!==(St=null===(_t=window.navigator)||void 0===_t?void 0:_t.userAgent)&&void 0!==St?St:"",xt=()=>Tt?Ct(Tt.brands,"google chrome"):At.includes("Chrome")||At.includes("CriOS"),qt=()=>At.includes("MSIE")||At.includes("Trident"),Rt=()=>Tt?Tt.brands&&Ct(Tt.brands,"microsoft edge"):At.includes("Edg"),$t=()=>At.includes("Trident/7.0"),Mt=()=>{if(Tt&&"platform"in Tt){const e=Tt.platform.toLowerCase();return/iphone/i.test(e)}return/iphone/i.test(At.toLowerCase())},Dt=()=>At.includes("Safari"),Pt=()=>Tt?!0===Tt.mobile:navigator.userAgent.includes("Mobile")||navigator.userAgent.includes("Android"),Ot=()=>At.toLowerCase().includes("firefox")||At.includes("FxiOS"),Nt=function(){let e,t={};return{getInstance:function(){return e||(e={add:function(e,n){t[e]=n},getIframe:function(e){return Re(t,e)?t[e]:null},getIframes:function(){return t},resetInstance:function(){t={}},removeIframe:function(e){return Re(t,e)?(delete t[e],t):null}}),e}}}(),Lt=function(){{let e={},t=[],n="";return{invokeNotify:r,loadRenderer:s,setRendererStatus:d,registerRenderer:c,clearState:a};function a(){e={},t=[]}function r(n,a,r){t.push(p(n,a,r)),Se(e,(e=>{e.addNotifyMessage(p(n,a,r)),e.status!==Bt&&u(e)}))}function i(e){return de(e)?{renderAd:e,notify:function(){}}:se(e)&&de(e.renderAd)?{renderAd:e.renderAd,notify:e.notify}:void 0}function o(e,t,n){Qe(t.targetId)?be(`Ad slot for this ad's renderer is not available.  It may have been removed by a removeTag call.  Bid: ${t}`):de(e)?e.call(apntag,t,n):se(e)&&(de(e.renderFn)?e.renderFn.call(apntag,t,n):ve("Error invoking rendererObj.renderAd(). renderAd must be a function"))}function s(t,n){!0===apntag.requests.loadOutstreamUpgradeUrl&&n.renderer_url?.includes("ANOutstreamVideo.js")&&(n.renderer_url="https://acdn.adnxs-simple.com/ast/test/video/ANOutstreamVideo_test.js");let a=n.renderer_id;if(t.enableSafeFrame&&(!window.$sf||!window.$sf.ext))return a=f(t,n),void(e[a]=m(n.renderer_url,a,t));const r=e[a];if(r){const n=e[a];r.status===zt?(b(t),o(n,t,l),t.displayed=!0):r.addTag(t)}else ke(window,n.renderer_url),e[a]=m(n.renderer_url,a,t)}function d(t,n){const a=e[t];a&&(a.status=n,u(a))}function c(t,a,r){if(n=r,a=i(a),t&&e[t]&&se(a)){const n=e[t];n.renderFn=a.renderAd,n.notifyFn=a.notify,n.status=zt,window.currentTag&&window.currentTag.enableSafeFrame&&y(window.currentTag,t,zt),u(n),Se(n.getTags(),(e=>{e.displayed||(b(e),o(n.renderFn,e,((e,t)=>{l(e,t,n)})),e.displayed=!0)}))}else ve("ast.js",null,"registerRenderer must be called with (id, cbFn)")}function l(e,t,n){n&&n.isSafeFrame?w(e,t,n):apntag.emitEvent(e,t)}function u(e){de(e.notifyFn)&&Se(e.getNotifyMessages(),(t=>{t.sent||(t.sent=!0,e.notifyFn(t.messageType,t.messagePayload,t.targetId))}))}function p(e,t,n){return{messageType:e,messagePayload:t,targetId:n,sent:!1}}function g(e,t,n){const a=[],r=[];this.getTags=function(){return a},this.addTag=function(e){a.push(e)},this.addNotifyMessage=function(e){r.push(e)},this.getNotifyMessages=function(){return r},this.url=e,this.id=t,this.status=Bt,this.renderFn=function(){},this.notifyFn=h,this.isSafeFrame=n.enableSafeFrame||!1,this.safeFrameSizes=n.sizes,this.addTag(n)}function m(e,t,n){const a=new g(e,t,n);return v(a),a}function f(e,t){return`${t.renderer_id}_${e.targetId}`}function h(e,t,n){n=n||this.getTags()[0].targetId,La(e,t,n)}function y(e,t,a){const r={name:"updateRenderStatus",targetId:e.targetId,rId:t,status:a};jt(window.parent,r,n)}function b(e){if(e&&e.isMediated)return;const t=bt(e);_e(window.document.body,t[Ut],t[Ft])}function v(e){Se(t,(t=>{e.addNotifyMessage(t)}))}function w(e,t,a){const r={name:"emitEvent",cmd:[e,t]};if(jt(window.parent,r,n),apntag.mockSfListner&&apntag.mockSfListner.handler){apntag.mockSfListner.handler(apntag.mockSfListner.adObj);const t={name:"resizeAd",targetId:e,cmd:Xe(a.safeFrameSizes)};jt(window.parent,t,n)}}}}(),Ut=x.AD.Wo,Ft=x.AD.Wy,Bt="loading",zt="loaded",jt=function(e,t,n){"string"!=typeof t&&(t=JSON.stringify(t)),e?e.postMessage(t,n):ye("Safeframe not yet rendered")};var Wt=window.document,Vt="compatMode",Ht="documentElement",Gt="nodeType",Jt="hidden",Yt="auto",Xt="contains",Zt=10,Kt="scroll",Qt="getAttribute",en="setAttribute",tn="removeAttribute",nn="clip",an=window.Number,rn=an&&an.MAX_VALUE,on=-1*rn,sn="compareDocumentPosition",dn="object",cn="string",ln="number",un="toLowerCase",pn="toFixed",gn="elementFromPoint",mn="length",fn="overflow",hn="document",yn="onscroll",bn=window.String,vn=window.Math,wn=Math.max,In=Math.min,kn=Math.round,En=window,_n=window.navigator,Sn=_n.userAgent||"",Cn=!(!window.ActiveXObject&&"ActiveXObject"in window)&&En&&"ActiveXObject"in En,Tn=null,An=!0,xn=!1,qn=function(){var e,t={};t.ie=t.opera=t.gecko=t.webkit=t.safari=t.chrome=t.air=t.ipod=t.ipad=t.iphone=t.android=t.webos=t.silk=t.nodejs=t.phantomjs=0,t.mobile=t.ios=t.caja=_n&&_n.cajaVersion;var n=Sn;return n&&(ia(/KHTML/,n)&&(t.webkit=1),ia(/IEMobile|XBLWP7/,n)&&(t.mobile="windows"),ia(/Fennec/,n)&&(t.mobile="gecko"),(e=ra(n,/AppleWebKit\/([^\s]*)/,1))&&(t.webkit=aa(e),t.safari=t.webkit,ia(/PhantomJS/,n)&&(e=ra(n,/PhantomJS\/([^\s]*)/,1))&&(t.phantomjs=aa(e)),ia(/ Mobile\//,n)||ia(/iPad|iPod|iPhone/,n)?(t.mobile="Apple",e=(e=ra(n,/OS ([^\s]*)/,1))&&aa(e.replace("_",".")),t.ios=e,t.ipad=t.ipod=t.iphone=0,(e=ra(n,/iPad|iPod|iPhone/,0))&&(t[e[un]()]=t.ios)):((e=ra(n,/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/,0))&&(t.mobile=e),ia(/webOS/,n)&&(t.mobile="WebOS",(e=ra(n,/webOS\/([^\s]*);/,1))&&(t.webos=aa(e))),ia(/ Android/,n)&&(t.mobile="Android",(e=ra(n,/Android ([^\s]*);/,1))&&(t.android=aa(e))),ia(/Silk/,n)&&(e=ra(n,/Silk\/([^\s]*)\)/,1))&&(t.silk=aa(e))),(e=n.match(/(Chrome|CrMo)\/([^\s]*)/))&&e[1]&&e[2]?(t.chrome=aa(e[2]),t.safari=0,"CrMo"===e[1]&&(t.mobile="chrome")):(e=ra(n,/AdobeAIR\/([^\s]*)/))&&(t.air=e[0])),t.webkit||((e=ra(n,/Opera[\s\/]([^\s]*)/,1))?(t.opera=aa(e),(e=ra(n,/Opera Mini[^;]*/,0))&&(t.mobile=e)):(e=ra(n,/MSIE\s([^;]*)/,1))?t.ie=aa(e):(e=ra(n,/Gecko\/([^\s]*)/))&&(t.gecko=1,(e=ra(n,/rv:([^\s\)]*)/,1))&&(t.gecko=aa(e))))),t}(),Rn=qn.ie||0,$n=qn.webkit||0,Mn=qn.gecko||0,Dn=qn.opera||0,Pn=0,On={},Nn=Kt+"Width",Ln=Kt+"Height",Un=Kt+"Top",Fn=Kt+"Left",Bn="offset",zn=Bn+"Parent",jn=Bn+"Top",Wn=Bn+"Left",Vn=Bn+"Width",Hn=Bn+"Height",Gn="clientWidth",Jn="clientHeight",Yn="innerWidth",Xn="innerHeight",Zn="parentNode";function Kn(e){var t,n,a,r,i,o,s,d,c,l={t:0,l:0,r:0,b:0,w:0,h:0,z:0},u="getBoundingClientRect",p=0,g=0,m=0,f=0,h=xn,y=la(e)||En[hn],b=y[Vt],v=y.documentMode||0;if(Qn(e))try{if(i=sa(e),t=ua(e),n=ya(e),l.l=e[Wn]||0,l.t=e[jn]||0,a=e,r=Tn,h=Mn||$n>519,e!==t&&u&&e[u])Cn&&(!v||v>0&&v<8||"BackCompat"===b)&&(s=t.clientLeft,d=t.clientTop),c=e[u](),l.t=c.top,l.l=c.left,(s||d)&&(l.l-=s,l.t-=d),(n.y||n.x)&&(!qn.ios||qn.ios>=4.2)&&(l.l+=n.x,l.t+=n.y);else{for(;(a=a[zn])&&Qn(a)&&r!==a;)s=a[Wn],d=a[jn],l.t+=d,l.l+=s,h&&(l=da(a,l)),r=a;if("fixed"!=i.position){for(a=e,r=Tn;(a=a[Zn])&&Qn(a)&&r!==a&&a!=t;)p=a[Un],g=a[Fn],Mn&&"visible"!=(o=sa(a))[fn]&&(l=da(a,l,o)),(p||g)&&(l.l-=g,l.t-=p),r=a;l.l+=n.x,l.t+=n.y}else l.l+=n.x,l.t+=n.y}e==t?(f=e[Jn],m=e[Gn]):(f=e[Hn],m=e[Vn]),l.b=l.t+f,l.r=l.l+m,l.w=wn(m,0),l.h=wn(f,0),l.z=i.zIndex}catch(e){l={t:0,l:0,r:0,b:0,w:0,h:0,z:0}}return l}function Qn(e){return 1===ea(e)}function ea(e){return ga(e&&e.nodeType,-1)}function ta(e){return(e=na(e))&&-1==e.search(/\D+/g)||e&&-1!=e.search(/px/gi)?An:void 0}function na(e){var t=typeof e;return t==cn?e:t!=ln||e?t==dn&&e&&e.join?e.join(""):!1===e?"false":!0===e?"true":e?bn(e):"":"0"}function aa(e){var t=0;return parseFloat(e.replace(/\./g,(function(){return 1==t++?"":"."})))}function ra(e,t,n){var a=e&&e.match(t);return n==Tn?a:a&&a[n]||Tn}function ia(e,t){return e.test(t)}function oa(e){var t,n=Tn,a="parentWindow",r="defaultView";try{e&&((n=e[a]||e[r]||Tn)||(n=(t=la(e))&&(t[a]||t[r])||Tn))}catch(e){n=Tn}return n}function sa(e){var t;if(oa(e).getComputedStyle)try{t=oa(e).getComputedStyle(e,Tn)}catch(e){t=Tn}else try{t=e.currentStyle}catch(e){t=Tn}return t}function da(e,t,n){var a=0,r=0;return(n=n||sa(e))&&(a=n.borderTopWidth,r=n.borderLeftWidth,a=ta(a)?ga(a,0):0,r=ta(r)?ga(r,0):0,Mn&&/^t(?:able|d|h|r|head|foot)$/i.test(fa(e))&&(a=r=0)),(t=t||{t:0,l:0}).t+=a,t.l+=r,t}function ca(e){return e&&(e.parentNode||e.parentElement)}function la(e){var t=Tn;try{e&&(t=9==ea(e)?e:e[hn]||e.ownerDocument||Tn)}catch(e){t=Tn}return t}function ua(e){var t=e&&la(e)||Wt,n=t[Vt],a=t[Ht];return n&&!Dn&&"CSS1Compat"!=n&&(a=t.body),a}function pa(e){var t,n,a,r,i=[-1,-1,-1,-1],o=[nn+"Top",nn+"Right",nn+"Bottom",nn+"Left"],s=0;if(!e)return i;if(Rn)for(;n=o[s];)ta(t=e[n])&&(t=ga(t,-1))>=0&&(i[s]=t),s++;else if((t=e[nn])&&-1!=t.search(/\d+/g))for(r=(i=(i=(t=t.replace(/\w+\(([^\)]*?)\)/g,"$1")).split(" "))[mn]<=1?i.split(","):i)[mn],s=0;r--;)ta(a=i[s])?i[s]=ga(a,-1):i[s]=-1,s++;return i}function ga(e,t,n,a){if(typeof e!=ln)try{e=e?parseFloat(e):an.NaN}catch(t){e=an.NaN}return a==Tn&&(a=rn),n==Tn&&(n=on),(isNaN(e)||e<n||e>a)&&t!=Tn?t:e}function ma(e,t){var n=xn,a=e&&e[Gt]||-1,r=t&&t[Gt]||-1;if(1==a&&-1!=r)if(e[Xt])if(Dn||1==r)n=e[Xt](t);else for(;t;){if(e===t){n=An;break}t=t.parentNode}else e[sn]&&(n=e===t||!!(16&e[sn](t)));return n}function fa(e){return e&&1==e[Gt]&&e.tagName[un]()||""}function ha(e,t,n){try{arguments[mn]>2?n===Tn?e[tn](t):(n=na(n),"class"==t[un]()?e.className=n:e[en](t,n)):n=na(e[Qt](t))}catch(e){n=""}return n}function ya(e){var t,n,a,r,i={x:0,y:0,w:0,h:0},o={scrollLeft:0,scrollTop:0,scrollWidth:0,scrollHeight:0},s=0,d=0;return n=(t=la(e)||Wt)[Ht]||o,r=t.body||o,(a=t.defaultView)&&(s=ga(a.pageXOffset,0),d=ga(a.pageYOffset,0)),i.x=wn(n.scrollLeft,r.scrollLeft,s),i.y=wn(n.scrollTop,r.scrollTop,d),i.w=wn(n.scrollWidth,r.scrollWidth,0),i.h=wn(n.scrollHeight,r.scrollHeight,0),i}function ba(e,t,n){var a,r,i,o,s,d,c,l,u,p,g,m,f={},h={};if(function(e,t,n){var a,r,i,o,s,d,c,l,u,p,g,m,f,h,y,b,v,w,I,k,E,_,S,C,T,A,x,q,R,$,M,D,P,O,N,L=e&&ca(e),U=ua(e),F=Kn(e),B=Kn(U),z=ya(U),j=function(e){var t=ua(e),n=0,a=0;return t&&(n=t.scrollWidth||0,a=t.scrollHeight||0),{t:0,l:0,b:a,r:n,w:n,h:a}}(e),W={t:0,l:0,r:0,b:0,w:0,h:0},V={t:0,l:0,r:0,b:0,xs:0,ys:0,xiv:0,yiv:0,iv:0,w:0,h:0},H=[],G=xn,J={left:Tn,right:Tn,top:Tn,bottom:Tn};if(t=t&&"object"==typeof t?t:{},L)for(a=B.t,r=B.l,i=B.r,o=B.b;(c=sa(L))&&("block"!=c.display&&"absolute"!=c.position&&"none"==c.float&&"none"==c.clear||(G=L==U,p=(O=Kn(L)).t,g=O.l,m=O.r,f=O.b,k=c[fn+"X"],E=c[fn+"Y"],_=c[fn],S=G?[-1,-1,-1,-1]:pa(c),N=xn,G?(h=z.w,v=z.h):(h=L[Nn],v=L[Ln]),y=L[Vn],w=L[Hn],b=L[Gn],I=L[Jn],!d&&y>b&&(d=y-b),!s&&w>I&&(s=w-I),G?(h>b&&((g=0)>r&&(r=g),(m=(En[Yn]||y)+z.x)<i&&(i=m)),v>I&&((p=0)>a&&(a=p),(f=(En[Xn]||w)+z.y)<o&&(o=f))):(d&&m-g==y&&(m-=d),s&&f-p==w&&(f-=s),k!=Jt&&k!=Kt&&k!=Yt&&_!=Jt&&_!=Kt&&_!=Yt||(g>r&&(r=g,J.left=L),m<i&&(i=m,J.right=L),(k==Kt||_==Kt||(k==Yt||_==Yt)&&h>b)&&(H.push(L),N=An)),S[3]>0&&(q=g+S[3])>r&&(r=q,J.left=L),S[1]>0&&(R=m+S[1])<i&&(i=R,J.right=L),E!=Jt&&E!=Kt&&E!=Yt&&_!=Jt&&_!=Kt&&_!=Yt||(p>a&&(a=p,J.top=L),f<o&&(o=f,J.bottom=L),N||(E==Kt||_==Kt||(E==Yt||_==Yt)&&v>I)&&(H.push(L),N=An)),S[0]>0&&(A=p+S[0])>a&&(a=A,J.top=L),S[2]>0&&(x=O.t+S[2])<o&&(o=x,J.bottom=L))),L!=U)&&(L=ca(L))&&fa(L););(W={t:wn(a,0),l:wn(r,0),r:wn(i,0),b:wn(o,0)}).w=wn(W.r-W.l,0),W.h=wn(W.b-W.t,0),g=F.l,m=F.r,p=F.t,l=m-g,u=(f=F.b)-p,q=W.l,R=W.r,A=W.t,x=W.b,T=(T=(T=In(f,x)-wn(p,A))<0?0:T)>u?u:T,C=(C=(C=In(m,R)-wn(g,q))<0?0:C)>l?l:C,V.t=A<p?x<=p?0:wn(p-A,0):0,V.b=x>f?f<=A?0:wn(x-f,0):0,V.l=q<g?R<=g||x<=p||f<=A?0:wn(g-q,0):0,V.r=R>m?m<=q||x<=p?0:wn(R-m,0):0,V.w=wn(V.r-V.l,0),V.h=wn(V.b-V.t,0),V.xiv=l>0?ga((C/l)[pn](2)):0,V.yiv=u>0?ga((T/u)[pn](2)):0,V.iv=l>0||u>0?ga((C*T/(l*u))[pn](2)):0,V.civ=0,n&&V.iv>.49&&(P=function(e){var t,n,a,r,i,o,s,d,c,l,u,p,g,m,f,h,y=Kn(e),b=la(e),v=ua(b),w=y.t,I=y.l,k=Zt,E=[],_=0;if(E.on=0,t=y.w,n=y.h,i=a=kn(t/k),o=r=kn(n/k),t<=1||n<=1||a<1||r<1)return E;if(f=(h=ya()).y,m=h.x,p=I+t,g=w+n,b&&v&&b[gn]){for(;i<t;){for(o=r;o<n;)d=w+o,(s=I+i)<=p&&d<=g&&E.push({x:s,y:d,on:0}),o+=r;i+=a}for(;c=E[_++];)s=wn(c.x-m,0),s=In(s,c.x),d=wn(c.y-f,0),d=In(d,c.y),0!=s?0!=d?(u=b[gn](s,d))&&u!==v&&u!==e&&!ma(u,e)&&((l=ha(u,"id"))||ha(u,"id",l=na(["geom_inter","_",(new Date).getTime(),"_",vn.round(100*vn.random()),"_",Pn++])),c.on=l,E.on++):(c.on="!y-offscreen",E.on++):(c.on="!x-offscreen",E.on++)}return E}(e),$=P[mn],(M=ga(P.on,0))&&(D=1-ga((M/$)[pn](2),0),V.civ=V.iv=D)),t.rect=F,t.clipRect=W,t.docRect=j,H[mn]?(t.isRoot=xn,t.canScroll=An,V.xs=!!s,V.ys=!!d):B.b>=W.b||B.r>=W.r?(t.isRoot=An,V.xs=!!(j.w>B.w&&s),V.ys=!!(j.h>B.h&&d),t.canScroll=j.w>B.w||j.h>B.h):V.ys=V.xs=t.isRoot=t.canScroll=xn,t.scrollNodes=H,t.clipNodes=J,t.expRect=V}(t,h,An),!n&&!h.isRoot&&h.canScroll&&((r=h.expRect).xs||r.ys)){wa(e),a=[],On[e]=a;for(var y=0;y<h.scrollNodes.length;y++){var b=h.scrollNodes[y],v={};v.node=b,v[yn]=function(t){va(0,e,b)},re(b,Kt,v[yn]),a.push(v)}}return f.win=(d=(s=En).innerHeight||0,c=s.innerWidth||0,u=d+(l=s.screenY||s.screenTop||0),g=c+(p=s.screenX||s.screenLeft||0),m=ua(o),d||c||!m||(d=m.clientHeight||0,g=p+(c=m.clientWidth||0),u=l+d),{t:l,l:p,b:u,r:g,w:c,h:d}),f.par=h.clipRect,r=h.expRect,(i=h.rect).iv=r.iv,i.xiv=r.xiv,i.yiv=r.yiv,delete r.iv,delete r.xiv,delete r.yiv,f.exp=r,f.self=i,f}function va(e,t,n){var a=On[t];if(a)for(var r=0;r<a.length;r++){var i=a[r];if(i.node===n){i.tID&&(clearTimeout(i.tID),delete i.tID),i.tID=setTimeout((function(){var e=Nt.getInstance().getIframe(t);e&&Oa(e.iframe,t,ba(t,e.iframe,An))}),xa);break}}}function wa(e){var t,n=On[e];if(n)for(;t=n.pop();)t.tID&&clearTimeout(t.tID),ie(t.node,Kt,t[yn]),t.node=t[yn]=Tn,On[e]=Tn;delete On[e]}let Ia,ka,Ea=!0;const _a=function(e,t){ka=e;const n=t;let a,r;function i(e){const t=Ea?"tcString":"consentData";Ea&&e&&e.gdprApplies&&(e.purpose&&e.purpose.consents&&!e.purpose.consents[1]?cr(!0):e.purpose&&e.purpose.consents&&!0===e.purpose.consents[1]&&cr(!1));const n={consent_string:e?e[t]:void 0,consent_required:e?e.gdprApplies:void 0};if(e&&e.addtlConsent&&"string"==typeof e.addtlConsent&&-1!==e.addtlConsent.indexOf("~")){const t=e.addtlConsent.substring(e.addtlConsent.indexOf("~")+1);n.addtl_consent=Me(t.split("."),(e=>parseInt(e,10)))}ka.gdpr_consent=n}function o(e){clearTimeout(a),i(Ia),je(s(e))}function s(e){e&&be(`${e} Resuming request without consent information.`),n()}if(ka.consentManagement&&(ka.consentManagement.disabled||ka.consentManagement.tcf&&ka.consentManagement.tcf.disabled))return Ie("TCF Consent module was disabled."),je(s());let d=1e4;if(ka.consentManagement&&ue(ka.consentManagement.timeout)&&(d=ka.consentManagement.timeout),Ia)return i(Ia),je(s());a=setTimeout((function(){o(Ia?"":"CMP workflow exceeded timeout threshold.")}),d),function(e,t){const n={};try{r=window.__tcfapi||window.top.__tcfapi,r||(r=window.__cmp||window.top.__cmp,r&&(Ea=!1))}catch(e){}if(de(r))r(Ea?"addEventListener":"getConsentData",null,e);else if(window.$sf&&window.$sf.ext&&"function"==typeof window.$sf.ext.cmp)Ea=!1,function(){const t=Object.keys(ka.tags),n=Ye(ka.tags[t[0]].sizes);window.$sf.ext.register(n[0].width,n[0].height,(function(t,n){"cmpReturn"===t&&e(n.vendorConsentData)})),window.$sf.ext.cmp("getConsentData")}();else{let a,r=window;for(;!a;){try{(r.frames.__tcfapiLocator||r.frames.__cmpLocator)&&(a=r),r.frames.__cmpLocator&&(Ea=!1)}catch(e){}if(r===window.top)break;r=r.parent}if(!a)return t("TCF CMP not found.");!function(t){const a=Ea?"__tcfapi":"__cmp";function r(e){const t=Ea?"__tcfapiReturn":"__cmpReturn",a="string"==typeof e.data&&e.data.includes(t)?JSON.parse(e.data):e.data;if(a[t]){const e=a[t];n[e.callId](e.returnValue,e.success),Ea||delete n[e.callId]}}function i(t,n){Ea||ie(window,"message",r,!1),e(t,n)}window[a]=function(e,r,i){const o=`${Math.random()}`,s={[`${a}Call`]:{command:e,parameter:r,callId:o}};n[o]=i,t.postMessage(s,"*")},re(window,"message",r,!1),Ea?window.__tcfapi("addEventListener",null,i):window.__cmp("getConsentData",null,i)}(a)}}((function(e,t){Ea?!t||"object"!=typeof e||null===e||!0===e.gdprApplies&&"string"!=typeof e.tcString?o(`TCF CMP returned unexpected consentObject during lookup process; returned value was (${e})`):"useractioncomplete"===e.eventStatus||"tcloaded"===e.eventStatus?(clearTimeout(a),Ia=e,i(Ia),je(s())):"cmpuishown"===e.eventStatus&&(Ia=e,e.tcString&&e.purposeOneTreatment&&(clearTimeout(a),i(Ia),je(s()))):"object"!=typeof e||null===e||"string"!=typeof e.consentData||""===e.consentData?o(`CMP returned unexpected consentObject during lookup process; returned value was (${e})`):(clearTimeout(a),Ia=e,i(Ia),je(s()))}),o)},Sa=x.ZE.pF;let Ca=0,Ta=0,Aa=0;const xa=500,qa=function(e,t){{const n=ba(e,t);return n.anx=function(){try{if(void 0!==window.top.location.href){let e=window,t=0,n=0;do{t+=e.pageYOffset||e.document.documentElement.scrollTop||e.document.body.scrollTop,n+=e.pageXOffset||e.document.documentElement.scrollLeft||e.document.body.scrollLeft,e=e.parent}while(e.parent!==window.top);return{scrollTop:t,scrollLeft:n}}}catch(e){}return{scrollTop:0,scrollLeft:0}}(),n}},Ra=function(e,t){{ye("Geom starting");const n=qa(e,t);return 0===Aa&&(Aa=setInterval(Na,1e3)),n}},$a=function(){Da(!0)},Ma=function(){Da(!1)};function Da(e){Pa(),Ta=window.setTimeout((()=>{!function(e){{const t=Nt.getInstance().getIframes();Se(t,((t,n)=>{const a=apntag.requests.tags[n];if(a.alwaysUseXDomainIframe||a.enableSafeFrame){const a=t.iframe.contentWindow,r={};r.targetId=n,r.value=e,r.status=x.l2.X.AR,jt(a,JSON.stringify(r),Be())}})),Pa()}}(e)}),2)}function Pa(){Ta&&(clearTimeout(Ta),Ta=0)}const Oa=function(e,t,n){{const a=e.contentWindow,r={};r.targetId=t,r.geom=n,r.status=x.l2.X.VD,jt(a,JSON.stringify(r),Be())}},Na=function(){Ca||(Ca=window.setTimeout(Ua,xa))},La=function(e,t,n){{const a=Nt.getInstance().getIframe(n).iframe.contentWindow;jt(a,{messageType:e,messagePayload:t,status:"notify",targetId:n},Be())}};function Ua(){{const e=Nt.getInstance().getIframes();Se(e,((e,t)=>{const n=apntag.requests.tags[t];(n.alwaysUseXDomainIframe||n.enableSafeFrame)&&function(e,t){Oa(e,t,qa(t,e))}(e.iframe,t)})),Ca&&(clearTimeout(Ca),Ca=0)}}const Fa=Oe();function Ba(e){B({strategy:"WithAttributes",data:{id:"itunes-launch-store",src:e.detail.url}})}const za=[],ja={},Wa={},Va=[],Ha={},Ga=je((function(){re(Fa,"focus",$a),re(Fa,"blur",Ma),re(Fa,"resize",Na),re(Fa,"scroll",Na),re(Fa,"pagehide",(()=>{try{ie(Fa,"focus",$a),ie(Fa,"blur",Ma),ie(Fa,"resize",Na),ie(Fa,"scroll",Na),function(){{const e=Nt.getInstance().getIframes();Se(e,((e,t)=>{const n=apntag.requests.tags[t];(n.alwaysUseXDomainIframe||n.enableSafeFrame)&&(clearInterval(Aa),Aa=0,wa(t))}))}}()}catch(e){}}))})),Ja=Oe();let Ya,Xa=!1,Za=!1,Ka=!1,Qa={},er={},tr=null,nr={};const ar=()=>er,rr=e=>{er=e},ir=()=>nr,or=e=>{nr=e},sr=()=>tr,dr=(e,t=!1)=>{e?(Za=t,Ya=Ae(e,"http")||Ae(e,"https")?e:`https://${e}`,ye(`Setting endpoint to: ${Ya}`)):ve("Cannot set an empty endpoint")},cr=e=>{Xa=e},lr=()=>Xa,ur=e=>Qa[e];let pr={};function gr(e,t){const n=function(e){let t={};return Se(apntag.requests.tags,(n=>{e===n.uuid&&(t=n)})),t.uuid||(t.notFound=!0),t}(e.uuid);if(n.notFound&&(this.tagNotFound=!0),this.targetId=n.targetId,this.uuid=e.uuid,e.nobid)return this.nobid=!0,this.tagId=e.tag_id,this.auctionId=e.auction_id,this;e.ads&&e.ads.length,this.tagId=e.tag_id,this.auctionId=e.auction_id;const a=t||e.ads[0],r=this;let i,o;var s;Se({adType:(s=a).ad_type,buyerMemberId:s.buyer_member_id,source:s.content_source,cpm:s.cpm,cpm_publisher_currency:s.cpm_publisher_currency,publisher_currency_code:s.publisher_currency_code,creativeId:s.creative_id,mediaSubtypeId:s.media_subtype_id,mediaTypeId:s.media_type_id,brandCategoryId:s.brand_category_id,dealId:s.deal_id,isExclusive:s.is_sov,isRoadblock:s.is_roadblock},((e,t)=>{r[t]=e}));const d=function(e){let t=[];return ge(e.sizes)||(t=Ye(e.sizes)),t}(n);le(d)&&d[0]&&(i=d[0].height,o=d[0].width),a.msft&&(this.msft=a.msft),a.dsa&&(this.dsa=a.dsa),a.feedback_url&&(this.feedbackUrl=a.feedback_url);const c=a.content_source?a.content_source:"rtb";if(a[c]&&a[c].banner)this.banner={width:a[c].banner.width,height:a[c].banner.height,content:a[c].banner.content,trackers:a[c].trackers},i=a[c].banner.height,o=a[c].banner.width;else if(a.rtb&&a.rtb.video){const e=a.rtb.video;this.video={duration:e.duration_ms,playbackMethods:e.playback_methods,frameworks:e.frameworks,content:e.content,trackers:a.rtb.trackers}}else if(a.rtb&&(a.rtb[x.Ap.s6]||a.rtb.openrtb_native)){const e=a.rtb.openrtb_native||a.rtb[x.Ap.s6];this[x.Ap.s6]=function(e){if("string"==typeof e)try{return{ortb:JSON.parse(e)}}catch(t){ve("Saw issue trying to parse the native ortb response data.  Native object provided by impbus",e)}return{type:e.type,title:e.title,body:e.desc,desc2:e.desc2,fullText:e.full_text,icon:e.icon,image:e.main_img,cta:e.ctatext,sponsoredBy:e.sponsored,impressionTrackers:e.impression_trackers,clickTrackers:e.link&&e.link.click_trackers,clickUrl:e.link&&e.link.url,clickFallbackUrl:e.link&&e.link.fallback_url,javascriptTrackers:e.javascript_trackers,video:e.video,privacyLink:e.privacy_link,rating:e.rating,displayUrl:e.displayurl,likes:e.likes,downloads:e.downloads,price:e.price,salePrice:e.saleprice,phone:e.phone,address:e.address,custom:e.custom,customTitle1:e.title1,customTitle2:e.title2,customTitle3:e.title3,customTitle4:e.title4,customTitle5:e.title5,customBody1:e.body1,customBody2:e.body2,customBody3:e.body3,customBody4:e.body4,customBody5:e.body5,customCta1:e.ctatext1,customCta2:e.ctatext2,customCta3:e.ctatext3,customCta4:e.ctatext4,customCta5:e.ctatext5,customDisplayUrl1:e.displayurl1,customDisplayUrl2:e.displayurl2,customDisplayUrl3:e.displayurl3,customDisplayUrl4:e.displayurl4,customDisplayUrl5:e.displayurl5,customSocialUrl1:e.socialurl1,customSocialUrl2:e.socialurl2,customSocialUrl3:e.socialurl3,customSocialUrl4:e.socialurl4,customSocialUrl5:e.socialurl5,customImage1:e.image1,customImage2:e.image2,customImage3:e.image3,customImage4:e.image4,customImage5:e.image5,customIcon1:e.icon1,customIcon2:e.icon2,customIcon3:e.icon3,customIcon4:e.icon4,customIcon5:e.icon5,customSocialIcon1:e.socialicon1,customSocialIcon2:e.socialicon2,customSocialIcon3:e.socialicon3,customSocialIcon4:e.socialicon4,customSocialIcon5:e.socialicon5}}(e),n.trackingManagement&&n.trackingManagement.native&&n.trackingManagement.native.loadViewScriptAt===x.nP.G.D||(Ie("Loading native viewability script during adResponse phase"),fr(a,this.targetId))}this.height=i,this.width=o,this.bidderId=a.bidder_id,this.adomain=a.adomain,a.renderer_id&&(this.renderer_id=a.renderer_id),a.renderer_url&&(this.renderer_url=a.renderer_url)}const mr=function(e,t){if(!e||!e.uuid)return{};if(pr[e.uuid]&&!t)return pr[e.uuid];try{const n=function(e,t){return new gr(e,t)}(e,t);return t||(pr[e.uuid]=n),n}catch(e){ve(`adManager.getAdObj: Error trying to instantiate new adObj: ${e.message}`)}};const fr=function(e,t,n){if(e.viewability&&e.viewability.config){let a=e.viewability.config;"string"==typeof t&&(a=a.replace("%native_dom_id%",t),Ce()&&null===document.getElementById(t)&&be(`No element found in the page for the native creative ${t}, see https://docs.xandr.com/bundle/seller-tag/page/seller-tag/define-tag.html 'targetId'`));const r=/https?:\/\/.*?\/trk.js/;sr()&&(a=a.replace(r,sr())),B({strategy:"WithContentAndAttributes",data:{content:a,attributes:{"data-anxtracker":t||""}},domElement:n})}},hr=function(e){apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.native||(apntag.requests.trackingManagement.native={loadViewScriptAt:x.nP.G.W}),apntag.requests.trackingManagement.mobileOmidImpTracking="boolean"!=typeof e.trackingManagement?.mobileOmidImpTracking||e.trackingManagement.mobileOmidImpTracking,apntag.requests.trackingManagement.mobileOmidImpTracking&&yr()},yr=function(){if(window.om||window.OmidVerificationClient){const e="omid verification client already loaded";ye(e),I.trackCustomEvent({type:"omidAlreadyLoaded",msg:e})}else apntag.requests.trackingManagement.scriptLoadPromise=function(e,t){return new Promise(((n,a)=>{try{ke(e,t,(()=>n()))}catch(e){a(e)}}))}(window,x.i$._F)};const br=x.ZJ.ZH,vr=x.nP.G.W;function wr(e,t){let n=!1,a=e;if(2===arguments.length?(a=Ja.apntag.requests.tags[t],(e.sizes&&a.sizeMapping||e.sizeMapping&&!a.sizeMapping)&&(n=!0)):(t=e.targetId,e.sizes&&e.sizeMapping&&(n=!0)),n)return ve(`sizes and sizeMapping both cannot be defined for targetId: ${t}`),!1;if(e.sizeMapping){const t=function(e){if(t=e.sizeMapping,!(le(t)&&t.length>0||(Ie("No size mapping defined"),0)))return e.sizes;var t;const n=function(e){const t=Oe(),n=t.document;return t.innerWidth?t.innerWidth:n.body.clientWidth?n.body.clientWidth:n.documentElement.clientWidth?n.documentElement.clientWidth:0}();let a;if(!n){a=e.sizeMapping[0];for(let t=0;t<e.sizeMapping.length;t++)parseInt(e.sizeMapping[t].minWidth,10)>parseInt(a.minWidth,10)&&(a=e.sizeMapping[t]);return a.sizes?a.sizes:e.sizes}let r="";const i=e.sizeMapping.slice().sort(((e,t)=>e.minWidth-t.minWidth));for(let e=0;e<i.length;e++)n>=i[e].minWidth&&(a=i[e]);return a&&a.sizes?(r=a.sizes,ye(`tag : ${e.targetId} resized based on device width to : ${r}`)):ye(`tag : ${e.targetId} not mapped to any sizes for device width. This request will be suppressed.`),r}(e);if(""===t)return"";e.sizes=t}return!0}function Ir(){{const e=document.createElement("iframe");return e.id="appnexus-debug-console-loader",e.height="100%",e.width="100%",e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.frameBorder="0",e}}function kr(e){try{return Object.keys(apntag.requests.tags).filter((t=>apntag.requests.tags[t].uuid===e.uuid))[0]}catch(e){return""}}const Er='<span style="color: #ccc">nobid</span>';function _r(e,t){if(e.nobid)return Er;const n=e.ads&&e.ads[0][t];return n||0===n?n:""}const Sr=(e,t)=>t.bidder_id&&101===t.bidder_id&&Pt()&&e.trackingManagement&&e.trackingManagement.mobileOmidImpTracking,Cr=(e,t,n)=>{const{tagId:a,targetId:r}=e;var i;window.om||window.OmidVerificationClient?Tr(e,t,n):(i=apntag.requests.trackingManagement.scriptLoadPromise,1e3,new Promise(((e,t)=>{const n=new Promise(((e,t)=>{setTimeout((()=>{t(new Error("Timeout exceeded while waiting for script load"))}),1e3)}));Promise.race([i,n]).then(e).catch(t)}))).then((()=>((e,t,n)=>{ye("Successfully loaded the OMID Verification Client script."),Tr(e,t,n)})(e,t,n))).catch((()=>((e,t,n,a)=>{const r="Script loading failed or timeout exceeded";ye(r),_.trackCriticalError(x.Gy.L.SI,new Error(r)),Jr(n,a,e)})(a,0,t,n)))};function Tr(e,t,n){Ie("Buyer was found in list and could detect OM SDK. Setting up imp by view logic."),e.verificationClient=new(window.OmidVerificationClient[Object.keys(window.OmidVerificationClient)[0]]),e.verificationClient&&e.verificationClient.registerSessionObserver((a=>{const{tagId:r,targetId:i}=e;if("sessionError"===a.type){const e=`OMSDK session error for ad target: ${i}, loading impressions the normal way.`;be(e),Jr(t,n,r),I.trackCustomEvent({type:"omidSessionEvent",sessionMsg:e,targetId:i},r)}else"sessionStart"===a.type&&(e.verificationClient.addEventListener("geometryChange",function(e,t,n){return function(a){if((a&&a.data&&a.data.adView&&a.data.adView.percentageInView)>0&&!e.impressionUrlLoaded){const{tagId:a,targetId:r}=e;Jr(t,n,a),ye(`OMSDK impression event detected for ad tag: ${r}`),I.trackCustomEvent({type:"omidImpression",targetId:r},a),e.impressionUrlLoaded=!0}}}(e,t,n)),I.trackCustomEvent({type:"omidSessionStart",targetId:i},r))}),"appnexus.com-omid")}class Ar{constructor(e){this.options=e,this.lastClickTime=0,this.pendingClick=!1,this.clickStartTime=0,this.CLICK_THRESHOLD_MS=2e3,this.handleVisibilityChange=()=>{if(!document.hidden&&this.lastClickTime>0){const e=Date.now()-this.lastClickTime;this.options.onReturn(e),this.lastClickTime=0}document.hidden&&this.pendingClick&&Date.now()-this.clickStartTime<this.CLICK_THRESHOLD_MS&&(this.lastClickTime=Date.now(),this.pendingClick=!1)},document.addEventListener("visibilitychange",this.handleVisibilityChange)}recordAdClick(){this.pendingClick=!0,this.clickStartTime=Date.now()}dispose(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)}}const xr=new WeakMap;function qr(e){return e?xr.get(e):void 0}function Rr({targetId:e,wcElement:t}){if(b.skipLogging)return;const n=t||document.getElementById(e);if(!n)return ye(`Ad Element not found for quick back signal: ${e}`),void I.trackCustomEvent({type:"qbsElementNotFound",targetId:e});let a=xr.get(n);if(a)return;const r=t?t.id:e;I.trackCustomEvent({type:"qbsInitialize",targetId:r}),a=new Ar({adElement:n,onReturn:e=>{const t=apntag.requests?.tags[r],n=t?mr(t.adResponse):null,a=n?.tagId;ye(`Quick back signal for ${r} with dwellTime: ${e}`),I.trackCustomEvent({type:"dwellTime",targetId:r,dwellTime:e},a)}}),xr.set(n,a)}const $r=x.Ve.D4,Mr=x.Ve.s6,Dr=x.Me.Ve,Pr=x.Ve.G_,Or=x.Me.D4,Nr=x.Me.KB,Lr=x.AD.Wy,Ur=x.uK,Fr=x.AD.w$,Br=x.AD.JN,zr=x.ZJ.qv,jr=x.AI.FF,Wr=x.AD.Q9,Vr=x.ZJ.ZH;function Hr(e,t,n,a,r){let i,o,s;if((!e.privateAuctionResults||!e.privateAuctionResults.urnUrl)&&e.adResponse&&(function(e){if(e.adResponse&&e.adResponse.ads){const t=Ne(e.adResponse.ads);if(t.banner){const n=e.initCollapsed,a=n&&n.expandBy&&ze(Ur).indexOf(n.expandBy)>=0;n&&!a&&be(`TagID ${e.tagId} initCollapsed is set but expandBy is not recognized, initial size will not be collapsed`),e.initialHeight=a?0:t.banner.height,e.initialWidth=a?0:t.banner.width}}}(e),s=bt(e),typeof s===Vr||null===s||typeof s.error!==Vr))return d=e.adResponse,void _e(window.document.body,d[Br],d.uuid);var d;const c=e.privateAuctionResults&&e.privateAuctionResults.urnUrl?e.privateAuctionResults:e.adResponse;if(c&&e.showTagCalled){I.trackCustomEvent({type:"adRenderingData",targetId:e.targetId,sizes:e.sizes,isWebComponent:!!e.wcElement,isSafeFrame:!(!e.enableSafeFrame&&!e.alwaysUseXDomainIframe),isFledge:!!c.urnUrl,batchId:r},e.tagId);{if(c.urnUrl){const[t,a]=Je(e.sizes);let r;e.initialHeight=a,e.initialWidth=t,Re(n,e.targetId)&&(r=n[e.targetId]),o=Gr(e),i=N(e);const s=Nt.getInstance(),d={};if(d.iframe=i,d.originalWidth=e.initialWidth,d.originalHeight=e.initialHeight,s.add(e.targetId,d),n[e.targetId]=i,Qe(e.targetId)||(typeof r!==Vr&&window.document.getElementById(r.id)?o.replaceChild(i,r):o.appendChild(i)),e.displayed=!0,window.document.body)try{const t=e.curWindow||window,n=e.wcElement?e.wcElement:t.document.getElementById(e.targetId);n?(e.utDivId=o.id,e.utiframeId=i.id,i.src=c.urnUrl,n.appendChild(o),o.style.display="inline",ye(`The ${e.targetId} ad is loaded.`),we(`The ${e.targetId} ad is loaded.`)):(be(`No div element found for display ad. This ad will not show. Div id: ${e.targetId}`),e.displayed=!1)}catch(t){ve("Error rendering ad: ",null,t),e.displayed=!1}else ve("Error rendering ad: window.document.body is undefined"),e.displayed=!1;return e.targetId}const r=function(e,t){if(t.renderer_url&&t.renderer_id){if(e.usesRenderer=!0,2===t.renderer_id&&e.enableSafeFrame&&(e.safeframe.expansionByPush=!0,e.customIframeProps={style:"overflow:hidden",allow:"autoplay"}),"native"===t.ad_type&&e.trackingManagement&&e.trackingManagement.native&&e.trackingManagement.native.loadViewScriptAt===x.nP.G.D&&(Ie("Loading native viewability script during native render sequence"),fr(t,e.targetId)),!e.enableSafeFrame)return function(e,t){{const n=wt(t);if(typeof n===Vr)return ve("No Content Source Found"),void(e.displayed=!1);t[t.ad_type]=n,vt(e),Lt.loadRenderer(e,t)}}(e,t),!0;Lt.loadRenderer(e,t)}}(e,s);if(r)return e.targetId;try{if(s[Dr]===Mr&&!e.usesRenderer)return function(e){ye(`Render for the following ad should be handled outside of ast.js :${e.targetId}`),e.displayed=!0;const t=mr(e.adResponse);it.emit(x.qY.LOADED,e.targetId,t),we(`The ${e.targetId} ad is loaded.`)}(e),e.targetId;if(s[Dr]===Pr&&!e.usesRenderer)return be("Response has no renderer for video"),e.displayed=!1,e.targetId;if(s[Dr]===$r||e.usesRenderer){if(s.content_source===jr&&!e.usesRenderer){const t=s[jr][Or];if(ge(t)||typeof t!==zr)return ve("Response has no banner object"),e.displayed=!1,e.targetId;if(!Re(t,Nr))return ve("Response has no banner content"),e.displayed=!1,e.targetId;if(!Re(t,"width"))return ve("Response has no banner width"),e.displayed=!1,e.targetId;if(!Re(t,"height"))return ve("Response has no banner height"),e.displayed=!1,e.targetId}let r,d;if(Re(n,e.targetId)&&(r=n[e.targetId]),e.alwaysUseXDomainIframe||e.enableSafeFrame){a(),d=e.wcElement?e.wcElement:window.document.getElementById(e.targetId);const t=d.style.height,n=d.style.width;d.style.height=e.initialHeight,d.style.width=e.initialWidth,d.style.height=t,d.style.width=n}const c=Le(t);Re(e.safeframe,"expansionByPush")&&(c.expansionByPush=e.safeframe.expansionByPush),Re(e.safeframe,"expansionByOverlay")&&(c.expansionByOverlay=e.safeframe.expansionByOverlay),Re(e.safeframe,"sandbox")&&(c.sandbox=e.safeframe.sandbox),Re(e.safeframe,"meta")&&(c.meta=e.safeframe.meta),e.safeframe=c,o=Gr(e),(e.alwaysUseXDomainIframe||e.enableSafeFrame)&&(o.style.height=`${e.initialHeight}px`,o.style.width=`${e.initialWidth}px`,o.style.display="block",d.appendChild(o),e.geom=Ra(e.targetId,o)),i=L(e,s);const l=Nt.getInstance(),u={};let p=i;if(e.renderingManagement&&e.renderingManagement.insertWrapperDiv){const e=document.createElement("div");e.append(i),p=e,Ie("renderingManagement.insertWrapperDiv was enabled, creating extra div element around iframe container")}if(u.iframe=i,u.originalWidth=e.initialWidth,u.originalHeight=e.initialHeight,l.add(e.targetId,u),n[e.targetId]=i,typeof r!==Vr&&window.document.getElementById(r.id)?o.replaceChild(p,r):o.appendChild(p),e.displayed=!0,window.document.body)try{!function(e,t,n){{const a=Dt()?"webkit":xt()?"chrome":Rt()?"edge":Ot()?"mozilla":qt()||$t()?"msie":"",r=e.curWindow||window,i=e.wcElement?e.wcElement:r.document.getElementById(e.targetId);if(i){e.alwaysUseXDomainIframe||e.enableSafeFrame||(i.appendChild(t),t.style.display="inline"),e.utDivId=t.id,e.utiframeId=n.id,performance.now();let r="";e.adResponse&&1===e.adResponse.ads.length&&(r=e.adResponse.ads[0]?.creative_id),Qe(e.targetId)||(a===x.Ss.IE||a===x.Ss.E?U(n,e):F(n,e));const o=e.adResponse.ads?e.adResponse.ads[0]:e.adResponse.ad,s=e.tagId||e.adResponse.tag_id;if(void 0===o)return be("No ad found in response, nothing to display."),void(e.displayed=!1);if(e.alwaysUseXDomainIframe||e.enableSafeFrame||n.addEventListener("load",(()=>{n.contentWindow.addEventListener("click",(()=>{const t=qr(e.wcElement||Ja.document.getElementById(e.targetId));t?.recordAdClick(),I.trackEvent({type:S.adClick},s)}),!0)}),{once:!0}),!e.isMediated&&!e.usesRenderer||e.adResponse.ad&&"rtb"===e.adResponse.ad.content_source)if(Sr(e,o)){const{tagId:t,targetId:a}=e;I.trackCustomEvent({type:"omidTrackingEligible",targetId:a},t),Cr(e,o,n)}else Jr(o,n,e);const d=wt(o),c=Number(i.style.width.replace(/[^\d\.\-]/g,""));!isNaN(c)&&c>d.width&&("center"===e.promoAlignment?i.setAttribute("align","center"):i.setAttribute("align","left")),ye(`The ${e.targetId} ad is loaded.`),we(`The ${e.targetId} ad is loaded.`);const l=mr(e.adResponse);e.usesRenderer||apntag.requests.enableMediationEvents&&e.isMediated||it.emit(x.qY.LOADED,e.targetId,l)}else be(`No div element found for display ad. This ad will not show. Div id: ${e.targetId}`),e.displayed=!1}}(e,o,i)}catch(t){ve("Error rendering ad: ",null,t),e.displayed=!1}else ve("Error rendering ad: window.document.body is undefined"),e.displayed=!1}else ve("Error rendering ad: unknown type"),e.displayed=!1;return e.targetId}catch(t){ve(`AST encountered an error while attempting to render tag ${e}.  \nError: ${t}`)}}}}function Gr(e){{let t;const n=Fe(e),a=e.curWindow||window,r=e.wcElement;try{t=r&&r.querySelector(`#${n}`)?r.querySelector(`#${n}`):a.document.getElementById(n)?a.document.getElementById(n):a.document.createElement("div")}catch(t){return ve("Error creating Ad Div: ",null,t),void(e.displayed=!1)}return t.style.display="none",t.id=n,t}}const Jr=(e,t,n)=>{{const a=e[jr][Wr][0][Fr],{adResponse:r,targetId:i,tagId:o,enableSafeFrame:s,alwaysUseXDomainIframe:d}=n,c=o||r&&r.tag_id;I.trackEvent({type:S.impression,data:{enableSafeFrame:!(!s&&!d),batchId:n.batchId,performance:performance.now(),adTrackingId:n.adTrackingId}},c);for(let n=0;n<a.length;n++)_e(t.parentElement,a[n],e[Lr]);ye(`Impression triggered for ad tag: ${i}`)}},Yr=x.Ve.s6,Xr=x.Ve.D4,Zr=x.Ve.G_,Kr=x.ZJ.ZH,Qr=x.i$.no;function ei(e,t,n){ye("renderAd is called"),Se(apntag.requests.tags,(e=>{if(e.uuid===t){e.adResponse=n;try{if(n.ad&&n.ad.ad_type===Xr){const t=n.ad.content_source;e.ad={mediatedContent:n.ad[t].banner.content},e.initialHeight=n.ad[t].banner.height,e.initialWidth=n.ad[t].banner.width}}catch(e){ve(`Error while setting mediated content for banner in renderAd${e}`)}const t=Hr(e,Ha,ar(),Ga);za.push(t)}}))}function ti(e,t){const n=[];return["data","images"].forEach((a=>{Array.isArray(e[a])&&e[a].length>0&&e[a].forEach((e=>{("request"===t&&!0===e.required&&e.id||"response"===t&&e.id)&&n.push(e.id)}))})),n}function ni(e){const t=`Unable to find the matching tag request object in AST for the bid response using uuid: ${e.uuid}.  \nThis may mean the apntag.removeTag call was used to delete a tag before the auction finished.  \nUnable to process or render this bid.`;ve(t,null,e),_.trackCriticalError(x.Gy.L.R5,new Error(t))}function ai(e,t,n,a){if(Qe(n))return void ni(t);if(e.uuid!==t.uuid)return void ve("Something went wrong in AST, the UUID for the bid request and the bid response do not match.  Cannot proceed with processing this bid.  RequestTag and ResponseTag provided:",null,e,t);const r=mr(t);r.tagNotFound?ni(t):(b.addPlacementData(r.tagId,{placementId:r.tagId}),!0!==t.nobid?function(e,t,n,a,r){e.adResponse=t,e.utCalled=!0;let i=n.adType;if(b.addPlacementData(n.tagId,{adHeight:n.height,adWidth:n.width,creativeId:n.creativeId,bidderId:n.bidderId}),n.renderer_id&&"video"===n.adType&&(i=function(e){let t;switch(e.renderer_id){case 2:t="video_outstream";break;case 3:t="video_bannerstream";break;default:return}return t}(n)),n.renderer_id&&"native"===n.adType&&(i="native_assembly"),b.addPlacementData(n.tagId,{adType:i}),I.trackEvent({type:S.adServerRequestFill,data:{batchId:a,targetId:n.targetId,performance:performance.now(),adTrackingId:e?.adTrackingId}},n.tagId),Rr({targetId:n.targetId}),Qe(n.targetId))return void ni(t);try{A.createStartMark("rendering")}catch(e){}const o=apntag.requests.tags[n.targetId]&&apntag.requests.tags[n.targetId].wcElement;if(ri(n,a,e.invCode,o,i),it.emit(x.qY.AVAILABLE,r,n),!e.prebid&&!e.displayed){const t=Hr(e,Ha,ar(),Ga,a);za.push(t)}}(e,t,r,a,n):function(e,t,n,a){ye(`No bid for targetId:${e.targetId}`),I.trackEvent({type:S.adServerRequestNoFill,data:{batchId:n,targetId:t.targetId,performance:performance.now(),adTrackingId:e?.adTrackingId}},t.tagId),it.emit(x.qY.NO_BID,a,t)}(e,r,a,n))}const ri=(e,t,n,a,r)=>{const i=e.targetId,o=a||document.getElementById(i);if(!o)return void ye(`Unable to locate ad slot with targetId ${i} for Telemetry logging.`);const s=o._observer;s&&s.disconnect();const d=new MutationObserver(((s,d)=>{try{if(o.innerHTML.trim().length>0){const{size:s,position:c}=Ke(i,a);ye(`Ad content loaded in ${i} with size ${JSON.stringify(s)} at position ${JSON.stringify(c)}`),I.trackCustomEvent({type:"postRenderAdData",batchId:t,invCode:n,size:s,position:c,targetId:i,isWebComponent:!!a},e.tagId),A.trackMark("rendering",{adType:r}),it.emit(x.qY.AD_SLOT_RENDER_START,i,e),ii(i,t,n,e,o),d.disconnect()}}catch(e){const t=`Error in handleBidResponse.observeAdSlot: ${e.message}`;ve(t),_.trackCriticalError(x.Gy.L.NV,new Error(t))}}));d.observe(o,{childList:!0,subtree:!0}),o._observer=d},ii=(e,t,n,a,r)=>{if(!r)return void ye(`Unable to locate ad slot with targetId ${e} for Telemetry logging.`);let i=null;new IntersectionObserver(((r,o)=>{try{r.forEach((r=>{r.intersectionRatio>=.5?i||(i=setTimeout((()=>{ye(`Ad slot ${e} is visible`),I.trackEvent({type:S.mrcView,data:{batchId:t,invCode:n,targetId:e}},a.tagId),it.emit(x.qY.MRC_VIEW,e,a),o.disconnect()}),1e3)):i&&(clearTimeout(i),i=null)}))}catch(e){const t=`Error in utils.observeAdVisibility: ${e.message}`;ve(t),_.trackCriticalError(x.Gy.L.NV,new Error(t))}}),{root:null,rootMargin:"0px",threshold:.5}).observe(r)};function oi(e,t,n,a){let r=null,i=!1;apntag.requests.cbCalled=!0;try{if(typeof e===Kr||null===e||e.error){const n="Malformed response from ad server",a=e&&e.error?x.Gy.L.R5:x.Gy.L.Ny,i=e&&e.error?e.error:n,o=new Error(i);_.trackCriticalError(a,o),ve(`Error response from impbus: ${i}`);let s={};try{s=JSON.parse(t)}catch(e){}return void Se(apntag.requests.tags,((e,t)=>{const n={};let a;e&&(r=mr(e.adResponse),a=e.targetId,Object.assign(n,{tagId:t,memberId:e.member,sizes:e.sizes}));const o=et(i,a,void 0,200,n);Se(s.tags,(n=>{n.uuid===e.uuid&&it.emit(x.qY.BAD_REQUEST,t,o,r)}))}))}e.debug&&e.debug.debug_info&&function(e){{e='<div style="margin-top:10px;margin-bottom:10px;"><span style="font-weight:bold">AST Dongle Value:</span> <input\n            id="ast-dongle-input"\n            type="text"\n            length="400"\n            style="border-radius:5px;"\n            placeholder="Enter ast_dongle value"\n            value=null\n         /></div>'+(e=e.replace(/(\n)/g,"<br>"));const t=document.body,n=document.createElement("div");n.id="appnexus_debug_window";const a=document.createElement("div");a.style.width="100%",a.style.height="400px",a.style.clear="both",t.insertBefore(a,null);const r=n.style;r.position="fixed",r.bottom="0px",r.left="0px",r.width="100%",r.height="450px",r.overflow="hidden",r["border-top"]="1px solid",r["z-index"]=999999,r.background="white",t.insertBefore(n,null);const i=document.createElement("div");i.style.width="100%",i.style.height="30px";const o=Ir();n.appendChild(o);const s=o.contentWindow.document;o.onload=function(){const e=s.getElementsByTagName("br"),t=e.length;let n,a,r=0;for(;r<t-1;r++)n=e[r].nextSibling,a=n&&n.nodeName.toLowerCase(),"br"===a&&(n.style.display="none")};const d="<\/script>";s.open(),s.write(e),s.write(d),s.close()}}(e.debug.debug_info),e.toolkit&&e.toolkit.enabled&&function(e){{const t='<div style="margin-top:10px;margin-bottom:10px;"><span style="font-weight:bold">AST Dongle Value:</span> <input\n            id="ast-dongle-input"\n            type="text"\n            length="400"\n            style="border-radius:5px;"\n            placeholder="Enter ast_dongle value"\n            value=null\n         /></div>'+e.map((e=>`\n      <table style="border: 1px solid black; border-radius: 5px; font-family: sans-serif; margin: 1em; padding: .5em">\n        <tr>\n          <td style="padding-right: 5em;"><b>Target&nbsp;ID</b></td>\n          <td style="width: 100%;">${kr(e)}</td>\n        </tr>\n        <tr>\n          <td><b>Creative ID</b></td>\n          <td>${_r(e,"creative_id")}</td>\n        </tr>\n        <tr>\n          <td><b>Buyer Member ID</b></td>\n          <td>${_r(e,"buyer_member_id")}</td></tr>\n        <tr>\n          <td><b>Creative Size</b></td>\n          <td>${function(e){if(e.nobid)return Er;let t=null,n=null;const a=e.ads&&e.ads.length?e.ads[0]:{};return a.rtb&&a.rtb.banner&&(t=a.rtb.banner.height,n=a.rtb.banner.width),t&&n?`${n} x ${t}`:""}(e)}</td>\n        </tr>\n        <tr>\n          <td><b>Available Sizes</b></td>\n          <td>${function(e){try{const t=kr(e),n=apntag.requests.tags[t].sizes;return JSON.stringify(n)}catch(e){return""}}(e)}</td></tr>\n        <tr>\n          <td><b>Winning Bid</b></td>\n          <td>${_r(e,"cpm")}</td></tr>\n        <tr>\n          <td><b>Demand Source</b></td>\n          <td>${function(e){if(e.nobid)return Er;let t="";const n=function(e){const t=apntag.requests.tags;if(e.ads.length&&e.ads[0].seller_member_id)return e.ads[0].seller_member_id;for(const n in t)if(t.hasOwnProperty(n)&&t[n].uuid===e.uuid)return t[n].member;return null}(e);return t=e.ads[0].csm?"CSM":e.ads[0].buyer_member_id===n||e.ads[0].deal_id?e.ads[0].buyer_member_id!==n&&e.ads[0].deal_id?"Deal":e.ads[0].buyer_member_id===n?"Direct":"":"RTB",t}(e)}</td></tr>\n        <tr>\n          <td><b>Ad Type</b></td>\n          <td>${_r(e,"ad_type")}</td></tr>\n        <tr>\n          <td><b>Media Type</b></td>\n          <td>${_r(e,"media_type_id")}</td></tr>\n        <tr>\n          <td style="color: #555; font-size: smaller; padding-top: .5em;" colspan="2">\n            Console Ad Profile:\n            <a href="${function(e){return`//console.appnexus.com/ad-quality?id=${e.placement?.publisher.id}`}(e)}" target="_blank">${e.ad_profile_id}</a>\n            ${function(e){return e.ads?`| <a href="//ib.adnxs.com/cr?id=${e.ads[0].creative_id}" target="_blank">Creative Preview<a/>`:""}(e)}\n          </td>\n        </tr>\n      </table>\n    `)).join(" "),n=document.body,a=document.createElement("div");a.id="appnexus_debug_window";const r=document.createElement("div");r.style.width="100%",r.style.height="400px",r.style.clear="both",n.insertBefore(r,null);const i=a.style;i.position="fixed",i.bottom="0px",i.left="0px",i.width="100%",i.height="450px",i.overflow="hidden",i["border-top"]="1px solid",i["z-index"]=999999,i.background="white",n.insertBefore(a,null);const o=document.createElement("div");o.style.width="100%",o.style.height="30px";const s=Ir();a.appendChild(s);const d=s.contentWindow.document;d.open(),d.write(t),d.close()}}(e.tags),Se(e.tags,(e=>{let t=null,r=null;if(Se(apntag.requests.tags,((n,a)=>{n.uuid===e.uuid&&(t=n,r=a)})),t)if(e.error&&t){const n=`There was an exception from targetId:${t.targetId} this usually means there is a setup error on the tag (invalid ID etc)`;ve(n,null,e.error),_.trackCriticalError(x.Gy.L.R5,new Error(n));const a=et(n,t.targetId,void 0,200);it.emit(x.qY.BAD_REQUEST,t.targetId,a)}else{if(e.ads&&e.ads.length&&e.ads[0].ad_type===Yr){const t=function(e){let t,n={};Se(Va,(n=>{n.uuid===e.uuid&&(t=n)})),t&&(n=t.native);const a=[];Se(n,((e,t)=>{"custom"!==t&&!0===e.required&&a.push(t)}));const r=mr(e),i=[];Se(r.native,((e,t)=>{"custom"!==t&&(ge(e)||i.push(t))}));let o=i.length>0;if(Se(a,(e=>{o=o&&i.indexOf(e)>-1})),o&&n&&n.custom){const e=ti(n.custom,"request");if(e.length>0){const t=ti(r.native&&r.native.custom,"response");o=t.length>0&&e.every((e=>t.includes(e)))}}return o}(e);if(!t){const e="required native assets missing from response";return _.trackCriticalError(x.Gy.L.R5,new Error(e)),void ve(e)}}if(apntag.requests.privateAuction&&!0===apntag.requests.privateAuction.enabled&&"string"==typeof apntag.requests.fledge?.chrome_traffic_label&&apntag.requests.fledge?.chrome_traffic_label.includes("treatment")&&!Pt()&&xt()&&!i&&ur(a)&&o(e.ads)&&t&&!t.privateAuctionResults&&t.markedForFledge===a&&!lr()&&"function"==typeof navigator.runAdAuction&&"function"==typeof navigator.deprecatedReplaceInURN){Ie("Detected interestGroups were registered in time and ads were not managed...Starting Private Auction workflow"),t.privateAuctionResults={auctionTimestamp:fe()},i=!0,it.emit(x.gw.qY.AVAILABLE,t.targetId),I.trackCustomEvent({type:"adServerRequestFledge",batchId:n,targetId:t.targetId},e.tag_id);const o=ue(apntag.requests.privateAuction.sellerTimeout)?apntag.requests.privateAuction.sellerTimeout:300,s=x.gw.PI.Oz;!function(i,o,s,d){it.emit(x.gw.qY.INITIATED,i),ye("Starting runAdAuction call with config:",o);try{navigator.runAdAuction(o).then((i=>{(i=>{if(i&&""!==i){const o={"${ADRENDERCFG}":encodeURIComponent(JSON.stringify({client_request_id:a,ast_target_id:t.targetId}))};!function(e,t,n,a,r){ye("Starting deprecatedReplaceInURN call with urnUrl",t,"and macros: ",n);try{navigator.deprecatedReplaceInURN(t,n).then((e=>{a(e)})).catch((t=>{const n="Encountered an error while attempting to execute deprecatedReplaceInURN, see below.  Running RTB fallback sequence...\n";be(n,t);const a=utils.getAdErrorObj(n,e,t);it.emit(x.gw.qY.FAILURE,e,a),r(t)}))}catch(e){be("Encountered an error while attempting to execute deprecatedReplaceInURNm, see below.  Running RTB fallback sequence...\n",e),r(e)}}(t.targetId,i,o,(()=>{if(Ie("Detected navigator.deprecatedReplaceInURN() resolved successfully.",i),e.ads?.length>1){Ie(`Detected mediated bids were included in the bid response for targetId ${t.targetId}.  Checking mediated sources first...`);const a=e.ads[e.ads.length-1];if(!a.rtb){const t={cpm:0,cpm_publisher_currency:0,publisher_currency_code:a.publisher_currency_code,publisher_currency_codename:a.publisher_currency_codename,content_source:"rtb",ad_type:"video",buyer_member_id:0,creative_id:0,rtb:{}};e.ads.push(t)}const o=e.ads[e.ads.length-1].rtb;let s=["banner","native","video"].find((e=>o[e]));s&&(o[`bkp_${s}`]=o[s],delete o[s]),o.video={},o.urnUrl=i,o.batchId=n,si(e,t,r,n)}else di(e,t,i,n)}),(a=>{const i=`Error during navigator.deprecatedReplaceInURN on targetId:${t.targetId} batchId:${n} Error: ${a}`;_.trackCriticalError("fledgeRunAdAuctionFailed",new Error(i)),si(e,t,r,n)}))}else Ie("Detected runAdAuction did not return a result...Starting normal RTB workflow"),I.trackCustomEvent({type:"adServerRequestFledgeNoFill",batchId:n,targetId:t.targetId},e.tag_id),it.emit(x.gw.qY.NO_AD_AVAILABLE,t.targetId),si(e,t,r,n)})(i)})).catch((e=>{const t="Encountered an error while attempting to execute runAdAuction, see below.  Running RTB fallback sequence...\n";be(t,e);const n=utils.getAdErrorObj(t,i,e);it.emit(x.gw.qY.FAILURE,i,n),d(e)}))}catch(e){be("Encountered an error while attempting to execute runAdAuction, see below.  Running RTB fallback sequence...\n",e),d(e)}}(t.targetId,{seller:s,decisionLogicURL:x.gw.PI.Eh,interestGroupBuyers:[s],auctionSignals:{client_request_id:a},perBuyerPrioritySignals:{"*":{b:-1,type_contextualIG:1,type_CHIPData:2,typeIsCHIPData:2,[a]:1}},sellerTimeout:o,resolveToConfig:!1},0,(a=>{const i=`Error during navigator.runAdAuction on targetId:${t.targetId}  batchId:${n}  Error: ${a}`;_.trackCriticalError("fledgeRunAdAuctionFailed",new Error(i)),si(e,t,r,n)}))}else{if(apntag.requests.privateAuction&&!0===apntag.requests.privateAuction.enabled){let n="Private Auction workflow was not used...Starting normal RTB workflow";if(ur(a)||(n+="\nInterestGroups were NOT regsitered in time"),!o(e.ads)){const a=mr(e);it.emit(x.gw.qY.SKIPPED,t.targetId,a),n+="\nRTB ad was managed and had higher priority, or did not pass consent checks"}"function"!=typeof navigator.runAdAuction&&(n+="\nBrowser does not support navigator.runAdAuction()"),i&&(n+="\nA Private Auction ad was already attempted for another slot in this current auction"),t.privateAuctionResults&&(n+="\nA Private Auction ad was already attempted for this slot in a previous auction"),Ie(n)}si(e,t,r,n)}}else ni(e)})),apntag.requests.checkDisplay&&He();const d=x.xH;"TRUE"!==qe("ast_keep_iframes").toUpperCase()&&Object.entries(d).forEach((e=>function(e){const t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}(e[1])));const c=apntag.requests.trackingManagement&&apntag.requests.trackingManagement.userSync;if(c&&!1===c.syncEnabled)Ie("AST userSync feature was disabled as per setPageOpts.");else if(!0===lr())Ie("AST userSync feature was disabled due to TCF consent choices.");else{let e=3e3;if(c&&c.syncDelay&&(e=c.syncDelay),e)return setTimeout(s,e);s()}}catch(e){const t=`Error during handleBidResponse logic: ${e.message}`;ve(t)}function o(e){if(!(le(e)&&e.length>0))return!0;{if(e.some((e=>e.csm)))return!0;const t=e.find((e=>e.rtb));if(t&&!t.is_managed&&!t.no_consent)return!0}return!1}function s(){{Ie("AST is loading the userSync URL.");const e=apntag.requests.trackingManagement&&apntag.requests.trackingManagement.userSync;let t=`${Qr}?`;e&&(t+="number"==typeof e.sellerId?`seller_id=${e.sellerId}&`:"",t+="number"==typeof e.publisherId?`pub_id=${e.publisherId}&`:""),t=t.substring(0,t.length-1),B({strategy:"WithContentAndAttributes",data:{attributes:{id:Ge()+Math.random().toString(16).substr(2),src:t,sandbox:"allow-scripts allow-same-origin","data-anxtracker-usersync":""}}})}}}function si(e,t,n,a){const r=e.ads,i=mt(r),o=e.rtb_video_fallback;if(i||o){t.utCalled=!0,i?t.isMediated=!0:t.isRtbVideoFallback=!0;const o=ft(r),s=yt(apntag.requests.tags,e);if(o===Zr){t.isVideoMediation=!0;const a=mr(e);it.emit(x.qY.AVAILABLE,n,a),ht(o,e,s,ei)}else{t.isBannerMediation=!0;const r=It(t.targetId,e);e.ad={ad_type:Xr},t.ad={mediatedContent:r},ai(t,e,n,a)}}else ai(t,e,n,a)}function di(e,t,n,a){Ie("Starting Private ad rendering sequence."),I.trackCustomEvent({type:"adServerRequestFledgeFill",batchId:a,targetId:t.targetId},e.tag_id),it.emit(x.gw.qY.AD_AVAILABLE,t.targetId,{}),t.privateAuctionResults.urnUrl=n,t.utCalled=!0;const r=Hr(t,null,ar(),null,a);za.push(r)}let ci,li,ui;const pi={};let gi,mi=[];const fi=x.Oi.eC,hi=fi.BASE,yi=hi+fi.DIV,bi=hi+fi.INDEX,vi=hi+fi.TAG_ID,wi=hi+fi.INV_CODE,Ii=",",ki=":";let Ei;function _i(e){return qe(e,Ei)}function Si(e,t,n){const a=Number(t);if(isNaN(a))ve("Force Creative must be a number");else{e.force_creative_id=a;const t=function(e,t){let n=null;return Se(t,(t=>{t.uuid===e.uuid&&(n=t.targetId)})),n}(e,n);ye(`Force Creative in use for targetId: ${t}`)}}const Ci="Invalid schain object found: ",Ti=" should be a string",Ai=" should be an Integer",xi=" should be an object",qi=" is not a valid schain property",Ri={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},$i=[];Se(Ri,(e=>$i.push(e)));const Mi=x.ZE.An,Di=x.ZE.pF,Pi=x.ZE.HX,Oi=x.Oi.d2,Ni=x.Oi.Me,Li=x.Oi.Ux,Ui=x.Oi.c8,Fi=x.Oi.AI;function Bi(e){const t=[];return Se(e,((e,n)=>{if(le(e)){const t=[];Se(e,(e=>{(e=De(`keywords.${n}`,e))&&t.push(e)})),e=t}else{if(e=De(`keywords.${n}`,e),!ce(e))return;e=[e]}const a={key:n,value:e};t.push(a)})),t}const zi=function(e){const t={},n=e.site;return ge(n)||ge(n.id)||(t.id=n.id),t},ji=function(e){const t={},n=e.device;if(!ge(n)){ge(n.useragent)||(t.useragent=n.useragent),ge(n.geo)||(t.geo=n.geo),ge(n.ip)||(t.ip=n.ip),ge(n.deviceType)||(t.devicetype=n.deviceType),ge(n.make)||(t.make=n.make),ge(n.model)||(t.model=n.model),ge(n.os)||(t.os=n.os),ge(n.osVersion)||(t.os_version=n.osVersion),ge(n.carrier)||(t.carrier=n.carrier);const e=Pe("device.connectionType",n.connectionType,Di);t.connectiontype=e,ge(n.mcc)||(t.mcc=n.mcc),ge(n.mnc)||(t.mnc=n.mnc),ge(n.lmt)||(t.lmt=n.lmt),ge(n.deviceId)||(t.device_id=n.deviceId);const a=Pe("device.devTime",n.devTime,Di);t.devtime=a;const r=Pe("device.devHeight",n.devHeight,Di);t.h=r;const i=Pe("device.devWidth",n.devWidth,Di);t.w=i;const o=Pe("device.ppi",n.ppi,Di);t.ppi=o;const s=Pe("device.pxratio",n.pxratio,Di);t.pxratio=s}return t},Wi=function(e){const t={},n=e.refererInfo;if(n&&(t.rd_ref=n.referer,t.rd_top=n.reachedTop,t.rd_ifs=n.numIframes,t.rd_stk=Array.isArray(n.stack)?n.stack.join(","):null),e.pageUrlOverride){const n=!!(navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(ipad|iphone|ipod)/g)),a=!(!window.webkit||!window.webkit.messageHandlers);(n||a)&&(t.rd_can=e.pageUrlOverride)}return t},Vi=function(e){function t(e,t,n,a){t&&(a?e.push({source:n,id:t,rti_partner:a}):e.push({source:n,id:t}))}const n=[];return le(e)?Se(e,(e=>{if(se(e)&&ce(e.type)&&(ce(e.id)||le(e.eids)))switch(e.type.toLowerCase()){case"criteo":t(n,e.id,"criteo.com",null);break;case"ttd":t(n,e.id,"adserver.org","TDID");break;case"netid":t(n,e.id,"netid.de",null);break;case"liveramp":t(n,e.id,"liveramp.com",null);break;case"uid2":t(n,e.id,"uidapi.com","UID2");break;case"extendedids":Se(e.eids,(e=>{ce(e.source)&&ce(e.id)&&n.push({source:e.source,id:e.id})}));break;default:n.push(e)}else be("Invalid userId object",e)})):be("Invalid userIds",e),{eids:n}},Hi=function(e,t,n,a){const r={};if(e.fledge&&(r.fledge=e.fledge),e.disablePsa&&Se(e.tags,(e=>{e.disablePsa=!0})),e.msft&&(r.msft=e.msft),e.dsa){const t={};["dsarequired","pubrender","datatopub"].forEach((n=>{ue(e.dsa[n])&&(t[n]=e.dsa[n])}));const n=e.dsa.transparency;if(le(n)&&n.every((e=>se(e)))){const e=[];n.forEach((t=>{ce(t.domain)&&le(t.dsaparams)&&t.dsaparams.every((e=>ue(e)))&&e.push(t)})),e.length>0&&(t.transparency=e)}ge(t)||(r.dsa=t)}e.gdpr_consent&&(r.gdpr_consent=e.gdpr_consent),e.gpp_consent&&(r.privacy=e.gpp_consent),e.us_privacy&&(r.us_privacy=e.us_privacy),e.geoOverride&&(r.geo_override={country_code:e.geoOverride.countryCode,postal_code:e.geoOverride.zip});const i=[];let o=0;Se(e.tags,(e=>{if(!e.utCalled&&e.member===t&&function(e){if(!a)return!0;let t=!1;return Se(a,(n=>{e.targetId===n&&(t=!0)})),t}(e)){const t=function(e){const t={};if(e.uuid=Ee(),!ge(e.sizes)){const n=Ye(e.sizes);ge(n)||(t.sizes=n,t.primary_size=n[0])}if(!ge(e.privateSizes)){const n=Ye(e.privateSizes);ge(n)||(t.private_sizes=n)}if(e.supplyType&&ce(e.supplyType)&&(t.supply_type=e.supplyType),e.pubClick&&ce(e.pubClick)&&(t.pubclick={url:e.pubClick}),e.pubClickEnc&&ce(e.pubClickEnc)&&(t.pubclickenc={url:e.pubClickEnc}),e.reserve&&(ue(e.reserve)||le(e.reserve))&&(t.reserve=e.reserve),e.extInvCode&&ce(e.extInvCode)&&(t.ext_inv_code=e.extInvCode),t.uuid=e.uuid,e.tagId&&(t.id=e.tagId),e.formats&&(t.formats=e.formats),e.position&&("above"===e.position?t.position=1:"below"===e.position?t.position=2:t.position=0),e.invCode&&(t.code=e.invCode),e.prebid&&(t.prebid=e.prebid),e.externalImpId&&(t.external_imp_id=e.externalImpId),!0===e.allowSmallerSizes?t.allow_smaller_sizes=!0:t.allow_smaller_sizes=!1,!0===e.disablePsa&&(t.disable_psa=!0),e.allowedFormats&&(t.ad_types=e.allowedFormats),!0!==e.usePmtRule&&!1!==e.usePmtRule||(t.use_pmt_rule=e.usePmtRule),e.msft_tag&&ce(e.msft_tag.msan_kv)&&(t.msft_tag={msan_kv:e.msft_tag.msan_kv}),"boolean"==typeof e.rewardedAd&&(t.rwdd=e.rewardedAd),ce(e.globalPlacementId)&&(t.gpid=e.globalPlacementId),!ge(e.video)){const n=e.video,a={};n.id&&(a.id=n.id),ge(n.mimes)||(a.mimes=n.mimes),n.maxDuration&&(a.maxduration=n.maxDuration),n.minDuration&&(a.minduration=n.minDuration),n.startDelay&&(a.startdelay=n.startDelay),n.skippable&&(a.skippable=n.skippable),n.skipOffset&&(a.skipoffset=n.skipOffset),ge(n.playbackMethod)||(a.playback_method=n.playbackMethod),ge(n.frameworks)||(a.frameworks=n.frameworks),t.video=a}if(!ge(e.native)){if(!ge(e.native.ortb)){const n=function(e){try{e.eventtrackers=[{event:1,methods:[1,2]}];const t=JSON.stringify(e);return{ver:e.ver,request:t}}catch(e){ve("invalid ortb native structure, please review setup",tagNativeObj.ortb)}}(e.native.ortb);n&&(t.openrtb_native=n)}const n=e.native,a={};n.renderer_id&&(a.renderer_id=n.renderer_id),n.placement_type&&(a.placement_type=n.placement_type);const r={};if(n.id&&(r.id=n.id),n.title&&(r.title=n.title),n.body&&(r.description=n.body),n.sponsoredBy&&(r.sponsored_by=n.sponsoredBy),n.image&&(r.main_image=n.image,ge(r.main_image.sizes)&&(r.main_image.sizes=[{}])),n.icon&&(r.icon=n.icon,ge(r.icon.sizes)&&(r.icon.sizes=[{}])),n.cta&&(r.ctatext=n.cta),n.desc2&&(r.desc2=n.desc2),n.rating&&(r.rating=n.rating),n.displayUrl&&(r.displayurl=n.displayUrl),n.likes&&(r.likes=n.likes),n.downloads&&(r.downloads=n.downloads),n.price&&(r.price=n.price),n.salePrice&&(r.saleprice=n.salePrice),n.phone&&(r.phone=n.phone),n.address&&(r.address=n.address),n.video&&(r.video={required:n.video.required||!1,min_duration:n.video.minDuration||0,max_duration:n.video.maxDuration}),n.privacySupported&&(r.privacy_supported=!0),n.customTitle1&&(r.customtitle1=n.customTitle1),n.customTitle2&&(r.customtitle2=n.customTitle2),n.customTitle3&&(r.customtitle3=n.customTitle3),n.customTitle4&&(r.customtitle4=n.customTitle4),n.customTitle5&&(r.customtitle5=n.customTitle5),n.customBody1&&(r.custombody1=n.customBody1),n.customBody2&&(r.custombody2=n.customBody2),n.customBody3&&(r.custombody3=n.customBody3),n.customBody4&&(r.custombody4=n.customBody4),n.customBody5&&(r.custombody5=n.customBody5),n.customCta1&&(r.customctatext1=n.customCta1),n.customCta2&&(r.customctatext2=n.customCta2),n.customCta3&&(r.customctatext3=n.customCta3),n.customCta4&&(r.customctatext4=n.customCta4),n.customCta5&&(r.customctatext5=n.customCta5),n.customDisplayUrl1&&(r.customdisplayurl1=n.customDisplayUrl1),n.customDisplayUrl2&&(r.customdisplayurl2=n.customDisplayUrl2),n.customDisplayUrl3&&(r.customdisplayurl3=n.customDisplayUrl3),n.customDisplayUrl4&&(r.customdisplayurl4=n.customDisplayUrl4),n.customDisplayUrl5&&(r.customdisplayurl5=n.customDisplayUrl5),n.customSocialUrl1&&(r.customsocialurl1=n.customSocialUrl1),n.customSocialUrl2&&(r.customsocialurl2=n.customSocialUrl2),n.customSocialUrl3&&(r.customsocialurl3=n.customSocialUrl3),n.customSocialUrl4&&(r.customsocialurl4=n.customSocialUrl4),n.customSocialUrl5&&(r.customsocialurl5=n.customSocialUrl5),n.customImage1&&(r.customimage1=n.customImage1),n.customImage2&&(r.customimage2=n.customImage2),n.customImage3&&(r.customimage3=n.customImage3),n.customImage4&&(r.customimage4=n.customImage4),n.customImage5&&(r.customimage5=n.customImage5),n.customIcon1&&(r.customicon1=n.customIcon1),n.customIcon2&&(r.customicon2=n.customIcon2),n.customIcon3&&(r.customicon3=n.customIcon3),n.customIcon4&&(r.customicon4=n.customIcon4),n.customIcon5&&(r.customicon5=n.customIcon5),n.customSocialIcon1&&(r.customsocialicon1=n.customSocialIcon1),n.customSocialIcon2&&(r.customsocialicon2=n.customSocialIcon2),n.customSocialIcon3&&(r.customsocialicon3=n.customSocialIcon3),n.customSocialIcon4&&(r.customsocialicon4=n.customSocialIcon4),n.customSocialIcon5&&(r.customsocialicon5=n.customSocialIcon5),!ge(n.custom)){let e=100,t=[];le(n.custom.data)&&n.custom.data.length>0&&(t=t.concat(n.custom.data)),le(n.custom.images)&&n.custom.images.length>0&&(t=t.concat(n.custom.images)),t.forEach((t=>{t.id=e++})),r.custom=n.custom}Object.keys(r).length>0&&(a.layouts=[r]),t.ad_types=t.ad_types||[],-1===t.ad_types.indexOf("native")&&t.ad_types.push("native"),t.native=a}if(!ge(e.keywords)){const n=Bi(e.keywords);t.keywords=n}if(e.forceCreativeId){const n=Number(e.forceCreativeId);isNaN(n)?ve("Force Creative must be a number"):(t.force_creative_id=n,ye(`Force Creative in use for targetId: ${e.targetId}`))}return e.nobidIfUnsold&&(t.nobid_if_unsold=!0),e.trafficSourceCode&&(t.traffic_source_code=e.trafficSourceCode.toString()),e.customPubLog&&(ce(e.customPubLog)?t.custom_pub_log=e.customPubLog:ve("customPubLog must be a string")),t}(e);e.utCalled=!0,e.tagNumber=o,o++,i.push(t)}})),function(e,t,n){if(!Ae(xe(),hi))return;let a,r,i,o,s,d;if(!ge(_i(bi)))for(mi=_i(bi).split(Ii),a=0;a<mi.length;a++){s=mi[a].split(ki);const r=Number(s[0]);if(isNaN(r)||void 0===t[r])ve(`Invalid ast_override value for index : ${r}`);else{d=null;let a=null;for(o=0;o<n.length;o++)o===r&&(a=n[o].uuid);for(i=0;i<t.length;i++)t[i].uuid===a&&Si(t[i],s[1],e)}}if(!ge(_i(yi)))for(mi=_i(yi).split(Ii),a=0;a<mi.length;a++){s=mi[a].split(ki);let n=null;const o=Object.keys(e);for(i=0;i<o.length;i++)s[0]===o[i]&&(n=e[o[i]].uuid);if(n)for(r=0;r<t.length;r++)t[r].uuid===n&&Si(t[r],s[1],e);else ve(`Invalid ast_override value for target div id : ${s[0]}`)}if(!ge(_i(vi)))for(mi=_i(vi).split(Ii),a=0;a<mi.length;a++){s=mi[a].split(ki);let n=!1;for(r=0;r<t.length;r++)d=t[r],d.id===Number(s[0])&&(Si(d,s[1],e),n=!0);n||ve(`Invalid ast_override value for tag id : ${s[0]}`)}if(!ge(_i(wi)))for(mi=_i(wi).split(Ii),a=0;a<mi.length;a++){s=mi[a].split(ki);let n=!1;for(r=0;r<t.length;r++)d=t[r],d.code===s[0]&&(Si(d,s[1],e),n=!0);n||ve(`Invalid ast_override value for invCode : ${s[0]}`)}}(e.tags,i,n),r.referrer_detection=Wi(e),r.tags=i,r.uuid=Ee(),r.member_id=t,r.sdk={source:"ast",version:"1.10.8"};let s=null;if(ge(e.keywords)?ge(e.targetingParams)||(s=Bi(e.targetingParams),r.keywords=s):(s=Bi(e.keywords),r.keywords=s),!ge(e.user)&&(r.user=function(e){const t={};if(!ge(e)){if(e.externalUid&&ce(e.externalUid)&&(t.external_uid=e.externalUid),le(e.segments)){const n=[];Se(e.segments,(e=>{ue(e)?n.push({id:e}):se(e)&&e.id&&ue(e.id)&&e.value&&ue(e.value)&&n.push(e)})),t.segments=n}const n=Pe("user.age",e.age,Di);t.age=n;const a=Pe("user.gender",e.gender,Di);t.gender=a;const r=Pe("user.language",e.language,Mi);t.language=r;const i=Pe("user.dnt",e.dnt,Pi);t.dnt=i;const o=Pe("user.coppa",e.coppa,Pi);t.coppa=o}return t}(e.user),!ge(e.user.userIds))){const{eids:t}=Vi(e.user.userIds);r.eids=t}if(!ge(e.content)){const t={},n=Pe("content.language",e.content.language,Mi);t.language=n,r.request_content=t}if(!ge(e.schainConfig)){const t=function(e){let t=Ri.STRICT;return void 0!==(n=e)&&(se(n)||(ve(`${Ci} the schain config will not be used as it is not an object.`),0))?(ce(e.validation)&&-1!==$i.indexOf(e.validation)&&(t=e.validation),t===Ri.OFF||function(e,t){const n=["complete","ver","ext","nodes"],a="Detected something wrong within the schain config:";let r="";function i(e){r+=`\n${e}`}function o(){t===Ri.STRICT?ve(a+r):be(a+r)}if(!se(e)&&(i(`schain.config ${xi}`),o(),t===Ri.STRICT))return!1;if(Object.keys(e).forEach((e=>{-1===n.indexOf(e)&&i(`schain.config.${e} ${qi}`)})),ue(e.complete)&&pe(e.complete)||i(`schain.config.complete ${Ai}`),ce(e.ver)||i(`schain.config.ver ${Ti}`),Re(e,"ext")&&(se(e.ext)||i(`schain.object.ext ${xi}`)),le(e.nodes)){const t=["asi","sid","hp","rid","name","domain","ext"];e.nodes.forEach(((e,n)=>{se(e)?(Object.keys(e).forEach((e=>{-1===t.indexOf(e)&&i(`schain.config.nodes[${n}].${e} ${qi}`)})),ce(e.asi)||i(`schain.config.nodes[${n}].asi ${Ti}`),ce(e.sid)||i(`schain.config.nodes[${n}].sid ${Ti}`),ue(e.hp)&&pe(e.hp)||i(`schain.config.nodes[${n}].hp ${Ai}`),Re(e,"rid")&&(ce(e.rid)||i(`schain.config.nodes[${n}].rid ${Ti}`)),Re(e,"name")&&(ce(e.name)||i(`schain.config.nodes[${n}].name ${Ti}`)),Re(e,"domain")&&(ce(e.domain)||i(`schain.config.nodes[${n}].domain ${Ti}`)),Re(e,"ext")&&(se(e.ext)||i(`schain.config.nodes[${n}].ext ${xi}`))):i(`schain.config.nodes[${n}] ${xi}`)}))}else if(i("schain.config.nodes  should be an Array"),o(),t===Ri.STRICT)return!1;return!(r.length>0&&(o(),t===Ri.STRICT))}(e.config,t)?e.config:(ve(`${Ci} due to 'strict' validation setting, the schain object will not be passed.  See the above error for details.`),null)):null;var n}(e.schainConfig);t&&(r.schain=t)}ge(e.device)||(r.device=ji(e)),ge(e.app)||(r.app=function(e){const t={},n=e.app;return ge(n)||ge(n.appid)||(t.appid=n.appid),t}(e)),ge(e.site)||(r.site=zi(e)),e.publisherId&&(r.publisher_id=e.publisherId),e.auctionTimeout&&(r.auction_timeout_ms=e.auctionTimeout),r.tags=i;const d=qe(Oi)||apntag.dongle;d&&!apntag.dongle&&(apntag.dongle=d),((qe(Ni)||apntag.toolkit)&&d||!ge(e.toolkit))&&(r.toolkit={enabled:!0,dongle:d||e.toolkit.dongle});const c=qe(Ui);c&&""!==c&&(apntag.debug_member=c);const l=qe(Fi);l&&""!==l&&(apntag.debug_bidder=l);const u="TRUE"===qe(Li).toUpperCase();if(u&&""!==u&&(apntag.requests.test=u),apntag.debug&&!ge(apntag.dongle)){let e="";apntag.debug_member&&(e=apntag.debug_member);const t=function(e,t,n){const a={};return apntag.debug&&!ge(t)&&(a.enabled=!0,e&&(a.member_id=Number(e)),t&&(a.dongle=String(t)),n&&(a.bidder_id=Number(n)),a.debug_timeout=1e3),a}(e,apntag.dongle,apntag.debug_bidder);r.debug=t}return r},Gi=function(e){return function(){try{const t=function(){const t=function(){const t=[];let n;do{try{n=n?n.parent:e;try{t.push({referrer:n.document.referrer||null,location:n.location.href||null,isTop:n===e.top})}catch(a){t.push({referrer:null,location:null,isTop:n===e.top}),be("Trying to access cross domain iframe. Continuing without referrer and location")}}catch(e){return t.push({referrer:null,location:null,isTop:!1}),t}}while(n!==e.top);return t}(),n=function(){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}();if(n)for(let e=0,a=n.length;e<a;e++)t[e].ancestor=n[e];return t}(),n=t.length-1,a=null!==t[n].location||n>0&&null!==t[n-1].referrer,r=function(e){const t=[];let n,a=null,r=null,i=null,o=null,s=null,d=null;for(n=e.length-1;n>=0;n--){try{r=e[n].location}catch(e){}if(r)a=encodeURIComponent(r),t.push(a),d||(d=a);else if(0!==n){i=e[n-1];try{o=i.referrer,s=i.ancestor}catch(e){}o?(a=encodeURIComponent(o),t.push(a),d||(d=a)):s?(a=encodeURIComponent(s),t.push(a),d||(d=a)):t.push(null)}else t.push(null)}return{stack:t,detectedRefererUrl:d}}(t);return{referer:r.detectedRefererUrl,reachedTop:a,numIframes:n,stack:r.stack}}catch(e){}}}(window);const Ji=function(e,t,n,a){{const r=function(r){const i=function(e,t,n,a){{const r={gdpr_consent:apntag.requests.gdpr_consent,privacy:apntag.requests.gpp_consent,geo_override:{country_code:apntag.requests.geoOverride?.countryCode,postal_code:apntag.requests.geoOverride?.zip},fledge:apntag.requests.fledge,referrer_detection:Wi(apntag.requests),client_request_id:n,seller_member_id:t,publisher_id:apntag.requests.publisherId,site:zi(apntag.requests),device:ji(apntag.requests),tags:[],cookies:[]};if(Array.isArray(a)&&a.length>0&&(r.cookies=a.map((e=>{const t=e.split("=");return 2===t.length?{source:t[0],id:t[1]}:null})).map((e=>e))),r.device.useragent||(r.device.useragent=navigator.userAgent.toLowerCase()),apntag.requests.user&&apntag.requests.user.userIds){const{eids:e}=Vi(apntag.requests.user.userIds);r.eids=e}return Object.entries(apntag.requests.tags).forEach((a=>{if(0===r.tags.length){const i=a[1];if(!i.utCalled&&i.member===t&&e.includes(i.targetId)&&!function(e){{let t=!1;const n=[0,1,2];return Array.isArray(e)&&e.length>0&&(Array.isArray(e[0])&&e[0].length>0?t=n.some((t=>e[0].includes(t))):2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&(t=n.some((t=>e.includes(t))))),t}}(i.sizes)){const e={};if(i.tagId&&(e.id=i.tagId),i.invCode&&(e.code=i.invCode),i.externalImpId&&(e.external_imp_id=i.externalImpId),!ge(i.sizes)){const t=Ye(i.sizes)[0];e.sizes=[t]}r.tags.push(e),i.markedForFledge=n}}})),r}}(e,t,n,r);let o;try{o=encodeURIComponent(JSON.stringify({context_info:i}))}catch(e){}a({name:`${i.client_request_id}_ci`,owner:x.gw.PI.Oz,lifetimeMs:1e4,biddingLogicURL:x.gw.PI.HI,trustedBiddingSignalsUrl:x.gw.PI.m,trustedBiddingSignalsKeys:[`ci=${o}`],ads:[{renderUrl:"https://fake.example.com/"}],priorityVector:{b:2,type_contextualIG:1,[i.client_request_id]:1}})};lr()?r(null):function(e,t){Ze({iframeAttributes:e,exitCb:t})}({id:x.xH.GET_COOKIES,name:x.xH.GET_COOKIES,src:x.i$.xw},r)}};function Yi(e,t,n,a,r,i){le(n)&&n.length>0?n.forEach((t=>{Xi(e,t,a,r,i)})):Se(ja[t],(t=>{Xi(e,t,a,r,i)}))}function Xi(e,t,n,a,r){0===n&&(e="Failure to contact endpoint. This can be caused by invalid CORS headers or failure of server to respond.");const i=apntag.requests.tags[t];let o,s;i&&(o=mr(i.adResponse),s=i.tagId);const d=et(e,t,r,n);it.emit(a,t,d,o),_.trackCriticalError(x.Gy.L.Ny,new Error(e),s)}const Zi=function(e,t,n){{const a=Ja,r=function(e){return`${e.url+(e.url.indexOf("?")+1?"&":"?")}cb=apntag.handleCb&q=${encodeURI(e.data)}`}(e),i=ke(a,r);apntag.requests.utCalled=!0,i.onload=function(){ye("JSONP fallback used instead of POST.")},i.onerror=function(a){if(!apntag.requests.errorReported){const r=`Unknown script error contacting endpoint over JSONP. Endpoint: ${e.url}`;Yi(r,t,n,"-1",x.qY.REQUEST_FAIL,a),ve(r)}},i.onreadystatechange=function(a){if(!("loaded"!==i.readyState&&"complete"!==i.readyState||apntag.requests.cbCalled||apntag.requests.errorReported)){apntag.requests.errorReported=!0;const r=`Unknown network error contacting endpoint over JSONP. Endpoint: ${e.url}`;Yi(r,t,n,"-1",x.qY.REQUEST_FAIL,a),ve(r)}}}},Ki=(e,t,n)=>{try{((e,t)=>{const n=[];e.forEach((e=>{const{targetId:a,tagId:r,invCode:i}=e,o=apntag.requests.tags[a]?.adTrackingId;b.addPlacementData(r,{placementId:r}),I.trackEvent({type:S.adServerRequest,data:{batchId:t,invCode:i,targetId:a,performance:performance.now(),adTrackingId:o}},r),n.includes(a)?I.trackCustomEvent({type:"duplicateTargetId",targetId:a,batchId:t},r):n.push(a);let s,d=document.getElementById(a);if(!d&&apntag.requests.tags[a]&&(s=apntag.requests.tags[a].wcElement),!d&&!s){const e=`Unable to locate ad slot with targetId ${a} for Telemetry logging.`;return I.trackCustomEvent({type:"adSlotNotFound",targetId:a,batchId:t,isWebComponent:!!s},r),void ye(e)}d=d||s;const c=(e=>{if(!e)return void ve(`Ad slot with targetId ${e.id} not found.`);const t=e.getBoundingClientRect(),n=t.top,a=t.bottom,r=t.height,i=n<window.innerHeight&&a>=0;if(0===r&&i)return!0;const o=i?Math.min(window.innerHeight,a)-Math.max(0,n):0;return i&&o/r>=.5})(d);let l,u;if(!apntag.requests.disableExpander&&!b.skipLogging){const e=(()=>{const e=document.createElement("div");return e.style.all="unset",e.style.display="block",e.style.width="10000px",e.style.height="10000px",e})();d.appendChild(e),({size:l,position:u}=Ke(a)),d.removeChild(e)}const{size:p,position:g}=Ke(a);I.trackCustomEvent({type:"preRenderAdData",targetId:a,batchId:t,invCode:i,isVisible:c,sizeWithExpander:l,positionWithExpander:u,sizeWithoutExpander:p,positionWithoutExpander:g,isWebComponent:!!s},r)}))})(JSON.parse(t.data).tags.map(((e,t)=>({targetId:n[t],tagId:e.id,invCode:e.code}))),e)}catch(e){const t=`Error logging pre-render telemetry: ${e.message}`;ve(t),_.trackCriticalError(x.Gy.L.NV,new Error(t))}},Qi=function(e,t,n,a){!function(e,t){Se(apntag.requests.tags,(e=>{e.utCalled||-1===t.indexOf(e.targetId)||it.emit(x.qY.REQUEST,e.targetId)})),we(`Ad is requested for member ${e}`)}(e,t);const r=apntag.requests;let i=Hi(r,e,Va,t);i=function(e){if(Oe().context&&"AMP-AD"===Oe().context.tagName){e.is_amp=!0,e.referrer_detection&&(e.referrer_detection.rd_can=Oe().context.canonicalUrl);const t=Oe().context.consentSharedData;if(t){const n={consent_string:t.consentString,consent_required:t.consentRequired};e.gdpr_consent=n}}return e}(i);const o=function(e){const t={},n=(()=>{Za||(Ya===`https://${x.sR.hK}`&&lr()&&(Ya=`https://${x.sR.sp}`),Ya!==`https://${x.sR.sp}`||lr()||(Ya=`https://${x.sR.hK}`));let e=Ya;Ka&&(e=`https://${x.sR.HM}`);let t=!1;return Se(apntag.requests.tags,(e=>{e.prebid&&(t=!0)})),t?e+x.sR.VW:e+x.sR.Yh})();return t.url=n,t.data=JSON.stringify(e),t}(i);ge(i.tags)?be("ast.loadTagsByMemberId: no defined tags at this point so no /UT request will be made"):"withCredentials"in new XMLHttpRequest?function(e,t,n,a,r){const i=e.data,o=new XMLHttpRequest;Ki(a,e,n),o.onload=function(){let e=null;if(200===this.status)try{e=JSON.parse(this.responseText),apntag.handleCb(e,i,a,r,n)}catch(e){ve(`failed to parse ad response from impbus: ${e.message}`),Yi(e.message,t,n,this.status,x.qY.REQUEST_FAIL,e)}else ve(`AST encountered an unexpected HTTP response: ${this.status} : ${this.statusText}`),Yi(`AST encountered an unexpected HTTP response: ${this.status} : ${this.statusText}`,t,n,this.status,x.qY.REQUEST_FAIL)},o.onerror=function(a){const r=a.target.status;Yi(`Error contacting impbus endpoint: ${e.url} http response code:${r}`,t,n,r,x.qY.REQUEST_FAIL)},A.addResourceToTrack("adRequestUrl",(t=>t.includes(e.url))),o.open("POST",e.url,!0),o.setRequestHeader("Content-Type","text/plain"),apntag.requests.test&&o.setRequestHeader("X-Is-Test",1),o.withCredentials=!0;try{o.send(i),apntag.requests.utCalled=!0}catch(n){ve(`Error making POST request: ${n}`),Zi(e,t)}}(o,e,t,n,a):Zi(o,e,t)},eo=function(e){Se(ja,((t,n)=>{const a=Number(n);if("none"!==n&&isNaN(a))ve("Invalid value for member");else{const t="none"===n?n:Number(n),a=280===t&&apntag.requests.use1pEndpoint;Ka=a,apntag.requests.refererInfo=Gi();const r=1e8,i=Math.floor(Math.random()*r);Se(e,(e=>{const t=apntag.requests.tags[e];if(!t.adTrackingId){const n=Math.floor(Math.random()*r);t.adTrackingId=n,t.batchId=i,I.trackCustomEvent({type:"loadTags",batchId:i,adTrackingId:n,performance:performance.now(),targetId:e})}}));{const n=Ee();!function(e,t,n){{const a=!(!e.privateAuction||!0!==e.privateAuction.enabled),r={client_request_id:t};if(e.topics&&le(e.topics.results)&&e.topics.results.length>0){const t=e.topics.results;r.topic=[],t.forEach((e=>{const t=r.topic.findIndex((t=>e.taxonomyVersion===t.taxonomy_version&&e.modelVersion===t.classifier_version));t>-1?r.topic[t].id.push(e.topic):r.topic.push({taxonomy_version:e.taxonomyVersion,classifier_version:e.modelVersion,id:[e.topic]})}))}a&&"cookieDeprecationLabel"in navigator?navigator.cookieDeprecationLabel.getValue().then((e=>{e&&(r.chrome_traffic_label=e,ye("navigator.cookieDeprecationLabel promise returned the following value: ",e))})).catch((e=>{ve("navigator.cookieDeprecationLabel promise did not resolve properly, see error notes: ",null,e)})).finally((()=>{r.private_auction_eligible=function(e=""){const t=!Pt()&&!!xt();return!!("runAdAuction"in navigator&&t&&["treatment_1.1","treatment_1.2","treatment_1.3","fake_treatment_1.1","fake_treatment_1.2","fake_treatment_1.3","prestable_treatment_1"].indexOf(e)>-1)}(r.chrome_traffic_label),n(r)})):(r.private_auction_eligible=!1,n(r))}}(apntag.requests,n,(a=>{apntag.requests.fledge=a,apntag.requests.privateAuction&&apntag.requests.privateAuction.enabled&&"string"==typeof a.chrome_traffic_label&&a.chrome_traffic_label.includes("treatment")&&!lr()&&!Pt()&&xt()?Ji(e,t,n,(a=>{Ie("Creating an AST Interest Group using the following config",a),function(e,t,n,a){{(e=>{Qa[e]=null})(n);const r=apntag.requests.privateAuction&&ue(apntag.requests.privateAuction.interestGroupTimeout)?apntag.requests.privateAuction.interestGroupTimeout:300;Ze({iframeAttributes:{id:x.xH.JOIN_INTEREST_GROUPS,name:x.xH.JOIN_INTEREST_GROUPS,src:x.i$.CR,allow:"join-ad-interest-group *; run-ad-auction *"},postMsgPayload:e,asyncIframeResponseCb:function(){ye("joinAdInterestGroup promise has finished.  Used config ",e),I.trackCustomEvent({type:"registeredFledgeInterestGroup",batchId:t,igConfig:e}),((e,t)=>{Qa[e]=!0})(n)},iframeTimeoutMs:r,exitCb:a})}}(a,i,n,(()=>{Qi(t,e,i,n)}))})):Qi(t,e,i,n)}))}}}))},to=function(e){var t;apntag.requests.topics&&!0===apntag.requests.topics.enabled&&!Pt()&&xt()&&!lr()?(t=t=>{apntag.requests.topics.results=t,ye("AST pulled the following Topics information from the browser",t),eo(e)},Ze({iframeAttributes:{id:x.xH.TOPICS,name:x.xH.TOPICS,src:x.i$.dV},iframeTimeoutMs:apntag.requests.topics&&ue(apntag.requests.topics.topicsTimeout)?apntag.requests.topics.topicsTimeout:300,exitCb:t})):eo(e)},no=function(e){try{e=e||Me(apntag.requests.tags,(e=>e.targetId)),le(e)||(e=[e]);let t=!1,n=!1,a=!1;_a(apntag.requests,(()=>{t=!0,n&&a&&to(e)})),function(r,i){li=r;const o=()=>{n=!0,t&&a&&to(e)};let s;function d(e){const t={us_privacy:e?e.uspString:void 0};li.us_privacy=t.us_privacy}function c(e){clearTimeout(s),d(),je(l(e))}function l(e){e&&be(`${e} Resuming request without CCPA USP consent information.`),o()}if(li.consentManagement&&(li.consentManagement.disabled||li.consentManagement.usp&&li.consentManagement.usp.disabled))return Ie("USP Consent module was disabled."),je(l());let u=1e4;if(li.consentManagement&&ue(li.consentManagement.timeout)&&(u=li.consentManagement.timeout),ci)return d(ci),je(l());s=setTimeout((function(){c("CCPA USP CMP workflow exceeded timeout threshold.")}),u),function(e,t){const n={};let a;try{a=window.__uspapi||window.top.__uspapi}catch(e){}if(de(a))a("getUSPData",1,e);else{let a,r=window;for(;!a;){try{r.frames.__uspapiLocator&&(a=r)}catch(e){}if(r===window.top)break;r=r.parent}if(!a)return t("CCPA USP CMP not found.");!function(t){function a(e){const t="string"==typeof e.data&&e.data.includes("uspapiReturn")?JSON.parse(e.data):e.data;if(t.__uspapiReturn){const e=t.__uspapiReturn;n[e.callId](e.returnValue,e.success),delete n[e.callId]}}window.__uspapi=function(e,a,r){const i=`${Math.random()}`,o={__uspapiCall:{command:e,version:a,callId:i}};n[i]=r,t.postMessage(o,"*")},re(window,"message",a,!1),window.__uspapi("getUSPData",1,(function(t){ie(window,"message",a,!1),e(t)}))}(a)}}((function(e){"object"!=typeof e||null===e||"string"!=typeof e.uspString||""===e.uspString?c(`CCPA USP CMP returned unexpected consentObject during lookup process; returned value was (${e})`):(clearTimeout(s),ci=e,d(ci),je(l()))}),c)}(apntag.requests),function(r,i){gi=r;const o=()=>{a=!0,t&&n&&to(e)},s="__gpp";let d;function c(e){const t={gpp:e&&""!==e.gppString?e.gppString:void 0};e&&e.applicableSections?t.gpp_sid=e.applicableSections:e&&e.applicableSection?t.gpp_sid=e.applicableSection:t.gpp_sid=pi.applicableSections,t.gpp_sid&&-1===t.gpp_sid[0]&&(t.gpp_sid=void 0),gi.gpp_consent=t}function l(e,t){clearTimeout(d),c(t),je(u(e))}function u(e){e&&be(`${e} Resuming request without GPP consent information.`),o()}const p=gi.consentManagement;if(p&&(p.disabled||p.gpp&&p.gpp.disabled))return Ie("GPP Consnent module was disabled."),je(u());let g=1e4;p&&ue(p.timeout)&&(g=gi.consentManagement.timeout),d=setTimeout((function(){l("GPP CMP workflow exceeded timeout threshold.",pi)}),g),function(e,t){function n(e){return e&&Array.isArray(e.applicableSections)&&e.applicableSections.length>0&&0!==e.applicableSections[0]}function a(e){return e&&Array.isArray(e.applicableSection)&&e.applicableSection.length>0&&0!==e.applicableSection[0]}const r={};let i=!1;const{cmpFrame:o,cmpDirectAccess:d}=function(){let e,t=window,n=!1;for(;;){try{if("function"==typeof t[s]){e=t,n=!0;break}}catch(e){}try{if(t.frames.__gppLocator){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}return{cmpFrame:e,cmpDirectAccess:n}}();if(!o)return t("GPP CMP not found.");if(d&&de(o[s])){Ie("Detected GPP CMP API is directly accessible, calling it now...");const e=o[s]("ping",((e,n)=>{!0===n&&e&&"1.1"===e.gppVersion?(Ie("Detected GPP CMP is running version 1.1.  Proceeding with next steps..."),ui="1.1",o[s]("addEventListener",c)):n||t('GPP CMP returned a failed "success" when calling the ping command. Check the state of CMP.')}));e&&"1.0"===e.gppVersion&&(Ie("Detected GPP CMP is running version 1.0.  Proceeding with next steps..."),ui="1.0",o[s]("addEventListener",c))}else Ie("Detected GPP CMP is outside the current iframe where AST is located, calling it now..."),l("ping",o,(e=>{!e||"1.0"!==e.gppVersion&&"1.1"!==e.gppVersion||(Ie(`Detected GPP CMP is running version${e.gppVersion}.  Proceeding with next steps...`),ui=e.gppVersion,l("addEventListener",o,u))}));function c(r){if(r)if(Ie("Received a response from GPP CMP for eventlistener",r),r.pingData&&"error"===r.pingData.cmpStatus)t("CMP returned with a cmpStatus:error response.  Please check CMP setup.");else if("1.0"===ui){if("sectionChange"===r.eventName||"loaded"===r.pingData.cmpStatus&&"visible"!==r.pingData.cmpDisplayStatus){const t=o[s]("getGPPData");Ie("Received a response from GPP CMP for getGPPData",t),e(t)}else if(!pi.applicableSections){const e=o[s]("getGPPData");Ie("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",e),n(e)?pi.applicableSections=e.applicableSections:a(e)&&(pi.applicableSections=e.applicableSection)}}else"1.1"===ui&&("sectionChange"===r.eventName||"signalStatus"===r.eventName&&"ready"===r.data||r.pingData&&"loaded"===r.pingData.cmpStatus&&"visible"!==r.pingData.cmpDisplayStatus?(Ie("Received a desired event response from GPP CMP, pingData was: ",r.pingData),e(r.pingData)):pi.applicableSections||(Ie("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",r.pingData),n(r.pingData)&&(pi.applicableSections=r.pingData.applicableSections)))}function l(e,t,n,a){const o=`${s}Call`;i||(window.addEventListener("message",(function(e){const t=`${s}Return`,n="string"==typeof e.data&&e.data.includes(t)?JSON.parse(e.data):e.data;if(n[t]&&n[t].callId){const e=n[t];r.hasOwnProperty(e.callId)&&r[e.callId](e.returnValue)}}),!1),i=!0),Ie("Making a postMessage call to the CMP for command: ",e);const d=Math.random().toString(),c={[o]:{command:e,parameter:a,version:"1.0"===ui?1:ui,callId:d}};r[d]=n,t.postMessage(c,"*")}function u(a){a&&(Ie("Received a response from GPP CMP for eventlistener",a),"error"===a.pingData.cmpStatus?t("CMP returned with a cmpStatus:error response.  Please check CMP setup."):"1.0"===ui?"sectionChange"===a.eventName||"loaded"===a.pingData.cmpStatus&&"visible"!==a.pingData.cmpDisplayStatus?l("getGPPData",o,g):pi.applicableSections||l("getGPPData",o,p):"1.1"===ui&&("sectionChange"===a.eventName||"signalStatus"===a.eventName&&"ready"===a.data||a.pingData&&"loaded"===a.pingData.cmpStatus&&"visible"!==a.pingData.cmpDisplayStatus?(Ie("Received a desired event response from GPP CMP, pingData was: ",a.pingData),e(a.pingData)):pi.applicableSections||(Ie("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",a.pingData),n(a.pingData)&&(pi.applicableSections=a.pingData.applicableSections))))}function p(e){Ie("Called GPP CMP early to determine the value of applicableSections, value returned from CMP: ",e),n(e)?pi.applicableSections=e.applicableSections:a(e)&&(pi.applicableSections=e.applicableSection)}function g(t){Ie("Received a response from GPP CMP for getGPPData",t),e(t)}}((function(e){e&&"object"==typeof e&&null!==e&&"string"==typeof e.gppString&&(Array.isArray(e.applicableSections)||Array.isArray(e.applicableSection))?(clearTimeout(d),c(e),je(u())):l(`GPP CMP returned unexpected consentObject during lookup process; returned value was (${e})`)}),l)}(apntag.requests)}catch(e){const t=`Error during loadTags() call: ${e.message}`;ve(t)}};function ao(e){if(ye(`getTag called for tag ${e}`),Ve(e))return e&&Wa[e]?Wa[e]:void 0;ve(`the ${e} tag is not defined.`,x.$9.Z)}const ro=function(e){const t={};return 0===e.length?apntag.requests.tags:(Se(apntag.requests.tags,((n,a)=>{for(let r=0;r<e.length;r++)e[r]===a&&(t[a]=n)})),t)};function io(e,t){Ja.document.querySelectorAll(`[${e}${null!==t?`="${t}"`:""}]`).forEach((e=>e.remove()))}const oo=function(e){const t=ro(e);Se(t,((e,n)=>{Se(za,(e=>{if(n===e){const a=Ja.document,r=t[n].wcElement||a.getElementById(e);if(!r)return;for(;r.hasChildNodes();)r.removeChild(r.firstChild)}}))})),Ja.document.querySelectorAll("[data-anxtracker-usersync]").forEach((e=>e.remove())),e.length>0?Se(e,(e=>{io("data-anxtracker",e)})):io("data-anxtracker",null)};b.addSessionData({}),((e,t)=>{if(b.inited)throw Error("Telemetry is already inited.");b.setSampleRate(e),b.inited=!0,function(e){var t;if(window.addEventListener("error",(t=>{m(t.filename)&&e.trackCriticalError("unhandled",t)})),(null===(t=y())||void 0===t?void 0:t.includes("give_me_error_please"))&&setTimeout((()=>{throw new Error("I'm error from the prod")}),1e3),E){const t=Symbol.for(`isTelemetryInited:${E}`);window[t]||(window.addEventListener("unhandledrejection",(t=>{const n=function(e=""){var t;return null===(t=e.match(/http(s?):\/\/\S+/))||void 0===t?void 0:t[0]}(t.reason instanceof Error?t.reason.stack:void 0);n&&m(n)&&n.includes(E)&&e.trackCriticalError("unhandled.rejection",t.reason)})),window[t]=!0)}}(_),A.init(),I.trackEvent({type:S.sdkInit,data:void 0})})(.001),I.trackCustomEvent({type:"ast.init",performance:performance.now()});const so=x.Ve.s6,co=x.Ve.G_,lo=x.ZJ.ZH,uo=x.ZJ.uk,po=x.AD.JN;re(Ja,"message",(function(e){if(e.origin!==Be()||"string"!=typeof e.data)return;let t;Ie("Data sent from creative",e.data);try{t=JSON.parse(e.data)}catch(t){return void("nobid"===e.data?ye("No bid response returned"):ve(`Invalid data from creative: ${e.data}`))}if(Re(t,"eventType"))"adError"===t.eventType&&window.apntag.recordErrorEvent(t.exception,t.targetId);else switch(t.name){case"expand":!function(e){{ye("Expand iframe started by host");let t,n,a,r,i=!1,o=!1,s=0,d=0,c=0,l=0,u=Oe().document.getElementById(x.H3.C+e.targetId);const p=Nt.getInstance().getIframe(e.targetId),g=p.iframe.style;u||(u=p.iframe.parentNode);const m=u.style;m.display="";let f=parseInt(m.width,10),h=parseInt(m.height,10);if(isNaN(f)&&(f=0),isNaN(h)&&(h=0),e.bounds.multiDir?(n=Pe("data.bounds.left",e.bounds.left,Sa),r=Pe("data.bounds.right",e.bounds.right,Sa),t=Pe("data.bounds.top",e.bounds.top,Sa),a=Pe("data.bounds.bottom",e.bounds.bottom,Sa),c=f+n+r,l=h+t+a,t?(d=-1*t,o=!0):d=0,n?(s=-1*n,i=!0):s=0):(s=e.bounds.x,d=e.bounds.y,i=s<0,o=d<0,c=i?f+-1*s:f+s,l=o?h+-1*d:h+d),c<=f&&l<=h)return;g.width=`${c}px`,g.height=`${l}px`,i&&(g.left=`${s}px`),o&&(g.top=`${d}px`),g.zIndex=x.l2.D,g.position="relative",m.position="relative",e.bounds.push?(m.width=`${c}px`,m.height=`${l}px`):(m.width=`${f}px`,m.height=`${h}px`);const y=function(){!function(e,t,n){{const a=n.iframe.contentWindow,r={};r.targetId=t.targetId,r.status=e,r.geom=qa(t.targetId,n.iframe),jt(a,JSON.stringify(r),Be())}}(x.l2.X.gH,e,p)};e.ext&&"number"==typeof e.ext.tweenTime?function(e,t,n,a){{const r=t.style;r.transition=`height ${e.ext.tweenTime}ms ease`,r.height=n,r["overflow-y"]="hidden",re(t,"transitionend",(()=>{"function"==typeof a&&a()}))}}(e,p.iframe,l,y):y()}}(t);break;case"collapse":!function(e){{ye("Collapse iframe started by host");const t=Oe(),n=Nt.getInstance().getIframe(e.targetId),a=n.iframe.style;let r=t.document.getElementById(x.H3.C+e.targetId);r||(r=n.iframe.parentNode);const i=r.style;let o=n.originalWidth,s=n.originalHeight;e.ext&&(0===e.ext.width&&(o=0),0===e.ext.height&&(s=0)),a.left="",a.top="0px",i.width=`${o}px`,a.width=`${o}px`,i.height=`${s}px`,a.height=`${s}px`,a.zIndex="";const d=n.iframe.contentWindow,c={};c.targetId=e.targetId,c.geom=qa(e.targetId,n.iframe),c.status=x.l2.X.g,jt(d,JSON.stringify(c),Be())}}(t);break;case"cmp":!function(e){{function t(){const t=apntag.requests.gdpr_consent,n=Nt.getInstance().getIframe(e.targetId).iframe.contentWindow,a={targetId:e.targetId,gdpr_consent:t,status:x.l2.X.dl};jt(n,a,Be())}if(apntag.requests.gdpr_consent)return void t();_a(apntag.requests,t)}}(t);break;case"resizeAd":apntag.resizeAd(t.targetId,t.cmd);break;case"mediatedNative":apntag.handleMediationBid(t.targetId);break;case"emitEvent":apntag.emitEvent.apply(null,t.cmd);break;case"message":default:break;case"updateRenderStatus":Lt.setRendererStatus(`${t.rId}_${t.targetId}`,t.status);break;case"setParentDivStyleDefaultProp":{const e=apntag.requests.tags[`${t.targetId}`].wcElement,n=e?e.querySelector(`#${x.H3.C}${t.targetId}`):document.getElementById(x.H3.C+t.targetId);Se(t.cmd,((e,t)=>{""===n.style[t]&&(n.style[t]=e)}));break}}})),Ha.expansionByPush=!1,Ha.expansionByOverlay=!0,Ha.readCookie=!1,Ha.writeCookie=!1,Ha.sandbox=!1,function(){if(Mt)try{re(Fa.document,"apntag_iTunesLaunch",Ba)}catch(e){}}(),re(window,"message",(e=>{try{const t=e.data;if("perfObserverError"===t.eventName)return ve(`Performance observer error in iframe for ${t.targetId}: ${t.error}`),void _.trackCriticalError(x.Gy.L.im,new Error(`Error in iframe performance observer for ${t.targetId}: ${t.error}`));if(t?.targetId&&t.eventName&&"first-contentful-paint"===t.eventName){const e=t.targetId,n=apntag.requests.tags[e];if(!n)return;const a=n.adTrackingId,r=`${e}_${a}`,i=D[r];if(P[r])return;if(Ie(`Received first-contentful-paint event for targetId: ${e}`),i){const o=performance.now()-i;Ie(`Render time for ${e}: ${o}ms (first-contentful-paint)`),P[r]=!0;const s=n.tagId||n.adResponse.tag_id;I.trackCustomEvent({type:"creativeRenderTime",targetId:e,adTrackingId:a,batchId:t.batchId,renderTime:o,paintEvent:"first-contentful-paint",performance:performance.now(),adomain:t.adomain,buyerMemberId:t.buyerMemberId,msxCreativeId:t.msxCreativeId,crids:t.crids,auctionId:t.auctionId},s,{sampling:.01}),delete D[r],setTimeout((()=>{delete P[r]}),6e4)}}}catch(e){ve("Error processing paint event message:",e),_.trackCriticalError(x.Gy.L.PL,new Error(`Error processing paint event message: ${e}`))}}));try{console.info?console.info("AST library loaded: 1.10.8"):console.log("AST library loaded: 1.10.8")}catch(e){}Ja.apntag=typeof Ja.apntag!==lo?Ja.apntag:{};const go=Ja.apntag;function mo(e){e.length>0?(Se(e,(e=>{e&&!Ve(e)&&be(`${e} is not defined.`,x.$9.Z)})),Se(go.requests.tags,(t=>{const n=t.targetId;if(e.includes(go.requests.tags[n].targetId)){const e=ir(),t=ar();0!==Object.keys(e).length&&(delete e[n],or(e)),0!==Object.keys(t).length&&(delete t[n],rr(t)),delete go.requests.tags[n],Nt.getInstance().removeIframe(n),Ie(`Removed tag with targetId '${n}' from AST internals.`)}})),0===Object.keys(go.requests.tags).length&&(go.requests={},go.requests.tags={})):(go.requests={},go.requests.tags={},or({}),rr({}),Nt.getInstance().resetInstance(),Ie("Removed all tags from AST internals."))}function fo(e){let t={};return Se(go.requests.tags,(n=>{e!==n.uuid&&e!==n.targetId||(t=n)})),t}function ho(e,t){const n=t||Ja.document.body;Array.isArray(e)&&e.length?e.forEach((e=>{_e(n,e)})):"string"==typeof e&&e&&_e(n,e)}function yo(e){return!("string"!=typeof e||!e)}function bo(e,t,n){"string"==typeof e&&e&&B({strategy:"WithContentAndAttributes",data:{content:e,attributes:{"data-anxtracker":t.targetId||""}},domElement:n})}go.anq=go.anq||[],go.debug=go.debug||!1,go.dongle=go.dongle||void 0,go.loaded=!0,go.requests=go.requests||{},go.requests.keywords=go.requests.keywords||{},dr(x.sR.hK),go.requests.tagsOnPageCount=go.requests.tagsOnPageCount||0,go.requests.waitOnTagsCount=go.requests.waitOnTagsCount||0,go.requests.showTagDefinedMap=go.requests.showTagDefinedMap||ir(),go.highlightAd=function(e){if(Ie("Invoking apntag.highlightAd",arguments),I.trackCustomEvent({type:"apntag.highlightAd"}),e){const t=ar()[e];t&&(t.style.border="3px solid #e67300")}},re(window,"message",(e=>{e.data&&e.data.eventName&&Object.values(x.eZ).includes(e.data.eventName)&&go.recordTagPerformanceEvent(e.data,e.data.targetId)})),go.anq.push=function(e){e.call()},go.setEndpoint=function(e,t){Ie("Invoking apntag.setEndpoint",arguments),I.trackCustomEvent({type:"apntag.setEndpoint"}),dr(e,t)},go.setPageOpts=function(e){Ie("Invoking apntag.setPageOpts",arguments),I.trackCustomEvent({type:"apntag.setPageOpts",performance:performance.now()}),(e=>{if(e){if(e.member&&(apntag.requests.member=Number(e.member)),e.use1pEndpoint&&(apntag.requests.use1pEndpoint=!0),e.targetingParams&&(apntag.requests.targetingParams=e.targetingParams,be("targetingParams will be deprecated soon. Please use keywords instead")),e.keywords&&(apntag.requests.keywords=e.keywords),e.user&&(apntag.requests.user=e.user),e.app&&(apntag.requests.app=e.app),e.device&&(apntag.requests.device=e.device),e.geoOverride){const t=function(e){const t=e.countryCode;if("string"!=typeof t||2!==t.length)return void be("Ignoring geoOveride options, Invalid country code, it should be of type String and of 2 characters.");const n=e.zip;if(!("string"!=typeof n||n.length<1))return{countryCode:t.toUpperCase(),zip:n};be("Ignoring geoOveride options, Invalid zip code, it should be of type String and of atleast 1 character.")}(e.geoOverride);t&&(apntag.requests.geoOverride=t)}if(e.site&&(apntag.requests.site=e.site),e.content&&(apntag.requests.content=e.content),e.disablePsa&&(apntag.requests.disablePsa=!0),apntag.requests.enableSafeFrame=!1,e.enableSafeFrame&&(Ga(),apntag.requests.enableSafeFrame=!0),e.publisherId&&(apntag.requests.publisherId=e.publisherId),e.consentManagement&&(apntag.requests.consentManagement=e.consentManagement),e.auctionTimeout&&(apntag.requests.auctionTimeout=e.auctionTimeout),e.enableMediationEvents&&(apntag.requests.enableMediationEvents=!0),e.us_privacy&&(ce(e.us_privacy)?apntag.requests.us_privacy=e.us_privacy:be("Ignoring us_privacy, it should be a string")),e.pageUrl&&(apntag.requests.pageUrlOverride=e.pageUrl),e.test&&(apntag.requests.test=!0),e.schain&&(apntag.requests.schainConfig=e.schain),e.dsa&&(apntag.requests.dsa=e.dsa),e.msft&&(apntag.requests.msft=e.msft),e.topics&&(apntag.requests.topics=e.topics),e.privateAuction&&(apntag.requests.privateAuction=e.privateAuction),e.loadOutstreamUpgradeUrl&&(apntag.requests.loadOutstreamUpgradeUrl=e.loadOutstreamUpgradeUrl),e.trackingManagement){const t=e.trackingManagement;if(t.native&&t.native.loadViewabilityScriptAt){const e=ce(t.native.loadViewabilityScriptAt)?t.native.loadViewabilityScriptAt.toLowerCase():null;!e||e!==x.nP.G.W&&e!==x.nP.G.D?be('Ignoring trackingManagement.native.loadViewabilityScriptAt, it should be either "impression" or "adResponse"'):(apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.native={loadViewScriptAt:e})}if(t.userSync){const e={};ue(t.userSync.syncDelay)&&(e.syncDelay=t.userSync.syncDelay),"boolean"==typeof t.userSync.syncEnabled&&(e.syncEnabled=t.userSync.syncEnabled),ue(t.userSync.publisherId)&&(e.publisherId=t.userSync.publisherId),ue(t.userSync.sellerId)&&(e.sellerId=t.userSync.sellerId),apntag.requests.trackingManagement=apntag.requests.trackingManagement||{},apntag.requests.trackingManagement.userSync=e}}if(hr(e),e.renderingManagement){const t=e.renderingManagement;apntag.requests.renderingManagement=apntag.requests.renderingManagement||{},"boolean"==typeof t.insertWrapperDiv&&(apntag.requests.renderingManagement.insertWrapperDiv=t.insertWrapperDiv),"boolean"==typeof t.sandboxAdIframe&&(apntag.requests.renderingManagement.sandboxAdIframe=t.sandboxAdIframe),Array.isArray(t.sandboxAttributes)&&(apntag.requests.renderingManagement.sandboxAttributes=t.sandboxAttributes)}"disableExpander"in e&&(apntag.requests.disableExpander=e.disableExpander)}})(e)},go.defineTag=function(e){Ie("Invoking apntag.defineTag",arguments),b.addPlacementData(e.tagId,{placementId:e.tagId}),I.trackCustomEvent({type:"apntag.defineTag",performance:performance.now()},e.tagId);const t=function(e){const t=function(e){if(e.rid&&(apntag.requests.keywords.rid=e.rid),e.provider_id&&(apntag.requests.keywords.provider_id=e.provider_id),e.debug&&(apntag.debug=e.debug),e.astToolkit&&e.astDongle&&(apntag.requests.toolkit={enabled:!0,dongle:e.astDongle}),e.size)ve("Size is deprecated, please use sizes instead.");else if(e.member?e.member=Number(e.member):e.member=apntag.requests.member,e.member||(e.member="none"),e.tagId||e.invCode&&e.member){if(e.sizeMapping&&!wr(e))return void ve(`tag not mapped to any sizes for device width: ${e.targetId}`);try{const t=e.targetId,n=function(e,t){const n=e.member;return apntag.requests=apntag.requests||{},apntag.requests.tags=apntag.requests.tags||{},apntag.requests.utCalled=apntag.requests.utCalled||!1,apntag.requests.hasLeft=apntag.requests.hasLeft||!1,apntag.requests.cbCalled=apntag.requests.cbCalled||!1,apntag.requests.enableSafeFrame&&(e.enableSafeFrame=!0),e.safeframe=Le(Ha)||{},Re(e,"safeframeConfig")&&(Re(e.safeframeConfig,"allowExpansionByPush")&&(e.safeframe.expansionByPush=e.safeframeConfig.allowExpansionByPush),Re(e.safeframeConfig,"allowExpansionByOverlay")&&(e.safeframe.expansionByOverlay=e.safeframeConfig.allowExpansionByOverlay),Re(e.safeframeConfig,"sandbox")&&(e.safeframe.sandbox=e.safeframeConfig.sandbox),Re(e.safeframeConfig,"meta")&&(e.safeframe.meta=e.safeframeConfig.meta)),apntag.requests.tags[t]=e,apntag.requests.tags[t].utCalled=apntag.requests.tags[t].utCalled||!1,apntag.requests.tags[t].showTagCalled=apntag.requests.tags[t].showTagCalled||!1,apntag.requests.tags[t].displayed=apntag.requests.tags[t].displayed||!1,apntag.requests.tags[t].initialHeight=1,apntag.requests.tags[t].initialWidth=1,apntag.requests.tags[t].on=apntag.onEvent||void 0,apntag.requests.tags[t].off=apntag.offEvent||void 0,apntag.requests.tags[t].setSizes=apntag.setSizes||void 0,apntag.requests.tags[t].modifyTag=apntag.modifyTag||void 0,apntag.requests.trackingManagement?apntag.requests.tags[t].trackingManagement=apntag.requests.trackingManagement:(apntag.requests.tags[t].trackingManagement={native:{loadViewScriptAt:vr},mobileOmidImpTracking:!0},je(yr)),apntag.requests.tags[t].renderingManagement||(apntag.requests.tags[t].renderingManagement={}),["insertWrapperDiv","sandboxAdIframe","sandboxAttributes"].forEach((n=>{e.renderingManagement&&Re(e.renderingManagement,n)?apntag.requests.tags[t].renderingManagement[n]=e.renderingManagement[n]:apntag.requests.renderingManagement&&Re(apntag.requests.renderingManagement,n)&&(apntag.requests.tags[t].renderingManagement[n]=apntag.requests.renderingManagement[n])})),apntag.requests.tags[t].refresh=function(){return apntag.refresh(this.targetId)},apntag.requests.tags[t].setKeywords=function(e,t){return apntag.setKeywords(this.targetId,e,t)},ja[n]=typeof ja[n]===br?[]:ja[n],ja[n].push(e.targetId),ir()[e.targetId]&&(apntag.requests.tags[t].showTagCalled=!0),apntag.requests.tags[t]}(e,t);return ye(`defineTag called for: ${t}`),apntag.requests&&!0===apntag.requests.utCalled&&!apntag.requests.tags[t].utCalled&&ye("A placement was loaded after ut call was started. These ad calls will not be coordinated"),n}catch(e){ve(`buildAdTagContainer: ${e.message}`)}}else ve(`tagId or (invCode & memberId) should be defined for targetId: ${e.targetId}`)}(e);if(!t)return void ve(`No ad will be requested for targetId: ${e.targetId}`);if(Va.push(t),Wa[t.targetId])return Wa[t.targetId];const n={targetId:t.targetId,on:t.on,off:t.off,modifyTag:t.modifyTag,setKeywords:t.setKeywords};return Wa[t.targetId]=n,n}(e);return t},go.getTag=function(e){if(e&&!Ve(e))return void ve(`${e} is not defined.`,x.$9.Z);let t,n;return e?(n=ao(e),t=We(go.requests.tags[e],n)):(t={},go.requests.tags?Object.keys(go.requests.tags).forEach((e=>{n=ao(e),t[e]=We(go.requests.tags[e],n)})):be("getTag is called before defineTag function, so the tag object will be empty.")),t},go.getAdWrap=function(e){if(Ie("Invoking apntag.getAdWrap",arguments),I.trackCustomEvent({type:"apntag.getAdWrap",tagId:e}),Ve(e))return e&&go.requests.tags&&go.requests.tags[e]&&go.requests.tags[e].adWrap?go.requests.tags[e].adWrap:void 0;ve(`the ${e} tag is not defined.`,x.$9.Z)},go.setSizes=function(e,t){Ie("Invoking apntag.setSizes",arguments),I.trackCustomEvent({type:"apntag.setSizes"},e),arguments.length<2&&(t=e,e=this.targetId),Ve(e)?go.requests.tags[e].sizes=t:ve(`the ${e} tag is not defined.`,x.$9.Z)},go.modifyTag=function(e,t){Ie("Invoking apntag.modifyTag",arguments),I.trackCustomEvent({type:"apntag.modifyTag"});const n={};arguments.length<2&&(t=e,e=this.targetId),Ve(e)?((t.sizes||t.sizeMapping)&&wr(t,e),Se(go.requests.tags[e],((e,t)=>{n[t]=e})),Se(t,((e,t)=>{n[t]=e})),go.requests.tags[e]=n):ve(`the ${e} tag is not defined.`,x.$9.Z)},go.setKeywords=function(e,t,n){Ie("Invoking apntag.setKeywords",arguments),I.trackCustomEvent({type:"apntag.setKeywords",targetId:e});const a={};"object"==typeof t&&null!==t?Ve(e)?(Se(go.requests.tags[e],((e,t)=>{a[t]=e})),a.keywords=a.keywords||{},"object"==typeof n&&null!==n&&!0===n.overrideKeyValue?Se(t,((e,t)=>{a.keywords[t]=e})):Se(t,((e,t)=>{Re(a.keywords,t)?le(a.keywords[t])?a.keywords[t]=a.keywords[t].concat(e):a.keywords[t]=[a.keywords[t]].concat(e):a.keywords[t]=e})),go.requests.tags[e]=a):ve(`the ${e} tag is not defined.`,x.$9.Z):be("unable to set keywords it should be an object")},go.onEvent=function(e,t,n){if(Ie("Invoking apntag.onEvent",arguments),2===arguments.length&&"function"==typeof t&&typeof this.targetId===lo)n=t,t="*";else if(arguments.length<3&&(n=t,t=this.targetId,!Ve(t)))return void ve(`the ${t} tag is not defined.`,x.$9.Z);it.on(e,t,n)},go.offEvent=function(e,t,n){if(Ie("Invoking apntag.offEvent",arguments),1===arguments.length&&typeof this.targetId===lo)t="*";else if(arguments.length<2&&(t=this.targetId,!Ve(t)))return void ve(`the ${t} tag is not defined.`,x.$9.Z);if(le(e))for(let a=0;a<e.length;a++)it.off(e[a],t,n);else it.off(e,t,n)},go.loadTags=function(e){Ie("Invoking apntag.loadTags",arguments),I.trackCustomEvent({type:"apntag.loadTags",tagIds:e,performance:performance.now()}),no(e)},go.getAstSessionId=function(){Ie("Invoking apntag.getSessionId");const e=b.getSessionData().sessionUuid;return I.trackCustomEvent({type:"apntag.getSessionId"}),e},go.refresh=function(e){Ie("Invoking apntag.refresh",arguments),I.trackCustomEvent({type:"apntag.refresh",targetId:e,performance:performance.now()}),function(e){apntag.requests.utCalled=!1,apntag.requests.hasLeft=!1,apntag.requests.cbCalled=!1,apntag.requests.errorReported=!1,oo(e);const t=ro(e);Se(t,(e=>{e.utCalled=!1,e.displayed=!1,e.isMediated=!1,e.isBannerMediation=!1,e.isVideoMediation=!1,e.ad={},e.adTrackingId="",e.batchId="";const t=e.privateAuctionResults&&e.privateAuctionResults.auctionTimestamp||0;t&&t+6e4<=fe()&&(delete e.privateAuctionResults,delete e.markedForFledge)}));try{no()}catch(e){ve(`refreshTags ${e.message}`)}}($e(e))},go.clearRequest=function(e){Ie("Invoking apntag.clearRequest",e||arguments),I.trackCustomEvent({type:"apntag.clearRequest",targetId:e}),mo($e(e))},go.removeTag=function(e){const t=$e(e);t.forEach((e=>{go.requests.tags[e]&&(go.requests.tags[e].startRemove=!0)})),Ie("Invoking apntag.removeTag",e||arguments),I.trackCustomEvent({type:"apntag.removeTag",targetId:e}),oo(t),mo(t)},go.resizeAd=function(e,t,n={}){Ie("Invoking apntag.resizeAd",arguments),I.trackCustomEvent({type:"apntag.resizeAd",targetId:e}),function(e,t,n={}){let a=0,r=0;le(t)&&2===t.length?(r=t[0],a=t[1]):ve("resizeAd must be invoked with a (targetId,[width, height])");const i=ar()[e];if(!i)return void ve(`Failed to find target for resizeAd : ${e}`);const{resizeAdParentDiv:o}=n,s=apntag.requests.tags[e].wcElement,d=ao(e),c=Fe(d),l=s?s.querySelector(`#${c}`):Ja.document.getElementById(c),u=apntag.requests.tags[e];if(!l)return void ve(`Failed to find target for resizeAd: ${e}`);let p=!1;if("boolean"==typeof o?p=o:u&&"boolean"==typeof u.resizeAdParentDiv&&(p=u.resizeAdParentDiv),p&&(l.style.height=`${a}px`,l.style.width=`${r}px`,l.style.height=a,l.style.width=r),l.style.height=a,l.style.width=r,i.height=`${a}px`,i.width=`${r}px`,i.height=a,i.width=r,u&&!u.enableSafeFrame&&("none"!==l.style.display&&0===a&&0===r?(u.styleDisplay=l.style.display,l.style.display="none"):"none"===l.style.display&&0!==a&&0!==r&&(l.style.display=u.styleDisplay||"inline")),ye(`ResizeAd successful for targetId: ${e}`),u&&u.isMediated&&i.contentWindow){const e=Oe(),t=`${e.location.protocol}//${e.location.host}`,n={name:"resizeAd",size:[r,a]};i.contentWindow.postMessage(JSON.stringify(n),t)}}(e,t,n)},go.enableCookieSet=function(){var e,t,n;be("apntag.enableCookieSet has been depreciated"),I.trackCustomEvent({type:"apntag.enableCookieSet"}),e=window.addEventListener?"addEventListener":"attachEvent",t=window[e],n="attachEvent"==e?"onload":"load","complete"===document.readyState||"interactive"===document.readyState?o():t(n,(function(e){o()}),!1)},go.collapseAd=function(e,t,n){Ie("Invoking apntag.collapseAd",arguments),be("apntag.collapseAd has been depreciated, Please use apntag.resizeAd"),I.trackCustomEvent({type:"apntag.collapseAd",targetId:e});let a=0,r=0;const i=ao(e);if(!i)return void ve(`CollapseAd failed to find targetId : ${e}`);const o=Fe(i);typeof t===uo&&(a=t),typeof n===uo&&(r=n);const s=Ja.document.getElementById(o);if(null===s)return void ve(`CollapseAd failed to find ad div : ${e}`);go.resizeAd(e,[r,a]),s.style.height=a,s.style.width=r,s.style.display="none";const d=go.requests.tags[e],c=mr(d.adResponse);it.emit(x.qY.COLLAPSE,e,c)},go.showTag=function(e,t){let n;if(Ie("Invoking apntag.showTag",arguments),"object"==typeof t&&(t.hasOwnProperty("iframeWindow")||t.hasOwnProperty("wcElement"))){if(n=t.wcElement instanceof Element&&t.wcElement,t.wcElement&&!n)return void ve(`wcElement is not a DOM element : ${e}`);t=t.iframeWindow||Ja}else t=t||Ja;const a=go.requests.tags&&go.requests.tags[e];I.trackCustomEvent({type:"apntag.showTag",divId:e,isWebComponent:!!n,performance:performance.now(),batchId:a?.batchId,adTrackingId:a?.adTrackingId}),function(e,t,n){if(ye(`showTag called for ${e}`),Rr({targetId:e,wcElement:n}),ir()[e]=!0,Ve(e)){const a=apntag.requests.tags[e];if(a.showTagCalled=!0,a.curWindow=t,a.wcElement=n,a.displayed)return void be(`Attempting to display ad that is already displayed, will not render this ad again: ${e}`);if(apntag.requests.utCalled)if(a.adResponse){const e=Hr(a,Ha,ar(),Ga);za.push(e),apntag.requests.hasLeft&&He()}else apntag.requests.checkDisplay=!0;else be(`${e} : showTag() called before ad request was made. This placement might not display if a subsequent loadTags() call is not made`)}else ye(`the ${e} tag was loaded before the ad placement was available.`,x.$9.Z)}(e,t,n)},go.setPageTargeting=function(e,t){Ie("Invoking apntag.setPageTargeting",arguments),I.trackCustomEvent({type:"apntag.setPageTargeting"}),go.requests.targetingParams&&e&&t&&(go.requests.targetingParams[e]=t)},go.getPageTargeting=function(e){if(Ie("Invoking apntag.getPageTargeting",arguments),I.trackCustomEvent({type:"apntag.getPageTargeting"}),go.requests.targetingParams&&e)return go.requests.targetingParams[e]},go.clearPageTargeting=function(e){Ie("Invoking apntag.clearPageTargeting",arguments),I.trackCustomEvent({type:"apntag.clearPageTargeting"}),go.requests.targetingParams&&e&&delete go.requests.targetingParams[e]},go.enableDebug=function(){go.debug=!0,Ie("Invoking apntag.enableDebug",arguments),I.trackCustomEvent({type:"apntag.enableDebug"})},go.disableDebug=function(){Ie("Invoking apntag.disableDebug",arguments),I.trackCustomEvent({type:"apntag.disableDebug"}),go.debug=!1},go.notify=function(e,t,n){e?(I.trackCustomEvent({type:"apntag.notify",targetId:n}),Lt.invokeNotify(e,t,n)):ve("apntag.notify must be called with `messageType`")},go.registerRenderer=function(e,t){Ie("Invoking apntag.registerRenderer",arguments),I.trackCustomEvent({type:"apntag.registerRenderer"}),Lt.registerRenderer(e,t)},go.getAstVersion=function(){return Ie("Invoking apntag.getAstVersion"),"1.10.8"},go.recordErrorEvent=function(e,t){Ie("Invoking apntag.recordErrorEvent",arguments),"string"==typeof e&&(e=new Error(e)),_.trackCriticalError("recordErrorEvent",e);const n=go.requests.tags[t],a=mr(n.adResponse),r=et(e.message,t,e,200);it.emit(x.qY.ERROR,t,r,a)},go.recordTagPerformanceEvent=function(e,t){if(Ie("Invoking apntag.recordTagPerformanceEvent",arguments),Object.values(x.eZ).includes(e.eventName)){const n=go.requests.tags[t],a=mr(n.adResponse);I.trackCustomEvent({type:e.eventName,...e,performance:performance.now(),adTrackingId:n?.adTrackingId},a.tagId)}else Ie("Unhandled performance event",arguments)},go.handleCb=function(e,t,n,a,r){Ie("Invoking apntag.handleCb",arguments);try{oi(e,t,n,a)}catch(e){const t=e.message?e.message:e;ve("Internal AST error : ",e),Yi(t,void 0,r,200,x.qY.BAD_REQUEST,e)}},go.emitEvent=function(e,t,n){if(n&&n.content_source&&!go.requests.enableMediationEvents)return;Ie("Invoking apntag.emitEvent",arguments);const a=fo(e);if("impression"===t&&I.trackEvent({type:S.impression,data:{enableSafeFrame:!(!a.enableSafeFrame&&!a.alwaysUseXDomainIframe),batchId:a.batchId,performance:performance.now(),adTrackingId:a.adTrackingId}},a.tagId),"click"===t){const e=qr(a.wcElement||Ja.document.getElementById(a.targetId));e?.recordAdClick(),I.trackEvent({type:S.adClick},a.tagId)}!function(e,t,n){const a=fo(e),r=function(e,t,n){const a=e.adResponse&&e.adResponse.ads&&e.adResponse.ads.length,r=a&&e.adResponse.ads[a-1].ad_type===x.Ve.s6;let i;return i=e.isMediated&&r&&!n?mr(e.adResponse,e.adResponse.ads[a-1]):mr(e.adResponse,n),i}(a,0,n);var i;ye(`handling event for DOM ID:  ${r.targetId} eventType : ${t}`),(t=t===x.Sz.S?"adLoaded":t)===x.qY.LOADED||t===x.qY.LOADED_MEDIATED||t===x.qY.NO_BID_MEDIATED?it.emit(t,r.targetId,r):it.emit(t,r.targetId),t===x.qY.NO_BID&&a.isMediated&&(i=a.adResponse,_e(window.document.body,i[po],i.uuid))}(e,t,n)},go.getAdMarkup=function(e,t){if(I.trackCustomEvent({type:"apntag.getAdMarkup",targetId:e}),go.requests.tags&&go.requests.tags[e]){const n=go.requests.tags[e];if(n.uuid===t)return n.adResponse.ads}},go.setSafeFrameConfig=function(e){I.trackCustomEvent({type:"apntag.setSafeFrameConfig"}),Re(e,"allowExpansionByPush")&&(Ha.expansionByPush=e.allowExpansionByPush),Re(e,"allowExpansionByOverlay")&&(Ha.expansionByOverlay=e.allowExpansionByOverlay),Re(e,"sandbox")&&(Ha.sandbox=e.sandbox),Re(e,"meta")&&(Ha.meta=e.meta)},go.setTrkjsEndpoint=function(e){Ie("Invoking apntag.setTrkjsEndpoint",arguments),I.trackCustomEvent({type:"apntag.setTrkjsEndpoint",trkjsUrl:e}),(e=>{const t=Oe(),n=/^http(s)?:\/\/outlook(-sdf)?\.(live|office(365)?|cloud)\.(com|microsoft)$/,a=/^http(s)?:\/\/ntp\.msn\.com$/;if(Ae(e,"https://"))try{const r=new URL(t.location.href);r.origin.match(n)||r.origin.match(a)?(tr=e,ye(`Setting trk.js URL to: ${tr}`)):be(`Attempted to override the trk.js URL on an unsupported domain.  Referer was ${t.location.href}`)}catch(e){be("Encountered an issue when reading the referer of the page",e)}else be(`Need to set a full secure URL for trk.js; attempted value was: ${e}`)})(e)},go.fireImpressionTrackers=function(e,t){if(e.impressionTrackersFired)return;e.impressionTrackersFired=!0;const n=t instanceof Element,a=n?t.id:t,r=n?t:document.getElementById(t),i=fo(e.uuid);Ie("Firing impression trackers for",e.tagId),a&&Ie("Loading impression trackers in DOM element ",a),I.trackEvent({type:S.impression,data:{enableSafeFrame:!(!i.enableSafeFrame&&!i.alwaysUseXDomainIframe),batchId:e.batchId,performance:performance.now(),adTrackingId:i?.adTrackingId}},e.tagId);try{const t=e?.native?.ortb;t&&(ho(t.imptrackers,r),yo(t.jstracker)&&bo(t.jstracker,e,r),Array.isArray(t.eventtrackers)&&t.eventtrackers&&t.eventtrackers.forEach((t=>{1===t.event&&1===t.method?ho(t.url,r):1===t.event&&2===t.method&&yo(t.url)&&bo(t.url,e,r)}))),ho(e?.native?.impressionTrackers,r),yo(e?.native?.javascriptTrackers)&&bo(e.native.javascriptTrackers,e,r)}catch(t){ve("Encountered error loading imp or js tracker for adObj:",e,t)}i&&i.trackingManagement&&i.trackingManagement.native&&i.trackingManagement.native.loadViewScriptAt===x.nP.G.D&&(Ie("Loading native viewability script during fireImpressionTrackers"),fr(i.adResponse.ads[0],i.targetId,r))},go.attachClickTrackers=function(e,t){const n=t instanceof Element,a=n?t.id:t,r=n?t:document.getElementById(t);r?(Ie("Attaching click track handler to",a),re(r,"click",(()=>{const t=(e?.native?.clickTrackers||[]).concat(e?.native?.ortb?.link?.clicktrackers||[]);I.trackEvent({type:S.adClick},e.tagId);const n=qr(r);n?.recordAdClick(),t&&t.length&&(Ie("Firing click trackers for",e.tagId),t.forEach((e=>{_e(Ja.document.body,e)})))}))):ve(`HTML element with id ${a} not found, click trackers not attached`)},go.checkAdAvailable=function(e){return I.trackCustomEvent({type:"apntag.checkAdAvailable",targetId:e}),function(e){const t=apntag.requests.tags[e],n=t&&t.adResponse,a=t&&t.utCalled&&!t.showTagCalled&&n&&mr(n);return function(e){a&&(n.nobid||e.resolve(a),n.nobid&&e.reject())}}(e)},go.handleMediationBid=function(e){I.trackCustomEvent({type:"apntag.handleMediationBid",targetId:e});const t=fo(e);let n=[];try{const e=t.adResponse.ads;n=e[e.length-1]}catch(e){Ie("Trying to get mediated adresponse for renderer",e)}function a(){go.resizeAd(e,[0,0])}if(n?.rtb?.urnUrl)di(t.adResponse,t,n.rtb.urnUrl,n.rtb.batchId);else if(n.renderer_url)t.displayed=!1,n.targetId=e,n.ad_type===co&&(function(e){try{go.requests.tags[e].adResponse.ads=[n]}catch(e){Ie("Trying to set adresponse for video renderer",e)}}(t.targetId),t.enableSafeFrame&&function(e){const t=Nt.getInstance().getIframe(e);t&&t.iframe&&(t.iframe.allow="autoplay",t.iframe.style="overflow:hidden")}(t.targetId)),t.enableSafeFrame?function(e){{const t=Nt.getInstance().getIframe(e.targetId).iframe.contentWindow;delete e.curWindow;const n={status:"nativeAssembly",targetId:e.targetId};jt(t,JSON.stringify(n),Be())}}(t):Lt.loadRenderer(t,n),a();else{const r=mr(t.adResponse,n);r.adType===so&&a(),it.emit(x.qY.LOADED,e,r)}};try{const e=window.PerformanceObserver;e&&new e((function(e){e.getEntries().forEach((e=>{const t={};Object.assign(t,{entryType:e.entryType,name:e.name,startTime:e.startTime,perfTimeOrigin:performance.timeOrigin,duration:e.duration,domComplete:e.domComplete,domContentLoadedEventEnd:e.domContentLoadedEventEnd,domContentLoadedEventStart:e.domContentLoadedEventStart,domInteractive:e.domInteractive,loadEventEnd:e.loadEventEnd,loadEventStart:e.loadEventStart,redirectCount:e.redirectCount,type:e.type,unloadEventEnd:e.unloadEventEnd,unloadEventStart:e.unloadEventStart}),I.trackCustomEvent({type:"perfNavigation",data:t})}))})).observe({type:"navigation",buffered:!0})}catch(e){ve(`Unable to load Navigation Observer ${e}`,x.$9.Z)}we("AST library loaded"),function(){for(let e=0;e<go.anq.length;e++)typeof go.anq[e].called===lo&&(go.anq[e].call(),go.anq[e].called=!0)}(),go.requests.checkDisplay||function(e){let t=!1;function n(){t||(t=!0,e())}if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1);else if(document.attachEvent){let e;try{e=null!==window.frameElement}catch(e){}if(document.documentElement.doScroll&&!e){const e=function(){if(!t)try{document.documentElement.doScroll("left"),n()}catch(t){setTimeout(e,10)}};e()}document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()}))}if(window.addEventListener)window.addEventListener("load",n,!1);else if(window.attachEvent)window.attachEvent("onload",n);else{const e=window.onload;window.onload=function(){e&&e(),n()}}}(He),"function"==typeof window.define&&window.define.amd&&window.define("appnexusAst",[],(()=>window.apntag))})();