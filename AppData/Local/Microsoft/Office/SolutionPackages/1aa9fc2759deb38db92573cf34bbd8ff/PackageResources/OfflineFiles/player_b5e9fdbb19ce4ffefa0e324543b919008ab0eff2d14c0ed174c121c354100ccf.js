/*!
 * SDK version: 8.4.1
 * Commit: 19f0c874
 */
/*! For license information please see player.js.LICENSE.txt */
(()=>{var __webpack_modules__={9836:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ErrorsTelemetry:()=>b,ErrorsTelemetryClass:()=>A,EventsTelemetry:()=>m,PerformanceTelemetry:()=>S,TelemetrySharedData:()=>h,commonTelemetryEvents:()=>k,initTelemetry:()=>I,mediationTelemetryEvents:()=>w});const i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let r;const o=new Uint8Array(16);function a(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(o)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));const l=function(e,t,n){if(i.randomUUID&&!t&&!e)return i.randomUUID();const r=(e=e||{}).random||(e.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}(r)};function d(e=""){const t=["adsdk.microsoft.com","adsdkprod.azureedge.net","adsdkpreprod.azureedge.net","cdn.adnxs-simple.com/v/app/","adsdk.bing.net"].some((t=>e.includes(t))),n=location.href.includes("pleaseTrackMeAdTelemetry");return t||n}function c(...e){return e.filter(Boolean).join(".")}function u(e){return JSON.stringify(e,((e,t)=>t instanceof Error?{name:t.name,message:t.message,stack:t.stack}:t))}const p=()=>{var e,t;try{return null===(e=window.top)||void 0===e?void 0:e.location.href}catch(e){return(null===(t=window.location.ancestorOrigins)||void 0===t?void 0:t.length)>0?window.location.ancestorOrigins[window.location.ancestorOrigins.length-1]:window.location.href}},h=new class{constructor(){this.sessionData={},this.placementData={},this.sampleRate=1,this.skipLogging=!1,this.inited=!1,this.populateSessionData()}populateSessionData(){var e,t;const n={devicePixelRatio:(null===window||void 0===window?void 0:window.devicePixelRatio)||1,width:null===window||void 0===window?void 0:window.screen.width,height:null===window||void 0===window?void 0:window.screen.height},i=function(){var e;const t=(null===navigator||void 0===navigator?void 0:navigator.connection)||(null===navigator||void 0===navigator?void 0:navigator.mozConnection)||(null===navigator||void 0===navigator?void 0:navigator.webkitConnection)||null;return null!==(e=null==t?void 0:t.effectiveType)&&void 0!==e?e:"none"}();this.sessionData={sessionUuid:l(),ua:window.navigator.userAgent,url:p(),sdkType:"vast-player",sdkVersion:"8.4.1",screenWidth:Math.floor(null!==(e=n.width)&&void 0!==e?e:0),screenHeight:Math.floor(null!==(t=n.height)&&void 0!==t?t:0),dpr:n.devicePixelRatio,networkType:i,lang:navigator.language}}setSampleRate(e){var t,n;this.sampleRate=null!==(n=null===(t=p())||void 0===t?void 0:t.includes("allowAdTelemetry=1"))&&void 0!==n&&n?1:e,this.skipLogging=this.skipLoggingBySampleRate()}skipLoggingBySampleRate(){return Math.random()>this.sampleRate}addSessionData(e){this.sessionData=Object.assign(Object.assign({},this.sessionData),e)}addPlacementData(e,t){this.placementData[e]||(this.placementData[e]={}),this.placementData[e]=Object.assign(Object.assign({},this.placementData[e]),t)}getSessionData(){return this.sessionData}getPlacementData(e){var t;return e&&null!==(t=this.placementData[e])&&void 0!==t?t:{}}};let v={endpoint:"https://bat.bing.net/adsdk/logs"};class f{skipLogging(e){var t;if(null==e?void 0:e.forceLogging)return!1;if(null===(t=h.getSessionData().url)||void 0===t?void 0:t.includes("//localhost"))return!0;if(h.skipLogging){if(null==e?void 0:e.sampling){const t=Math.max(0,Math.min(1,e.sampling));return Math.random()>t}return!0}return!1}runOnlyIfLoggingEnabled(e){this.skipLogging()||e()}log(e,t,n){var i;const r=Object.assign(Object.assign(Object.assign(Object.assign({},h.getSessionData()),h.getPlacementData(t)),e),{timestamp:(new Date).getTime()});if(!h.inited)throw Error(`Telemetry is not inited, call initTelemetry first. Event with type=${r.type} is ignored.`);this.skipLogging(n)||null===(i=fetch(v.endpoint,{method:"POST",body:u(r),headers:{"Content-Type":"application/json"},credentials:"omit"}))||void 0===i||i.catch((e=>{}))}}const m=new class extends f{trackEvent(e,t){this.log("string"==typeof e?{type:e}:e,t)}trackCustomEvent(e,t,n){var{type:i}=e,r=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["type"]);this.log({type:c("custom",i),data:r},t,n)}};var g;!function(e){e[e.Critical=1]="Critical",e[e.HighImpact=2]="HighImpact",e[e.Alert=3]="Alert"}(g||(g={}));const y="vast-player";class A extends f{logError(e,t,n,i){var r;const o=n;this.log({severity:e,type:c("error",t),message:null==n?void 0:n.message,data:n?{filename:null==o?void 0:o.filename,lineno:null==o?void 0:o.lineno,colno:null==o?void 0:o.colno,stack:(null==o?void 0:o.stack)||(null===(r=null==n?void 0:n.error)||void 0===r?void 0:r.stack),type:null==n?void 0:n.type,debugData:null==n?void 0:n.debugData}:void 0},i)}trackCriticalError(e,t,n){this.logError(g.Critical,e,t,n)}trackHighImpactError(e,t,n){this.logError(g.HighImpact,e,t,n)}trackAlertError(e,t,n){this.logError(g.Alert,e,t,n)}}const b=new A,k={sdkInit:"sdkInit",adServerRequest:"adServerRequest",adServerRequestFill:"adServerRequestFill",adServerRequestNoFill:"adServerRequestNoFill",impression:"impression",mrcView:"mrcView",adClick:"adClick"},E=e=>c("mediation",e),w={mediationOptIn:E("optIn"),mediationOptOut:E("optOut"),mediationAdServerRequest:E("adServerRequest"),mediationAdServerRequestFill:E("adServerRequestFill"),mediationAdServerRequestNoFill:E("adServerRequestNoFill"),mediationImpression:E("impression"),mediationMrcView:E("mrcView"),mediationAdClick:E("adClick"),mediationTimeout:E("timeout")};var T;!function(e){e.resource="resource",e.measure="measure"}(T||(T={}));const S=new class extends f{constructor(){super(...arguments),this.resourcesToTrackFilters={sdksFiles:d},this.logResourcePerf=e=>{const{duration:t,name:n}=e;if(!n.includes(v.endpoint))for(const[e,i]of Object.entries(this.resourcesToTrackFilters))if(i(n)){this.log({type:c("perf",T.resource,e),data:{duration:Math.ceil(t),name:n}});break}}}disconnectPerfObserver(){this.observer&&this.observer.disconnect()}createStartMark(e){performance.mark(`${e}_start`)}trackMark(e,t,n){performance.mark(`${e}_end`),this.logMarks({measureName:e,startMarkName:`${e}_start`,endMarkName:`${e}_end`},t,n)}logMarks({measureName:e,startMarkName:t,endMarkName:n},i,r){const o=performance.measure(e,t,n);if(!o)return;const{duration:a}=o;this.log({type:c("perf",T.measure,e),data:Object.assign(Object.assign({},i),{duration:Math.ceil(a)})},r)}init(){this.connectPerfObserver(),this.sendResourcesTiming()}sendResourcesTiming(){performance.getEntriesByType&&window.performance.getEntriesByType("resource").forEach(this.logResourcePerf)}connectPerfObserver(){window.PerformanceObserver&&(this.observer=new PerformanceObserver((e=>{e.getEntries().forEach(this.logResourcePerf)})),this.observer.observe({entryTypes:["resource"]}))}addResourceToTrack(e,t){this.resourcesToTrackFilters[e]=t}},I=(e,t)=>{if(h.inited)throw Error("Telemetry is already inited.");h.setSampleRate(e),h.inited=!0,function(e){var t;if(window.addEventListener("error",(t=>{d(t.filename)&&e.trackCriticalError("unhandled",t)})),(null===(t=p())||void 0===t?void 0:t.includes("give_me_error_please"))&&setTimeout((()=>{throw new Error("I'm error from the prod")}),1e3),y){const t=Symbol.for(`isTelemetryInited:${y}`);window[t]||(window.addEventListener("unhandledrejection",(t=>{const n=function(e=""){var t;return null===(t=e.match(/http(s?):\/\/\S+/))||void 0===t?void 0:t[0]}(t.reason instanceof Error?t.reason.stack:void 0);n&&d(n)&&n.includes(y)&&e.trackCriticalError("unhandled.rejection",t.reason)})),window[t]=!0)}}(b),S.init(),m.trackEvent({type:k.sdkInit,data:t})}},8084:(e,t,n)=>{"use strict";var i=n(9313).a,r=n(5433).c,o=n(2558).v,a=n(9877).M,s=n(4427).q,l=n(7092),d=n(2663),c=n(4010),u=n(7886).B,p=n(7702),h="https://rb.adnxs-simple.com/pack?log=log_rb_video_waterfall_events&format=json",v=function(e){s.debug(e,"AdHandler")};e.exports=function(e,t,n){t._vastObjArr&&Array.isArray(t._vastObjArr)||(t._vastObjArr=[]);var s,f,m,g,y,A=t.adStartTimeout||3e3,b="2.0",k=(new Date).getTime()+Math.floor(1e4*Math.random()),E=!1,w=!1,T=!1,S=t.waterfallTimeout,I=!1,C=0,P=0,x=0,j=t.waterfallSteps,_=t.disableCollapse&&void 0!==t.disableCollapse.replay,V="",N=!1,D=!1,M=new c;_&&(y=t.disableCollapse.replay);var O,R,U=n.cbWhenReady,L=n.cbWhenDestroy,B=n.cbWhenImpression,F={loaded:"loaded","creative-view":"creativeView","video-start":"start","video-mid":"midpoint","video-first-quartile":"firstQuartile","video-third-quartile":"thirdQuartile","video-complete":"complete","audio-mute":"mute","audio-unmute":"unmute","video-pause":"pause",rewind:"rewind","video-resume":"resume","video-fullscreen":"fullscreen","ad-expand":"expand","ad-collapse":"collapse","video-stopped":"close","video-exit-fullscreen":"exitFullscreen","video-skip":"skip","ad-progress":"progress",acceptInvitation:"acceptInvitation",acceptInvitationLinear:"acceptInvitationLinear",closeLinear:"closeLinear",impression:"impression",error:"error","video-failed":"error","ad-click":"ClickTracking","volume-change":"volumeChange"},W=!1,H=[],z=[],q=null,G=null,J=null,X=null,Y=!1,Q=!!(t&&t.viewability&&t.viewability.config),K={},Z=function(){return/iphone/i.test(navigator.userAgent.toLowerCase())||/ipad/i.test(navigator.userAgent.toLowerCase())},$=function(e,n,i){try{if(t.hasOwnProperty("clientUA")&&0===t.clientUA.indexOf("Vast Video Player"))return void v("Do not report to Ratbait for all endpoints in Xandr Vast Player");if(!e)throw new Error("vastObj required to track waterfall step");if(e.notImpbusWaterfall)return void v("Do not report to Ratbait for non-impbus waterfall");if(e.hasOwnProperty("fallbackIndex"))return void v("Do not report waterfall data to RATBAIT in fallback mode");var r=e.creative_id,o="",a="",l="",d=!1;if(f&&u&&u.loadPost&&"function"==typeof u.loadPost){if(!t)throw new Error("options required to track waterfall steps");switch(n){case 1:o=0,f.startWFStepTimer=(new Date).getTime();break;case 7:o=2;break;case 8:o=3,a=11;break;case 9:o=3,a=12,d=!0;break;case 10:o=2,a=5;break;case 11:o=1,a=5;break;case 6:o=2,a=3,d=!0;break;case 2:o=1,a=1;break;default:o=1}if(1===o)switch(f.startWFStepTimer&&(l=(new Date).getTime()-f.startWFStepTimer),n){case 4:a=0,d=!0;break;case 3:a=5;break;case 5:a=2,d=!0}if(2===o)switch(V){case 4:a=4;break;case 5:a=2;break;case 6:a=3;break;case 9:o=3,a=12}var c=t.auction_id,p=t&&t.waterfallTimeout?t.waterfallTimeout:15e3,m=t&&(t.waterfallSteps||0===t.waterfallSteps)?t.waterfallSteps:-1,g={auction_id_64:c,event_type:o,version:t.productVersion,timestamp:(new Date).getTime(),timeout:p,waterfall_steps:m,mediation_timeout:2e3,waterfall_position:e.waterfallPosition};""!==l&&(g.latency=l),""!==a&&(g.result_code=a),r&&(g.creative_id=r);var y=JSON.stringify(g).replace(/"auction_id_64":"(\d+)"/,'"auction_id_64":$1');v("Waterfall RATBAIT POST tracker fired path :"+h+" -- "+y),0===g.event_type&&D?v("Preventing Waterfall RATBAIT POST tracker (already tracked) :"+h+" -- "+y):u.loadPost(h,y),N&&(d=!0),d&&!D&&(V=-1===t.waterfallSteps||i<=t.waterfallSteps?n:6,function(e){D=!0;var n=t._vastObjArr.slice(0);if(s&&n.push(s),n.length)for(var i=0;i<n.length;i++){var r=n[i];r.rtb&&f.rtb||$(r,7,e+1)}}(i))}}catch(e){v("Error in reporting to RATBAIT "+e)}},ee=function(e,i,r){if(T&&f){var o;o=f.notImpbusWaterfall?"fb":f.rtb?"rtb":"csm",f.hasOwnProperty("fallbackIndex")&&(o="fallback-rtb");var a,s=f.notifyurl,l=(new Date).getTime(),d=1,c={adId:f.adId,step:C,totalAvailableSteps:x,stepLimit:j,maxTime:S,timeRemaining:S,auction_id:t.auction_id,creative_id:f.creative_id,productVersion:t.productVersion};return g&&(c.timeRemaining=S-(l-g)),e&&(d=1,c.status="stepStart",t.waterfallStepId="Waterfall_Step_"+(new Date).getTime()+Math.floor(1e4*Math.random()),v("Waterfall Step #"+C+" , type="+o+", adId="+c.adId+", timeout="+S+("fb"===o?"":", notifyurl="+s+", creativeId="+c.creative_id))),i&&(d=4,c.status="stepSuccess",v("Waterfall outcome, Step #"+C+": ACCEPTED, type= "+o+", adId="+c.adId+", timeout="+S+("fb"===o?"":", notifyurl="+s+", creativeId="+c.creative_id))),r&&(d=2,c.status="stepFail",r.code&&402===r.code&&(d=3),v("Waterfall outcome, Step #"+C+": REJECTED, type= "+o+", adId="+c.adId+", timeout="+S+", reason="+r.message+("fb"===o?"":", creativeId="+c.creative_id))),I&&(d=5,c.status="timeout",v("Waterfall outcome, Step #"+C+": TIMED-OUT, type= "+o+", timeout="+S+", ads processed="+C+("fb"===o?"":", creativeId="+c.creative_id))),$(f,d,c.step),a=c,void(n.cbWhenWaterfall&&n.cbWhenWaterfall(a))}},te=function(e){if(e&&e.command&&e.uniqueId){var t=e.command;switch(v("Companion callback command: "+t+", unique companion id: "+e.uniqueId),t){case"addTrackingEvents":var n=e.data;if(n){var i;if(o.init(["error","creative-view","companion-click"],e.uniqueId),n.CompanionClickTracking&&n.CompanionClickTracking.length>0)for(i=0;i<n.CompanionClickTracking.length;i++)o.addTrackingEvent("companion-click",n.CompanionClickTracking[i],e.uniqueId);if(n.TrackingEvents&&n.TrackingEvents.length>0)for(i=0;i<n.TrackingEvents.length;i++)"creativeView"===n.TrackingEvents[i].eventType&&o.addTrackingEvent("creative-view",n.TrackingEvents[i].url,e.uniqueId)}break;case"requestTracking":var r=e.data;r&&o.requestTracking(r,e.uniqueId)}}},ne=function(){if(t._vastObjArr&&t._vastObjArr.length>0)for(var e=0;e<t._vastObjArr.length;e++)o.addTrackingEvents(t._vastObjArr[e].trackingUrls,t._vastObjArr[e].adId),o.requestTracking("notUsed",t._vastObjArr[e].adId);s&&(o.addTrackingEvents(s.trackingUrls,s.adId),o.requestTracking("notUsed",s.adId))},ie=function(){if(t._vastObjArr&&t._vastObjArr.length>0)for(var e=0;e<t._vastObjArr.length;e++)p.reportFallbackTracker(t._vastObjArr[e],p.AD_NOT_REACHED)},re=function(e,i){i=!!K.doingVpaidReplay||i,"rewind"===e.name&&(i=!1),i||v("TM>requesting - dispatch : "+e.name);var r=e.name,s={video_start:"video-start",video_impression:"impression",video_mute:"audio-mute",video_click:"video-click",video_complete:"video-complete",video_fullscreen:"video-fullscreen",quartile_event:"quartile-event",video_pause:"video-pause",video_unmute:"audio-unmute",video_failed:"video-failed",video_time:"video-time",video_resume:"video-resume",video_stopped:"video-stopped",fullscreenchange:"video-fullscreen",video_skip:"video-skip"}[r],l=!1;if(W&&-1!==H.indexOf(s)&&(l=!0),"video-fullscreen"===s&&b>="3.0")switch(e.fullscreenStatus){case"enter":default:s="video-fullscreen";break;case"exit":s="video-exit-fullscreen"}if(void 0===s&&(s=r),e.player&&o.setPlayer(e.player),"replay-vpaid"!==s){if((!e||!e.name||"ad-click"!==e.name||e.trackClick)&&(i||e.player&&e.player.delayImpression||(l?z.push(s):(o.requestTracking(s,k),"video-fullscreen"!==s&&"video-exit-fullscreen"!==s||("enter"===e.fullscreenStatus?(o.requestTracking("ad-expand",k),o.requestTracking("playerExpand",k)):"exit"===e.fullscreenStatus&&(o.requestTracking("ad-collapse",k),o.requestTracking("playerCollapse",k)))),!e.onlyTracking))){if(t.hasOwnProperty("cbNotification")&&("AdUnit"===e.eventType?t.cbNotification(e.eventType,s,t.targetId,e.obj,e.obj?{adUnitEventData:e.obj}:null):function(e,n){var i=F[e];i&&(t.cbNotification("VAST",i,t.targetId,n,n?{vastEventData:n}:null),"impression"!==e&&"video-complete"!==e&&"video-start"!==e||F.hasOwnProperty(e)&&delete F[e])}(s,e.obj)),t.cbApnVastPlayer&&t.cbApnVastPlayer(s),"canplay"===s&&e.companionAds&&(G.companionAds=a.parse(e.companionAds)),"impression"===s&&(E=!0,B&&"function"==typeof B&&B(),T&&!w?(m&&clearTimeout(m),ee(!1,!0),o.requestTracking("notifyurl",k),ne(),f&&f.hasOwnProperty("fallbackIndex")&&(p.reportFallbackTracker(f,p.AD_PLAYED),ie())):t.overlayPlayer&&o.requestTracking("notifyurl",k),G.hasOwnProperty("companionAds")&&G.companionAds.companions.length>0&&t.hasOwnProperty("companionContainers")&&Array.isArray(t.companionContainers))){var d=[];t.companionContainers.forEach((function(e){if("string"==typeof e){var t=document.getElementById(e);t&&d.push(t)}else d.push(e)})),d.length>0&&(t.companionContainers=d,q=a.renderCompanions(G.companionAds,t,te))}if("video-start"===s){if("native"===t.adType){O.adVideoPlayer.controlBar.el_.style.display="block",O.iframeVideoWrapper.style.opacity=1;var c=O&&O.iframeVideoWrapper&&O.iframeVideoWrapper.contentWindow&&O.iframeVideoWrapper.contentWindow.document&&O.iframeVideoWrapper.contentWindow.document.getElementById("top_chrome");c?(c.style.display="",O.options.hideTopBar&&(O.resizeVideo(),delete O.options.hideTopBar)):O.resizeVideo(),R&&(t.targetElement.contains(R)&&t.targetElement.removeChild(R),R=null)}w=!0,T&&!E&&(m&&clearTimeout(m),ee(!1,!0),o.requestTracking("notifyurl",k),ne(),f&&f.hasOwnProperty("fallbackIndex")&&(p.reportFallbackTracker(f,p.AD_PLAYED),ie()))}}}else K.options&&(K.doingVpaidReplay=!0,(t=Object.assign(t,K.options)).initialPlayback="auto",t.disableCollapse={enabled:!0,replay:!0},n.cbRenderVideo(n,t,se))},oe=function(e,t){if(W=e)H=t;else{for(var n=0;n<z.length;n++)o.requestTracking(z[n],k);H=[],z=[]}},ae=function(e){b=e.vastVersion;var n,i,r=["video-pause","video-play","video-fullscreen","ad-click","rewind","video-resume","audio-mute","audio-unmute","video-fullscreen","video-exit-fullscreen","ad-expand","ad-collapse","ad-progress","creative-view","playerExpand","playerCollapse"];if(e&&e.icons&&e.icons.length>0)for(var a=0;a<e.icons.length;a++){var s=e.icons[a];s&&s.IconViewTracking&&s.IconViewTracking.length>0&&r.push("IconViewTracking_"+s.program),s&&s.IconClickTracking&&s.IconClickTracking.length>0&&r.push("IconClickTracking_"+s.program)}o.init(r,k),o.addTrackingEvents(e.trackingUrls,k);var l=e.clickTrackingUrls;for(n=0;n<l.length;n++)i=l[n],v("register clickTrackingUrls : "+i),o.addTrackingEvent("ad-click",i,k);var d=e.errorUrls;for(n=0;n<d.length;n++)i=d[n],v("register errorUrls  : "+i),o.addTrackingEvent("error",i,k);var c=e.impressionUrls;for(n=0;n<c.length;n++)i=c[n],v("register impressionUrls  : "+i),o.addTrackingEvent("impression",i,k);var u=e.notifyurl;if((T||t.overlayPlayer)&&u&&(v("register notifyurl  : "+u),o.addTrackingEvent("notifyurl",u,k)),e&&e.icons&&e.icons.length>0)for(var p=0;p<e.icons.length;p++){var h=e.icons[p];if(h&&h.IconViewTracking&&h.IconViewTracking.length>0)for(var f=0;f<h.IconViewTracking.length;f++){var m=h.IconViewTracking[f];o.addTrackingEvent("IconViewTracking_"+h.program,m,k),v("register "+m+"_"+h.program+" for icon IconViewTracking")}if(h&&h.IconClickTracking&&h.IconClickTracking.length>0)for(var g=0;g<h.IconClickTracking.length;g++){var y=h.IconClickTracking[g];o.addTrackingEvent("IconClickTracking_"+h.program,y,k),v("register "+y+"_"+h.program+" for icon IconClickTracking")}}},se=function(){T&&!m&&(g=(new Date).getTime(),m=setTimeout((function(){I=!0}),S))},le=function(i){var o;try{if(t.creativeId=i.creative_id,i.hasOwnProperty("fallbackIndex")&&0===i.mediaFiles.length){var a=function(e,t){var n=0;if(e&&Array.isArray(e)&&e.length>0)for(var i=0;i<e.length;i++){var r=e[i].indexOf("&ERRORFORFALLBACK=");if(r>0){n=parseInt(e[i].substr(r+18)),e[i]=e[i].substr(0,r);break}}return n}(i.errorUrls);return ae(i),void n.cbWhenDestroy({type:1,code:a,message:"VAST parsing failed",failedBeforeRenderer:!0})}if(ae(i),t.xandrSdk&&M.isSafari()&&M.inIframe()&&Array.isArray(i.mediaFiles)&&i.mediaFiles.length>1){var s=[];i.mediaFiles.forEach((function(e){"video/webm"!=e.type&&s.push(e)})),s.length>0&&(i.mediaFiles=s)}t.cbApnVastPlayer&&t.cbApnVastPlayer("cc-present",Array.isArray(i.closedCaptionFiles)&&i.closedCaptionFiles.length>0);var l=function(e){var t={inlineVastUrl:e.finalVastUri||"unknown"},n=[];if(Array.isArray(e.mediaFiles))for(var i=0;i<e.mediaFiles.length;i++)n.push(e.mediaFiles[i].type||"undefined");return t.types=n,t}(i);if(i.errorFlag&&i.hasOwnProperty("parsingErrorCode")&&i.parsingErrorCode>=0)return void n.cbWhenDestroy({type:1,code:i.parsingErrorCode,message:JSON.stringify(l)});r.init(Array.isArray(i.mediaFiles)?i.mediaFiles:[]);var c=r.getUrl(t.width,t.height,null,t);if(null!==c&&!0===c.success){if((t.xandrSdk||t.isWebviewEnvironment)&&t.cbApnVastPlayer&&t.cbApnVastPlayer("creativedata",c),t.cbApnVastPlayer){var u={inlineVastUrl:l.inlineVastUrl};u.media=c.url,u.apiFramework=c.apiFramework,u.mediaType=c.type,t.cbApnVastPlayer("selectedMedia",u)}if(t.finalVastUri=i.finalVastUri,t.video={},t.video.url=c.url,t.closedCaptionFiles=i.closedCaptionFiles,t.video.width=c.width,t.video.height=c.height,Q||(i.viewabilityConfig?t.viewability={config:i.viewabilityConfig}:t.viewability=null),i.userSyncUrl&&(t.usersync_url=i.userSyncUrl),t.verifications=i&&i.adVerifications?i.adVerifications:null,t.viewableImpression=i&&i.viewableImpression?i.viewableImpression:null,t.adServingId=i&&i.adServingId?i.adServingId:null,t.universalAdId=i&&i.universalAdId?i.universalAdId:null,"preview"===t.adType&&t.onlyAudio){i.icons=null,i.hasOwnProperty("companionAds")&&delete i.companionAds;var p=t.height;t.useMsSkin||(t.disableTopBar=!1,t.controlBarPosition="below",t.disableCollapse={enabled:!0,replay:!0},p=24+(t.playerSkin&&t.playerSkin.controlBarHeight?t.playerSkin.controlBarHeight:30)),e.style.height=p+"px",t.height=p}t.data.adIcons=i&&i.icons?i.icons:null,t.data.skipOffset=i&&i.skipOffset?i.skipOffset:"",t.data.skipOffset&&t.skippable&&!0===t.skippable.allowOverride&&!0===t.skippable.enabled&&(t.skippable.videoOffset=t.data.skipOffset);var h={};for(var f in i.trackingUrls)f.indexOf("progress_")>=0&&(h[f]=null);if(t.data.vastProgressEvent=h,void 0!==c.maintainAspectRatio?(t.video.maintainAspectRatio=c.maintainAspectRatio,t.maintainAspectRatio=c.maintainAspectRatio):(t.video.maintainAspectRatio=!0,t.maintainAspectRatio=!0),void 0!==c.scalable?(t.video.scalable=c.scalable,t.canScale=c.scalable):(t.video.scalable=!0,t.canScale=!0),t.video.apiFramework=c.apiFramework,t.video.type=c.type,t.requiredPlayer=c.requiredPlayer,t.videoUrl=c.url,t.clickUrls=i.clickUrls,t.adParameters=i.adParameters,t.extensions=i.extensions,t.data.vastDurationMsec=i.durationMsecs,t.endCard&&t.endCard.showCompanion&&i.companionAds&&(t.endCard.companionAds=i.companionAds.companions,t.endCard.companionCallback=te),t.video.apiFramework&&t.video.apiFramework.toLowerCase().indexOf("vpaid")>=0?t.vpaid=!0:t.vpaid=!1,!_||t.isXandrVastPlayer&&t.enableReplay||(t.disableCollapse.replay=!t.vpaid&&y),t.targetElement=e,t.isWebviewEnvironment)if(t.nativeConfiguration)if(t.nativeConfiguration.omidPartner&&t.nativeConfiguration.omidPartner.partnerName&&t.nativeConfiguration.omidPartner.partnerVersion){if(t.nativeConfiguration.customVerificators&&t.nativeConfiguration.customVerificators.length>0){t.verifications||(t.verifications=[]);for(var m=0;m<t.nativeConfiguration.customVerificators.length;m++){var g=t.nativeConfiguration.customVerificators[m],A={vendor:g.vendor,jsResources:[{url:g.url,framework:"OMID"}],verificationParameters:g.verificationParameters};t.verifications.push(A)}delete t.nativeConfiguration.customVerificators}}else v("We cannot activate verifications for WebView without OMID partner data"),t.verifications=null;else v("We cannot activate verifications for WebView without OMID partner data"),t.verifications=[];return n.cbForHandlingDispatchedEvent=re,n.cbDelayEventsTracking=oe,n.cbWhenReady=function(n){if(n.setVastAttribute(),n.test("VIDLA163",n.options.data),Y=!0,re({name:"loaded",player:n}),(X=new d(e,t,n)).start(),O=n,J&&(R&&(e.contains(R)&&e.removeChild(R),R=null),R=J.beforePlayVideo(t.adType,n),"native"===t.adType)){if(M.isSafari()&&M.inIframe()){e.style.opacity=0;var i=e.style.position;e.style.setProperty("position","fixed","important"),setTimeout((function(){e.style.setProperty("position",i,"important"),e.style.opacity=1}),0)}else e.style.opacity=1;if(n.isDoneInitialPlay=!1,n.options.hideTopBar){var r=n.options.disableTopBar,o=n.options.playerSkin.controlBarHeight;n.options.disableTopBar=!0,n.options.playerSkin.controlBarHeight=0,n.resizeVideo(),n.options.disableTopBar=r,n.options.playerSkin.controlBarHeight=o,n.adVideoPlayer.bigPlayButton.el_.style.display="none",R||(R=M.createNativeStartButton(e),e.appendChild(R),R.addEventListener("click",(function(){n.play(),e.contains(R)&&e.removeChild(R),R=null})),R.onmouseover=function(){R.style.cursor="pointer"},R.onmouseout=function(){R.style.cursor="auto"},n.adVideoPlayer.controlBar.el_.style.display="none")}}n.isDoneInitialPlay=!1,U(n)},"native"===t.adType&&(e.style.backgroundImage||(e.style.opacity=0)),n.cbRenderVideo(n,t,se),G=i,K={},void(t.vpaid&&(K.options=Object.assign({},t)))}return void n.cbWhenDestroy({type:1,code:c.errorCode,message:"Unable to select rendition. Rendition data: "+JSON.stringify(l)})}catch(e){v(e),o="Exception error: "+e}n.cbWhenDestroy({type:0,code:0,message:o})},de=function(e){e&&le(e)},ce=function(){var e=null;return s&&(e=s,s=null),e},ue=function(e){var n=null;return C<e?n=t._vastObjArr.shift():(n=ce(),N=!0),n},pe=function(){var e=null;if(delete t.creativeId,t._vastObjArr&&T){switch(j){case 0:if(0===C)(e=t._vastObjArr.shift())||(e=ce());else if(t._vastObjArr.length){var n=t._vastObjArr.shift();$(n,6,C)}break;case-1:e=ue(P);break;default:e=ue(j<P?j:P)}e||ne()}else e=t._vastObjArr.shift();return f=e,C++,ee(!0,null,null),!e||(k=e.adId),e};if(n.cbWhenDestroy=function(n,i,r){if(r||(r=t),"native"!==t.adType&&"preview"!==t.adType||(e.style.opacity=1),r.stopWaterfall&&(T&&!r.isWaterfall&&$(f,9,C),T=r.isWaterfall),T){if(r&&r.waterfallStepId!==t.waterfallStepId)return;t=r,ee(!1,!1,n)}if(T&&!E&&!w&&!I){f&&f.fallbackOnNoAd&&(t.overlayWaterfall||(t.fallbackNotFirstStep=!0,o.requestTracking("notifyurl",k),o.requestErrorTracking(n.code,n.type,n.message,k),p.reportFallbackTracker(f,n.failedBeforeRenderer?p.AD_FAILED_BEFORE_RENDERER:p.AD_FAILED_IN_RENDERER,{code:n.code,message:n.message}))),t.overlayPlayer&&f.notImpbusWaterfall&&(t.fallbackNotFirstStep=!0);var s=pe();if(s)return t.isXandrVastPlayer&&!t.xandrSdk&&Y&&(t.initialPlayback="auto"),void de(s)}if(n&&void 0!==n.type)if(v("requesting error in whenDestroy callback : "+n.code+","+n.type+","+n.message),!E||903===n.code&&"preview"===t.adType)if(t.overlayWaterfall||(T||r.stopWaterfall)&&o.requestTracking("notifyurl",k),t.overlayPlayer){var l=o.requestErrorTrackingUrls(n.code,n.type,n.message,k);n.errorUrls=l}else o.requestErrorTracking(n.code,n.type,n.message,k);else v("not requesting error tracker because the Ad Impression was already reported");else v("requesting error in whenDestroy callback : "+n+","+!!n);q&&(a.stopCompanions(q),q=null),"function"==typeof L&&L(n||!1,i),J&&J.adFinished(!!n,r),X&&X.stop()},t&&t.banners&&(J=new l(e,t.banners)),void 0!==t&&t&&t.vastXml){var he=!1;setTimeout((function(){he||n.cbWhenDestroy({type:0,code:0,message:"VAST Parser didn't answer until timeout"})}),A),v("Ad XML : "+t.vastXml);var ve=Date.now();i.parse(t.vastXml,(function(e,i,r,a,l,d){if(he=!0,t.cbApnVastPlayer){var c=Date.now()-ve;if(e){var u=Array.isArray(r)?r.length:1;t.cbApnVastPlayer("parsing",{duration:c,ads:u})}else t.cbApnVastPlayer("parsing",{duration:c,ads:0})}t.finalVastXml=r&&r.vastXml?r.vastXml:"",function(e,i,r,a,l,d){if(p.setMessageTemplate(t,Array.isArray(r)?r.length:1),e){if(Array.isArray(r))if(r=r.map((function(e,t){return e.waterfallPosition=t+1,e.adId+="_Ad#"+e.waterfallPosition,e})),t.isXandrVastPlayer||!Z()||Z()&&t.enableInlineVideoForIos){if(T=!0,t.isWaterfall=!0,t._vastObjArr=r,x=t._vastObjArr.length,t._vastObjArr.length>0&&!t._vastObjArr[0].fallbackOnNoAd)for(var c=0;c<t._vastObjArr.length;c++){var u=t._vastObjArr[c];if(u.rtb){s=u,t._vastObjArr.splice(c,1);break}}P=t._vastObjArr.length}else T=!1,t._vastObjArr=r;else T=!1,t._vastObjArr.push(r);var h=pe();h&&(h.expires&&h.expires>0&&h.expires<Date.now()?n.cbWhenDestroy({type:0,code:0,message:"Ad has been expired"}):de(h))}else{var f;if(l&&l.length>0&&(o.addTrackingEvent("notifyurl",l,i),o.requestTracking("notifyurl",i)),"vast"===r.substr(0,4)){f=r.substr(4);try{f=parseInt(f)}catch(e){f=null}}var m="Vast Parser error ("+(f||r)+")";"native"===t.adType&&t.badVastXml&&(m="Failed to get VAST XML",f=null),d&&(m={message:m,inlineVastUrl:d.finalVastUrl,creativeId:d.creativeId},m=JSON.stringify(m)),a&&a.length>0?(a.forEach((function(e){v("register errorUrls  : "+e),o.addTrackingEvent("error",e,k)})),n.cbWhenDestroy({type:1,code:f||900,message:m})):f?n.cbWhenDestroy({type:1,code:f,message:m}):n.cbWhenDestroy({type:0,code:0,message:m}),"native"===t.adType&&J.adFinished(!0,t)}}(e,i,r,a,l,d)}),null,2e3,null,null,t)}if(void 0!==t&&t&&t.useAdObj&&t.adObj){if(t.adObj.xandrSdk&&t.adObj.errorFlag)return void n.cbWhenDestroy({type:1,code:t.adObj.parsingErrorCode||403,message:t.adObj.parsingErrorMessage||"No suitable rendition available"});le(t.adObj)}}},7092:(e,t,n)=>{"use strict";var i=n(9724).v,r="[AdHandler_PrePostCovers]",o=n(4010);e.exports=function(e,t){var n,a,s=e,l=t.preShow,d=t.postShow,c=t.fallback,u=t.postShowClickUrl,p=t.fallbackClickUrl,h=t.postShowTrackUrl,v=!1,f=new o;s&&l&&(s.style.backgroundImage="url("+l+")",s.style.backgroundRepeat="no-repeat",s.style.backgroundSize="100% 100%",i.log(r,"Preshow banner created")),this.beforePlayVideo=function(e,t){if("native"===e){var i=(n=t).iframeVideoWrapper;a=i.style.width;var r,o=s.style.width;if("click"===n.options.initialPlayback&&(s.style.width=a,l&&(i.style.width="1px")),!v){v=!0;var c=function(){s.removeEventListener("click",c),s.removeEventListener("mouseover",u),s.removeEventListener("mouseout",p),n.play(),n.iframeVideoWrapper.style.width=a,s.style.width=o,r&&s.contains(r)&&s.removeChild(r)},u=function(){s.style.cursor="pointer"},p=function(){s.style.cursor="auto"};if(l)return s.addEventListener("click",c),s.addEventListener("mouseover",u),s.addEventListener("mouseout",p),r=f.createNativeStartButton(s),s.appendChild(r),r;n.options.hideTopBar=!0,d&&(n.options.enableReplay=!1,n.options.disableCollapse.replay=!1,n.options.disableCollapse.enabled=!1),d||(n.options.disableCollapse.enabled=!0,n.options.disableCollapse.replay=!!n.options.enableReplay)}}else"preview"!==e||t.options.pod||((n=t).options.disableCollapse.enabled=!0,n.options.disableCollapse.replay=!0)},this.adFinished=function(e,t){if(s){var n=e&&c||d;if(n&&(s.style.width=t.width+"px",s.style.height=t.height+"px",s.style.backgroundImage="url("+n+")",s.style.backgroundRepeat="no-repeat",s.style.backgroundSize="100% 100%",i.log(r,"Postshow/fallback banner created")),s.style.backgroundImage||t.badVastXml){var o=e&&p||u;o&&(s.onclick=function(){window.open(o,"_blank"),h&&(new Image(1,1).src=h)},s.onmouseover=function(){s.style.cursor="pointer"},s.onmouseout=function(){s.style.cursor="auto"})}}},i.log(r,"object has been instatiated")}},7702:(e,t,n)=>{"use strict";var i,r=n(4427).q,o=n(7886).B,a="https://rb.adnxs-simple.com/pack?log=log_rb_video_outstream&format=json",s=function(e){r.debug(e,"AdHandler->RatbaitFallback")};e.exports={AD_PLAYED:1,AD_FAILED_IN_RENDERER:2,AD_FAILED_BEFORE_RENDERER:3,AD_NOT_REACHED:4,setMessageTemplate:function(e,t){if(!i&&e.rbFallbackData){var n=JSON.stringify(e.rbFallbackData);(i=JSON.parse(n)).version=e.productVersion,i.total_rtbs=t,i.message_type=0}},reportFallbackTracker:function(e,t,n){try{if(!e)throw new Error("vastObj required to track waterfall step");if(!(i&&i.hasOwnProperty("auction_id_64")&&i.hasOwnProperty("tag_id")&&i.hasOwnProperty("version")&&i.hasOwnProperty("total_rtbs")))throw new Error("Ratbait fallback message template does not exist or not contains required properties");if(!e.hasOwnProperty("fallbackIndex"))throw new Error("vastObj does not present fallback ad");if(!t||t<1||t>4)throw new Error("Invalid action code");var r=JSON.stringify(i),l=JSON.parse(r);switch(l.buyer_member_id=parseInt(e.buyerMemberId),l.brand_category_id=parseInt(e.brandCategoryId),l.creative_id=parseInt(e.creative_id),l.fallback_ad_index=e.fallbackIndex,l.action=t,l.error_code=0,l.message="",t){case 2:n&&(n.code&&(l.error_code=n.code),n.message&&(l.message=n.message));break;case 3:n&&(n.code&&(l.error_code=n.code),n.message?l.message=n.message:l.message="Error during processing ut response")}l.timestamp=Date.now();var d=JSON.stringify(l).replace(/"auction_id_64":"(\d+)"/,'"auction_id_64":$1');s("Fallback RATBAIT POST tracker fired path :"+a+" -- "+d),o.loadPost(a,d)}catch(e){s("Error in reporting to RATBAIT "+e)}}}},2663:(e,t,n)=>{"use strict";var i=n(9724).v,r=n(4010),o="[AdHandler_Target_Viewability_Observer]";e.exports=function(e,t,n){var a,s=n,l=!1,d=t,c=!1;if(this.start=function(){a&&(a.observe(e),I())},this.stop=function(){a&&(a.disconnect(),C())},t.isXandrVastPlayer&&n&&e&&t.hasOwnProperty("playVideoVisibleThreshold")&&"number"==typeof t.playVideoVisibleThreshold&&!(t.playVideoVisibleThreshold<=0)){var u={root:null,rootMargin:"0px",threshold:t.playVideoVisibleThreshold/100},p=function(){return!!s&&s.isPlayingVideo},h=function(){p()&&("function"==typeof s.pause&&s.pause(),i.log(o,"sendPauseSignalToVideoPlayer"))},v=function(){i.log(o,"send play from pause"),("auto"===d.initialPlayback||s.isDoneInitialPlay)&&(p()||"function"!=typeof s.play||s.explicitPaused||(s.play(),i.log(o,"sendPlaySignalToVideoPlayer")))},f=!0;a=new IntersectionObserver((function(t,n){t.forEach((function(t){t.target===e&&(t.isIntersecting?(l&&(v(),l=!1),c=!0):(f&&d.vpaid&&"auto"===d.initialPlayback?s.adVideoPlayer.one("vpaid.AdStarted",(function(){c||setTimeout(h,100)})):h(),l=!0,c=!1)),f=!1}))}),u);var m=this,g=new r,y=g.checkIsTopWindowAccessible(),A=window.self,b=y?top.window:m.window,k=!1,E=!1,w=null,T=function(){!g.isFullScreen(s)&&s.isPlayingVideo&&(h(),l=!0,i.log(o,"screen : blur"))},S=function(){s.isViewable=c,c&&l&&(v(),l=!1),i.log(o,"screen : focus")},I=function(){var e,t=b!==m.window;(t=!y||t)?(void 0!==document.hidden?e="hidden":void 0!==document.mozHidden?e="mozHidden":void 0!==document.msHidden?e="msHidden":void 0!==document.webkitHidden&&(e="webkitHidden"),document.addEventListener("visibilitychange",(function(){document[e]?T():S()}),!1)):w=A.setInterval((function(){document.hasFocus()&&!1===k?(S(),k=!0):document.hasFocus()||!0!==k||(T(),k=!1)}),500)},C=function(){E||(i.log(o,"terminate all"),w&&A.clearInterval(w),E=!0)}}}},4010:e=>{"use strict";e.exports=function(){this.checkIsTopWindowAccessible=function(){var e=!0;try{var t=top.window,n=t.innerHeight||t.documentElement.clientHeight,i=function(){};t.addEventListener("scroll",i),t.removeEventListener("scroll",i),t&&"object"==typeof t&&"function"==typeof t.addEventListener&&"number"==typeof n||(e=!1)}catch(t){e=!1}return e},this.isFullScreen=function(e){return!!e.isFullscreen||!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&!window.screenTop&&!window.screenY},this.isMobile=function(){var e=navigator.appVersion.indexOf("Mobile"),t=navigator.appVersion.indexOf("Android");return e>-1||t>-1},this.isAndroid=function(){return/android/i.test(navigator.userAgent.toLowerCase())},this.isChrome=function(){return navigator.userAgent.indexOf("Chrome")>-1},this.isSafari=function(){return/version\/([\w\.]+).+?(mobile\s?safari|safari)/i.test(navigator.userAgent.toLowerCase())},this.clearDiv=function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)},this.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},this.createNativeStartButton=function(e){var t=e.offsetWidth?Math.min(48,e.offsetWidth/4):e.offsetHeight?Math.min(48,e.offsetHeight/3):48,n=document.createElement("div");n.style.margin="0 auto",n.style.top="25%",n.style.left="30%",n.style.position="absolute",n.style.width="0px",n.style.height="0px",n.style.borderStyle="solid";var i=.8*t/3;n.style.borderWidth=i+"px 0px "+i+"px "+2*i+"px",n.style.borderColor="transparent transparent transparent #ffffff",n.style.opacity="0.85";var r=document.createElement("div");return r.style.margin="0 auto",r.style.backgroundColor="black",r.style.width=t+"px",r.style.height=t+"px",r.style.position="absolute",r.style.right="0px",r.style.bottom="0px",r.appendChild(n),r}}},6863:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});const i=n(8084)},3007:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AD_RESPONSE_TYPE:()=>o,AdResponseManager:()=>D,STATUS:()=>i});const i={UNKNOWN:-1,PREPARING:0,FAILED:1,READY:2,USED:3},r={100:"Empty VAST or XML parsing error",101:"VAST schema validation error",102:"VAST version not supported",200:"Ad type is not video",204:"Invalid Ad category",205:"Ad is skipped due category violation",300:"General Wrapper error",301:"Wrapper VAST URI timeout",302:"Wrapper limit reached",303:"No VAST response after one or more Wrappers",403:"No suitable rendition available",900:"Undefined error"},o={UNKNOWN:-1,VMAP:1,POD:2,SINGLE_AD:3},a=999,s=(e,t)=>{const n=e.getElementsByTagName(t);return n.length>0?n:null},l=(e,t,n)=>{n||(n=0);const i=e.getElementsByTagName(t);return i.length>n?i[n]:null},d=e=>{if(0===e.childNodes.length)return"";let t="";for(let n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeValue&&(t+=e.childNodes[n].nodeValue);return t.trim()},c=(e,t)=>{let n=e.getAttribute(t);return null===n&&(n=""),n},u=(e,t,n)=>{n||(n=0);let i=n;var r=c(e,t);return r.length>0&&(i=r.indexOf(".")>=0?parseFloat(r):parseInt(r)),i},p=e=>{let t="unknown";return e&&(t=c(e,"version"),t=t.trim(),t.length>3&&(t=t.substring(0,3))),t},h=e=>{const t=s(e,"Extension");if(!t)return a;for(let e=0;e<t.length;e++){const n=c(t[e],"fallback_index");if(""!==n)return parseInt(n)}return a},v=e=>{const t=l(e,"Wrapper");return t?c(t,"fallbackOnNoAd"):""},f=e=>{const t=Array.isArray(e)?e[0]:e;return"object"==typeof t&&(t.hasOwnProperty("vastVersion")||t.errorFlag)?t:null},m=e=>{var t;if(!Array.isArray(e)||0===e.length)return i.UNKNOWN;for(let n=0;n<e.length;n++){if(!e[n]||!(null===(t=e[n])||void 0===t?void 0:t.getState))return i.PREPARING;switch(e[n].getState()){case i.PREPARING:return i.PREPARING;case i.FAILED:if(n===e.length-1)return i.FAILED;break;case i.READY:return i.READY;case i.USED:if(n===e.length-1)return i.USED}}return i.UNKNOWN},g=e=>{e&&(new Image(1,1).src=e)};var y=n(9313);function A(){if(this.flatVastObj&&Array.isArray(this.flatVastObj.errorUrls)&&this.flatVastObj.errorUrls.length>0){const e=this.flatVastObj.errorUrls.filter((e=>(e=>{const t=new URL("string"==typeof e?e:e.url);return t.hostname.indexOf("ib.adnxs.com")>=0||t.hostname.indexOf("ib.adnxs-simple.com")>=0})(e)));e.length>0&&(this.firstPartyErrorUrl=e[0],this.flatVastObj.errorUrls=this.flatVastObj.errorUrls.filter((t=>!e.includes(t))))}}function b(e,t,n,i){const r={outcome:i?"rejected":"available",adUrl:t.hops.length>0&&t.hops[0].url?t.hops[0].url:"Inline Response",numberOfHops:t.hops.length,totalTimeToProcess:n};return r.ad=e,r.hops=[...t.hops],r.hops.forEach(((e,t)=>{e.chainNodeType=e.wrapper?"wrapper":e.inline?"inline":"failure",e.hopIndex=t+1,delete e.wrapperIndex,delete e.wrapper,delete e.inline})),r}class k{constructor(e,t,n,o,s){if(this.options=s||{},this.flatVastObj=f(e),this.vastVersion=o,this.state=i.PREPARING,this.parser=null,this.fallbackIndex=void 0!==t&&"number"==typeof t&&t>=0?t:a,this.fallbackNoAd=n?t:"",this.firstPartyErrorUrl="",this.flatVastObj)this.state=this.flatVastObj.errorFlag?i.FAILED:i.READY,A.bind(this)(),this.fallbackIndex===a&&(this.fallbackIndex=void 0!==this.flatVastObj.fallbackIndex&&"number"==typeof this.flatVastObj.fallbackIndex&&this.flatVastObj.fallbackIndex>=0?this.flatVastObj.fallbackIndex:a),this.flatVastObj.telemetryEventData&&(this.flatVastObj.telemetryEventData.ad=this.fallbackIndex===a?1:this.fallbackIndex+1);else{const n=Date.now();this.parser=y.a.parseAdObj(e,this.vastVersion,((e,o,s,l,d,c)=>{const u=Date.now()-n;if(e){if(this.flatVastObj=Array.isArray(s)?s[0]:s,this.flatVastObj.telemetry&&(this.flatVastObj.mediaFiles&&function(e){const t=[];if(e.mediaFiles.forEach((e=>{e.apiFramework&&"VPAID"===e.apiFramework.toUpperCase()?e.url.indexOf("anwrapper")>0?t.includes("anwrapper")||t.push("anwrapper"):t.includes("vpaid")||t.push("vpaid"):t.includes("video")||t.push("video")})),t.length>0&&e.telemetry.hops.length>0){const n=e.telemetry.hops.find((e=>e.inline));n&&(n.mediaType=t.join(", "))}}(this.flatVastObj),this.flatVastObj.telemetryEventData=b(this.fallbackIndex!==a?this.fallbackIndex+1:1,this.flatVastObj.telemetry,u,this.flatVastObj.errorFlag)),A.bind(this)(),this.flatVastObj.errorFlag){const e=this.getErrorCode();e&&(this.flatVastObj.parsingErrorCode=e,this.flatVastObj.parsingErrorMessage=r[e.toString()]||""),this.state=i.FAILED}else this.fallbackIndex=void 0!==t&&t>=0?t:a,this.state=i.READY;return}const p={};c&&(p.telemetryEventData=b(this.fallbackIndex!==a?this.fallbackIndex+1:1,c,u,!0)),p.errorFlag=!0,p.parsingErrorCode=s,"vast"===s.substr(0,4)&&(p.parsingErrorCode=function(e){let t=e.substr(4);try{t=parseInt(t)}catch(e){t=null}return t}(s)),p.parsingErrorMessage=r[p.parsingErrorCode.toString()]||"",p.errorUrls=l,this.flatVastObj=p,A.bind(this)(),this.state=i.FAILED}),this.priority,this.options.adServerTimeout||2e3,{telemetry:!0,wrapperLimit:this.options.wrapperLimit})}}getState(){return this.state}terminate(){this.parser&&this.parser.terminate()}getUnusedTelemetry(){var e;return this.state===i.READY||this.state===i.FAILED?null===(e=this.flatVastObj)||void 0===e?void 0:e.telemetryEventData:null}getUnwrappedVast(e){return new Promise((t=>{switch(this.state){case i.FAILED:this.state=i.USED,t({state:i.FAILED,errorCode:this.flatVastObj.parsingErrorCode,errorMessage:this.flatVastObj.parsingErrorMessage,firstPartyErrorUrl:this.firstPartyErrorUrl,errorUrls:this.flatVastObj.errorUrls,telemetryEventData:this.flatVastObj.telemetryEventData});break;case i.READY:this.state=i.USED,t({state:i.READY,unwrappedVastObj:this.flatVastObj,telemetryEventData:this.flatVastObj.telemetryEventData});break;case i.USED:t({state:i.USED});break;case i.PREPARING:const n=Date.now()+Math.min(2e3,e),r=setInterval((()=>{this.state===i.FAILED?(clearInterval(r),this.state=i.USED,t({state:i.FAILED,errorCode:this.flatVastObj.parsingErrorCode,errorMessage:this.flatVastObj.parsingErrorMessage,firstPartyErrorUrl:this.firstPartyErrorUrl,errorUrls:this.flatVastObj.errorUrls,telemetryEventData:this.flatVastObj.telemetryEventData})):this.state===i.READY?(clearInterval(r),this.state=i.USED,t({state:i.READY,unwrappedVastObj:this.flatVastObj,telemetryEventData:this.flatVastObj.telemetryEventData})):Date.now()>=n&&(clearInterval(r),this.state=i.USED,t({state:i.FAILED,errorCode:this.flatVastObj.parsingErrorCode,errorMessage:this.flatVastObj.parsingErrorMessage,firstPartyErrorUrl:this.firstPartyErrorUrl,errorUrls:this.flatVastObj.errorUrls,telemetryEventData:this.flatVastObj.telemetryEventData}))}).bind(this),10);break;default:t({state:i.UNKNOWN})}}))}getErrorCode(){if(this.firstPartyErrorUrl){const e=this.firstPartyErrorUrl.indexOf("&error_code=");if(e>0){const t=this.firstPartyErrorUrl.substring(e+12).split("&");if(t.length>0)return parseInt(t[0])}}return null}}function E(e,t,n){const i={};return i.vastVersion=n||"unknown",i.errorFlag=!0,i.parsingErrorCode=e,i.parsingErrorMessage=t||(r[e.toString()]?r[e.toString()]:""),i.errorUrls=[],i}function w(e){let t=null;if("string"==typeof e){const i=e.indexOf("<VAST ");let r=e.substring(i);const o=(new DOMParser).parseFromString(r,"text/xml");var n=!1;if(("parsererror"===o.documentElement.nodeName||l(o,"parsererror"))&&(n=!0),n){const e=E(100,"Parsing error");return void this.fallbackAds.push(new k(e))}const a=l(o,"VAST");if(!a||!a.firstChild){const e=E(100,"Empty VAST");return void this.fallbackAds.push(new k(e))}const c=p(a),u=l(a,"Error");let h=null;if(u&&(h=d(u),h=h.trim()),this.vastVersion=c,t=s(a,"Ad"),!t||0===t.length){h&&(h=h.replace("[ERRORCODE]","101"),g(h));const e=E(101,null,c);return void this.fallbackAds.push(new k(e))}}else t=e;for(let e=0;e<t.length;e++)this.fallbackAds.push(new k(t[e],h(t[e]),v(t[e]),this.vastVersion,this.options));this.fallbackAds.sort(((e,t)=>e.fallbackIndex-t.fallbackIndex)),this.fallbackCount=this.fallbackAds.length}function T(e,t,n){const r=this.fallbackAds[t],o=this.fallbackAds[t].fallbackIndex;return r.getUnwrappedVast(e).then((r=>{switch(r.state){case i.FAILED:{const e={fallbackIndex:o===a?-1:t,fallbackCount:o===a?0:this.fallbackCount};n(Object.assign(Object.assign({},e),r))}return;case i.USED:if(t===this.fallbackAds.length-1){const e={fallbackIndex:o===a?-1:t,fallbackCount:o===a?0:this.fallbackCount};n(Object.assign(Object.assign({},e),r))}else T.bind(this)(e,t+1,n);return;case i.READY:{const e={fallbackIndex:o===a?-1:t,fallbackCount:o===a?0:this.fallbackCount};n(Object.assign(Object.assign({},e),r))}return}t===this.fallbackAds.length-1?n({state:i.UNKNOWN,message:"Unknown ad state",fallbackIndex:o===a?0:t,fallbackCount:o===a?0:this.fallbackCount}):T.bind(this)(e,t+1,n)})).catch((e=>{n({state:i.UNKNOWN,message:e.message,fallbackIndex:o===a?0:t,fallbackCount:o===a?0:this.fallbackCount})}))}class S{constructor(e,t,n){this.options=n||{},this.vastVersion=t,this.fallbackAds=[],this.fallbackCount=0,this.state=i.PREPARING,e&&(f(e)?this.fallbackAds.push(new k(e)):w.bind(this)(e),this.state=m(this.fallbackAds))}getState(){return this.state}terminate(){this.fallbackAds.length>0&&this.fallbackAds.forEach((e=>{e.terminate()}))}addFallbackAd(e,t){this.fallbackAds.length<t+1&&(this.fallbackAds.length=t+1),this.fallbackAds[t]=new k(e,t),this.fallbackCount=this.fallbackAds.length}getUnwrappedVast(e){return new Promise((t=>{0!==this.fallbackAds.length?(T.bind(this)(e,0,t),this.state=m(this.fallbackAds)):t({state:i.UNKNOWN,message:"No fallback Ads",fallback:-1,fallbackCount:0})}))}getMetadata(){var e;if(0===this.fallbackCount&&this.fallbackAds.length>0){const t=this.fallbackAds[0];return(null===(e=null==t?void 0:t.flatVastObj)||void 0===e?void 0:e.parsingErrorCode)?{errCode:t.flatVastObj.parsingErrorCode,errMessage:t.flatVastObj.parsingErrorMessage}:{errCode:900,errMessage:"Undefined Error"}}return{fallbackCount:this.fallbackCount}}getUnusedAdsTelemetry(){const e=[];return this.fallbackAds.length>0&&this.fallbackAds.forEach((t=>{const n=t.getUnusedTelemetry();n&&(n.fallbackCount=this.fallbackCount,n.fallbackIndex=t.fallbackIndex,e.push(n))})),e}}class I{constructor(e){console.log("AdSlot constructor"),this.state=i.PREPARING,this.slotNumber=e,this.vastData=new S}getState(){return this.state}addSlotAd(e){const t=e.fallbackIndex&&e.fallbackIndex!==a?e.fallbackIndex+1:1;this.vastData.addFallbackAd(e.flatVast,t-1)}getUnwrappedVast(){if(this.state===i.USED){const e={state:this.state,slotNumber:this.slotNumber};return this.state=i.USED,Promise.resolve(e)}return this.vastData.getUnwrappedVast().then((e=>(e.slotNumber=this.slotNumber,this.state=this.vastData.getState(),Promise.resolve(e))))}getUnusedAdsTelemetry(){let e=[];return this.vastData&&(e=this.vastData.getUnusedAdsTelemetry(),e&&e.length>0?e.forEach((e=>{e.slotNumber=this.slotNumber})):e=[]),e}}function C(e){if(this.usingSlotIndex<0)this.usingSlotIndex=Math.min(0,this.slots.length);else{if(e&&this.usingSlotIndex++,this.usingSlotIndex===this.slots.length)return void(this.state=i.USED);this.slots[this.usingSlotIndex]&&(this.slots[this.usingSlotIndex].getState()===i.USED&&this.usingSlotIndex++,this.usingSlotIndex===this.slots.length&&(this.state=i.USED))}}class P{constructor(e){console.log("Pod constructor"),this.state=i.PREPARING,this.usingSlotIndex=-1,this.slots=new Array(e)}addSlot(e){e.slotNumber>0&&(this.slots[e.slotNumber-1]||(this.slots[e.slotNumber-1]=new I(e.slotNumber)),this.slots[e.slotNumber-1].addSlotAd(e),this.state=m(this.slots))}getUnwrappedVast(e,t){return new Promise((n=>{if(C.bind(this)(t),this.state===i.USED){const e={slotNumber:this.usingSlotIndex,state:this.state};return void n(e)}const r=Date.now()+e,o=setInterval((()=>{if(this.slots[this.usingSlotIndex])return clearInterval(o),this.slots[this.usingSlotIndex].getUnwrappedVast().then((e=>{this.state=m(this.slots),n(e)}));if(Date.now()>=r){clearInterval(o);const e={slotNumber:this.usingSlotIndex+1,state:i.FAILED};this.state=i.FAILED,n(e)}}),50)}))}getUnusedAdsTelemetry(){let e=[];return this.slots.length>0&&this.slots.forEach((t=>{if(t.slotNumber>0){const n=t.getUnusedAdsTelemetry();n&&(n.forEach((e=>{e.slotCount=this.slots.length})),e=[...e,...n])}})),e}}function x(e,t,n,r,o){const a=r>=0?r:0;if(a!==this.adBuffetCount&&this.arrVastData[a])return this.arrVastData[a].getUnwrappedVast(e).then((r=>{var s;r.state===i.READY?(null===(s=null==r?void 0:r.unwrappedVastObj)||void 0===s?void 0:s.adDuration)===t?n(r):o&&o.state===i.READY?x.bind(this)(e,t,n,a+1,o):x.bind(this)(e,t,n,a+1,r):x.bind(this)(e,t,n,a+1,o)}));n(o||{state:this.state})}class j{constructor(e){console.log("AdBuffet constructor"),this.state=i.PREPARING,this.adBuffetCount=e,this.arrVastData=[]}addAd(e){this.arrVastData.length<this.adBuffetCount&&this.arrVastData.push(new S(e.flatVast,e.flatVast?e.flatVast.vastVersion:""))}getUnwrappedVast(e,t){return new Promise((n=>{0!==this.adBuffetCount?(x.bind(this)(e,t,n,0),this.state=m(this.arrVastData)):n({state:i.UNKNOWN})}))}getUnusedAdsTelemetry(){const e=[];return this.arrVastData.length>0&&this.arrVastData.forEach((t=>{const n=t.getUnusedTelemetry();n&&e.push(n)})),e}}const _=n(5791).default;function V(e,t,n){const r=e.indexOf("<VAST ");let o=e.substring(r);const c=(new DOMParser).parseFromString(o,"text/xml");var h=!1;if(("parsererror"===c.documentElement.nodeName||l(c,"parsererror"))&&(h=!0),h)return this.state=i.FAILED,void(this.errorInfo={code:100,message:"Parsing error"});const v=l(c,"VAST");if(!v||!v.firstChild)return this.state=i.FAILED,void(this.errorInfo={code:100,message:"EMPTY VAST"});const f=p(v);if(!(e=>["2.0","3.0","4.0","4.1","4.2"].includes(e))(f))return this.state=i.FAILED,void(this.errorInfo={code:102,message:"Vast version is not supported"});const m=l(v,"Error");let y=null;m&&(y=d(m),y=y.trim());const A=s(v,"Ad");if(!A||0===A.length)return y&&(y=y.replace("[ERRORCODE]","101"),g(y)),this.state=i.FAILED,void(this.errorInfo={code:101,message:"NO AD NODE"});let b=0;const k=[];for(let e=0;e<A.length;e++){const t=A[e];u(t,"sequence",0)>0?b+=1:k.push(t)}if(b>0){this.podParser=new _(this.options);const e=this.podParser.init(c);e.isPod&&(this.pod=new P(e.slotCount),this.adBuffet=new j(e.adBuffetCount),t||(this.parsingStarted=!0,this.podParser.parse((e=>{e.slotNumber===a?this.adBuffet.addAd(e):e.slotNumber>0&&this.pod.addSlot(e)}))))}else n?this.isNotParsedSingleAd=!0:(this.parsingStarted=!0,this.singleAd=new S(k,f,this.options));return!0}class N{constructor(e,t,n,r){this.options=t||{},this.pod=null,this.adBuffet=null,this.singleAd=null,this.isNotParsedSingleAd=!1,this.podParser=null,this.parsingStarted=!1,this.state=i.PREPARING,this.errorInfo=null,V.bind(this)(e,n,r)}getMetadata(){if(this.pod)return{responseType:o.POD,slotCount:this.pod.slots.length,adBuffetCount:this.adBuffet.adBuffetCount};if(this.singleAd){const e=this.singleAd.getMetadata();return e.errCode?{responseType:o.UNKNOWN,errCode:e.code,errMessage:e.message}:(e.responseType=o.SINGLE_AD,e)}return this.isNotParsedSingleAd?{responseType:o.SINGLE_AD,fallbackCount:0}:this.errorInfo?{responseType:o.UNKNOWN,errCode:this.errorInfo.code,errMessage:this.errorInfo.message}:{responseType:o.UNKNOWN}}getUnwrappedVast(e,t){return this.parsingStarted||(this.parsingStarted=!0,this.podParser.parse((e=>{e.slotNumber===a?this.adBuffet.addAd(e):e.slotNumber>0&&this.pod.addSlot(e)}))),new Promise((n=>{if(this.pod){if(this.pod.state===i.PREPARING||this.pod.state===i.READY||this.pod.state===i.FAILED)return this.pod.getUnwrappedVast(e,t).then((t=>{if(t.state===i.FAILED)return this.adBuffet.getUnwrappedVast(e,t.slotDuration).then((e=>{e.state===i.READY?(t.state=i.READY,t.unwrappedVastObj=e.unwrappedVastObj,n(t)):n(t)}));n(t)}));{const e={state:this.pod.state};n(e)}}else{if(this.isNotParsedSingleAd){const e={state:i.UNKNOWN};return void n(e)}if(this.singleAd.state!==i.USED)return this.singleAd.getUnwrappedVast(e).then((e=>{n(e)}));{const e={state:this.singleAd.state};n(e)}}}))}getUnusedAdsTelemetry(){if(this.pod){let e=this.pod.getUnusedAdsTelemetry();if(this.adBuffet){const t=this.adBuffet.getUnusedAdsTelemetry();(null==t?void 0:t.length)>0&&(e=[...e,...t])}return e}return this.singleAd?this.singleAd.getUnusedAdsTelemetry():[]}}class D{constructor(e,t,n,i){var r;this.options=n||{},this.vastManager=null,this.adBreaks=[],(r=e).indexOf("<vmap:VMAP")>=0||r.indexOf("<VMAP")>=0||(this.vastManager=new N(e,this.options,t,i))}getMetadata(){return this.adBreaks.length>0?{responseType:o.VMAP,breaks:[]}:this.vastManager?this.vastManager.getMetadata():{responseType:o.UNKNOWN}}getUnwrappedAd(e,t,n,r){const o=setTimeout((()=>{const t={state:i.FAILED};t.message=e>=0?`Timeout to get slot for break ${e}`:"Timeout to get fallback ad",r(t)}),t);e>=0||this.vastManager.getUnwrappedVast(t,n).then((e=>{clearTimeout(o),r(e)}))}getUnusedAdsTelemetry(e){return e>=0?[]:this.vastManager.getUnusedAdsTelemetry()}}},940:(e,t,n)=>{"use strict";n.d(t,{Ot:()=>i,XQ:()=>o,ri:()=>r});const{AdResponseManager:i,AD_RESPONSE_TYPE:r,STATUS:o}=n(3007)},6504:(e,t,n)=>{"use strict";var i,r=n(9724).v,o="apn_mobile_video_placements",a="iframeVideoWrapper",s="b2.mp4",l="[AutoplayHandler]",d=function(e){r.verbose(l,e)},c=function(e){r.error(l,e)},u=function(e){r.warn(l,e)},p=function(e){r.info(l,e)},h=!1,v="av2.mp4",f={},m=function(e){var t="https://adsdkprod.azureedge.net/assets/vf/",n=new URL(location.href);if(e&&n.pathname.indexOf("/vast-player/stand_")>=0){var i=location.href.lastIndexOf("/");t=location.href.substr(0,i+1)}return t},g={stopMediaWithSound:1,neverAutoplay:2,allowAutoplay:3},y=n(3837).y(),A=function(){var e="safari";try{var t=navigator.platform,n=navigator.userAgent,i=navigator.appVersion;if(/CriOS/.test(n)&&(e="chrome"),/iP(hone|od|ad)/.test(t)){var r=i.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3]||0,10),e]}return[0,0,0,e]}catch(t){return c(t),[0,0,0,e]}},b=function(){return/iphone/i.test(navigator.userAgent.toLowerCase())||/ipad/i.test(navigator.userAgent.toLowerCase())},k=function(e,t,n,i){var r=e.length,a=0,l=function(e){a===r&&"function"==typeof n&&(h=!0,u("set hasDoneFakingAutoStartForAndroid = true by "+e),n())};e.forEach((function(e,n){!function(e,t,n){try{var r,c,p=e.contentWindow;p[o]||(r=p.document.createElement("video"),p.document.body.appendChild(r),r.src=s,r.muted=!0,c=r.play(),r.pause(),void 0!==c&&c.then((function(){d("video promise done successfully by "+n),a++,l("promise done")})).catch((function(s){var d=s.code,c=s.name,v=s.message;0===d?(u("playback failed : "+d+","+c+","+v+" by "+n),function(e,t,n){u("removing failed iframe #"+(t+1)+" by "+n),document.getElementById(i).removeChild(e)}(e,t,n)):(u("waterfall steps #"+(Number(a)+1)+" by "+n+" : autoplay trick's possible due to video promise be caught with "+s.name),function(e,t,n){h||(u("successfully performed autoplay trick by "+t),n[o]=e,a++,l(t))}(r,n,p))})))}catch(e){d(e)}}(e,n,t)}))},E=function(){var e=navigator.appVersion.indexOf("Mobile"),t=navigator.appVersion.indexOf("Android");return e>-1||t>-1},w=function(){return/android/i.test(navigator.userAgent.toLowerCase())},T=function(){var e=-1;if(w())try{var t=navigator.userAgent.match(/Chrome\/([0-9]+)\./);t&&Array.isArray(t)&&t.length>1&&(e=parseInt(t[1]))}catch(e){d(e)}return e},S=function(e,t,n,i){if(!1===w())return!1;var r=e&&"auto"===e,o=t&&"on"===t;return T()>=53?!(!o||!r||n)||!(!r||!i||n):T()<=52?!(!r||n):void 0},I=function(e){p("Start to detect Android Data Saver option in this device");var t,n=window.document.createElement("video"),i=function(e){try{e&&document.body.removeChild(e)}catch(e){d(e)}};try{n.src=s,n.muted=!0,document.body.appendChild(n),void 0!==(t=n.play())&&t.then((function(){p("Android Data Saver option isn't detected in this device"),i(n),e(!1)})).catch((function(){p("Android Data Saver option is detected in this device, so auto-play will be initiated by user's activity like touch"),i(n),e(!0)}))}catch(t){d(t),p("failed to detect Android Data Saver option in this device, so auto-play will be initiated by user's activity like touch"),i(n),e(!0)}},C=function(e,t,n,i,r,o){if(!h){d("create iframes for Android autoplay by "+e);var s;d("total "+(s=n&&-1!==n?n+1:i)+" iframes will be made by waterfall structure with "+e+" event");for(var l=[],c=0;c<s;c++){var u;u=0===c?a:a+"_Waterfall_"+c;var p=document.createElement("iframe");o&&o instanceof Element?o.querySelector("#"+String(r)).appendChild(p):document.getElementById(r).appendChild(p),p.contentWindow.document.open(),p.contentWindow.document.write("<html></html>"),p.contentWindow.document.close(),p.name=u,p.style.display="none",d("iframes injected for waterfall steps #"+(c+1)+" by "+e),l.push(p)}l&&Array.isArray(l)&&l.length>=1&&"general"!==e?k(l,e,t,r):"function"==typeof t&&t()}},P=function(e,t,n,r){var o,a=y.browser.name.toLowerCase(),s=!(!y.os||"Android"!==y.os.name||!parseInt||"function"!=typeof parseInt||5!==parseInt(y.os.version));if(d("hasMaxLimitOnVideo: "+s),b())return f[r]=!0,void t(n);if("firefox"===a)(i=document.createElement("video")).style.width="1px",i.style.height="1px",i.src=e,i.id=r,i.setAttribute("playsinline",""),document.body.appendChild(i);else{var l=document.createElement("iframe");l.style.display="none",l.id="iframe_"+r,document.body.appendChild(l),s&&i||(i=document.createElement("video")),i.style.width="1px",i.style.height="1px",i.src=e,i.id=r,i.setAttribute("playsinline",""),l.contentWindow.document.body.appendChild(i)}i.muted=n,!1===n&&i.volume&&(i.volume=.001),void 0!==(o=i.play())?o.then((function(){f[r]=!0,d("video promise succeeded: "+r+", muted="+n),t(!0)})).catch((function(e){var i=e.code,o=e.name,a=e.message;d("video promise failed: "+r+", muted="+n+","+i+","+o+","+a),f[r]=!0,t(!1)})):(f[r]=!0,t(!0))};e.exports={APN_MOBILE_VIDEO_PLACEMENT_ID:o,APN_MOBILE_IFRAME_NAME:a,initialize:function(e){try{var t=e.targetElementId,n=e.windowForPublisher,i=e.callbackAdUnitEntryPoint,r=e.callbackPatchForIOSChrome,o=e.waterfallSteps,a=e.maxWaterfallIframes,l=e.initialPlayback,c=e.initialAudio,u=e.automatedTestingOnlyAndroidSkipTouchStart,p=e.androidDSOverride,h=e.wcElement;"b2.mp4"===s&&(s=m(e)+"b2.mp4"),"av2.mp4"===v&&(v=m(e)+"av2.mp4"),E()?w()?(d("intialize for Android"),I((function(e){var r=e;if(!1===p&&e&&T()<=55&&"on"===c&&"auto"===l)i(!1,!0);else if(!1===p&&(e=!1),T()<56&&S(l,c,u,e)){var s=function(e){C(e,(function(){i(!1,!1)}),o,a,t,h)};n.addEventListener("touchstart",(function(){s("touchstart")}),{passive:!0}),n.addEventListener("touchend",(function(){setTimeout((function(){s("touchend")}),1)}),{passive:!0})}else{var d,v;T()>=56?(d="on"===c&&"auto"===l&&!1===r,v="auto"===l&&!0===r):v="auto"===l&&!0===r,C("general",(function(){i(d,v)}),o,a,t,h)}}))):(d("intialize for iOS and etc"),i(!1),function(){var e=A();if(e&&Array.isArray(e)&&e.length>=4){var t=e[0];return"chrome"===e[3]&&10===t&&53===function(){var e=-1;if(b())try{var t=navigator.userAgent.match(/CriOS\/([0-9]+)\./);t&&Array.isArray(t)&&t.length>1&&(e=parseInt(t[1]))}catch(e){d(e)}return e}()}}()&&r&&"function"==typeof r&&n.addEventListener("touchstart",r)):(d("initialize for general html5 browsers"),i(!1))}catch(t){d(t),e.callbackAdUnitEntryPoint&&"function"==typeof e.callbackAdUnitEntryPoint&&e.callbackAdUnitEntryPoint(!1)}},iOSversion:A,isIOS:b,isIosInlineRequired:function(e){var t;try{t=A()[0]>=8&&!0===e}catch(e){c(e)}return t},isRequiredFakeAndroidAutoStart:S,isMobile:E,testDataSaverForAndroid:I,getAutoplayPolicy:function(e,t,n){var i,r;"b2.mp4"===s&&(s=m(n)+"b2.mp4"),"av2.mp4"===v&&(v=m(n)+"av2.mp4"),void 0===t&&(t=!1),i="videoPlacementTest_"+(new Date).getTime()+Math.floor(1e4*Math.random()),r="videoPlacementTest_"+(new Date).getTime()+Math.floor(1e4*Math.random()),(f={})[i]=!1,f[r]=!1,t?P(v,(function(t){!0===t?(d("decided to allowAutoplay"),e(g.allowAutoplay)):P(v,(function(t){!0===t?(d("decided to stopMediaWithSound"),e(g.stopMediaWithSound)):(d("decided to neverAutoplay"),e(g.neverAutoplay))}),!0,r)}),!1,i):P(v,(function(t){!0===t?(d("decided to stopMediaWithSound"),e(g.stopMediaWithSound)):(d("decided to neverAutoplay"),e(g.neverAutoplay))}),!0,r);var o=function(){document.removeEventListener("onFocus",o),setTimeout((function(){var n=document,o=document.getElementById("iframe_"+i);o&&(n=o.contentWindow.document);var a=n.getElementById(i),s=n.getElementById(r);a&&a.parentNode&&(a.parentNode.removeChild(a),d("remove test video placement :"+i)),s&&s.parentNode&&(s.parentNode.removeChild(s),d("remove test video placement for sound on case :"+r)),t?!1===f[i]&&!1===f[r]&&(d("timeout video test"),d("decided to neverAutoplay"),e(g.neverAutoplay)):!1===f[r]&&(d("timeout video test"),d("decided to neverAutoplay"),e(g.neverAutoplay))}),5e3)};document.hasFocus()?o():document.addEventListener("onFocus",o)},videoPolicy:g}},683:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});const i=n(6504)},4270:(e,t,n)=>{"use strict";var i=n(4427).q,r="Cache Manager",o=24e5,a="___appnexus_video_cachemanager_generic_data___",s="___appnexus_video_cachemanager_ad_token___",l={},d=2;function c(e,t,n){switch(d){case 0:case 1:break;default:!function(e,t){l&&(l[e]=t)}(e,t)}}function u(e){switch(d){case 0:case 1:return null;default:return function(e){if(l)return l[e]}(e)}}function p(e){switch(d){case 0:case 1:break;default:!function(e){l&&delete l[e]}(e)}}function h(e){return"apn_"+e}i.debug("Using Cache Method "+d,r),e.exports={setGenericData:function(e,t){if(void 0!==e&&void 0!==t){e=a+e;try{return c(e,t),!0}catch(e){}}return!1},getGenericData:function(e){if(void 0!==e)return u(e=a+e)},deleteGenericData:function(e){void 0!==e&&p(e=a+e)},forceStorageMethod:function(e){d=e,i.debug("Forced usage of cache method "+d,r)},addAd:function(e,t){e&&function(e,t){var n={};n.timestamp=(new Date).getTime(),n.ad=e;try{c(t,JSON.stringify(n))}catch(e){}}(e,h(t))},getAd:function(e){return function(e){var t,n=(new Date).getTime();try{var i=u(e);t=i&&JSON.parse(i),p(e)}catch(e){}return t&&t.timestamp&&t.timestamp>0&&n-t.timestamp<=o?t.ad:null}(h(e))},clearAd:function(e){!function(e){try{p(e)}catch(e){}}(h(e))},setTimeToLive:function(e){o=6e4*e},getNextAdToken:function(){return e=(t=u(s))?parseInt(t):0,c(s,e+=1),e;var e,t}}},5079:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});const i=n(4270)},983:(e,t,n)=>{"use strict";var i=n(9724).v,r=function(e){i.debug("CapabilityDetection",e)};function o(){return!!/Android|webOS|iPhone|iPad|BlackBerry|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)}function a(){return/iphone/i.test(navigator.userAgent.toLowerCase())||/ipad/i.test(navigator.userAgent.toLowerCase())}function s(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return e=/\brv[ :]+(\d+)/g.exec(t)||[],"IE";if("Chrome"===n[1]){if(null!==(e=t.match(/\bOPR\/(\d+)/)))return"Opera";if(null!==(e=t.match(/\bEdg\/(\d+)/)))return"Edge"}return n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n[0]}e.exports={supportsFlash:function(){return!1},isBrowserOnMobile:function(){return o()},getBrowserName:function(){return s()},canPlay:function(e,t){var n=function(e,t,n){return r("invoke canPlayType with video("+e+") and type("+t+") and codec("+n+")"),"video/webm"===t&&a()?"no":e&&e.canPlayType?(i=n&&""!==n?e.canPlayType(t+';codecs="'+n+'"'):e.canPlayType(t),r("result : "+i),i):(r("result : failed to invoke canPlayType with "+e),"");var i},i=null;if(function(e){return"video/x-flv"===e||"video/x-f4v"===e||"video/f4v"===e||"application/x-shockwave-flash"===e}(e.toLowerCase()))return!1;if(function(e){return"application/javascript"===e||"application/x-javascript"===e}(e.toLowerCase()))return!0;var o=e.toLowerCase();if(!t||""===t)if("video/mp4"===o)t="avc1.42E01E,mp4a.40.2",i="avc1.42E01E";else if("video/webm"===o)t="vp8,vorbis";else if("video/ogg"===o)t="theora,vorbis";else if(!function(e){return"audio/mpeg"===e||"audio/mp4"===e||"audio/ogg"===e||"audio/x-pn-realaudio"===e}(o)&&!function(e){return"video/x-ms-wmv"===e||"video/x-msvideo"===e||"video/mpeg"===e||"video/quicktime"===e||"video/3gpp"===e||"video/3gpp2"===e||"video/x-m4v"===e}(o))return!1;var l=document.createElement("video"),d=n(l,o,t);return"probably"===d||"maybe"===d&&(i?"probably"===n(l,o,i):function(e){if("video/3gpp"===e){var t=s();if("Chrome"===t||"Edge"===t)return!1}return!0}(o))},getPlatformType:function(){return o()?/android/i.test(navigator.userAgent.toLowerCase())?"mobile-Android":a()?"mobile-iOS":"mobile-unknown":"desktop-no-flash"}}},8222:(e,t,n)=>{"use strict";n.d(t,{o:()=>i});const i=n(983)},8622:e=>{"use strict";var t={parse:function(e){var t={companions:[]},n=new function(){this.getSubNodes=function(e,t){var n=e.getElementsByTagName(t);return n.length>0?n:null},this.getSubNode=function(e,t,n){n||(n=0);var i=e.getElementsByTagName(t);return i.length>n?i[n]:null},this.getNodeValue=function(e){return 0===e.childNodes.length?"":e.childNodes[0].nodeValue.trim()},this.getNodeValues=function(e){if(0===e.childNodes.length)return"";for(var t="",n=0;n<e.childNodes.length;n++)t+=e.childNodes[n].nodeValue;return t.trim()},this.getNodeAttributeValue=function(e,t){var n=e.getAttribute(t);return null===n&&(n=""),n},this.getNodeAttributeNumberValue=function(e,t,n){n||(n=0);var i=n,r=this.getNodeAttributeValue(e,t);return r.length>0&&(i=r.indexOf(".")>=0?parseFloat(r):parseInt(r)),i},this.getNodeAttributeBooleanValue=function(e,t,n){n||(n=!1);var i=n,r=this.getNodeAttributeValue(e,t);return r.length>0&&(i="t"===r.toLowerCase().charAt(0)),i},this.getSubNodeValue=function(e,t,n){n=void 0===n?"":n;var i=this.getSubNode(e,t);return null!==i?this.getNodeValue(i):n},this.getSubNodeWholeValue=function(e,t,n){n=void 0===n?"":n;var i=this.getSubNode(e,t);return null!==i?this.getNodeValues(i):n},this.getSubNodeBooleanValue=function(e,t,n){n=void 0===n?"false":n;var i=this.getSubNodeValue(e,t);return i.length>0&&"t"===i.toLowerCase().charAt(0)||!(i.length>0&&"f"===i.toLowerCase().charAt(0))&&n},this.prepareAttributionData=function(e,t){var n=this.getNodeAttributeValue(e,"attributiontype");if(!n||"SINGLE-PING"!==n&&"DOUBLE-PING"!==n&&"SINGLE_PING"!==n&&"DOUBLE_PING"!==n)return t;var i={url:t,attributionType:n="SINGLE-PING"===n||"SINGLE_PING"===n?"SINGLE-PING":"DOUBLE-PING"};if("DOUBLE-PING"===n){var r=this.getNodeAttributeValue(e,"attributionsrc");r&&(i.attributionSrc=r)}return i}},i=n.getSubNode(e,"CompanionAds"),r=n.getNodeAttributeValue(i,"required");r&&r.length>0&&(t.required=r);var o=n.getSubNodes(i,"Companion");if(o)for(var a=0;a<o.length;a++){var s=o[a],l={},d=n.getNodeAttributeNumberValue(s,"width",-1),c=n.getNodeAttributeNumberValue(s,"height",-1);if(!(d<=0||c<=0)){l.width=d,l.height=c;var u=n.getNodeAttributeValue(s,"id");u&&(l.id=u),(u=n.getNodeAttributeNumberValue(s,"assetWidth",-1))>0&&(l.assetWidth=u),(u=n.getNodeAttributeNumberValue(s,"assetHeight",-1))>0&&(l.assetHeight=u),(u=n.getNodeAttributeNumberValue(s,"expandedWidth",-1))>0&&(l.expandedWidth=u),(u=n.getNodeAttributeNumberValue(s,"expandedHeight",-1))>0&&(l.expandedHeight=u),(u=n.getNodeAttributeValue(s,"apiFramework"))&&(l.apiFramework=u),(u=n.getNodeAttributeValue(s,"adSlotId"))&&(l.adSlotId=u),(u=n.getNodeAttributeValue(s,"required"))&&(l.required=u),(u=n.getNodeAttributeValue(s,"renderingMode"))&&(l.renderingMode=u),(u=n.getSubNodeValue(s,"AltText"))&&(l.AltText=u),(u=n.getSubNodeValue(s,"AdParameters"))&&(l.AdParameters=u);var p,h,v,f,m=n.getSubNode(s,"StaticResource");if(m&&(u=n.getNodeAttributeValue(m,"creativeType"))){if("video/x-flv"===u||"video/x-f4v"===u||"video/f4v"===u||"application/x-shockwave-flash"===u)continue;var g={type:u};(u=n.getNodeValues(m))&&(g.src=u,l.StaticResource=g)}(u=n.getSubNodeWholeValue(s,"IFrameResource"))&&(l.IFrameResource=u),(u=n.getSubNodeWholeValue(s,"HTMLResource"))&&(l.HTMLResource=u),(u=n.getSubNodeValue(s,"CompanionClickThrough"))&&(l.CompanionClickThrough=n.prepareAttributionData(n.getSubNode(s,"CompanionClickThrough"),u),l.CompanionClickThrough=u);var y=n.getSubNodes(s,"CompanionClickTracking");if(y)for(l.CompanionClickTracking=[],p=0;p<y.length;p++)h=y[p],(v=n.getNodeValues(h))&&(f=n.prepareAttributionData(h,v),l.CompanionClickTracking.push(f));var A=n.getSubNodes(s,"Tracking");if(A)for(l.TrackingEvents=[],p=0;p<A.length;p++){h=A[p];var b=n.getNodeAttributeValue(h,"event");v=n.getNodeValues(h),b&&v&&(f=n.prepareAttributionData(h,v),l.TrackingEvents.push({eventType:b,url:f}))}t.companions.push(l)}}return t}};e.exports=t},4124:(e,t,n)=>{"use strict";var i=n(5433).c,r=n(9724).v,o="CompanionsHandler > ";class a{constructor(e,t,i,a,s){var l=e,d=a,c=s,u={width:t,height:i},p=(new Date).getTime()+Math.floor(1e4*Math.random());c({command:"addTrackingEvents",uniqueId:p,data:d});var h=function(){if(d.CompanionClickTracking&&c({command:"requestTracking",uniqueId:p,data:"companion-click"}),d.hasOwnProperty("StaticResource")&&d.CompanionClickThrough){var e=d.CompanionClickThrough;if("string"==typeof e)window.open(e);else if("object"==typeof e&&e.url&&"string"==typeof e.url)if((n=window.document.featurePolicy)&&n.allowedFeatures&&n.allowedFeatures().includes("attribution-reporting"))if("SINGLE-PING"===e.attributionType)r.log(o,"Open new companion window with SINGLE-PING empty attributionsrc"),window.open(e.url,"_blank","attributionsrc");else if("DOUBLE-PING"===e.attributionType)if(e.attributionSrc){var t=encodeURIComponent(e.attributionSrc);r.log(o,"Open new companion window with DOUBLE-PING attributionsrc = "+t),window.open(e.url,"_blank","attributionsrc="+t)}else r.log(o,"Open new companion window with DOUBLE-PING empty attributionsrc"),window.open(e.url,"_blank","attributionsrc");else window.open(e.url);else window.open(e.url)}var n},v=function(){d.TrackingEvents&&d.TrackingEvents.length>0&&c({command:"requestTracking",uniqueId:p,data:"creative-view"})},f=!0;if(d.hasOwnProperty("StaticResource")){var m=d.StaticResource.type;if("application/x-javascript"===m){var g=document.createElement("script");g.src=d.StaticResource.src,g.onload=v(),l.appendChild(g)}else if(0===m.indexOf("image")){var y=document.createElement("img");y.src=d.StaticResource.src,y.style.maxWidth="100%",y.style.maxHeight="100%",y.style.width="auto",y.style.height="auto",y.style.margin="auto",y.style.display="block",y.style.top=0,y.style.bottom=0,y.style.left=0,y.style.right=0,y.style.position="absolute",y.onload=v(),y.onclick=h,f=!1,y.style.cursor="pointer",l.innerHTML="",l.style.position||(l.style.position="relative"),l.appendChild(y)}}else if(d.hasOwnProperty("IFrameResource")){var A=document.createElement("iframe");A.src=d.IFrameResource,A.scrolling="no",A.style.width="100%",A.style.height="100%",A.style.border="none",A.style.overflow="hidden",A.onload=v(),f=!1,l.innerHTML="",l.appendChild(A)}else d.hasOwnProperty("HTMLResource")&&(0===d.HTMLResource.indexOf("http")?n(7886).B.load(d.HTMLResource,(function(e,t){e||0===t.length||(l.style.display="inline-block",l.style.position||(l.style.position="relative"),l.innerHTML=t,v())})):(l.style.display="inline-block",l.style.position||(l.style.position="relative"),l.innerHTML=d.HTMLResource,v()));f&&(d.hasOwnProperty("StaticResource")&&d.CompanionClickThrough&&(l.style.cursor="pointer"),l.onclick=h),this.stop=function(){"concurrent"===d.renderingMode&&(l.innerHTML="")},this.getData=function(){return{container:l,companionData:d,size:u}}}}class s{constructor(e,t,n){var s=e,l=t,d=n,c=[];r.always(o,"Version: 0.1.13");for(var u=[],p=0;p<l.companionContainers.length;p++)try{var h=window.getComputedStyle(l.companionContainers[p],null),v={id:p,width:parseInt(h.width),height:parseInt(h.height),companion:null};u.push(v)}catch(e){}for(i.selectCompanionsForContainers(s,u),p=0;p<u.length;p++)if(u[p].companion){var f=new a(l.companionContainers[p],u[p].width,u[p].height,u[p].companion,d);c.push(f)}this.stop=function(){for(p=0;p<c.length;p++)c[p].stop();c.length=0},this.getCompanionsData=function(){var e=[];for(p=0;p<c.length;p++)e.push(c[p].getData());return e}}}e.exports={renderCompanions:function(e,t,n){return r.log(o,"renderCompanions called."),new s(e,t,n)},stopCompanions:function(e){e&&e.stop()},parse:function(e){return function(e){if(0===e.length)return r.warn(o,"parseCompanions > empty companions xml"),null;"<CompanionAds"!==(e=function(e){var t=e.indexOf("<"),n=e.substr(-1===t?0:t);return-1!==(t=n.lastIndexOf(">"))&&(n=n.substr(0,t+1)),n.trim()}(e)).substr(0,13)&&(e="<CompanionAds>"+e+"</CompanionAds>");var t=null;if(void 0!==window.DOMParser){if("parsererror"===(t=(new DOMParser).parseFromString(e,"text/xml")).documentElement.nodeName){try{r.error(o,"parseCompanions > Error reason = "+t.documentElement.childNodes[0].nodeValue)}catch(e){}return r.warn(o,"parseCompanions > invalide xml structure"),null}}else{if(void 0===window.ActiveXObject)return r.error(o,"parseCompanions > Failed to parse vast xml by window.ActiveXObject(Microsoft.XMLDOM)"),null;try{if((t=new window.ActiveXObject("Microsoft.XMLDOM")).loadXML(e),0!==t.parseError.errorCode)return r.error(o,t.parseError),null}catch(e){return r.error(o,"parseCompanions > Failed to parse vast xml by window.ActiveXObject(Microsoft.XMLDOM)",e),null}}return t?n(8622).parse(t):(r.error(o,"parseCompanions > invalid xml structure"),null)}(e)}}},9877:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});const i=n(4124)},6805:e=>{"use strict";var t=0,n=0,i=0,r=!1;function o(e,t){try{if(void 0!==e&&l(e)&&console){var n=r?"[XandrVideo":"[APN",i=function(e){switch(e){case 0:default:break;case 1:return"always";case 2:return"error";case 3:return"warn";case 4:return"info";case 5:return"log";case 6:return"debug";case 7:return"verbose"}}(e);if(console[i]||(n+="-"+i,i="log"),n+="]",n+="["+function(){var e="";try{var t=new Date;e=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+"."+t.getMilliseconds()}catch(e){}return e}()+"]",t.splice(0,0,n),console[i].apply)console[i].apply(console,t);else{var o=Array.prototype.slice.apply(t).join("");console[i](o)}}}catch(e){}}function a(e){try{var t="";try{t=window.top.location.search}catch(e){try{t=window.location.search}catch(e){}}var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}catch(e){return""}}function s(e){var t=0;try{if(void 0!==e){var n=parseInt(e);isNaN(n)?"boolean"==typeof e?t=e?6:0:"TRUE"===(e=e.toUpperCase())?t=6:"FALSE"===e&&(t=0):t=n}}catch(e){}return t}function l(e){return e<=t}e.exports={traceAtLevel:function(){try{if(arguments.length>0){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);o.call(this,e,t)}}catch(e){}},always:function(){try{o.call(this,1,Array.prototype.slice.call(arguments))}catch(e){}},error:function(){try{o.call(this,2,Array.prototype.slice.call(arguments))}catch(e){}},log:function(){try{o.call(this,5,Array.prototype.slice.call(arguments))}catch(e){}},warn:function(){try{o.call(this,3,Array.prototype.slice.call(arguments))}catch(e){}},info:function(){try{o.call(this,4,Array.prototype.slice.call(arguments))}catch(e){}},debug:function(){try{o.call(this,6,Array.prototype.slice.call(arguments))}catch(e){}},verbose:function(){try{o.call(this,6,Array.prototype.slice.call(arguments))}catch(e){}},handleLogDebugLegacySupport:function(e,t){try{!function(e,t,n){try{var i="[APN-5-"+(new Date).toISOString()+"] ";null!==n&&n&&n.length>0&&(i+=n+">"),i+=t,l(5)&&console.log(i)}catch(e){l(5)&&console.log(e)}}(0,e,t)}catch(e){}},setDebugLevel:function(e){try{!function(e){try{i=s(e),t=Math.max(Math.max(n,i),t)}catch(e){}}(e)}catch(e){}},isTraceLevelActive:function(e){try{return l(e)}catch(e){return!1}},TRACE_LEVEL_ALWAYS:1,TRACE_LEVEL_ERROR:2,TRACE_LEVEL_WARN:3,TRACE_LEVEL_INFO:4,TRACE_LEVEL_LOG:5,TRACE_LEVEL_DEBUG:6,TRACE_LEVEL_VERBOSE:6},function(){try{var e=a("xdr_debug").toUpperCase();e&&e.length>0?(n=s(e),r=!0):n=s(a("ast_debug").toUpperCase()),t=Math.max(n,t)}catch(e){}}()},9724:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});const i=n(6805)},8963:(e,t,n)=>{"use strict";var i=n(9724).v;function r(e){if(e)return e.responseXML?e.responseXML:e.responseText}e.exports={debug:function(){i.handleLogDebugLegacySupport.apply(this,arguments)},logDebug:function(){i.handleLogDebugLegacySupport.apply(this,arguments)},setDebugLevel:function(e){i.setDebugLevel(e)},isNotEmpty:function(e){var t=!1;return null!==e&&e&&(t=e.length>0),t},objectToString:function(e,t){var n="null";if(t=void 0!==t?t:0,null!==e){n="OBJ[";var i="";for(var r in e){var o=e[r];if("object"==typeof o)if(++t<9)try{o=this.objectToString(o)}catch(e){o="err:"+e}else o="err: max recursion hit";i.length>0&&(i+=","),i+=r+"="+o}n+=i,n+="]"}return n},getRandomString:function(){return Math.random().toString(36).substring(2)},traceVastFromXhr:function(e,t){try{if(e)if(Array.isArray(e)){if(e.length>0){var n=[];for(var o in e)n.push(e[o].responseURL);var a=e[e.length-1];if(a){var s=r(a),l=a.responseURL;i.info(t,"Tag load chain:",n,"\n","Final Tag URL: ",l,"\n","Final Tag: ",s)}}}else{var d=r(e);i.info(t,"Tag URL:",e.responseURL,"\n","Tag:",d)}}catch(e){}}}},4427:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});const i=n(8963)},4516:(e,t,n)=>{"use strict";var i=n(6307),r=n(9227),o=n(214),a=n(374),s=n(4410),l=n(2067),d=l.DelayEventHandler,c=l.unique(),u=n(1731),p=n(3909),h=n(683).U,v="APNVideo_Player_"+((new Date).getTime()+Math.floor(1e4*Math.random())),f="[PlayerManager_Main]",m=n(9724).v,g=function(e){m.debug(f,e)},y=function(e){m.error(f,e)},A=["AdPaused","AdVolumeChange"],b=["AdLoaded","AdStopped","AdSkippableStateChange","AdLinearChange","AdDurationChange","AdRemainingTimeChange","AdLog","AdError"],k={enforcePrivacy:!1,initialPlayback:"auto",initialAudio:"off",skippable:{enabled:!0,allowOverride:!1,videoThreshold:15,videoOffset:5,skipLocation:"top-left",skipText:"Video can be skipped in %%TIME%% seconds",skipButtonText:"SKIP"},adText:"Ad",showMute:!0,showVolume:!0,showProgressBar:!0,showPlayToggle:!0,showBigPlayButton:!0,allowFullscreen:!0,closedCaptions:{show:!0},enableReplay:!1,playerSkin:{customPlayerSkin:"",controlBarHeight:30,topDividerColor:"#606060",bottomDividerColor:"#606060",topDividerWidth:1,bottomDividerWidth:1,videoBackgroundColor:"#000000"},disableCollapse:{enabled:!1,replay:!1},endCard:{enabled:!1,clickable:!0,color:"",imageUrl:"",imageWidth:"",imageHeight:"",showCompanion:!0},enableInlineVideoForIos:!0,delayExpandUntilVPAIDInit:!1,delayExpandUntilVPAIDImpression:!1,vpaidTimeout:5e3,waterfallTimeout:3e4,waterfallSteps:-1,fixedSizePlayer:!0,disableTopBar:!1,sideStream:{enabled:!1,position:"bottom-right",xOffset:0,yOffset:0,space:"empty",dynamicBigPlayButtonOnSideStream:!0},sideStreamObject:{},preloadInlineAudioForIos:!1,controlBarPosition:"over",customPlayerSkinCss:"",customButton:{enabled:!1,url:"",altText:"",imageSrc:"",imgWidth:50,imgHeight:30},enableNativeInline:!1,androidDSOverride:!1,cbNotification:function(){},parentIframeIsModal:!1,learnMore:{enabled:!1,clickToPause:!0,text:"Learn More",separator:"-"},podText:"%%SLOT_NUMBER%% of %%SLOTS%%",playerContextId:"anadvideoplayer",data:{skipOffset:"",durationMsec:null,skipOffsetMsec:null,isVastVideoSkippable:!1,vastProgressEvent:{},vastDurationMsec:null,adIcons:null},test:function(){}},E={externalNameOfVideoPlayer:v,videoPlayerObj:i,autoplayHandler:h,mobileSupport:h,customSkinning:u,options:{},adVideoPlayer:{},callbackForAdUnit:{},vpaidData:{},iframeVideoWrapper:{},isPlayingVideo:!1,isDoneInitialPlay:!1,isFullscreen:!1,heightOffset:0,explicitPaused:!1,firstExplicitPaused:!0,aspectRatio:0,videoObjectId:{},isViewable:!1,isSkipped:!1,isCompleted:!1,isMuted:!1,isExplicitMuted:!1,hasBeenUnmuted:!1,isChrome:navigator.userAgent.indexOf("Chrome")>-1,videojs_vpaid:o,overlayPlayer:!1,forceToSkip:!1,ExtendDefaultOption:a,delayEventHandler:null,pausedByViewability:!1,mutedByVisibility:!1,isReadyToExpandForMobile:!1,isAlreadyPlaingForVPAID:!1,isSideStreamActivated:!1,isExpanded:!0,isVideoCompleteInjected:!1,isFullscreenToggled:!1,toggleWindowFocus:!0,viewabilityTracking:null,isDoneFirstLoadStart:!1,startedReplay:!1,Utils:l,isAlreadyStart:!1,isEnded:!1,blockTrackingUserActivity:!1,videoId:"",divIdForVideo:"",pausedByAPI:!1,simidIntegratorObj:null,adImpressionOrStartDispatched:!1,pauseEventDispatched:null,adSkipConfirmation:null,init:function(e){var t=a(k,e);return this.options=t,"boolean"==typeof this.options.disableCollapse&&(this.options.disableCollapse={enabled:this.options.disableCollapse,replay:!1}),this.delayEventHandler=new d,this.delayEventHandler.suppress(this.options.delayExpandUntilVPAIDImpression),this.delayEventHandler.start(),this.viewabilityTracking=new p,t},resetPlayerForPodSlot:function(){this.isPlayingVideo=!1,this.isDoneInitialPlay=!1,this.isSkipped=!1,this.isCompleted=!1,this.isAlreadyPlaingForVPAID=!1,this.isVideoCompleteInjected=!1,this.isDoneFirstLoadStart=!1,this.isAlreadyStart=!1,this.isEnded=!1},getValueFromPlayer:function(e){var t=0;try{"controlBar.height"===e&&this.adVideoPlayer&&this.adVideoPlayer.controlBar&&this.adVideoPlayer.controlBar.height&&"function"==typeof this.adVideoPlayer.controlBar.height&&"html5"===this.decidePlayer(this.options.requiredPlayer)&&(t=this.adVideoPlayer.controlBar.height())}catch(e){y(e)}return t},decidePlayer:function(){return"html5"},buildPlayer:function(e,t){var n,i=this;(t.waterfallStepId&&g("CHECKING AUTOPLAY FOR WATERFALL STEP: "+t.waterfallStepId),"html5"===this.decidePlayer(t.requiredPlayer)&&this.autoplayHandler&&!t.overlayPlayer)?(n=!h.isMobile()&&("on"===t.initialAudio||!0===t.audioOnMouseover),i.autoplayHandler.getAutoplayPolicy((function(n){var r=i.autoplayHandler.videoPolicy;switch(n){case r.allowAutoplay:break;case r.stopMediaWithSound:if(h.isMobile()&&"native"===t.adType&&t.vpaid&&i.isAlreadyPlaingForVPAID)break;"on"===t.initialAudio?("auto"!==t.initialPlayback&&"mouseover"!==t.initialPlayback||(t.initialAudio="off",t.audioOnMouseover=!1),!0===t.isWaterfall&&(t.adAttempt>0?(t.initialAudio="off",t.audioOnMouseover=!1):t.audioOnMouseover=!0)):"auto"!==t.initialPlayback&&"mouseover"!==t.initialPlayback||(t.audioOnMouseover=!1);break;case r.neverAutoplay:t.initialPlayback="click",t.isWaterfall&&(t.isWaterfall=!1,t.stopWaterfall=!0)}if(t.waterfallStepId&&g("BUILDING PLAYER FOR WATERFALL STEP: "+t.waterfallStepId),t.isXandrVastPlayer){var o=document.getElementsByTagName("iframe");if(o&&o.length>0)for(var a=0;a<o.length;a++){var s=o[a];s.id&&0===s.id.indexOf("iframe_videoPlacementTest_")&&document.body.removeChild(s)}}i.buildPlayerCallback(e,t)}),n,t.msSkinCss)):i.buildPlayerCallback(e,t)},buildPlayerCallback:function(e,t){this.callbackForAdUnit=e,t.hasOwnProperty("overlayPlayer")&&(this.overlayPlayer=t.overlayPlayer,t.hasOwnProperty("fullscreenMode")&&(t.allowFullscreen=!1)),this.options.targetElement&&!this.options.firstAdAttempted&&(this.options.targetElement.style.backgroundImage||this.options.pod&&this.options.slotNumber>1||(this.options.targetElement.style.visibility="hidden"));var n="APNVideo_Player_"+((new Date).getTime()+Math.floor(1e4*Math.random()));this.externalNameOfVideoPlayer=n,r(e,t,this)},getPlayerStatus:function(){},notifyPlayer:function(e,t){this.adVideoPlayer.handleAdUnitNotification({name:e,value:t})},load:function(){if("html5"===this.decidePlayer(this.options.requiredPlayer)){g("load video");try{this.adVideoPlayer&&void 0!==this.adVideoPlayer&&this.adVideoPlayer.load&&"function"==typeof this.adVideoPlayer.load&&(this.options.delayExpandUntilVPAIDImpression&&this.adVideoPlayer.player()&&this.adVideoPlayer.player().autoplay()&&this.adVideoPlayer.player().autoplay(!1),this.adVideoPlayer.load())}catch(e){y(e)}}},replay:function(){if(this.isEnded){if(this.adVideoPlayer.controlBar.show(),this.options.vpaid&&this.options.isXandrVastPlayer&&this.options.enableReplay){this.dispatchEventToAdunit({name:"rewind"}),this.startedReplay=!0;var e=this.iframeVideoWrapper||document.getElementById(this.options.iframeVideoWrapperId);e&&e.parentNode.removeChild(e),navigator.userAgent.indexOf("Trident/7.0")>-1||l.isIos()?(this.isEnded=!1,this.dispatchEventToAdunit({name:"replay-vpaid"})):(this.dispatchEventToAdunit({name:"replay-vpaid"}),this.isEnded=!1),this.adVideoPlayer.controlBar.playToggle&&this.adVideoPlayer.controlBar.playToggle.el()&&this.adVideoPlayer.controlBar.playToggle.el().style&&(this.adVideoPlayer.controlBar.playToggle.el().style["pointer-events"]="")}else this.dispatchEventToAdunit({name:"rewind"}),this.startedReplay=!0,this.isEnded=!1,l.isSafari()&&!l.isMobile()&&this.options.isXandrVastPlayer&&this.adVideoPlayer.currentTime(this.adVideoPlayer.duration()),this.explicitPlay(),this.adVideoPlayer.controlBar.playToggle&&this.adVideoPlayer.controlBar.playToggle.el()&&this.adVideoPlayer.controlBar.playToggle.el().style&&(this.adVideoPlayer.controlBar.playToggle.el().style["pointer-events"]=""),this.options.sideStream&&!0===this.options.sideStream.wasEnabled&&(this.options.sideStream.enabled=!0,delete this.options.sideStream.wasEnabled),this.options.endCard&&this.options.endCard.enabled&&(this.actualPlayByVideoJS(),l.isIos()||this.adVideoPlayer.bigPlayButton.show());this.options.cbApnVastPlayer&&this.options.cbApnVastPlayer("ad-replay",!0)}},actualPlayByVideoJS:function(){this.adVideoPlayer.play(),this.options.vpaid&&this.adVideoPlayer.trigger("handleManualUserInActive")},play:function(){if(!(this.options.feedback&&this.adVideoPlayer&&this.adVideoPlayer.el_&&this.adVideoPlayer.el_.ownerDocument.getElementById("adFeedbackContainer"))){var e=function(){this.vpaidResumedByAdPlayer||this.dispatchEventToAdunit({name:"video_resume"}),this.vpaidResumedByAdPlayer=!1,this.isPlayingVideo=!0};if(!0===this.isEnded)return"preview"===this.options.adType&&this.options.onlyAudio&&this.replay(),void this.adVideoPlayer.off("adResumedByVpaidCreative",e.bind(this));var t=h.isMobile()&&h.iOSversion()[0]>=10&&!1===this.options.enableInlineVideoForIos;if(t&&!l.isIphone()&&"native"===this.options.adType&&(t=!1),t){var n=this;n.overlayPlayer?n.options.targetElement.style.overflow="":setTimeout((function(){n.options.targetElement.style.overflow=""}),n.options.expandTime)}if(this.isAlreadyPlaingForVPAID=!0,!this.isCompleted){if(g("play video"),this.isDoneInitialPlay)this.decidePlayer(this.options.requiredPlayer),this.isPlayingVideo||this.dispatchEventToAdunit({name:"video_resume"});else if(!this.options.vpaid)if(this.dispatchEventToAdunit({name:"video_start"}),this.delayImpression){var i=this;this.adVideoPlayer.one("dispachImpression",(function(){i.callbackForAdUnit.cbForHandlingDispatchedEvent&&i.callbackForAdUnit.cbForHandlingDispatchedEvent({name:"video_start",onlyTracking:!0}),i.dispatchEventToAdunit({name:"video_impression"}),this.options.isXandrVastPlayer&&this.callbackForAdUnit&&this.callbackForAdUnit.cbDelayEventsTracking&&this.callbackForAdUnit.cbDelayEventsTracking(!1)}))}else this.dispatchEventToAdunit({name:"video_impression"}),this.options.isXandrVastPlayer&&this.callbackForAdUnit&&this.callbackForAdUnit.cbDelayEventsTracking&&this.callbackForAdUnit.cbDelayEventsTracking(!1);if(this.options.vpaid&&!this.listeningForVpaidResume&&(this.listeningForVpaidResume=!0,this.adVideoPlayer.on("adResumedByVpaidCreative",e.bind(this))),this.options.vpaid&&this.isIosInlineRequired()?this.isDoneInitialPlay?this.actualPlayByVideoJS():this.adVideoPlayer.trigger("play"):this.options.vpaid&&this.options.overlayPlayer&&h.isIOS()&&h.iOSversion()[0]<10&&!this.isDoneInitialPlay||this.options.vpaid&&this.options.overlayPlayer&&navigator.appVersion.indexOf("Android")>-1&&this.options.enableWaterfall&&!this.isDoneInitialPlay?this.adVideoPlayer.trigger("play"):this.actualPlayByVideoJS(),"native"===this.options.adType&&h.isMobile()){var r=this.adVideoPlayer.controlBar;setTimeout((function(){r.el_.style.opacity=1,r.el_.style.visibility="visible"}),500)}"html5"===this.decidePlayer(this.options.requiredPlayer)||(this.isPlayingVideo=!0),this.isDoneInitialPlay=!0,this.isEnded=!1}}},resetVpaid:function(){this.dispatchEventToAdunit({name:"reset"})},pause:function(){this.isPlayingVideo&&(g("pause video"),this.adVideoPlayer.pause(),this.options.vpaid&&(this.vpaidResumedByAdPlayer=!1,this.adVideoPlayer.trigger("handleManualUserActive")),this.isCompleted||this.isEnded||this.dispatchEventToAdunit({name:"video_pause"}))},explicitPause:function(){g("explicit pause video"),this.options.xandrSdk&&this.firstExplicitPaused&&!this.adVideoPlayer.paused()&&(this.firstExplicitPaused=!1,this.pauseEventDispatched=!1),this.explicitPaused=!0,this.pause()},explicitPlay:function(){this.pausedByAPI||(g("explicit play video"),this.explicitPaused=!1,this.options.vpaid&&(this.vpaidResumedByAdPlayer=!0),this.play())},mute:function(){this.isMuted||(g("mute audio"),this.adVideoPlayer.muted(!0),this.dispatchEventToAdunit({name:"video_mute"}),this.isMuted=!0)},explicitMute:function(){g("explicit mute video"),this.isExplicitMuted=!0,this.mute()},unmute:function(){!this.isExplicitMuted&&this.isMuted&&(g("unmute audio"),!0===this.adVideoPlayer.muted()&&this.adVideoPlayer.muted(!1),(this.isMuted||"off"===this.options.initialAudio)&&this.dispatchEventToAdunit({name:"video_unmute"}),this.isMuted=!1)},explicitUnmute:function(){this.isExplicitMuted=!1,this.unmute()},resizeVideoWithDimensions:function(e,t){(this.isEnded||this.isSkipped)&&1===e&&1===t&&(this.options.macroWidth=this.options.width,this.options.macroHeight=this.options.height),this.options.width=e,this.options.height=t,this.resizeVideo(this.aspectRatio)},destroy:function(e,t){if(this.isPlayingVideo=!1,this.adVideoPlayer.pause(),!1===this.isCompleted&&(!1===this.options.vpaid||!0===this.options.vpaid&&!1===this.isSkipped)&&this.dispatchEventToAdunit({name:"video_skip"}),this.isSkipped=!0,this.verificationManager&&this.verificationManager.destroy(),g("destroy"),"preview"===this.options.adType)return this.adVideoPlayer.currentTime(this.adVideoPlayer.duration()),void(this.options.vpaid?this.adVideoPlayer.trigger("customDestroy"):this.adVideoPlayer.trigger("ended"));"function"==typeof this.callbackForAdUnit.cbWhenDestroy&&(this.overlayPlayer?e&&t?this.callbackForAdUnit.cbWhenDestroy({type:1,code:900,message:t},!0,this.options):this.callbackForAdUnit.cbWhenDestroy(null,!0,this.options):e&&t?this.callbackForAdUnit.cbWhenDestroy({type:1,code:900,message:t},null,this.options):this.callbackForAdUnit.cbWhenDestroy(null,null,this.options))},destroyWithoutSkip:function(e,t,n,i){try{var r=this,o=function(){if(r.isPlayingVideo=!1,"native"===r.options.adType||"preview"===r.options.adType){if(r.options.iframeVideoWrapperId===r.options.iframeVideoWrapperIdPrevious)return;r.options.iframeVideoWrapperIdPrevious=r.options.iframeVideoWrapperId}903!=i&&r.adVideoPlayer&&r.adVideoPlayer.pause&&"function"==typeof r.adVideoPlayer.pause&&r.adVideoPlayer.pause(),r.verificationManager&&r.verificationManager.destroy(),g("destroy without skip: "+r.options.iframeVideoWrapperId);var o=i||900;"function"==typeof r.callbackForAdUnit.cbWhenDestroy&&(r.overlayPlayer?e&&t?(n&&(o=402),r.callbackForAdUnit.cbWhenDestroy({type:1,code:o,message:t},!0,r.options)):r.callbackForAdUnit.cbWhenDestroy(null,!0,r.options):e&&t?(n&&(o=402),r.callbackForAdUnit.cbWhenDestroy({type:1,code:o,message:t},null,r.options)):r.callbackForAdUnit.cbWhenDestroy(null,null,r.options))};r.options.disableCollapseForDelay&&r.options.disableCollapseForDelay>0?setTimeout(o,r.options.disableCollapseForDelay):o()}catch(e){y("failed to destroy/notify by "+e)}},getVideoObject:function(){return this.adVideoPlayer},handleOverlayNotification:function(e){g("Got overlay notification from player = "+e.name);var t=this,n={leaveFullscreen:function(){t.options.hasOwnProperty("playerNotification")&&t.options.playerNotification("leaveFullscreen")}}[e.name];n&&void 0!==n&&n()},notifyVpaidEvent:function(e,t){var n=this;n.options.delayExpandUntilVPAIDImpression&&n.delayEventHandler.isSuppress&&A.indexOf(e)>=0||(b.indexOf(e)>=0||b.indexOf("vpaid."+e)>=0?n.notifyVpaidEvent_internal(e,t):n.delayEventHandler.push((function(){n.notifyVpaidEvent_internal(e,t)})))},notifyVpaidEvent_internal:function(e,t){this.options.cbNotification&&this.options.cbNotification("VPAID",e,this.options.targetId,null,t?{vpaidEventData:t}:null),this.options.cbApnVastPlayer&&this.options.cbApnVastPlayer(e)},setChromeSize:function(){this.adVideoPlayer.width="0px",this.adVideoPlayer.height="0px",this.adVideoPlayer.style.width="0px",this.adVideoPlayer.style.height="0px",this.options.targetElement.style.visibility="visible"},click:function(e,t){var n=function(e){if("string"==typeof e)window.open(e);else if("object"==typeof e&&e.url&&"string"==typeof e.url)if(l.isAttributionApiAvailable())if("SINGLE-PING"===e.attributionType)g("Open new window with SINGLE-PING empty attributionsrc"),window.open(e.url,"_blank","attributionsrc");else if("DOUBLE-PING"===e.attributionType)if(e.attributionSrc){var t=encodeURIComponent(e.attributionSrc);g("Open new window with DOUBLE-PING attributionsrc = "+t),window.open(e.url,"_blank","attributionsrc="+t)}else g("Open new window with DOUBLE-PING empty attributionsrc"),window.open(e.url,"_blank","attributionsrc");else window.open(e.url);else window.open(e.url)};if(this.isDoneInitialPlay){!1===this.isIosInlineRequired()&&(this.pause(),this.toggleWindowFocus=!1);var i=!1;e?(i=!0,n(e)):this.options.clickUrls&&this.options.clickUrls.length>0&&(i=!0,n(this.options.clickUrls[this.options.clickUrls.length-1])),void 0!==t&&!0!==t||("function"==typeof this.options.eventCB&&this.options.eventCB(this.options.targetId,"click"),this.dispatchEventToAdunit({name:"ad-click",trackClick:i}))}else this.play()},getRapamsAndExtensions:function(){var e=this.options.extensions&&this.options.extensions.length>0?"<Extensions>"+this.options.extensions+"</Extensions>":"";return{adParameters:this.options.adParameters,extensions:e}},handleViewability:function(e,t,n){var i=this.options&&this.options.viewability,r=e&&e.name?e.name:null;"fullscreenchange"!==r&&"video_fullscreen"!==r||(r=this.isFullscreen?"fullscreen":"exitFullscreen"),n||"video_duration"!==r||(this.isAlreadyStart=!0),r&&i&&(this.blockTrackingUserActivity&&("video_resume"===r||"video_pause"===r||"video_mute"===r||"video_unmute"===r)||(r===t?function(){var e;(!(e=this.adVideoPlayer&&this.adVideoPlayer.player&&"function"==typeof this.adVideoPlayer.player&&this.adVideoPlayer.player().duration())||void 0===e||e<=0)&&(e=-2),-2===e&&(this.options&&this.options.data&&this.options.data.vastDurationMsec?(!(e=this.options.data.vastDurationMsec/1e3)||null===e||e<=0)&&(e=-2):e=-2);var n=this.options.width,i=this.options.height;if(this.viewabilityTracking.init(this.options,e,n,i,t,function(){return this.isFullscreen}.bind(this),function(){return this.adVideoPlayer&&this.adVideoPlayer.player&&"function"==typeof this.adVideoPlayer.player?this.adVideoPlayer.player().volume():-1}.bind(this)),this.options.expandable)"video_start"===r&&this.viewabilityTracking.invokeEvent("expand"),!1===this.options.vpaid&&"loadstart"===r&&this.viewabilityTracking.invokeEvent("expand"),this.viewabilityTracking.invokeEvent(r);else{if(this.options.overlayPlayer&&l.isMobile()&&this.options.delayStartViewability)return;this.viewabilityTracking.invokeEvent(r)}}.apply(this):function(){this.viewabilityTracking&&this.viewabilityTracking.isReady&&("force_start_viewability"===r&&this.options.delayStartViewability?(this.options.delayStartViewability=!1,this.viewabilityTracking.invokeEvent("video_start")):this.viewabilityTracking.invokeEvent(r))}.apply(this)))},findPathForViewability:function(e){var t;if(t="video_start",e&&e.name&&e.name===t){if(this.isDoneFirstLoadStart)return;this.isDoneFirstLoadStart=!0}this.handleViewability(e,t,!0)},dispatchEventToAdunit:function(e,t){var n=this,i="video_mute"===e.name||"video_unmute"===e.name||"volume-change"===e.name;if(!n.options.isXandrVastPlayer||n.adImpressionOrStartDispatched||!i){if("video_impression"!==e.name&&"video_start"!==e.name||(n.adImpressionOrStartDispatched=!0),"video_pause"===e.name||"video_resume"===e.name){if(null!==n.pauseEventDispatched){if(n.pauseEventDispatched&&"video_pause"===e.name)return;if(!n.pauseEventDispatched&&"video_resume"===e.name)return}n.pauseEventDispatched="video_pause"===e.name}if("video_start"===e.name){if(n.iframeVideoWrapper.contentDocument){var r=n.iframeVideoWrapper.contentDocument.getElementById(n.divIdForVideo),o=n.iframeVideoWrapper.contentDocument.getElementById(n.videoId);r.style.background=n.options.playerSkin.videoBackgroundColor,o.style.background=n.options.playerSkin.videoBackgroundColor,h.isIOS()&&n.isIosInlineRequired()&&(o.style.opacity=0)}navigator.appVersion.indexOf("Android")>-1&&n.options.hasOwnProperty("targetElementBackground")&&(n.options.targetElement.style.background="",delete n.options.targetElementBackground)}if(navigator.appVersion.indexOf("Android")>-1&&"expand"===e.name&&!n.options.hasOwnProperty("targetElementBackground")&&n.options.targetElement&&n.options.isWaterfall&&(n.options.targetElementBackground=n.options.targetElement.style.background,n.options.targetElement.style.background="#000000"),"video_complete"===e.name){if("preview"===n.options.adType&&n.isSkipped)return void("function"==typeof t&&t());void 0===e.obj&&(e.obj={}),e.obj.videoAdPending=this.options.disableCollapse.replay}if(this.findPathForViewability(e),"collapse"==e.name&&this.verificationManager&&n.verificationManager.dispatchEvent(e.name,e.data,"ad-collapse"),(!0===this.startedReplay||this.isEnded)&&!0===this.options.disableCollapse.replay)if(!1===this.startedReplay&&"rewind"===e.name);else{if("video_complete"===e.name&&"function"==typeof t)return void t();if("ad-click"!==e.name&&-1===e.name.indexOf("IconClick"))return void this.callbackForAdUnit.cbForHandlingDispatchedEvent(e,!0)}("video_skip"!==e.name||this.options.pod||!1!==c.pushAndCheck(this.options.targetElement.id+"_dispatchEventToAdunit",e.name))&&("video_complete"===e.name&&!0===this.isVideoCompleteInjected&&!1===this.options.disableCollapse.replay||(e&&"video_time"!==e.name&&g("(push)"+e.name),this.delayEventHandler.push((function(){n.dispatchEventToAdunit_internal(e,t)})),"video_complete"===e.name&&(this.isVideoCompleteInjected=!0)))}},dispatchEventToAdunit_internal:function(e,t){if(!this.isCompleted||"video_complete"===e.name||"ad-click"===e.name||"video_skip"===e.name||this.startedReplay){var n=this;if(e&&"video_time"!==e.name&&g("invoke callback : "+JSON.stringify(e)),this.options.hasOwnProperty("overlayPlayer")&&this.options.hiddenControls&&(("firstplay"===e.name&&!this.options.vpaid||"video_impression"===e.name&&this.options.vpaid)&&(!l.isMobile()||"click"!==this.options.initialPlayback&&"mouseover"!==this.options.initialPlayback?h.isIOS()&&h.iOSversion()[0]<10&&"auto"===this.options.initialPlayback&&(this.adVideoPlayer.controlBar.el_.style.removeProperty("display"),delete this.options.hiddenControls):(this.adVideoPlayer.controlBar.el_.style.removeProperty("display"),delete this.options.hiddenControls)),"video_resume"===e.name&&this.options.vpaid&&l.isMobile()&&(this.adVideoPlayer.controlBar.el_.style.removeProperty("display"),delete this.options.hiddenControls)),this.callbackForAdUnit.cbForHandlingDispatchedEvent&&"video_time"!==e.name){if("video_pause"===e.name&&(this.isPlayingVideo=!1),"video_play"!==e.name&&"video_start"!==e.name&&"firstplay"!==e.name||(this.isPlayingVideo=!0,this.isDoneInitialPlay=!0),"video_fullscreen"===e.name)return void setTimeout((function(){e.fullscreenStatus=n.isFullscreen?"enter":"exit",n.callbackForAdUnit.cbForHandlingDispatchedEvent(e)}),1500);if("function"==typeof t&&t(),this.blockTrackingUserActivity&&("video_resume"===e.name||"video_pause"===e.name||"video_mute"===e.name||"video_unmute"===e.name)||(e.player=this,this.callbackForAdUnit.cbForHandlingDispatchedEvent(e)),this.verificationManager){var i=this.prepareOmidEventData(e);i.name&&(this.options.expandable&&"video_start"==e.name&&this.verificationManager.dispatchEvent(i.name,i.data,"ad-expand"),this.verificationManager.dispatchEvent(i.name,i.data,e.name))}}!0===this.options.vpaid&&"video_skip"===e.name&&(this.isSkipped=!0)}},resolveMacro:function(e){switch(e){case"MEDIAPLAYHEAD":return this.options.hasOwnProperty("mediaPlayhead")&&"number"==typeof this.options.mediaPlayhead?l.convertTimeSecondsToString(this.options.mediaPlayhead):-1;case"BREAKPOSITION":return this.options.breakPosition?this.options.breakPosition:-1;case"ADCOUNT":return 1;case"PLACEMENTTYPE":return this.options.overlayPlayer?1:this.options.expandable?3:-1;case"CLIENTUA":return this.options.clientUA&&!this.options.enforcePrivacy?this.options.clientUA:"unknown unknown";case"DEVICEIP":case"PODSEQUENCE":default:return-1;case"PLAYERCAPABILITIES":var t=[];return this.options.skippable&&this.options.skippable.enabled&&t.push("skip"),this.options.showMute&&t.push("mute"),"auto"===this.options.initialPlayback&&("on"===this.options.initialAudio?t.push("autoplay"):t.push("mautoplay")),this.options.allowFullscreen&&t.push("fullscreen"),t.push("icon"),t.join();case"CLICKTYPE":return this.options.clickUrls&&this.options.clickUrls[0]?1:this.options.learnMore.enabled?2:0;case"PLAYERSTATE":var n=[];return this.isMuted&&n.push("muted"),this.adVideoPlayer.isFullscreen&&"function"==typeof this.adVideoPlayer.isFullscreen&&this.adVideoPlayer.isFullscreen()&&n.push("fullscreen"),n.join();case"PLAYERSIZE":return 1===this.options.width&&1===this.options.height?this.options.macroWidth+","+this.options.macroHeight:this.options.width+","+this.options.height;case"ADPLAYHEAD":if(this.adVideoPlayer.currentTime&&"function"==typeof this.adVideoPlayer.currentTime){var i=this.adVideoPlayer.currentTime();return l.convertTimeSecondsToString(i)}return-1;case"ASSETURI":return this.options.video.url;case"LIMITADTRACKING":return 0}},prepareOmidEventData:function(e){var t={error:"sessionError",impression:"impression",video_impression:"impression",video_start:"start","video-first-quartile":"firstQuartile","video-mid":"midpoint","video-third-quartile":"thirdQuartile",video_complete:"complete",video_pause:"pause",video_resume:"resume","user-close":"skipped",video_skipped:"skipped",video_skip:"skipped","audio-mute":"volumeChange","audio-unmute":"volumeChange",video_mute:"volumeChange",video_unmute:"volumeChange",fullscreenchange:"playerStateChange",video_fullscreen:"playerStateChange","video-exit-fullscreen":"playerStateChange","ad-expand":"playerStateChange","ad-collapse":"playerStateChange","ad-click":"adUserInteraction","user-accept-invitation":"adUserInteraction"},n=t.hasOwnProperty(e.name)?t[e.name]:"",i={name:n},r=null;switch(n){case"sessionError":(r={}).errorType=e.code,r.message=e.message;break;case"start":r={},this.options.data.durationMsec?r.duration=this.options.data.durationMsec/1e3:this.adVideoPlayer&&this.adVideoPlayer.player&&"function"==typeof this.adVideoPlayer.player?r.duration=this.adVideoPlayer.player().duration()/1e3:r.duration=-2,this.adVideoPlayer&&this.adVideoPlayer.player&&"function"==typeof this.adVideoPlayer.player?r.videoPlayerVolume=this.adVideoPlayer.player().volume():r.videoPlayerVolume=-1;break;case"volumeChange":r={},"audio-mute"===e.name||"video_mute"===e.name?r.videoPlayerVolume=0:this.adVideoPlayer&&this.adVideoPlayer.player&&"function"==typeof this.adVideoPlayer.player?r.videoPlayerVolume=this.adVideoPlayer.player().volume():r.videoPlayerVolume=-1;break;case"playerStateChange":r={},"video-fullscreen"===e.name||"fullscreenchange"===e.name&&"enter"===e.fullscreenStatus?r.state=this.adVideoPlayer.isFullscreen?"fullscreen":"normal":"video-exit-fullscreen"===e.name||"fullscreenchange"===e.name&&"exit"===e.fullscreenStatus?r.state="normal":"ad-collapse"===e.name?r.state="collapsed":r.state="normal";break;case"adUserInteraction":r={},"ad-click"===e.name?r.interactionType="click":r.interactionType="invitationAccept"}return r&&(i.data=r),i},resizeVideo:function(e,t,n){s.resizeVideo(e,t,this,n)},resizeVideoForSideStream:function(e,t,n){s.resizeVideoForSideStream(this,e,t,n)},isIosInlineRequired:function(){return this.autoplayHandler.isIosInlineRequired(this.options.enableInlineVideoForIos)},resizePlayer:function(e,t){s.resizePlayer(e,t,this)},getFinalSize:function(){return s.getFinalSize(this)},setVastAttribute:function(e){var t,n=this.options;t=e||(this.adVideoPlayer&&this.adVideoPlayer.player?this.adVideoPlayer.player().duration():0),n.data.durationMsec=null!==t?Math.round(1e3*t):0;var i=this.Utils.getMsecTime(n.data.skipOffset,n.data.durationMsec);n.data.skipOffset&&i>=0?(n.data.isVastVideoSkippable=!0,n.data.skipOffsetMsec=i):n.data.skipOffsetMsec=null;var r=n.data.vastProgressEvent;if(r&&"object"==typeof r)for(var o in r){var a=this.Utils.getMsecTime(o.replace(/progress_/g,""),n.data.durationMsec);r[o]=a}},disableTrackingUserActivity:function(e){this.blockTrackingUserActivity=e,this.adVideoPlayer&&this.adVideoPlayer.bigPlayButton&&(this.adVideoPlayer.bigPlayButton.el_.style.opacity=!0===e?0:1)},delayEventsTracking:function(e,t){this.callbackForAdUnit.cbDelayEventsTracking&&this.callbackForAdUnit.cbDelayEventsTracking(e,t)},notifyOverlayPlayerVideoPaused:function(){this.options.tmpActiveListener&&this.options.cbApnVastPlayer&&this.options.cbApnVastPlayer("apn-video-paused-by-device")},checkWhenVideoPausedByDevice:function(e){if(this.options.overlayPlayer&&this.options.cbApnVastPlayer&&this.iframeVideoWrapper&&this.iframeVideoWrapper.contentDocument){var t=null;if("string"==typeof this.videoObjectId)t=this.iframeVideoWrapper.contentDocument.getElementById(this.videoObjectId);else{var n=this.iframeVideoWrapper.contentDocument.getElementsByTagName("VIDEO");if(n&&n.length>0)for(var i=0;i<n.length;i++)if(n[i].src&&n[i].src.length>0){t=n[i];break}}if(t)return e?(this.options.tmpActiveListener=!0,t.addEventListener("pause",this.notifyOverlayPlayerVideoPaused.bind(this))):(delete this.options.tmpActiveListener,t.removeEventListener("pause",this.notifyOverlayPlayerVideoPaused.bind(this))),!0}return!0},forceStartViewability:function(){this.findPathForViewability({name:"force_start_viewability"})},log:g,debug:g,test:function(e,t){var n=this.options;if(n&&n.test&&n.test[e]&&"function"==typeof n.test[e]){var i=function(e){console.debug("%c"+e,"background: red; color: white")};try{n.test[e](t,(function(t,n){var r;t?(r="Unit Test ["+e+"] : "+(n=n+" Succeeded"||0),console.debug("%c"+r,"background: green; color: white")):i("Unit Test ["+e+"] : "+(n=n+" failed"||0))}),(function(t){console.debug("%cUnit Test Log : ["+e+"] : "+t,"background: gray; color: white")}))}catch(e){i("unit test failed due to : "+e)}}}};e.exports=E,window[v]=E},9227:(e,t,n)=>{"use strict";var i=n(7157),r=n(2121),o=n(5623),a=n(4410),s=n(2067),l=n(9724).v,d=function(e){l.verbose(e,"PlayerManager_BuildPlayer")};e.exports=function(e,t,n){d("buildPlayer");var l=t,c=n.isIosInlineRequired.bind(n),u=function(){return/iPad|iPhone|iPod/.test(navigator.appVersion)},p=function(e){return!!e.isFullscreen||!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)&&!window.screenTop&&!window.screenY};l=function(e){switch(e.nativeControlsForTouch=!1,e.controls=!0,e.preload="auto",e.extensions||(e.extensions=""),a.setSizeForInitialRender(e),u()&&e.sideStream&&!1===e.sideStream.enabled&&(e.nonViewableBehavior="pause"),e.initialPlayback){case"auto":case"click":case"mouseover":e.autoplay=!1}e.hasOwnProperty("disableTopBar")||(e.disableTopBar=!1),(s.isAndroid()||c())&&(e.controlBarPosition="below");var t=e.endCard;if(t&&t.enabled&&!t.buttons&&(t.buttons=[],t.showDefaultButtons=!0,t.buttons.indexOf("replay")<0&&e.disableCollapse&&e.disableCollapse.replay&&t.buttons.push({type:"replay"}),t.buttons.indexOf("learnMore")<0&&e.learnMore&&e.learnMore.enabled)){var n={type:"learnMore"};e.learnMore.text&&(n.text=e.learnMore.text),t.buttons.push(n)}return e}(l),"off"===l.initialAudio&&(n.isMuted=!0),l.useMsSkin&&(l.controlBarPosition="fixed"),n.options=l;var h=function(e,t){if(!0===l.playOnMouseover&&(e.addEventListener("mouseenter",(function(){!0===n.isDoneInitialPlay&&!n.explicitPaused&&n.isViewable&&!1===n.isPlayingVideo&&n.play()})),e.addEventListener("mouseleave",(function(){n.pause()}))),!1!==l.audioOnMouseover){var i,r=0;"number"==typeof l.audioOnMouseover&&(r=l.audioOnMouseover);var o=function(){!n.isFullscreen&&n.isDoneInitialPlay&&(clearTimeout(i),n.mute(),e.removeEventListener("mouseleave",o))};c()||(setInterval((function(){n&&n.isFullscreen&&o&&e&&e.removeEventListener("mouseleave",o)}),500),e.addEventListener("mouseenter",(function(){n.isFullscreen||!n.isDoneInitialPlay||n.mutedByViewability||(i=setTimeout((function(){n.unmute(),d("unmute by mouseover")}),r)),e.addEventListener("mouseleave",o,!1)}),!1))}var a,s;if(!l.autoInitialSize||(a=navigator.appVersion.indexOf("Mobile"),s=navigator.appVersion.indexOf("Android"),a>-1||s>-1)||window.addEventListener("resize",(function(){!0!==p(n)&&(n.options.sideStreamObject&&"function"==typeof n.options.sideStreamObject.shouldNotResizeWhenSideStreamActivated&&n.options.sideStreamObject.shouldNotResizeWhenSideStreamActivated()||l.targetElement&&l.targetElement.style&&l.targetElement.style.height&&0===Number(l.targetElement.style.height.replace("px",""))||setTimeout((function(){if(!0!==p(n)&&(l.disableCollapse.enabled||!n.isSkipped&&!n.isCompleted)){l.width=l.targetElement.offsetWidth||l.width;var e=/android/i.test(navigator.userAgent.toLowerCase());e?l.targetElement.style.webkitTransition="height 0s ease":l.targetElement.style.transition="height 0s ease",n.resizeVideo(-1),l.isWebviewEnvironment||"native"===l.adType?l.targetElement.style.height="100%":l.targetElement.style.height=l.height+"px";var t=document.getElementById(n.videoObjectId);t&&void 0!==typeof t&&(t.style.width=l.width,t.style.height=l.height),setTimeout((function(){var t,n=(t=l.expandTime)<0?0:t/1e3;n=n<=0?.001:n,e?l.targetElement.style.webkitTransition="height "+n+"s ease":l.targetElement.style.transition="height "+n+"s ease"}),500)}}),0))})),e.style.cursor="pointer",t&&void 0!==t){if(u()){var h=!1;t.ontouchmove=function(){h=!0},t.ontouchend=function(e){h?h=!1:v(e)}}else t.onclick=function(e){v(e)};var v=function(){if("html5"===n.decidePlayer(l.requiredPlayer)&&!l.vpaid){if(l.useMsSkin)return void n.click();!0===l.learnMore.enabled?!0===l.learnMore.clickToPause&&(n.isPlayingVideo?n.explicitPause():n.explicitPlay()):n.click()}}}var f=n.options&&n.options.playerSkin&&n.options.playerSkin.customPlayerSkin;u()&&n.overlayPlayer&&n.options&&!1===n.options.enableInlineVideoForIos&&f&&(n.adVideoPlayer.controlBar.fullscreenToggle.dispose(),n.adVideoPlayer.one("playing",(function(){n.adVideoPlayer.controlBar.el().style.display="none",setTimeout((function(){n.adVideoPlayer.controlBar.el().style.display="block"}),7e3)})))};"html5"===n.decidePlayer(l.requiredPlayer)&&(c()?new r(n,h).start():new i(n,h).start()),o.sharedInstance().run(t)}},1731:(e,t,n)=>{"use strict";var i=n(121),r=n(2067),o=n(9724).v,a=function(e){o.debug("Custom Skinning: "+e)},s=function(e,t){var n=e.playerSkin,i=-3.2;return"text"!==e.showProgressBar&&!0!==e.showProgressBar&&!1!==e.showProgressBar&&!1!==t||(i=-3),n.controlBarHeight&&(i=parseInt(i*n.controlBarHeight/30)),i};e.exports={render:function(e,t,n,o){if(function(e,t,n,i){var r=t.controlBar,o=e.options.playerSkin.buttonOrderLeft,a=e.options.playerSkin.buttonOrderRight,s=function(e,t,o,a){var s;r[e]&&(s=r[e].el_,i&&("playToggle"===e?s=n.getElementById("customPlayToggle"):"fullscreenToggle"===e&&(s=n.getElementById("customFullscreenToggle"))),s&&(r.el_.appendChild(s),s.style.float=a))};o&&o.forEach((function(e,t,n){s(e,0,0,"left")})),a&&a.reverse().forEach((function(e,t,n){s(e,0,0,"right")}))}(e,t,n,o),function(e,t,n,o){a("Applying custom styles/skins");var l="",d="";o&&(l=".vjs-default-skin.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {display: block;visibility: visible;opacity: 1} .vjs-loading-spinner { position: absolute; top: 50%; left: 50%; font-size: 4em; line-height: 1; width: 1em; height: 1em; margin-left: -0.5em; margin-top: -0.5em; opacity: 0.75; display: block; -webkit-animation: spin 1.5s infinite linear; -moz-animation: spin 1.5s infinite linear; -o-animation: spin 1.5s infinite linear; animation: spin 1.5s infinite linear; }\n"),r.isIpad()&&(d=".vjs-default-skin.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {display: block;visibility: visible;opacity: 1}");var c="\n",u=e.options.playerSkin;u?(u.bigPlayButtonColor||(u.bigPlayButtonColor="#7b7a7d"),u.topBarColor&&(c+="#top_chrome { background: "+u.topBarColor+"; }\n"),u.dividerColor?c+="#top_chrome { border-bottom-color: "+u.dividerColor+"; }\n":c+="#top_chrome { border-bottom-color: "+u.bottomDividerColor+"; }\n","number"==typeof u.dividerHeight?c+="#top_chrome { border-bottom-width: "+u.dividerHeight+"; border-bottom-style: solid; }\n":c+="#top_chrome { border-bottom-width: "+u.bottomDividerWidth+"; border-bottom-style: solid; }\n",u.topBarTextColor&&(c+=".top-bar-text { color: "+u.topBarTextColor+"; }\n"),u.controlBarColor&&(c+=".vjs-default-skin .vjs-control-bar { background-color: "+u.controlBarColor+"; }\n"),u.controlBarControlsColor&&(c+=".vjs-default-skin .vjs-control-bar { color: "+u.controlBarControlsColor+"; }\n",c+=".vjs-default-skin:hover .vjs-control-bar { color: "+u.controlBarControlsColor+"; }\n"),u.bigPlayButtonColor&&(c+=".vjs-default-skin .vjs-big-play-button { color: "+u.bigPlayButtonColor+"; border-color: "+u.bigPlayButtonColor+"; }\n",c+=".vjs-default-skin:hover .vjs-big-play-button { color: "+u.bigPlayButtonColor+"; border-color: "+u.bigPlayButtonColor+"; }\n"),u.progressBarElapsedColor&&(c+=".vjs-default-skin .vjs-play-progress { background: "+u.progressBarElapsedColor+" }\n"),u.volumeBarBackground&&(c+=".vjs-default-skin .vjs-volume-level { background: "+u.volumeBarBackground+" }\n"),u.controlBarHeight&&(c+=".vjs-default-skin .vjs-control-bar { height: "+u.controlBarHeight+"px; }\n",c+=".vjs-default-skin .vjs-control { font-size: "+Math.ceil(u.controlBarHeight/3)+"px; }\n",c+=".vjs-default-skin .vjs-time-divider { height: "+u.controlBarHeight+"px; line-height: "+u.controlBarHeight/9.7+"em} \n",c+=".vjs-default-skin .vjs-progress-control { font-size: 0.3em } \n"),!u.videoBackgroundColor||void 0!==e.options.isWaterfall&&!1!==e.options.isWaterfall||(c+=".video-js {background:"+u.videoBackgroundColor+"} \n"),e.options.sideStream.dynamicBigPlayButtonOnSideStream&&!0===e.options.sideStream.dynamicBigPlayButtonOnSideStream&&(c+=".vjs-default-skin .vjs-big-play-button {-webkit-transition: all 0s;-moz-transition: all 0s;-o-transition: all 0s;transition: all 0s;} \n")):c+="#top_chrome { border-bottom-color: "+u.bottomDividerColor+"; border-bottom-width: "+u.bottomDividerWidth+"; border-bottom-style: solid; }\n",r.isIos()?c+=".vjs-default-skin .vjs-control-bar { display: block;visibility: visible;opacity: 1;bottom:"+s(e.options,!0)+"em }\n":(e.isAndroid&&e.isAndroid()||"below"===e.options.controlBarPosition)&&(c+=".vjs-default-skin .vjs-control-bar { display: block !important;visibility: visible !important;opacity: 1 !important ;bottom:"+s(e.options,!0)+"em }\n"),a("Generating css element");var p=document.createElement("style");p.type="text/css";var h=i+d+'video::-webkit-media-controls-start-playback-button {display: none !important;-webkit-appearance: none;}\n.vjs-default-skin .vjs-big-play-button-replay:before {content: "\\e984";}\n'+c+l+'.vjs-default-skin .vjs-ec-button-learnmore:before {content: "\\e926";} .ec-button {display: block; cursor: pointer; height: 1em; font-family: VideoJS; margin: 0.5em; padding: 0.3em; border: 2px solid gray; background-color: rgba(128,128,128,0); transition: background-color 0.8s; -webkit-transition: background-color 0.5s;}\n.vjs-default-skin {forced-color-adjust: none;}\n';e.options.useMsSkin&&e.options.customPlayerSkinCss&&(h+=e.options.customPlayerSkinCss),p.innerHTML=h,n.head.appendChild(p)}(e,0,n,o),e.options.useMsSkin){var l=t.controlBar.el_,d=n.defaultView.getComputedStyle(l,null).height,c=d.indexOf("px");c>-1&&(d=d.substr(0,c)),Number(d)>0&&(e.options.playerSkin.controlBarHeight=Number(d))}},bottomMarginOfControlBarWithProgressBar:-3.2,bottomMarginOfControlBar:-3,getBottomMarginForControlbar:s}},1401:(e,t,n)=>{"use strict";var i="[EndCard]",r=n(9877).M,o=n(9724).v,a=function(e){o.debug(i,e)},s=function(e,t,n){this.layers=[],this.buttons=[],this.options=e,this.vjsPlayer=t,this.playerManager=n,this.firedCreativeView=!1,this.onLayerClick=function(e){e.stopPropagation(),e.target===e.currentTarget&&n.click()},e.layers=[{type:"videoAd"}],e.layers.push({type:"color",width:"100%",height:"100%",color:e.color}),e.layers.push({type:"companionAd"}),e.layers.push({type:"image",width:e.imageWidth,height:e.imageHeight,imageUrl:e.imageUrl}),this.createEndCardContainer(t.player().el_),this.createLayers(),this.createButtons()};s.prototype.styleForCentering=function(e,t,n){e.style.display="block",e.style.position="absolute",e.style.top=0,e.style.bottom=0,e.style.left=0,e.style.right=0,e.style.margin="auto",e.style.maxWidth=t||"100%",e.style.maxHeight=n||"100%",t&&(e.style.width=t),n&&(e.style.height=n)},s.prototype.styleSizeLimitScaleDown=function(e,t,n){var i=this,r=e.elem,o=function(){t=t||i.endCardElem.offsetWidth,n=n||i.endCardElem.offsetHeight;var a,s=r.offsetWidth,l=r.offsetHeight;t&&n&&s&&l?(t/n<s/l?(r.style.width="100%",a=l/(n*(s/t)),r.style.height=100*a+"%"):(r.style.height="100%",a=s/(t*(l/n)),r.style.width=100*a+"%"),e.opts.width||(r.style.maxWidth=r.naturalWidth),e.opts.height||(r.style.maxHeight=r.naturalHeight)):setTimeout(o,5)};o()},s.prototype.selectEndCardCompanion=function(){if(Array.isArray(this.options.companionAds)&&0!==this.options.companionAds.length){var e=this.vjsPlayer.player().el_,t=this.playerManager.options.width,n=this.playerManager.options.height;e&&(e.offsetWidth&&(t=e.offsetWidth),e.offsetHeight&&(n=e.offsetHeight));var i,r,o,s,l,d,c,u,p=t*n;a("Selecting best companion for ad unit size ("+t+"x"+n+"):"),r=99999999;for(var h=0;h<this.options.companionAds.length;h++){if(d=(s=this.options.companionAds[h]).width||1,c=s.height||1,s.hasOwnProperty("StaticResource")&&0===s.StaticResource.type.indexOf("image"))u="StaticImageCompanion";else{if(!s.hasOwnProperty("HTMLResource")){a("xxx Skipping Companion: ["+h+"] - Resource type is neither a static image nor HTML.");continue}u="HtmlCompanion"}if("StaticImageCompanion"===u)d>t&&(d*=o=t/d,c*=o),c>n&&(d*=o=n/c,c*=o);else if(d>t||c>n){a("xxx Skipping Companion: ["+h+"] - Companion size ("+d+"x"+c+") won't fit in ad unit.");continue}(l=Math.abs(d*c-p))<r?(r=l,i=s,this.CompanionAdType=u,a("*** Selecting Companion: ["+h+"] size ("+d+"x"+c+"), areaDiff="+r)):a("xxx Discarding Companion: ["+h+"] size ("+d+"x"+c+"), areaDiff="+l)}return i}a("No companion ads found.")},s.prototype.prepareCompanionLayers=function(e){for(var t=this,n=0,a=1,s=function(e){if("requestTracking"===e.command&&"creative-view"===e.data){if(t.firedCreativeView)return;t.firedCreativeView=!0}t.options.companionCallback&&t.options.companionCallback(e)},l=0;l<this.layers.length;l++){var d=this.layers[l];if("companionAd"===d.opts.type&&!d.companionManager){var c=function(l){if(t.playerManager.isFullscreen)return d="Delaying companion selection since we are in "+(t.playerManager.isFullscreen?"fullscreen":"sidestream")+" mode.",o.verbose(i,d),void setTimeout(c,100,l);var d;if(l.companionAd=t.selectEndCardCompanion(),l.companionAd){var u={companionContainers:[l.elem]},p={companions:[l.companionAd]};l.elem.style.width=l.opts.width=l.companionAd.width,l.elem.style.height=l.opts.height=l.companionAd.height,l.elem.style.maxWidth="",l.elem.style.maxHeight="",setTimeout((function(){if(l.companionManager=r.renderCompanions(p,u,s),t.styleForCentering(l.elem,l.companionAd.width,l.companionAd.height),"StaticImageCompanion"===t.CompanionAdType){var e=l.elem.childNodes.item(0);e&&(e.style.width="100%",e.style.height="100%"),t.styleSizeLimitScaleDown(l)}l.companionAd.hasOwnProperty("StaticResource")&&!l.companionAd.CompanionClickThrough&&(l.elem.style["pointer-events"]="none",l.elem.style.cursor=t.options.clickable?"pointer":"default","StaticImageCompanion"!==t.CompanionAdType||t.options.clickable||(l.elem.childNodes.item(0).style.cursor="default"))}),50),n++}else l.elem.style.display="none";0==--a&&e&&e(n)};a++,c(d)}}0==--a&&e&&e(n)},s.prototype.onVideoResized=function(e,t){for(var n=0;n<this.layers.length;n++){var i=this.layers[n];i.companionAd?"StaticImageCompanion"!==this.CompanionAdType&&(i.companionAd.width>e||i.companionAd.height>t?i.elem.style.display="none":i.elem.style.display="block"):"image"===i.type&&i.elem.style}},s.prototype.saveSetStyle=function(e,t,n){void 0!==n&&(e.styleSave||(e.styleSave={}),e.elem&&(void 0===e.styleSave[t]&&(e.styleSave[t]=e.elem.style[t]),e.elem.style[t]=n))},s.prototype.restoreStyle=function(e){if(e.styleSave){if(e.elem)for(var t in e.styleSave)e.elem.style[t]=e.styleSave[t];delete e.styleSave}},s.prototype.createEndCardContainer=function(e){this.endCardElem||(this.endCardElem=e.ownerDocument.createElement("div"),e.appendChild(this.endCardElem),this.endCardElem.className="video-js vjs-default-skin vjs-controls-enabled vjs-big-play-centered vjs-has-started vjs-paused vjs-ended vjs-user-active",this.playerManager.isIosInlineRequired()?(this.endCardElem.style["background-color"]="",this.endCardElem.style.background=this.playerManager.options.playerSkin.videoBackgroundColor,this.endCardElem.style.opacity=1):this.endCardElem.style["background-color"]="rgba(0,0,0,0)",this.endCardElem.setAttribute("name","endCardContainer"),this.endCardElem.style.width="100%",this.endCardElem.style.height="100%",this.endCardElem.style.display="none",this.endCardElem.style.cursor=this.options.clickable?"pointer":"default",this.endCardElem.style.position="relative",this.endCardElem.style["text-align"]="center",this.options.clickable&&(this.endCardElem.onclick=this.onLayerClick))},s.prototype.createImageLayer=function(e,t){var n={},i=e.ownerDocument.createElement("img");e.appendChild(i),i.setAttribute("name","ecImageLayer"),i.id=t.id||"endCardImageLayer",i.setAttribute("src",t.imageUrl||""),i.style.cursor=this.options.clickable?"pointer":"default",this.styleForCentering(i,t.width,t.height),i.style.display="none",n.elem=i,n.opts=t,this.layers.push(n)},s.prototype.createColorLayer=function(e,t){var n={},i=e.ownerDocument.createElement("div");e.appendChild(i),i.setAttribute("name","ecColorLayer"),i.id=t.id||"endCardColorLayer",i.style["background-color"]=t.color||"black",i.style.cursor=this.options.clickable?"pointer":"default",this.styleForCentering(i,t.width||"100%",t.height||"100%"),t.color||(i.style.display="none"),n.elem=i,n.opts=t,this.layers.push(n)},s.prototype.createAdVideoLayer=function(e,t){if(void 0===this.videoLayer){var n={};n.elem=e,n.opts=t,e&&this.playerManager.isIosInlineRequired()&&(n.videoParent=e.parentElement,n.videoSibling=e.nextSibling),this.videoLayer=this.layers.length,this.layers.push(n)}else a("Can't create new video layer because one already exists!")},s.prototype.createCompanionLayer=function(e,t){var n={},i=e.ownerDocument.createElement("div");e.appendChild(i),i.setAttribute("name","ecCompanionLayer"),i.id="endCardCompanionLayer",i.style.position="absolute",i.style.width=t.width||"100%",i.style.height=t.height||"100%",this.styleForCentering(i),i.style["background-color"]="rgba(0,0,0,0)",n.elem=i,n.opts=t,this.layers.push(n)},s.prototype.show=function(){if(this.vjsPlayer&&this.vjsPlayer.controlBar&&this.vjsPlayer.controlBar.hide(),void 0!==this.videoLayer){var e=this.layers[this.videoLayer],t=this.options.layers[this.videoLayer];e.elem&&(e.videoParent&&(this.videoLayer<this.layers.length-1?this.endCardElem.insertBefore(e.elem,this.layers[this.videoLayer+1].elem):this.buttonContainer?this.endCardElem.insertBefore(e.elem,this.buttonContainer):this.endCardElem.appendChild(e.elem)),this.playerManager.isIosInlineRequired()&&(this.endCardElem.style.width=e.elem.style.width,this.endCardElem.style.height=e.elem.style.height)),e.styleSave={},t.width&&this.saveSetStyle(e,"width",t.width),t.height&&this.saveSetStyle(e,"height",t.height),this.options.clickable?(this.saveSetStyle(e,"cursor","pointer"),this.saveSetStyle(e,"pointer-events","auto"),this.playerManager.options.learnMore.enabled&&e.elem.addEventListener("click",this.onLayerClick)):(this.saveSetStyle(e,"cursor","default"),this.saveSetStyle(e,"pointer-events","none")),this.playerManager.isIosInlineRequired()&&(this.endCardElem.style.width=e.elem.style.width,this.endCardElem.style.height=e.elem.style.height)}var n=this;this.prepareCompanionLayers((function(e){for(var t=0;t<n.layers.length;t++){var i=n.layers[t];"videoAd"!==i.opts.type&&"companionAd"!==i.opts.type&&("image"===i.opts.type&&(e>0?i.elem.style.display="none":i.opts.imageUrl&&(n.styleSizeLimitScaleDown(i),i.elem.style.display="block")),n.options.clickable&&i.elem&&(i.elem.addEventListener("click",n.onLayerClick),i.elem.style.cursor="pointer"))}})),this.endCardElem.style.display="block"},s.prototype.hide=function(){if(void 0!==this.videoLayer){var e=this.layers[this.videoLayer];this.restoreStyle(e),e.videoParent&&e.videoParent.insertBefore(e.elem,e.videoSibling)}for(var t=0;t<this.layers.length;t++){var n=this.layers[t];("videoAd"!==n.opts.type||this.options.clickable&&this.playerManager.options.learnMore.enabled)&&("companionAd"!==n.opts.type?this.options.clickable&&n.elem&&n.elem.removeEventListener("click",this.onLayerClick):n.companionManager&&(r.stopCompanions(n.companionManager),delete n.companionManager))}this.vjsPlayer&&this.vjsPlayer.controlBar&&this.vjsPlayer.controlBar.show(),this.endCardElem.style.display="none"},s.prototype.createLayers=function(){var e=this.options.layers;if(Array.isArray(e)&&!(e.length<0))for(var t=0;t<e.length;t++){var n=e[t],i=n.type||"color";switch(i){case"color":this.createColorLayer(this.endCardElem,n);break;case"image":this.createImageLayer(this.endCardElem,n);break;case"videoAd":if(this.playerManager.isIosInlineRequired()){a("iOS inline player using canvas in place of video element");var r=this.endCardElem.ownerDocument.getElementsByTagName("canvas");this.createAdVideoLayer(r[0],n)}else this.vjsPlayer&&this.vjsPlayer.tag&&this.createAdVideoLayer(this.vjsPlayer.tag,n);break;case"companionAd":this.options.companionAds?this.createCompanionLayer(this.endCardElem,n):a("Companion ad layer specified but no companion ads were found.");break;default:a("Invalid endCard layer type: "+i)}}},s.prototype.createButtonContainer=function(){this.buttonContainer||(this.buttonContainer=this.endCardElem.ownerDocument.createElement("div"),this.endCardElem.appendChild(this.buttonContainer),this.buttonContainer.setAttribute("name","ecButtonContainer"),this.buttonContainer.id="endCardButtonContainer",this.buttonContainer.style.cursor="default",this.buttonContainer.style["background-color"]="rgba(0,0,0,0.5)",this.buttonContainer.style.display="block",this.buttonContainer.style.position="absolute",this.buttonContainer.style.left="50%",this.buttonContainer.style.top="50%",this.buttonContainer.style.transform="translate(-50%, -50%)",this.buttonContainer.style["font-size"]="14px",this.buttonContainer.style["text-align"]="left")},s.prototype.addButton=function(e,t,n,i){var r=this.buttonContainer.ownerDocument.createElement("div"),o=this.buttonContainer.ownerDocument.createElement("span"),a=this.buttonContainer.ownerDocument.createElement("span");r.className="ec-button "+e,r.id="ec-button-"+n,i&&r.addEventListener("click",i),o.textContent="",a.textContent=t,a.style["margin-left"]="6px",r.appendChild(o),r.appendChild(a),this.buttonContainer.appendChild(r)},s.prototype.createButtons=function(){var e=this.options.buttons;if(Array.isArray(e)&&!(e.length<1)){var t=this,n=function(e){e.stopPropagation(),t.hide(),t.vjsPlayer.currentTime(0),t.vjsPlayer.trigger("revealControls"),t.playerManager.replay()},i=function(e){e.stopPropagation(),t.playerManager.click()};this.createButtonContainer();for(var r=0;r<e.length;r++){var o=e[r],s=o.type;switch(s){case"replay":this.addButton("vjs-big-play-button-replay",o.text||"Replay",s,n);break;case"learnMore":this.addButton("vjs-ec-button-learnmore",o.text||"Learn More",s,i);break;default:a("Invalid endCard button type: "+s)}}}},e.exports=s},374:e=>{"use strict";e.exports=function(e,t){function n(e){return"object"==typeof e}var i=function e(t){var i,r,o;for(r=1;r<arguments.length;r++)for(o in i=arguments[r])i.hasOwnProperty(o)&&(n(t[o])&&null!==t[o]&&n(i[o])?t[o]=e({},t[o],i[o]):t[o]=i[o]);return t}({},e,t||{});if(void 0!==i.playerTechnology&&0!==i.playerTechnology.length||(i.playerTechnology=["html5"]),i.width&&void 0!==i.width&&""!==i.width&&0!==i.width||(i.autoInitialSize=!0),i.safeFrame&&i.safeFrameAutoInitialSize&&(i.autoInitialSize=!1),i.playerSkin&&i.playerSkin.controlBarHeight&&"string"==typeof i.playerSkin.controlBarHeight){var r=parseInt(i.playerSkin.controlBarHeight);i.playerSkin.controlBarHeight="NaN"!==r?r:e.playerSkin.controlBarHeight}return"number"==typeof i.disableCollapse&&(i.disableCollapse>=0&&(i.disableCollapseForDelay=i.disableCollapse),i.disableCollapse=!1),i.enableExplicitPause=!0,i}},7157:(e,t,n)=>{"use strict";var i=n(2067),r=n(9724).v;e.exports=function(e,t){var o=this;this.options=e.options,this.an_video_ad_player_id="",this.an_video_ad_player_html5_api_id="",this.targetElement="",this.videojsOrigin=e.videoPlayerObj,this.dispatchEventToAdunit=e.dispatchEventToAdunit.bind(e),this.callbackForAdUnit=e.callbackForAdUnit,this.topChromeHeight=24,this.pendingFullscreenExit=!1,this.bigbuttonUnmuteTimeout=250,this.CONST_MESSAGE_GENERAL_ERROR="General error reported from HTML5 video player",this.adIndicatorTextContent=this.options.adText,this.readyForSkip=!1,this.floatingSkipButton=null,this.floatingAdSkipText=null,this.isIos=i.isIos,this.isAndroid=i.isAndroid,this.isMobile=i.isMobile,this.refreshVideoLookAndFeel=i.refreshVideoLookAndFeel,this.options.pod&&e.adVideoPlayer.el_?(e.resetPlayerForPodSlot(),e.options.useSameAdPlayer=!0,this.initializeIframeAndVideo=n(2481)(o,e).initForPodSlot):this.initializeIframeAndVideo=n(2481)(o,e).init,this.UIController=n(1272)(o,e,t).init,this.displayVolumeControls=n(9437)(o).displayVolumeControls,this.start=function(){r.info("Video Player: WE ARE USING HTML5 PLAYER");var t=i.guid();if(this.options.pod&&e.adVideoPlayer.el_){var n=e.adVideoPlayer.id_.split("_");t=n[n.length-1]}o.options.techOrder=["html5"],o.options.iframeVideoWrapperId="iframeVideoWrapper_"+t;var a="an_video_ad_player_"+t,s="an_video_ad_player_"+t+"_html5_api";o.an_video_ad_player_id=a,o.an_video_ad_player_html5_api_id=s,e.divIdForVideo=a,e.videoId=s,o.targetElement=o.options.targetElement,o.initializeIframeAndVideo(o.UIController)}}},8707:(e,t,n)=>{"use strict";var i=n(9724).v,r=n(2067);e.exports=function(e,t){return{init:function(o,a,s){i.debug("[PlayerManager_CustomizedVideoJS]","init"),t.adVideoPlayer=o,e.options.nativeControlsForTouch=!1,e.options.customControlsOnMobile=!1,e.isMobile()?o.enableTouchActivity():o.userActive(!1),t.customSkinning.render(e,o,a.contentWindow.document,!1);var l=null;e.options.useMsSkin&&((l=a.contentWindow.document.createElement("div")).id="skip_Button_Wrapper",l.className="skipButtonWrapper vjs-hidden",l.style.bottom="62px",l.style.right="16px",t.adVideoPlayer.el_.appendChild(l));var d=a.contentWindow.document.getElementById("top_chrome"),c=a.contentWindow.document.createElement("div"),u=e.options.learnMore.enabled;if(e.options.clickUrls[0]||(u=!1),u&&(e.options.useMsSkin?"top-right"!==e.options.learnMore.location&&"top-left"!==e.options.learnMore.location&&(e.options.learnMore.location="inline"):"top-right"===e.options.skippable.skipLocation?e.adIndicatorTextContent=e.options.learnMore.text+" "+e.options.learnMore.separator+" "+e.adIndicatorTextContent:e.adIndicatorTextContent+=" "+e.options.learnMore.separator+" "+e.options.learnMore.text),e.options.useMsSkin){var p=!1;e.options.contentPlayer&&e.options.contentPlayer.el_&&e.options.contentPlayer.el_.clientWidth<r.MIN_DESKTOP_WIDTH&&(p=!0),e.options.targetElement&&e.options.targetElement.clientWidth>0&&e.options.targetElement.clientWidth<r.MIN_DESKTOP_WIDTH&&(p=!0),u&&"inline"!=e.options.learnMore.location?e.options.skippable.skipLocation="":"top-left"===e.options.skippable.skipLocation?(l.style.bottom="",l.style.right="",l.style.top="4px",l.style.left="4px"):"top-right"===e.options.skippable.skipLocation&&(l.style.bottom="",l.style.right="4px",l.style.top="4px"),!p&&u&&"inline"===e.options.learnMore.location||(l.style["max-width"]="66%")}var h=e.videojsOrigin.createEl("div",{role:"button",innerHTML:e.adIndicatorTextContent,className:"top-bar-text"}),v=e.options.wcElement&&e.options.wcElement instanceof Element?e.options.wcElement.querySelector("#"+String(e.options.iframeVideoWrapperId)):document.getElementById(e.options.iframeVideoWrapperId),f=v.contentWindow.document.getElementById(e.an_video_ad_player_id),m=v.contentWindow.document.getElementById(e.an_video_ad_player_html5_api_id);e.options.useMsSkin&&e.options.showMsSkinMuteAndVolume&&n(7145)(e).init(o),e.options.pod&&e.options.useMsSkin&&e.options.slotCount>1&&n(869)(e).init(o),n(8229)(e,t).init(o),e.options.useMsSkin?n(8197)(e,t).init(o,v.contentWindow.document,u):n(1231)(e,t).init(o,a,c,h,u),e.options.useMsSkin&&n(870)(e).init(o),n(9510)(e,t).init(d,h,c,o,a,l),n(2505)(e,t).init(o),n(4439)(e,t).init(o),n(7310)(e,t).init(o,h,c),n(1047)(e).init(o),n(5327)(e,t).init(),n(9309)(e,t).init(o),n(3819)(e,t).init(o),m.disablePictureInPicture=!0;var g=v.contentWindow.document.getElementsByClassName("vjs-progress-holder");g&&g.length>0&&(g[0].tabIndex=-1),e.options.useMsSkin&&function(t,n){if(t.bigPlayButton.el_.tabIndex=5,"top-left"===e.options.learnMore.location)(i=n.getElementsByClassName("vjs-ad-learnmore-container-tl"))&&i.length>0&&(i[0].tabIndex=3);else if("top-right"===e.options.learnMore.location){var i;(i=n.getElementsByClassName("vjs-ad-learnmore-container-tr"))&&i.length>0&&(i[0].tabIndex=3)}else(i=n.getElementsByClassName("vjs-ad-learnmore-container"))&&i.length>0&&(i[0].tabIndex=10);(i=n.getElementsByClassName("vjs-ad-feedback-btn"))&&i.length>0&&(i[0].tabIndex=7),(i=n.getElementById("skip_Button_Wrapper"))&&(i.tabIndex=15),t.controlBar.playToggle.el_.tabIndex=20,t.controlBar.captionsButton.el_.tabIndex=25,t.controlBar.fullscreenToggle.el_.tabIndex=30}(o,v.contentWindow.document),s(f,m)}}}},2481:(e,t,n)=>{"use strict";var i="[PlayerManager_InitializeElements]",r=n(9724).v,o=null,a=n(7886).B,s=n(2067),l=()=>n(6021),d=()=>n(8679),c=function(e){r.verbose(i,e)},u=function(e){r.debug(i,e)},p=function(e){r.log(i,e)};e.exports=function(e,t){var n=function(e,t){function n(e){for(var n=0;n<e.length;n++)if(e[n].body&&"HeavyAdIntervention"===e[n].body.id){var i="Heavy Ad Intervention by browser detected.  Browser Message: "+e[n].body.message;p(i),t.destroyWithoutSkip(!0,i,null,903)}}var i=new e.ReportingObserver(n,{buffered:!0});i.observe(),e.addEventListener("unload",(function(){n(i.takeRecords())}))},i=function(t,n){if(e.options.closedCaptionFiles&&e.options.closedCaptionFiles.length>0){for(var i=[],r=!1,o=0;o<e.options.closedCaptionFiles.length;o++){var l=e.options.closedCaptionFiles[o],d=t.createElement("track");d.kind="captions",d.src=l.uri,d.srclang=l.language;try{var c=new Intl.DisplayNames([l.language],{type:"language"});d.label=c.of(d.srclang)}catch(e){var u="Invalid language '"+l.language+"' for CC file: "+l.uri;p(u);continue}!r&&e.options.closedCaptions.show&&l.language===e.options.closedCaptions.defaultLanguage&&(d.setAttribute("default",""),r=!0),i.push({element:d,valid:!1}),s.isIphone()&&n.appendChild(d)}!r&&e.options.closedCaptions.show&&i.length>0&&i[0].element.setAttribute("default","");var h=function(e){var t=Date.now(),n=setInterval((function(){if((e&&e.length>0||Date.now()-t>300)&&clearInterval(n),e)for(var i=0;i<e.length;i++)e[i].text.length&&(e[i].size=60,e[i].line=0)}),10)},v=n.textTracks;v&&(v.onchange=function(){for(var e=0;e<v.length;e++)if("showing"===v[e].mode){h(v[e].cues),h(v[e].activeCues);break}});var f=function(e,t){a.load(e.element.src,(function(i,r){!i&&r.length>0?(e.element.src="data:,"+encodeURIComponent(r),e.valid=!0):s.isIphone()&&n.removeChild(e.element),t()}),1e3)},m=function(){for(var e=t.createDocumentFragment(),r=0;r<i.length;r++)i[r].valid&&e.appendChild(i[r].element);n.appendChild(e)},g=0;for(o=0;o<i.length;o++)f(i[o],(function(){++g!==i.length||s.isIphone()||m()}))}};return{init:function(r){var a;p("init"),null===o&&(o=e.options.isWebviewEnvironment?l():d());var s=!1;if(t.autoplayHandler.isRequiredFakeAndroidAutoStart(e.options.initialPlayback,e.options.initialAudio,e.options.automatedTestingOnlyAndroidSkipTouchStart,!0)){c("Setting correct iframe for androids 'fake' autostart");for(var h=e.options.targetElement.getElementsByTagName("iframe"),v=0;v<h.length;v++){var f=h[v],m=t.autoplayHandler.APN_MOBILE_IFRAME_NAME;if(e.isAndroid()&&e.options.firstAdAttempted&&e.options.adAttempt&&(m=t.autoplayHandler.APN_MOBILE_IFRAME_NAME+"_Waterfall_"+e.options.adAttempt),f&&f.name&&f.name===m){s=!0,a=f;break}}}if(!s){if(e.options.fallbackNotFirstStep){var g=e.targetElement.getElementsByTagName("iframe");if(g&&g.length>0)for(var y=0;y<g.length;y++)e.targetElement.removeChild(g[y])}c("Creating new iframe if one is not already created."),(a=document.createElement("iframe")).setAttribute("allowfullscreen","true"),a.setAttribute("webkitallowfullscreen","true"),a.setAttribute("mozallowfullscreen","true"),a.src="about:blank","native"===e.options.adType&&e.options.banners&&e.options.banners.preShow&&(a.style.opacity=.01),e.targetElement.appendChild(a),a.contentWindow.document.open(),a.contentWindow.document.write("<html></html>"),a.contentWindow.document.close()}if(a){a.id=e.options.iframeVideoWrapperId,e.options.isWebviewEnvironment||"native"===e.options.adType?(a.style.width="100%",a.style.height="100%"):(a.style.width=e.options.width+"px",a.style.height=e.options.height+"px"),a.style.display="",s||u("Html5Player created new iframe: "+e.options.iframeVideoWrapperId),e.options.playerSkin&&e.options.playerSkin.controlBarColor&&a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.body&&a.contentWindow.document.body.style&&(a.contentWindow.document.body.style.background=t.options.playerSkin.controlBarColor);var A=function(){var s=a.contentWindow.document,l=a.contentWindow.window;u("Creating and styling top chrome bar");var d,c=s.createElement("div");c.id="top_chrome",c.style.height=e.options.playerSkin&&"number"==typeof e.options.playerSkin.dividerHeight?e.topChromeHeight-e.options.playerSkin.dividerHeight+"px":e.topChromeHeight-1+"px",c.style.width=e.options.width+"px",c.style.marginRight="auto",c.style.marginLeft="auto",c.className="video-js vjs-default-skin",u("Generating and styling video object");var p=!1;if(t.autoplayHandler.isRequiredFakeAndroidAutoStart(e.options.initialPlayback,e.options.initialAudio,e.options.automatedTestingOnlyAndroidSkipTouchStart,!0)){var h=a.contentWindow[t.autoplayHandler.APN_MOBILE_VIDEO_PLACEMENT_ID];h&&(p=!0,d=h)}if(p||(d=s.createElement("video")),d.id=e.an_video_ad_player_id,d.className="video-js vjs-default-skin",d.style.marginRight="auto",d.style.marginLeft="auto",c.style["z-index"]=d.style["z-index"]+1,l.ReportingObserver&&n(l,t),!1===e.options.vpaid){u("Generating source object");var v=s.createElement("source");v.type=e.options.video.type,v.src=e.options.videoUrl,e.options.vpaid||d.appendChild(v)}if(e.options.useMsSkin&&i(s,d),u("Injecting required elements into iframe"),e.options.disableTopBar||(s.body.appendChild(c),"native"===e.options.adType&&(c.style.display="none")),s.body.appendChild(d),l.videojs=e.videojsOrigin,e.options.vpaid){var f=s.createElement("script");f.id="vpaidScript",f.innerHTML=t.videojs_vpaid,s.head.appendChild(f)}s.body.style.margin="0px",s.body.style.overflow="hidden",e.options.verifications?e.options.isWebviewEnvironment?(t.verificationManager=new o(e.options.verifications,{parentDoc:s,videoElement:e.options.targetElement.parentElement,viewableImpression:e.options.viewableImpression,adServingId:e.options.adServingId,player:t}),t.verificationManager.init(),t.verificationManager.start(),r(a)):new o(e.options.verifications,{parentDoc:s,videoElement:d,viewableImpression:e.options.viewableImpression,adServingId:e.options.adServingId,player:t}).then((function(e){t.verificationManager=e,t.verificationManager&&(t.verificationManager.init(),t.verificationManager.start()),r(a)})):r(a)},b=!1;navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&!1===t.overlayPlayer?(a.onload=function(){A(),b=!0},setTimeout((function(){!1===b&&(c("destroying due to an error in firefox"),t.destroyWithoutSkip(!0,e.CONST_MESSAGE_GENERAL_ERROR,null,900))}),e.options.vpaidTimeout)):A()}else u("iframeVideoWrapper Doesn't exist.")},initForPodSlot:function(r){p("initForPodSlot"),null===o&&(o=e.options.isWebviewEnvironment?l():d());var a=t.iframeVideoWrapper;!function(){var s=a.contentWindow.document,l=a.contentWindow.window;u("Generating and styling video object");var d=t.adVideoPlayer.tag,c=!!d;if(c||((d=s.createElement("video")).id=e.an_video_ad_player_id,d.className="video-js vjs-default-skin",d.style.marginRight="auto",d.style.marginLeft="auto"),l.ReportingObserver&&n(l,t),d.innerHTML="",!1===e.options.vpaid){u("Generating source object"),t.adVideoPlayer&&t.adVideoPlayer.player&&(t.adVideoPlayer.player().duration(0),t.adVideoPlayer.player().currentTime(0),delete t.adVideoPlayer.vast);var p=s.createElement("source");p.type=e.options.video.type,p.src=e.options.videoUrl,e.options.vpaid||d.appendChild(p)}if(e.options.useMsSkin){i(s,d),u("Injecting required elements into iframe");var h=s.createElement("div");h.id="skip_Button_Wrapper",h.className="skipButtonWrapper vjs-hidden",s.body.appendChild(h)}if(c||s.body.appendChild(d),l.videojs=e.videojsOrigin,e.options.vpaid){var v=s.createElement("script");v.id="vpaidScript",v.innerHTML=t.videojs_vpaid;var f=s.getElementById("vpaidScript");f&&f.parentNode===s.head&&s.head.removeChild(f),s.head.appendChild(v),t.adVideoPlayer&&t.adVideoPlayer.player&&(t.adVideoPlayer.player().duration(0),t.adVideoPlayer.player().currentTime(0),t.adVideoPlayer.player().src({src:""}),d.removeAttribute("src"))}s.body.style.margin="0px",s.body.style.overflow="hidden",e.options.verifications?e.options.isWebviewEnvironment?(t.verificationManager=new o(e.options.verifications,{parentDoc:s,videoElement:e.options.targetElement.parentElement,viewableImpression:e.options.viewableImpression,adServingId:e.options.adServingId,player:t}),t.verificationManager.init(),t.verificationManager.start(),r(a)):new o(e.options.verifications,{parentDoc:s,videoElement:d,viewableImpression:e.options.viewableImpression,adServingId:e.options.adServingId,player:t}).then((function(e){t.verificationManager=e,t.verificationManager&&(t.verificationManager.init(),t.verificationManager.start()),r(a)})):r(a)}()}}}},9583:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e,t){return{init:function(r,o,a){i.debug("[PlayerManager_PostProcess]","init"),n(9224)(e,t).init(r,o,a),e.isMobile()&&e.options.hasOwnProperty("overlayPlayer")&&("click"===e.options.initialPlayback||"mouseover"===e.options.initialPlayback)?r&&(r.controlBar.el_.style.setProperty("display","none","important"),e.options.hiddenControls=!0):e.options.hasOwnProperty("overlayPlayer")&&e.isIos()&&parseInt(o.getIOSVersion())<10&&"auto"===e.options.initialPlayback&&r&&(r.controlBar.el_.style.setProperty("display","none","important"),e.options.hiddenControls=!0)}}}},1272:(e,t,n)=>{"use strict";var i=n(2067),r=n(5690),o=n(9724).v;e.exports=function(e,t,a){return{init:function(s){o.log("Video Player: init");var l=s.contentWindow.document.getElementById(e.an_video_ad_player_id);if(t.iframeVideoWrapper=s,e.options.vpaid)try{t.options.showVpaidIcons=!1,t.options.xandrSdk&&(t.options.overlayPlayer=!1),r(t)}catch(e){!function(e){o.error("Video Player: "+e)}(e)}else e.options.isWaterfall&&e.options.plugins&&(e.options.plugins=null);if("autoWithFallbackPlay"===e.options.initialPlayback&&(e.options.autoplay=!0,e.options.muted=!0),e.options.pod&&t.adVideoPlayer.el_){n(3819)(e,t).init(t.adVideoPlayer),!1===e.options.vpaid?t.adVideoPlayer.src(e.options.videoUrl):t.adVideoPlayer["ads-setup"]({});var d=s.contentWindow.document.getElementsByClassName("vjs-pod-display");d.length&&e.options.podText&&(d[0].innerHTML='<span class="vjs-ad-text">'+e.options.podText.replace("%%SLOT_NUMBER%%",e.options.slotNumber).replace("%%SLOTS%%",e.options.slotCount)+"</span> "),n(9583)(e,t).init(t.adVideoPlayer,i,24),t.adVideoPlayer.removeClass("vjs-seeking")}else e.videojsOrigin(l,e.options,(function(){var r=this;n(8707)(e,t).init(r,s,a),!1===e.options.vpaid&&r.src(e.options.videoUrl);var o=s.contentWindow.document.getElementsByClassName("vjs-pod-display");o.length&&e.options.podText&&(o[0].innerHTML='<span class="vjs-ad-text">'+e.options.podText.replace("%%SLOT_NUMBER%%",e.options.slotNumber).replace("%%SLOTS%%",e.options.slotCount)+"</span> "),n(9583)(e,t).init(r,i,24)}));e.options.vpaid&&t&&t.adVideoPlayer&&t.adVideoPlayer.trigger&&(t.options.xandrSdk&&(t.options.overlayPlayer=!0),t.adVideoPlayer.trigger("an.doneInitialize"))}}}},9437:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e){return"init: displayVolumeControls",i.debug("Video Player: init: displayVolumeControls"),{displayVolumeControls:function(){return!e.isAndroid()||"boolean"==typeof e.options.enableAndroidVolumeControls&&!0===e.options.enableAndroidVolumeControls}}}},1231:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e,t){return{init:function(n,r,o,a,s){i.verbose("[PlayerManager_AdIndicator]","init"),o.id="ad_indicator_text",o.innerHTML=e.adIndicatorTextContent,o.className="top-bar-text",o.role="button";var l="3em";if(e.isMobile()&&(l="5em"),o.style["text-align"]="right",o.style["margin-right"]="1em",o.style["margin-left"]="1em",o.style["font-size"]="1em",o.style.right="0px",o.style.left="",o.style["line-height"]="24px",o.style.outline="0",o.style.position="absolute",o.style.padding="0",o.style.height="auto",o.style.width="auto",o.style["max-width"]="35%",o.style["white-space"]="nowrap",o.style.overflow="hidden",o.style["text-overflow"]="ellipsis",s?o.style.cursor="pointer":o.style["pointer-events"]="none",a.style["text-align"]="right",a.style["margin-right"]="1em",a.style["margin-left"]="1em",a.style["font-size"]="1em",a.style.right="0px",a.style.left="",a.style["line-height"]="3em",a.style.outline="0",a.style.position="absolute",a.style.padding="0",a.style.height=l,a.style["max-width"]="35%",a.style.width="auto",a.style["text-overflow"]="ellipsis",a.style["white-space"]="nowrap",a.style.overflow="hidden",a.style.display="none",s){a.style.cursor="pointer";var d=function(n){t.click(),e.isMobile()&&(n.stopPropagation(),n.preventDefault())};o.addEventListener("touchend",d),a.addEventListener("touchend",d),o.addEventListener("click",d),a.addEventListener("click",d)}else a.style["pointer-events"]="none";n.addChild("button",{el:a})}}}},8197:(e,t,n)=>{"use strict";var i="[PlayerManager_AdIndicator]",r=n(9724).v,o=n(2067);e.exports=function(e,t){return{init:function(n,a,s){r.verbose(i,"init");var l=e.videojsOrigin.createEl("div",{className:"vjs-ad-provider"});l.id="ad_provider","inline"!==e.options.learnMore.location&&(l.style["max-width"]="28%");var d,c=!1;if(e.adIndicatorTextContent&&"string"==typeof e.adIndicatorTextContent&&(e.adIndicatorTextContent=e.adIndicatorTextContent.trim(),e.adIndicatorTextContent.length>0)){var u=a.createElement("div");u.className="vjs-ad-indicator",u.dir="auto",u.innerHTML=e.adIndicatorTextContent,"inline"!==e.options.learnMore.location&&(u.style["max-width"]="98%"),c=!0,l.appendChild(u)}if(e.options.feedback){var p=t.iframeVideoWrapper.contentWindow.document,h=p.createElement("script");h.type="text/javascript",h.async=!0,h.src="https://adsdk.microsoft.com/ad-feedback/sdk.js",h.onerror=function(){r.debug(i,"Failed to load feedback script")},h.onload=function(){var n=t.iframeVideoWrapper.contentWindow.microsoftAdFeedback;if(e.options.feedback.adType="video",n.isDataValid(e.options.feedback)){var i=a.createElement("div");if(i.className="vjs-ad-feedback-btn",i.tabIndex=8,s&&d&&"inline"===e.options.learnMore.location){var r=a.createElement("div");r.className="vjs-ad-feedback-delimeter",l.insertBefore(r,d),l.insertBefore(i,r)}else l.appendChild(i);i.addEventListener("click",v),i.addEventListener("touchend",v);var o=function(e){32!=e.which&&13!=e.which||(e.preventDefault(),v(e))};i.addEventListener("focus",(function(){i.addEventListener("keydown",o)})),i.addEventListener("blur",(function(){i.removeEventListener("keydown",o)}))}},p.getElementsByTagName("head")[0].appendChild(h);var v=function(n){e.isMobile()&&n.stopPropagation(),n.preventDefault();var o=p.getElementsByClassName("feedback-menu");o&&o.length>0||setTimeout((function(){if(r.debug(i,"microsoftAdFeedback = "+t.iframeVideoWrapper.contentWindow.microsoftAdFeedback),t.iframeVideoWrapper.contentWindow.microsoftAdFeedback){var n=function(){try{var e={};if(e.width=t.adVideoPlayer.el_.clientWidth,e.height=t.adVideoPlayer.el_.clientHeight,e.width>0&&e.height){var n=p.createElement("div");n.id="adFeedbackContainer",n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.left=0,n.style.top=0,n.style["z-index"]=12,n.style.cursor="default",e.container=n}return e}catch(e){return null}}();if(!n||!n.container)return void(s&&t.play());var o=n.container;t.adVideoPlayer.el_.appendChild(o);var a=t.iframeVideoWrapper.contentWindow.microsoftAdFeedback,s=!1,l=function(){t.adVideoPlayer.el_.removeChild(o),s&&t.play()},d=e.options.feedback;try{a.render(o,d),a.onEvent("close",l)}catch(e){l()}setTimeout((function(){var e,n=o.getElementsByClassName("feedback-menu");if(n&&0!==n.length){(!t.adVideoPlayer.paused()||t.options.vpaid&&t.isPlayingVideo)&&(t.pause(),s=!0);for(var i=Array.from(n[0].querySelectorAll("button")),r=0;r<i.length;r++)if((e=i[r]).offsetWidth>0&&e.offsetHeight>0){i[r].focus({focusVisible:!0});break}}else l()}),500)}}),20)}}if(s&&e.options.learnMore.text&&0!==e.options.learnMore.text.trim().length){(d=a.createElement("div")).className="vjs-ad-learnmore-container";var f=a.createElement("a");switch(f.href=e.options.clickUrls[0],f.target="_blank",f.className="vjs-ad-learnmore",f.tabIndex=-1,d.appendChild(f),e.options.learnMore.location){case"top-left":d.className="vjs-ad-learnmore-container-tl";break;case"top-right":d.className="vjs-ad-learnmore-container-tr";break;default:d.className="vjs-ad-learnmore-container",c||(d.style.marginLeft="0px")}f.dir="auto";var m=e.options.contentPlayer&&e.options.contentPlayer.el_?e.options.contentPlayer.el_.clientWidth:e.options.targetElement?e.options.targetElement.clientWidth:0;f.innerHTML=m&&m>0&&m<o.MIN_DESKTOP_WIDTH?"":e.options.learnMore.text,d.tabIndex=30,"inline"===e.options.learnMore.location?l.appendChild(d):t.adVideoPlayer.el_.appendChild(d);var g=function(n){t.click(),e.isMobile()&&n.stopPropagation(),n.preventDefault()};f.addEventListener("touchend",g),f.addEventListener("click",g);var y=function(e){32!=e.which&&13!=e.which||(e.preventDefault(),g(e))};d.addEventListener("focus",(function(){d.addEventListener("keydown",y)})),d.addEventListener("blur",(function(){d.removeEventListener("keydown",y)}))}n.player().controlBar.el_.appendChild(l)}}}},9309:(e,t,n)=>{"use strict";var i="[PlayerManager_BigPlayButton]",r=n(9724).v,o=function(e){r.verbose(i,e)};e.exports=function(e,t){return{init:function(n){r.debug(i,"init");var a=function(){t.explicitPlay(),!0===t.isEnded&&(t.replay(),n.player().bigPlayButton.removeClass("vjs-big-play-button-replay"),!1===e.options.showBigPlayButton&&n.bigPlayButton&&n.bigPlayButton.hide()),setTimeout((function(){t.unmute()}),e.bigbuttonUnmuteTimeout)};if(n.player().bigPlayButton.on("click",(function(){o("big play button click"),a()})),n.player().bigPlayButton.on("touchend",(function(){o("big play button touchend"),a()})),e.options.useMsSkin&&n.player().bigPlayButton.on("keydown",(function(e){32!=e.which&&13!=e.which||(e.preventDefault(),a())})),n.player().on("pause",(function(){e.options.useMsSkin&&n.bigPlayButton&&n.player().currentTime()>.5&&n.player().duration()-n.player().currentTime()>.5&&n.bigPlayButton.hide()})),e.options.useMsSkin){var s=t.iframeVideoWrapper.contentWindow.document.createElement("div");s.classList.add("vjs-big-play-button-focus"),n.bigPlayButton.el_.appendChild(s)}}}}},1047:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e){return{init:function(t){i.debug("[PlayerManager_Controls]","init"),t.on("concealControls",(function(){var n=t.player().controlBar;if(!0===t.options().disableCollapse.enabled&&!0===t.options().disableCollapse.hideControlBar&&!1===t.options().disableCollapse.replay&&(n.hide(),"below"===t.options().controlBarPosition)){var i=parseInt(e.targetElement.style.height);if(e.targetElement.style.height=i-this.controlBar.el_.offsetHeight+"px",e.options.sideStreamObject.isActivated){var r=parseInt(e.targetElement.childNodes[0].style.height)>1?0:1,o=parseInt(e.targetElement.childNodes[r].style.height);e.targetElement.childNodes[r].style.height=o-this.controlBar.el_.offsetHeight+"px"}}n&&!n.concealed&&(n.currentTimeDisplay&&n.currentTimeDisplay.hide(),n.durationDisplay&&n.durationDisplay.hide(),n.timeDivider&&n.timeDivider.hide(),n.muteToggle&&n.muteToggle.hide(),n.playToggle&&n.playToggle.hide(),n.fullscreenToggle&&n.fullscreenToggle.hide(),n.progressControl&&n.progressControl.hide(),n.volumeControl&&n.volumeControl.hide(),n.concealed=!0)})),t.on("revealControls",(function(){var n=t.player().controlBar;n.show(),n&&n.concealed&&("bar"!==e.options.showProgressBar&&!1!==e.options.showProgressBar&&(n.currentTimeDisplay&&n.currentTimeDisplay.show(),n.durationDisplay&&n.durationDisplay.show(),n.timeDivider&&n.timeDivider.show()),n.muteToggle&&e.options.showMute&&n.muteToggle.show(),n.playToggle&&e.options.showPlayToggle&&n.playToggle.show(),n.fullscreenToggle&&e.options.allowFullscreen&&n.fullscreenToggle.show(),!1!==e.options.showProgressBar&&"text"!==e.options.showProgressBar&&n.progressControl&&n.progressControl.show(),n.volumeControl&&e.options.showVolume&&e.displayVolumeControls()&&n.volumeControl.show(),n.concealed=!1)}))}}}},4439:(e,t,n)=>{"use strict";var i="[PlayerManager_Destroy]",r=n(9724).v,o=n(1731),a=n(2067),s=function(e){r.verbose(i,e)};e.exports=function(e,t){return{init:function(n){r.debug(i,"init"),!0===t.options.loop&&function(e,t){let n=!1,i=0;const r=function(){const o=this.currentTime(),a=this.duration();!n&&a>0&&i>o&&(n=!0,t.dispatchEventToAdunit({name:"video_complete"}),e.off("timeupdate",r)),!n&&a>0&&Math.abs(a-o)<.25&&(n=!0,t.dispatchEventToAdunit({name:"video_complete"}),e.off("timeupdate",r)),i=o};e.on("timeupdate",r)}(n,t),n.on("ended",(function(){!1===t.options.vpaid&&n.trigger("customDestroy")})),n.on("customDestroy",(function(){var i=function(e){var t,n=e.activeElement;if(n){if("IFRAME"===n.tagName)return n.contentDocument?t=i(n.contentDocument):null;var r=e.getElementsByTagName("video");if(r.length>0&&r[0].webkitDisplayingFullscreen)return r[0]}var o=e.getElementsByTagName("iframe");if(o.length>0)for(var a=0;a<o.length;a++)if(o[a].contentDocument&&(t=i(o[a].contentDocument)))return t;return null},r=function(){if(t.isEnded=!0,!0===e.options.disableCollapse.enabled&&(t.options.sideStreamObject&&t.options.sideStreamObject.isActivated&&t.options.sideStreamObject.moveAdUnitBack(),t.options.sideStream.wasEnabled=t.options.sideStream.enabled,t.options.sideStream.enabled=!1),!0===e.options.disableCollapse.enabled&&!0===e.options.disableCollapse.replay&&!e.options.endCard.enabled||e.options.isXandrVastPlayer&&e.options.enableReplay?(n.bigPlayButton.show(),n.bigPlayButton.addClass("vjs-big-play-button-replay"),n.controlBar.playToggle.el().style["pointer-events"]="none",t.options.isXandrVastPlayer&&n.controlBar.hide(),t.startedReplay&&t.options.cbApnVastPlayer&&t.options.cbApnVastPlayer("ad-replay",!1)):((e.options.wcElement&&e.options.wcElement instanceof Element?e.options.wcElement.querySelector("#"+String(e.options.iframeVideoWrapperId)):document.getElementById(e.options.iframeVideoWrapperId)).style.background=e.options.videoBackgroundColor,(e.isAndroid&&e.isAndroid()||"below"===e.options.controlBarPosition)&&(n.controlBar.el().style.bottom=o.getBottomMarginForControlbar(e.options,!1)+"em"),s("hiding control bar and big play button"),e.options.pod||n.trigger("concealControls"),n.bigPlayButton.hide(),e.options.disableCollapse.enabled||(t.isSkipped=!0,t.destroyWithoutSkip()),e.options.endCard.enabled||(s("isCompleted = true"),t.isCompleted=!0)),!(!t.isFullscreen&&!t.adVideoPlayer.isFullscreen_||t.options.pod&&t.options.slotCount!==t.options.slotNumber))if(s("exiting fullscreen before destroy()"),document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(a.isIos()){var r=i(document);r&&r.webkitExitFullscreen&&r.webkitExitFullscreen()}t.endCard&&(s("showing EndCard."),t.endCard.show())};t.options.vpaid?(r(),t.options.isXandrVastPlayer&&setTimeout((function(){t.isCompleted||n.trigger("stop")}),t.options.pod?0:100)):e.dispatchEventToAdunit({name:"video_complete"},(function(){r()}))}))}}}},7310:(e,t,n)=>{"use strict";var i="[PlayerManager_Fullscreen]",r=n(9724).v;e.exports=function(e,t){return{init:function(n,o,a){r.debug(i,"init"),!1===e.isMobile()&&n.controlBar.fullscreenToggle.on("click",(function(){t.isFullscreenToggled||(t.isFullscreenToggled=!0)}));var s=function(){var s;r.verbose(i,"fullscreenchange"),e.isIos()&&t.isFullscreen&&!t.fsApiForIosAvailable&&(t.options.isXandrVastPlayer&&t.options.vpaid?(t.adVideoPlayer.pause(),setTimeout((function(){t.adVideoPlayer.play()}),500)):t.options.isXandrVastPlayer?setTimeout((function(){t.adVideoPlayer.play()}),500):t.play()),t.isFullscreen?(e.pendingFullscreenExit=!0,n.controlBar.el().style.bottom="",e.options.disableTopBar||(a.style.display="block",o.style.display="none",e.floatingSkipButton&&(e.floatingSkipButton.style.display="none",e.floatingAdSkipText.style.display="none")),s=!1===e.isMobile()?1e3:0,setTimeout((function(){e.pendingFullscreenExit=!1,t.isFullscreen=!1,t.isFullscreenToggled=!1,e.dispatchEventToAdunit({name:"fullscreenchange",fullscreenStatus:"exit"})}),s)):(t.isFullscreen=!t.isFullscreen,n.controlBar.el().style.bottom="0.0em",e.options.disableTopBar||(o.style.display="block",a.style.display="none",e.floatingSkipButton&&(e.readyForSkip?(e.floatingSkipButton.style.display="block",e.floatingAdSkipText.style.display="none"):(e.floatingSkipButton.style.display="none",e.floatingAdSkipText.style.display="block"))),e.dispatchEventToAdunit({name:"fullscreenchange",fullscreenStatus:"enter"}))},l=function(){if(t.options.isXandrVastPlayer&&e.isIos()&&t.iframeVideoWrapper){var n=t.iframeVideoWrapper.contentWindow.document,i=n.createElement("meta");i.name="viewport",i.content="width=device-width, initial-scale=1",n.head.appendChild(i),t.fsApiForIosAvailable=!0}};"onfullscreenchange"in document?(l(),n.on("fullscreenchange",s)):"onwebkitfullscreenchange"in document?(l(),n.on("webkitfullscreenchange",s)):t.options.isXandrVastPlayer&&e.isIos()&&t.adVideoPlayer.on("fullscreenchange",s),e.options.useMsSkin&&n.controlBar.fullscreenToggle.on("keydown",(function(e){32!=e.which&&13!=e.which||(e.preventDefault(),this.player_.isFullscreen()?t.adVideoPlayer.exitFullscreen():t.adVideoPlayer.requestFullscreen())}))}}}},5327:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e,t){return{init:function(){i.debug("[PlayerManager_Orientation]","init");var n=e.options.isWaterfall?e.options.waterfallStepId:null;window.addEventListener("orientationchange",(function(){if(!e.options.isXandrVastPlayer&&t.isReadyToExpandForMobile){if(n&&n!==e.options.waterfallStepId)return;if(e.options.sideStreamObject&&"function"==typeof e.options.sideStreamObject.shouldNotResizeWhenSideStreamActivated&&e.options.sideStreamObject.shouldNotResizeWhenSideStreamActivated())return;e.refreshVideoLookAndFeel(e.options,t)}}))}}}},869:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e){return{init:function(t){i.debug("[PlayerManager_AdPodText]","init");var n=t.player().controlBar,r=e.videojsOrigin;r.PodSlotTextDisplay=r.Component.extend({init:function(e,t){r.Component.call(this,e,t)}}),r.PodSlotTextDisplay.prototype.createEl=function(){var e=r.Component.prototype.createEl.call(this,"div",{className:"vjs-pod-text"});return this.contentEl_=r.createEl("div",{className:"vjs-pod-display",innerHTML:'<span class="vjs-ad-text"></span>'}),e.appendChild(this.contentEl_),e},n.addChild("PodSlotTextDisplay")}}}},9224:(e,t,n)=>{"use strict";var i=n(9724).v,r=n(4509);e.exports=function(e,t){return{init:function(n,o,a){i.debug("[PlayerManager_SettingAdIcons]","init");var s=t.options.playerSkin.controlBarHeight,l=new r(t);l.init(t.options.data.adIcons);var d=l.getIcons();if(d&&(!d||0!==d.length)){var c=t.options.disableTopBar?0:a,u=o.isMobile()||"below"===t.options.controlBarPosition||"fixed"===t.options.controlBarPosition?s:0;if(n.controlBar.el_.style.zIndex=10,t.test("adIconOffset",l),!o.isMobile()){var p=t.iframeVideoWrapper?t.iframeVideoWrapper.contentWindow.document.getElementById(e.an_video_ad_player_id):document.getElementById(e.options.iframeVideoWrapperId).contentWindow.document.getElementById(e.an_video_ad_player_id),h=function(){if(t.isExpanded&&"below"!==t.options.controlBarPosition){var e=t.getFinalSize();if(e.width&&e.height){var n=e.height-a-s-10;l.redraw(0,n)}}},v=function(){if(t.isExpanded&&"below"!==t.options.controlBarPosition){var e=t.getFinalSize();if(e.width&&e.height){var n=e.height-a-s-10;l.redraw("fixed"===t.options.controlBarPosition?0:s,n)}}};n.on("useractive",(function(){v()})),n.on("userinactive",(function(){!1===n.paused()&&h()})),n.on("handleManualUserActive",(function(){v()})),n.on("handleManualUserInActive",(function(){!1===n.paused()&&h()})),p.addEventListener("mouseenter",(function(){v()})),p.addEventListener("mousemove",(function(){v()}))}var f=-1;n.on("timeupdate",(function(){if(!t.options.vpaid||t.options.showVpaidIcons){var e=1e3*(r=Math.round(n.player().currentTime())),i=1e3*Math.round(n.player().duration());if(d&&d.length>0&&l.renderIcons((function(e){var n={};n.name=e,t.dispatchEventToAdunit(n)}),(function(e){t.click(e,!1)}),n.player().el_,c,u,e,i,t.options.useMsSkin),t.options.pod){var r=n.player().currentTime();f>=0&&r<f?(l.removeIcons(n.player().el_),f=-1):f=r}}}))}}}}},8229:(e,t,n)=>{"use strict";var i=n(2067),r="[PlayerManager_Customize]",o=n(9724).v,a=function(e){o.verbose(r,e)};e.exports=function(e,t){return{init:function(n){if("init",o.debug(r,"init"),e.options.isWaterfall&&e.options.vpaid&&(n.controlBar.hide(),e.options.firstAdAttempted&&n.bigPlayButton.hide()),a("disabling scrubbing"),n.controlBar.progressControl.seekBar.off("mousedown"),n.controlBar.progressControl.seekBar.off("touchstart"),n.controlBar.progressControl.seekBar.off("click"),a("setting initial audio"),"off"===e.options.initialAudio?(n.muted(!0),t.isMuted=!0):(n.muted(!1),t.isMuted=!1),a("setting initial playback"),"mouseover"===e.options.initialPlayback){var s=function(){t.play(),n.el().removeEventListener("mouseover",s)};n.el().addEventListener("mouseover",s)}if(a("setting aspect ratio"),e.options.maintainAspectRatio,!1!==e.options.showVolume&&e.displayVolumeControls()||(a("removing volume controls"),n.controlBar.volumeControl.dispose()),!1===e.options.showPlayToggle&&n.controlBar.playToggle.hide(),!1===e.options.showBigPlayButton&&n.bigPlayButton.hide(),!0===e.options.showMute&&(e.displayVolumeControls()||e.isAndroid())){a("setting mute functionality");var l=function(){t.isMuted?n.volume()>0&&t.explicitUnmute():t.explicitMute()};n.controlBar.muteToggle.on("click",l),n.controlBar.muteToggle.on("touchend",l)}else if(t.options.useMsSkin){a("setting mute functionality for MS skin"),n.controlBar.muteToggle.dispose();var d=function(){t.muteStateChangedByButton=!0,n.muted()?(t.isMuted=!1,t.explicitMute()):(t.isMuted=!0,t.explicitUnmute())};t.adVideoPlayer.player().on("volumechange",(function(){t.muteStateChangedByButton?t.muteStateChangedByButton=!1:t.isMuted?n.volume()>0&&t.explicitUnmute():0===n.volume()&&t.explicitMute()}));var c=n.controlBar.getChild("volumePanel");c&&(c.muteToggle.on("click",d),c.muteToggle.on("touchend",d))}else a("removing mute button"),n.controlBar.muteToggle.dispose();if(!0===e.options.showVolume&&e.displayVolumeControls()&&n.controlBar.volumeControl.volumeBar.on("mousedown",(function(){var e=n.volume();e<=0&&!t.isMuted&&(a("muting from volume scrubber"),t.explicitMute()),e>0&&t.isMuted&&(a("unmuting from volume scrubber"),t.explicitUnmute())})),i.isIos()&&e.options.enableNativeInline&&parseInt(i.getIOSVersion())>9&&"click"!==e.options.initialPlayback&&(n.muted(!0),n.controlBar.muteToggle.update()),"boolean"==typeof e.options.customButton.enabled&&!0===e.options.customButton.enabled){var u=e.options.playerSkin.controlBarHeight||30,p=Math.min(50,e.options.customButton.imgWidth),h=Math.min(u,e.options.customButton.imgHeight),v=Math.floor((u-h)/2),f="a";e.isMobile()&&(f="span");var m=e.videojsOrigin.createEl("div",{innerHTML:"<"+f+' href="'+e.options.customButton.url+'" target="_blank"><img style="height:'+h+"px;width:"+p+"px;margin-top:"+v+'px" class="home-button-image" src="'+e.options.customButton.imageSrc+'" alt="'+e.options.customButton.altText+'"></'+f+">",role:"button","aria-live":"polite",tabindex:"0"});m.style.cssText="float:right;font-family:VideoJS;font-size:1.5em;line-height:2;width:50px;height:100%;text-align:center",n.controlBar.addChild("button",{el:m}),n.controlBar.el().insertBefore(m,n.controlBar.fullscreenToggle.el())}n.controlBar.progressControl.seekBar.seekHandle.hide(),n.controlBar.progressControl.seekBar.el_.style.pointerEvents="none","boolean"==typeof e.options.showProgressBar?(!1===e.options.showProgressBar&&(a("removing progress bar"),n.controlBar.currentTimeDisplay.hide(),n.controlBar.timeDivider.hide(),n.controlBar.durationDisplay.hide()),n.controlBar.progressControl.seekBar.hide()):"text"===e.options.showProgressBar?(a("removing progress text"),n.controlBar.progressControl.seekBar.hide()):"bar"===e.options.showProgressBar&&(a("removing progress bar"),n.controlBar.currentTimeDisplay.hide(),n.controlBar.timeDivider.hide(),n.controlBar.durationDisplay.hide()),!1===e.options.allowFullscreen&&(a("removing fullscreen toggle"),n.controlBar.fullscreenToggle.el().style.display="none"),!1===e.options.allowFullscreen&&!0===e.options.useMsSkin&&n.controlBar.captionsButton.el().classList.add("captionMargin"),e.isMobile()&&!0===e.options.allowFullscreen&&!0===e.options.showMute&&(n.controlBar.fullscreenToggle.el().style.visibility="hidden",n.controlBar.muteToggle.el().style.visibility="visible"),e.options.targetElement.addEventListener("outstream-impression",(function(){e.isMobile()&&!0===e.options.allowFullscreen&&!0===e.options.showMute&&(n.controlBar.fullscreenToggle.el().style.visibility="visible",n.controlBar.muteToggle.el().style.visibility="visible")})),e.options.targetElement.addEventListener("vastplayer-impression",(function(){e.isMobile()&&!0===e.options.allowFullscreen&&!0===e.options.showMute&&(n.controlBar.fullscreenToggle.el().style.visibility="visible",n.controlBar.muteToggle.el().style.visibility="visible")}))}}}},2505:(e,t,n)=>{"use strict";var i=n(9724).v,r=function(e){i.debug("[PlayerManager_EndCardSetup]",e)},o=n(1401);e.exports=function(e,t){return{init:function(n){if(r("init"),e.options.endCard.enabled){var i=e.options.endCard;if(i.showDefaultButtons){for(var a=-1,s=0;s<i.buttons.length;s++)if("replay"===i.buttons[s].type){a=s;break}e.options.disableCollapse.replay?a<0&&i.buttons.splice(0,0,{type:"replay"}):a>=0&&i.buttons.splice(a,1)}r("Creating EndCard."),t.endCard=new o(i,n,t)}}}}},9510:(e,t,n)=>{"use strict";var i="[PlayerManager_Skip]",r=n(9724).v,o=n(2067),a=function(e){r.debug(i,e)};e.exports=function(e,t){return{init:function(n,s,l,d,c,u){var p,h,v;a("init");var f=function(){p&&(p.style.display="none"),h&&(h.style.display="none")},m=function(){v&&(v.style.display="none")};if(e.options.useMsSkin){var g=e.options.skippable.nonSkippableText,y=!(!g||0===g.trim().length);(v=c.contentWindow.document.createElement("div")).id="non_skippable_button",v.innerHTML=g,v.className="non-skippable-button",v.role="button",v.style["pointer-events"]="none",v.style.display="none"}var A=!1,b=!1,k=!1,E=function(){e.options.pod&&(A=!1,b=!1,k=!1)};if(!0===e.options.skippable.enabled){"creating and styling skip buttons and skip texts",r.verbose(i,"creating and styling skip buttons and skip texts");var w=e.options.skippable.videoThreshold,T=e.options.skippable.skipText,S=e.options.skippable.skipButtonText;(p=c.contentWindow.document.createElement("div")).id="skip_button",e.options.useMsSkin&&(p.dir="auto"),p.innerHTML=S,p.className="top-bar-text",p.role="button";var I="";!e.options.useMsSkin&&e.isMobile()&&(I="5.0em"),p.style.display="none",p.style.cursor="pointer",p.style["font-weight"]="bold",p.style["margin-right"]="1em",p.style["margin-left"]="1em",p.style["font-size"]="1em",p.style.right="",p.style.left="0px",p.style["line-height"]="24px",p.style.outline="0",p.style.position="absolute",p.style.padding="0",p.style.height=I,p.style.width="auto",p.style["min-width"]="5em",e.options.useMsSkin||(p.style["text-align"]="left"),e.floatingSkipButton=e.videojsOrigin.createEl("div",{className:"top-bar-text",role:"button",innerHTML:S}),e.floatingSkipButton.style.display="none",e.floatingSkipButton.style.cursor="pointer",e.floatingSkipButton.style["font-weight"]="bold",e.floatingSkipButton.style["margin-right"]="1em",e.floatingSkipButton.style["margin-left"]="1em",e.floatingSkipButton.style["font-size"]="1em",e.floatingSkipButton.style.right="",e.floatingSkipButton.style.left="0px",e.floatingSkipButton.style["line-height"]="3em",e.floatingSkipButton.style.outline="0",e.floatingSkipButton.style.position="absolute",e.floatingSkipButton.style.padding="0",e.floatingSkipButton.style.height=I,e.floatingSkipButton.style["min-width"]="5em",e.floatingSkipButton.style.width="auto",e.floatingSkipButton.style.display="none",e.options.useMsSkin||(e.floatingSkipButton.style["text-align"]="left"),d.addChild("button",{el:e.floatingSkipButton}),e.options.useMsSkin&&(T=T.replace("%%TIME%%","<b>%%TIME%%</b>"),e.floatingSkipButton.dir="auto");var C=function(n){a("SKIP clicked");var i=function(){if(a("Destroying player"),e.options.vpaid)return d.trigger("skip"),void(e.isMobile()&&(n.stopPropagation(),n.preventDefault(),e.options.overlayPlayer&&t.destroy()));t.destroy(),e.isMobile()&&(n.stopPropagation(),n.preventDefault(),t.isCompleted=!0),E()};if(t.adSkipConfirmation){var r=t.isPlayingVideo;r&&t.pause(),setTimeout((function(){t.adSkipConfirmation((function(e){e?i():(a("Ad skip not confirmed"),r&&t.play())}))}),30)}else i()};if(e.isMobile()&&(p.addEventListener("touchend",C),e.floatingSkipButton.addEventListener("touchend",C),e.floatingSkipButton.addEventListener("mousedown",(function(e){e.preventDefault()}))),p.addEventListener("click",C),e.floatingSkipButton.tabIndex=0,e.floatingSkipButton.addEventListener("click",C),u&&e.options.useMsSkin){u.tabIndex=35;var P=function(e){"block"===p.style.display&&(32!=e.which&&13!=e.which||(e.preventDefault(),C(e)))};u.addEventListener("focus",(function(){u.addEventListener("keydown",P)})),u.addEventListener("blur",(function(){u.removeEventListener("keydown",P)})),u.addEventListener("click",(function(e){"block"===p.style.display&&(e.preventDefault(),C(e))}))}e.floatingAdSkipText=e.videojsOrigin.createEl("div",{className:"top-bar-text",role:"button",innerHTML:""}),e.floatingAdSkipText.style["margin-left"]="1em",e.floatingAdSkipText.style["margin-right"]="1em",e.floatingAdSkipText.style.right="",e.floatingAdSkipText.style.left="0px",e.floatingAdSkipText.style["font-size"]="1em",e.floatingAdSkipText.style["line-height"]="3em",e.floatingAdSkipText.style.outline="0",e.floatingAdSkipText.style.position="absolute",e.floatingAdSkipText.style["text-align"]="left",e.floatingAdSkipText.style.padding="0",e.floatingAdSkipText.style.height="3em",e.floatingAdSkipText.style.width="auto",e.floatingAdSkipText.style["pointer-events"]="none",e.floatingAdSkipText.style.display="none",d.addChild("button",{el:e.floatingAdSkipText}),(h=c.contentWindow.document.createElement("div")).id="ad_skip_text",e.options.useMsSkin&&(h.dir="auto"),h.innerHTML=S,h.className="top-bar-text",h.role="button",h.style["margin-left"]="1em",h.style["margin-right"]="1em",h.style.right="",h.style.left="0px",h.style["font-size"]="1em",h.style["line-height"]="24px",h.style.outline="0",h.style.position="absolute",h.style["text-align"]=e.options.useMsSkin?"center":"left",h.style.padding="0",e.options.useMsSkin||(h.style.height="3em"),h.style.width="auto",h.style["pointer-events"]="none",h.style.display="none","top-right"===e.options.skippable.skipLocation&&(p.style.right="0px",p.style.left="",p.style["text-align"]="right",h.style.right="0px",h.style.left="",e.floatingSkipButton.style.right="0px",e.floatingSkipButton.style.left="",e.floatingSkipButton.style["text-align"]="right",e.floatingAdSkipText.style.right="0px",e.floatingAdSkipText.style.left="");var x={},j=-1,_=function(){var n=Math.round(d.player().currentTime());e.options.pod&&j>0&&n<j&&(m(),f()),j=n;var i,r=Math.round(d.player().duration()),a=(i=t.options.skippable.allowOverride?Math.round(t.options.data.skipOffsetMsec/1e3):e.options.skippable.videoOffset)-n,s=!e.options.skippable.allowOverride||t.options.data.isVastVideoSkippable;if(s=!(i>r||w>r)&&s,t.test("VIDLA163_needToShowSkip",s),!e.options.disableTopBar&&s||e.options.useMsSkin&&s){e.options.useMsSkin&&(v.style.display="none");var c="native"===e.options.adType||"preview"===e.options.adType;a>0&&(!t.startedReplay&&!t.isEnded||c||e.options.isXandrVastPlayer&&e.options.enableReplay)?(e.floatingAdSkipText.innerHTML=T.replace("%%TIME%%",a),p.style.display="none",h.innerHTML=T.replace("%%TIME%%",a),h.style.display="block",e.options.useMsSkin&&(m(),u.classList.remove("vjs-hidden"),u.style.display="block",u.style.cursor="default"),!e.options.useMsSkin&&o.elementsOverlap(h,l)&&(h.style.display="none")):(e.readyForSkip||(t.test("log",n),t.test("VIDLA163_skip",n)),e.readyForSkip=!0,t.isFullscreen&&!e.pendingFullscreenExit&&(e.floatingAdSkipText.style.display="none",e.options.useMsSkin||(e.floatingSkipButton.style.display="block")),h.style.display="none",p.style.display="block",e.options.useMsSkin&&(m(),u.style.cursor="pointer",u.addEventListener("mouseover",(function(e){u.style.border="1px solid rgba(255, 255, 255, 0.9)"})),u.addEventListener("mouseout",(function(e){u.style.border="1px solid rgba(255, 255, 255, 0.5)"}))),(c||e.options.isXandrVastPlayer&&e.options.enableReplay)&&Math.abs(r-n)<.1&&(p.style.display="none",e.options.useMsSkin&&(u.style.display="none")))}else!e.options.useMsSkin&&e.options.pod&&h&&(h.style.display="none");e.options.useMsSkin&&!s&&y&&(u.classList.remove("vjs-hidden"),v.style.display="block",f(),u.style.cursor="default")};d.on("resize",(function(){_()})),d.on("timeupdate",(function(){var n=t.options.data.vastProgressEvent;if(!e.options.isWaterfall||!t.options.vpaid||t.options.vpaidImpressionFired){var i=1e3*Math.round(d.player().currentTime());if(d.player().duration()){if(n&&"object"==typeof n){var r=function(){t.test("VIDLA163_Tracking",x)};for(var o in n){var a=n[o];if("number"==typeof a&&a>=0&&i>=a&&-1===Object.keys(x).indexOf(o)){x[o]=a;var s={};s.name=o,s.name&&t.dispatchEventToAdunit(s,r)}}}_()}}}))}!e.options.skippable.enabled&&e.options.useMsSkin&&y&&(u.classList.remove("vjs-hidden"),v.style.display="block",f(),u.style.cursor="default"),e.options.skippable&&e.options.skippable.skipLocation&&"top-right"===e.options.skippable.skipLocation&&(l.style.right="",l.style.left="0px",s.style.right="",s.style.left="0px"),!e.options.disableTopBar&&n&&(!0===e.options.skippable.enabled&&(n.appendChild(p),n.appendChild(h)),n.appendChild(l)),e.options.useMsSkin&&u&&(e.options.skippable.enabled&&(u.appendChild(p),u.appendChild(h)),u.appendChild(v)),d.on("timeupdate",(function(){if(!(t.options.vpaid||"preview"===e.options.adType&&t.isSkipped)){var n=Math.round(d.player().currentTime()),i=d.player().duration();if(i){var r=i/4*2,o=i/4*3;!A&&n>=i/4&&n<r&&(e.dispatchEventToAdunit({name:"video-first-quartile"}),A=!0),!b&&n>=r&&n<o&&(e.dispatchEventToAdunit({name:"video-mid"}),b=!0),!k&&n>=o&&n<i-.1&&(e.dispatchEventToAdunit({name:"video-third-quartile"}),k=!0),i-n<.1&&E()}}}))}}}},870:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e){return{init:function(t){i.verbose("[PlayerManager_AdIndicator]","init");var n=t.player().controlBar.el_.parentNode,r=t.player().controlBar,o=e.videojsOrigin.createEl("div",{className:"vjs-smoke-layer"});n.insertBefore(o,r.el_)}}}},3819:(e,t,n)=>{"use strict";var i="[PlayerManager_VideoPlay]",r=n(9724).v,o=n(3837).y(),a=n(2067),s=function(e){r.debug(i,e)},l=function(e){r.verbose(i,e)};e.exports=function(e,t){return{init:function(n){if(s("init"),!t.options.pod||!t.options.useSameAdPlayer){n.controlBar.playToggle.on("click",(function(){l("play button click"),t.explicitPaused=!t.explicitPaused})),n.controlBar.playToggle.on("touchend",(function(){l("play button touchend"),t.explicitPaused=!t.explicitPaused})),n.on("durationchange",(function(){e.dispatchEventToAdunit({name:"durationchange"})})),n.on("firstplay",(function(){e.dispatchEventToAdunit({name:"firstplay"}),n.controlBar.muteToggle&&n.controlBar.muteToggle.update(),n.controlBar.volumeControl&&n.controlBar.volumeControl.volumeBar&&n.controlBar.volumeControl.volumeBar.update(),i()}));var i=function(){e.dispatchEventToAdunit({name:"volume-change",obj:{volume:t.isMuted?0:n.volume()},eventType:"AdUnit"})};n.on("volumechange",i),n.controlBar.playToggle.on(["click","enterclick"],(function(){l("play button click"),!0===t.isPlayingVideo?t.explicitPause():(t.explicitPlay(),t.options.xandrSdk||t.unmute())})),n.controlBar.playToggle.on("touchend",(function(){l("play button touchend"),!0===t.isPlayingVideo?t.explicitPause():(t.explicitPlay(),t.options.xandrSdk||t.unmute())})),n.on("loadstart",(function(){e.dispatchEventToAdunit({name:"loadstart"})})),n.on("pause",(function(){e.options.overlayPlayer&&Math.abs(n.player().duration()-n.player().currentTime())<.5?n.player().bigPlayButton.el().style.display="none":n.player().bigPlayButton.el().style.display="block",t.isPlayingVideo=!1,e.options.hasOwnProperty("overlayPlayer")&&(a.isIphone()&&parseInt(a.getIOSVersion())<10||a.isIos()&&n.isFullscreen())&&e.dispatchEventToAdunit({name:"video_pause"})})),n.on("play",(function(){n.player().bigPlayButton.el().style.display="",t.isPlayingVideo=!0,e.options.hasOwnProperty("overlayPlayer")&&(a.isIphone()&&parseInt(a.getIOSVersion())<10||a.isIos()&&n.isFullscreen())&&e.dispatchEventToAdunit({name:"video_resume"})})),n.on("error",(function(n){s("error in video js");var i=o.browser.name.toLowerCase();n&&n.target&&e.options&&(e.options.vpaid||"ie"===i&&e.options.isWaterfall)&&(n.target.toString().indexOf('poster="null"')>0||"video"===n.target.nodeName.toLowerCase()&&n.target.networkState<=2||"div"===n.target.nodeName.toLowerCase())||(l("destroying due to error in video js"),t.destroyWithoutSkip(!0,e.CONST_MESSAGE_GENERAL_ERROR,null,900))}))}!1===e.options.vpaid&&n.one("loadedmetadata",(function(i){var r=i.currentTarget;t.videoObjectId=r.id,t.isReadyToExpandForMobile=!0,s("loadedmetadata video.js is ready to play"),n.tech.removeControlsListeners();var o=r.videoWidth,a=o/r.videoHeight;if(o>0?(t.resizeVideo(a),"function"==typeof e.callbackForAdUnit.cbWhenReady&&e.callbackForAdUnit.cbWhenReady(t)):(t.resizeVideo(0),e.callbackForAdUnit.cbWhenReady(t)),t.verificationManager){var l={skippable:t.options.skippable.enabled,skipOffset:t.options.skippable.videoOffset,autoPlay:"auto"===t.options.initialPlayback,position:t.options.position||"standalone"};t.verificationManager.dispatchEvent("loaded",l)}}))}}}},2409:(e,t,n)=>{"use strict";var i=n(2067);e.exports=function(e){e.MuteToggle=e.Button.extend({init:function(t,n){e.Button.call(this,t,n),this.on(t,["loadstart","volumechange"],(function(e){this.update(e)}))}}),e.MuteToggle.prototype.buildCSSClass=function(){return"vjs-mute-control "+e.Button.prototype.buildCSSClass()},e.MuteToggle.prototype.createEl=function(){return e.Button.prototype.createEl.call(this,"div",{tabIndex:35})},e.MuteToggle.prototype.onClick=function(e){if(this.player_.muted()){var t=this.player_.volume();0===t&&(t=.5,this.player_.volume(t))}this.player_.muted(!this.player_.muted())},e.MuteToggle.prototype.onEnterClick=function(e){},e.MuteToggle.prototype.onFocus=function(){this.on("keydown",this.onKeyPress)},e.MuteToggle.prototype.onKeyPress=function(e){if(37==e.which||40==e.which)e.preventDefault(),this.player_.volume(this.player_.volume()-.1);else if(38==e.which||39==e.which)e.preventDefault(),this.player_.volume(this.player_.volume()+.1);else if(32==e.which||13==e.which){if(this.player_.muted()){var t=this.player_.volume();0===t&&(t=.5,this.player_.volume(t))}this.player_.muted(!this.player_.muted())}},e.MuteToggle.prototype.onBlur=function(){this.off("keydown",this.onKeyPress)},e.MuteToggle.prototype.update=function(e){this.updateIcon_()},e.MuteToggle.prototype.updateIcon_=function(){var t=this.player_.volume(),n=3;if(i.isIos()&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?n=0:t<.33?n=1:t<.67&&(n=2),this.el_){this.player_.muted()?this.el_.children[0].children[0].innerHTML!=this.localize("Unmute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Unmute")):this.el_.children[0].children[0].innerHTML!=this.localize("Mute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Mute"));for(var r=0;r<4;r++)e.removeClass(this.el_,"vjs-vol-"+r);e.addClass(this.el_,"vjs-vol-"+n)}},e.MuteToggle.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e.MuteToggle.prototype.controlText_="Mute"}},3807:(e,t,n)=>{"use strict";var i=n(6079);e.exports=function(e){e.VolumeBar=e.Slider.extend({init:function(n,i){e.Slider.call(this,n,i),this.on("slideractive",(function(e){this.updateLastVolume_(e)})),this.on(n,"volumechange",(function(e){this.updateARIAAttributes(e)})),n.ready(e.bind(this,this.updateARIAAttributes)),this.onMouseMove=t.bind(this);var r=this;setTimeout((function(){r.update()}),500)}}),e.VolumeBar.prototype.createEl=function(){return e.Slider.prototype.createEl("div",{className:"vjs-volume-bar vjs-slider-bar vjs-slider-vertical",tabIndex:40},{"aria-label":"Volume Level","aria-live":"polite"})},e.VolumeBar.prototype.handleMouseDown=function(t){i.isSingleLeftClick(t)&&e.Slider.prototype.handleMouseDown(t)},e.VolumeBar.prototype.update=function(){if(this.el_){var t,n=this.getPercent(),i=this.handle,r=this.bar;if(("number"!=typeof n||n!=n||n<0||n===1/0)&&(n=0),t=n,r){var o=this.el_.offsetHeight;if(0===o&&(o=window.getComputedStyle(this.el_).getPropertyValue("height")),o>0){r.el().style.height=e.round(100*t,2)+"%";var a=o*t;i.el().style.bottom=a-i.el().offsetHeight+3,i.el().style.left=-i.el().offsetHeight/2,i.el().style.top="auto"}}if(this.el_.parentElement&&this.el_.parentElement.children.length>0)for(var s=0;s<this.el_.parentElement.children.length;s++){var l=this.el_.parentElement.children[s];if("volumeText"===l.id){var d=e.round(100*t);l.innerHTML=d.toString();break}}}},e.VolumeBar.prototype.calculateDistance=function(e){return i.getPointerPosition(this.el_,e).y};var t=function(e){i.isSingleLeftClick(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))};e.VolumeBar.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},e.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},e.VolumeBar.prototype.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},e.VolumeBar.prototype.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},e.VolumeBar.prototype.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},e.VolumeBar.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},e.VolumeBar.prototype.updateLastVolume_=function(){var e=this.player_.volume();this.one("sliderinactive",(function(){0===this.player_.volume()&&this.player_.lastVolume_(e)}))},e.VolumeBar.prototype.playerEvent="volumechange",e.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle",vertical:!0}}},6823:(e,t,n)=>{"use strict";var i=n(6079);e.exports=function(e){e.VolumeControl=e.Component.extend({init:function(t,n){n.vertical=!0,void 0===n.volumeBar&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical,n.volumeBar.handleName="volumeHandle"),e.Component.call(this,t,n),this.last=window.performance.now(),this.throttledHandleMouseMove=function(e){var t=window.performance.now();t-this.last>=i.UPDATE_REFRESH_INTERVAL&&(this.handleMouseMove(e),this.last=t)},this.handleMouseUpHandler_=function(e){this.handleMouseUp(e)},this.on("mousedown",(function(e){this.handleMouseDown(e)})),this.on("touchstart",(function(e){this.handleMouseDown(e)})),this.on("mousemove",(function(e){this.handleMouseMove(e)})),this.on(this.volumeBar,["focus","slideractive"],(function(){this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")})),this.on(this.volumeBar,["blur","sliderinactive"],(function(){this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")}))}}),e.VolumeControl.prototype.createEl=function(){var t=e.createEl("div",{className:"vjs-volume-control vjs-control vjs-volume-vertical"}),n=e.round(100*this.player_.volume(),2);return t.appendChild(e.createEl("span",{className:"vjs-volume-control-text",innerHTML:n.toString(),id:"volumeText"})),t},e.VolumeControl.prototype.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},e.VolumeControl.prototype.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},e.VolumeControl.prototype.handleMouseMove=function(e){this.volumeBar&&this.volumeBar.onMouseMove(e)},e.VolumeControl.prototype.options_={children:{volumeBar:{}}}}},5428:e=>{"use strict";e.exports=function(e){e.VolumeLevel=e.Component.extend({init:function(t,n){e.Component.call(this,t,n)}}),e.VolumeLevel.prototype.createEl=function(){var t=e.createEl("div",{className:"vjs-volume-level"});return t.appendChild(e.createEl("span",{className:"vjs-control-text"})),t}}},188:(e,t,n)=>{"use strict";var i=n(2067);e.exports=function(e){e.VolumePanel=e.Component.extend({init:function(t,n){n.inline=!1,void 0===n.volumeControl&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!0),e.Component.call(this,t,n),this.on(t,["loadstart"],(function(e){this.volumePanelState_(e)})),this.on("mouseover",(function(e){this.handleMouseOver(e)})),this.on("mouseout",(function(e){this.handleMouseOut(e)})),this.volumeControl&&(this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_))}}),e.VolumePanel.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")},e.VolumePanel.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")},e.VolumePanel.prototype.volumePanelState_=function(){this.volumeControl&&this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl&&this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},e.VolumePanel.prototype.createEl=function(){return e.createEl("div",{className:"vjs-volume-panel vjs-control vjs-volume-panel-vertical"})},e.VolumePanel.prototype.handleMouseOver=function(e){this.addClass("vjs-hover")},e.VolumePanel.prototype.handleMouseOut=function(e){this.removeClass("vjs-hover")},i.isIos()||i.isIpad()||i.isAndroid()?e.VolumePanel.prototype.options_={children:{muteToggle:{}}}:e.VolumePanel.prototype.options_={children:{muteToggle:{},volumeControl:{}}}}},6079:(e,t,n)=>{"use strict";var i=n(2067),r=function(e,t){if(!e||!t)return"";if("function"==typeof window.getComputedStyle){var n;try{n=window.getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""},o=function(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;e.offsetParent&&e!==document.fullscreenElement;)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}};e.exports={isSingleLeftClick:function(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons},getBoundingClientRect:function(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(r(e,"height"))),n.width||(n.width=parseFloat(r(e,"width"))),n}},getPointerPosition:function(e,t){var n={x:0,y:0};if(i.isIos())for(var a=e;a&&"html"!==a.nodeName.toLowerCase();){var s,l=r(a,"transform");/^matrix/.test(l)?(s=l.slice(7,-1).split(/,\s/).map(Number),n.x+=s[4],n.y+=s[5]):/^matrix3d/.test(l)&&(s=l.slice(9,-1).split(/,\s/).map(Number),n.x+=s[12],n.y+=s[13]),a=a.parentNode}var d={},c=o(t.target),u=o(e),p=u.width,h=u.height,v=t.offsetY-(u.top-c.top),f=t.offsetX-(u.left-c.left);return t.changedTouches&&(f=t.changedTouches[0].pageX-u.left,v=t.changedTouches[0].pageY+u.top,i.isIos()&&(f-=n.x,v-=n.y)),d.y=1-Math.max(0,Math.min(1,v/h)),d.x=Math.max(0,Math.min(1,f/p)),d},clamp:function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},UPDATE_REFRESH_INTERVAL:30}},7145:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e){return{init:function(t){i.debug("[PlayerManager_VolumePanel]","init");var r=t.player().controlBar;n(5428)(e.videojsOrigin),n(3807)(e.videojsOrigin),n(6823)(e.videojsOrigin),n(2409)(e.videojsOrigin),n(188)(e.videojsOrigin),r.addChild("volumePanel")}}}},2121:(e,t,n)=>{"use strict";var i=n(5418),r=n(2067),o=n(9724).v;e.exports=function(e,t){var a=this;this.options=e.options,this.topChromeHeight=24,this.iOSVideoPlayer=new i,this.videojsOrigin=e.videoPlayerObj,this.dispatchEventToAdunit=e.dispatchEventToAdunit.bind(e),this.callbackForAdUnit=e.callbackForAdUnit,this.UUID=(new Date).getTime()+Math.floor(1e4*Math.random());var s="an_video_ad_player_"+a.UUID,l="an_video_ad_player_"+a.UUID+"_html5_api";this.an_video_ad_player_id=s,this.an_video_ad_player_html5_api_id=l,e.divIdForVideo=s,e.videoId=l,this.refreshVideoLookAndFeel=r.refreshVideoLookAndFeel,this.shouldConsiderHeightOfDevice=!0,this.isDoneiOSInitialPlay=!1,this.isTogglePaused=!1,this.enabledAudio=!1,this.isFullscreen=!1,this.enableFullscreen=!0,this.fromFullscreen=!1,this.isAlreadyDoneVideoComplete=!1,this.customPlayToggle={},this.customFullscreenBtn={},this.eventSizeChange={},this.eventOrientationChange={},this.floatingAdIndicator=null,this.floatingSkipButton=null,this.floatingAdSkipText=null,this.readyForSkip=!1,this.videojsPlayer=null;var d=n(7291)(a,e),c=n(4648)(a,e,t),u=n(2582)(a,e);this.createIframeAndRequiredObject=u.createIframeAndRequiredObject,this.fnMainProcess=c.fnMainProcess,this.handleFullScreen=d.handleFullScreen,this.handleNormalScreen=d.handleNormalScreen,this.resizeIosCanvas=d.resizeIosCanvas,this.cbWhenVideoComplete=d.cbWhenVideoComplete,this.savedBackgroundForBottomBar="",this.savedBackgroundColorForBottomBar="",this.start=function(){if("start",o.debug("iOSInlineVideoPlayer: start"),!1!==a.test()){var e=(new Date).getTime()+Math.floor(1e4*Math.random());a.options.iframeVideoWrapperId="iframeVideoWrapper_"+e,a.options.techOrder=["html5"],a.createIframeAndRequiredObject(a.fnMainProcess)}else o.error("iOSInlineVideoPlayer: initialize error")},this.test=function(){return!!(this.createIframeAndRequiredObject&&this.fnMainProcess&&this.handleFullScreen&&this.handleNormalScreen&&this.resizeIosCanvas&&this.cbWhenVideoComplete)}}},4198:(e,t,n)=>{"use strict";var i=n(9724).v,r=function(e){i.verbose("Video Player: "+e)},o=n(2067);e.exports=function(e,t,n,a,s){return{run:function(){if("run",i.debug("iOSInlineVideoPlayer :: CustomizeVideoArea: run"),e.options.isWaterfall&&e.options.vpaid&&(a.controlBar.hide(),e.options.firstAdAttempted&&a.bigPlayButton.hide()),"boolean"==typeof e.options.customButton.enabled&&!0===e.options.customButton.enabled){var n=e.options.playerSkin.controlBarHeight||30,l=Math.min(50,e.options.customButton.imgWidth),d=Math.min(n,e.options.customButton.imgHeight),c=Math.floor((n-d)/2),u=e.videojsOrigin.createEl("div",{innerHTML:'<span ><img style="height:'+d+"px;width:"+l+"px;margin-top:"+c+'px" class="home-button-image" src="'+e.options.customButton.imageSrc+'" alt="'+e.options.customButton.altText+'"></span>',role:"button","aria-live":"polite",tabindex:"0"});u.style.cssText="float:right;font-family:VideoJS;font-size:1.5em;line-height:2;width:50px;height:100%;text-align:center",a.controlBar.addChild("button",{el:u}),a.controlBar.el().insertBefore(u,a.controlBar.fullscreenToggle.el())}a.controlBar.progressControl.seekBar.seekHandle.hide(),a.controlBar.progressControl.seekBar.el_.style.pointerEvents="none","boolean"==typeof e.options.showProgressBar?(!1===e.options.showProgressBar&&(r("removing progress bar"),a.controlBar.currentTimeDisplay.hide(),a.controlBar.timeDivider.hide(),a.controlBar.durationDisplay.hide()),a.controlBar.progressControl.seekBar.hide()):"text"===e.options.showProgressBar?(r("removing progress text"),a.controlBar.progressControl.seekBar.hide()):"bar"===e.options.showProgressBar&&(r("removing progress bar"),a.controlBar.currentTimeDisplay.hide(),a.controlBar.timeDivider.hide(),a.controlBar.durationDisplay.hide()),!1===e.options.showVolume&&a.controlBar.volumeControl.dispose();var p=e.videojsOrigin.createEl("div");p.className="vjs-control-bar-divider",p.style.position="absolute",p.style.left="0",p.style.right="0",a.controlBar.addChild("button",{el:p});var h=s.contentWindow.document.getElementById("top_chrome"),v=s.contentWindow.document.createElement("div");v.id="ad_indicator_text";var f,m,g=e.options.adText,y=e.options.learnMore.enabled;if(e.options.clickUrls[0]||(y=!1),y&&("top-right"===e.options.skippable.skipLocation?g=e.options.learnMore.text+" "+e.options.learnMore.separator+" "+g:g+=" "+e.options.learnMore.separator+" "+e.options.learnMore.text),v.innerHTML=g,v.className="top-bar-text",v.role="button",v.style["text-align"]="right",v.style["margin-right"]="1em",v.style["margin-left"]="1em",v.style["font-size"]="1em",v.style.right="0px",v.style.left="",v.style["line-height"]="24px",v.style.outline="0",v.style.position="absolute",v.style.padding="0",v.style.height="auto",v.style.width="auto",v.style["max-width"]="35%",v.style["white-space"]="nowrap",v.style.overflow="hidden",v.style["text-overflow"]="ellipsis",e.floatingAdIndicator=e.videojsOrigin.createEl("div",{role:"button",innerHTML:g,className:"top-bar-text"}),e.floatingAdIndicator.style["text-align"]="right",e.floatingAdIndicator.style["margin-right"]="1em",e.floatingAdIndicator.style["margin-left"]="1em",e.floatingAdIndicator.style["font-size"]="1em",e.floatingAdIndicator.style.right="0px",e.floatingAdIndicator.style.left="",e.floatingAdIndicator.style["line-height"]="3em",e.floatingAdIndicator.style.outline="0",e.floatingAdIndicator.style.position="absolute",e.floatingAdIndicator.style.padding="0",e.floatingAdIndicator.style.height="3em",e.floatingAdIndicator.style["max-width"]="35%",e.floatingAdIndicator.style.width="auto",e.floatingAdIndicator.style["text-overflow"]="ellipsis",e.floatingAdIndicator.style["white-space"]="nowrap",e.floatingAdIndicator.style.overflow="hidden",e.floatingAdIndicator.style.display="none",a.addChild("button",{el:e.floatingAdIndicator}),y){var A=function(n){e.iOSVideoPlayer.pauseVideo(),t.click(),n.stopPropagation(),n.preventDefault()};v.addEventListener("click",A),e.floatingAdIndicator.addEventListener("click",A)}if(!0===e.options.skippable.enabled){var b=e.options.skippable.videoThreshold,k=e.options.skippable.skipText,E=e.options.skippable.skipButtonText;(f=s.contentWindow.document.createElement("div")).id="skip_button",f.innerHTML=E,f.className="top-bar-text",f.role="button",f.style.display="none",f.style.cursor="pointer",f.style["font-weight"]="bold",f.style["margin-right"]="1em",f.style["margin-left"]="1em",f.style["font-size"]="1em",f.style.right="",f.style.left="0px",f.style["line-height"]="24px",f.style.outline="0",f.style.position="absolute",f.style.padding="0",f.style.height="5em",f.style.width="auto",f.style["min-width"]="5em",f.style["text-align"]="left",e.floatingSkipButton=e.videojsOrigin.createEl("div",{className:"top-bar-text",role:"button",innerHTML:E}),e.floatingSkipButton.style.display="none",e.floatingSkipButton.style.cursor="pointer",e.floatingSkipButton.style["font-weight"]="bold",e.floatingSkipButton.style["margin-right"]="1em",e.floatingSkipButton.style["margin-left"]="1em",e.floatingSkipButton.style["font-size"]="1em",e.floatingSkipButton.style.right="",e.floatingSkipButton.style.left="0px",e.floatingSkipButton.style["line-height"]="3em",e.floatingSkipButton.style.outline="0",e.floatingSkipButton.style.position="absolute",e.floatingSkipButton.style.padding="0",e.floatingSkipButton.style.height="5em",e.floatingSkipButton.style["min-width"]="5em",e.floatingSkipButton.style.width="auto",e.floatingSkipButton.style.display="none",e.floatingSkipButton.style["text-align"]="left",a.addChild("button",{el:e.floatingSkipButton});var w=function(n){window.removeEventListener("orientationchange",e.eventOrientationChange),window.removeEventListener("resize",e.eventSizeChange),e.iOSVideoPlayer.destroy(),t.pause(),t.isFullscreen=e.isFullscreen,t.forceToSkip=!0,t.destroy(),t.isCompleted=!0,n.stopPropagation(),n.preventDefault()};f.addEventListener("touchend",w),f.addEventListener("click",w),e.floatingSkipButton.addEventListener("touchend",w),e.floatingSkipButton.addEventListener("click",w),(m=s.contentWindow.document.createElement("div")).id="ad_skip_text",m.innerHTML=E,m.className="top-bar-text",m.role="button",m.style["margin-left"]="1em",m.style["margin-right"]="1em",m.style.right="",m.style.left="0px",m.style["font-size"]="1em",m.style["line-height"]="24px",m.style.outline="0",m.style.position="absolute",m.style["text-align"]="left",m.style.padding="0",m.style.height="3em",m.style.width="auto",m.style["pointer-events"]="none",m.style.display="none",e.floatingAdSkipText=e.videojsOrigin.createEl("div",{role:"button",className:"top-bar-text",innerHTML:""}),e.floatingAdSkipText.style["margin-left"]="1em",e.floatingAdSkipText.style["margin-right"]="1em",e.floatingAdSkipText.style.right="",e.floatingAdSkipText.style.left="0px",e.floatingAdSkipText.style["font-size"]="1em",e.floatingAdSkipText.style["line-height"]="3em",e.floatingAdSkipText.style.outline="0",e.floatingAdSkipText.style.position="absolute",e.floatingAdSkipText.style["text-align"]="left",e.floatingAdSkipText.style.padding="0",e.floatingAdSkipText.style.height="3em",e.floatingAdSkipText.style.width="auto",e.floatingAdSkipText.style["pointer-events"]="none",e.floatingAdSkipText.style.display="none",a.addChild("button",{el:e.floatingAdSkipText}),"top-right"===e.options.skippable.skipLocation&&(f.style.right="0px",f.style.left="",f.style["text-align"]="right",m.style.right="0px",m.style.left="",e.floatingSkipButton.style.right="0px",e.floatingSkipButton.style.left="",e.floatingSkipButton.style["text-align"]="right",e.floatingAdSkipText.style.right="0px",e.floatingAdSkipText.style.left="");var T=!1,S=!1,I=!1,C={},P=function(){var n,i=Math.round(a.player().duration()),r=Math.round(a.player().currentTime()),s=(n=t.options.skippable.allowOverride?Math.round(e.options.data.skipOffsetMsec/1e3):e.options.skippable.videoOffset)-r,l=!e.options.skippable.allowOverride||e.options.data.isVastVideoSkippable;l=!(n>i)&&l,t.test("VIDLA163_needToShowSkip",l),b<i&&!e.options.disableTopBar&&l&&(s>0&&!t.startedReplay&&!t.isEnded?(e.floatingAdSkipText.innerHTML=k.replace("%%TIME%%",s),f.style.display="none",m.innerHTML=k.replace("%%TIME%%",s),m.style.display="block",o.elementsOverlap(m,v)&&(m.style.display="none")):(e.readyForSkip||(t.test("log",r),t.test("VIDLA163_skip",r)),e.readyForSkip=!0,e.isFullscreen&&(e.floatingAdSkipText.style.display="none",o.isPortrait()&&(e.floatingSkipButton.style.display="block")),m.style.display="none",f.style.display="block"))};a.on("resize",(function(){P()})),a.on("timeupdate",(function(){var n=t.options.data.vastProgressEvent;if(!e.options.isWaterfall||!e.options.vpaid||e.options.vpaidImpressionFired){var i=1e3*Math.round(a.player().currentTime());if(n&&"object"==typeof n){var r=function(){t.test("VIDLA163_Tracking",C)};for(var o in n){var s=n[o];if(s&&s>=0&&i>=s&&-1===Object.keys(C).indexOf(o)){C[o]=s;var l={};l.name=o,l.name&&t.dispatchEventToAdunit(l,r)}}}P()}}))}e.options.skippable&&e.options.skippable.skipLocation&&"top-right"===e.options.skippable.skipLocation&&(v.style.right="",v.style.left="0px",e.floatingAdIndicator.style.right="",e.floatingAdIndicator.style.left="0px"),!e.options.disableTopBar&&h&&(!0===e.options.skippable.enabled&&(h.appendChild(f),h.appendChild(m)),h.appendChild(v)),a.on("timeupdate",(function(){if(!e.options.vpaid){var t=Math.round(a.player().currentTime()),n=a.player().duration(),i=n/4*2,r=n/4*3;!T&&t>=n/4&&t<i&&(e.dispatchEventToAdunit({name:"video-first-quartile"}),T=!0),!S&&t>=i&&t<r&&(e.dispatchEventToAdunit({name:"video-mid"}),S=!0),!I&&t>=r&&(e.dispatchEventToAdunit({name:"video-third-quartile"}),I=!0)}}));var x=function(){t.isEnded&&e.options.disableCollapse.replay&&(t.replay(),!1===e.options.showBigPlayButton&&a.player().bigPlayButton.hide(),a.player().bigPlayButton.removeClass("vjs-big-play-button-replay")),t.isDoneInitialPlay&&(t.isPlayingVideo=!1),t.explicitPlay()};a.player().bigPlayButton.on("touchend",(function(e){x(),e.preventDefault()})),a.player().bigPlayButton.on("click",(function(){x()})),a.on("error",(function(){t.destroyWithoutSkip(!0,"General error reported from HTML5 video player (iOS inline)",null,900)})),a.on("loadstart",(function(){e.dispatchEventToAdunit({name:"loadstart"})})),a.on("pause",(function(){!0===(t.options.sideStream&&t.options.sideStream.enabled&&t.options.sideStreamObject&&t.options.sideStreamObject.isActivated)&&!0===t.options.showPlayToggle&&1==t.options.sideStream.dynamicBigPlayButtonOnSideStream||t.isFullscreen||(a.player().bigPlayButton.el().style.display="block")}))}}}},7291:(e,t,n)=>{"use strict";var i=n(2067),r=n(9724).v,o=function(e){r.debug("iOSInlineVideoPlayer :: EmulateHtml5Video: "+e)},a=function(e){r.verbose("iOSInlineVideoPlayer :: EmulateHtml5Video: "+e)},s=n(1731);e.exports=function(e,t){return{handleFullScreen:function(n){t.isFullscreen=!0,o("handleFullScreen");var i=n.contentWindow.document.getElementById("top_chrome");e.dispatchEventToAdunit({name:"fullscreenchange",fullscreenStatus:"enter"}),e.iOSVideoPlayer.enterFullscreenAsCanvas(),e.isFullscreen=!0,i&&(i.style.display="none"),e.options.disableTopBar||(a("Hiding ad text for fullscreen"),e.floatingAdIndicator.style.display="block",e.floatingSkipButton&&(e.readyForSkip?(e.floatingSkipButton.style.display="block",e.floatingAdSkipText.style.display="none"):(e.floatingSkipButton.style.display="none",e.floatingAdSkipText.style.display="block")))},handleNormalScreen:function(n){t.isFullscreen=!1,o("handleNormalScreen");var r=n.contentWindow.document.getElementById("top_chrome");e.dispatchEventToAdunit({name:"fullscreenchange",fullscreenStatus:"exit"}),r&&(r.style.display="block"),e.options.disableTopBar||(a("Showing ad text for fullscreen"),e.floatingAdIndicator.style.display="none",e.floatingSkipButton&&(e.floatingSkipButton.style.display="none",e.floatingAdSkipText.style.display="none")),e.iOSVideoPlayer.exitFullscreeenAsCanvas(),e.isFullscreen=!1,!1===(t.options.sideStream&&t.options.sideStream.enabled&&t.options.sideStreamObject&&t.options.sideStreamObject.isActivated)&&e.refreshVideoLookAndFeel(e.options,t),e.resizeIosCanvas(e.isFullscreen);var s=document.getElementById(t.videoObjectId);s&&void 0!==s&&(s.style.width=e.options.width,s.style.height=e.options.height);var l=t.options.sideStream&&t.options.sideStream.enabled,d=t.options.sideStreamObject&&"function"==typeof t.options.sideStreamObject.moveAdUnitBack;l&&d&&t.options.sideStreamObject.moveAdUnitBack(),!1===t.options.sideStreamObject.isActivated&&i.makeIframeFlexbileSize(t)},resizeIosCanvas:function(t){e.iOSVideoPlayer.resizeCanvas(t),e.iOSVideoPlayer.redrawCanvas(t)},cbWhenVideoComplete:function(n,r){if(o("cbWhenVideoComplete"),e.isFullscreen&&(e.fromFullscreen=!0,e.handleNormalScreen(n)),!0===e.options.disableCollapse.enabled&&(t.options.sideStreamObject&&t.options.sideStreamObject.isActivated&&t.options.sideStreamObject.moveAdUnitBack(),t.options.sideStream.wasEnabled=t.options.sideStream.enabled,t.options.sideStream.enabled=!1),!0!==e.options.disableCollapse.enabled||!0!==e.options.disableCollapse.replay&&!0!==e.options.endCard.enabled){if(e.isAlreadyDoneVideoComplete)return;e.isAlreadyDoneVideoComplete=!0,"below"===e.options.controlBarPosition&&(e.videojsPlayer.controlBar.el().style.bottom=s.getBottomMarginForControlbar(e.options,!1)+"em"),a("removing control bar items"),e.videojsPlayer.trigger("concealControls"),a("destroying iOSVideoPlayer"),e.iOSVideoPlayer.destroy(),e.resizeIosCanvas(e.isFullscreen),e.options.disableCollapse.enabled||(window.removeEventListener("orientationchange",e.eventOrientationChange),window.removeEventListener("resize",e.eventSizeChange)),e.dispatchEventToAdunit({name:"video_complete"},(function(){if(!e.options.disableCollapse.enabled){var n=t.options.sideStream&&t.options.sideStream.enabled&&t.options.sideStreamObject&&t.options.sideStreamObject.isActivated;t.isFullscreen=!n,t.destroyWithoutSkip()}t.isCompleted=!0,e.options.vpaid&&i.fireEvent(r,"ended")}))}else if(e.options.endCard.enabled&&t.endCard){if(!0===e.options.disableCollapse.hideControlBar){var l=Number(t.adVideoPlayer.controlBar.el_.offsetHeight);if(e.videojsPlayer.trigger("concealControls"),t.adVideoPlayer.controlBar.hide(),"below"===t.options.controlBarPosition){var d=t.options.targetElement,c=parseInt(d.style.height,10);if(d.style.height=String(c-l)+"px",e.options.sideStreamObject.enabled){var u=parseInt(d.childNodes[0].style.height)>1?0:1,p=parseInt(d.childNodes[u].style.height);d.childNodes[u].style.height=String(p-l)+"px"}}}t.endCard.show(),t.adVideoPlayer.controlBar.show(),e.dispatchEventToAdunit({name:"video_complete"})}else e.videojsPlayer.bigPlayButton.addClass("vjs-big-play-button-replay"),t.explicitPause(),e.videojsPlayer.currentTime(0),e.videojsPlayer.bigPlayButton.show(),e.videojsPlayer.player().bigPlayButton.el().style.display="block",e.dispatchEventToAdunit({name:"video_complete"});t.isEnded=!0}}}},4648:(e,t,n)=>{"use strict";var i=n(2067),r=n(5690),o=n(9724).v,a=function(e){o.debug("iOSInlineVideoPlayer :: Events: "+e)},s=function(e){o.error("iOSInlineVideoPlayer :: Events: "+e)},l=n(4509),d=n(1401);e.exports=function(e,t,c){return{fnMainProcess:function(u){var p;o.log("iOSInlineVideoPlayer: fnMainProcess");var h=u.contentWindow.document.getElementById(e.an_video_ad_player_id);if(t.iframeVideoWrapper=u,e.options.vpaid)try{t.options.showVpaidIcons=!1,r(t)}catch(e){s(e)}else e.options.isWaterfall&&e.options.plugins&&(e.options.plugins=null);e.options.nativeControlsForTouch=!1,e.options.customControlsOnMobile=!1,e.videojsPlayer=e.videojsOrigin(h,e.options,(function(){})),n(4198)(e,t,c,e.videojsPlayer,u).run(),t.adVideoPlayer=e.videojsPlayer;var v=e.options.wcElement&&e.options.wcElement instanceof Element?e.options.wcElement.querySelector("#"+String(e.options.iframeVideoWrapperId)):document.getElementById(e.options.iframeVideoWrapperId),f=v.contentWindow.document.getElementById(e.an_video_ad_player_id),m=v.contentWindow.document.getElementById(e.an_video_ad_player_html5_api_id);!0===e.options.enableInlineVideoForIos&&(m.style.width="0.1px",m.style.height="0.1px");var g=document.createElement("div");g.style.position="absolute",g.style.top="0px",g.style.left="0px",e.options.vpaid||(g.className="vjs-tech"),g.style.textAlign="center",f.insertBefore(g,m),e.options.targetElement.addEventListener("IOS_INLINE_RESIZE",(function(){e.resizeIosCanvas(!1)})),e.options.targetElement.addEventListener("IOS_INLINE_REFERESH",(function(){e.refreshVideoLookAndFeel(e.options,t),e.iOSVideoPlayer.checkOrientation(),e.customFullscreenBtn.style.visibility="hidden"}));var y={mediaUrl:e.options.videoUrl,divArea:g,width:e.options.width,height:e.options.height,videoElement:m,cbWhenVideoComplete:function(){e.cbWhenVideoComplete(u,m)},targetElement:e.options.targetElement,iframeVideoWrapper:u,el_wholeArea:f,cbTimeUpdate:function(){e.videojsPlayer.trigger("timeupdate")}},A=e.options.isWaterfall?e.options.waterfallStepId:null;e.iOSVideoPlayer.setPubOptions(e.options),e.iOSVideoPlayer.renderVideo(y,(function(n){n?(e.eventOrientationChange=function(){if((!A||A===e.options.waterfallStepId)&&t.isReadyToExpandForMobile){if(t.options.sideStreamObject&&"function"==typeof t.options.sideStreamObject.shouldNotResizeWhenSideStreamActivated&&t.options.sideStreamObject.shouldNotResizeWhenSideStreamActivated())return;e.refreshVideoLookAndFeel(e.options,t),e.iOSVideoPlayer.checkOrientation()}},e.eventSizeChange=function(){A&&A!==e.options.waterfallStepId||e.isFullscreen&&(t.resizeVideo(-1,e.shouldConsiderHeightOfDevice),e.iOSVideoPlayer.checkOrientation())},window.addEventListener("resize",e.eventSizeChange),window.addEventListener("orientationchange",(function(){(t.isCompleted||t.isEnded)&&!1===e.options.disableCollapse.enabled||(clearTimeout(p),p=setTimeout((function(){e.eventOrientationChange()}),250))})),m.onseeked=function(){return!1},"auto"===e.options.initialPlayback?e.videojsPlayer.player().loadingSpinner.show():e.videojsPlayer.player().loadingSpinner.hide(),e.videojsPlayer.player().off("seeked"),e.iOSVideoPlayer.initiate(),"click"===e.options.initialPlayback&&m.addEventListener("canplay",(function(){e.iOSVideoPlayer.checkOrientation()}))):a("only works in iOS")})),e.videojsPlayer.controlBar.fullscreenToggle.dispose(),!0===e.options.allowFullscreen&&e.enableFullscreen&&(e.customFullscreenBtn=e.videojsOrigin.createEl("div",{id:"customFullscreenToggle",role:"button",innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">Fullscreen</span></div>'}),e.customFullscreenBtn.style.cssText="text-align:right;float:right;margin-right:0em;font-size:1em;line-height:3em;outline:0;position:relative;padding:0;height:3em",e.customFullscreenBtn.className="vjs-fullscreen-control vjs-control",e.videojsPlayer.controlBar.addChild("button",{el:e.customFullscreenBtn}),e.customFullscreenBtn.addEventListener("touchend",(function(t){setTimeout((function(){if(e.isFullscreen){var n=document.getElementById(e.options.iframeVideoWrapperId).contentWindow.document.getElementById(e.an_video_ad_player_html5_api_id),i=n.style.visibility;n.style.visibility="hidden",setTimeout((function(){e.handleNormalScreen(u),n.style.visibility=i}),0)}else e.handleFullScreen(u);t.preventDefault()}),200)}))),e.iOSVideoPlayer.getCanvas().onclick=function(){!1===e.options.learnMore.enabled?(t.options.expandable||t.explicitPause(),t.click()):!0===e.options.learnMore.clickToPause&&(!1===e.isTogglePaused?t.explicitPause():t.explicitPlay())};var b,k=function(t){e.customPlayToggle.innerHTML=t?"<div><span>&#xe001;</span></div>":"<div><span>&#xe002;</span></div>"},E=function(){e.videojsPlayer.player().bigPlayButton.hide(),e.videojsPlayer.player().loadingSpinner.hide(),e.videojsPlayer.player().addClass("vjs-has-started"),e.videojsPlayer.player().removeClass("vjs-paused"),e.videojsPlayer.player().addClass("vjs-playing");try{k(!1);var n=e.enabledAudio;e.iOSVideoPlayer.initialPlay(n),a("override play method"),e.isDoneiOSInitialPlay?(i.fireEvent(m,"play"),i.fireEvent(m,"playing")):(i.fireEvent(m,"play"),i.fireEvent(m,"playing"),e.isDoneiOSInitialPlay=!0),t.isPlayingVideo=!0,e.isTogglePaused=!1}catch(e){s(e)}},w=function(){e.isTogglePaused||t.isCompleted||t.isEnded||(!1!==e.options.showBigPlayButton&&(!0===(t.options.sideStream&&t.options.sideStream.enabled&&t.options.sideStreamObject&&t.options.sideStreamObject.isActivated)&&!0===t.options.showPlayToggle&&1==t.options.sideStream.dynamicBigPlayButtonOnSideStream||(e.videojsPlayer.bigPlayButton.show(),e.videojsPlayer.player().bigPlayButton.el().style.display="block")),e.iOSVideoPlayer.pauseVideo(),a("override pause method"),k(!0),t.isPlayingVideo=!1,e.isTogglePaused=!0,i.fireEvent(m,"pause"))};e.options.vpaid?(b=function(e){e&&0===e.readyState&&e.load()},m.play=function(){b(m),E()},m.pause=function(){w()},e.videojsPlayer.one("vpaid.AdStarted",(function(){b(m)})),e.videojsPlayer.one("an.readytogovpaid",(function(){e.iOSVideoPlayer.activateAudio(),b(m)}))):(m.play=E,m.pause=w),e.videojsPlayer.controlBar.el().ontouchend=function(){},e.videojsPlayer.controlBar.playToggle.dispose(),e.customPlayToggle=e.videojsOrigin.createEl("div",{id:"customPlayToggle",role:"button","aria-live":"polite",tabindex:"0",innerHTML:"<div><span>&#xe002;</span></div>",width:"5em"}),e.customPlayToggle.style.cssText="float:left;font-family:VideoJS;font-size:1.5em;line-height:2;width:3em;height:100%;text-align:center",e.videojsPlayer.controlBar.addChild("button",{el:e.customPlayToggle}),e.videojsPlayer.controlBar.el().insertBefore(e.customPlayToggle,e.videojsPlayer.controlBar.currentTimeDisplay.el()),e.customPlayToggle.ontouchend=function(n){!1===e.isTogglePaused?t.explicitPause():t.explicitPlay(),n.preventDefault()},e.customPlayToggle.onclick=function(){!1===e.isTogglePaused?t.explicitPause():t.explicitPlay()},e.videojsPlayer.controlBar.muteToggle.el().ontouchend=function(){e.enabledAudio?(e.iOSVideoPlayer.stopAudio(),e.enabledAudio=!1,e.videojsPlayer.controlBar.muteToggle.el_.style.opacity="0.3",t.dispatchEventToAdunit({name:"video_mute"})):(e.iOSVideoPlayer.hearAudio(),e.enabledAudio=!0,e.videojsPlayer.controlBar.muteToggle.el_.style.opacity="1",t.dispatchEventToAdunit({name:"video_unmute"}),!0===e.isTogglePaused&&t.explicitPause())},e.videojsPlayer.controlBar.muteToggle.el().onclick=function(){e.enabledAudio?(e.iOSVideoPlayer.stopAudio(),e.enabledAudio=!1,e.videojsPlayer.controlBar.muteToggle.el_.style.opacity="0.3"):(e.iOSVideoPlayer.hearAudio(),e.enabledAudio=!0,e.videojsPlayer.controlBar.muteToggle.el_.style.opacity="1",!0===e.isTogglePaused&&t.explicitPause())},e.videojsPlayer.one("loadedmetadata",(function(n){if(!1===e.options.showPlayToggle&&e.videojsPlayer.controlBar.playToggle.hide(),!1===e.options.showBigPlayButton&&e.videojsPlayer.bigPlayButton.hide(),!1===e.options.showMute?e.videojsPlayer.controlBar.muteToggle.hide():(e.videojsPlayer.controlBar.muteToggle.show(),e.videojsPlayer.controlBar.muteToggle.el_.style.opacity="0.3"),!0===e.options.allowFullscreen&&(e.customFullscreenBtn.style.display="none"),!0===e.options.showMute&&e.videojsPlayer.controlBar.muteToggle.show(),e.options.targetElement.addEventListener("outstream-impression",(function(){!0===e.options.allowFullscreen&&(e.customFullscreenBtn.style.display="block"),!0===e.options.showMute&&e.videojsPlayer.controlBar.muteToggle.show()})),!t.options.vpaid){t.isReadyToExpandForMobile=!0,t.videoObjectId=n.currentTarget.id,a("loadedmetadata"),a("video.js is ready to play"),e.videojsPlayer.tech.removeControlsListeners();var i=n.currentTarget.videoWidth,r=i/n.currentTarget.videoHeight;i>0?(t.resizeVideo(r,e.shouldConsiderHeightOfDevice),"function"==typeof e.callbackForAdUnit.cbWhenReady&&e.callbackForAdUnit.cbWhenReady(t)):(t.resizeVideo(0,e.shouldConsiderHeightOfDevice),e.callbackForAdUnit.cbWhenReady(t))}})),t.customSkinning.render(e,e.videojsPlayer,u.contentWindow.document,!0),c(f,m),function(){var n=t.options.playerSkin.controlBarHeight,i=e.videojsPlayer,r=new l;r.init(t.options.data.adIcons);var o=r.getIcons();if(o&&(!o||0!==o.length)){var a=t.options.disableTopBar?0:24,s=n;i.controlBar.el_.style.zIndex=10,t.test("adIconOffset",r),i.on("timeupdate",(function(){if(!t.options.vpaid||t.options.showVpaidIcons){var e=1e3*Math.round(i.player().currentTime()),n=1e3*Math.round(i.player().duration());o&&o.length>0&&r.renderIcons((function(e){var n={};n.name=e,t.dispatchEventToAdunit(n)}),(function(e){t.options.expandable||t.explicitPause(),t.click(e,!1)}),i.player().el_,a,s,e,n)}}))}}(),e.options.vpaid&&e.videojsPlayer.trigger("an.doneInitialize"),e.options.endCard.enabled&&(t.endCard=new d(e.options.endCard,e.videojsPlayer,t)),e.videojsPlayer.on("concealControls",(function(){var t=e.videojsPlayer.player().controlBar;if(!0===e.options.disableCollapse.enabled&&!0===e.options.disableCollapse.hideControlBar&&!1===e.options.disableCollapse.replay&&(t.hide(),e.options.sideStreamObject.isActivated)){var n=parseInt(e.options.targetElement.childNodes[0].style.height)>1?0:1,r=parseInt(e.options.targetElement.childNodes[n].style.height);e.options.targetElement.childNodes[n].style.height=r-30+"px"}t&&!t.concealed&&(t.currentTimeDisplay&&t.currentTimeDisplay.hide(),t.durationDisplay&&t.durationDisplay.hide(),t.timeDivider&&t.timeDivider.hide(),t.muteToggle&&t.muteToggle.hide(),t.playToggle&&t.playToggle.hide(),t.fullscreenToggle&&t.fullscreenToggle.hide(),t.progressControl&&t.progressControl.hide(),t.volumeControl&&t.volumeControl.hide(),!1===i.isEmptyAndObject(e.customPlayToggle)&&(e.customPlayToggle.style.display="none"),!1===i.isEmptyAndObject(e.customFullscreenBtn)&&(e.customFullscreenBtn.style.display="none"),e.savedBackgroundColorForBottomBar=t.el_.style.backgroundColor,e.savedBackgroundForBottomBar=t.el_.style.background,t.concealed=!0)})),e.videojsPlayer.on("revealControls",(function(){var t=e.videojsPlayer.player().controlBar;t&&t.concealed&&("bar"!==e.options.showProgressBar&&!1!==e.options.showProgressBar&&(t.currentTimeDisplay&&t.currentTimeDisplay.show(),t.durationDisplay&&t.durationDisplay.show(),t.timeDivider&&t.timeDivider.show()),t.muteToggle&&e.options.showMute&&t.muteToggle.show(),t.playToggle&&e.options.showPlayToggle&&t.playToggle.show(),t.fullscreenToggle&&e.options.allowFullscreen&&t.fullscreenToggle.show(),!1!==e.options.showProgressBar&&"text"!==e.options.showProgressBar&&t.progressControl&&t.progressControl.show(),!1===i.isEmptyAndObject(e.customPlayToggle)&&(e.customPlayToggle.style.display="block"),!1===i.isEmptyAndObject(e.customFullscreenBtn)&&(e.customFullscreenBtn.style.display="block"),t.el_.style.backgroundColor=e.savedBackgroundColorForBottomBar,t.el_.style.background=e.savedBackgroundForBottomBar,t.concealed=!1)}))}}}},2582:(e,t,n)=>{"use strict";var i=n(9724).v,r=function(e){i.debug("Video Player: "+e)},o=n(8679);e.exports=function(e,t){return{createIframeAndRequiredObject:function(n){i.log("Video Player: createIframeAndRequiredObject");var a=e.options,s=document.createElement("iframe");s.src="about:blank",a.targetElement.appendChild(s),s.style.width=a.width+"px",s.style.height=a.height+"px",s.id=a.iframeVideoWrapperId,s.setAttribute("allowfullscreen","true"),s.setAttribute("webkitallowfullscreen","true"),s.setAttribute("mozallowfullscreen","true"),s.contentWindow.document.open(),s.contentWindow.document.write("<html></html>"),s.contentWindow.document.close(),void 0!==a.enableInlineVideoFullscreenButton&&(e.enableFullscreen=a.enableInlineVideoFullscreenButton);var l=s.contentWindow.document,d=s.contentWindow.window;r("Creating and styling top chrome bar");var c=l.createElement("div");c.id="top_chrome",c.style.height=a.playerSkin&&"number"==typeof a.playerSkin.dividerHeight?e.topChromeHeight-a.playerSkin.dividerHeight+"px":e.topChromeHeight-1+"px",c.style.width=a.width+"px",c.style.marginRight="auto",c.style.marginLeft="auto",c.className="video-js vjs-default-skin",r("Generating and styling video object");var u=l.createElement("video");if(u.id=e.an_video_ad_player_id,u.className="video-js vjs-default-skin",u.style.marginRight="auto",u.style.marginLeft="auto",c.style["z-index"]=u.style["z-index"]+1,!a.vpaid){r("Generating source object");var p=l.createElement("source");p.type="video/mp4",p.src=a.videoUrl,u.appendChild(p)}if(r("Injecting required elements into iframe"),a.disableTopBar||l.body.appendChild(c),l.body.appendChild(u),d.videojs=e.videojsOrigin,l.body.style.margin="0px",l.body.style.overflow="hidden",a.vpaid){var h=l.createElement("script");h.innerHTML=t.videojs_vpaid,l.head.appendChild(h)}e.options.verifications?new o(e.options.verifications,{parentDoc:l,videoElement:u,viewableImpression:e.options.viewableImpression,adServingId:e.options.adServingId,player:t}).then((function(e){t.verificationManager=e,t.verificationManager&&(t.verificationManager.init(),t.verificationManager.start()),n(s)})):n(s)}}}},5418:(e,t,n)=>{"use strict";var i=n(9724).v,r=function(e){i.debug("iOSInlineVideoPlayer :: iOSInlineCore: "+e)},o=function(e){i.verbose("iOSInlineVideoPlayer :: iOSInlineCore: "+e)};const a=n(2067);e.exports=function(){var e,t,n,s,l,d,c,u,p,h,v,f,m,g,y,A,b,k,E,w,T,S,I,C,P,x=!1,j=!1,_=0,V={keepWidth:null,keepHeight:null};this.setPubOptions=function(e){P=e},this.renderVideo=function(r,a){i.log("iOSInlineVideoPlayer: renderVideo"),navigator.appVersion.indexOf("Mobile")>-1?(C=r.cbTimeUpdate,d=r.mediaUrl,A=r.divArea,y=r.cbWhenVideoComplete,b=r.targetElement,E=r.iframeVideoWrapper,T=r.el_wholeArea,o("generating initial canvas object"),(e=document.createElement("canvas")).style["image-rendering"]="auto",A.appendChild(e),A.style.width="100%",A.style.height="100%",V.keepWidth=e.style.width,V.keepHeight=e.style.height,void 0!==r.videoElement?t=r.videoElement:(o("creating video tag"),t=document.createElement("video"),n=document.createElement("source"),t.style.display="none",t.autoplay=!1,t.preload="auto",t.controls=!0,n.src=d,t.appendChild(n),A.appendChild(t)),o("preparing audio tag"),s=document.createElement("audio"),l=document.createElement("source"),P.preloadInlineAudioForIos&&!P.vpaid&&this.activateAudio(),c=e.getContext("2d"),Date.now(),p=!1,h=!0,v=.3,f=!1,m=!1,g=99999999,o("renderVideo callback"),a(!0)):a(!1)};var N=function(e){o("saveCSS");var t={};for(var n in{position:"",width:"",height:"",top:"",left:"",marginRight:"",transform:"",background:""})t[n]=e.style[n];return t},D=function(e,t){for(var n in o("loadCSS"),t)e.style[n]=t[n]},M=function(n){var i=t.videoWidth/t.videoHeight,r=0,o=0,a=P.sideStream&&P.sideStream.enabled&&P.sideStreamObject&&P.sideStreamObject.isActivated;if(!n&&a){var s,l,d=P.sideStream.width,c=P.sideStream.height,u=0;P.disableTopBar||(u=24),c-=30+u,d||c||(d=P.width,c=P.mediaHeight),d&&c?(s=d,l=c):(s=d||c/i,l=c||d/i),r=Math.round(Math.min(l*i,s)),o=Math.round(Math.min(s/i,l))}else r=e.parentElement.parentElement.style.width.replace("px",""),o=e.parentElement.parentElement.style.height.replace("px","");return{width:r,height:o}},O=function(t){var n=M(t).width,i=M(t).height;t?(e.width=n,e.height=i):(e.width=n,e.height=P.mediaHeight)},R=function(){var n=e.height/t.videoHeight*t.videoWidth,i=e.height,r=(e.width-n)/2,o=0;if(n>e.width){var a=e.width/t.videoWidth*t.videoHeight;r=0,o=Math.abs(e.height-a)/2,c.drawImage(t,r,o,e.width,a)}else c.drawImage(t,r,o,n,i)};function U(e){var n=0,i=e-_;if(j=!0,n=0===_||i>500?0:i,_=e,function(e){var n;t.currentTime=t.currentTime+e,O(m),n=Math.abs(s.currentTime-t.currentTime),!1===h&&n>=v&&n<=g&&(t.currentTime=s.currentTime+e),R(),C()}(n/=1e3),t.currentTime>=t.duration){if(o("close checking by iOSInlinePlayer"),!1!==h)return o("closed by iOSInlinePlayer"),y(),j=!1,void window.cancelAnimationFrame(u);if(s.currentTime>=s.duration)return o("closed with audio by iOSInlinePlayer"),y(),j=!1,void window.cancelAnimationFrame(u)}!1===p?u=window.requestAnimationFrame(U):(j=!1,window.cancelAnimationFrame(u))}var L=function(){this.resumeVideo()},B=function(){return{width:window.innerWidth,height:window.innerHeight-P.playerSkin.controlBarHeight,top:0,left:0}},F=function(){b.style.backgroundColor="black",b.style.width="100%",b.style.height="100%",b.style.position="fixed",b.style.top="0px",b.style.left="0px",b.style.zIndex="999999",b.style.background="rgba(0,0,0,1)",b.style.transition="height 0s ease",T.style.background="rgba(0,0,0,1)",e.style.background="rgba(0,0,0,1)",E.style.background="rgba(0,0,0,1)"},W=function(){D(b,k),b.style.height=B().height+"px"},H=function(e){if(e.target.videoWidth,e.target.videoHeight,E.hasOwnProperty("iOS14ResumeTime"))try{var t=E.iOS14ResumeTime;e.target.currentTime=t,s.currentTime=t}catch(t){e.target.currentTime=0,r(t)}finally{E.iOS14ResumeTime=0}},z=function(){var e=a.isPortrait(),t=B(),n=t.width,i=t.height,r=t.top,o=t.left,s=0;const l=E.contentWindow.document.getElementById("top_chrome");if(l){const t=l.nextSibling,i=t.getElementsByClassName("top-bar-text")[0],r=t.getElementsByClassName("top-bar-text")[1],o=t.getElementsByClassName("top-bar-text")[2];s=parseInt(l.style.height),l.style.display="none",i.style.display="block",r.style.display="block",o.style.display="block",e||(i.style.display="none",r.style.display="none",o.style.display="none",l.style.display="block",l.style.width=n+"px")}E.style.position="absolute",E.style.width="100%",E.style.height="100%",E.style.top=r+"px",E.style.left=o+"px",E.style.marginRight="",E.style.transform="",T.style.width=n+"px",T.style.height=e?String(i)+"px":String(i-s)+"px",T.style.marginLeft="",T.style.marginRight=""},q=function(){m=!1,b.ontouchmove=function(){return!0},e.ontouchmove=function(){return!0},T.ontouchmove=function(){return!0},W(),D(b,k),D(E,w),D(T,S),D(e,I)};this.exitFullscreeenAsCanvas=function(){q(),!0===p&&this.resizeAndRedraw()},this.enterFullscreenAsCanvas=function(){b.ontouchmove=function(){return!1},e.ontouchmove=function(){return!1},T.ontouchmove=function(){return!1},k=N(b),w=N(E),S=N(T),I=N(e),b.style.marginLeft="0px",b.style.marginRight="0px",b.style.marginTop="0px",b.style.marginBottom="0px",m=!0,F(),z(),!0===p&&this.resizeAndRedraw()},this.resizeAndRedraw=function(){O(m),R()},this.initialPlay=function(e){this.play(e)},this.play=function(e){j||(p=!1,e&&s&&s.play&&s.play(),u=window.requestAnimationFrame(U))},this.resumeVideo=function(){p=!1,s&&s.play&&s.play(),u=window.requestAnimationFrame(U)},this.pauseVideo=function(){p=!0,s.pause(),window.cancelAnimationFrame(u),j=!1},this.activateAudio=function(){r("activateAudio : "+t.src),s.style.display="none",s.autoplay=!1,s.preload="auto",s.controls=!0,l.src=t.src,s.appendChild(l),A.appendChild(s),s.load()},this.hearAudio=function(){if(f)return r("resume audio"),h=!1,s.currentTime=t.currentTime,void(p||s.play());s.addEventListener("playing",(function(){r("first playing audio"),s.currentTime=t.currentTime+v,h=!1,f=!0})),!1===P.preloadInlineAudioForIos&&this.activateAudio(),s.currentTime=t.currentTime,p||s.play()},this.stopAudio=function(){r("pausing audio"),s.pause(),h=!0},this.checkOrientation=function(){x&&!P.disableCollapse.enabled||(m?(W(),F(),z(),!0===p&&this.resizeAndRedraw()):(O(m),R()))},this.initiate=function(){t.addEventListener("canplaythrough",H.bind(this)),t.addEventListener("webkitendfullscreen",L,!1),t.load(),t.pause()},this.getCanvas=function(){return e},this.destroy=function(){window.cancelAnimationFrame(u),m&&q(),x=!0},this.resizeCanvas=O,this.redrawCanvas=R}},5623:(e,t,n)=>{"use strict";var i,r=n(9724).v,o=function(e){r.debug("[UserSync]",e)},a=function(){o("initiated"),this.isComplete=!1,this.run=function(e){o("start UserSync");try{if(this.isComplete)o("stop UserSync because it's already done");else{var t=e.userSyncTargetElement?e.userSyncTargetElement:e.targetElement;e&&e.usersync_url&&"string"==typeof e.usersync_url&&""!==e.usersync_url&&t&&"object"==typeof t?(this.executeUserSync(e,t),this.isComplete=!0,o("done")):o("stop UserSync because it needs proper options.usersync_url and options.targetElement/options.userSyncTargetElement")}}catch(e){o("error: "+e)}},this.executeUserSync=function(e,t){if(t.ownerDocument&&t.ownerDocument.getElementById("apn_user_sync"))o("stop UserSync because it's already done");else{o("decode UserSync url");var n=decodeURIComponent(e.usersync_url);this.prepareIframeAndScript(n,t)}},this.prepareIframeAndScript=function(e,t){o("prepareIframeAndScript: "+e);var n=document.createElement("iframe");n.id="apn_user_sync",n.src=e,n.width="1",n.height="1",n.frameborder="0",n.scrolling="no",n.marginheight="0",n.marginwidth="0",n.topmargin="0",n.leftmargin="0",n.style.position="absolute",n.style.overflow="hidden",n.style.clip="rect(0 0 0 0)",n.style.height="1px",n.style.width="1px",n.style.margin="-1px",n.style.padding="0",n.style.border="0",t.appendChild(n),o("UserSync iframe injected into target element: "+t.id)}},s={sharedInstance:function(){return i||(i=new a),i}};e.exports=s},2067:(e,t,n)=>{"use strict";var i="PlayerManager_Utils",r=n(9724).v,o=function(e){r.verbose(e,i)},a=function(){return/iphone/i.test(navigator.userAgent.toLowerCase())},s=function(){return a()||/ipad/i.test(navigator.userAgent.toLowerCase())},l=function(){return navigator.appVersion.indexOf("Mobile")>-1||navigator.appVersion.indexOf("Android")>-1},d=function(e){var t=!1;try{t=!isNaN(parseFloat(e))&&isFinite(e)}catch(e){o(e)}return t};e.exports={isPortrait:function(){return window.innerHeight>window.innerWidth},isIphone:a,isIos:s,isIpad:function(){return navigator.userAgent.toLowerCase().match(/mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2},isAndroid:function(){return/android/i.test(navigator.userAgent.toLowerCase())},isMobile:l,isSafari:function(){return/version\/([\w\.]+).+?(mobile\s?safari|safari)/i.test(navigator.userAgent.toLowerCase())},getIOSVersion:function(){var e=navigator.userAgent.match(/OS (\d+)_/i);if(e&&e[1])return e[1]},refreshVideoLookAndFeel:function(e,t){!t.isSkipped&&t.isExpanded&&(e.autoInitialSize&&(e.width=e.targetElement.offsetWidth),t.resizeVideo(-1,l()),e.targetElement.style.height=e.height+"px")},fireEvent:function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),n.eventName=t,e.dispatchEvent(n)},DelayEventHandler:function(){this.queue=[],this.id="",this.isSuppress=!1,this.isPaused=!1,this.isCompleted=!1;var e=!1;this.push=function(t){!1!==this.isSuppress||"function"!=typeof t?e?e=!1:!1===this.isPaused&&this.queue.push(t):t()},this.start=function(){o("delay event starts");var e=this,t=function(){if(!1===e.isSuppress){var n=e.queue.shift();n&&"function"==typeof n&&n()}setTimeout((function(){!1===e.isCompleted&&t()}),100)};t()},this.ImmediateStop=function(){this.isCompleted=!0},this.lazyTerminate=function(){var e=this;this.queue.push((function(){e.ImmediateStop()}))},this.suppress=function(e){this.isSuppress=e},this.clearQueue=function(){this.queue=[]},this.ignoreNextQueue=function(){e=!0}},isEmpty:function(e){return void 0===e||""===e||!1===e||null===e},unique:function(){var e={};return{pushAndCheck:function(t,n){var i=t+"_"+n;return!e[i]&&(e[i]=!0,!0)}}},getMsecTime:function(e,t){try{var n=e.indexOf("%");if(n>0){if(t&&t>0){var i=Number(e.substring(0,n));return i>=0&&i<=100?Math.round(t*(i/100)):-1}return-1}var r=(n=e.indexOf("."))>0?Number(e.substring(n+1).substr(0,3)):0;n>0&&(e=e.substring(0,n));var a=e.split(":");if(3===a.length){for(var s=0;s<a.length;s++){var l=a[s];if(l&&!1===d(l)||parseInt(l)<0)return-1}var c=1e3*(3600*Number(a[0])+60*Number(a[1])+Number(a[2]))+r;return t?c<=t?c:-1:c}return-1}catch(e){return o(e),-1}},isNumeric:d,makeIframeFlexbileSize:function(e){s()&&e.options.enableInlineVideoForIos&&setTimeout((function(){var t=e.iframeVideoWrapper?e.iframeVideoWrapper:document.getElementById(e.options.iframeVideoWrapperId);t.style.width="",t.style.height=""}),0)},isEmptyAndObject:function(e){if(null==e)return!0;if(0===e.length)return!0;if(""===e)return!0;if("object"!=typeof e)return!1;if(e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},elementsOverlap:function(e,t){if(!(e&&t&&e.getBoundingClientRect&&t.getBoundingClientRect))return"Utils.elementsOverlap expects two html elements",r.info("Utils.elementsOverlap expects two html elements",i),!1;var n=e.getBoundingClientRect(),o=t.getBoundingClientRect();return!(n.right<o.left||n.left>o.right||n.bottom<o.top||n.top>o.bottom)},convertTimeSecondsToString:function(e){var t=1e3*e,n=parseInt(t%1e3),i=parseInt(t/1e3%60),r=parseInt(t/6e4%60),o=parseInt(t/36e5%24);return(o=o<10?"0"+o:o)+":"+(r=r<10?"0"+r:r)+":"+(i=i<10?"0"+i:i)+"."+(n<10?"00"+n:n<100?"0"+n:n)},isAttributionApiAvailable:function(){var e=window.document.featurePolicy;return e&&e.allowedFeatures&&e.allowedFeatures().includes("attribution-reporting")?(o("Attribution reporting is SUPPORTED"),!0):(o("Attribution reporting is NOT SUPPORTED"),!1)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return"y"===e?(3&t|8).toString(16):t.toString(16)}))},MIN_DESKTOP_WIDTH:400}},4509:(e,t,n)=>{"use strict";var i=n(2067),r=n(9724).v,o=function(e){r.debug("[AdIcon]",e)};e.exports=function(e){this.icons=[],this.init=function(e){o("initalize ad icon"),e&&(this.icons=function(e){for(var t=0;t<e.length;t++){var n=e[t].StaticResource;if(n&&n.type){o("setContents for "+e[t].program);var i=e[t].width,r=e[t].height;["image/gif","image/jpeg","image/png"].indexOf(n.type.toLowerCase())>=0&&(e[t].content="<img src='"+n.src+"' width='"+i+"' height='"+r+"'",e[t].altText&&(e[t].content+=" alt='"+e[t].altText+"'"),e[t].hoverText&&(e[t].content+=" title='"+e[t].hoverText+"'"),e[t].content+=">"),e[t].isDisplay=!1}}return e}(e))},this.getIcons=function(){return this.icons},this.removeIcons=function(e){var t,n=this.getIcons();for(t=0;t<n.length;t++){var i=n[t].htmlReference;i&&e.removeChild(i)}this.icons=[]},this.renderIcons=function(t,n,r,a,s,l,d,c){var u=this.getIcons(),p=this;if(s=0!==s?s+5:s,u&&!(u.length<1)){var h,v=function(e){return function(){n(e.IconClickThrough),t("IconClickTracking_"+e.program),o("fire IconClickTracking for "+e.program)}},f=function(t){if(setTimeout((function(){p.resolveCollision(t),o("start to check a collision of ad icon")}),500),e.options.useMsSkin)var n=setInterval((function(){e.adVideoPlayer&&e.adVideoPlayer.duration()-e.adVideoPlayer.currentTime()<.1&&clearInterval(n);for(var i=0;i<t.length;i++){var r=t[i];if("bottom"===r.yPosition&&"right"===r.xPosition)try{r.ignoreRedraw=!0;var o=e.iframeVideoWrapper?e.iframeVideoWrapper.contentWindow.document.getElementById("skip_Button_Wrapper"):document.getElementById(html5PlayerSelf.options.iframeVideoWrapperId).contentWindow.document.getElementById("skip_Button_Wrapper");if(o){var a=o.offsetParent.offsetHeight-o.offsetTop+4+"px";r.htmlReference.style.bottom!==a&&(r.htmlReference.style.bottom=a)}}catch(e){}}}),250)},m=function(e,t,n,i){var o=0,a="left",s=r.ownerDocument.getElementsByClassName("vjs-ad-learnmore-tl");if(s&&0!==s.length||(a="right",s=r.ownerDocument.getElementsByClassName("vjs-ad-learnmore-tr")),s&&s.length>0){var l=s[0],d=l.offsetTop+l.offsetHeight,c=l.offsetLeft+l.offsetWidth;e<d&&("left"===n?"left"===a?t<c&&(o=d-e):t+i>l.offsetLeft&&(o=d-e):"left"===a?c>t&&(o=d-e):l.offsetLeft>t&&(o=d-e))}return o};for(h=0;h<u.length;h++){var g,y,A=u[h],b=A.htmlReference;if(A&&(A.duration&&(g=i.getMsecTime(A.duration)),A.offset&&(y=i.getMsecTime(A.offset))),!(g<=0||l<y||0===l)){var k;if(d>0&&l>=d){for(k=0;k<u.length;k++){var E=u[k],w=E.htmlReference;w&&(w.style.display="none",E.isDisplay=!1)}return void o("hide whole ad icons because video is finished by "+l+"ms")}if(l>y+g&&A.isDisplay&&b)b.style.display="none";else if(!A.isDisplay){var T,S="left",I=Number(I)<0?0:I,C="top",P=Number(I)<0?0:I,x=Number(a)>0?a:0,j=0,_=0,V=Number(s)>0?s:0;if(c){var N=e.iframeVideoWrapper?e.iframeVideoWrapper.contentWindow.document.getElementById("skip_Button_Wrapper"):document.getElementById(html5PlayerSelf.options.iframeVideoWrapperId).contentWindow.document.getElementById("skip_Button_Wrapper");if(N){var D=e.options.skippable.skipLocation;"top-left"===D?j+=N.offsetHeight+4:"top-right"===D?_+=N.offsetHeight+8:V+=N.offsetHeight+8}}A&&"left"===A.xPosition&&(S="left",I=0),A&&"right"===A.xPosition&&(S="right",I=0),A&&Number(A.xPosition)>=0&&(S="left",I=Number(A.xPosition)),A&&"bottom"===A.yPosition&&(C="bottom",P=0,P+=V),A&&"top"===A.yPosition&&(C="top",P=0,P+=x),A&&Number(A.yPosition)>=0&&(C="top",P=Number(A.yPosition),P+=x),c&&A&&"top"===C&&(P+=m(P,I,S,A.width),"left"===S&&(P+=j),"right"===S&&(P+=_)),b?(T=b,o("reuse ad icon for "+A.program)):(T=r.ownerDocument.createElement("div"),o("create ad icon for "+A.program)),r.appendChild(T),T.setAttribute("name","adicon"),T.id="adicon_"+A.program,T.innerHTML=A.content,T.style.position="fixed",T.style.cursor="hand",T.style[S]=I+"px",T.style[C]=P+"px",c&&"right"===S&&"bottom"===C||(T.style.zIndex=2147483647),T.style.display="block",T.style.width=A.width+"px",T.style.height=A.height+"px",A.isDisplay=!0,A.htmlReference=T,A.document=r.ownerDocument,A.originalStyle={},A.originalStyle[S]=I,A.originalStyle[C]=P,A.clickRegisterd||(T.addEventListener("click",v(A)),A.clickRegisterd=!0,o("ad icon click handler registered for "+A.program)),u[h]=A,t&&"function"==typeof t&&(t("IconViewTracking_"+A.program),o("check and fire IconViewTracking for "+A.program)),h===u.length-1&&f(u)}}}}},this.elementsFromPoint=function(e,t,n){try{if(n.elementsFromPoint)return n.elementsFromPoint(e,t);var i=[],r=void 0;do{r!==n.elementFromPoint(e,t)?(r=n.elementFromPoint(e,t),i.push(r),r&&r.style&&(r.style.pointerEvents="none")):r=!1}while(r);return i.forEach((function(e){var t;return e&&e.style&&(t=e.style.pointerEvents="all"),t})),i}catch(e){return o(e),null}};var t=function(e){var t=0;return e&&Number(e)>=0&&(t=Number(e)),e&&"string"==typeof e&&e.toLowerCase()&&e.indexOf("px")&&(t=(t=Number(e.replace("px","")))>0?t:0),t};this.resolveCollision=function(e){var n,i=this,r=function(e,n){var i;for(i=0;i<e.length;i++){var r=e[i];if(r&&"adicon"===r.getAttribute("name")&&n!=r)return{result:!0,width:t(r.clientWidth),height:t(r.clientHeight),left:t(r.style.left),right:t(r.style.right)}}return{result:!1,width:0,height:0,left:0,right:0}},a=function(e,t,n,o,a,s,l,d,c){var u,p;"left"===e&&(u=t-s-1,p=n-s-1),"right"===e&&(u=t+s+1,p=n+s+1);var h=i.elementsFromPoint(u,o,d),v=i.elementsFromPoint(p,o,d),f=i.elementsFromPoint(p,a,d),m=i.elementsFromPoint(u,a,d);return{newSpaceOwner_topLeft:r(h,c),newSpaceOwner_topRight:r(v,c),newSpaceOwner_bootomRight:r(f,c),newSpaceOwner_bootomLeft:r(m,c),next_left:u,next_right:p}};for(n=1;n<e.length;n++){var s=e[n];if(s.htmlReference){var l=s.htmlReference.getBoundingClientRect(),d=l.left,c=l.top,u=l.right,p=l.bottom,h=i.elementsFromPoint(d,c,s.document),v=i.elementsFromPoint(u,c,s.document),f=i.elementsFromPoint(u,p,s.document),m=i.elementsFromPoint(d,p,s.document),g=r(h,s.htmlReference),y=r(v,s.htmlReference),A=r(f,s.htmlReference),b=r(m,s.htmlReference),k=s.program;if(g.result||A.result||y.result||b.result){o("collision detection starts for ad icon program - "+k);var E=g.width||A.width||y.width||b.width,w=(g.height||A.height||y.height||b.height,!1),T=a("left",d,u,c,p,E+=g.left||A.left||y.left||b.left,0,s.document,s.htmlReference);!1===w&&!1===T.newSpaceOwner_topLeft.result&&!1===T.newSpaceOwner_topRight.result&&!1===T.newSpaceOwner_bootomRight.result&&!1===T.newSpaceOwner_bootomLeft.result&&T.next_left>=0&&(o("collision resolved by moving icon to left for ad icon program - "+k),s.htmlReference.style.left=T.next_left+"px",w=!0),T=a("right",d,u,c,p,E,0,s.document,s.htmlReference),!1===w&&!1===T.newSpaceOwner_topLeft.result&&!1===T.newSpaceOwner_topRight.result&&!1===T.newSpaceOwner_bootomRight.result&&!1===T.newSpaceOwner_bootomLeft.result&&(o("collision resolved by moving icon to right for ad icon program - "+k),s.htmlReference.style.left=T.next_left+"px",w=!0),!1===w&&(o("hide ad-icon due to no way to avoid collision for ad icon program - "+k),s.htmlReference.style.display="none"),o("collision detection end for ad icon program - "+k)}}}},this.redraw=function(e){var t;for(t=0;t<this.icons.length;t++){var n=this.icons[t];if(!n.ignoreRedraw){var i=n.htmlReference,r=n.originalStyle;if(r){var o=r.bottom;(o||0===o)&&("bottom"===o&&(o=0),i.style.bottom=o+e+"px")}}}}}},5690:(e,t,n)=>{"use strict";var i=n(2067),r=n(9724).v,o=n(3837).y,a="VPAID AdError reported from JS VPAID player",s="VPAID AdError: ",l=1001,d="Invalid video source detected",c=function(e,t){r.error("["+(new Date).toISOString()+"] "+e,t)},u=function(e){r.warn("JS VPAID: "+e)},p=function(e){r.info("JS VPAID: "+e)},h=function(e){r.log("JS VPAID: "+e)},v=function(e){r.debug("JS VPAID: "+e)},f=function(e){r.verbose("JS VPAID: "+e)};e.exports=function(e){var t=e.dispatchEventToAdunit.bind(e),n=e.options,r=e.videoPlayerObj,m=n.videoUrl,g=e.callbackForAdUnit,y=e.iframeVideoWrapper,A=!1,b=o().browser.name.toLowerCase();!i.isIos()&&!i.isAndroid()&&y&&n.overlayPlayer&&"auto"===n.initialPlayback&&("edge"===b||"ie"===b?y.style.visibility="hidden":y.style.display="none"),n.plugins={"ads-setup":{}},n.vpaidImpressionFired=!1,n.isWaterfall&&n.firstAdAttempted&&(n.delayExpandUntilVPAIDImpression||n.isExpanded)&&(n.delayExpandUntilVPAIDInit=!1),r.plugin("ads-setup",(function(r){v(r);var o=5e3;void 0!==n.vpaidTimeout&&(o=n.vpaidTimeout);var k={error:c,warn:u,info:p,log:h,debug:v,verbose:f},E=i.isIos()||i.isAndroid(),w=this;e.options.overlayPlayer&&e.resizeVideo();var T=!1,S=function(){e.adVideoPlayer.tag&&"undefined"===e.adVideoPlayer.tag.getAttribute("src")&&(T=!0)};n.xandrSdk&&e.adVideoPlayer.tag&&e.adVideoPlayer.tag.addEventListener("loadstart",S);var I=null;n.xandrSdk&&n.contentPlayer&&(I=n.contentPlayer.muted()||n.debug&&n.debug.disableVolumeSync?0:n.contentPlayer.volume());var C=w.vastClient({url:"",jsVpaidUrl:m,playAdAlways:!0,adCancelTimeout:o,adsEnabled:!0,adParameters:n.adParameters,clickUrl:n.clickUrls[0],delayExpandUntilVPAIDInit:n.delayExpandUntilVPAIDInit,terminateUnresponsiveVPAIDCreative:n.terminateUnresponsiveVPAIDCreative,disableControlsOnMouseover:E,initialAudio:n.initialAudio,loggerCallback:k,vpaidEventCallback:function(i,r){var o={AdImpression:"video_impression",AdVideoStart:"video_start",AdVideoFirstQuartile:"video-first-quartile",AdVideoMidpoint:"video-mid",AdVideoThirdQuartile:"video-third-quartile",AdVideoComplete:"video_complete",AdSkipped:"video_skip",AdClickThru:"ad-click"};if("AdImpression"===i){if(e.delayImpression)return void e.adVideoPlayer.one("dispachImpression",(function(){t({name:o[i]}),e.notifyVpaidEvent(i,r),e.options.isXandrVastPlayer&&e.callbackForAdUnit&&e.callbackForAdUnit.cbDelayEventsTracking&&e.callbackForAdUnit.cbDelayEventsTracking(!1)}));n.vpaidImpressionFired=!0}"AdClickThru"===i?r&&r.playerHandles?r.hasOwnProperty("url")&&r.url&&r.url.length>0?e.click(r.url):e.click():(t({name:"ad-click",trackClick:!0}),!e.explicitPaused&&e.options.isXandrVastPlayer&&setTimeout((function(){e.isPlayingVideo?e.pause():t({name:"video_pause"})}),60)):o[i]&&t({name:o[i]}),"AdImpression"!==i||e.delayImpression||e.options.isXandrVastPlayer&&e.callbackForAdUnit&&e.callbackForAdUnit.cbDelayEventsTracking&&e.callbackForAdUnit.cbDelayEventsTracking(!1),e.notifyVpaidEvent(i,r),"AdVideoComplete"===i&&e.adVideoPlayer.trigger("customDestroy")},delayExpandUntilVPAIDImpression:n.delayExpandUntilVPAIDImpression,vpaidEnvironmentVars:n.vpaidEnvironmentVars,overlayPlayer:n.overlayPlayer,mobileSDK:n.mobileSDK,initialPlayback:n.initialPlayback,controlBarPosition:n.controlBarPosition,isXandrVastPlayer:n.isXandrVastPlayer,initVolume:I}),P=function(){if(e.options.overlayPlayer&&!e.options.pod){var t=w,n=i.isAndroid()?1e3:500;setTimeout((function(){t.paused()&&t.tech&&t.tech.el()&&t.tech.el().src&&t.trigger("pause")}),n)}};if(w.on("reset",(function(){w.options().plugins["ads-setup"].adsEnabled?C.enable():C.disable()})),w.on("vast.adError",(function(t){if(!0!==A){A=!0,w.loadingSpinner.hide();var n=t.error;n&&n.message?(e.destroyWithoutSkip(!0,n.message,!1,901),v("JS-VPAID Error (vast.adError)"+n.message)):e.destroyWithoutSkip(!0,"VAST AdError reported from JS VPAID player",!1,901)}})),w.on("vpaid.AdVideoStart",(function(){var t=e&&e.adVideoPlayer&&e.adVideoPlayer.player?e.adVideoPlayer.player().duration():0;if(e.test("VIDLA509",t),t&&t>0)e.setVastAttribute();else{var n=!1;w.one("loadedmetadata",(function(){if(n=!0,t=e&&e.adVideoPlayer&&e.adVideoPlayer.player?e.adVideoPlayer.player().duration():0,e.test("VIDLA509",t),t&&t>0)e.setVastAttribute();else{var i=e.options.data.vastDurationMsec;i=i&&i>0?Math.round(i/1e3):0,e.test("VIDLA509-2",i),e.setVastAttribute(i)}})),setTimeout((function(){if(!1===n){var t=e.options.data.vastDurationMsec;t=t&&t>0?Math.round(t/1e3):0,e.test("VIDLA509-2",t),e.setVastAttribute(t)}}),3e3)}})),w.on("vast.adTimeout",(function(){w.loadingSpinner.hide(),e.destroyWithoutSkip(!0,a,!0,901)})),w.on("vpaid.AdError",(function(t){if(n.xandrSdk&&e.adVideoPlayer.tag&&e.adVideoPlayer.tag.removeEventListener("loadstart",S),!0!==A){A=!0,w.loadingSpinner.hide();var i=a;t.message&&(i=Array.isArray(t.message)&&null!=t.message[0]?s+t.message[0].toString():s+t.message.toString()),e.destroyWithoutSkip(!0,i,!1,901);var r=t.error;r&&r.message&&v("JS-VPAID Error (vpaid.AdError) "+r.message)}})),w.on("vast.adSkip",(function(){e.destroy(),v("vast.adSkip")})),w.on("vpaid.AdSkipped",(function(){e.destroy(),v("vpaid.AdSkipped")})),w.on("vpaid.AdIcons",(function(t){t&&t.hasOwnProperty("adIcons")&&t.adIcons||(e.options.showVpaidIcons=!0)})),w.on("vast.adsCancel",(function(){n.xandrSdk&&e.adVideoPlayer.tag&&e.adVideoPlayer.tag.removeEventListener("loadstart",S),A||(A=!0,e.destroyWithoutSkip(),v("adsCancel"))})),w.on("vpaid.AdStopped",(function(){v("vpaid.AdStopped"),!0!==n.disableCollapse.replay?(w.loadingSpinner.hide(),w.controlBar.hide(),w.bigPlayButton.hide(),e.isCompleted||(n.disableCollapse.enabled||e.destroyWithoutSkip(),e.isCompleted=!0)):e.resetVpaid()})),w.one("vpaid.AdStarted",(function(){if(n.xandrSdk&&e.adVideoPlayer.tag&&e.adVideoPlayer.tag.removeEventListener("loadstart",S),T){if(!0===A)return;return w.loadingSpinner.hide(),e.destroyWithoutSkip(!0,d,!1,l),void v("JS-VPAID Error "+d)}P(),y&&n.overlayPlayer&&("edge"===b||"ie"===b?y.style.visibility="visible":y.style.display="block"),w.loadingSpinner.hide(),n.useMsSkin&&w.trigger("volumechange")})),w.one("vpaid.AdImpression",(function(){P(),w.controlBar.show(),n.showBigPlayButton&&w.bigPlayButton.show(),n.isXandrVastPlayer&&w.paused()&&("auto"===n.initialPlayback||"click"===n.initialPlayback&&e.vpaidResumedByAdPlayer)&&setTimeout((function(){w.play()}),0),n.isXandrVastPlayer&&!n.overlayPlayer&&i.isIos()&&!e.fsApiForIosAvailable&&(w.tech&&w.tech.el_&&w.tech.el_.src||w.controlBar.fullscreenToggle&&(w.controlBar.fullscreenToggle.el_.style.display="none"))})),g.cbWhenReady){var x=function(){e.test("VIDLA509-1",""),v("callcbWhenReady (Impression, AdStarted are delivered"),e.isReadyToExpandForMobile=!0,w.tech.removeControlsListeners();var t=e.options.width/e.options.height;e.resizeVideo(t,i.isMobile()),n.isWaterfall&&n.firstAdAttempted&&n.delayExpandUntilVPAIDInit&&!n.isExpanded&&"auto"!==n.initialPlayback&&w.bigPlayButton.show(),"function"==typeof g.cbWhenReady&&g.cbWhenReady(e)},j=function(){n.delayExpandUntilVPAIDImpression?function(){var t=!1,n=w.volume(),r=!1,o=!1,a=!1,s=!1,l=function(){r&&o&&a&&!1===t&&(t=!0,setTimeout(x,500))};if(i.isIos()){w.on("timeupdate",(function(){w.player().currentTime()>0&&!1===s&&!1===e.isAlreadyPlaingForVPAID&&(s=!0,a=!0,w.pause(),l(),v("pause by timeupdate when delayExpandUntilVPAIDImpression is true"))}));var d=function(){w.player().currentTime()>0&&!1===s&&!1===e.isAlreadyPlaingForVPAID&&(s=!0,a=!0,w.pause(),l(),v("pause by timer when delayExpandUntilVPAIDImpression is true")),t||setTimeout(d,100)};setTimeout(d,100)}else w.one("vpaid.AdVideoStart",(function(){!1===e.isAlreadyPlaingForVPAID&&w.pause(),w.volume(n),a=!0,l()}));w.one("vpaid.AdStarted",(function(){r=!0,l()})),w.one("vpaid.AdImpression",(function(){o=!0,l()})),w.volume(0),e.delayEventHandler.ignoreNextQueue(),i.isIos()?(e.adVideoPlayer.trigger("play"),e.isDoneInitialPlay=!0):w.play()}():x()};n.isWaterfall&&n.firstAdAttempted?w.one("an.doneInitialize",j):n.delayExpandUntilVPAIDInit?w.one("an.readytogovpaid",j):w.one("an.doneInitialize",j)}}))}},4242:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e,t,n){var r=e,o=new t(e),a=new n(e),s=["loaded","impression"],l=["start","firstQuartile","midpoint","thirdQuartile","complete","pause","resume","bufferStart","bufferFinish","skipped","volumeChange","playerStateChange","adUserInteraction"];function d(e,t,n,i){switch(t){case"loaded":var r=new i(n.skippable,n.skipOffset,n.autoPlay,n.position);e.loaded(r);break;case"impression":e.impressionOccurred();break;case"start":e.start(n.duration,n.videoPlayerVolume);break;case"firstQuartile":e.firstQuartile();break;case"midpoint":e.midpoint();break;case"thirdQuartile":e.thirdQuartile();break;case"complete":e.complete();break;case"pause":e.pause();break;case"resume":e.resume();break;case"bufferStart":e.bufferStart();break;case"bufferFinish":e.bufferFinish();break;case"skipped":e.skipped();break;case"volumeChange":e.volumeChange(n.videoPlayerVolume);break;case"playerStateChange":e.playerStateChange(n.state);break;case"adUserInteraction":e.adUserInteraction(n.interactionType)}}return{fireEvent:function(e,t,n){s.includes(e)?r.registerSessionObserver((a=>{"sessionStart"===a.type?d(o,e,t,n):"sessionError"===a.type?i.debug("[PlayerManager_Verification_OMID]","OMID session error: "+JSON.stringify(a.data)):"sessionFinish"===a.type&&r.finish()})):l.includes(e)&&d(a,e,t)}}}},1188:(e,t,n)=>{"use strict";var i=n(4242),r="[PlayerManager_Verification_OMID]",o=n(9724).v;e.exports=function(){var e,t=!1,n=null,a=[];return{start:function(r,o,a,s){(e=new r(o)).setCreativeType("video"),e.setImpressionType("beginToRender"),e.isSupported()&&(e.start(),t=!0,n=new i(e,a,s))},dispatchEvent:function(e,t,i){n?(a.length>0&&(a.forEach((function(t){var a;a="dispatch from cache OMID event "+e,o.debug(r,a),n.fireEvent(t.eventName,t.data,i)})),a=[]),o.debug(r,"dispatch OMID event "+e),n.fireEvent(e,t,i)):(o.debug(r,"save in cache OMID event "+e),a.push({event:e,data:t}))},destroy:function(){o.debug(r,"terminate OMID session"),t&&e.finish()}}}},5365:(e,t,n)=>{"use strict";var i=n(9724).v;e.exports=function(e,t){for(var n={},r=0;r<e.length;r++){var o=e[r].vendor;o&&(n[o]=e[r].trackingEvents)}var a,s={TIMESTAMP:(new Date).toISOString(),MEDIAPLAYHEAD:null,BREAKPOSITION:null,ADCOUNT:null,TRANSACTIONID:(a=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===e?t:3&t|8).toString(16)}))),PLACEMENTTYPE:null,IFA:-1,IFATYPE:-1,CLIENTUA:null,DEVICEIP:null,LATLONG:-1,PAGEURL:function(){try{return top&&top.location&&top.location.href?top.location.href:-1}catch(e){return-1}}(),APPNAME:-1,APIFRAMEWORKS:"2,7",EXTENSIONS:-1,PLAYERCAPABILITIES:null,CLICKTYPE:null,PLAYERSTATE:null,PLAYERSIZE:null,ADPLAYHEAD:null,ASSETURI:null,PODSEQUENCE:null,CLICKPOS:-1,LIMITADTRACKING:null};return{trackEvent:function(e,r,o){i.debug("[PlayerManager_Verification_Tracking]","track verification event: "+r),n&&n[e]&&n[e].hasOwnProperty(r)&&n[e][r].forEach((function(e){var n=function(e,n){var i=e;if(n)for(var r in n)i=i.split("["+r.toUpperCase()+"]").join(encodeURIComponent(n[r]));return i=function(e){for(var n in s)if(e.indexOf("["+n+"]")>=0){var i=s[n];null===i&&(i=t?t.resolveMacro(n):-1),e=e.split("["+n+"]").join(encodeURIComponent(i))}return e}(i),i}(e,o);(new Image).src=n}))}}}},8679:(e,t,n)=>{"use strict";n(1188);var i=n(5365),r="[PlayerManager_Verifications]",o=n(9724).v;const a=n(1188);Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{enumerable:!1,value:function(e){return this.filter((function(t){return t==e})).length>0}});var s="https://adsdkprod.azureedge.net/assets/omid/v1.4.0/";if(!document.currentScript&&new URL(location.href).pathname.indexOf("/vast-player/stand_")>=0){var l=location.href.lastIndexOf("/");s=location.href.substr(0,l+1)}function d(e,t,n,i){return new Promise((function(r,o){if(n.getElementById(e))r();else{var a=n.createElement("script");a.id=e,a.onerror=function(e){o(e)},a.src=s+t,a.onload=function(){r()},i.after(a)}}))}e.exports=function(e,t){var n,s,l,c,u,p,h,v,f,m=e,g=t,y=[],A=new i(e,t.player),b={init:function(){var e;o.debug(r,"init verifications");try{e=g.parentDoc.defaultView.OmidSessionClient&&g.parentDoc.defaultView.OmidSessionClient.default}catch(e){return A.trackEvent("","verificationNotExecuted",{reason:3}),void o.error(r,"Cannot use OMSDK",e.message())}if(!e)return A.trackEvent("","verificationNotExecuted",{reason:3}),void o.error(r,"Cannot use OMSDK");n=e.AdSession,s=e.Partner,l=e.Context,c=e.VerificationScriptResource,u=e.AdEvents,p=e.MediaEvents,f=e.VastProperties;for(var t=g.parentDoc.defaultView.location.href,i=new s("Appnexus","1.4.0"),a=0;a<m.length;a++){var d=m[a],v=!0;if(d.jsResources)for(var b=0;b<d.jsResources.length;b++)if("OMID"===d.jsResources[b].framework.toUpperCase()){v=!1;var k={vendor:d.vendor,url:d.jsResources[b].url,viewableImpression:g.viewableImpression,verificationParams:d.verificationParameters,adServingId:g.adServingId,started:!1};y.push(k),o.debug(r,"verification is OMID")}d.executableResources,v&&(A.trackEvent(d.vendor,"verificationNotExecuted",{REASON:2}),o.debug(r,"verification is not OMID"))}var E=[];for(a=0;a<y.length;a++){var w=new c(y[a].url,y[a].vendor,y[a].verificationParams,"full");E.push(w)}(h=new l(i,E,t)).setVideoElement(g.videoElement),h.setServiceWindow(g.parentDoc.defaultView)},start:function(){o.debug(r,"start verifications"),(v=new a(g)).start(n,h,u,p)},dispatchEvent:function(e,t,n){o.debug(r,"try to dispatch OMID event: "+e+", data: ",t),v&&v.dispatchEvent(e,t,f)},destroy:function(){o.debug(r,"destroy verifications"),v&&v.destroy()}};return Promise.all([d("omweb","omweb-v1.js",t.parentDoc,t.videoElement),d("omwebClient","omid-session-client-v1.js",t.parentDoc,t.videoElement)]).then((function(){return t.player.options.viewability=null,b})).catch((function(e){return A.trackEvent("","verificationNotExecuted",{reason:3}),o.error(r,"failed to load OMSDK files",e.message?e.message():e.type),null}))}},6021:(e,t,n)=>{"use strict";var i=n(5365),r=n(676),o=r.OmidSessionClient.AdSession,a=r.OmidSessionClient.Partner,s=r.OmidSessionClient.Context,l=r.OmidSessionClient.VerificationScriptResource,d=r.OmidSessionClient.AdEvents,c=r.OmidSessionClient.MediaEvents,u=r.OmidSessionClient.VastProperties,p="[PlayerManager_Verifications_WebView]",h=n(9724).v;e.exports=function(e,t){var n,r,v,f=e,m=t,g=[],y=new i(e,t.player),A=function(e){h.debug(p,"OMID sessionObserver");try{if("sessionStart"===e.type){h.debug(p,"OMID sessionStart");const i="video",o="beginToRender";"definedByJavaScript"===e.data.creativeType&&n.setCreativeType(i),"definedByJavaScript"===e.data.impressionType&&n.setImpressionType(o);const a=t.player.options.skippable.enabled,s=a?t.player.options.skippable.videoOffset:0,l="auto"===t.player.options.initialPlayback,d=new u(a,s,l,"standalone");r.loaded(d),r.impressionOccurred()}else"sessionError"===e.type?h.debug(p,"OMID sessionError"):"sessionFinish"===e.type&&(h.debug(p,"OMID sessionFinish"),_session.finish())}catch(e){h.debug(p,"Failed OMID sessionStart "+e)}};return{init:function(){h.debug(p,"init verifications");for(var e=0;e<f.length;e++){var i=f[e];if(i.jsResources)for(var u=0;u<i.jsResources.length;u++)try{if("OMID"===i.jsResources[u].framework.toUpperCase()){var b=i.vendor,k=i.verificationParameters,E=i.jsResources[u].url,w=new l(E,b,k);g.push(w),h.debug(p,"verification is OMID")}else y.trackEvent(i.vendor,"verificationNotExecuted",{REASON:2}),h.debug(p,"verification is not OMID")}catch(e){h.debug(p,"Failed OMID verification "+e),y.trackEvent(i.vendor,"verificationNotExecuted",{REASON:3})}}if(g.length>0)try{if(t.player.options.nativeConfiguration.omidPartner.partnerName&&t.player.options.nativeConfiguration.omidPartner.partnerVersion){var T=new a(t.player.options.nativeConfiguration.omidPartner.partnerName,t.player.options.nativeConfiguration.omidPartner.partnerVersion),S=new s(T,g);h.debug(p,"BuildTest::"+m.videoElement),n=new o(S),r=new d(n),v=new c(n),n.registerSessionObserver(A),h.debug(p,"OMID _adSession"),h.debug(p,n),h.debug(p,v)}}catch(e){h.debug(p,"Failed OMID registerSessionObserver "+e)}},start:function(){h.debug(p,"start verifications")},dispatchEvent:function(e,t){h.debug(p,"try to dispatch OMID event: "+e+", data: ",t);try{"start"===e?v.start(t.duration,t.videoPlayerVolume):"firstQuartile"===e?v.firstQuartile():"thirdQuartile"===e?v.thirdQuartile():"midpoint"===e?v.midpoint():"complete"===e?v.complete():"volumeChange"===e?v.volumeChange(t.videoPlayerVolume):"adUserInteraction"===e?v.adUserInteraction(t.interactionType):"resume"===e?v.resume():"pause"===e?v.pause():"playerStateChange"===e?v.playerStateChange(t.state):"skipped"===e&&v.skipped()}catch(e){h.debug(p,"Failed OMID Video Events "+e)}},destroy:function(){h.debug(p,"destroy verifications")}}}},676:function(e,t,n){"use strict";!function(e,t,n){if("object"==typeof n&&"string"!=typeof n.nodeName)t(e,n);else{n={};var i=["1.4.9-iab4257"];function o(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=o(e[t]));return Object.freeze(e)}for(var r in i.push("default"),t(e,n),n)n.hasOwnProperty(r)&&(null==Object.getOwnPropertyDescriptor(e,r)&&Object.defineProperty(e,r,{value:{}}),i.forEach((function(t){if(null==Object.getOwnPropertyDescriptor(e[r],t)){var i=o(n[r]);Object.defineProperty(e[r],t,{get:function(){return i},enumerable:!0})}})))}}(void 0===n.g?this:n.g,(function(e,t){var i=i||{};i.scope={},i.createTemplateTagFirstArg=function(e){return e.raw=e},i.createTemplateTagFirstArgWithRaw=function(e,t){return e.raw=t,e},i.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},i.arrayIterator=function(e){return{next:i.arrayIteratorImpl(e)}},i.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return i.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},i.arrayFromIterator=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n},i.arrayFromIterable=function(e){return e instanceof Array?e:i.arrayFromIterator(i.makeIterator(e))},i.ASSUME_ES5=!1,i.ASSUME_NO_NATIVE_MAP=!1,i.ASSUME_NO_NATIVE_SET=!1,i.SIMPLE_FROUND_POLYFILL=!1,i.ISOLATE_POLYFILLS=!1,i.FORCE_POLYFILL_PROMISE=!1,i.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,i.objectCreate=i.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},i.defineProperty=i.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")},i.global=i.getGlobal(this),i.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),i.TRUST_ES6_POLYFILLS=!i.ISOLATE_POLYFILLS||i.IS_SYMBOL_NATIVE,i.polyfills={},i.propertyToPolyfillSymbol={},i.POLYFILL_PREFIX="$jscp$",i.polyfill=function(e,t,n,r){t&&(i.ISOLATE_POLYFILLS?i.polyfillIsolated(e,t,n,r):i.polyfillUnisolated(e,t,n,r))},i.polyfillUnisolated=function(e,t,n,r){for(n=i.global,e=e.split("."),r=0;r<e.length-1;r++){var o=e[r];if(!(o in n))return;n=n[o]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&i.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},i.polyfillIsolated=function(e,t,n,r){var o=e.split(".");e=1===o.length,r=o[0],r=!e&&r in i.polyfills?i.polyfills:i.global;for(var a=0;a<o.length-1;a++){var s=o[a];if(!(s in r))return;r=r[s]}o=o[o.length-1],null!=(t=t(n=i.IS_SYMBOL_NATIVE&&"es6"===n?r[o]:null))&&(e?i.defineProperty(i.polyfills,o,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===i.propertyToPolyfillSymbol[o]&&(n=1e9*Math.random()>>>0,i.propertyToPolyfillSymbol[o]=i.IS_SYMBOL_NATIVE?i.global.Symbol(o):i.POLYFILL_PREFIX+n+"$"+o),i.defineProperty(r,i.propertyToPolyfillSymbol[o],{configurable:!0,writable:!0,value:t})))},i.getConstructImplementation=function(){if(i.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(function(){function e(){}return new e,Reflect.construct(e,[],(function(){})),new e instanceof e}())return Reflect.construct;var e=Reflect.construct;return function(t,n,i){return t=e(t,n),i&&Reflect.setPrototypeOf(t,i.prototype),t}}return function(e,t,n){return void 0===n&&(n=e),n=i.objectCreate(n.prototype||Object.prototype),Function.prototype.apply.call(e,n,t)||n}},i.construct=i.getConstructImplementation(),i.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},i.setPrototypeOf=i.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:i.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,i.inherits=function(e,t){if(e.prototype=i.objectCreate(t.prototype),e.prototype.constructor=e,i.setPrototypeOf){var n=i.setPrototypeOf;n(e,t)}else for(n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.superClass_=t.prototype},i.getRestArguments=function(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t},i.polyfill("Reflect",(function(e){return e||{}}),"es6","es3"),i.polyfill("Reflect.construct",(function(e){return i.construct}),"es6","es3"),i.polyfill("Reflect.setPrototypeOf",(function(e){if(e)return e;if(i.setPrototypeOf){var t=i.setPrototypeOf;return function(e,n){try{return t(e,n),!0}catch(e){return!1}}}return null}),"es6","es5"),i.initSymbol=function(){},i.polyfill("Symbol",(function(e){if(e)return e;var t=function(e,t){this.$jscomp$symbol$id_=e,i.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};t.prototype.toString=function(){return this.$jscomp$symbol$id_};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0,o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return new t(n+(e||"")+"_"+r++,e)};return o}),"es6","es3"),i.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=i.global[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&i.defineProperty(r.prototype,e,{configurable:!0,writable:!0,value:function(){return i.iteratorPrototype(i.arrayIteratorImpl(this))}})}return e}),"es6","es3"),i.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},i.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r},i.polyfill("Array.prototype.keys",(function(e){return e||function(){return i.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),i.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.polyfill("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)i.owns(e,t)&&n.push(e[t]);return n}}),"es8","es3"),i.checkEs6ConformanceViaProxy=function(){try{var e={},t=Object.create(new i.global.Proxy(e,{get:function(n,i,r){return n==e&&"q"==i&&r==t}}));return!0===t.q}catch(e){return!1}},i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,i.ES6_CONFORMANCE=i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&i.checkEs6ConformanceViaProxy(),i.polyfill("WeakMap",(function(e){function t(){}function n(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!i.owns(e,a)){var n=new t;i.defineProperty(e,a,{value:n})}}function o(e){if(!i.ISOLATE_POLYFILLS){var n=Object[e];n&&(Object[e]=function(e){return e instanceof t?e:(Object.isExtensible(e)&&r(e),n(e))})}}if(i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&i.ES6_CONFORMANCE)return e}else if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var a="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var s=0,l=function(e){if(this.id_=(s+=Math.random()+1).toString(),e){e=i.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};return l.prototype.set=function(e,t){if(!n(e))throw Error("Invalid WeakMap key");if(r(e),!i.owns(e,a))throw Error("WeakMap key fail: "+e);return e[a][this.id_]=t,this},l.prototype.get=function(e){return n(e)&&i.owns(e,a)?e[a][this.id_]:void 0},l.prototype.has=function(e){return n(e)&&i.owns(e,a)&&i.owns(e[a],this.id_)},l.prototype.delete=function(e){return!!(n(e)&&i.owns(e,a)&&i.owns(e[a],this.id_))&&delete e[a][this.id_]},l}),"es6","es3"),i.MapEntry=function(){},i.polyfill("Map",(function(e){if(i.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&i.ES6_CONFORMANCE)return e}else if(function(){if(i.ASSUME_NO_NATIVE_MAP||!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(i.makeIterator([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=r.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!r.next().done)}catch(e){return!1}}())return e;var t=new WeakMap,n=function(e){if(this.data_={},this.head_=a(),this.size=0,e){e=i.makeIterator(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}};n.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.data_[n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:t},n.list.push(n.entry),this.head_.previous.next=n.entry,this.head_.previous=n.entry,this.size++),this},n.prototype.delete=function(e){return!(!(e=r(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.data_[e.id],e.entry.previous.next=e.entry.next,e.entry.next.previous=e.entry.previous,e.entry.head=null,this.size--,0))},n.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=a(),this.size=0},n.prototype.has=function(e){return!!r(this,e).entry},n.prototype.get=function(e){return(e=r(this,e).entry)&&e.value},n.prototype.entries=function(){return o(this,(function(e){return[e.key,e.value]}))},n.prototype.keys=function(){return o(this,(function(e){return e.key}))},n.prototype.values=function(){return o(this,(function(e){return e.value}))},n.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},n.prototype[Symbol.iterator]=n.prototype.entries;var r=function(e,n){var r=n&&typeof n;"object"==r||"function"==r?t.has(n)?r=t.get(n):(r=""+ ++s,t.set(n,r)):r="p_"+n;var o=e.data_[r];if(o&&i.owns(e.data_,r))for(e=0;e<o.length;e++){var a=o[e];if(n!=n&&a.key!=a.key||n===a.key)return{id:r,list:o,index:e,entry:a}}return{id:r,list:o,index:-1,entry:void 0}},o=function(e,t){var n=e.head_;return i.iteratorPrototype((function(){if(n){for(;n.head!=e.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))},a=function(){var e={};return e.previous=e.next=e.head=e},s=0;return n}),"es6","es3");var r={AdEventType:{IMPRESSION:"impression",LOADED:"loaded",GEOMETRY_CHANGE:"geometryChange",SESSION_START:"sessionStart",SESSION_ERROR:"sessionError",SESSION_FINISH:"sessionFinish",MEDIA:"media",VIDEO:"video",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction",STATE_CHANGE:"stateChange"},MediaEventType:{LOADED:"loaded",START:"start",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",COMPLETE:"complete",PAUSE:"pause",RESUME:"resume",BUFFER_START:"bufferStart",BUFFER_FINISH:"bufferFinish",SKIPPED:"skipped",VOLUME_CHANGE:"volumeChange",PLAYER_STATE_CHANGE:"playerStateChange",AD_USER_INTERACTION:"adUserInteraction"},ImpressionType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",UNSPECIFIED:"unspecified",LOADED:"loaded",BEGIN_TO_RENDER:"beginToRender",ONE_PIXEL:"onePixel",VIEWABLE:"viewable",AUDIBLE:"audible",OTHER:"other"},ErrorType:{GENERIC:"generic",VIDEO:"video",MEDIA:"media"},AdSessionType:{NATIVE:"native",HTML:"html",JAVASCRIPT:"javascript"},EventOwner:{NATIVE:"native",JAVASCRIPT:"javascript",NONE:"none"},AccessMode:{FULL:"full",DOMAIN:"domain",LIMITED:"limited"},AppState:{BACKGROUNDED:"backgrounded",FOREGROUNDED:"foregrounded"},Environment:{APP:"app",WEB:"web"},DeviceCategory:{CTV:"ctv",DESKTOP:"desktop",MOBILE:"mobile",OTHER:"other"},InteractionType:{CLICK:"click",INVITATION_ACCEPT:"invitationAccept"},CreativeType:{DEFINED_BY_JAVASCRIPT:"definedByJavaScript",HTML_DISPLAY:"htmlDisplay",NATIVE_DISPLAY:"nativeDisplay",VIDEO:"video",AUDIO:"audio"},MediaType:{DISPLAY:"display",VIDEO:"video"},Reason:{NOT_FOUND:"notFound",HIDDEN:"hidden",BACKGROUNDED:"backgrounded",VIEWPORT:"viewport",OBSTRUCTED:"obstructed",CLIPPED:"clipped",UNMEASURABLE:"unmeasurable",NO_WINDOW_FOCUS:"noWindowFocus",NO_OUTPUT_DEVICE:"noOutputDevice"},SupportedFeatures:{CONTAINER:"clid",VIDEO:"vlid"},VideoPosition:{PREROLL:"preroll",MIDROLL:"midroll",POSTROLL:"postroll",STANDALONE:"standalone"},VideoPlayerState:{MINIMIZED:"minimized",COLLAPSED:"collapsed",NORMAL:"normal",EXPANDED:"expanded",FULLSCREEN:"fullscreen"},NativeViewKeys:{X:"x",LEFT:"left",Y:"y",TOP:"top",WIDTH:"width",HEIGHT:"height",AD_SESSION_ID:"adSessionId",IS_FRIENDLY_OBSTRUCTION_FOR:"isFriendlyObstructionFor",CLIPS_TO_BOUNDS:"clipsToBounds",CHILD_VIEWS:"childViews",END_X:"endX",END_Y:"endY",OBSTRUCTIONS:"obstructions",OBSTRUCTION_CLASS:"obstructionClass",OBSTRUCTION_PURPOSE:"obstructionPurpose",OBSTRUCTION_REASON:"obstructionReason",PIXELS:"pixels",HAS_WINDOW_FOCUS:"hasWindowFocus"},MeasurementStateChangeSource:{CONTAINER:"container",CREATIVE:"creative"},ElementMarkup:{OMID_ELEMENT_CLASS_NAME:"omid-element"},CommunicationType:{NONE:"NONE",DIRECT:"DIRECT",POST_MESSAGE:"POST_MESSAGE"},OmidImplementer:{OMSDK:"omsdk"},MessageMethod:{IDENTIFY_SERVICE_WINDOW:"identifyServiceWindow"}},o="omid_message_guid",a="omid_message_method",s="omid_message_version",l="omid_message_args",d=function(e,t,n,i){this.guid=e,this.method=t,this.version=n,this.args=i};d.isValidSerializedMessage=function(e){return!!e&&void 0!==e[o]&&void 0!==e[a]&&void 0!==e[s]&&"string"==typeof e[o]&&"string"==typeof e[a]&&"string"==typeof e[s]&&(void 0===e[l]||void 0!==e[l])},d.deserialize=function(e){return new d(e[o],e[a],e[s],e[l])},d.prototype.serialize=function(){var e={};return e[o]=this.guid,e[a]=this.method,e[s]=this.version,void 0!==this.args&&(e[l]=this.args),e};var c=function(e){this.to=e,this.communicationType_=r.CommunicationType.NONE};c.prototype.sendMessage=function(e,t){},c.prototype.handleMessage=function(e,t){this.onMessage&&this.onMessage(e,t)},c.prototype.serialize=function(e){return JSON.stringify(e)},c.prototype.deserialize=function(e){return JSON.parse(e)},c.prototype.isDirectCommunication=function(){return this.communicationType_===r.CommunicationType.DIRECT},c.prototype.isCrossOrigin=function(){};var u={};function p(e,t){if(!t)throw Error("Value for "+e+" is undefined, null or blank.");if("string"!=typeof t&&!(t instanceof String))throw Error("Value for "+e+" is not a string.");if(""===t.trim())throw Error("Value for "+e+" is empty string.")}function h(e,t){if(null==t)throw Error("Value for "+e+" is undefined or null")}function v(e,t){if(null==t)throw Error(e+" must not be null or undefined.");if("number"!=typeof t||isNaN(t))throw Error("Value for "+e+" is not a number")}function f(e,t,n,i){if(v(e,t),t<n||t>i)throw Error("Value for "+e+" is outside the range ["+n+","+i+"]")}function m(e,t){return e&&(e[t]||(e[t]={}))}function g(e,n,i){(i=void 0===i?void 0===t?null:t:i)&&((e=e.split(".")).slice(0,e.length-1).reduce(m,i)[e[e.length-1]]=n)}u.assertTruthyString=p,u.assertNotNullObject=h,u.assertNumber=v,u.assertNumberBetween=f,u.assertFunction=function(e,t){if(!t)throw Error(e+" must not be truthy.")},u.assertPositiveNumber=function(e,t){if(v(e,t),0>t)throw Error(e+" must be a positive number.")},g("OmidSessionClient.Partner",(function(e,t){p("Partner.name",e),p("Partner.version",t),this.name=e,this.version=t}));var y=function(e,t,n,i){i=void 0===i?r.AccessMode.FULL:i,p("VerificationScriptResource.resourceUrl",e),this.resourceUrl=e,this.vendorKey=t,this.verificationParameters=n,this.accessMode=i};y.prototype.toJSON=function(){return{accessMode:this.accessMode,resourceUrl:this.resourceUrl,vendorKey:this.vendorKey,verificationParameters:this.verificationParameters}},g("OmidSessionClient.VerificationScriptResource",y);var A=function(e,t,n,i){n=void 0===n?null:n,i=void 0===i?null:i,h("Context.partner",e),this.partner=e,this.verificationScriptResources=t,this.videoElement=this.slotElement=null,this.contentUrl=n,this.customReferenceData=i,this.underEvaluation=!1,this.serviceWindow=null};A.prototype.setVideoElement=function(e){h("Context.videoElement",e),this.videoElement=e},A.prototype.setSlotElement=function(e){h("Context.slotElement",e),this.slotElement=e},A.prototype.setServiceWindow=function(e){h("Context.serviceWindow",e),this.serviceWindow=e},g("OmidSessionClient.Context",A);var b={};b.omidGlobal=function(){if(void 0!==e&&e)return e;if(void 0!==n.g&&n.g)return n.g;if("undefined"!=typeof window&&window)return window;if("undefined"!=typeof globalThis&&globalThis)return globalThis;var t=Function("return this")();if(t)return t;throw Error("Could not determine global object context.")}();var k={sessionError:"reportError"},E=Object.keys(r.MediaEventType).map((function(e){return r.MediaEventType[e]})),w=["impressionOccurred"],T=function(e){e=void 0===e?b.omidGlobal:e,this.interfaceRoot_=e.omidSessionInterface};function S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return"y"===e?(3&t|8).toString(16):t.toString(16)}))}T.prototype.isSupported=function(){return null!=this.interfaceRoot_},T.prototype.sendMessage=function(e,t,n){if("registerSessionObserver"==e&&(n=[t]),k[e]&&(e=k[e]),t=this.interfaceRoot_,0<=w.indexOf(e)&&(t=t.adEvents),0<=E.indexOf(e)&&(t=t.mediaEvents),!(t=t[e]))throw Error("Unrecognized method name: "+e+".");t.apply(null,i.arrayFromIterable(n))};var I={};function C(){var e=i.getRestArguments.apply(0,arguments);P((function(){throw new(Function.prototype.bind.apply(Error,[null,"Could not complete the test successfully - "].concat(i.arrayFromIterable(e))))}),(function(){return console.error.apply(console,i.arrayFromIterable(e))}))}function P(e,t){"undefined"!=typeof jasmine&&jasmine?e():"undefined"!=typeof console&&console&&console.error&&t()}I.error=C,I.debug=function(){var e=i.getRestArguments.apply(0,arguments);P((function(){}),(function(){return console.error.apply(console,i.arrayFromIterable(e))}))};var x="1.4.9-iab4257",j={},_=3;function V(e){return/\d+\.\d+\.\d+(-.*)?/.test(e)}function N(e,t){e=e.split("-")[0].split("."),t=t.split("-")[0].split(".");for(var n=0;n<_;n++){var i=parseInt(e[n],10),r=parseInt(t[n],10);if(i>r)break;if(i<r)return!1}return!0}j.isValidVersion=V,j.versionGreaterOrEqual=N;var D={},M="1.0.3";function O(e,t){return V(e)&&N(e,M)?t:JSON.stringify(t)}function R(e,t){return V(e)&&N(e,M)?t||[]:t&&"string"==typeof t?JSON.parse(t):[]}D.serializeMessageArgs=O,D.deserializeMessageArgs=R;var U={},L="SessionService.",B="VerificationService.";function F(e){return z(e,L)}function W(e){return q(e,L)}function H(e){return q(e,B)}function z(e,t){return t+e}function q(e,t){return(e=e.match(new RegExp("^"+t+"(.*)")))&&e[1]}U.getPrefixedSessionServiceMethod=F,U.getPrefixedVerificationServiceMethod=function(e){return z(e,B)},U.getUnprefixedSessionServiceMethod=W,U.getUnprefixedVerificationServiceMethod=H,U.isPrefixedSessionServiceMethod=function(e){return null!=W(e)},U.isPrefixedVerificationServiceMethod=function(e){return null!=H(e)};var G={};function J(e){return null!=e&&void 0!==e.top&&null!=e.top}function X(e){if(e===b.omidGlobal)return!1;try{if(void 0===e.location.hostname)return!0;!function(e){""===e.x||e.x}(e)}catch(e){return!0}return!1}function Y(e){return void 0===e&&"undefined"!=typeof window&&window&&(e=window),J(e)?e:b.omidGlobal}function Q(e){return J(e)?e.top:b.omidGlobal}G.evaluatePageUrl=function(e){if(!J(e))return null;try{var t=e.top;return X(t)?null:t.location.href}catch(e){return null}},G.isCrossOrigin=X,G.removeDomElements=function(e){return e.type===r.AdEventType.SESSION_START&&(void 0!==e.data.context.videoElement&&(e.data.context.videoElement="DOM Video Element - Present but not parsed to avoid parse error"),void 0!==e.data.context.slotElement&&(e.data.context.slotElement="DOM Slot Element - Present but not parsed to avoid parse error")),e},G.resolveGlobalContext=Y,G.resolveTopWindowContext=Q,G.isTopWindowAccessible=function(e){try{return!!e.top.location.href}catch(e){return!1}};var K=function(e){c.call(this,e),this.communicationType_=r.CommunicationType.DIRECT,this.handleExportedMessage=K.prototype.handleExportedMessage.bind(this)};i.inherits(K,c),K.prototype.sendMessage=function(e,t){if(!(t=void 0===t?this.to:t))throw Error("Message destination must be defined at construction time or when sending the message.");t.handleExportedMessage(e.serialize(),this)},K.prototype.handleExportedMessage=function(e,t){d.isValidSerializedMessage(e)&&this.handleMessage(d.deserialize(e),t)},K.prototype.isCrossOrigin=function(){return!1};var Z=function(e,t){t=void 0===t?b.omidGlobal:t,c.call(this,t);var n=this;this.communicationType_=r.CommunicationType.POST_MESSAGE,e.addEventListener("message",(function(e){if("object"==typeof e.data){var t=e.data;d.isValidSerializedMessage(t)&&(t=d.deserialize(t),e.source&&n.handleMessage(t,e.source))}}))};i.inherits(Z,c),Z.isCompatibleContext=function(e){return!!(e&&e.addEventListener&&e.postMessage)},Z.prototype.sendMessage=function(e,t){if(!(t=void 0===t?this.to:t))throw Error("Message destination must be defined at construction time or when sending the message.");t.postMessage(e.serialize(),"*")},Z.prototype.isCrossOrigin=function(){return!this.to||X(this.to)};var $={OMID_PRESENT_FRAME_NAME:"omid_v1_present",OMID_PRESENT_FRAME_NAME_WEB:"omid_v1_present_web",OMID_PRESENT_FRAME_NAME_APP:"omid_v1_present_app",getEnvironmentIframeName:function(e){var t={};return(t[r.Environment.APP]=$.OMID_PRESENT_FRAME_NAME_APP,t[r.Environment.WEB]=$.OMID_PRESENT_FRAME_NAME_WEB,t)[e]}};function ee(e,t){try{return e.frames&&!!e.frames[t]}catch(e){return!1}}function te(e,t){e.document.write('<iframe style="display:none" id="'+t+'" name="'+t+'" sandbox></iframe>')}$.isOmidPresent=function(e){return[$.OMID_PRESENT_FRAME_NAME,$.OMID_PRESENT_FRAME_NAME_WEB,$.OMID_PRESENT_FRAME_NAME_APP].some((function(t){return ee(e,t)}))},$.getOmidEnvironment=function(e){for(var t=i.makeIterator(Object.values(r.Environment)),n=t.next();!n.done;n=t.next())if(n=n.value,ee(e,$.getEnvironmentIframeName(n)))return n;return null},$.declareOmidPresence=function(e,t){e.frames&&e.document&&![$.OMID_PRESENT_FRAME_NAME,$.OMID_PRESENT_FRAME_NAME_WEB,$.OMID_PRESENT_FRAME_NAME_APP].some((function(t){return!!e.frames[t]}))&&(null==e.document.body&&$.isMutationObserverAvailable_(e)?$.registerMutationObserver_(e,t):(t=$.getEnvironmentIframeName(t),e.document.body?($.appendPresenceIframe_(e,$.OMID_PRESENT_FRAME_NAME),$.appendPresenceIframe_(e,t)):(te(e,$.OMID_PRESENT_FRAME_NAME),te(e,t))))},$.appendPresenceIframe_=function(e,t){var n=e.document.createElement("iframe");n.id=t,n.name=t,n.style.display="none",n.sandbox="",e.document.body.appendChild(n)},$.isMutationObserverAvailable_=function(e){return"MutationObserver"in e},$.registerMutationObserver_=function(e,t){var n=new MutationObserver((function(i){i.forEach((function(i){"BODY"===i.addedNodes[0].nodeName&&(i=$.getEnvironmentIframeName(t),$.appendPresenceIframe_(e,$.OMID_PRESENT_FRAME_NAME),$.appendPresenceIframe_(e,i),n.disconnect())}))}));n.observe(e.document.documentElement,{childList:!0})};var ne={},ie=["omid","v1_SessionServiceCommunication"],re=["omid","v1_VerificationServiceCommunication"],oe=["omidVerificationProperties","serviceWindow"];function ae(e,t){return t.reduce((function(e,t){return e&&e[t]}),e)}function se(e,t,n,i){if(!X(t))try{var r=ae(t,n);if(r)return new K(r)}catch(e){}return i(t)?new Z(e,t):null}function le(e,t,n,r){for(var o=(t=i.makeIterator(t)).next();!o.done;o=t.next())if(o=se(e,o.value,n,r))return o;return null}function de(e,t,n){n=void 0===n?$.isOmidPresent:n;var i=[e,Q(e)];return t&&i.unshift(t),le(e,i,ie,n)}ne.startSessionServiceCommunication=de,ne.startVerificationServiceCommunication=function(e,t){t=void 0===t?$.isOmidPresent:t;var n=[],i=ae(e,oe);return i&&n.push(i),n.push(Q(e)),le(e,n,re,t)};var ce=function(e,t,n){h("AdSession.context",e),this.adSessionId_=S(),this.context_=e,this.impressionOccurred_=!1;var i=this.context_.serviceWindow||void 0;this.communication_=t||de(Y(),i),this.sessionInterface_=n||new T,this.isSessionRunning_=this.hasMediaEvents_=this.hasAdEvents_=!1,this.impressionType_=this.creativeType_=null,this.creativeLoaded_=!1,this.callbackMap_={},this.communication_&&(this.communication_.onMessage=this.handleInternalMessage_.bind(this)),this.setClientInfo_(),this.injectVerificationScripts_(e.verificationScriptResources),this.sendSlotElement_(e.slotElement),this.sendVideoElement_(e.videoElement),this.sendContentUrl_(e.contentUrl),this.watchSessionEvents_()};ce.prototype.getAdSessionId=function(){return this.adSessionId_},ce.prototype.setCreativeType=function(e){if(e===r.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type cannot be redefined with value "+r.CreativeType.DEFINED_BY_JAVASCRIPT);if(this.impressionOccurred_)throw Error("Impression has already occurred");if(this.creativeLoaded_)throw Error("Creative has already loaded");if(this.creativeType_&&this.creativeType_!==r.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type cannot be redefined");if(void 0===this.creativeType_)throw Error("Native integration is using OMID 1.2 or earlier");this.sendOneWayMessage("setCreativeType",e,this.adSessionId_),this.creativeType_=e},ce.prototype.setImpressionType=function(e){if(e===r.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type cannot be redefined with value "+r.ImpressionType.DEFINED_BY_JAVASCRIPT);if(this.impressionOccurred_)throw Error("Impression has already occurred");if(this.creativeLoaded_)throw Error("Creative has already loaded");if(this.impressionType_&&this.impressionType_!==r.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type cannot be redefined");if(void 0===this.impressionType_)throw Error("Native integration is using OMID 1.2 or earlier");this.sendOneWayMessage("setImpressionType",e,this.adSessionId_),this.impressionType_=e},ce.prototype.isSupported=function(){return!!this.communication_||this.sessionInterface_.isSupported()},ce.prototype.isSendingElementsSupported_=function(){return this.communication_?this.communication_.isDirectCommunication():this.sessionInterface_.isSupported()},ce.prototype.registerSessionObserver=function(e){this.sendMessage("registerSessionObserver",e,this.adSessionId_)},ce.prototype.start=function(){this.sendOneWayMessage("startSession",{customReferenceData:this.context_.customReferenceData,underEvaluation:this.context_.underEvaluation},this.adSessionId_)},ce.prototype.finish=function(){this.sendOneWayMessage("finishSession",this.adSessionId_)},ce.prototype.error=function(e,t){this.sendOneWayMessage("sessionError",e,t,this.adSessionId_)},ce.prototype.registerAdEvents=function(){if(this.hasAdEvents_)throw Error("AdEvents already registered.");this.hasAdEvents_=!0,this.sendOneWayMessage("registerAdEvents",this.adSessionId_)},ce.prototype.registerMediaEvents=function(){if(this.hasMediaEvents_)throw Error("MediaEvents already registered.");this.hasMediaEvents_=!0,this.sendOneWayMessage("registerMediaEvents",this.adSessionId_)},ce.prototype.sendOneWayMessage=function(e){var t=i.getRestArguments.apply(1,arguments);this.sendMessage.apply(this,[e,null].concat(i.arrayFromIterable(t)))},ce.prototype.sendMessage=function(e,t){var n=i.getRestArguments.apply(2,arguments);this.communication_?this.sendInternalMessage_(e,t,n):this.sessionInterface_.isSupported()&&this.sendInterfaceMessage_(e,t,n)},ce.prototype.sendInternalMessage_=function(e,t,n){var i=S();t&&(this.callbackMap_[i]=t),e=new d(i,F(e),x,O(x,n)),this.communication_.sendMessage(e)},ce.prototype.handleInternalMessage_=function(e,t){t=e.method;var n=e.guid;if(e=e.args,"response"===t&&this.callbackMap_[n]){var i=R(x,e);this.callbackMap_[n].apply(this,i)}"error"===t&&window.console&&C(e)},ce.prototype.sendInterfaceMessage_=function(e,t,n){try{this.sessionInterface_.sendMessage(e,t,n)}catch(e){C("Failed to communicate with SessionInterface with error:"),C(e)}},ce.prototype.assertSessionRunning=function(){if(!this.isSessionRunning_)throw Error("Session not started.")},ce.prototype.impressionOccurred=function(){if(this.creativeType_===r.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type has not been redefined");if(this.impressionType_===r.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type has not been redefined");this.impressionOccurred_=!0},ce.prototype.creativeLoaded=function(){if(this.creativeType_===r.CreativeType.DEFINED_BY_JAVASCRIPT)throw Error("Creative type has not been redefined");if(this.impressionType_===r.ImpressionType.DEFINED_BY_JAVASCRIPT)throw Error("Impression type has not been redefined");this.creativeLoaded_=!0},ce.prototype.setClientInfo_=function(){this.sendOneWayMessage("setClientInfo",x,this.context_.partner.name,this.context_.partner.version,this.adSessionId_)},ce.prototype.injectVerificationScripts_=function(e){e&&(e=e.map((function(e){return e.toJSON()})),this.sendOneWayMessage("injectVerificationScriptResources",e,this.adSessionId_))},ce.prototype.sendSlotElement_=function(e){this.sendElement_(e,"setSlotElement")},ce.prototype.sendVideoElement_=function(e){this.sendElement_(e,"setVideoElement")},ce.prototype.sendElement_=function(e,t){e&&(this.isSendingElementsSupported_()?this.sendOneWayMessage(t,e,this.adSessionId_):this.error(r.ErrorType.GENERIC,"Session Client "+t+" called when communication is cross-origin"))},ce.prototype.sendContentUrl_=function(e){e&&this.sendOneWayMessage("setContentUrl",e,this.adSessionId_)},ce.prototype.setElementBounds=function(e){h("AdSession.elementBounds",e),this.sendOneWayMessage("setElementBounds",e,this.adSessionId_)},ce.prototype.watchSessionEvents_=function(){var e=this;this.registerSessionObserver((function(t){t.type===r.AdEventType.SESSION_START&&(e.isSessionRunning_=!0,e.creativeType_=t.data.creativeType,e.impressionType_=t.data.impressionType),t.type===r.AdEventType.SESSION_FINISH&&(e.isSessionRunning_=!1)}))},g("OmidSessionClient.AdSession",ce);var ue=function(e,t,n,i){this.isSkippable=e,this.skipOffset=t,this.isAutoPlay=n,this.position=i};ue.prototype.toJSON=function(){return{isSkippable:this.isSkippable,skipOffset:this.skipOffset,isAutoPlay:this.isAutoPlay,position:this.position}};var pe=function(e){h("AdEvents.adSession",e),this.adSessionId_=e.getAdSessionId();try{e.registerAdEvents(),this.adSession=e}catch(e){throw Error("AdSession already has an ad events instance registered")}};pe.prototype.impressionOccurred=function(){this.adSession.assertSessionRunning(),this.adSession.impressionOccurred(),this.adSession.sendOneWayMessage("impressionOccurred",this.adSessionId_)},pe.prototype.loaded=function(e){e=void 0===e?null:e,this.adSession.creativeLoaded(),e=e?e.toJSON():null,this.adSession.sendOneWayMessage("loaded",e,this.adSessionId_)},g("OmidSessionClient.AdEvents",pe);var he=function(e){h("MediaEvents.adSession",e),this.adSessionId_=e.getAdSessionId();try{e.registerMediaEvents(),this.adSession=e}catch(e){throw Error("AdSession already has a media events instance registered")}};he.prototype.start=function(e,t){v("MediaEvents.start.duration",e),f("MediaEvents.start.mediaPlayerVolume",t,0,1),this.adSession.sendOneWayMessage("start",e,t,this.adSessionId_)},he.prototype.firstQuartile=function(){this.adSession.sendOneWayMessage("firstQuartile",this.adSessionId_)},he.prototype.midpoint=function(){this.adSession.sendOneWayMessage("midpoint",this.adSessionId_)},he.prototype.thirdQuartile=function(){this.adSession.sendOneWayMessage("thirdQuartile",this.adSessionId_)},he.prototype.complete=function(){this.adSession.sendOneWayMessage("complete",this.adSessionId_)},he.prototype.pause=function(){this.adSession.sendOneWayMessage("pause",this.adSessionId_)},he.prototype.resume=function(){this.adSession.sendOneWayMessage("resume",this.adSessionId_)},he.prototype.bufferStart=function(){this.adSession.sendOneWayMessage("bufferStart",this.adSessionId_)},he.prototype.bufferFinish=function(){this.adSession.sendOneWayMessage("bufferFinish",this.adSessionId_)},he.prototype.skipped=function(){this.adSession.sendOneWayMessage("skipped",this.adSessionId_)},he.prototype.volumeChange=function(e){f("MediaEvents.volumeChange.mediaPlayerVolume",e,0,1),this.adSession.sendOneWayMessage("volumeChange",e,this.adSessionId_)},he.prototype.playerStateChange=function(e){h("MediaEvents.playerStateChange.playerState",e),this.adSession.sendOneWayMessage("playerStateChange",e,this.adSessionId_)},he.prototype.adUserInteraction=function(e){h("MediaEvents.adUserInteraction.interactionType",e),this.adSession.sendOneWayMessage("adUserInteraction",e,this.adSessionId_)},g("OmidSessionClient.MediaEvents",he),g("OmidSessionClient.OmidVersion",(function(e,t){p("OmidVersion.semanticVersion",e),p("OmidVersion.apiLevel",t)})),g("OmidSessionClient.listenForServiceWindow",(function(e){var t=Y();new Z(t).onMessage=function(t,n){t.method===r.MessageMethod.IDENTIFY_SERVICE_WINDOW&&e(n)}})),g("OmidSessionClient.VastProperties",ue);var ve={VerificationVendorId:{OTHER:1,MOAT:2,DOUBLEVERIFY:3,INTEGRAL_AD_SCIENCE:4,PIXELATE:5,NIELSEN:6,COMSCORE:7,MEETRICS:8,GOOGLE:9}};function fe(e){for(var t=i.makeIterator(me.keys()),n=t.next();!n.done;n=t.next()){n=n.value;for(var r=i.makeIterator(me.get(n)),o=r.next();!o.done;o=r.next())if(o.value.test(e))return n}return ve.VerificationVendorId.OTHER}var me=new Map([[ve.VerificationVendorId.MOAT,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.moatads\.com\/.*$/]],[ve.VerificationVendorId.DOUBLEVERIFY,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.doubleverify\.com\/.*$/,/^(https?:\/\/|\/\/)?c\.[\w\-]+\.com\/vfw\/dv\/.*$/,/^(https?:\/\/|\/\/)?(www\.)?[\w]+\.tv\/r\/s\/d\/.*$/]],[ve.VerificationVendorId.INTEGRAL_AD_SCIENCE,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.adsafeprotected\.com\/.*$/]],[ve.VerificationVendorId.PIXELATE,[/^https?:\/\/(q|cdn)\.adrta\.com\/s\/.*\/(aa|aanf)\.js.*$/,/^https:\/\/cdn\.rta247\.com\/s\/.*\/(aa|aanf)\.js.*$/]],[ve.VerificationVendorId.NIELSEN,[]],[ve.VerificationVendorId.COMSCORE,[/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.voicefive\.com\/.*$/,/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.measuread\.com\/.*$/,/^(https?:\/\/|\/\/)?[-a-zA-Z0-9.]+\.scorecardresearch\.com\/.*$/]],[ve.VerificationVendorId.MEETRICS,[/^(https?:\/\/|\/\/)?s418\.mxcdn\.net\/bb-serve\/omid-meetrics.*\.js$/]],[ve.VerificationVendorId.GOOGLE,[/^(https?:\/\/|\/\/)?pagead2\.googlesyndication\.com\/.*$/,/^(https?:\/\/|\/\/)?www\.googletagservices\.com\/.*$/]]]);g("OmidSessionClient.verificationVendorIdForScriptUrl",fe),g("OmidSessionClient.VerificationVendorId",ve.VerificationVendorId),ve.verificationVendorIdForScriptUrl=fe;var ge={};function ye(e,t){return Math.abs(e-t)<.01}ge.roughlyLessThan=function(e,t){return t-e>.01},ge.lessThanOrRoughlyEqual=function(e,t){return e<t||ye(e,t)},ge.greaterThanOrRoughlyEqual=function(e,t){return e>t||ye(e,t)}}),t)},4410:(e,t,n)=>{"use strict";var i=n(2067),r="PlayerManager_VideoSizeHandler",o=n(9724).v,a=function(e){o.verbose(e,r)},s=function(e){o.warn(e,r)};e.exports={resizeVideo:function(e,t,n,r){a("resizeVideo"),Math.max(document.documentElement.clientWidth,window.innerWidth||0);var o=0;o=i.isMobile()&&parseInt(i.getIOSVersion())>=13?Math.max(document.documentElement.clientHeight||0):Math.max(document.documentElement.clientHeight,window.innerHeight||0),n.options.safeFrame&&n.options.safeFrameAutoInitialSize&&!n.isExpanded&&(o=Math.max(o,n.options.height)),a("viewportHeight: "+o);var l,d,c,u,p=n.options,h=n.isIosInlineRequired.bind(n),v=(n.decidePlayer.bind(n),n.iframeVideoWrapper),f=n.adVideoPlayer,m=p.width,g=0,y=0,A=p.fixedSizePlayer,b=p.video.width,k=p.video.height,E=function(){return!p.useMsSkin&&(i.isAndroid()||h()||"below"===p.controlBarPosition)};if(p.autoInitialSize&&(p.sideStream&&!0===p.sideStream.enabled&&p.emptyDiv?m=p.emptyDiv.offsetWidth:0===(m=p.targetElement.offsetWidth)&&(m=p.width,s("AutoInitialSize could not find parent element width, using tag width"))),c=p.aspectRatio||p.playerAspectRatio,a("options.height : "+p.height),i.isEmpty(c)&&(c=i.isEmpty(p.height)?"16:9":"none"),a("aspectRatioOption : "+c),d=void 0===b||void 0===k||0===b||0===k?16/9:b/k,p.disableTopBar||(g=24),E()&&(!0===p.disableCollapse.hideControlBar&&!0===n.isEnded?y=0:y+=p.playerSkin.controlBarHeight),p.safeFrame&&p.player_height>0&&!p.safeFrameAutoInitialSize&&d!==p.player_width/p.player_height&&(m=p.width,d=p.player_width/p.player_height),a("initial VAST width : "+b),a("initial VAST height : "+k),a("initial topOffset : "+g),a("initial bottomOffset : "+y),a("initial mediaAspectRatio : "+d),A)u=p.height,m=p.width,l=p.height-g-y;else{var w=c.split(":");if(2===w.length)try{d=w[0]/w[1]}catch(e){a(e)}l=Math.round(m/d),a("pure : "+m+","+d),a("pure mediaHeight: "+l),u=l-0+g+y,p.maxHeight.enabled&&p.maxHeight.height>0?m=((u=Math.min(u,p.maxHeight.height,o>1?o:l))-g-y)*d:u>o&&d<1&&o>1&&(m=((u=p.safeFrame&&p.safeFrameAutoInitialSize?o:Math.min(o,document.documentElement.clientHeight))-g-y)*d),l=u+0-g-y}if(p.height=u,p.mediaHeight=l,p.safeFrame&&p.safeFrameAutoInitialSize&&(p.width=m),i.isMobile()&&(p.isWaterfall||p.safeFrame)&&(p.targetElement.style.height=p.height+"px"),v&&"object"==typeof v&&v.style){if(v.style.border="none",p.isWebviewEnvironment||"native"===p.adType||(v.style.width=m+"px",v.style.height=u+"px"),v.contentWindow){var T=v.contentWindow.document&&v.contentWindow.document.getElementById("top_chrome");T&&(T.style.width=m+"px",T.style.marginLeft="auto",T.style.marginRight="auto")}n.adVideoPlayer.el_.style.marginLeft="auto",n.adVideoPlayer.el_.style.marginRight="auto",a("final wrapper width for html5 : "+m),a("final wrapper height for html5 : "+u)}if(f.width(p.isWebviewEnvironment||"native"===p.adType?"100%":m),p.sideStream&&!0===p.sideStream.enabled&&p.emptyDiv?p.targetElement.style.width=m+"px":p.isWebviewEnvironment||(p.targetElement.style.width=""),a("resize video.js width to : "+m),i.isMobile()&&parseInt(i.getIOSVersion())>=13&&!p.isXandrVastPlayer&&(t=!0),a("shouldConsiderHeightOfDevice : "+t),a("hasStaticHeight : "+!1),a("mediaHeight + bottomOffset + topOffset : "+(l+y+g)),t&&l+y+g>o){var S=o,I=o-y-g;o<=1&&(S=p.height+y+g,I=p.height),f.height(I),a("mobile set video.js height to : "+I),p.height=S,a("mobile options.height to : "+p.height),p.mediaHeight=I,a("mobile options.mediaHeight to : "+p.mediaHeight),parseInt(i.getIOSVersion())<13&&(v.style.height=I+"px"),a("mobile set iframeVideoWrapper to : "+v.style.height)}else{var C=l;E()||(C+=y),"below"===p.controlBarPosition?((p.isWebviewEnvironment||"native"===p.adType)&&(C=p.targetElement.offsetHeight-g-y),f.height(C),a("desktop set video.js height to : "+C)):(f.height(p.isWebviewEnvironment||"native"===p.adType?"100%":C),a((p.isWebviewEnvironment,"100%")))}n.isEnded&&n.endCard&&n.endCard.onVideoResized(m,l),p.sideStream&&p.sideStream.enabled||!0===p.video.scalable&&!1===p.video.maintainAspectRatio&&(n.adVideoPlayer.tag.style.objectFit="fill"),p.targetElement.style.visibility="visible","function"==typeof r&&r()},setSizeForInitialRender:function(e){a("setSizeForInitialRender");var t=e.width;e.autoInitialSize&&(t=e.targetElement.offsetWidth)<=0&&(t=e.width,s("Width of target element was not set or zero, using tag width for player instead")),a("setSizeForInitialRender using width: "+t),e.width=t},getFinalSize:function(e){var t={width:0,height:0},n=e.options.wcElement&&e.options.wcElement instanceof Element?e.options.wcElement.querySelector("#"+String(e.options.iframeVideoWrapperId)):e.iframeVideoWrapper?e.iframeVideoWrapper:document.getElementById(e.options.iframeVideoWrapperId);return n&&n.offsetWidth&&n.offsetHeight&&(t={width:n.offsetWidth,height:n.offsetHeight}),t},resizePlayer:function(e,t,n){if(a("resizePlayer"),n.overlayPlayer&&n.adVideoPlayer){if(n.resizeVideoWithDimensions(e,t),n.iframeVideoWrapper&&"object"==typeof n.iframeVideoWrapper){n.iframeVideoWrapper.style.border="none",n.iframeVideoWrapper.style.width=e+"px",n.iframeVideoWrapper.style.height=t+"px";var r=n&&n.iframeVideoWrapper&&n.iframeVideoWrapper.contentWindow&&n.iframeVideoWrapper.contentWindow.document&&n.iframeVideoWrapper.contentWindow.document.getElementById("top_chrome");r&&(r.style.width=e+"px",i.isIos()&&(r.style.marginLeft="",r.style.marginRight="")),i.isIos()&&(n.adVideoPlayer.el_.style.marginLeft="",n.adVideoPlayer.el_.style.marginRight="")}n.adVideoPlayer.width(e);var o=0;n.options.disableTopBar||(o=24),(i.isAndroid()||n.isIosInlineRequired()||"below"===n.options.controlBarPosition)&&(n.options.useMsSkin||(o+=n.options.playerSkin.controlBarHeight,n.adVideoPlayer.controlBar&&n.adVideoPlayer.controlBar.progressControl&&(o+=n.adVideoPlayer.controlBar.progressControl.el_.offsetHeight))),n.adVideoPlayer.height(t-o)}},resizeVideoForSideStream:function(e,t,n,r){a("resizeVideo-sidestream");var o,s,l,d,c,u=e.options,p=e.isIosInlineRequired.bind(e),h=(e.decidePlayer.bind(e),e.iframeVideoWrapper),v=e.adVideoPlayer,f=0,m=0,g=u.video.width,y=u.video.height,A=function(){return i.isAndroid()||p()||"below"===u.controlBarPosition};if(l=u.aspectRatio||u.playerAspectRatio,a("options.height : "+n),i.isEmpty(l)&&(l=i.isEmpty(n)?"16:9":"none"),a("aspectRatioOption : "+l),s=void 0===g||void 0===y||0===g||0===y?16/9:g/y,u.disableTopBar||(f=24),A()&&(m+=u.playerSkin.controlBarHeight),a("initial VAST width : "+g),a("initial VAST height : "+y),a("initial topOffset : "+f),a("initial bottomOffset : "+m),a("initial mediaAspectRatio : "+s),d=n,c=t,o=n-f-m,n&&t&&(u.mediaHeight=o),h&&"object"==typeof h&&h.style){if(h.style.border="none",h.style.width=c+"px",h.style.height=d+"px",h.contentWindow){var b=h.contentWindow.document&&h.contentWindow.document.getElementById("top_chrome");b&&(b.style.width=c,b.style.marginLeft="",b.style.marginRight="")}e.adVideoPlayer.el_.style.marginLeft="",e.adVideoPlayer.el_.style.marginRight="",a("final wrapper width for html5 : "+c),a("final wrapper height for html5 : "+d)}v.width(c),u.sideStream&&!0===u.sideStream.enabled&&u.emptyDiv?u.targetElement.style.width=c+"px":u.targetElement.style.width="",a("resize video.js width to : "+c),a("shouldConsiderHeightOfDevice : false"),a("mediaHeight + bottomOffset + topOffset : "+(o+m+f)),a("window.innerHeight : "+window.innerHeight);var k=o;A()||(k+=m),v.height(k),a("desktop set video.js height to : "+k),e.isEnded&&e.endCard&&e.endCard.onVideoResized(c,o),"function"==typeof r&&r()}}},3909:(e,t,n)=>{"use strict";var i=n(3715).k,r="[PlayerManager_ANVideoViewabilityTracker]",o=n(9724).v,a=function(e,t){if(t)try{e+=" / "+JSON.stringify(t)}catch(e){o.error(r,e,t)}o.verbose(r,e)},s=function(e,t){if(t)try{e+=" / "+JSON.stringify(t)}catch(e){o.error(r,e,t)}o.info(r,e)};e.exports=function(){var e,t,n=null,l={video_start:"start",expand:"expand",collapse:"collapse",video_unmute:"sound_on",video_mute:"sound_off",video_pause:"pause",video_resume:"resume","ad-click":"click",video_skip:"stop",video_complete:"stop",fullscreen:"fullscreen",exitFullscreen:"exitFullscreen"},d={video_start:!1,video_skip:!1,video_complete:!1},c=function(n,i,r){if(e&&i){var o=/notifyEvent.*\[(.[^\]]+)\]/.exec(i);(o=Array.isArray(o)&&o.length>1?o[1]:null)&&e("VIEW",o,t,i)}n&&"debug"===n?a(i,r):s(i,r)};this.init=function(l,d,u,p,h,v,f){s("initialize with duration: "+d+", width: "+u+", height: "+p+", event: "+h),l&&(e=l.cbNotification,t=l.ASTadId);try{var m={loggerCallback:c,getViewModeCallback:function(){return v()?i.VIEW_MODE.FULL_SCREEN:i.VIEW_MODE.NORMAL},getVolumeCallback:f};n=new i(function(e){return e&&e.viewability}(l),m);var g={errorCallback:function(e,t){!function(e,t){if(t)try{e+=" / "+JSON.stringify(t)}catch(e){o.error(r,e,t)}o.error(r,e)}(t,e)}};n.initAppNexus(function(e){return e.targetElement}(l),function(e,t,n){return{duration:e,w:t,h:n}}(d,u,p),function(e){if(e)return e.playerContextId}(l),g),this.isReady=!0}catch(e){a("error on viewability library: "),a(e)}},this.invokeEvent=function(e){if(e&&l[e])try{if(d.hasOwnProperty(e)){if(d[e])return void s("supressing fireOnceEvents event as it is already fired once by viewability library: "+l[e]);d[e]=!0}s("event invoked by viewability library: "+l[e]),n.notifyEvent(l[e])}catch(e){a("error on viewability library: "),a(e)}},this.isReady=!1}},1602:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n(4516)},5791:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});const i={100:"XML parsing error",101:"VAST schema validation error",102:"VAST version not supported",200:"Ad type is not video",204:"Invalid Ad category",205:"Ad is skipped due category violation",300:"General Wrapper error",301:"Wrapper VAST URI timeout",302:"Wrapper limit reached",303:"No VAST response after one or more Wrappers",403:"No suitable rendition available",900:"Undefined error",1001:"No Ads in VAST"},r=["2.0","3.0","4.0","4.1","4.2"],o="prepared",a="in-progress",s="failed",l="success",d=(e,t)=>{const n=e.getElementsByTagName(t);return n.length>0?n:null},c=(e,t,n)=>{n||(n=0);const i=e.getElementsByTagName(t);return i.length>n?i[n]:null},u=(e,t)=>{let n=e.getAttribute(t);return null===n&&(n=""),n},p=e=>{const t=d(e,"Extension");if(!t)return 999;for(let e=0;e<t.length;e++){const n=u(t[e],"fallback_index");if(""!==n)return parseInt(n)}return 999};var h=n(9313);const v=999;function f(e,t){let n=e;return e&&(n=e.replace("[ERRORCODE]",t.toString())),n}function m(e,t,n,i){const r={outcome:i?"rejected":"available",adUrl:t.hops.length>0&&t.hops[0].url?t.hops[0].url:"Inline Response",numberOfHops:t.hops.length,totalTimeToProcess:n};return r.ad=e,r.hops=[...t.hops],r.hops.forEach(((e,t)=>{e.chainNodeType=e.wrapper?"wrapper":e.inline?"inline":"failure",e.hopIndex=t+1,delete e.wrapperIndex,delete e.wrapper,delete e.inline})),r}class g{constructor(e){this.options=e||{},this.isPod=!1,this.ads=[],this.slotCount=0,this.isFallbackAd=!1,this.singleAd=!1,this.terminateFlag=!1}init(e){const t={errorCode:0,errorMessage:"",isPod:!1,slotCount:0,adBuffetCount:0,fallbackAdCount:0,errUrl:""},n=c(e,"VAST");if(!n||!n.firstChild)return t.errorCode=100,t.errorMessage=i[t.errorCode.toString()],t;const a=c(n,"Error");let s=null;a&&(s=(e=>{if(0===e.childNodes.length)return"";let t="";for(let n=0;n<e.childNodes.length;n++)e.childNodes[n].nodeValue&&(t+=e.childNodes[n].nodeValue);return t.trim()})(a),s=s.trim());const l=(e=>{let t="unknown";return e&&(t=u(e,"version"),t=t.trim(),t.length>3&&(t=t.substring(0,3))),t})(n);if(!r.includes(l))return t.errorCode=102,t.errorMessage=i[t.errorCode.toString()],t.errUrl=f(s||t.errUrl,t.errorCode),t;const h=d(n,"Ad");if(!h||0===h.length)return this.ads=[],t.errorCode=100,t.errorMessage=i[t.errorCode.toString()],t.errUrl=f(s||t.errUrl,t.errorCode),t;let m=-1;for(let e=0;e<h.length;e++){const n=h[e],i=u(n,"sequence"),r=p(n);i&&!isNaN(parseInt(i))?(this.isPod=!0,this.ads.push({slotNumber:parseInt(i),fallbackIndex:r,ad:n,status:o}),r!==v&&(m=parseInt(i)),t.slotCount++,t.isPod=!0):r!==v&&m>0?this.ads.push({slotNumber:m,fallbackIndex:r,ad:n,status:o}):(this.ads.push({slotNumber:v,fallbackIndex:r,ad:n,status:o}),r===v&&t.adBuffetCount++)}if(!this.isPod){let e=-1;return this.ads.forEach((t=>{t.fallbackIndex=p(t.ad),t.fallbackIndex!==v&&(this.isFallbackAd=!0,e=Math.max(e,t.fallbackIndex)),delete t.slotNumber})),this.singleAd=!this.isFallbackAd,this.singleAd?t.adBuffetCount=0:t.fallbackAdCount=e+1,t}return this.slotCount=t.slotCount,t}parse(e){const t={failed:!1,errorCode:0,errorMessage:null,slotNumber:-1,fallbackIndex:-1,singleAd:!0,flatVast:null};if(0===this.ads.length)return t.failed=!0,t.errorCode=1001,t.errorMessage=i[t.errorCode],void e(t);this.ads.sort(((e,t)=>this.isPod?e.slotNumber-t.slotNumber:e.fallbackIndex-t.fallbackIndex));var n=this;n.ads.forEach((o=>{n.terminateFlag||setTimeout((()=>{o.status=a;const d=Object.assign({},t),c=r[r.length-1],u={telemetry:!0,wrapperLimit:this.options.wrapperLimit};n.isPod&&(u.slotCount=n.slotCount,u.slotNumber=o.slotNumber);const p=Date.now();h.a.parseAdObj(o.ad,c,((t,r,c,u,h,v)=>{const f=Date.now()-p;if(!n.terminateFlag){if(t)if(d.flatVast=Array.isArray(c)?c[0]:c,d.flatVast.telemetry&&(d.flatVast.mediaFiles&&function(e){const t=[];if(e.mediaFiles.forEach((e=>{e.apiFramework&&"VPAID"===e.apiFramework.toUpperCase()?e.url.indexOf("anwrapper")>0?t.includes("anwrapper")||t.push("anwrapper"):t.includes("vpaid")||t.push("vpaid"):t.includes("video")||t.push("video")})),t.length>0&&e.telemetry.hops.length>0){const n=e.telemetry.hops.find((e=>e.inline));n&&(n.mediaType=t.join(", "))}}(d.flatVast),d.flatVast.telemetryEventData=m(n.isPod?o.slotNumber:o.fallbackIndex,d.flatVast.telemetry,f,d.flatVast.errorFlag)),n.isPod?(d.slotNumber=o.slotNumber,d.singleAd=!1,d.fallbackIndex=o.fallbackIndex):n.isFallbackAd&&(d.fallbackIndex=o.fallbackIndex,d.singleAd=!1),d.flatVast.errorFlag){o.status=s;const e=function(e){const t=function(e){let t="";if(e&&Array.isArray(e.errorUrls)&&e.errorUrls.length>0){const n=e.errorUrls.filter((e=>e.indexOf("ib.adnxs.com/")>0||e.indexOf("ib.adnxs-simple.com/")>0));n.length>0&&(t=n[0])}return t}(e);if(t){const e=t.indexOf("&error_code=");if(e>0){const n=t.substring(e+12).split("&");if(n.length>0)return parseInt(n[0])}}return null}(d.flatVast);e&&(d.flatVast.parsingErrorCode=e,d.flatVast.parsingErrorMessage=i[e.toString()]||"")}else o.status=l;else d.flatVast={},v&&(d.flatVast.telemetryEventData=m(n.isPod?o.slotNumber:o.fallbackIndex,v,f,!0)),n.isPod?(d.slotNumber=o.slotNumber,d.singleAd=!1,d.fallbackIndex=o.fallbackIndex):n.isFallbackAd&&(d.fallbackIndex=o.fallbackIndex,d.singleAd=!1),d.flatVast.errorFlag=!0,d.flatVast.parsingErrorCode=c,"vast"===c.substr(0,4)&&(d.flatVast.parsingErrorCode=function(e){let t=e.substr(4);try{t=parseInt(t)}catch(e){t=null}return t}(c)),d.flatVast.parsingErrorMessage=i[d.flatVast.parsingErrorCode.toString()]||"",d.flatVast.errorUrls=u,o.status=s;d.singleAd&&o.status===s&&function(e){const t=e.filter((e=>e.status===a));return t&&t.length>0}(n.ads)||(e(d),d.singleAd&&o.status===l&&(this.terminateFlag=!0))}}),n.isPod?`slot_${o.slotNumber}_${o.fallbackIndex}`:`single_${n.fallbackIndex}`,this.options.adServerTimeout||2e3,u)}),0)}))}terminate(){this.terminateFlag=!0}}},9198:(e,t,n)=>{"use strict";var i=["video/mp4","video/webm","video/ogg","video/x-ms-wmv","video/x-msvideo","video/mpeg","video/quicktime","video/3gpp","video/3gpp2","video/x-m4v","application/javascript","application/x-javascript"],r=["audio/mpeg","audio/mp4","audio/ogg","audio/x-pn-realaudio","application/javascript","application/x-javascript"],o=[],a=0,s=n(5079).y,l=n(9724).v,d="Rendition Manager > ";function c(e,t){var n;if(t){for(n=0;n<r.length;n++)if(e===r[n])return!0}else for(n=0;n<i.length;n++)if(e===i[n])return!0;return!1}function u(e,t){for(var n=[],i=-1,r=0;r<o.length;r++)o[r].width>=e&&(-1===i||i>=o[r].width-e)&&(i>o[r].width-e&&(n.length=0),n.push(o[r]),i=o[r].width-e);if(n.length>0)o.length=0,o=n.slice();else{for(r=0;r<o.length;r++)o[r].width<e&&(-1===i||i>=e-o[r].width)&&(i>e-o[r].width&&(n.length=0),n.push(o[r]),i=e-o[r].width);n.length>0&&(o.length=0,o=n.slice())}if(1!==o.length){for(n.length=0,i=-1,r=0;r<o.length;r++)o[r].height>=t&&(-1===i||i>=o[r].height-t)&&(i>o[r].height-t&&(n.length=0),n.push(o[r]),i=o[r].height-t);if(n.length>0)o.length=0,o=n.slice();else{for(r=0;r<o.length;r++)o[r].height<t&&(-1===i||i>=t-o[r].height)&&(i>t-o[r].height&&(n.length=0),n.push(o[r]),i=t-o[r].height);n.length>0&&(o.length=0,o=n.slice())}}}function p(e){for(var t=[],n=-1,i=0;i<o.length;i++)o[i].bitrate<=e&&(-1===n||n>=e-o[i].bitrate)&&(n>e-o[i].bitrate&&(t.length=0),n=e-o[i].bitrate,t.push(o[i]));if(t.length>0)o.length=0,o=t.slice();else for(i=0;i<o.length;i++)o[i].bitrate>=e&&(-1===n||n>=o[i].bitrate-e)&&(n>o[i].bitrate-e&&(t.length=0),n=o[i].bitrate-e,t.push(o[i]));if(1===t.length||0===a)return t[0];if(1===a){for(i=0;i<t.length;i++)return t[i].type.toLowerCase(),t[i];return null}return t[0]}function h(e){return e?(e.requiredPlayer=1,e.success=!0,l.info(d,"Selected rendition: ",e),e):(l.error(d,"Failed to select rendition"),{success:!1,errorCode:403})}function v(e,t,n,i){i.playerTechnology=["html5"],a=1,function(e){for(var t=0;t<o.length;)c(o[t].type.toLowerCase(),e)?t++:o.splice(t,1)}(i.onlyAudio);var r,v=function(e){if(e&&e>0)return l.info(d,"Selected bitrate (not from cache): "+e),e;var t=1;try{var n=s.getGenericData("anxBandwidth");n?(t=n,l.info(d,"Selected bitrate (from cache): "+t)):l.info(d,"No bitrate data present in cache (use bitrate 1)")}catch(e){l.warn(d,"Exception during getting bitrate from cache (use bitrate 1)")}return t}(n),f=o.slice();o.length=0;for(var m=0;m<f.length;m++)o.push(f[m]);return l.log(d,"HTML5 rendition count = "+o.length),o.length>0&&(r=function(e,t,n,i){var r=function(e,t,n){for(var i=null,r=[],a=0;a<o.length;)!o[a].apiFramework||o[a].apiFramework.toLowerCase().indexOf("vpaid")<0?(r.push(o[a]),o.splice(a,1)):a++;if(o.length>0){if(1===o.length)return o[0];u(e,t),i=1===o.length?o[0]:p(n)}return null===i&&(o=r.slice()),i}(e,t,n);return r?(r.type.toLowerCase(),l.info(d,"VPAID selected"),r):(a=1,0===o.length?null:1===o.length?(o[0].type.toLowerCase(),o[0]):(u(e,t),1===o.length?(l.log(d,"Rendition selected by size"),o[0].type.toLowerCase(),o[0]):(l.log(d,"Try select rendition by bitrate"),p(n))))}(e,t,v))?h(r):h(null)}function f(e,t){for(var n=[],i=0;i<o.length;i++)o[i].width===e&&o[i].height===t&&n.push(o[i]);o.length=0,n.length>0&&(o=n.slice())}function m(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t){e.splice(n,1);break}}e.exports={init:function(e){o=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i.hasOwnProperty("type")&&(i.hasOwnProperty("width")||(i.width=0),i.hasOwnProperty("height")||(i.height=0),i.hasOwnProperty("bitrate")||(i.bitrate=2147483647),t.push(i))}return t}(e)},getUrl:function(e,t,n,i){return v(e,t,n,i)},selectCompanionsForContainers:function(e,t){!function(e,t){if(e&&0!==e.companions.length&&t&&0!==t.length){o=[];for(var n=0;n<e.companions.length;n++){var i,r=e.companions[n];try{i=Object.assign({},r)}catch(e){try{var a=JSON.stringify(r);i=JSON.parse(a)}catch(e){continue}}i.id=n,i.type="unknown",r.hasOwnProperty("StaticResource")&&(i.type=r.StaticResource.type),o.push(i)}if(0!==o.length){var s=o.slice();for(n=0;n<t.length&&s.length>0;n++){var c=t[n];if(o.length=0,o=s.slice(),f(c.width,c.height),1!==o.length)if(0!==o.length){for(var u=!1,p=0;p<o.length;p++)if(o[p].apiFramework&&o[p].apiFramework.toLowerCase().indexOf("vpaid")<0){l.log(d,"Companion rendition selected by apiFramework"),c.companion=o[p],m(s,c.companion.id),u=!0;break}u||(l.log(d,"First companion rendition selected"),c.companion=o[0],m(s,c.companion.id))}else l.log(d,"Companion rendition not selected for container"),c.companion=null;else l.log(d,"Companion rendition selected by size"),c.companion=o[0],m(s,c.companion.id)}}}}(e,t)}}},5433:(e,t,n)=>{"use strict";n.d(t,{c:()=>i});const i=n(9198)},8810:(e,t,n)=>{"use strict";var i="[ERRORCODE]",r="[CACHEBUSTING]",o="AN_DEFAULT",a=n(7886).B,s=n(4427).q,l="TM",d={},c=n(9724).v,u=function(e){c.warn(l,e)},p=function(e){c.info(l,e)},h=function(e){c.log(l,e)},v=function(e){c.verbose(l,e)};v("Tracking Manager Version 1.0.14");var f=null;function m(e,t){d||(d={}),d[t=t||o]||(d[t]={});d[t][e]={isImpression:!1,reportOnce:!0,reported:!1,urls:[]},v("tracking data created, adId="+t+", event="+e)}function g(e){var t=e;switch(e){case"impressionUrls":t="impression";break;case"clickTrackingUrls":case"click":t="ad-click";break;case"errorUrls":t="error";break;case"imp_tracking_url":t="bid-impression";break;case"init_cb":t="ad-request";break;case"result_cb":t="ad-response";break;case"start":t="video-start";break;case"firstQuartile":t="video-first-quartile";break;case"midpoint":t="video-mid";break;case"thirdQuartile":case"thirdQuartile":t="video-third-quartile";break;case"complete":t="video-complete";break;case"unmute":t="audio-unmute";break;case"mute":t="audio-mute";break;case"pause":t="video-pause";break;case"rewind":t="rewind";break;case"resume":t="video-resume";break;case"fullscreen":t="video-fullscreen";break;case"exitFullscreen":t="video-exit-fullscreen";break;case"creativeView":t="creative-view";break;case"expand":t="ad-expand";break;case"collapse":t="ad-collapse";break;case"acceptInvitation":t="user-accept-invitation";break;case"close":t="user-close";break;case"progress":t="ad-progress";break;case"skip":t="video-skip"}return t}function y(e,t,n){n=n||o,e=g(e),d.hasOwnProperty(n)&&d[n].hasOwnProperty(e)||m(e,n),d[n][e].urls.push(t),v("Tracking added, adId="+n+", event="+e+", url="+t)}function A(e,t){var n="";return s.isNotEmpty(e)&&s.isNotEmpty(t)&&(n=(e=g(e))+"_"+t),n}function b(e,t){var n=!1,i=d[t=t||o][e];return i&&i.hasOwnProperty("isImpression")&&(n=!0===i.isImpression),n}function k(e,t,n){n=n||o,s.isNotEmpty(e)&&(d.hasOwnProperty(n)&&d[n].hasOwnProperty(e)||m(e,n),d[n][e].reportOnce=t,v("setting report once, adId="+n+", event="+e+", setting="+t))}function E(e,t,n){n=n||o,e=g(e),d.hasOwnProperty(n)&&d[n].hasOwnProperty(e)||m(e,n),d[n][e].isImpression=t}function w(e,t){h("requesting tracking for "+t+", url="+e),a.trackPixel(e,t)}function T(e,t){if(t){var n=t.value;if(n=n&&"number"==typeof n?n.toString():n,s.isNotEmpty(n)){var i=t.macro;s.isNotEmpty(i)?e.indexOf(i)>-1&&(e=function(e,t,n){var i=e;return e.indexOf(n)>-1&&(i=e.replace(n,t)),i}(e,n,i)):e=function(e,t){var n="?";return e.indexOf("?")>-1&&(n="&"),e+n+t}(e,n)}}return e}var S,I={TIMESTAMP:(new Date).toISOString(),MEDIAPLAYHEAD:null,BREAKPOSITION:null,ADCOUNT:null,TRANSACTIONID:(S=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=(S+16*Math.random())%16|0;return S=Math.floor(S/16),("x"===e?t:3&t|8).toString(16)}))),PLACEMENTTYPE:null,IFA:-1,IFATYPE:-1,CLIENTUA:null,DEVICEIP:null,LATLONG:-1,PAGEURL:function(){try{return top&&top.location&&top.location.href?top.location.href:-1}catch(e){return-1}}(),APPNAME:-1,APIFRAMEWORKS:"2,7",EXTENSIONS:-1,PLAYERCAPABILITIES:null,CLICKTYPE:null,PLAYERSTATE:null,PLAYERSIZE:null,ADPLAYHEAD:null,ASSETURI:null,PODSEQUENCE:null,CLICKPOS:-1,LIMITADTRACKING:null};function C(e){for(var t in I)if(e.indexOf("["+t+"]")>=0){var n=I[t];null===n&&(n=f?f.resolveMacro(t):-1),e=e.split("["+t+"]").join(encodeURIComponent(n))}return e}function P(e,t,n){n=n||o;var i=!1;if(d.hasOwnProperty(n)&&d[n].hasOwnProperty(e)){var a=d[n][e];if(a)if(a.reportOnce&&a.reported)p("Cannot report event - event has already been reported: "+e+" for adId="+n),i=!0;else{var l=a.urls;if(l){a.reported=!0;for(var c=0;c<l.length;c++){var h=l[c],v="";if("string"==typeof h?v=h:"object"==typeof h&&(v=h.url),s.isNotEmpty(v)){i=!0,t&&(v=T(v,t));var f=""+Math.floor(1e7*Math.random());v.indexOf(r)>-1?v=T(v,{macro:r,value:f}):a.reportOnce||"ad-click"===e||(v=T(v,{value:"apn_rnd="+f})),v=C(v),"string"==typeof h?h=v:"object"==typeof h&&(h.url=v),w(h,e)}}}}}i||u("No tracking urls found for adId="+n+", event = "+e)}function x(e){return"progress>"+e}function j(e){if(e=e||o,d&&d.hasOwnProperty(e)){var t=d[e];for(var n in delete d[e],t)v("Removing event: "+n+" for adId="+e)}}e.exports={init:function(e,t){if(j(t),e)for(var n=0;n<e.length;n++)k(e[n],!1,t)},setPlayer:function(e){f=e},addTrackingEvent:function(e,t,n){y(e,t,n)},addTrackingEvents:function(e,t){if(e)for(var n in e){var i=e[n];if(s.isNotEmpty(i))for(var r=0;r<i.length;r++)y(n,i[r],t)}},addMediationTrackingEvent:function(e,t,n,i){var r=A(e,t);v("creating event name for adId="+(i||o)+", event="+e+", networkName="+t+" =>"+r),y(r,n,i)},addProgressTrackingEvent:function(e,t,n){y(x(e),t,n)},markAsImpressionEvent:function(e,t,n){v("marking event as impression: "+e+", adId="+(n||o)+", value="+t),E(e,t,n)},markAsMediationImpressionEvent:function(e,t,n,i){s.isNotEmpty(n)&&(e=A(e,n)),v("marking event as impression: "+e+", adId="+(i||o)+", value="+t),E(e,t,i)},reportOnlyOnce:function(e,t,n){k(e,t,n)},reportMediationOnlyOnce:function(e,t,n,i){!function(e,t,n,i){i=i||o,s.isNotEmpty(e)&&(e=g(e),s.isNotEmpty(n)&&(e=A(e,n)),d.hasOwnProperty(i)&&d[i].hasOwnProperty(e)||m(e,i),d[i][e].reportOnce=t,v("setting report once, adId="+i+", event="+e+", setting="+t))}(e,t,n,i)},resetTrackingHistory:function(e,t){!function(e,t){if(t=t||o,d&&d.hasOwnProperty(t)){var n=d[t];for(var i in n)b(i,t)&&!e?v("reset history skipping impression event="+i+", adId="+t):(d[t][i].reported=!1,v("reset history for adId= "+t+", event="+i))}}(e,t)},requestTracking:function(e,t){p("tracking requested for "+e+", adId="+(t||o)),P(e,null,t)},getTrackingUrls:function(e,t){return p("URLs requested for "+e+", adId="+(t||o)),function(e,t){t=t||o;var n=[],i=!1;if(d.hasOwnProperty(t)&&d[t].hasOwnProperty(e)){var r=d[t][e];if(r){var a=r.urls;if(a)for(var l=0;l<a.length;l++){var c=a[l],p="";"string"==typeof c?p=c:"object"==typeof c&&(p=c.url),s.isNotEmpty(p)&&(i=!0,p=C(p),"string"==typeof c?c=p:"object"==typeof c&&(c.url=p),n.push(c))}}}return i||u("No tracking urls found for adId="+t+", event = "+e),n}(e,t)},requestParamTracking:function(e,t,n){p("tracking requested for "+e+" with param="+s.objectToString(t)+", adId="+(n||o)),P(e,t,n)},requestMediationTracking:function(e,t,n,i){p("tracking requested for mediation event: "+e+", network="+t+" , params="+s.objectToString(n)+", adId="+(i||o)),function(e,t,n,i){var r=A(e,t),o=function(e){v("Creating params for mediation tracking from obj: "+s.objectToString(e));var t={},n="";if(e)for(var i in e)null!==e[i]&&"undefined"!==e[i]&&(n.length>0&&(n+="&"),n+=i+"="+e[i]);return t.value=n,t}(n);P(r,o,i)}(e,t,n,i)},requestErrorTracking:function(e,t,n,r){p("error reported: "+e+", type="+t+", desc="+n,NaN+(r||o));var a={},s="";1===t?(a.macro=i,a.value=e,s="error"):(a.value="error="+e,s="error"),this.requestParamTracking(s,a,r)},requestErrorTrackingUrls:function(e,t,n,a){var l={},c="";return 1===t?(l.macro=i,l.value=e,c="error"):(l.value="error="+e,c="error"),function(e,t,n){n=n||o;var i=[];if(d.hasOwnProperty(n)&&d[n].hasOwnProperty(e)){var a=d[n][e];if(a){var l=a.urls;if(l)for(var c=0;c<l.length;c++){var u=l[c],p="";if("string"==typeof u?p=u:"object"==typeof u&&(p=u.url),s.isNotEmpty(p)){if(t&&(p=T(p,t)),p.indexOf(r)>-1){var h=""+Math.floor(1e7*Math.random());p=T(p,{macro:r,value:h})}p=C(p),"string"==typeof u?u=p:"object"==typeof u&&(u.url=p),i.push(u)}}}}return i}(c,l,a)},requestProgressTracking:function(e,t){var n=x(e);p("Tracking requested for progress event, adId="+(t||o)+", offset="+e),this.requestTracking(n,t)},removeEvents:function(e){j(e)},removeEventsForKey:function(e,t){!function(e,t){if(t=t||o,d&&d.hasOwnProperty(t)){var n=d[t];for(var i in n)i.indexOf(e)>-1&&(delete d[t][i],v("Removing event: "+i+" for key="+e+" and adId="+t));0===d[t].length&&delete d[t]}}(e,t)},removeAllEvents:function(){d={}}}},2558:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});const i=n(8810)},3094:(e,t,n)=>{"use strict";n(9724).v.always("UserAgentParser","Version 0.0.1");var i=function(e,t){var n="function",r="object",o="model",a="name",s="type",l="vendor",d="version",c="console",u="mobile",p="tablet",h="smarttv",v="wearable",f={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},m={rgx:function(){var e,t,i,o,a,s,l={},d=0,c=arguments;for(i=0;i<c[1].length;i++)l[typeof(o=c[1][i])===r?o[0]:o]=void 0;for(;d<c.length&&!a;){var u=c[d],p=c[d+1];for(e=t=0;e<u.length&&!a;)if(a=u[e++].exec(this.getUA()))for(i=0;i<p.length;i++)s=a[++t],typeof(o=p[i])===r&&o.length>0?2===o.length?typeof o[1]===n?l[o[0]]=o[1].call(this,s):l[o[0]]=o[1]:3===o.length?typeof o[1]!==n||o[1].exec&&o[1].test?l[o[0]]=s?s.replace(o[1],o[2]):void 0:l[o[0]]=s?o[1].call(this,s,o[2]):void 0:4===o.length&&(l[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):l[o]=s||void 0;d+=2}return l},str:function(e,t){for(var n in t)if(typeof t[n]===r&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(f.has(t[n][i],e))return"?"===n?void 0:n}else if(f.has(t[n],e))return"?"===n?void 0:n;return e}},g={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[a,d],[/(opios)[\/\s]+([\w\.]+)/i],[[a,"Opera Mini"],d],[/\s(opr)\/([\w\.]+)/i],[[a,"Opera"],d],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[a,d],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[a,"IE"],d],[/(edge)\/((\d+)?[\w\.]+)/i],[a,d],[/(yabrowser)\/([\w\.]+)/i],[[a,"Yandex"],d],[/(comodo_dragon)\/([\w\.]+)/i],[[a,/_/g," "],d],[/(micromessenger)\/([\w\.]+)/i],[[a,"WeChat"],d],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[d,[a,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[a,/(.+)/,"$1 WebView"],d],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[d,[a,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[a,d],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[a,"UCBrowser"],d],[/(dolfin)\/([\w\.]+)/i],[[a,"Dolphin"],d],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[a,"Chrome"],d],[/;fbav\/([\w\.]+);/i],[d,[a,"Facebook"]],[/fxios\/([\w\.-]+)/i],[d,[a,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[d,[a,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[d,a],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[a,[d,m.str,g.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[a,d],[/(navigator|netscape)\/([\w\.-]+)/i],[[a,"Netscape"],d],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[a,d]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,l,[s,p]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[l,"Apple"],[s,p]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,o,[s,p]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[o,[l,"Amazon"],[s,p]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[o,m.str,g.device.amazon.model],[l,"Amazon"],[s,u]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,l,[s,u]],[/\((ip[honed|\s\w*]+);/i],[o,[l,"Apple"],[s,u]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,o,[s,u]],[/\(bb10;\s(\w+)/i],[o,[l,"BlackBerry"],[s,u]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[l,"Asus"],[s,p]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[o,"Xperia Tablet"],[s,p]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[l,"Sony"],[o,"Xperia Phone"],[s,u]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,o,[s,c]],[/android.+;\s(shield)\sbuild/i],[o,[l,"Nvidia"],[s,c]],[/(playstation\s[34portablevi]+)/i],[o,[l,"Sony"],[s,c]],[/(sprint\s(\w+))/i],[[l,m.str,g.device.sprint.vendor],[o,m.str,g.device.sprint.model],[s,u]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,o,[s,p]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[l,[o,/_/g," "],[s,u]],[/(nexus\s9)/i],[o,[l,"HTC"],[s,p]],[/(nexus\s6p)/i],[o,[l,"Huawei"],[s,u]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,o,[s,u]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[l,"Microsoft"],[s,c]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[l,"Microsoft"],[s,u]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[l,"Motorola"],[s,u]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[l,"Motorola"],[s,p]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,f.trim],[o,f.trim],[s,h]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[l,"Samsung"],[s,h]],[/\(dtv[\);].+(aquos)/i],[o,[l,"Sharp"],[s,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],o,[s,p]],[/smart-tv.+(samsung)/i],[l,[s,h],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[l,"Samsung"],o,[s,u]],[/sie-(\w+)*/i],[o,[l,"Siemens"],[s,u]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[l,"Nokia"],o,[s,u]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[l,"Acer"],[s,p]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],o,[s,p]],[/(lg) netcast\.tv/i],[l,o,[s,h]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[o,[l,"LG"],[s,u]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[l,"Lenovo"],[s,p]],[/linux;.+((jolla));/i],[l,o,[s,u]],[/((pebble))app\/[\d\.]+\s/i],[l,o,[s,v]],[/android.+;\s(glass)\s\d/i],[o,[l,"Google"],[s,v]],[/android.+;\s(pixel c)\s/i],[o,[l,"Google"],[s,p]],[/android.+;\s(pixel xl|pixel)\s/i],[o,[l,"Google"],[s,u]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[o,/_/g," "],[l,"Xiaomi"],[s,u]],[/android.+a000(1)\s+build/i],[o,[l,"OnePlus"],[s,u]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[s,f.lowerize],l,o]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[d,[a,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[a,d],[/rv\:([\w\.]+).*(gecko)/i],[d,a]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[a,d],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[a,[d,m.str,g.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[a,"Windows"],[d,m.str,g.os.windows.version]],[/\((bb)(10);/i],[[a,"BlackBerry"],d],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[a,d],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[a,"Symbian"],d],[/\((series40);/i],[a],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[a,"Firefox OS"],d],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[a,d],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[a,"Chromium OS"],d],[/(sunos)\s?([\w\.]+\d)*/i],[[a,"Solaris"],d],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[a,d],[/(haiku)\s(\w+)/i],[a,d],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[a,"iOS"],[d,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[a,"Mac OS"],[d,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[a,d]]};if(!(this instanceof i))return new i(e,t).getResult();var A=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""),b=t?f.extend(y,t):y;return this.getBrowser=function(){var e=m.rgx.apply(this,b.browser);return e.major=f.major(e.version),e},this.getDevice=function(){return m.rgx.apply(this,b.device)},this.getEngine=function(){return m.rgx.apply(this,b.engine)},this.getOS=function(){return m.rgx.apply(this,b.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice()}},this.getUA=function(){return A},this};e.exports=i},3837:(e,t,n)=>{"use strict";n.d(t,{y:()=>i});const i=n(3094)},568:(e,t,n)=>{"use strict";var i,r=n(9724).v,o=(i=window.document.featurePolicy)&&i.allowedFeatures&&i.allowedFeatures().includes("attribution-reporting")?(r.log("Attribution reporting is SUPPORTED"),!0):(r.log("Attribution reporting is NOT SUPPORTED"),!1);function a(e,t,i,r,o,s){var l,d=0,c=0,u=!1,p=n(4427).q,h=n(5079).y,v=!0,f=function(e){p.logDebug(e,"URL Loader")};if(o&&void 0!==o.withCredentials&&(v=o.withCredentials),window.XMLHttpRequest)l=new XMLHttpRequest;else if(window.ActiveXObject)try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}l?(l.onreadystatechange=function(){if(4===l.readyState)if(200===l.status){if(f("duration: "+c+", response length: "+l.responseText.length),u&&l.responseText&&l.responseText.length>2048){var e=8*l.responseText.length*1e3/(1024*Math.max(1,c)),t=parseInt(e.toString());f("Bandwidth: "+t);try{h.setGenericData("anxBandwidth",t)}catch(e){}}i&&i.call(this,void 0,l.responseText,l)}else l.status>=400&&l.status<600&&i&&i.call(this,l.status,"",l);else 2===l.readyState?d=(new Date).getTime():3===l.readyState&&d>0&&(u=!0,c=(new Date).getTime()-d)},l.onerror=function(){if(v){var n=o||{};n.withCredentials=!1,a(e,t,i,r,n,s)}else if(i){var d=0===l.status?"404":l.status.toString();i.call(this,d,"",l)}},l.ontimeout=function(){i&&i.call(this,"Timeout","",l)},l.open(s,e),r&&(l.timeout=r),l.withCredentials=v,d=0,"POST"===s?l.send(t):l.send()):i&&i.call(this,"406","")}e.exports={load:function(e,t,n,i){var r=!0;!1===i&&(r=!1),a(e,null,t,n,{withCredentials:r},"GET")},loadPost:function(e,t,n,i){a(e,t,n,i,{withCredentials:!0},"POST")},trackPixel:function(e,t){!function(e,t){if(r.log("Logging Event: "+t+" at url:"+e),"string"==typeof e)new Image(1,1).src=e;else if("object"==typeof e){var n;if(e.url)if(o)if("SINGLE-PING"===e.attributionType){r.log("Event = "+t+" SINGLE-PING empty attributionsrc"),n=new Image(1,1);try{n.setAttribute("attributionsrc","")}catch(e){}n.src=e.url}else if("DOUBLE-PING"===e.attributionType){var i=e.attributionSrc?e.attributionSrc:"";r.log("Event = "+t+" DOUBLE-PING attributionsrc = "+i),n=new Image(1,1);try{n.setAttribute("attributionsrc",i)}catch(e){}n.src=e.url}else new Image(1,1).src=e.url;else new Image(1,1).src=e.url}}(e,t)}}},7886:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});const i=n(568)},3521:e=>{"use strict";e.exports={parse:function(e,t,n){function i(e){var t,i,r,o=e.parentNode&&e.parentNode.parentNode?o=e.parentNode.parentNode:null,a="",s="unknown",l="unknown",d=function(){return s+" "+l};if(!o)return d();if(!(i=n.getSubNodes(o,"UniversalAdId")))return d();for(t=0;t<i.length;t++)r=i[t],s=n.getNodeAttributeValue(r,"idRegistry")||"unknown",l=n.getNodeValue(r)||"unknown",a.length>0&&(a+=","),a+=d();return a}var r=n.getNodeAttributeValue(t,"required");r&&r.length>0&&(e.required=r);var o=n.getSubNodes(t,"Companion");if(o)for(var a=0;a<o.length;a++){var s=o[a],l={},d=n.getNodeAttributeNumberValue(s,"width",-1),c=n.getNodeAttributeNumberValue(s,"height",-1);if(!(d<=0||c<=0)){l.width=d,l.height=c;var u=n.getNodeAttributeValue(s,"id");u&&(l.id=u),(u=n.getNodeAttributeNumberValue(s,"assetWidth",-1))>0&&(l.assetWidth=u),(u=n.getNodeAttributeNumberValue(s,"assetHeight",-1))>0&&(l.assetHeight=u),(u=n.getNodeAttributeNumberValue(s,"expandedWidth",-1))>0&&(l.expandedWidth=u),(u=n.getNodeAttributeNumberValue(s,"expandedHeight",-1))>0&&(l.expandedHeight=u),(u=n.getNodeAttributeValue(s,"apiFramework"))&&(l.apiFramework=u),(u=n.getNodeAttributeValue(s,"adSlotID"))&&(l.adSlotID=u);var p=n.getNodeAttributeNumberValue(s,"pxratio",1);1!==p&&(l.pxratio=p),(u=n.getNodeAttributeValue(s,"required"))&&(l.required=u),(u=n.getNodeAttributeValue(s,"renderingMode"))&&(l.renderingMode=u),(u=n.getSubNodeValue(s,"AltText"))&&(l.AltText=u),(u=n.getSubNodeValue(s,"AdParameters"))&&(l.AdParameters=u);var h=n.getSubNode(s,"StaticResource");if(h&&(u=n.getNodeAttributeValue(h,"creativeType"))){if("video/x-flv"===u||"video/x-f4v"===u||"video/f4v"===u||"application/x-shockwave-flash"===u)continue;var v={type:u};(u=n.getNodeValues(h))&&(v.src=u,l.StaticResource=v)}(u=n.getSubNodeWholeValue(s,"IFrameResource"))&&(l.IFrameResource=u),(u=n.getSubNodeWholeValue(s,"HTMLResource"))&&(l.HTMLResource=u),(u=n.getSubNodeWholeValue(s,"CompanionClickThrough"))&&(l.CompanionClickThrough=n.prepareAttributionData(n.getSubNode(s,"CompanionClickThrough"),u));var f,m,g,y,A=["UNIVERSALADID"],b={UNIVERSALADID:i(s)},k=n.getSubNodes(s,"CompanionClickTracking");if(k)for(l.CompanionClickTracking=[],f=0;f<k.length;f++)m=k[f],(g=n.getNodeValues(m))&&(g=n.replaceMacrosWithValues(g,A,b,-1),(y=n.prepareAttributionData(m,g))&&"string"!=typeof y&&y.url&&(y.url=n.replaceMacrosWithValues(y.url,A,b,-1)),l.CompanionClickTracking.push(y));var E=n.getSubNodes(s,"Tracking");if(E)for(l.TrackingEvents=[],f=0;f<E.length;f++){m=E[f];var w=n.getNodeAttributeValue(m,"event");g=n.getNodeValues(m),w&&g&&(g=n.replaceMacrosWithValues(g,A,b,-1),(y=n.prepareAttributionData(m,g))&&"string"!=typeof y&&y.url&&(y.url=n.replaceMacrosWithValues(y.url,A,b,-1)),l.TrackingEvents.push({eventType:w,url:y}))}e.companions.push(l)}}},mergeCompanions:function(e,t){"unknown"===e.required&&(e.required=t.required),e.companions=e.companions.concat(t.companions)},createCompanionNode:function(e,t){var n,i,r,o,a=e.createElement("Companion"),s=["id","width","height","assetWidth","assetHeight","expandedWidth","expandedHeight","apiFramework","adSlotID","required"];for(n=0;n<s.length;n++)t.hasOwnProperty(s[n])&&((r=e.createAttribute(s[n])).value=t[s[n]],a.setAttributeNode(r));t.hasOwnProperty("StaticResource")&&(i=e.createElement("StaticResource"),(r=e.createAttribute("creativeType")).value=t.StaticResource.type,i.setAttributeNode(r),o=e.createCDATASection(t.StaticResource.src),i.appendChild(o),a.appendChild(i));var l=["AdParameters","IFrameResource","HTMLResource","CompanionClickThrough"];for(n=0;n<l.length;n++)t.hasOwnProperty(l[n])&&(i=e.createElement(l[n]),o=e.createCDATASection(t[l[n]]),i.appendChild(o),a.appendChild(i));if(t.hasOwnProperty("AltText")){i=e.createElement("AltText");try{i.innerHTML=t.AltText}catch(e){try{i.textContent=t.AltText}catch(e){}}a.appendChild(i)}if(t.hasOwnProperty("CompanionClickTracking"))for(n=0;n<t.CompanionClickTracking.length;n++){var d=e.createElement("CompanionClickTracking");if("string"==typeof t.CompanionClickTracking[n])o=e.createCDATASection(t.CompanionClickTracking[n]);else{if("object"!=typeof t.CompanionClickTracking[n]||!t.CompanionClickTracking[n].url)continue;o=e.createCDATASection(t.CompanionClickTracking[n].url)}d.appendChild(o),a.appendChild(d)}if(t.hasOwnProperty("TrackingEvents")){for(i=e.createElement("TrackingEvents"),n=0;n<t.TrackingEvents.length;n++){var c=e.createElement("Tracking");if((r=e.createAttribute("event")).value=t.TrackingEvents[n].eventType,c.setAttributeNode(r),"string"==typeof t.TrackingEvents[n].url)o=e.createCDATASection(t.TrackingEvents[n].url);else{if("object"!=typeof t.TrackingEvents[n].url||!t.TrackingEvents[n].url.url)continue;o=e.createCDATASection(t.TrackingEvents[n].url.url)}c.appendChild(o),i.appendChild(c)}a.appendChild(i)}return a}}},6323:e=>{"use strict";var t={parse:function(e,t,n){var i=n.getSubNodes(t,"Icon");if(i)for(var r=0;r<i.length;r++){var o=i[r],a={},s=n.getNodeAttributeNumberValue(o,"width",-1),l=n.getNodeAttributeNumberValue(o,"height",-1),d=n.getNodeAttributeValue(o,"program"),c=n.getNodeAttributeValue(o,"xPosition"),u=n.getNodeAttributeValue(o,"yPosition");if(!(s<=0||l<=0||0===d.length||0===c.length||0===u.length)){a.width=s,a.height=l,a.program=d,a.xPosition=c,a.yPosition=u;var p=n.getNodeAttributeValue(o,"apiFramework");p&&(a.apiFramework=p);var h=n.getNodeAttributeNumberValue(o,"pxratio",1);if(1!==h&&(a.pxratio=h),p=n.getNodeAttributeValue(o,"offset")){if(isNaN(Date.parse("January 1, 1970 "+p)))continue;a.offset=p}if(p=n.getNodeAttributeValue(o,"duration")){if(isNaN(Date.parse("January 1, 1970 "+p)))continue;a.duration=p}(p=n.getNodeAttributeValue(o,"altText"))&&(a.altText=p),(p=n.getNodeAttributeValue(o,"hoverText"))&&(a.hoverText=p);var v=n.getSubNode(o,"StaticResource");if(v&&(p=n.getNodeAttributeValue(v,"creativeType"))){if("video/x-flv"===p||"video/x-f4v"===p||"video/f4v"===p||"application/x-shockwave-flash"===p)continue;var f={type:p};(p=n.getNodeValues(v))&&(f.src=p,a.StaticResource=f)}if((p=n.getSubNodeWholeValue(o,"IFrameResource"))&&(a.IFrameResource=p),(p=n.getSubNodeWholeValue(o,"HTMLResource"))&&(a.HTMLResource=p),a.StaticResource||a.IFrameResource||a.HTMLResource){var m,g=n.getSubNode(o,"IconClicks");if(g){var y=n.getSubNode(g,"IconClickThrough");if(y&&(a.IconClickThrough=n.prepareAttributionData(y,n.getNodeValues(y))),p=n.getSubNodes(g,"IconClickTracking")){a.IconClickTracking=[];for(var A=0;A<p.length;A++)m=n.prepareAttributionData(p[A],n.getNodeValues(p[A])),a.IconClickTracking.push(m)}}var b=n.getSubNodes(o,"IconViewTracking");if(b){a.IconViewTracking=[];for(var k=0;k<b.length;k++)m=n.prepareAttributionData(b[k],n.getNodeValues(b[k])),a.IconViewTracking.push(m)}!function(e,t){for(var n=0;n<e.length;n++)e[n].program===t&&e.splice(n,1)}(e,d),e.push(a)}}}},createIconNode:function(e,t){var n,i,r,o,a=e.createElement("Icon"),s=["width","height","program","xPosition","yPosition","apiFramework","offset","duration"];for(n=0;n<s.length;n++)t.hasOwnProperty(s[n])&&((r=e.createAttribute(s[n])).value=t[s[n]],a.setAttributeNode(r));t.hasOwnProperty("StaticResource")&&(i=e.createElement("StaticResource"),(r=e.createAttribute("creativeType")).value=t.StaticResource.type,i.setAttributeNode(r),o=e.createCDATASection(t.StaticResource.src),i.appendChild(o),a.appendChild(i));var l=["IFrameResource","HTMLResource","IconViewTracking"];for(n=0;n<l.length;n++)t.hasOwnProperty(l[n])&&(i=e.createElement(l[n]),o=e.createCDATASection(t[l[n]]),i.appendChild(o),a.appendChild(i));if(t.hasOwnProperty("IconClickThrough")||t.hasOwnProperty("IconClickTracking")){var d=e.createElement("IconClicks");t.hasOwnProperty("IconClickThrough")&&(i=e.createElement("IconClickThrough"),"string"==typeof t.IconClickThrough?o=e.createCDATASection(t.IconClickThrough):"object"==typeof t.IconClickThrough&&t.IconClickThrough.url&&(o=e.createCDATASection(t.IconClickThrough.url)),i.appendChild(o),d.appendChild(i)),t.hasOwnProperty("IconClickTracking")&&(i=e.createElement("IconClickTracking"),"string"==typeof t.IconClickTracking?o=e.createCDATASection(t.IconClickTracking):"object"==typeof t.IconClickTracking&&t.IconClickTracking.url&&(o=e.createCDATASection(t.IconClickTracking.url)),i.appendChild(o),d.appendChild(i)),a.appendChild(d)}return a}};e.exports=t},4389:(e,t,n)=>{"use strict";var i=n(1719);e.exports=function(e,t){var r=n(9724).v,o="VAST Parser",a=e,s=new i;function l(e){var t=function(e){var t=e.indexOf("<"),n=e.substr(-1===t?0:t);return-1!==(t=n.lastIndexOf(">"))&&(n=n.substr(0,t+1)),n}(e),n=null;if(void 0!==window.DOMParser){if("parsererror"===(n=(new DOMParser).parseFromString(t,"text/xml")).documentElement.nodeName){try{r.error(o,"Error reason = "+n.documentElement.childNodes[0].nodeValue)}catch(e){}return null}}else{if(void 0===window.ActiveXObject)return r.error(o,"Failed to get vast xml parser"),null;try{if((n=new window.ActiveXObject("Microsoft.XMLDOM")).loadXML(t),0!==n.parseError.errorCode)return r.error(o,n.parseError),null}catch(e){return r.error(o,"Failed to parse vast xml by window.ActiveXObject(Microsoft.XMLDOM)",e),null}}return n}var d=l(a[0]);if(d){var c=s.getSubNode(d,"VAST"),u=d.createAttribute("apn_waterfall");u.value=!0,c.setAttributeNode(u),t&&((u=d.createAttribute("apn_fallback")).value=!0,c.setAttributeNode(u));for(var p=[],h=0;h<a.length;h++){var v=l(a[h]),f=s.getSubNode(v,"VAST"),m=s.getSubNodes(f,"Ad");if(m&&m.length>0)for(var g=0;g<m.length;g++)p.push(m[g])}p.sort((function(e,t){return s.getNodeAttributeNumberValue(e,"sequence")-s.getNodeAttributeNumberValue(t,"sequence")}));var y=(0,n(3837).y)().browser.name.toLowerCase();for("ie"===y?c.textContent="":c.innerHTML="",h=0;h<p.length;h++)c.appendChild(p[h]);this.getVastXml=function(){if(!d)return"";var e;if("edge"===y)e=d.childNodes[0].outerHTML;else if("ie"===y){for(var t=d.getElementsByTagName("AdParameters"),n=0;n<t.length;n++)t[n].textContent.indexOf("]]>")>0&&"<![CDATA["!==t[n].textContent.substr(0,9)&&(t[n].textContent=t[n].textContent.replace(/]]>/g,"]]]]><![CDATA[>"),t[n].textContent="<![CDATA["+t[n].textContent+"]]>");e=(e=(e=(new XMLSerializer).serializeToString(d)).replace(/&lt;/g,"<")).replace(/&gt;/g,">")}else e=(new XMLSerializer).serializeToString(d);return e}}}},5730:(e,t,n)=>{"use strict";var i=n(1719),r=n(3521),o=n(6323);e.exports=function(e,t,a,s,l,d,c,u,p){var h=n(9724).v,v="VAST Parser",f=e,m=t,g=a,y=p,A=l,b=d,k=s,E=c,w=u,T=new i,S=function(e){var t=function(e){var t=e.indexOf("<"),n=e.substr(-1===t?0:t);return-1!==(t=n.lastIndexOf(">"))&&(n=n.substr(0,t+1)),n}(e),n=null;if(void 0!==window.DOMParser){if("parsererror"===(n=(new DOMParser).parseFromString(t,"text/xml")).documentElement.nodeName){try{h.error(v,"Error reason = "+n.documentElement.childNodes[0].nodeValue)}catch(e){}return null}}else{if(void 0===window.ActiveXObject)return h.error(v,"Failed to get vast xml parser"),null;try{if((n=new window.ActiveXObject("Microsoft.XMLDOM")).loadXML(t),0!==n.parseError.errorCode)return h.error(v,n.parseError),null}catch(e){return h.error(v,"Failed to parse vast xml by window.ActiveXObject(Microsoft.XMLDOM)",e),null}}return n}(e.vastXml);function I(e,t){var n=S.createCDATASection(t);e.appendChild(n)}!function(e){if(S){var t=T.getSubNode(S,"VAST");if(t){var n=S.createAttribute("version");n.value=e,t.setAttributeNode(n)}}}(e.vastVersion),function(){if(S){var e=T.getSubNode(S,"VAST");if(e){var t=T.getSubNodes(e,"Ad");if(t&&t.length>0)for(var n=0;n<t.length;n++){if(g){var i=S.createAttribute("notifyurl");i.value=g,t[n].setAttributeNode(i)}if(k&&"rtb"===k){var r=S.createAttribute("rtb");r.value="true",t[n].setAttributeNode(r)}var o=S.createAttribute("sequence");if(o.value=f.sequence.toString(),t[n].setAttributeNode(o),A){var a=S.createAttribute("buyerMemberId");a.value=A,t[n].setAttributeNode(a)}if(E){var s=S.createAttribute("viewabilityConfig");s.value=E,t[n].setAttributeNode(s)}if(y){var l=S.createAttribute("creativeId");l.value=y,t[n].setAttributeNode(l)}if(b){var d=S.createAttribute("brandCategoryId");d.value=b,t[n].setAttributeNode(d)}}}}}();var C=null;function P(e,t){var n=T.getSubNodes(e,"Icon");if(n&&n.length>0)for(var i=0;i<n.length;i++)if(T.getNodeAttributeValue(n[i],"program").toLowerCase()===t.toLowerCase())return!0;return!1}function x(e,t){var n,i,o={companions:[]};r.parse(o,e,T);var a=o.companions;if(t.StaticResource||t.IFrameResource||t.HTMLResource){var s=!1;for(i=0;i<a.length;i++)if(t.width===a[i].width&&t.height===a[i].height){s=!0;break}s||(n=r.createCompanionNode(S,t),e.appendChild(n))}else{var l=!1;for(i=0;i<a.length;i++)if(t.width===a[i].width&&t.height===a[i].height&&(t.id&&t.id===a[i].id||!t.id)){t.CompanionClickTracking&&(a[i].CompanionClickTracking||(a[i].CompanionClickTracking=[]),a[i].CompanionClickTracking=a[i].CompanionClickTracking.concat(t.CompanionClickTracking)),t.TrackingEvents&&(a[i].TrackingEvents||(a[i].TrackingEvents=[]),a[i].TrackingEvents=a[i].TrackingEvents.concat(t.TrackingEvents)),l=!0;break}if(l){for(;e.firstChild;)e.removeChild(e.firstChild);for(var d=0;d<a.length;d++)n=r.createCompanionNode(S,a[d]),e.appendChild(n)}}}this.addTrackers=function(){if(!S)return"";var e,t=function(){var e;if(m){var t=T.getSubNode(S,"VAST");(e=S.createAttribute("adtoken")).value=m,t.setAttributeNode(e)}var i,r,o,a=T.getSubNode(S,"InLine");if(!a)return null;if(f.extImpressionUrls&&"string"==typeof f.extImpressionUrls){var s=JSON.parse(f.extImpressionUrls);if(Array.isArray(s)&&s.length>0)for(i=0;i<s.length;i++)I(r=S.createElement("Impression"),s[i]),a.appendChild(r);delete f.extImpressionUrls}if(w&&w.impressions)for(i=0;i<w.impressions.length;i++)w.impressions[i]&&(I(r=S.createElement("Impression"),w.impressions[i]),a.appendChild(r));if(f.extErrorUrls&&"string"==typeof f.extErrorUrls){var l=JSON.parse(f.extErrorUrls);if(Array.isArray(l)&&l.length>0)for(i=0;i<l.length;i++)I(o=S.createElement("Error"),l[i]),a.appendChild(o);delete f.extErrorUrls}if(w&&w.errors)for(i=0;i<w.errors.length;i++)w.errors[i]&&(I(o=S.createElement("Error"),w.errors[i]),a.appendChild(o));if(f.extViewableImpression&&"string"==typeof f.extViewableImpression){var d=JSON.parse(f.extViewableImpression),c=S.createElement("ViewableImpression");if(Array.isArray(d.viewable)&&d.viewable.length>0)for(i=0;i<d.viewable.length;i++){var u=S.createElement("Viewable");I(u,d.viewable[i]),c.appendChild(u)}if(Array.isArray(d.notViewable)&&d.notViewable.length>0)for(i=0;i<d.notViewable.length;i++){var p=S.createElement("NotViewable");I(p,d.notViewable[i]),c.appendChild(p)}if(Array.isArray(d.undetermined)&&d.undetermined.length>0)for(i=0;i<d.undetermined.length;i++){var h=S.createElement("ViewUndetermined");I(h,d.undetermined[i]),c.appendChild(h)}a.appendChild(c),delete f.extViewableImpression}if(f.extVerifications&&"string"==typeof f.extVerifications){var v,g=JSON.parse(f.extVerifications),y=T.getSubNode(a,"AdVerifications");y||(y=S.createElement("AdVerifications"),a.appendChild(y));var A=function(t){var n=S.createElement("JavaScriptResource");I(n,t.url),v.appendChild(n),t.apiFramework&&((e=S.createAttribute("apiFramework")).value=t.apiFramework,n.setAttributeNode(e)),t.browserOptional&&((e=S.createAttribute("browserOptional")).value=t.browserOptional,n.setAttributeNode(e))};for(i=0;i<g.length;i++){var b=g[i];if(v=S.createElement("Verification"),b.vendor&&((e=S.createAttribute("vendor")).value=b.vendor,v.setAttributeNode(e)),b.jsResources&&b.jsResources.forEach(A),b.trackingEvents){var k=S.createElement("TrackingEvents");for(var E in b.trackingEvents){var P=S.createElement("Tracking");(e=S.createAttribute("event")).value=E,P.setAttributeNode(e),I(P,b.trackingEvents[E]),k.appendChild(P)}v.appendChild(k)}if(b.verificationParameters){var x=S.createElement("VerificationParameters");I(x,b.verificationParameters),v.appendChild(x)}a.appendChild(v)}}var j,_=(0,n(3837).y)().browser.name.toLowerCase();if(f.extExtensions&&"string"==typeof f.extExtensions){var V=f.extExtensions;V.length>0&&((j=T.getSubNode(a,"Extensions"))?"ie"===_?j.textContent=j.textContent.toString()+V:j.innerHTML=j.innerHTML.toString()+V:(j=S.createElement("Extensions"),a.appendChild(j),"ie"===_?j.textContent=V:j.innerHTML=V)),delete f.extExtensions}if(f.hasOwnProperty("fallbackIndex")){(j=T.getSubNode(a,"Extensions"))||(j=S.createElement("Extensions"),a.appendChild(j));var N=!1,D=T.getSubNodes(j,"Extension");if(D&&D.length>0)for(i=0;i<D.length;i++)if("waterfall"===T.getNodeAttributeValue(D[i],"type")){N=!0,D[i].setAttribute("fallback_index",f.fallbackIndex);break}if(!N){var M=S.createElement("Extension");(e=S.createAttribute("type")).value="waterfall",M.setAttributeNode(e);var O=S.createAttribute("fallback_index");O.value=f.fallbackIndex,M.setAttributeNode(O),j.appendChild(M)}}(C=T.getSubNode(a,"Creatives"))||(C=S.createElement("Creatives"),a.appendChild(C));var R=T.getSubNode(C,"Linear");if(!R){var U=S.createElement("Creative");C.appendChild(U),R=S.createElement("Linear"),U.appendChild(R)}return R}();if(!t)return"";!function(e){var t,n;if(f.extTrackingUrls&&"string"==typeof f.extTrackingUrls&&f.extTrackingUrls.length>5){var i=JSON.parse(f.extTrackingUrls),r=T.getSubNode(e,"TrackingEvents");for(var a in r||(r=S.createElement("TrackingEvents"),e.appendChild(r)),i){var s=i[a];for(t=0;t<s.length;t++){var l=S.createElement("Tracking"),d=S.createAttribute("event");d.value=a,l.setAttributeNode(d),I(l,s[t]),r.appendChild(l)}}delete f.extTrackingUrls}if(f.extClickUrls&&"string"==typeof f.extClickUrls){var c=JSON.parse(f.extClickUrls);if(Array.isArray(c)&&c.length>0&&((n=T.getSubNode(e,"VideoClicks"))||(n=S.createElement("VideoClicks"),e.appendChild(n)),!T.getSubNode(n,"ClickThrough"))){var u=S.createElement("ClickThrough");I(u,c[0]),n.appendChild(u)}delete f.extClickUrls}if(f.extCustomClicks&&"string"==typeof f.extCustomClicks){var p=JSON.parse(f.extCustomClicks);if(Array.isArray(p)&&p.length>0)for((n=T.getSubNode(e,"VideoClicks"))||(n=S.createElement("VideoClicks"),e.appendChild(n)),t=0;t<p.length;t++){var h=S.createElement("CustomClick");I(h,p[t]),n.appendChild(h)}delete f.extCustomClicks}if(f.extClickTrackingUrls&&"string"==typeof f.extClickTrackingUrls){var v=JSON.parse(f.extClickTrackingUrls);if(Array.isArray(v)&&v.length>0)for((n=T.getSubNode(e,"VideoClicks"))||(n=S.createElement("VideoClicks"),e.appendChild(n)),t=0;t<v.length;t++){var m=S.createElement("ClickTracking");I(m,v[t]),n.appendChild(m)}delete f.extClickTrackingUrls}if(f.extIcons&&"string"==typeof f.extIcons){var g=JSON.parse(f.extIcons);if(Array.isArray(g)&&g.length>0){var y=T.getSubNode(e,"Icons");for(y||(y=S.createElement("Icons"),e.appendChild(y)),t=0;t<g.length;t++)if(!P(y,g[t].program)){var A=o.createIconNode(S,g[t]);A&&y.appendChild(A)}}delete f.extIcons}}(t),C&&function(){if(f.extCompanions&&"string"==typeof f.extCompanions){var e=JSON.parse(f.extCompanions);if(Array.isArray(e.companions)&&e.companions.length>0){var t,n=T.getSubNode(C,"CompanionAds");n||(n=S.createElement("CompanionAds"),C.appendChild(n)),"unknown"!==e.required&&((t=S.createAttribute("required")).value=e.required,n.setAttributeNode(t));for(var i=0;i<e.companions.length;i++)x(n,e.companions[i])}}}();var i=(0,n(3837).y)().browser.name.toLowerCase();if("edge"===i)e=S.childNodes[0].outerHTML;else if("ie"===i){for(var r=S.getElementsByTagName("AdParameters"),a=0;a<r.length;a++)r[a].textContent.indexOf("]]>")>0&&"<![CDATA["!==r[a].textContent.substr(0,9)&&(r[a].textContent=r[a].textContent.replace(/]]>/g,"]]]]><![CDATA[>"),r[a].textContent="<![CDATA["+r[a].textContent+"]]>");e=(e=(e=(new XMLSerializer).serializeToString(S)).replace(/&lt;/g,"<")).replace(/&gt;/g,">")}else e=(new XMLSerializer).serializeToString(S);return e}}},2532:(e,t,n)=>{"use strict";var i=n(1719),r=n(3521),o=n(6323),a=(0,n(3837).y)(),s=function(e,t,s){var l,d,c,u,p={PARSING:"100",SCHEMA_ERROR:"101",VAST_VERSION:"102",NOT_EXPECTED_AD_TYPE:"200",AD_CATEGORY:"204",AD_CATEGORY_VIOLATION:"205",WRAPPER_GENERAL:"300",WRAPPER_TIMEOUT:"301",WRAPPER_LIMIT:"302",WRAPPER_NO_RESPONSE:"303",MEDIA_INVALID:"403",UNDEFINED:"900"},h=-1,v=n(9724).v,f="VAST Parser",m=null,g=s,y=g&&g.wrapperLimit&&g.wrapperLimit>0?g.wrapperLimit:5,A=0,b=null,k=e,E=t&&t>0?t:1e3,w=[],T=null,S=[],I=[],C={},P=[],x=[],j=[],_=[],V=[],N=[],D="",M="",O=0,R="",U=0,L=null,B=[],F={},W=[],H=[],z=[],q=[],G=[],J={viewable:[],notViewable:[],undetermined:[]},X=[],Y=null,Q={},K="unknown unknown",Z="unknown unknown",$=null,ee={},te=new i(s),ne=!1,ie="",re=!1,oe="video",ae=[],se=-1,le=!1,de=n(8222).o,ce=g.fromMediation,ue=ce&&g.fromMediation.waterfall,pe=ce&&g.fromMediation.rtbFallback,he=[],ve=!1,fe={},me="",ge={},ye="",Ae={},be="",ke={},Ee="",we={},Te="",Se=0,Ie=0,Ce=s.vmap,Pe="",xe={hops:[]};function je(e,t){if(e&&e.length>0)for(var n=0;n<e.length;n++)e[n]=e[n].replace("[ERRORCODE]",t)}function _e(){if(!u){u="-1";var e=[];if(g){var t=!g.overlayPlayer,n=!g.overlayPlayer;g.hasOwnProperty("skippable")&&g.skippable.enabled&&e.push("skippable"),g.hasOwnProperty("initialPlayback")&&(t="auto"===g.initialPlayback),g.hasOwnProperty("initialAudio")&&(n="off"===g.initialAudio),t?e.push(n?"mautoplayed":"autoplayed"):e.push("optin"),u=e.join()}}return u}function Ve(e,t){for(var n=e,i="AD DETECTED="+("SUCCESS"===t.substr(0,7)?"SUCCESS":"NONE")+" :: Reason="+t+", playerTechnology="+(g.hasOwnProperty("playerTechnology")?JSON.stringify(g.playerTechnology):"unknown")+", platform="+de.getPlatformType()+", Ad tree path=",r="";-1!==n;){var o=ae[n].children[0];if(o){var a=te.getNodeAttributeValue(o,"id");r.length>0&&(r=" -> "+r),r=a+r}n=ae[n].parentIdx}v.info(f,i+r)}function Ne(e){var t=te.getSubNodes(e,"Extension");if(t&&t.length>0)for(var n=0;n<t.length;n++){var i=te.getNodeAttributeValue(t[n],"type");if(i&&"waterfall"===i&&(i=te.getNodeAttributeValue(t[n],"fallback_index"))&&i.length>0)return parseInt(i)}return-1}function De(){return g.hasOwnProperty("slotNumber")?g.slotNumber:1}function Me(){return g.hasOwnProperty("slotNumber")?g.slotNumber:h}function Oe(e,t){for(var n=0;n<e.length;n++)if(e[n].toString()===t.toString())return!0;return!1}function Re(e,t){for(var n=0;n<e.length;n++)if("string"==typeof e[n]){if(e[n]===t)return!0}else if("object"==typeof e[n]&&!(e[n]instanceof Array)&&e[n].url===t)return!0;return!1}function Ue(e,t,n,i){if(e){var r=te.getSubNode(e,"Linear",0);if(r){var o=null,a=te.getSubNode(r,"VideoClicks");if(a){var s,l,d=te.getSubNode(a,"ClickThrough");d&&(o=te.getNodeValues(d))&&!Re(t,o)&&(s=te.prepareAttributionData(d,o),t.push(s)),0===t.length&&ee.url&&t.push(ee.url);var c=te.getSubNodes(a,"ClickTracking");if(c)for(l=0;l<c.length;l++)if(d=c[l],(o=te.getNodeValues(d))&&!Re(n,o)){var u={ADTYPE:oe,INVENTORYSTATE:_e(),ADCOUNT:De(),PODSEQUENCE:Me()};o=te.resolveMacros(o,!0,u),s=te.prepareAttributionData(d,o,u),n.push(s)}if(c=te.getSubNodes(a,"CustomClick"))for(l=0;l<c.length;l++)d=c[l],(o=te.getNodeValues(d))&&!Re(i,o)&&(s=te.prepareAttributionData(d,o),i.push(s))}else ee.url&&t.push(ee.url)}}}function Le(e,t){var n=e.indexOf("%");if(n>0)return t&&t>0?Number(e.substring(0,n)):0;var i=(n=e.indexOf("."))>0?Number(e.substring(n+1)):0;n>0&&(e=e.substring(0,n));var r=e.split(":");return 3===r.length?1e3*(3600*Number(r[0])+60*Number(r[1])+Number(r[2]))+i:0}function Be(e){return"video/x-flv"===e||"video/x-f4v"===e||"video/f4v"===e||"application/x-shockwave-flash"===e}function Fe(e,t,n,i){var r=null;if(e){if((r={}).type=te.getNodeAttributeValue(e,"type"),-1===i.indexOf(r.type)&&i.push(r.type),!r.type||0===r.type.length)return r.error="Missing type",r;var o="video/mp4"===r.type?"":te.getNodeAttributeValue(e,"codec");if(o&&o.length>0&&(o=(o=o.trim()).length>2?o:"").length>0&&(r.codec=o),!function(e,t){return de.canPlay(e,t)}(r.type,o))return r.error="Media is not capable. type: "+r.type+", codec: "+o,r;if(g&&!function(e){if(g.playerTechnology&&Array.isArray(g.playerTechnology)&&g.playerTechnology.length>0){for(var t=!1,n=0;n<g.playerTechnology.length;n++)if(!Be(e.toLowerCase())){t=!0;break}if(!t)return!1}return!(g.hasOwnProperty("supportVpaid")&&!g.supportVpaid&&function(e){return"application/javascript"===e||"application/x-javascript"===e}(e.toLowerCase()))}(r.type))return r.error="Type is invalid. type: "+r.type,r;r.url=t,r.variation="Media#"+n,r.delivery=te.getNodeAttributeValue(e,"delivery");var a=te.getNodeAttributeNumberValue(e,"bitrate",-1);-1!==a?r.bitrate=a:(-1!==(a=te.getNodeAttributeNumberValue(e,"minBitrate",-1))&&(r.minBitrate=a),-1!==(a=te.getNodeAttributeNumberValue(e,"maxBitrate",-1))&&(r.maxBitrate=a)),r.width=te.getNodeAttributeNumberValue(e,"width"),r.height=te.getNodeAttributeNumberValue(e,"height");var s=te.getNodeAttributeValue(e,"scalable");s.length>0&&(r.scalable=te.getNodeAttributeBooleanValue(e,"scalable",!0)),(s=te.getNodeAttributeValue(e,"maintainAspectRatio")).length>0&&(r.maintainAspectRatio=te.getNodeAttributeBooleanValue(e,"maintainAspectRatio",!0));var l=te.getNodeAttributeValue(e,"apiFramework");l&&l.length>0&&(r.apiFramework=l.toUpperCase());var d=te.getNodeAttributeValue(e,"id");d&&d.length>0&&(r.id=d);var c=te.getNodeAttributeNumberValue(e,"fileSize",-1);-1!==c&&(r.fileSize=c);var u=te.getNodeAttributeNumberValue(e,"mediaType",-1);-1!==u&&(r.mediaType=u)}return r}function We(e,t){var n=Date.now(),i='<VAST version="'+ie+'"><Ad id="'+n+'"><InLine></InLine></Ad></VAST>',r={errorFlag:!0,vastVersion:ie,errorUrls:se>0?ot(se):e,vastXml:i,adId:ft(c&&c.parentNode?c.parentNode.id:"unknown"),sequence:ae&&ae.length>0?ae[0].state.sequence:1,finalVastUri:Pe,extClickTrackingUrls:"",extClickUrls:"",extCustomClicks:"",extErrorUrls:"",extImpressionUrls:"",extTrackingUrls:""};if(r.errorUrls||(r.errorUrls=[]),t&&(je(r.errorUrls,t),r.errorUrls&&r.errorUrls.length>0&&(r.errorUrls[0]+="&ERRORFORFALLBACK="+t),r.parsingErrorCode=t),ie.substr(0,1)>"3"){if(c){r.universalAdId=ht(c),r.adServingId=te.getSubNode(c,"AdServingId");var o=te.getSubNode(c,"AdSystem");o&&(r.adSystem={name:te.getNodeValue(o),version:te.getNodeAttributeValue(o,"version")});var a=ct(c);a&&(r.categories=a)}r.contentId=vt(),r.conditionalAd=re}null!=l&&(r.fallbackOnNoAd=l),ue&&me.length>0&&(r.notifyurl=me),Te.length>0&&(r.creative_id=Te),r.rtb=!0,Ve(se,"SUCCESS"),r.clickTrackingUrls=[],r.clickUrls=[],r.customClicks=[],r.impressionUrls=[],At(r),g.telemetry&&(r.telemetry=Object.assign({},xe)),xe={hops:[]},he.push(r),Ie++,-1===se&&(ze(),he.length>0&&(he.sort((function(e,t){return e.fallbackIndex-t.fallbackIndex})),delete he[he.length-1].fallbackOnNoAd))}function He(e,t){var n=V.concat(N);je(n,e),B&&B.length>0&&(je(B,p.WRAPPER_NO_RESPONSE),n=n.concat(B));var i={UNIVERSALADID:K,ADSERVINGID:$,BREAKPOSITION:g.breakPosition,ADCOUNT:De(),PODSEQUENCE:Me()};if(n=te.resolveMacrosArray(n,["UNIVERSALADID","ADSERVINGID","BREAKPOSITION","ADCOUNT","PODSEQUENCE"],i,-1),v.error(f,"Error "+e+" - "+t),pe){We(n);var r=ue?he:he[0];r.errCode=e,m(!0,k,r,null)}else m(!1,k,"vast"+e,n,me,Object.assign({},xe),{finalVastUrl:Pe,creativeId:Te}),xe={hops:[]}}function ze(){for(var e=function(e){if(g.isXandrVastPlayer&&!g.overlayPlayer&&e.errorFlag&&Array.isArray(e.errorUrls)&&e.errorUrls.length>0)for(var t=n(7886).B,i=0;i<e.errorUrls.length;i++){var r=e.errorUrls[i],o=new URL("string"==typeof r?r:r.url);o.hostname.indexOf("ib.adnxs.com")>=0||o.hostname.indexOf("ib.adnxs-simple.com")>=0||t.trackPixel(r,"error")}},t=0;t<he.length;)if(he[t].hasOwnProperty("fallbackIndex"))t++;else{if(!(he.length>1))break;e(he[t]),he.splice(t,1)}}function qe(e){var t=ae[se].state;if(t&&Array.isArray(t.arrErrorUrls)&&t.arrErrorUrls.forEach((function(e){N.push(e)})),se>=0){if(ae[se].children[0]=null,ae[se].children.splice(0,1),0===ae[se].children.length){var n=ae[se].parentIdx;if(ae.splice(se,1),-1===(se=n)){if((ue||pe)&&he.length>0){var i="rtb";ce&&k&&k.content_source&&(i=k.content_source),pe?(ze(),ce?v.info(f,"Fallback: Vast XML ad count detected for "+i+" node: # ads: "+he.length):v.info(f,"Fallback: Vast XML ad count detected: # fallback-"+i+" ads: "+he.length),he.length>0&&(he.sort((function(e,t){return e.fallbackIndex-t.fallbackIndex})),delete he[he.length-1].fallbackOnNoAd)):ce?v.info(f,"Waterfall: Vast XML ad count detected for "+i+" node: # ads: "+("rtb"===i?Ie:Se)):d?v.info(f,"Waterfall: Vast XML ad count detected: "+(Se+Ie)):v.info(f,"Waterfall: Vast XML ad count detected: # csm ads: "+Se+", # rtb ads: "+Ie),m(!0,k,he,null)}else if(Ce&&he.length>0)v.info(f,"VMAP: Ad XML node count detected: "+he.length),m(!0,k,he,null);else{var r=p.UNDEFINED;e&&(r=e.toString()),1===he.length&&he[0].errorFlag?m(!0,k,he[0],null):He(r,"no Ad available")}return}return(ve=0===se)&&pe&&e&&We(N,e),void qe(e)}ve=0===se,A=se,ae[se].state=Ge(),xe.hops.push({}),yt(ae[se].children[0])}}function Ge(){return{arrTrackings:{},arrImpressions:[],arrClickUrls:[],arrCustomClicks:[],arrClickTrackings:[],arrErrorUrls:[],sExtensions:"",sequence:Ce?0:1,companions:{required:"unknown",companions:[]},icons:[],arrViewableImpressions:{viewable:[],notViewable:[],undetermined:[]},arrVerifications:[],fallback:{enabled:!1,index:-1}}}function Je(e){var t=te.getNodeAttributeValue(e,"id");if(t.length>0){var n=te.getNodeAttributeValue(e,"notifyurl");n&&n.length>0&&(fe[t]=n)}}function Xe(e,t){var n,i,r=te.getNodeAttributeValue(e,"id");r||(e.setAttribute("id",t),r=t),(n=te.getNodeAttributeValue(e,"creativeId")||((i=te.getSubNode(e,"Creative"))?te.getNodeAttributeValue(i,"adId")||te.getNodeAttributeValue(i,"adID"):null))&&n.length>0?we[r]=n:r!==t&&(we[r]=ft(r))}function Ye(e){var t=te.getNodeAttributeValue(e,"id");if(t.length>0){var n=te.getNodeAttributeValue(e,"buyerMemberId");n&&n.length>0&&(ge[t]=n)}}function Qe(e){var t=te.getNodeAttributeValue(e,"id");if(t.length>0){var n=te.getNodeAttributeValue(e,"brandCategoryId");n&&n.length>0&&(Ae[t]=n)}}function Ke(e){var t=te.getNodeAttributeValue(e,"id");if(t.length>0){var n=te.getNodeAttributeValue(e,"viewabilityConfig");n&&n.length>0&&(ke[t]=n)}}function Ze(){if(L&&L.length>0)for(var e=0;e<L.length;e++){var t=L[e],n=te.getNodeValues(t);if(n&&!Re(B,n)){var i=te.prepareAttributionData(t,n);B.push(i)}}}function $e(e){(new Date).getTime(),B=[],b=e;var t=function(e){var t=e.indexOf("<"),n=e.substr(-1===t?0:t);return-1!==(t=n.lastIndexOf(">"))&&(n=n.substr(0,t+1)),n.trim()}(e);if(0===t.length)return gt("outcome","failed"),Ve(se,"EMPTY VAST"),void(0===ae.length?(gt("errCode",p.SCHEMA_ERROR),He(p.SCHEMA_ERROR,"empty VAST")):ce?(gt("errCode",p.PARSING),qe(p.PARSING)):(gt("errCode",pe?p.SCHEMA_ERROR:p.WRAPPER_NO_RESPONSE),qe(pe?p.SCHEMA_ERROR:p.WRAPPER_NO_RESPONSE)));var n=null;if(void 0!==window.DOMParser){var i=!1;if("parsererror"===(n=(new DOMParser).parseFromString(t,"text/xml")).documentElement.nodeName){i=!0;try{v.error(f,"Error reason = "+n.documentElement.childNodes[0].nodeValue)}catch(e){}}else{var r=te.getSubNode(n,"parsererror");if(r){i=!0;try{v.error(f,"Error reason = "+r.innerText)}catch(e){}}}if(i)return gt("outcome","failed"),gt("errCode",p.PARSING),Ve(se,"INVALID VAST STRUCTURE"),void(0===ae.length?He(p.PARSING,"VAST XML parsing error"):qe(p.PARSING))}else{if(void 0===window.ActiveXObject)return gt("outcome","failed"),gt("errCode",p.PARSING),v.error(f,"Failed to parse vast xml by window.ActiveXObject(Microsoft.XMLDOM)"),Ve(se,"INVALID VAST STRUCTURE"),void(0===ae.length?He(p.PARSING,"Failed to get vast xml"):qe(p.PARSING));try{if((n=new window.ActiveXObject("Microsoft.XMLDOM")).loadXML(t),0!==n.parseError.errorCode)return gt("outcome","failed"),gt("errCode",p.PARSING),v.error(f,n.parseError),Ve(se,"INVALID VAST STRUCTURE"),void(0===ae.length?He(p.PARSING,n.parseError.errorCode+", Error reason = "+n.parseError.reason):qe(p.PARSING))}catch(e){return gt("outcome","failed"),gt("errCode",p.PARSING),v.error(f,"Failed to parse vast xml by window.ActiveXObject(Microsoft.XMLDOM)",e),Ve(se,"INVALID VAST STRUCTURE"),void(0===ae.length?He(p.PARSING,"Failed to parse vast xml by window.ActiveXObject(Microsoft.XMLDOM)"):qe(p.PARSING))}}if(!n)return gt("outcome","failed"),gt("errCode",p.PARSING),Ve(se,"INVALID VAST STRUCTURE"),void(0===ae.length?He(p.PARSING,"VAST XML parsing error"):qe(p.PARSING));var o=te.getSubNode(n,"VAST");if(!o||!o.firstChild)return gt("outcome","empty vast"),Ve(se,"EMPTY VAST"),void(k?0===ae.length?(gt("errCode",p.SCHEMA_ERROR),He(p.SCHEMA_ERROR,"empty VAST")):ce?(gt("errCode",p.PARSING),qe(p.PARSING)):A>0?(gt("errCode",p.WRAPPER_NO_RESPONSE),qe(p.WRAPPER_NO_RESPONSE)):(gt("errCode",pe?p.SCHEMA_ERROR:p.WRAPPER_NO_RESPONSE),qe(pe?p.SCHEMA_ERROR:p.WRAPPER_NO_RESPONSE)):(gt("errCode",p.WRAPPER_NO_RESPONSE),0===ae.length?He(p.WRAPPER_NO_RESPONSE,"no Ad found in VAST response"):qe(p.WRAPPER_NO_RESPONSE)));var a=te.getSubNodes(o,"Error");L=te.returnOnlyChildren(o,a);var s=function(e){var t="unknown";return e&&(t=(t=te.getNodeAttributeValue(e,"version")).trim()).length>3&&(t=t.substr(0,3)),t}(o);if(function(e){return"2.0"===e||"3.0"===e||"4.0"===e||"4.1"===e||"4.2"===e}(s)){ve&&(ce||((ue=te.getNodeAttributeBooleanValue(o,"apn_waterfall"))&&(g.waterfall=!0),pe=te.getNodeAttributeBooleanValue(o,"apn_fallback")),ee={});var l=te.getSubNodes(o,"Ad");if(!l||0===l.length)return gt("outcome","failed"),Ze(),Ve(se,"NO AD NODE"),void(0===ae.length?(gt("errCode",p.SCHEMA_ERROR),He(p.SCHEMA_ERROR,"no Ad available")):(gt("errCode",p.WRAPPER_NO_RESPONSE),qe(p.WRAPPER_NO_RESPONSE)));for(var c=[],u=p.UNDEFINED,h=0;h<l.length;h++){if(ve){var m=te.getNodeAttributeValue(l[h],"id");m?m+="_suffix"+h:m="unknown_suffix"+h,l[h].id=m}else ce||ue||pe||Ne(l[h])>=0&&(ue=!0,g.waterfall=!0,d=!0);if(s>="4.1"){var y=te.getNodeAttributeValue(l[h],"adType");if(("preview"!==g.adType||!g.onlyAudio)&&""!==y&&"video"!==y){v.log(f,"Ignore non-video Ad node"),u=p.NOT_EXPECTED_AD_TYPE;continue}}if(s>="4.0"&&se>0&&!ae[se].state.allowMultiAds){if(te.getNodeAttributeValue(l[h],"sequence"))continue;if(c.length>0)break}c.push(l[h]),ue&&ve&&Je(l[h]),ve&&(Ye(l[h]),Qe(l[h]),Xe(l[h],h),Ke(l[h]))}if(0===c.length)return Ze(),gt("outcome","failed"),gt("errCode",u),Ve(se,"NO VALID AD NODES"),void(0===ae.length?He(u,"no Ad available"):qe(u));var E={parentIdx:se,currentIdx:0,children:c,state:Ge()};ae.push(E),E.currentIdx=ae.length-1,se=E.currentIdx,yt(ae[se].children[0],s)}else gt("outcome","failed"),gt("errCode",p.VAST_VERSION),Ve(se,"INVALID VAST VERSION: "+s),0===ae.length?He(p.VAST_VERSION,"VAST version not supported"):qe(p.VAST_VERSION)}function et(e){for(var t in ae[e].state.arrTrackings)for(var n=0;n<ae[e].state.arrTrackings[t].length;n++)F.hasOwnProperty(t)?Oe(F[t],ae[e].state.arrTrackings[t][n])||F[t].push(ae[e].state.arrTrackings[t][n]):(F[t]=[],F[t].push(ae[e].state.arrTrackings[t][n]));return F}function tt(e){for(var t=0;t<ae[e].state.arrImpressions.length;t++)Oe(W,ae[e].state.arrImpressions[t])||W.push(ae[e].state.arrImpressions[t]);return W}function nt(e){for(var t=0;t<ae[e].state.arrClickUrls.length;t++)Oe(H,ae[e].state.arrClickUrls[t])||H.push(ae[e].state.arrClickUrls[t]);return H}function it(e){for(var t=0;t<ae[e].state.arrCustomClicks.length;t++)Oe(z,ae[e].state.arrCustomClicks[t])||z.push(ae[e].state.arrCustomClicks[t]);return z}function rt(e){for(var t=0;t<ae[e].state.arrClickTrackings.length;t++)Oe(q,ae[e].state.arrClickTrackings[t])||q.push(ae[e].state.arrClickTrackings[t]);return q}function ot(e){for(var t=0;t<ae[e].state.arrErrorUrls.length;t++)Oe(G,ae[e].state.arrErrorUrls[t])||G.push(ae[e].state.arrErrorUrls[t]);return G}function at(e){return ae[e].state.sExtensions.length>0&&(D+=ae[e].state.sExtensions),D}function st(e,t){for(var n=0;n<e.length;n++)if(e[n].program.toLowerCase()===t.toLowerCase())return!0;return!1}function lt(e,t){for(var n=0;n<e.length;n++)if(e[n].program.toLowerCase()===t.toLowerCase())return void e.splice(n,1)}function dt(e){for(var t=e;t>0;){for(var n=ae[t].parentIdx,i=0;i<ae[t].state.icons.length;i++)st(ae[n].state.icons,ae[t].state.icons[i].program)&&lt(ae[n].state.icons,ae[t].state.icons[i].program),ae[n].state.icons.push(ae[t].state.icons[i]);t=n}return ae[t].state.icons}function ct(e){var t=[],n=te.getSubNodes(e,"Category");if(n&&n.length>0)for(var i=0;i<n.length;i++){var r=te.getNodeValues(n[i]);if(r&&r.length>0){var o=te.getNodeAttributeValue(n[i],"authority");t.push({category:r,authority:o})}}return t.length>0?t:null}function ut(e){var t;for(t=0;t<ae[e].state.arrViewableImpressions.viewable.length;t++)Oe(J.viewable,ae[e].state.arrViewableImpressions.viewable[t])||J.viewable.push(ae[e].state.arrViewableImpressions.viewable[t]);for(t=0;t<ae[e].state.arrViewableImpressions.notViewable.length;t++)Oe(J.notViewable,ae[e].state.arrViewableImpressions.notViewable[t])||J.notViewable.push(ae[e].state.arrViewableImpressions.notViewable[t]);for(t=0;t<ae[e].state.arrViewableImpressions.undetermined.length;t++)Oe(J.undetermined,ae[e].state.arrViewableImpressions.undetermined[t])||J.undetermined.push(ae[e].state.arrViewableImpressions.undetermined[t]);return J}function pt(e){var t;for(t=0;t<ae[e].state.arrVerifications.length;t++)X.push(ae[e].state.arrVerifications[t]);return X}function ht(e){var t,n,i,r,o="",a="unknown",s="unknown",l=function(){return a+" "+s};if(!(n=te.getSubNodes(e,"Creative"))||0===n.length)return l();for(t=0;t<n.length&&!(te.getSubNode(n[t],"Linear")&&(i=te.getSubNodes(n[t],"UniversalAdId"))&&i.length>0);t++);if(!i)return l();for(t=0;t<i.length;t++)r=i[t],a=te.getNodeAttributeValue(r,"idRegistry")||"unknown",s=te.getNodeValue(r)||"unknown",o.length>0&&(o+=","),o+=l();return o}function vt(){var e="unknown",t="unknown";return g.content&&(g.content.registryId&&(e=g.content.registryId),g.content.contentId&&(t=g.content.contentId)),e+" "+t}function ft(e){var t=e,n=t.indexOf("_suffix");return n>0&&(t=t.substring(0,n)),t}function mt(e){return!!(Y&&Q&&Q.hasOwnProperty(e.authority))&&!!Y.split(",").find((function(t){return t===e.category}))}function gt(e,t){xe.hops&&xe.hops.length>0&&(xe.hops[xe.hops.length-1][e]=t)}function yt(e,t){c=null;var i=te.getSubNode(e,"Wrapper"),s=null!==i;if(s||(i=te.getSubNode(e,"InLine")),c=i,!i)return gt("outcome","failed"),gt("errCode","101"),Ze(),Ve(se,"MISSING WRAPPER / INLINE NODE"),void qe("101");if(++A>y)return gt("outcome","failed"),gt("errCode",p.WRAPPER_LIMIT),Ve(se,"Reach Wrapper limit"),void qe(p.WRAPPER_LIMIT);t>ie&&(ie=t);var u=te.getNodeAttributeValue(e,"id");if(fe.hasOwnProperty(u)&&(me=fe[u]),we.hasOwnProperty(u)&&(Te=we[u]),ge.hasOwnProperty(u)&&(ye=ge[u]),Ae.hasOwnProperty(u)&&(be=Ae[u]),ke.hasOwnProperty(u)&&(Ee=ke[u]),0===se){var h=te.getNodeAttributeValue(e,"sequence");h&&(ae[se].state.sequence=parseInt(h)),te.getNodeAttributeValue(e,"conditionalAd")&&(re=te.getNodeAttributeBooleanValue(e,"conditionalAd")),(oe=te.getNodeAttributeValue(e,"adType"))&&""!==oe||(oe="video"),ce||pe||ue||Ne(i)>=0&&(pe=!0)}if(function(e,t){if(e){var n=te.getSubNodes(e,"Error"),i=te.returnOnlyChildren(e,n);if(i)for(var r=0;r<i.length;r++){var o=i[r],a=te.getNodeValues(o),s={ADTYPE:oe,INVENTORYSTATE:_e(),ADCOUNT:De(),PODSEQUENCE:Me()};if((a=te.resolveMacros(a,!0,s))&&!Re(t,a)){var l=te.prepareAttributionData(o,a,s);t.push(l)}}}}(i,ae[se].state.arrErrorUrls),function(e,t){if(e){var n=te.getSubNodes(e,"Impression");if(n)for(var i=0;i<n.length;i++){var r=n[i],o=te.getNodeValues(r),a={ADTYPE:oe,INVENTORYSTATE:_e(),ADCOUNT:De(),PODSEQUENCE:Me()};if((o=te.resolveMacros(o,!0,a))&&!Re(t,o)){var s=te.prepareAttributionData(r,o,a);t.push(s)}}}}(i,ae[se].state.arrImpressions),function(e,t){if(e){var n=te.getSubNode(e,"Linear",0);if(n){var i=te.getSubNode(n,"TrackingEvents");if(i){var r=te.getSubNodes(i,"Tracking");if(r)for(var o=0;o<r.length;o++){i=r[o];var a=te.getNodeValues(i);if(a){var s={ADTYPE:oe,INVENTORYSTATE:_e(),ADCOUNT:De(),PODSEQUENCE:Me()};a=te.resolveMacros(a,!0,s);var l,d=te.getNodeAttributeValue(i,"event");if("progress"===d){var c=te.getNodeAttributeValue(i,"offset");d=c?"progress_"+c:""}d&&(t.hasOwnProperty(d)?Re(t[d],a)||(l=te.prepareAttributionData(i,a,s),t[d].push(l)):(t[d]=[],l=te.prepareAttributionData(i,a,s),t[d].push(l)))}}}}}}(i,ae[se].state.arrTrackings),Ue(i,ae[se].state.arrClickUrls,ae[se].state.arrClickTrackings,ae[se].state.arrCustomClicks),function(e,t){if(e){var n=te.getSubNode(e,"Extensions");n&&n.innerHTML&&n.innerHTML.length>0?ae[t].state.sExtensions=ae[t].state.sExtensions+n.innerHTML.toString():n&&n.textContent&&n.textContent.length>0&&(ae[t].state.sExtensions=ae[t].state.sExtensions+n.textContent.toString())}}(i,se),function(e,t){if(e){var n=te.getSubNode(e,"CompanionAds");n&&(n.innerHTML&&n.innerHTML.length>0||n.textContent&&n.textContent.length>0)&&r.parse(ae[t].state.companions,n,te)}}(i,se),function(e,t){if(e){var n=te.getSubNode(e,"Icons");n&&(n.innerHTML&&n.innerHTML.length>0||n.textContent&&n.textContent.length>0)&&o.parse(ae[t].state.icons,n,te)}}(i,se),function(e,t){if(e){var n=te.getSubNode(e,"ViewableImpression",0);if(n){var i,r=null,o=null,a=te.getSubNodes(n,"Viewable");if(a&&a.length>0)for(i=0;i<a.length;i++)o=a[i],(r=te.getNodeValues(o))&&!Oe(t.viewable,r)&&t.viewable.push(r);if((a=te.getSubNodes(n,"NotViewable"))&&a.length>0)for(i=0;i<a.length;i++)o=a[i],(r=te.getNodeValues(o))&&!Oe(t.notViewable,r)&&t.notViewable.push(r);if((a=te.getSubNodes(n,"ViewUndetermined"))&&a.length>0)for(i=0;i<a.length;i++)o=a[i],(r=te.getNodeValues(o))&&!Oe(t.undetermined,r)&&t.undetermined.push(r)}}}(i,ae[se].state.arrViewableImpressions),function(e,t){if(e){var n=function(e){var t=[],n=te.getSubNodes(e,"Verification");if(n&&n.length>0)for(var i=0;i<n.length;i++){var r,o,a,s=n[i],l=te.getNodeAttributeValue(s,"vendor"),d=[],c=[],u=te.getSubNodes(s,"JavaScriptResource");if(u&&u.length>0)for(a=0;a<u.length;a++){r=te.getNodeValues(u[a]);var p=te.getNodeAttributeValue(u[a],"apiFramework"),h=te.getNodeAttributeBooleanValue(u[a],"browserOptional");d.push({url:r,framework:p,browserOptional:h})}if((u=te.getSubNodes(s,"ExecutableResource"))&&u.length>0)for(a=0;a<u.length;a++){r=te.getNodeValues(u[a]),o=te.getNodeAttributeValue(u[a],"apiFramework");var v=te.getNodeAttributeValue(u[a],"type");c.push({content:r,framework:o,type:v})}var f=te.getSubNodeWholeValue(s,"ViewableImpression"),m={},g=!1,y=te.getSubNode(s,"TrackingEvents");if(y){var A=te.getSubNodes(y,"Tracking");if(A&&A.length>0)for(a=0;a<A.length;a++){r=te.getNodeValues(A[a]);var b=te.getNodeAttributeValue(A[a],"event");b&&r&&(g=!0,r=te.resolveMacros(r,!0,{ADTYPE:oe,INVENTORYSTATE:_e(),ADCOUNT:De(),PODSEQUENCE:Me()}),m.hasOwnProperty(b)?m[b].push(r):m[b]=[r])}}var k=te.getSubNodeWholeValue(s,"VerificationParameters"),E={};l&&(E.vendor=l),d.length>0&&(E.jsResources=d),c.length>0&&(E.executableResources=c),f&&(E.viewableImpression=f),g&&(E.trackingEvents=m),k&&(E.verificationParameters=k),t.push(E)}return t.length>0?t:null}(e);n&&n.length>0&&n.forEach((function(e){t.push(e)}))}}(i,ae[se].state.arrVerifications),N=[],s){if(gt("wrapper",!0),function(e){if(e){var t=te.getSubNode(e,"Linear",0);if(t){var n=te.getSubNode(t,"Duration");if(n){var i=Le(te.getNodeValue(n),-1);i>0&&(U=i)}}}}(i),ie>="4.0"&&se>0&&ae[se-1].state.hasOwnProperty("followAdditionalWrappers")&&!1===ae[se-1].state.followAdditionalWrappers)return gt("outcome","failed"),gt("errCode",p.WRAPPER_GENERAL),Ve(se,"Additional Wrappers are not allowed"),void qe(p.WRAPPER_GENERAL);!function(e){Y=null,Q={};var t=te.getSubNodes(e,"BlockedAdCategories");if(t&&t.length>0){Y=[];for(var n=0;n<t.length;n++){var i=te.getNodeValues(t[n]);Y.push(i);var r=te.getNodeAttributeValue(t[n],"authority");r&&r.length>0&&(Q[r]=i)}Y=Y.toString()}}(i),function(e){gt("wrapperIndex",A),l=null;var t=te.getSubNode(e,"VASTAdTagURI");if(!t)return gt("outcome","failed"),gt("errCode",p.WRAPPER_GENERAL),Ve(se,"INVALID WRAPPER NODE"),void(0===ae.length?He(p.WRAPPER_GENERAL,"invalid wrapper node"):qe(p.WRAPPER_GENERAL));var i,r,o=te.getNodeValues(t);if(!o||0===o.length)return gt("outcome","failed"),gt("errCode",p.WRAPPER_GENERAL),Ve(se,"EMPTY VASTAdTagURI"),void(0===ae.length?He(p.WRAPPER_GENERAL,"Invalid VASTAdTagURI node value"):qe(p.WRAPPER_GENERAL));if(le)return Ve(se,"terminated"),void m(!1,k,"terminated",null,me);if(ne=!0,ie>="4.0"&&(i=te.getNodeAttributeBooleanValue(e,"followAdditionalWrappers",!0),ae[se].state.followAdditionalWrappers=i,i=te.getNodeAttributeBooleanValue(e,"allowMultipleAds",!1),ae[se].state.allowMultipleAds=i),pe){var a=Ne(e);a>=0&&(""!==(i=te.getNodeAttributeValue(e,"fallbackOnNoAd"))?(l=te.getNodeAttributeBooleanValue(e,"fallbackOnNoAd"),ae[se].state.fallback.enabled=l):ae[se].state.fallback.enabled=!1,ae[se].state.fallback.index=a)}Pe=o,r=g.overlayPlayer?1:g.expandable?3:-1,o=te.resolveMacros(o,!1,{BLOCKEDADCATEGORIES:Y?Y.toString():-1,ADTYPE:oe,ADCOUNT:g.hasOwnProperty("slotCount")?g.slotCount:1,PLACEMENTTYPE:r,INVENTORYSTATE:_e()}),gt("wrapperDomain",te.getDomain(o)),gt("url",o);var s=Date.now();n(7886).B.load(o,(function(t,n){if(gt("timeToProcess",Date.now()-s),le)return Ve(se,"terminated"),void m(!1,k,"terminated",null,me);if(t||0===n.length)"Timeout"===t?(gt("responseStatus","timeout"),Ve(se,"VASTAdTagURI TIMED OUT: "+o),0===ae.length?He(p.WRAPPER_TIMEOUT,"Timeout of VAST URI provided in wrapper element"):qe(p.WRAPPER_TIMEOUT)):(gt("responseStatus","failed"),gt("errCode",p.WRAPPER_NO_RESPONSE),Ve(se,"No response for VASTAdTagURI: "+o),0===ae.length?He(p.WRAPPER_NO_RESPONSE,"No VAST response for VAST URI provided in wrapper element"):qe(p.WRAPPER_NO_RESPONSE));else{gt("responseStatus","success"),ve=!1;var i=[];Ue(e,i,[],[]),i.length>0&&(ee.url=i[0]),xe.hops.push({}),$e(n)}}),g.adServerTimeout?g.adServerTimeout:E)}(i)}else{var v;gt("inline",!0);var f=!1;pe&&(v=Ne(i))>=0&&(f=!0,ae[se].state.fallback.enabled=!0,ae[se].state.fallback.index=v);var L=function(e){O=0,R="",M="",w=[],T=null,S=[],I=[];var t=null,n=[];if(e){var i=te.getSubNode(e,"Linear",0);if(i){var r=te.getSubNode(i,"Duration");if(r){var o=te.getNodeValue(r);O=Le(o,-1)}var a=te.getNodeAttributeValue(i,"skipoffset");R=a,M="";var s=te.getSubNode(i,"AdParameters");if(s&&(M=te.getNodeValues(s),te.getNodeAttributeBooleanValue(s,"xmlEncoded",!1))){var l=document.createElement("textarea");l.innerHTML=M,M=l.value}if(r=te.getSubNode(i,"MediaFiles")){var d,c=te.getSubNodes(r,"MediaFile");if(c){var u,h;for(h=0;h<c.length;h++)if(r=c[h],(d=te.getNodeValues(r)).length>0){var v=Fe(r,d,h,n);v&&!v.error?w.push(v):v&&v.error&&(u=v.error)}if(0===w.length)t={code:p.MEDIA_INVALID,message:u||"INCOMPATIBLE MEDIA TYPE, Available = "+JSON.stringify(n)};else{r=te.getSubNode(i,"MediaFiles"),T=te.getSubNodeWholeValue(r,"Mezzanine","");var f=te.getSubNodes(r,"InteractiveCreativeFile");if(f&&f.length>0)for(var m=0;m<f.length;m++){var g=f[m];if(d=te.getNodeValues(g)){var y=te.getNodeAttributeValue(g,"type"),A=te.getNodeAttributeValue(g,"apiFramework"),b=te.getNodeAttributeBooleanValue(g,"variableDuration");S.push({url:d,type:y,apiFramework:A,variableDuration:b})}}var k=te.getSubNode(r,"ClosedCaptionFiles");if(k){var E=te.getSubNodes(k,"ClosedCaptionFile");if(E&&E.length>0)for(h=0;h<E.length;h++)I.push({uri:te.getNodeValues(E[h]),type:te.getNodeAttributeValue(E[h],"type"),language:te.getNodeAttributeValue(E[h],"language")})}}}else t={code:p.MEDIA_INVALID,message:"MISSING MEDIA FILES"}}else t={code:p.MEDIA_INVALID,message:"MISSING MEDIA FILES"}}else t={code:p.PARSING,message:"INVALID VAST STRUCTURE"}}return t}(i);if(L&&L.code===p.MEDIA_INVALID&&g.cbApnVastPlayer&&g.cbApnVastPlayer("err403",L.message),(0===w.length||null!==L)&&!f)return Ve(se,L.message),void qe(L.code);F=JSON.parse(JSON.stringify(C)),W=P.slice(0),H=x.slice(0),z=j.slice(0),q=_.slice(0),G=V.slice(0),D="";var B=JSON.stringify(function(e){for(var t=e;t>=0;)et(t),t=ae[t].parentIdx;return F}(ae[se].parentIdx)),de=JSON.stringify(function(e){for(var t=e;t>=0;)tt(t),t=ae[t].parentIdx;return W}(ae[se].parentIdx)),je=JSON.stringify(function(e){for(var t=e;t>=0;)nt(t),t=ae[t].parentIdx;return H.reverse(),H}(ae[se].parentIdx)),Be=JSON.stringify(function(e){for(var t=e;t>=0;)rt(t),t=ae[t].parentIdx;return q}(ae[se].parentIdx)),We=JSON.stringify(function(e){for(var t=e;t>=0;)it(t),t=ae[t].parentIdx;return z}(ae[se].parentIdx)),ze=JSON.stringify(function(e){for(var t=e;t>=0;)ot(t),t=ae[t].parentIdx;return G}(ae[se].parentIdx)),Ge=function(e){for(var t=e;t>=0;)at(t),t=ae[t].parentIdx;return D}(ae[se].parentIdx),Je=JSON.stringify(function(e){for(var t={required:"unknown",companions:[]},n=e;n>=0;)r.mergeCompanions(t,ae[n].state.companions),n=ae[n].parentIdx;return t}(ae[se].parentIdx)),Xe=JSON.stringify(function(e){for(var t=[],n=e;n>=0;){for(var i=0;i<ae[n].state.icons.length;i++)st(t,ae[n].state.icons[i].program)||t.push(ae[n].state.icons[i]);n=ae[n].parentIdx}return t}(ae[se].parentIdx));D="";var Ye=function(e){for(var t=e;t>0;){var n=ae[t].parentIdx;r.mergeCompanions(ae[n].state.companions,ae[t].state.companions),t=n}return"unknown"===ae[t].state.companions.required&&delete ae[t].state.companions.required,ae[t].state.companions}(se);Ye=function(e){var t,n,i,r=[],o=[],a=e.companions;if(!e.companions)return e;for(n=a.length-1;n>=0;n--)if((t=a[n]).StaticResource||t.IFrameResource||t.HTMLResource){var s=!1;for(i=0;i<r.length;i++)if(t.width===r[i].width&&t.height===r[i].height){s=!0;break}s||r.push(t)}else o.push(t);for(n=0;n<o.length;n++)for(i=0;i<r.length;i++)o[n].width===r[i].width&&o[n].height===r[i].height&&(o[n].id&&o[n].id===r[i].id||!o[n].id)&&(o[n].CompanionClickTracking&&(r[i].CompanionClickTracking||(r[i].CompanionClickTracking=[]),r[i].CompanionClickTracking=r[i].CompanionClickTracking.concat(o[n].CompanionClickTracking)),o[n].TrackingEvents&&(r[i].TrackingEvents||(r[i].TrackingEvents=[]),r[i].TrackingEvents=r[i].TrackingEvents.concat(o[n].TrackingEvents)));var l={companions:r};return e.required&&(l.required=e.required),l}(Ye);var Qe={vastVersion:ie,withWrapper:ne,mediaFiles:w,trackingUrls:et(se),impressionUrls:tt(se),clickUrls:nt(se),clickTrackingUrls:rt(se),customClicks:it(se),errorUrls:ot(se),durationMsecs:O>0?O:U,skipOffset:R,extensions:at(se),adParameters:M,vastXml:b,extTrackingUrls:B,extImpressionUrls:de,extClickUrls:je,extCustomClicks:We,extClickTrackingUrls:Be,extErrorUrls:ze,extExtensions:Ge,adId:ft(u),sequence:ae[0].state.sequence,companionAds:Ye,extCompanions:Je,icons:dt(se),extIcons:Xe,finalVastUri:Pe};d&&(Qe.notImpbusWaterfall=!0);var Ke,lt=JSON.stringify(function(e){for(var t=e;t>=0;)pt(t),t=ae[t].parentIdx;return X}(ae[se].parentIdx)),yt=pt(se);if(yt&&yt.length>0&&(Qe.extVerifications=lt,Qe.adVerifications=yt),ie.substr(0,1)>"2"&&I&&I.length>0&&(Qe.closedCaptionFiles=I),ie.substr(0,1)>"3"){K=ht(i),Qe.universalAdId=K,Z=vt(),Qe.contentId=Z;var bt=te.getSubNode(i,"AdServingId");bt&&($=te.getNodeValue(bt)),Qe.adServingId=$;var kt=te.getSubNode(i,"AdSystem");kt&&(Qe.adSystem={name:te.getNodeValue(kt),version:te.getNodeAttributeValue(kt,"version")});var Et=te.getSubNode(i,"AdTitle");Et&&(Qe.adTitle=te.getNodeValue(Et));var wt=te.getSubNode(i,"Description");wt&&(Qe.description=te.getNodeValue(wt));var Tt=te.getSubNode(i,"Advertiser");Tt&&(Qe.advertiser={name:te.getNodeValue(Tt),id:te.getNodeAttributeValue(Tt,"id")});var St=te.getSubNode(i,"Pricing");St&&(Qe.pricing={price:te.getNodeAttributeNumberValue(St,"price"),model:te.getNodeAttributeValue(St,"model"),currency:te.getNodeAttributeValue(St,"currency")});var It=te.getSubNodes(i,"Survey");if(It&&It.length>0)for(Qe.surveys=[],Ke=0;Ke<It.length;Ke++)Qe.surveys.push({uri:te.getNodeValue(It[Ke]),type:te.getNodeAttributeValue(It[Ke],"type")});var Ct=te.getSubNode(i,"Expires");if(Ct){var Pt=parseInt(te.getNodeValue(Ct));!isNaN(Pt)&&Pt>0&&(Qe.expires=Date.now()+1e3*Pt)}var xt=function(e){var t=te.getSubNodes(e,"Creative");if(t&&t.length>0)for(var n=0;n<t.length;n++)if(te.getSubNode(t[n],"Linear")){var i=te.getSubNode(t[n],"CreativeExtensions");if(i){var r=te.getSubNodes(i,"CreativeExtension");if(r&&r.length>0){for(var o=[],a=0;a<r.length;a++){var s=te.getSubNodeValue(r[a]);s&&o.push(s)}if(o.length>0)return o}}return null}return null}(i);xt&&xt.length>0&&(Qe.creativeExtensions=xt),Qe.conditionalAd=re;var jt=ct(i);if(jt){for(var _t=0;_t<jt.length;_t++){if(!jt[_t].category||!jt[_t].authority)return Ve(se,"invalid Category node"),void qe(p.AD_CATEGORY);if(mt(jt[_t]))return Ve(se,"ad is skipped due category violation"),void qe(p.AD_CATEGORY_VIOLATION)}Qe.categories=jt}var Vt=JSON.stringify(function(e){for(var t=e;t>=0;)ut(t),t=ae[t].parentIdx;return J}(ae[se].parentIdx)),Nt=ut(se);Nt&&Nt.viewable.length+Nt.notViewable.length+Nt.undetermined.length>0&&(Qe.extViewableImpression=Vt,Qe.viewableImpression=Nt),T&&(Qe.mezzanine=T),S&&S.length>0&&(Qe.interactiveCreativeFiles=S)}null!=l&&(Qe.fallbackOnNoAd=l),ue&&me.length>0&&(Qe.notifyurl=me),Te.length>0&&(Qe.creative_id=Te),ye.length>0&&(Qe.buyerMemberId=ye),be.length>0&&(Qe.brandCategoryId=be),Ee.length>0&&(Qe.viewabilityConfig=Ee);var Dt=!1;if(ce)k.content_source&&"rtb"===k.content_source&&(Dt=!0,Qe.rtb=!0);else if(ue&&!pe){var Mt=te.getNodeAttributeValue(e,"rtb");Mt&&"true"===Mt&&(Dt=!0,Qe.rtb=!0)}if(le)return Ve(se,"terminated"),void m(!1,k,"terminated",null,me);var Ot=[];for(Ke=0;Ke<w.length;Ke++)-1===Ot.indexOf(w[Ke].type)&&Ot.push(w[Ke].type);Ve(se,"SUCCESS, Available="+JSON.stringify(Ot)),At(Qe),g.telemetry&&(Qe.telemetry=Object.assign({},xe)),xe={hops:[]},ue||pe?(pe&&(!(v=function(){for(var e=-1,t=se;t>=0;){var n=ae[t].state;n.fallback.index>=0&&(e=n.fallback.index),t=ae[t].parentIdx}return e}())&&ve&&Ne(i),v>=0&&(Qe.fallbackIndex=v,Qe.fallbackOnNoAd=!0)),he.push(Qe),Dt?Ie++:Se++,qe()):Ce?(Qe.vastXml=function(e,t){for(var n=(new DOMParser).parseFromString(e,"text/xml"),i=te.getSubNode(n,"VAST"),r=te.getSubNodes(i,"Ad"),o=0;o<r.length;){var s=te.getNodeAttributeValue(r[o],"sequence");s&&parseInt(s)!==t?i.removeChild(r[o]):o++}return"ie"===a.browser.name.toLowerCase()?(new XMLSerializer).serializeToString(n.childNodes[0]):n.childNodes[0].outerHTML}(Qe.vastXml,Qe.sequence),he.push(Qe),qe()):m(!0,k,Qe,null)}}function At(e){var t,n=g.mainContentURI||"-1",i=["UNIVERSALADID","CONTENTID","ADSERVINGID","CONTENTURI","ADCOUNT","PODSEQUENCE"],r={UNIVERSALADID:e.universalAdId,CONTENTID:e.contentId,ADSERVINGID:e.adServingId,CONTENTURI:n,ADCOUNT:De(),PODSEQUENCE:Me()};for(var o in te.resolveMacrosArray(e.clickTrackingUrls,i,r,-1),te.resolveMacrosArray(e.clickUrls,i,r,-1),te.resolveMacrosArray(e.customClicks,i,r,-1),te.resolveMacrosArray(e.errorUrls,i,r,-1),te.resolveMacrosArray(e.impressionUrls,i,r,-1),e.trackingUrls)te.resolveMacrosArray(e.trackingUrls[o],i,r,-1);if(e.icons&&e.icons.length>0)for(t=0;t<e.icons.length;t++)e.icons[t].IconClickTracking&&te.resolveMacrosArray(e.icons[t].IconClickTracking,i,r,-1),e.icons[t].IconViewTracking&&te.resolveMacrosArray(e.icons[t].IconViewTracking,i,r,-1);if(e.companionAds&&e.companionAds.companions&&e.companionAds.companions.length>0){var a=e.companionAds.companions;for(t=0;t<a.length;t++)if(a[t].CompanionClickTracking&&a[t].CompanionClickTracking.length>0&&(a[t].CompanionClickTracking=te.resolveMacrosArray(a[t].CompanionClickTracking,i,r,-1)),a[t].TrackingEvents&&a[t].TrackingEvents.length>0)for(var s=0;s<a[t].TrackingEvents.length;s++)a[t].TrackingEvents[s].url=te.resolveMacros(a[t].TrackingEvents[s].url,i,r);e.companionAds.companions=a}e.extClickTrackingUrls=te.replaceMacrosWithValues(e.extClickTrackingUrls,i,r,-1),e.extClickUrls=te.replaceMacrosWithValues(e.extClickUrls,i,r,-1),e.extCustomClicks=te.replaceMacrosWithValues(e.extCustomClicks,i,r,-1),e.extErrorUrls=te.replaceMacrosWithValues(e.extErrorUrls,i,r,-1),e.extImpressionUrls=te.replaceMacrosWithValues(e.extImpressionUrls,i,r,-1),e.extTrackingUrls=te.replaceMacrosWithValues(e.extTrackingUrls,i,r,-1)}v.always(f,"Version 3.2.32"),this.parse=function(e,t,n,i){m=i,function(e,t){var n,i,r,o;if(t&&P.push(t.trim()),e)if(Array.isArray(e)&&1===e.length){var a=e[0];if(a.impression_urls)for(i=0;i<a.impression_urls.length;i++)n=a.impression_urls[i].trim(),P.push(n);if(a.error_urls)for(i=0;i<a.error_urls.length;i++)n=a.error_urls[i].trim(),V.push(n);if(a.video_click_urls)for(i=0;i<a.video_click_urls.length;i++)n=a.video_click_urls[i].trim(),_.push(n);for(o in a.video_events)for(r=a.video_events[o],i=0;i<r.length;i++)n=r[i].trim(),C.hasOwnProperty(o)?Oe(C[o],n)||C[o].push(n):C[o]=[n]}else for(o in e)if("service"!==o)if(Array.isArray(e[o]))for(r=e[o],i=0;i<r.length;i++)n=r[i].trim(),"click"===o?_.push(n):"error"===o?V.push(n):"impression"===o?P.push(n):C.hasOwnProperty(o)?Oe(C[o],n)||C[o].push(n):C[o]=[n];else n=e[o].trim(),"click"===o?_.push(n):"error"===o?V.push(n):"impression"===o?P.push(n):C.hasOwnProperty(o)?Oe(C[o],n)||C[o].push(n):C[o]=[n]}(t,n),ve=!0,$e(e)},this.parseAdObj=function(e,t,n){m=n,ve=!0;var i=[],r=te.getNodeAttributeValue(e,"id");if(r?r+="_suffix0":r="unknown_suffix0",e.id=r,xe.hops.push({}),p.UNDEFINED,t>="4.1"){var o=te.getNodeAttributeValue(e,"adType");if(""!==o&&"video"!==o)return gt("outcome","failed"),gt("errCode",p.NOT_EXPECTED_AD_TYPE),v.log(f,"Ignore non-video Ad node"),void He(p.NOT_EXPECTED_AD_TYPE,"no Ad available")}i.push(e),Ye(e),Qe(e),Xe(e,0),Ke(e);var a={parentIdx:se,currentIdx:0,children:i,state:Ge()};ae.push(a),a.currentIdx=ae.length-1,se=a.currentIdx,yt(ae[se].children[0],t)},this.terminate=function(){le=!0}},l=n(5730),d=n(4389);e.exports={parse:function(e,t,n,i,r,o,a){var l=new s(n,i,a);return l.parse(e,r,o,(function(e,n,i,r,o,a,s){t&&t(e,n,i,r,o,s),l=null})),l},parseAdObj:function(e,t,n,i,r,o){var a=new s(i,r,o);return a.parseAdObj(e,t,(function(e,t,i,r,o,s){n&&n(e,t,i,r,o,s),a=null})),a},getUnwrappedVastTag:function(e,t,n,i,r,o,a,s,d){if(!e||!e.vastXml)return null;var c=new l(e,t,n,i,r,o,a,s,d),u=c.addTrackers();return c=null,u},getMergedVastTag:function(e,t){if(!e||0===e.length)return null;var n=new d(e,t),i=n.getVastXml();return n=null,i}}},1719:(e,t,n)=>{"use strict";e.exports=function(e){var t=-1,i=n(9724).v,r=e;this.getSubNodes=function(e,t){var n=e.getElementsByTagName(t);return n.length>0?n:null},this.getSubNode=function(e,t,n){n||(n=0);var i=e.getElementsByTagName(t);return i.length>n?i[n]:null},this.getNodeValue=function(e){if(0===e.childNodes.length)return"";var t=e.childNodes[0].nodeValue;return t?t.trim():""},this.getNodeValues=function(e){if(0===e.childNodes.length)return"";for(var t="",n=0;n<e.childNodes.length;n++){var i=e.childNodes[n].nodeValue;i&&(t+=i)}return t.trim()},this.getNodeAttributeValue=function(e,t){var n=e.getAttribute(t);return null===n&&(n=""),n},this.getNodeAttributeNumberValue=function(e,t,n){n||(n=0);var i=n,r=this.getNodeAttributeValue(e,t);return r.length>0&&(i=r.indexOf(".")>=0?parseFloat(r):parseInt(r)),i},this.getNodeAttributeBooleanValue=function(e,t,n){n||(n=!1);var i=n,r=this.getNodeAttributeValue(e,t);return r.length>0&&(i="t"===r.toLowerCase().charAt(0)),i},this.getSubNodeValue=function(e,t,n){n=void 0===n?"":n;var i=this.getSubNode(e,t);return null!==i?this.getNodeValue(i):n},this.getSubNodeWholeValue=function(e,t,n){n=void 0===n?"":n;var i=this.getSubNode(e,t);return null!==i?this.getNodeValues(i):n},this.getSubNodeBooleanValue=function(e,t,n){n=void 0===n?"false":n;var i=this.getSubNodeValue(e,t);return i.length>0&&"t"===i.toLowerCase().charAt(0)||!(i.length>0&&"f"===i.toLowerCase().charAt(0))&&n},this.returnOnlyChildren=function(e,t){var n=[];if(t&&t.length>0)for(var i=0;i<t.length;i++)t[i].parentNode===e&&n.push(t[i]);return n},this.resolveMacros=function(e,n,o){var a,s={TIMESTAMP:function(){return(new Date).toISOString()},CACHEBUSTING:function(){return Math.floor(1e8*Math.random()).toString()},DEVICEUA:function(){return r&&!r.enforcePrivacy?navigator.userAgent:-2},SERVERSIDE:function(){return 0},DOMAIN:function(){try{return top&&top.location?top.location.hostname:t}catch(e){return t}},VASTVERSIONS:function(){return"2,3,5,6,7,8,310,311"},ADCATEGORIES:function(){return t},GDPRCONSENT:function(){return t},SERVERUA:function(){return t},MEDIAMIME:function(){return"video/mp4,video/webm,video/ogg,application/javascript,application/x-javascript"},EXTENSIONS:function(){return t},APIFRAMEWORKS:function(){return"1,2"},VERIFICATIONVENDORS:function(){return"appnexus.com-omid"},APPBUNDLE:function(){return t},REGULATIONS:function(){return t},OMIDPARTNER:function(){return"Appnexus/1.4.0"},BREAKMAXDURATION:function(){return t},BREAKMINDURATION:function(){return t},BREAKMAXADS:function(){return t},BREAKMINADLENGTH:function(){return t},BREAKMAXADLENGTH:function(){return t},IFA:function(){return t},IFATYPE:function(){return t},DEVICEIP:function(){return t},LATLONG:function(){return t},PAGEURL:function(){var e;try{e=top&&top.location&&top.location.href?top.location.href:null}catch(e){i.info("VAST Parser","Xandr VAST parser is unable to resolve PAGEURL macro because top window is not accessible. A value of -1 will be used to resolve this macro.")}return e||t}},l="string"==typeof e?e:e.url;for(a in s)l=l.split("["+a+"]").join(encodeURIComponent(s[a]()));return l=n?this.replaceMacrosWithValues(l,["ADTYPE","INVENTORYSTATE","ADCOUNT","PODSEQUENCE"],o,t):this.replaceMacrosWithValues(l,["BLOCKEDADCATEGORIES","ADTYPE","ADCOUNT","PLACEMENTTYPE","INVENTORYSTATE"],o,t),"object"==typeof e?(e.url=l,e):l},this.resolveMacrosArray=function(e,t,n,i){for(var r=0;r<e.length;r++)"string"==typeof e[r]?e[r]=this.replaceMacrosWithValues(e[r],t,n,i):"object"==typeof e[r]&&(e[r].url=this.replaceMacrosWithValues(e[r].url,t,n,i));return e},this.replaceMacrosWithValues=function(e,n,i,r){var o,a,s=0,l=n.length,d=r||t;for(s=0;s<l;s++)o=n[s],e.indexOf(o)>=0&&(a=e.split("["+o+"]"),e=a.join(encodeURIComponent(i.hasOwnProperty(o)&&i[o]?i[o]:d)));return e},this.getDomain=function(e){try{return new URL(e).hostname}catch(e){return"localhost"}},this.prepareAttributionData=function(e,t,n){var i=this.getNodeAttributeValue(e,"attributiontype");if(!i||"SINGLE-PING"!==i&&"DOUBLE-PING"!==i&&"SINGLE_PING"!==i&&"DOUBLE_PING"!==i)return t;var r={url:t,attributionType:i="SINGLE-PING"===i||"SINGLE_PING"===i?"SINGLE-PING":"DOUBLE-PING"};if("DOUBLE-PING"===i){var o=this.getNodeAttributeValue(e,"attributionsrc");o&&(n&&(o=this.resolveMacros(o,!0,n)),r.attributionSrc=o)}return r}}},9313:(e,t,n)=>{"use strict";n.d(t,{a:()=>i});const i=n(2532)},6307:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,global_options;document.createElement("video"),document.createElement("audio"),document.createElement("track");var vjs=function(e,t,n){var i;if(global_options=t,"string"==typeof e){if(0===e.indexOf("#")&&(e=e.slice(1)),vjs.players[e])return t&&vjs.log.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&vjs.players[e].ready(n),vjs.players[e];i=vjs.el(e)}else i=e;if(!i||!i.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return i.player||new vjs.Player(i,t,n)},vjs_prop_name="videojs_apn_"+Date.now(),videojs=window[vjs_prop_name]=vjs;function _handleMultipleEvents(e,t,n,i){vjs.arr.forEach(n,(function(n){e(t,n,i)}))}vjs.VERSION="GENERATED_FULL_VSN",vjs.options={vjs_prop_name,techOrder:["html5"],html5:{},width:300,height:150,defaultVolume:0,playbackRates:[],inactivityTimeout:500,children:{mediaLoader:{},posterImage:{},loadingSpinner:{},textTrackDisplay:{},bigPlayButton:{},controlBar:{},errorDisplay:{},textTrackSettings:{}},language:document.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.userLanguage||navigator.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this video."},vjs.addLanguage=function(e,t){return void 0!==vjs.options.languages[e]?vjs.options.languages[e]=vjs.util.mergeOptions(vjs.options.languages[e],t):vjs.options.languages[e]=t,vjs.options.languages},vjs.players={},__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return videojs}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__),vjs.CoreObject=vjs.CoreObject=function(){},vjs.CoreObject.extend=function(e){var t,n;for(var i in t=(e=e||{}).init||e.init||this.prototype.init||this.prototype.init||function(){},n=function(){t.apply(this,arguments)},(n.prototype=vjs.obj.create(this.prototype)).constructor=n,n.extend=vjs.CoreObject.extend,n.create=vjs.CoreObject.create,e)e.hasOwnProperty(i)&&(n.prototype[i]=e[i]);return n},vjs.CoreObject.create=function(){var e=vjs.obj.create(this.prototype);return this.apply(e,arguments),e},vjs.on=function(e,t,n){if(vjs.obj.isArray(t))return _handleMultipleEvents(vjs.on,e,t,n);var i=vjs.getData(e);i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=vjs.guid++),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t){if(!i.disabled){t=vjs.fixEvent(t);var n=i.handlers[t.type];if(n)for(var r=n.slice(0),o=0,a=r.length;o<a&&!t.isImmediatePropagationStopped();o++)r[o].call(e,t)}}),1==i.handlers[t].length&&(e.addEventListener?e.addEventListener(t,i.dispatcher,!1):e.attachEvent&&e.attachEvent("on"+t,i.dispatcher))},vjs.off=function(e,t,n){if(vjs.hasData(e)){var i=vjs.getData(e);if(i.handlers){if(vjs.obj.isArray(t))return _handleMultipleEvents(vjs.off,e,t,n);var r=function(t){i.handlers[t]=[],vjs.cleanUpEvents(e,t)};if(t){var o=i.handlers[t];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);vjs.cleanUpEvents(e,t)}else r(t)}else for(var s in i.handlers)r(s)}}},vjs.cleanUpEvents=function(e,t){var n=vjs.getData(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),vjs.isEmpty(n.handlers)&&(delete n.handlers,delete n.dispatcher,delete n.disabled),vjs.isEmpty(n)&&vjs.removeData(e)},vjs.fixEvent=function(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var i=e||window.event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&("returnValue"==r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,e.isDefaultPrevented=t,e.defaultPrevented=!0},e.isDefaultPrevented=n,e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!=e.clientX){var o=document.documentElement,a=document.body;e.pageX=e.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),e.pageY=e.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},vjs.trigger=function(e,t){var n=vjs.hasData(e)?vjs.getData(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t&&(t={type:t,target:e}),t=vjs.fixEvent(t),n.dispatcher&&n.dispatcher.call(e,t),i&&!t.isPropagationStopped()&&!1!==t.bubbles)vjs.trigger(i,t);else if(!i&&!t.defaultPrevented){var r=vjs.getData(t.target);t.target[t.type]&&(r.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),r.disabled=!1)}return!t.defaultPrevented},vjs.one=function(e,t,n){if(vjs.obj.isArray(t))return _handleMultipleEvents(vjs.one,e,t,n);var i=function(){vjs.off(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||vjs.guid++,vjs.on(e,t,i)};var hasOwnProp=Object.prototype.hasOwnProperty,cacheManager=__webpack_require__(5079).y,track,major,minor,match,createTrackHelper,origSetSource,origDisposeSourceHandler,canPlayType,mpegurlRE,mp4RE,loadTrack,parseCues,indexOf;function _logType(e,t){}vjs.createEl=function(e,t){var n;return e=e||"div",t=t||{},n=document.createElement(e),vjs.obj.each(t,(function(e,t){-1!==e.indexOf("aria-")||"role"==e?n.setAttribute(e,t):n[e]=t})),n},vjs.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},vjs.obj={},vjs.obj.create=Object.create||function(e){function t(){}return t.prototype=e,new t},vjs.obj.each=function(e,t,n){for(var i in e)hasOwnProp.call(e,i)&&t.call(n||this,i,e[i])},vjs.obj.merge=function(e,t){if(!t)return e;for(var n in t)hasOwnProp.call(t,n)&&(e[n]=t[n]);return e},vjs.obj.deepMerge=function(e,t){var n,i,r;for(n in e=vjs.obj.copy(e),t)hasOwnProp.call(t,n)&&(i=e[n],r=t[n],vjs.obj.isPlain(i)&&vjs.obj.isPlain(r)?e[n]=vjs.obj.deepMerge(i,r):e[n]=t[n]);return e},vjs.obj.copy=function(e){return vjs.obj.merge({},e)},vjs.obj.isPlain=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},vjs.obj.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},vjs.isNaN=function(e){return e!=e},vjs.bind=function(e,t,n){t.guid||(t.guid=vjs.guid++);var i=function(){return t.apply(e,arguments)};return i.guid=n?n+"_"+t.guid:t.guid,i},vjs.cache={},vjs.guid=1,vjs.expando="vdata"+(new Date).getTime(),vjs.getData=function(e){var t=e[vjs.expando];return t||(t=e[vjs.expando]=vjs.guid++),vjs.cache[t]||(vjs.cache[t]={}),vjs.cache[t]},vjs.hasData=function(e){var t=e[vjs.expando];return!(!t||vjs.isEmpty(vjs.cache[t]))},vjs.removeData=function(e){var t=e[vjs.expando];if(t){delete vjs.cache[t];try{delete e[vjs.expando]}catch(t){e.removeAttribute?e.removeAttribute(vjs.expando):e[vjs.expando]=null}}},vjs.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},vjs.hasClass=function(e,t){try{if(e)return-1!==(" "+e.className+" ").indexOf(" "+t+" ");vjs.log("Error in hasClass, element does not exist")}catch(e){vjs.log("Exception in hasClass",e)}},vjs.addClass=function(e,t){try{e&&!vjs.hasClass(e,t)?e.className=""===e.className?t:e.className+" "+t:vjs.log("Error in addClass, class or element doesn't exist")}catch(e){vjs.log("Exception in addClass",e)}},vjs.removeClass=function(e,t){var n,i;if(vjs.hasClass(e,t)){for(i=(n=e.className.split(" ")).length-1;i>=0;i--)n[i]===t&&n.splice(i,1);e.className=n.join(" ")}},vjs.TEST_VID=vjs.createEl("video"),track=document.createElement("track"),track.kind="captions",track.srclang="en",track.label="English",vjs.TEST_VID.appendChild(track),vjs.USER_AGENT=navigator.userAgent,vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT),vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT),vjs.IS_IPOD=/iPod/i.test(vjs.USER_AGENT),vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD,vjs.IOS_VERSION=function(){var e=vjs.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]}(),vjs.IS_ANDROID=/Android/i.test(vjs.USER_AGENT),vjs.ANDROID_VERSION=(match=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),match?(major=match[1]&&parseFloat(match[1]),minor=match[2]&&parseFloat(match[2]),major&&minor?parseFloat(match[1]+"."+match[2]):major||null):null),vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&/webkit/i.test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3,vjs.IS_FIREFOX=/Firefox/i.test(vjs.USER_AGENT),vjs.IS_CHROME=/Chrome/i.test(vjs.USER_AGENT),vjs.IS_IE8=/MSIE\s8\.0/.test(vjs.USER_AGENT),vjs.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),vjs.BACKGROUND_SIZE_SUPPORTED="backgroundSize"in vjs.TEST_VID.style,vjs.setElementAttributes=function(e,t){vjs.obj.each(t,(function(t,n){null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,!0===n?"":n)}))},vjs.getElementAttributes=function(e){var t,n,i,r;if(t={},",autoplay,controls,loop,muted,default,",e&&e.attributes&&e.attributes.length>0)for(var o=(n=e.attributes).length-1;o>=0;o--)i=n[o].name,r=n[o].value,"boolean"!=typeof e[i]&&-1===",autoplay,controls,loop,muted,default,".indexOf(","+i+",")||(r=null!==r),t[i]=r;return t},vjs.getComputedDimension=function(e,t){var n="";return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(n=e["client"+t.substr(0,1).toUpperCase()+t.substr(1)]+"px"),n},vjs.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},vjs.browser={},vjs.el=function(e){return 0===e.indexOf("#")&&(e=e.slice(1)),document.getElementById(e)},vjs.formatTime=function(e,t){t=t||e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),o=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=r>0||a>0?r+":":"")+(i=((r||o>=10)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)},vjs.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},vjs.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vjs.trim=function(e){return(e+"").replace(/^\s+|\s+$/g,"")},vjs.round=function(e,t){return t||(t=0),Math.round(e*Math.pow(10,t))/Math.pow(10,t)},vjs.createTimeRange=function(e,t){return void 0===e&&void 0===t?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:1,start:function(){return e},end:function(){return t}}},vjs.setVjsStorage=function(e,t){try{cacheManager.setGenericData(e,t)}catch(e){vjs.log("cacheManager Error (VideoJS)",e)}},vjs.getAbsoluteURL=function(e){return e.match(/^https?:\/\//)||(e=vjs.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href),e},vjs.parseUrl=function(e){var t,n,i,r,o;r=["protocol","hostname","port","pathname","search","hash","host"],(i=""===(n=vjs.createEl("a",{href:e})).host&&"file:"!==n.protocol)&&((t=vjs.createEl("div")).innerHTML='<a href="'+e+'"></a>',n=t.firstChild,t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t)),o={};for(var a=0;a<r.length;a++)o[r[a]]=n[r[a]];return"http:"===o.protocol&&(o.host=o.host.replace(/:80$/,"")),"https:"===o.protocol&&(o.host=o.host.replace(/:443$/,"")),i&&document.body.removeChild(t),o},vjs.log=function(){_logType(null,arguments)},vjs.log.history=[],vjs.log.error=function(){_logType("error",arguments)},vjs.log.warn=function(){_logType("warn",arguments)},vjs.findPosition=function(e){var t,n,i,r,o,a,s,l,d;return e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),t?(n=document.documentElement,i=document.body,r=n.clientLeft||i.clientLeft||0,o=window.pageXOffset||i.scrollLeft,a=t.left+o-r,s=n.clientTop||i.clientTop||0,l=window.pageYOffset||i.scrollTop,d=t.top+l-s,{left:vjs.round(a),top:vjs.round(d)}):{left:0,top:0}},vjs.arr={},vjs.arr.forEach=function(e,t,n){if(vjs.obj.isArray(e)&&t instanceof Function)for(var i=0,r=e.length;i<r;++i)t.call(n||vjs,e[i],i,e);return e},vjs.xhr=function(e,t){var n,i,r,o,a,s,l,d;"string"==typeof e&&(e={uri:e}),videojs.util.mergeOptions({method:"GET",timeout:45e3},e),t=t||function(){},l=function(){window.clearTimeout(s),t(null,i,i.response||i.responseText)},d=function(e){window.clearTimeout(s),e&&"string"!=typeof e||(e=new Error(e)),t(e,i)},void 0===(n=window.XMLHttpRequest)&&(n=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),(i=new n).uri=e.uri,r=vjs.parseUrl(e.uri),o=window.location,r.protocol+r.host!==o.protocol+o.host&&window.XDomainRequest&&!("withCredentials"in i)?((i=new window.XDomainRequest).onload=l,i.onerror=d,i.onprogress=function(){},i.ontimeout=function(){}):(a="file:"==r.protocol||"file:"==o.protocol,i.onreadystatechange=function(){if(4===i.readyState){if(i.timedout)return d("timeout");200===i.status||a&&0===i.status?l():d()}},e.timeout&&(s=window.setTimeout((function(){4!==i.readyState&&(i.timedout=!0,i.abort())}),e.timeout)));try{i.open(e.method||"GET",e.uri,!0)}catch(e){return d(e)}e.withCredentials&&(i.withCredentials=!0),e.responseType&&(i.responseType=e.responseType);try{i.send()}catch(e){return d(e)}return i},vjs.util={},vjs.util.mergeOptions=function(e,t){var n,i,r;for(n in e=vjs.obj.copy(e),t)t.hasOwnProperty(n)&&(i=e[n],r=t[n],vjs.obj.isPlain(i)&&vjs.obj.isPlain(r)?e[n]=vjs.util.mergeOptions(i,r):e[n]=t[n]);return e},vjs.EventEmitter=function(){},vjs.EventEmitter.prototype.allowedEvents_={},vjs.EventEmitter.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=Function.prototype,vjs.on(this,e,t),this.addEventListener=n},vjs.EventEmitter.prototype.addEventListener=vjs.EventEmitter.prototype.on,vjs.EventEmitter.prototype.off=function(e,t){vjs.off(this,e,t)},vjs.EventEmitter.prototype.removeEventListener=vjs.EventEmitter.prototype.off,vjs.EventEmitter.prototype.one=function(e,t){vjs.one(this,e,t)},vjs.EventEmitter.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=vjs.fixEvent(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),vjs.trigger(this,e)},vjs.EventEmitter.prototype.dispatchEvent=vjs.EventEmitter.prototype.trigger,vjs.Component=vjs.CoreObject.extend({init:function(e,t,n){this.player_=e,this.options_=vjs.obj.copy(this.options_),t=this.options(t),this.id_=t.id||t.el&&t.el.id,this.id_||(this.id_=(e.id&&e.id()||"no_player")+"_component_"+vjs.guid++),this.name_=t.name||null,this.el_=t.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}}),vjs.Component.prototype.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),vjs.removeData(this.el_),this.el_=null},vjs.Component.prototype.player_=!0,vjs.Component.prototype.player=function(){return this.player_},vjs.Component.prototype.options_,vjs.Component.prototype.options=function(e){return void 0===e?this.options_:this.options_=vjs.util.mergeOptions(this.options_,e)},vjs.Component.prototype.el_,vjs.Component.prototype.createEl=function(e,t){return vjs.createEl(e,t)},vjs.Component.prototype.localize=function(e){var t=this.player_.language(),n=this.player_.languages();return n&&n[t]&&n[t][e]?n[t][e]:e},vjs.Component.prototype.el=function(){return this.el_},vjs.Component.prototype.contentEl_,vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vjs.Component.prototype.id_,vjs.Component.prototype.id=function(){return this.id_},vjs.Component.prototype.name_,vjs.Component.prototype.name=function(){return this.name_},vjs.Component.prototype.children_,vjs.Component.prototype.children=function(){return this.children_},vjs.Component.prototype.childIndex_,vjs.Component.prototype.getChildById=function(e){return this.childIndex_[e]},vjs.Component.prototype.childNameIndex_,vjs.Component.prototype.getChild=function(e){return this.childNameIndex_[e]},vjs.Component.prototype.addChild=function(e,t){var n,i,r;return"string"==typeof e?(r=e,i=(t=t||{}).componentClass||vjs.capitalize(r),t.name=r,n=new window[vjs.options.vjs_prop_name][i](this.player_||this,t)):n=e,this.children_.push(n),"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(r=r||n.name&&n.name())&&(this.childNameIndex_[r]=n),"function"==typeof n.el&&n.el()&&this.contentEl().appendChild(n.el()),n},vjs.Component.prototype.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){this.childIndex_[e.id()]=null,this.childNameIndex_[e.name()]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},vjs.Component.prototype.initChildren=function(){var e,t,n,i,r,o,a;if(n=(t=(e=this).options()).children)if(a=function(n,i){void 0!==t[n]&&(i=t[n]),!1!==i&&(e[n]=e.addChild(n,i))},vjs.obj.isArray(n))for(var s=0;s<n.length;s++)"string"==typeof(i=n[s])?(r=i,o={}):(r=i.name,o=i),a(r,o);else vjs.obj.each(n,a)},vjs.Component.prototype.buildCSSClass=function(){return""},vjs.Component.prototype.on=function(e,t,n){var i,r,o,a,s,l;return"string"==typeof e||vjs.obj.isArray(e)?vjs.on(this.el_,e,vjs.bind(this,t)):(i=e,r=t,o=vjs.bind(this,n),l=this,(a=function(){l.off(i,r,o)}).guid=o.guid,this.on("dispose",a),(s=function(){l.off("dispose",a)}).guid=o.guid,e.nodeName?(vjs.on(i,r,o),vjs.on(i,"dispose",s)):"function"==typeof e.on&&(i.on(r,o),i.on("dispose",s))),this},vjs.Component.prototype.off=function(e,t,n){var i,r,o;return!e||"string"==typeof e||vjs.obj.isArray(e)?vjs.off(this.el_,e,t):(i=e,r=t,o=vjs.bind(this,n),this.off("dispose",o),e.nodeName?(vjs.off(i,r,o),vjs.off(i,"dispose",o)):(i.off(r,o),i.off("dispose",o))),this},vjs.Component.prototype.one=function(e,t,n){var i,r,o,a,s;return"string"==typeof e||vjs.obj.isArray(e)?vjs.one(this.el_,e,vjs.bind(this,t)):(i=e,r=t,o=vjs.bind(this,n),a=this,s=function(){a.off(i,r,s),o.apply(this,arguments)},s.guid=o.guid,this.on(i,r,s)),this},vjs.Component.prototype.trigger=function(e){return vjs.trigger(this.el_,e),this},vjs.Component.prototype.isReady_,vjs.Component.prototype.isReadyOnInitFinish_=!0,vjs.Component.prototype.readyQueue_,vjs.Component.prototype.ready=function(e){return e&&(this.isReady_?e.call(this):(void 0===this.readyQueue_&&(this.readyQueue_=[]),this.readyQueue_.push(e))),this},vjs.Component.prototype.triggerReady=function(){this.isReady_=!0;var e=this.readyQueue_;if(e&&e.length>0){for(var t=0,n=e.length;t<n;t++)e[t].call(this);this.readyQueue_=[],this.trigger("ready")}},vjs.Component.prototype.hasClass=function(e){return vjs.hasClass(this.el_,e)},vjs.Component.prototype.addClass=function(e){return vjs.addClass(this.el_,e),this},vjs.Component.prototype.removeClass=function(e){return vjs.removeClass(this.el_,e),this},vjs.Component.prototype.show=function(){return this.removeClass("vjs-hidden"),this},vjs.Component.prototype.hide=function(){return this.addClass("vjs-hidden"),this},vjs.Component.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},vjs.Component.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},vjs.Component.prototype.disable=function(){this.hide(),this.show=function(){}},vjs.Component.prototype.width=function(e,t){return this.dimension("width",e,t)},vjs.Component.prototype.height=function(e,t){return this.dimension("height",e,t)},vjs.Component.prototype.dimensions=function(e,t){return this.width(e,!0).height(t)},vjs.Component.prototype.dimension=function(e,t,n){if(void 0!==t)return(null===t||vjs.isNaN(t))&&(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",n||this.trigger("resize"),this;if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+vjs.capitalize(e)],10)},vjs.Component.prototype.onResize,vjs.Component.prototype.emitTapEvents=function(){var e,t,n,i,r,o;e=0,t=null,this.on("touchstart",(function(i){1===i.touches.length&&(t=vjs.obj.copy(i.touches[0]),e=(new Date).getTime(),n=!0)})),this.on("touchmove",(function(e){e.touches.length>1?n=!1:t&&(r=e.touches[0].pageX-t.pageX,o=e.touches[0].pageY-t.pageY,Math.sqrt(r*r+o*o)>10&&(n=!1))})),i=function(){n=!1},this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){t=null,!0===n&&(new Date).getTime()-e<200&&(i.preventDefault(),this.trigger("tap"))}))},vjs.Component.prototype.enableTouchActivity=function(){var e,t,n;this.player().reportUserActivity&&(e=vjs.bind(this.player(),this.player().reportUserActivity),this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)})),n=function(n){e(),this.clearInterval(t)},this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n))},vjs.Component.prototype.setTimeout=function(e,t){e=vjs.bind(this,e);var n=setTimeout(e,t),i=function(){this.clearTimeout(n)};return i.guid="vjs-timeout-"+n,this.on("dispose",i),n},vjs.Component.prototype.clearTimeout=function(e){clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},vjs.Component.prototype.setInterval=function(e,t){e=vjs.bind(this,e);var n=setInterval(e,t),i=function(){this.clearInterval(n)};return i.guid="vjs-interval-"+n,this.on("dispose",i),n},vjs.Component.prototype.clearInterval=function(e){clearInterval(e);var t=function(){};return t.guid="vjs-interval-"+e,this.off("dispose",t),e},vjs.Button=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.emitTapEvents(),this.on("tap",this.onClick),this.on("click",this.onClick),this.on("focus",this.onFocus),this.on("blur",this.onBlur)}}),vjs.Button.prototype.createEl=function(e,t){var n;return t=vjs.obj.merge({className:this.buildCSSClass(),role:"button","aria-live":"polite",tabIndex:t&&t.tabIndex||0},t),n=vjs.Component.prototype.createEl.call(this,e,t),t.innerHTML||(this.contentEl_=vjs.createEl("div",{className:"vjs-control-content"}),this.controlText_=vjs.createEl("span",{className:"vjs-control-text",innerHTML:this.localize(this.buttonText)||"Need Text"}),this.contentEl_.appendChild(this.controlText_),n.appendChild(this.contentEl_)),n},vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)},vjs.Button.prototype.onClick=function(){},vjs.Button.prototype.onEnterClick=function(){},vjs.Button.prototype.onFocus=function(){this.on("keydown",this.onKeyPress)},vjs.Button.prototype.onKeyPress=function(e){32!=e.which&&13!=e.which||(e.preventDefault(),this.onEnterClick())},vjs.Button.prototype.onBlur=function(){this.off("keydown",this.onKeyPress)},vjs.Slider=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.on(e,"controlsvisible",this.update),this.on(e,this.playerEvent,this.update)}}),vjs.Slider.prototype.createEl=function(e,t){return(t=t||{}).className=t.className+" vjs-slider",t=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},t),vjs.Component.prototype.createEl.call(this,e,t)},vjs.Slider.prototype.onMouseDown=function(e){e.preventDefault(),vjs.blockTextSelection(),this.addClass("vjs-sliding"),this.on(document,"mousemove",this.onMouseMove),this.on(document,"mouseup",this.onMouseUp),this.on(document,"touchmove",this.onMouseMove),this.on(document,"touchend",this.onMouseUp),this.onMouseMove(e)},vjs.Slider.prototype.onMouseMove=function(){},vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection(),this.removeClass("vjs-sliding"),this.off(document,"mousemove",this.onMouseMove),this.off(document,"mouseup",this.onMouseUp),this.off(document,"touchmove",this.onMouseMove),this.off(document,"touchend",this.onMouseUp),this.update()},vjs.Slider.prototype.update=function(){if(this.el_){var e,t=this.getPercent(),n=this.handle,i=this.bar;if(("number"!=typeof t||t!=t||t<0||t===1/0)&&(t=0),e=t,n){var r=this.el_.offsetWidth,o=n.el().offsetWidth,a=o?o/r:0,s=t*(1-a);e=s+a/2,n.el().style.left=vjs.round(100*s,2)+"%"}i&&(i.el().style.width=vjs.round(100*e,2)+"%")}},vjs.Slider.prototype.calculateDistance=function(e){var t,n,i,r,o,a,s,l,d;if(t=this.el_,n=vjs.findPosition(t),o=a=t.offsetWidth,s=this.handle,this.options().vertical){if(r=n.top,d=e.changedTouches?e.changedTouches[0].pageY:e.pageY,s){var c=s.el().offsetHeight;r+=c/2,a-=c}return Math.max(0,Math.min(1,(r-d+a)/a))}if(i=n.left,l=e.changedTouches?e.changedTouches[0].pageX:e.pageX,s){var u=s.el().offsetWidth;i+=u/2,o-=u}return Math.max(0,Math.min(1,(l-i)/o))},vjs.Slider.prototype.onFocus=function(){this.on("keydown",this.onKeyPress)},vjs.Slider.prototype.onKeyPress=function(e){37==e.which||40==e.which?(e.preventDefault(),this.stepBack()):38!=e.which&&39!=e.which||(e.preventDefault(),this.stepForward())},vjs.Slider.prototype.onBlur=function(){this.off("keydown",this.onKeyPress)},vjs.Slider.prototype.onClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},vjs.SliderHandle=vjs.Component.extend(),vjs.SliderHandle.prototype.defaultValue=0,vjs.SliderHandle.prototype.createEl=function(e,t){return(t=t||{}).className=t.className+" vjs-slider-handle",t=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},t),vjs.Component.prototype.createEl.call(this,"div",t)},vjs.Menu=vjs.Component.extend(),vjs.Menu.prototype.addItem=function(e){this.addChild(e),e.on("click",vjs.bind(this,(function(){this.unlockShowing()})))},vjs.Menu.prototype.createEl=function(){var e=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(e,{className:"vjs-menu-content"});var t=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),vjs.on(t,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),t},vjs.MenuItem=vjs.Button.extend({init:function(e,t){vjs.Button.call(this,e,t),this.selected(t.selected)}}),vjs.MenuItem.prototype.createEl=function(e,t){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.localize(this.options_.label)},t))},vjs.MenuItem.prototype.onClick=function(){this.selected(!0)},vjs.MenuItem.prototype.onEnterClick=function(){this.selected(!0)},vjs.MenuItem.prototype.selected=function(e){e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-selected",!0)):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-selected",!1))},vjs.MenuButton=vjs.Button.extend({init:function(e,t){vjs.Button.call(this,e,t),this.update(),this.on("keydown",this.onKeyPress),this.el_.setAttribute("aria-haspopup",!0),this.el_.setAttribute("role","button")}}),vjs.MenuButton.prototype.update=function(){var e=this.createMenu();this.menu&&this.removeChild(this.menu),this.menu=e,this.addChild(e),this.items&&0===this.items.length?this.hide():this.items&&this.items.length>1&&this.show()},vjs.MenuButton.prototype.buttonPressed_=!1,vjs.MenuButton.prototype.createMenu=function(){var e=new vjs.Menu(this.player_);if(this.options().title&&e.contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.options().title),tabindex:-1})),this.items=this.createItems(),this.items)for(var t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e},vjs.MenuButton.prototype.createItems=function(){},vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.MenuButton.prototype.onFocus=function(){},vjs.MenuButton.prototype.onBlur=function(){},vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,(function(){this.menu.unlockShowing(),this.el_.blur()}))),this.buttonPressed_?this.unpressButton():this.pressButton()},vjs.MenuButton.prototype.onKeyPress=function(e){32==e.which||13==e.which?(this.buttonPressed_?this.unpressButton():this.pressButton(),e.preventDefault()):27==e.which&&(this.buttonPressed_&&this.unpressButton(),e.preventDefault())},vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&this.items.length>0&&this.items[0].el().focus()},vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-pressed",!1)},vjs.MediaError=function(e){"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:"object"==typeof e&&vjs.obj.merge(this,e),this.message||(this.message="")},vjs.MediaError.prototype.code=0,vjs.MediaError.prototype.message="",vjs.MediaError.prototype.status=null,vjs.MediaError.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],vjs.MediaError.defaultMessages={1:"You aborted the video playback",2:"A network error caused the video download to fail part-way.",3:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",4:"The video could not be loaded, either because the server or network failed or because the format is not supported.",5:"The video is encrypted and we do not have the keys to decrypt it."};for(var errNum=0;errNum<vjs.MediaError.errorTypes.length;errNum++)vjs.MediaError[vjs.MediaError.errorTypes[errNum]]=errNum,vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]]=errNum;!function(){var e,t,n,i;for(vjs.browser.fullscreenAPI,t=(e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]])[0],i=0;i<e.length;i++)if(e[i][1]in document){n=e[i];break}if(n)for(vjs.browser.fullscreenAPI={},i=0;i<n.length;i++)vjs.browser.fullscreenAPI[t[i]]=n[i];document.addEventListener("MSFullscreenChange",(function(e){if(vjs.players)for(var t in vjs.players)t.indexOf("an_video_ad_player")>=0&&(vjs.players[t].trigger("fullscreenchange"),vjs.players[t].fsButtonClicked||(vjs.players[t].isFullscreen(!1),vjs.players[t].removeClass("vjs-fullscreen")),vjs.players[t].fsButtonClicked=!1)}))}(),vjs.Player=vjs.Component.extend({init:function(e,t,n){this.tag=e,e.id=e.id||"vjs_video_"+vjs.guid++,this.tagAttributes=e&&vjs.getElementAttributes(e),t=vjs.obj.merge(this.getTagSettings(e),t),this.language_=t.language||vjs.options.language,this.languages_=t.languages||vjs.options.languages,this.cache_={},this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,t.reportTouchActivity=!1,this.isAudio("audio"===this.tag.nodeName.toLowerCase()),vjs.Component.call(this,this,t,n),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.isAudio()&&this.addClass("vjs-audio"),this.addClass("vjs-big-play-centered"),vjs.players[this.id_]=this,t.plugins&&vjs.obj.each(t.plugins,(function(e,t){this[e](t)}),this),this.listenForUserActivity()}}),vjs.Player.prototype.language_,vjs.Player.prototype.language=function(e){return void 0===e?this.language_:(this.language_=e,this)},vjs.Player.prototype.getMuteSettingsForIOS10=function(){return vjs.IS_IOS&&this.options_.enableNativeInline&&parseInt(vjs.IOS_VERSION)>9},vjs.Player.prototype.languages_,vjs.Player.prototype.languages=function(){return this.languages_},vjs.Player.prototype.options_=vjs.options,vjs.Player.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),vjs.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech&&this.tech.dispose(),vjs.Component.prototype.dispose.call(this)},vjs.Player.prototype.getTagSettings=function(e){var t,n,i,r,o,a,s,l={sources:[],tracks:[]};if(null!==(n=(t=vjs.getElementAttributes(e))["data-setup"])&&vjs.obj.merge(t,vjs.JSON.parse(n||"{}")),vjs.obj.merge(l,t),e.hasChildNodes())for(a=0,s=(i=e.childNodes).length;a<s;a++)"source"===(o=(r=i[a]).nodeName.toLowerCase())?l.sources.push(vjs.getElementAttributes(r)):"track"===o&&l.tracks.push(vjs.getElementAttributes(r));return l},vjs.Player.prototype.createEl=function(){var e,t=this.el_=vjs.Component.prototype.createEl.call(this,"div"),n=this.tag;return n.removeAttribute("width"),n.removeAttribute("height"),e=vjs.getElementAttributes(n),vjs.obj.each(e,(function(n){"class"==n?t.className=e[n]:t.setAttribute(n,e[n])})),n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),this.width(this.options_.width,!0),this.height(this.options_.height,!0),n.initNetworkState_=n.networkState,n.parentNode&&n.parentNode.insertBefore(t,n),vjs.insertFirst(n,t),this.el_=t,this.on("loadstart",this.onLoadStart),this.on("waiting",this.onWaiting),this.on(["canplay","canplaythrough","playing","ended"],this.onWaitEnd),this.on("seeking",this.onSeeking),this.on("seeked",this.onSeeked),this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("progress",this.onProgress),this.on("durationchange",this.onDurationChange),this.on("fullscreenchange",this.onFullscreenChange),t},vjs.Player.prototype.loadTech=function(e,t){this.tech&&this.unloadTech(),"Html5"!==e&&this.tag&&(vjs.Html5.disposeMediaElement(this.tag),this.tag=null),this.techName=e,this.isReady_=!1;var n=vjs.obj.merge({source:t,parentEl:this.el_},this.options_[e.toLowerCase()]);t&&(this.currentType_=t.type,t.src==this.cache_.src&&this.cache_.currentTime>0&&(n.startTime=this.cache_.currentTime),this.cache_.src=t.src),this.tech=new window[vjs.options.vjs_prop_name][e](this,n),this.tech.ready((function(){this.player_.triggerReady()}))},vjs.Player.prototype.unloadTech=function(){this.isReady_=!1,this.tech.dispose(),this.tech=!1},vjs.Player.prototype.onLoadStart=function(){this.removeClass("vjs-ended"),this.error(null),this.paused()?this.hasStarted(!1):this.trigger("firstplay")},vjs.Player.prototype.hasStarted_=!1,vjs.Player.prototype.hasStarted=function(e){return void 0!==e?(this.hasStarted_!==e&&(this.hasStarted_=e,e?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started")),this):this.hasStarted_},vjs.Player.prototype.onLoadedMetaData,vjs.Player.prototype.onLoadedData,vjs.Player.prototype.onLoadedAllData,vjs.Player.prototype.onPlay=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0)},vjs.Player.prototype.onWaiting=function(){this.addClass("vjs-waiting")},vjs.Player.prototype.onWaitEnd=function(){this.removeClass("vjs-waiting")},vjs.Player.prototype.onSeeking=function(){this.addClass("vjs-seeking")},vjs.Player.prototype.onSeeked=function(){this.removeClass("vjs-seeking")},vjs.Player.prototype.onFirstPlay=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started")},vjs.Player.prototype.onPause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused")},vjs.Player.prototype.onTimeUpdate,vjs.Player.prototype.onProgress=function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},vjs.Player.prototype.onEnded=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause()},vjs.Player.prototype.onDurationChange=function(){var e=this.techGet("duration");e&&(e<0&&(e=1/0),this.duration(e),e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"))},vjs.Player.prototype.onVolumeChange,vjs.Player.prototype.onFullscreenChange=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},vjs.Player.prototype.onError,vjs.Player.prototype.cache_,vjs.Player.prototype.getCache=function(){return this.cache_},vjs.Player.prototype.techCall=function(e,t){if(this.tech&&!this.tech.isReady_)this.tech.ready((function(){this[e](t)}));else try{this.tech[e](t)}catch(e){throw vjs.log(e),e}},vjs.Player.prototype.techGet=function(e){if(this.tech&&this.tech.isReady_)try{return this.tech[e]()}catch(t){throw void 0===this.tech[e]?vjs.log("Video.js: "+e+" method not defined for "+this.techName+" playback technology.",t):"TypeError"==t.name?(vjs.log("Video.js: "+e+" unavailable on "+this.techName+" playback technology element.",t),this.tech.isReady_=!1):vjs.log(t),t}},vjs.Player.prototype.play=function(){return this.techCall("play"),this},vjs.Player.prototype.pause=function(){return this.techCall("pause"),this.trigger("apn-vpaid-pause"),this},vjs.Player.prototype.paused=function(){return!1!==this.techGet("paused")},vjs.Player.prototype.currentTime=function(e){return void 0!==e?(this.techCall("setCurrentTime",e),this):this.cache_.currentTime=this.techGet("currentTime")||0},vjs.Player.prototype.duration=function(e){return void 0!==e?(this.cache_.duration=parseFloat(e),this):(void 0===this.cache_.duration&&this.onDurationChange(),this.cache_.duration||0)},vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},vjs.Player.prototype.buffered=function(){var e=this.techGet("buffered");return e&&e.length||(e=vjs.createTimeRange(0,0)),e},vjs.Player.prototype.bufferedPercent=function(){var e,t,n=this.duration(),i=this.buffered(),r=0;if(!n)return 0;for(var o=0;o<i.length;o++)e=i.start(o),(t=i.end(o))>n&&(t=n),r+=t-e;return r/n},vjs.Player.prototype.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},vjs.Player.prototype.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall("setVolume",t),vjs.setVjsStorage("volume",t),this):(t=parseFloat(this.techGet("volume")),isNaN(t)?1:t)},vjs.Player.prototype.muted=function(e){return void 0!==e?(vjs.IS_IOS&&this.options_.enableInlineVideoForIos||this.techCall("setMuted",e),this):this.techGet("muted")||!1},vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||!1},vjs.Player.prototype.isFullscreen_=!1,vjs.Player.prototype.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,this):this.isFullscreen_},vjs.Player.prototype.isFullScreen=function(e){return vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")'),this.isFullscreen(e)},vjs.Player.prototype.requestFullscreen=function(){var e=vjs.browser.fullscreenAPI;return this.isFullscreen(!0),e?(vjs.on(document,e.fullscreenchange,vjs.bind(this,(function(t){this.isFullscreen(document[e.fullscreenElement]),!1===this.isFullscreen()&&vjs.off(document,e.fullscreenchange,arguments.callee)}))),this.el_[e.requestFullscreen]()):this.tech.supportsFullScreen()?this.techCall("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.requestFullScreen=function(){return vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")'),this.requestFullscreen()},vjs.Player.prototype.exitFullscreen=function(){var e=vjs.browser.fullscreenAPI;return this.isFullscreen(!1),e?document[e.exitFullscreen]():this.tech.supportsFullScreen()?this.techCall("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.cancelFullScreen=function(){return vjs.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()"),this.exitFullscreen()},vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",vjs.addClass(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},vjs.Player.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,vjs.off(document,"keydown",this.fullWindowOnEscKey),document.documentElement.style.overflow=this.docOrigOverflow,vjs.removeClass(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},vjs.Player.prototype.selectSource=function(e){for(var t=0,n=this.options_.techOrder;t<n.length;t++){var i=vjs.capitalize(n[t]),r=window[vjs.options.vjs_prop_name][i];if(r){if(r.isSupported())for(var o=0,a=e;o<a.length;o++){var s=a[o];if(r.canPlaySource(s))return{source:s,tech:i}}}else vjs.log.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return!1},vjs.Player.prototype.src=function(e){return void 0===e?this.techGet("src"):(vjs.obj.isArray(e)?this.sourceList_(e):"string"==typeof e?this.src({src:e}):e instanceof Object&&(e.type&&!window[vjs.options.vjs_prop_name][this.techName].canPlaySource(e)?this.sourceList_([e]):(this.cache_.src=e.src,this.currentType_=e.type||"",this.ready((function(){window[vjs.options.vjs_prop_name][this.techName].prototype.hasOwnProperty("setSource")?this.techCall("setSource",e):this.techCall("src",e.src),"auto"==this.options_.preload&&this.load(),this.options_.autoplay&&this.play()})))),this)},vjs.Player.prototype.sourceList_=function(e){var t=this.selectSource(e);t?t.tech===this.techName?this.src(t.source):this.loadTech(t.tech,t.source):(this.setTimeout((function(){this.error({code:4,message:this.localize(this.options().notSupportedMessage)})}),0),this.triggerReady())},vjs.Player.prototype.load=function(){return this.techCall("load"),this},vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""},vjs.Player.prototype.currentType=function(){return this.currentType_||""},vjs.Player.prototype.preload=function(e){return void 0!==e?(this.techCall("setPreload",e),this.options_.preload=e,this):this.techGet("preload")},vjs.Player.prototype.autoplay=function(e){return void 0!==e?(this.techCall("setAutoplay",e),this.options_.autoplay=e,this):this.techGet("autoplay",e)},vjs.Player.prototype.loop=function(e){return void 0!==e?(this.techCall("setLoop",e),this.options_.loop=e,this):this.techGet("loop")},vjs.Player.prototype.poster_,vjs.Player.prototype.poster=function(e){return void 0===e?this.poster_:(e||(e=""),this.poster_=e,this.techCall("setPoster",e),this.trigger("posterchange"),this)},vjs.Player.prototype.controls_,vjs.Player.prototype.controls=function(e){return void 0!==e?(e=!!e,this.controls_!==e&&(this.controls_=e,e?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled")):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"))),this):this.controls_},vjs.Player.prototype.usingNativeControls_,vjs.Player.prototype.usingNativeControls=function(e){return void 0!==e?(e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,e?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):this.usingNativeControls_},vjs.Player.prototype.error_=null,vjs.Player.prototype.error=function(e){return void 0===e?this.error_:null===e?(this.error_=e,this.removeClass("vjs-error"),this):(e instanceof vjs.MediaError?this.error_=e:this.error_=new vjs.MediaError(e),this.trigger("error"),this.addClass("vjs-error"),vjs.log.error("(CODE:"+this.error_.code+" "+vjs.MediaError.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this)},vjs.Player.prototype.ended=function(){return this.techGet("ended")},vjs.Player.prototype.seeking=function(){return this.techGet("seeking")},vjs.Player.prototype.seekable=function(){return this.techGet("seekable")},vjs.Player.prototype.userActivity_=!0,vjs.Player.prototype.reportUserActivity=function(e){this.userActivity_=!0},vjs.Player.prototype.mouseOver_=!1,vjs.Player.prototype.userActive_=!0,vjs.Player.prototype.firstInactive_=!0,vjs.Player.prototype.userActive=function(e){return void 0!==e?((e=!!e)!==this.userActive_&&(this.userActive_=e,e?(this.userActivity_=!0,this.removeClass("vjs-user-inactive-first"),this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech&&this.tech.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.removeClass("vjs-user-active"),this.options_&&this.options_.useMsSkin?function(){return this.options_&&this.options_.onlyAudio&&"preview"===this.options_.adType}.bind(this)()||function(){return!(vjs.IS_IOS||vjs.IS_ANDROID||this.firstInactive_)&&this.mouseOver_}.bind(this)()||function(){var e=function(e,t,n,i){var r=t.getElementsByClassName(e);if(r.length>0&&n===r[0]){if(!i)return!0;if("solid"===t.defaultView.getComputedStyle(n).getPropertyValue("border-top-style"))return!0}return!1},t=this.el_.ownerDocument.activeElement;return!!(t&&this.el_.ownerDocument.defaultView&&(e("vjs-play-control",this.el_.ownerDocument,t,!0)||e("vjs-captions-button",this.el_.ownerDocument,t,!0)||e("vjs-fullscreen-control",this.el_.ownerDocument,t,!0)||e("vjs-mute-control",this.el_.ownerDocument,t,!0)||e("vjs-volume-bar",this.el_.ownerDocument,t,!1)||e("vjs-ad-learnmore-container",this.el_.ownerDocument,t,!0)))}.bind(this)()||(this.firstInactive_?(this.firstInactive_=!1,this.addClass("vjs-user-inactive-first")):this.addClass("vjs-user-inactive")):this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},vjs.Player.prototype.listenForUserActivity=function(){var e,t,n,i,r,o,a,s,l,d;e=vjs.bind(this,this.reportUserActivity),t=function(t){t.screenX==a&&t.screenY==s||(a=t.screenX,s=t.screenY,e())},l=function(t){if(this.mouseOver_=!0,t.screenX!=a||t.screenY!=s||void 0===a||void 0===s){if(Math.floor(t.screenX/100)===Math.floor(a/100))return;a=t.screenX,s=t.screenY,e()}},d=function(e){this.mouseOver_=!1,e.target&&e.target.getAttribute("class")&&e.target.getAttribute("class").indexOf("vjs-")>=0||(console.log("active:onmouseout:initialize"),a=void 0,s=void 0)},n=function(){e(),this.clearInterval(i),i=this.setInterval(e,250)},r=function(t){e(),this.clearInterval(i)},this.on("mousedown",n),this.on("mousemove",t),this.on("mouseup",r),this.on("mouseover",l),this.on("mouseout",d),this.on("keydown",e),this.on("keyup",e),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options().inactivityTimeout;e>0&&(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},vjs.Player.prototype.playbackRate=function(e){return void 0!==e?(this.techCall("setPlaybackRate",e),this):this.tech&&this.tech.featuresPlaybackRate?this.techGet("playbackRate"):1},vjs.Player.prototype.isAudio_=!1,vjs.Player.prototype.isAudio=function(e){return void 0!==e?(this.isAudio_=!!e,this):this.isAudio_},vjs.Player.prototype.networkState=function(){return this.techGet("networkState")},vjs.Player.prototype.readyState=function(){return this.techGet("readyState")},vjs.Player.prototype.textTracks=function(){return this.tech&&this.tech.textTracks()},vjs.Player.prototype.remoteTextTracks=function(){return this.tech&&this.tech.remoteTextTracks()},vjs.Player.prototype.addTextTrack=function(e,t,n){return this.tech&&this.tech.addTextTrack(e,t,n)},vjs.Player.prototype.addRemoteTextTrack=function(e){return this.tech&&this.tech.addRemoteTextTrack(e)},vjs.Player.prototype.removeRemoteTextTrack=function(e){this.tech&&this.tech.removeRemoteTextTrack(e)},vjs.ControlBar=vjs.Component.extend(),vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{},playbackRateMenuButton:{},captionsButton:{}}},vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})},vjs.LiveDisplay=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.LiveDisplay.prototype.createEl=function(){var e=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-live-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"</span>"+this.localize("LIVE"),"aria-live":"off"}),e.appendChild(this.contentEl_),e},vjs.PlayToggle=vjs.Button.extend({init:function(e,t){vjs.Button.call(this,e,t),this.on(e,"play",this.onPlay),this.on(e,"pause",this.onPause)}}),vjs.PlayToggle.prototype.buttonText="Play",vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.PlayToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{tabIndex:1})},vjs.PlayToggle.prototype.onClick=function(){},vjs.PlayToggle.prototype.onEnterClick=function(){this.player_.options_&&this.player_.options_.useMsSkin&&this.player_.controlBar.playToggle.trigger("enterclick")},vjs.PlayToggle.prototype.onPlay=function(){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.el_.children[0].children[0].innerHTML=this.localize("Pause")},vjs.PlayToggle.prototype.onPause=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.el_.children[0].children[0].innerHTML=this.localize("Play")},vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.on(e,"timeupdate",this.updateContent)}}),vjs.CurrentTimeDisplay.prototype.createEl=function(){var e=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),e.appendChild(this.contentEl_),e},vjs.CurrentTimeDisplay.prototype.updateContent=function(){var e=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Current Time")+"</span> "+vjs.formatTime(e,this.player_.duration())},vjs.DurationDisplay=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.on(e,"timeupdate",this.updateContent),this.on(e,"loadedmetadata",this.updateContent)}}),vjs.DurationDisplay.prototype.createEl=function(){var e=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00","aria-live":"off"}),e.appendChild(this.contentEl_),e},vjs.DurationDisplay.prototype.updateContent=function(){var e=this.player_.duration();e&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> "+vjs.formatTime(e))},vjs.TimeDivider=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.on(e,"timeupdate",this.updateContent)}}),vjs.RemainingTimeDisplay.prototype.createEl=function(){var e=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.contentEl_=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -0:00","aria-live":"off"}),e.appendChild(this.contentEl_),e},vjs.RemainingTimeDisplay.prototype.updateContent=function(){this.player_.duration()&&(this.contentEl_.innerHTML='<span class="vjs-control-text">'+this.localize("Remaining Time")+"</span> -"+vjs.formatTime(this.player_.remainingTime()))},vjs.FullscreenToggle=vjs.Button.extend({init:function(e,t){vjs.Button.call(this,e,t)}}),vjs.FullscreenToggle.prototype.buttonText="Fullscreen",vjs.FullscreenToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{tabIndex:15})},vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.FullscreenToggle.prototype.onClick=function(){this.player_.fsButtonClicked=!0,this.player_.isFullscreen()?(this.player_.exitFullscreen(),this.controlText_.innerHTML=this.localize("Fullscreen")):(this.player_.requestFullscreen(),this.controlText_.innerHTML=this.localize("Non-Fullscreen"))},vjs.ProgressControl=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.ProgressControl.prototype.options_={children:{seekBar:{}}},vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},vjs.SeekBar=vjs.Slider.extend({init:function(e,t){vjs.Slider.call(this,e,t),this.on(e,"timeupdate",this.updateARIAAttributes),e.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vjs.SeekBar.prototype.playerEvent="timeupdate",vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},vjs.SeekBar.prototype.updateARIAAttributes=function(){var e=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vjs.formatTime(e,this.player_.duration()))},vjs.SeekBar.prototype.getPercent=function(){return this.player_.currentTime()/this.player_.duration()},vjs.LoadProgressBar=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.on(e,"progress",this.update)}}),vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},vjs.LoadProgressBar.prototype.update=function(){var e,t,n,i,r=this.player_.buffered(),o=this.player_.duration(),a=this.player_.bufferedEnd(),s=this.el_.children,l=function(e,t){return 100*(e/t||0)+"%"};for(this.el_.style.width=l(a,o),e=0;e<r.length;e++)t=r.start(e),n=r.end(e),(i=s[e])||(i=this.el_.appendChild(vjs.createEl())),i.style.left=l(t,a),i.style.width=l(n-t,a);for(e=s.length;e>r.length;e--)this.el_.removeChild(s[e-1])},vjs.PlayProgressBar=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},vjs.SeekHandle=vjs.SliderHandle.extend({init:function(e,t){vjs.SliderHandle.call(this,e,t),this.on(e,"timeupdate",this.updateContent)}}),vjs.SeekHandle.prototype.defaultValue="00:00",vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle","aria-live":"off"})},vjs.SeekHandle.prototype.updateContent=function(){var e=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.innerHTML='<span class="vjs-control-text">'+vjs.formatTime(e,this.player_.duration())+"</span>"},vjs.VolumeControl=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),e.tech&&!1===e.tech.featuresVolumeControl&&this.addClass("vjs-hidden"),this.on(e,"loadstart",(function(){!1===e.tech.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}))}}),vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}},vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},vjs.VolumeBar=vjs.Slider.extend({init:function(e,t){vjs.Slider.call(this,e,t),this.on(e,"volumechange",this.updateARIAAttributes),e.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(100*this.player_.volume(),2)),this.el_.setAttribute("aria-valuetext",vjs.round(100*this.player_.volume(),2)+"%")},vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},vjs.VolumeBar.prototype.playerEvent="volumechange",vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})},vjs.VolumeBar.prototype.onMouseMove=function(e){if(this.player_.muted(),global_options.hasOwnProperty("overlayPlayer"))e.srcElement&&"VIDEO"!=e.srcElement.tagName&&e.srcElement.className.indexOf("vjs")>=0?"VIDEO"!=e.srcElement.tagName&&e.srcElement.className&&e.srcElement.className.indexOf("vjs")>=0&&this.player_.volume(this.calculateDistance(e)):e.currentTarget&&"VIDEO"!=e.currentTarget.tagName&&e.currentTarget.className&&e.currentTarget.className.indexOf("vjs")>=0&&this.player_.volume(this.calculateDistance(e));else{var t=global_options.wcElement&&global_options.wcElement instanceof Element?global_options.wcElement.querySelector("#"+String(global_options.iframeVideoWrapperId)):document.getElementById(global_options.iframeVideoWrapperId),n=t&&t.contentWindow.document,i=n&&n.elementFromPoint(e.clientX,e.clientY);i&&"VIDEO"!=i.tagName&&i.className.indexOf("vjs")>=0&&this.player_.volume(this.calculateDistance(e))}},vjs.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)},vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)},vjs.VolumeLevel=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},vjs.VolumeHandle=vjs.SliderHandle.extend(),vjs.VolumeHandle.prototype.defaultValue="00:00",vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})},vjs.MuteToggle=vjs.Button.extend({init:function(e,t){vjs.Button.call(this,e,t),this.on(e,"volumechange",this.update);var n=e.getMuteSettingsForIOS10();e.tech&&!1===e.tech.featuresVolumeControl&&!n&&this.addClass("vjs-hidden"),this.on(e,"loadstart",(function(){!1!==e.tech.featuresVolumeControl||n?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}))}}),vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})},vjs.MuteToggle.prototype.onClick=function(){if(this.player_.muted()){var e=this.player_.volume();0===e&&(e=.5,this.player_.volume(e))}this.player_.muted(!this.player_.muted())},vjs.MuteToggle.prototype.update=function(){var e=this.player_.volume(),t=3;if(0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2),this.el_){this.player_.muted()?this.el_.children[0].children[0].innerHTML!=this.localize("Unmute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Unmute")):this.el_.children[0].children[0].innerHTML!=this.localize("Mute")&&(this.el_.children[0].children[0].innerHTML=this.localize("Mute"));for(var n=0;n<4;n++)vjs.removeClass(this.el_,"vjs-vol-"+n);vjs.addClass(this.el_,"vjs-vol-"+t)}},vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(e,t){vjs.MenuButton.call(this,e,t),this.on(e,"volumechange",this.volumeUpdate),e.tech&&!1===e.tech.featuresVolumeControl&&this.addClass("vjs-hidden"),this.on(e,"loadstart",(function(){!1===e.tech.featuresVolumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})),this.addClass("vjs-menu-button")}}),vjs.VolumeMenuButton.prototype.createMenu=function(){var e=new vjs.Menu(this.player_,{contentElType:"div"}),t=new vjs.VolumeBar(this.player_,this.options_.volumeBar);return t.on("focus",(function(){e.lockShowing()})),t.on("blur",(function(){e.unlockShowing()})),e.addChild(t),e},vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this),vjs.MenuButton.prototype.onClick.call(this)},vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.localize("Mute")+"</span></div>"})},vjs.VolumeMenuButton.prototype.volumeUpdate=vjs.MuteToggle.prototype.update,vjs.PlaybackRateMenuButton=vjs.MenuButton.extend({init:function(e,t){vjs.MenuButton.call(this,e,t),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",this.updateVisibility),this.on(e,"ratechange",this.updateLabel)}}),vjs.PlaybackRateMenuButton.prototype.buttonText="Playback Rate",vjs.PlaybackRateMenuButton.prototype.className="vjs-playback-rate",vjs.PlaybackRateMenuButton.prototype.createEl=function(){var e=vjs.MenuButton.prototype.createEl.call(this);return this.labelEl_=vjs.createEl("div",{className:"vjs-playback-rate-value",innerHTML:1}),e.appendChild(this.labelEl_),e},vjs.PlaybackRateMenuButton.prototype.createMenu=function(){var e=new vjs.Menu(this.player()),t=this.player().options().playbackRates;if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new vjs.PlaybackRateMenuItem(this.player(),{rate:t[n]+"x"}));return e},vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},vjs.PlaybackRateMenuButton.prototype.onClick=function(){for(var e=this.player().playbackRate(),t=this.player().options().playbackRates,n=t[0],i=0;i<t.length;i++)if(t[i]>e){n=t[i];break}this.player().playbackRate(n)},vjs.PlaybackRateMenuButton.prototype.playbackRateSupported=function(){return this.player().tech&&this.player().tech.featuresPlaybackRate&&this.player().options().playbackRates&&this.player().options().playbackRates.length>0},vjs.PlaybackRateMenuButton.prototype.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},vjs.PlaybackRateMenuButton.prototype.updateLabel=function(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},vjs.PlaybackRateMenuItem=vjs.MenuItem.extend({contentElType:"button",init:function(e,t){var n=this.label=t.rate,i=this.rate=parseFloat(n,10);t.label=n,t.selected=1===i,vjs.MenuItem.call(this,e,t),this.on(e,"ratechange",this.update)}}),vjs.PlaybackRateMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player().playbackRate(this.rate)},vjs.PlaybackRateMenuItem.prototype.update=function(){this.selected(this.player().playbackRate()==this.rate)},vjs.PosterImage=vjs.Button.extend({init:function(e,t){vjs.Button.call(this,e,t),this.update(),e.on("posterchange",vjs.bind(this,this.update))}}),vjs.PosterImage.prototype.dispose=function(){this.player().off("posterchange",this.update),vjs.Button.prototype.dispose.call(this)},vjs.PosterImage.prototype.createEl=function(){var e=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1});return vjs.BACKGROUND_SIZE_SUPPORTED||(this.fallbackImg_=vjs.createEl("img"),e.appendChild(this.fallbackImg_)),e},vjs.PosterImage.prototype.update=function(){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},vjs.PosterImage.prototype.setSrc=function(e){var t;this.fallbackImg_?this.fallbackImg_.src=e:(t="",e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t)},vjs.PosterImage.prototype.onClick=function(){this.player_.play()},vjs.LoadingSpinner=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t)}}),vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})},vjs.BigPlayButton=vjs.Button.extend(),vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},vjs.BigPlayButton.prototype.onClick=function(){},vjs.ErrorDisplay=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.update(),this.on(e,"error",this.update)}}),vjs.ErrorDisplay.prototype.createEl=function(){var e=vjs.Component.prototype.createEl.call(this,"div",{});return this.contentEl_=vjs.createEl("div"),e.appendChild(this.contentEl_),e},vjs.ErrorDisplay.prototype.update=function(){this.player().error()&&(this.contentEl_.innerHTML=this.localize(this.player().error().message))},vjs.MediaTechController=vjs.Component.extend({init:function(e,t,n){(t=t||{}).reportTouchActivity=!1,vjs.Component.call(this,e,t,n),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),this.initControlsListeners(),this.initTextTrackListeners()}}),vjs.MediaTechController.prototype.initControlsListeners=function(){var e,t;e=this.player(),t=function(){e.controls()&&!e.usingNativeControls()&&this.addControlsListeners()},this.ready(t),this.on(e,"controlsenabled",t),this.on(e,"controlsdisabled",this.removeControlsListeners),this.ready((function(){this.networkState&&this.networkState()>0&&this.player().trigger("loadstart")}))},vjs.MediaTechController.prototype.addControlsListeners=function(){var e;this.on("mousedown",this.onClick),this.on("touchstart",(function(t){e=this.player_.userActive()})),this.on("touchmove",(function(t){e&&this.player().reportUserActivity()})),this.on("touchend",(function(e){e.preventDefault()})),this.emitTapEvents(),this.on("tap",this.onTap)},vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap"),this.off("touchstart"),this.off("touchmove"),this.off("touchleave"),this.off("touchcancel"),this.off("touchend"),this.off("click"),this.off("mousedown")},vjs.MediaTechController.prototype.onClick=function(e){0===e.button&&this.player().controls()&&(this.player().paused()?this.player().play():this.player().pause())},vjs.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())},vjs.MediaTechController.prototype.manualProgressOn=function(){this.manualProgress=!0,this.trackProgress()},vjs.MediaTechController.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress()},vjs.MediaTechController.prototype.trackProgress=function(){this.progressInterval=this.setInterval((function(){var e=this.player().bufferedPercent();this.bufferedPercent_!=e&&this.player().trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()}),500)},vjs.MediaTechController.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},vjs.MediaTechController.prototype.manualTimeUpdatesOn=function(){var e=this.player_;this.manualTimeUpdates=!0,this.on(e,"play",this.trackCurrentTime),this.on(e,"pause",this.stopTrackingCurrentTime),this.one("timeupdate",(function(){this.featuresTimeupdateEvents=!0,this.manualTimeUpdatesOff()}))},vjs.MediaTechController.prototype.manualTimeUpdatesOff=function(){var e=this.player_;this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off(e,"play",this.trackCurrentTime),this.off(e,"pause",this.stopTrackingCurrentTime)},vjs.MediaTechController.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.player().trigger("timeupdate")}),250)},vjs.MediaTechController.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.player().trigger("timeupdate")},vjs.MediaTechController.prototype.dispose=function(){this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),vjs.Component.prototype.dispose.call(this)},vjs.MediaTechController.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.player().trigger("timeupdate")},vjs.MediaTechController.prototype.initTextTrackListeners=function(){var e,t=this.player_,n=function(){var e=t.getChild("textTrackDisplay");e&&e.updateDisplay()};(e=this.textTracks())&&(e.addEventListener("removetrack",n),e.addEventListener("addtrack",n),this.on("dispose",vjs.bind(this,(function(){e.removeEventListener("removetrack",n),e.removeEventListener("addtrack",n)}))))},vjs.MediaTechController.prototype.emulateTextTracks=function(){var e,t,n=this.player_;window.WebVTT,(t=this.textTracks())&&(e=function(){var e,t,i;for((i=n.getChild("textTrackDisplay")).updateDisplay(),e=0;e<this.length;e++)(t=this[e]).removeEventListener("cuechange",vjs.bind(i,i.updateDisplay)),"showing"===t.mode&&t.addEventListener("cuechange",vjs.bind(i,i.updateDisplay))},t.addEventListener("change",e),this.on("dispose",vjs.bind(this,(function(){t.removeEventListener("change",e)}))))},vjs.MediaTechController.prototype.textTracks_,vjs.MediaTechController.prototype.textTracks=function(){return this.player_.textTracks_=this.player_.textTracks_||new vjs.TextTrackList,this.player_.textTracks_},vjs.MediaTechController.prototype.remoteTextTracks=function(){return this.player_.remoteTextTracks_=this.player_.remoteTextTracks_||new vjs.TextTrackList,this.player_.remoteTextTracks_},createTrackHelper=function(e,t,n,i,r){var o,a=e.textTracks();return(r=r||{}).kind=t,n&&(r.label=n),i&&(r.language=i),r.player=e.player_,o=new vjs.TextTrack(r),a.addTrack_(o),o},vjs.MediaTechController.prototype.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return createTrackHelper(this,e,t,n)},vjs.MediaTechController.prototype.addRemoteTextTrack=function(e){var t=createTrackHelper(this,e.kind,e.label,e.language,e);return this.remoteTextTracks().addTrack_(t),{track:t}},vjs.MediaTechController.prototype.removeRemoteTextTrack=function(e){this.textTracks().removeTrack_(e),this.remoteTextTracks().removeTrack_(e)},vjs.MediaTechController.prototype.setPoster=function(){},vjs.MediaTechController.prototype.featuresVolumeControl=!0,vjs.MediaTechController.prototype.featuresFullscreenResize=!1,vjs.MediaTechController.prototype.featuresPlaybackRate=!1,vjs.MediaTechController.prototype.featuresProgressEvents=!1,vjs.MediaTechController.prototype.featuresTimeupdateEvents=!1,vjs.MediaTechController.prototype.featuresNativeTextTracks=!1,vjs.MediaTechController.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.selectSourceHandler=function(t){for(var n=e.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(t))return n[i];return null},e.canPlaySource=function(t){var n=e.selectSourceHandler(t);return n?n.canHandleSource(t):""},e.prototype.setSource=function(t){var n=e.selectSourceHandler(t);return n||(e.nativeSourceHandler?n=e.nativeSourceHandler:vjs.log.error("No source hander found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),this.currentSource_=t,this.sourceHandler_=n.handleSource(t,this),this.on("dispose",this.disposeSourceHandler),this},e.prototype.disposeSourceHandler=function(){this.sourceHandler_&&this.sourceHandler_.dispose&&this.sourceHandler_.dispose()}},vjs.media={},vjs.Html5=vjs.MediaTechController.extend({init:function(e,t,n){var i,r,o,a,s;!1!==t.nativeCaptions&&!1!==t.nativeTextTracks||(this.featuresNativeTextTracks=!1),vjs.MediaTechController.call(this,e,t,n),this.setupTriggers();var l=t.source;if(l&&(this.el_.currentSrc!==l.src||e.tag&&3===e.tag.initNetworkState_)&&this.setSource(l),this.el_.hasChildNodes()){for(r=(i=this.el_.childNodes).length,s=[];r--;)"track"===(a=i[r]).nodeName.toLowerCase()&&(this.featuresNativeTextTracks?this.remoteTextTracks().addTrack_(a.track):s.push(a));for(o=0;o<s.length;o++)this.el_.removeChild(s[o])}this.featuresNativeTextTracks&&this.on("loadstart",vjs.bind(this,this.hideCaptions)),vjs.TOUCH_ENABLED&&!0===e.options().nativeControlsForTouch&&this.useNativeControls(),e.ready((function(){this.src()&&this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())})),this.triggerReady()}}),vjs.Html5.prototype.dispose=function(){vjs.Html5.disposeMediaElement(this.el_),vjs.MediaTechController.prototype.dispose.call(this)},vjs.Html5.prototype.createEl=function(){var e,t,n,i,r,o=this.player_,a=o.tag;if(!a||!1===this.movingMediaElementInDOM){if(a?(r=a.cloneNode(!1),vjs.Html5.disposeMediaElement(a),a=r,o.tag=null):(a=vjs.createEl("video"),i=videojs.util.mergeOptions({},o.tagAttributes),vjs.TOUCH_ENABLED&&!0===o.options().nativeControlsForTouch||delete i.controls,vjs.setElementAttributes(a,vjs.obj.merge(i,{id:o.id()+"_html5_api",class:"vjs-tech"}))),a.player=o,o.options_.tracks)for(n=0;n<o.options_.tracks.length;n++)e=o.options_.tracks[n],(t=document.createElement("track")).kind=e.kind,t.label=e.label,t.srclang=e.srclang,t.src=e.src,"default"in e&&t.setAttribute("default","default"),a.appendChild(t);vjs.insertFirst(a,o.el())}var s=["autoplay","preload","loop","muted"];for(n=s.length-1;n>=0;n--){var l=s[n],d={};void 0!==o.options_[l]&&(d[l]=o.options_[l]),vjs.setElementAttributes(a,d)}return o.options_.enableNativeInline&&(a.setAttribute("playsinline",""),a.setAttribute("webkit-playsinline","")),a},vjs.Html5.prototype.hideCaptions=function(){for(var e,t=this.el_.querySelectorAll("track"),n=t.length,i={captions:1,subtitles:1};n--;)(e=t[n].track)&&e.kind in i&&!t[n].default&&(e.mode="disabled")},vjs.Html5.prototype.setupTriggers=function(){for(var e=vjs.Html5.Events.length-1;e>=0;e--)this.on(vjs.Html5.Events[e],this.eventHandler)},vjs.Html5.prototype.eventHandler=function(e){"error"==e.type&&this.error()?this.player().error(this.error().code):(e.bubbles=!1,this.player().trigger(e))},vjs.Html5.prototype.useNativeControls=function(){var e,t,n,i,r;e=this,t=this.player(),e.setControls(t.controls()),n=function(){e.setControls(!0)},i=function(){e.setControls(!1)},t.on("controlsenabled",n),t.on("controlsdisabled",i),r=function(){t.off("controlsenabled",n),t.off("controlsdisabled",i)},e.on("dispose",r),t.on("usingcustomcontrols",r),t.usingNativeControls(!0)},vjs.Html5.prototype.play=function(){this.el_.play()},vjs.Html5.prototype.pause=function(){this.el_.pause()},vjs.Html5.prototype.paused=function(){return this.el_.paused},vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime||this.el_.currentTimeForOutstream||0},vjs.Html5.prototype.setCurrentTime=function(e){try{this.el_.currentTimeForOutstream=e,this.el_.currentTime=e}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}},vjs.Html5.prototype.duration=function(){return this.el_.duration||0},vjs.Html5.prototype.buffered=function(){return this.el_.buffered},vjs.Html5.prototype.volume=function(){return this.el_.volume},vjs.Html5.prototype.setVolume=function(e){this.el_.volume=e},vjs.Html5.prototype.muted=function(){return this.el_.muted},vjs.Html5.prototype.setMuted=function(e){this.el_.muted=e},vjs.Html5.prototype.width=function(){return this.el_.offsetWidth},vjs.Html5.prototype.height=function(){return this.el_.offsetHeight},vjs.Html5.prototype.supportsFullScreen=function(){return!("function"!=typeof this.el_.webkitEnterFullScreen||!/Android/.test(vjs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT))},vjs.Html5.prototype.enterFullScreen=function(){var e=this.el_;"webkitDisplayingFullscreen"in e&&this.one("webkitbeginfullscreen",(function(){this.player_.isFullscreen(!0),this.one("webkitendfullscreen",(function(){this.player_.isFullscreen(!1),this.player_.trigger("fullscreenchange")})),this.player_.trigger("fullscreenchange")})),e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout((function(){e.pause(),e.webkitEnterFullScreen()}),0)):e.webkitEnterFullScreen()},vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},vjs.Html5.prototype.returnOriginalIfBlobURI_=function(e,t){return t&&e&&/^blob\:/i.test(e)?t:e},vjs.Html5.prototype.src=function(e){var t=this.el_.src;if(void 0===e)return this.returnOriginalIfBlobURI_(t,this.source_);this.setSrc(e)},vjs.Html5.prototype.setSrc=function(e){this.el_.src=e},vjs.Html5.prototype.load=function(){this.el_.load()},vjs.Html5.prototype.currentSrc=function(){var e=this.el_.currentSrc;return this.currentSource_?this.returnOriginalIfBlobURI_(e,this.currentSource_.src):e},vjs.Html5.prototype.poster=function(){return this.el_.poster},vjs.Html5.prototype.setPoster=function(e){this.el_.poster=e},vjs.Html5.prototype.preload=function(){return this.el_.preload},vjs.Html5.prototype.setPreload=function(e){this.el_.preload=e},vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay},vjs.Html5.prototype.setAutoplay=function(e){this.el_.autoplay=e},vjs.Html5.prototype.controls=function(){return this.el_.controls},vjs.Html5.prototype.setControls=function(e){this.el_.controls=!!e},vjs.Html5.prototype.loop=function(){return this.el_.loop},vjs.Html5.prototype.setLoop=function(e){this.el_.loop=e},vjs.Html5.prototype.error=function(){return this.el_.error},vjs.Html5.prototype.seeking=function(){return this.el_.seeking},vjs.Html5.prototype.seekable=function(){return this.el_.seekable},vjs.Html5.prototype.ended=function(){return this.el_.ended},vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vjs.Html5.prototype.playbackRate=function(){return this.el_.playbackRate},vjs.Html5.prototype.setPlaybackRate=function(e){this.el_.playbackRate=e},vjs.Html5.prototype.networkState=function(){return this.el_.networkState},vjs.Html5.prototype.readyState=function(){return this.el_.readyState},vjs.Html5.prototype.textTracks=function(){return this.featuresNativeTextTracks?this.el_.textTracks:vjs.MediaTechController.prototype.textTracks.call(this)},vjs.Html5.prototype.addTextTrack=function(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):vjs.MediaTechController.prototype.addTextTrack.call(this,e,t,n)},vjs.Html5.prototype.addRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return vjs.MediaTechController.prototype.addRemoteTextTrack.call(this,e);var t=document.createElement("track");return(e=e||{}).kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),this.el().appendChild(t),"metadata"===t.track.kind?t.track.mode="hidden":t.track.mode="disabled",t.onload=function(){var e=t.track;t.readyState>=2&&("metadata"===e.kind&&"hidden"!==e.mode?e.mode="hidden":"metadata"!==e.kind&&"disabled"!==e.mode&&(e.mode="disabled"),t.onload=null)},this.remoteTextTracks().addTrack_(t.track),t},vjs.Html5.prototype.removeRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return vjs.MediaTechController.prototype.removeRemoteTextTrack.call(this,e);var t,n;for(this.remoteTextTracks().removeTrack_(e),t=this.el().querySelectorAll("track"),n=0;n<t.length;n++)if(t[n]===e||t[n].track===e){t[n].parentNode.removeChild(t[n]);break}},vjs.Html5.isSupported=function(){try{vjs.TEST_VID.volume=.5}catch(e){return!1}return!!vjs.TEST_VID.canPlayType},vjs.MediaTechController.withSourceHandlers(vjs.Html5),origSetSource=vjs.Html5.prototype.setSource,origDisposeSourceHandler=vjs.Html5.prototype.disposeSourceHandler,vjs.Html5.prototype.setSource=function(e){var t=origSetSource.call(this,e);return this.source_=e.src,t},vjs.Html5.prototype.disposeSourceHandler=function(){return this.source_=void 0,origDisposeSourceHandler.call(this)},vjs.Html5.nativeSourceHandler={},vjs.Html5.nativeSourceHandler.canHandleSource=function(e){var t;function n(e){try{return vjs.TEST_VID.canPlayType(e)}catch(e){return""}}return e.type?n(e.type):e.src?n("video/"+((t=e.src.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i))&&t[1])):""},vjs.Html5.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},vjs.Html5.nativeSourceHandler.dispose=function(){},vjs.Html5.registerSourceHandler(vjs.Html5.nativeSourceHandler),vjs.Html5.canControlVolume=function(){var e=vjs.TEST_VID.volume;return vjs.TEST_VID.volume=e/2+.1,e!==vjs.TEST_VID.volume},vjs.Html5.canControlPlaybackRate=function(){var e=vjs.TEST_VID.playbackRate;return vjs.TEST_VID.playbackRate=e/2+.1,e!==vjs.TEST_VID.playbackRate},vjs.Html5.supportsNativeTextTracks=function(){var e;return(e=!!vjs.TEST_VID.textTracks)&&vjs.TEST_VID.textTracks.length>0&&(e="number"!=typeof vjs.TEST_VID.textTracks[0].mode),e},vjs.Html5.prototype.featuresVolumeControl=vjs.Html5.canControlVolume(),vjs.Html5.prototype.featuresPlaybackRate=vjs.Html5.canControlPlaybackRate(),vjs.Html5.prototype.movingMediaElementInDOM=!vjs.IS_IOS,vjs.Html5.prototype.featuresFullscreenResize=!0,vjs.Html5.prototype.featuresProgressEvents=!0,vjs.Html5.prototype.featuresNativeTextTracks=vjs.Html5.supportsNativeTextTracks(),mpegurlRE=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,mp4RE=/^video\/mp4/i,vjs.Html5.patchCanPlayType=function(){vjs.ANDROID_VERSION>=4&&(canPlayType||(canPlayType=vjs.TEST_VID.constructor.prototype.canPlayType),vjs.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&mpegurlRE.test(e)?"maybe":canPlayType.call(this,e)}),vjs.IS_OLD_ANDROID&&(canPlayType||(canPlayType=vjs.TEST_VID.constructor.prototype.canPlayType),vjs.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&mp4RE.test(e)?"maybe":canPlayType.call(this,e)})},vjs.Html5.unpatchCanPlayType=function(){var e=vjs.TEST_VID.constructor.prototype.canPlayType;return vjs.TEST_VID.constructor.prototype.canPlayType=canPlayType,canPlayType=null,e},vjs.Html5.patchCanPlayType(),vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","),vjs.Html5.disposeMediaElement=function(e){if(e){for(e.player=null,e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},vjs.MediaLoader=vjs.Component.extend({init:function(e,t,n){if(vjs.Component.call(this,e,t,n),e.options_.sources&&0!==e.options_.sources.length)e.src(e.options_.sources);else for(var i=0,r=e.options_.techOrder;i<r.length;i++){var o=vjs.capitalize(r[i]),a=window[vjs.options.vjs_prop_name][o];if(a&&a.isSupported()){e.loadTech(o);break}}}}),vjs.TextTrackMode={disabled:"disabled",hidden:"hidden",showing:"showing"},vjs.TextTrackKind={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},vjs.TextTrack=function(e){var t,n,i,r,o,a,s,l,d,c,u;if(!(e=e||{}).player)throw new Error("A player was not provided.");if(t=this,vjs.IS_IE8)for(u in t=document.createElement("custom"),vjs.TextTrack.prototype)t[u]=vjs.TextTrack.prototype[u];if(t.player_=e.player,i=vjs.TextTrackMode[e.mode]||"disabled",r=vjs.TextTrackKind[e.kind]||"subtitles",o=e.label||"",a=e.language||e.srclang||"",n=e.id||"vjs_text_track_"+vjs.guid++,"metadata"!==r&&"chapters"!==r||(i="hidden"),t.cues_=[],t.activeCues_=[],s=new vjs.TextTrackCueList(t.cues_),l=new vjs.TextTrackCueList(t.activeCues_),c=!1,d=vjs.bind(t,(function(){this.activeCues,c&&(this.trigger("cuechange"),c=!1)})),"disabled"!==i&&t.player_.on("timeupdate",d),Object.defineProperty(t,"kind",{get:function(){return r},set:Function.prototype}),Object.defineProperty(t,"label",{get:function(){return o},set:Function.prototype}),Object.defineProperty(t,"language",{get:function(){return a},set:Function.prototype}),Object.defineProperty(t,"id",{get:function(){return n},set:Function.prototype}),Object.defineProperty(t,"mode",{get:function(){return i},set:function(e){vjs.TextTrackMode[e]&&("showing"===(i=e)&&this.player_.on("timeupdate",d),this.trigger("modechange"))}}),Object.defineProperty(t,"cues",{get:function(){return this.loaded_?s:null},set:Function.prototype}),Object.defineProperty(t,"activeCues",{get:function(){var e,t,n,i,r;if(!this.loaded_)return null;if(0===this.cues.length)return l;for(i=this.player_.currentTime(),e=0,t=this.cues.length,n=[];e<t;e++)((r=this.cues[e]).startTime<=i&&r.endTime>=i||r.startTime===r.endTime&&r.startTime<=i&&r.startTime+.5>=i)&&n.push(r);if(c=!1,n.length!==this.activeCues_.length)c=!0;else for(e=0;e<n.length;e++)-1===indexOf.call(this.activeCues_,n[e])&&(c=!0);return this.activeCues_=n,l.setCues_(this.activeCues_),l},set:Function.prototype}),e.src?loadTrack(e.src,t):t.loaded_=!0,vjs.IS_IE8)return t},vjs.TextTrack.prototype=vjs.obj.create(vjs.EventEmitter.prototype),vjs.TextTrack.prototype.constructor=vjs.TextTrack,vjs.TextTrack.prototype.allowedEvents_={cuechange:"cuechange"},vjs.TextTrack.prototype.addCue=function(e){var t=this.player_.textTracks(),n=0;if(t)for(;n<t.length;n++)t[n]!==this&&t[n].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},vjs.TextTrack.prototype.removeCue=function(e){for(var t=0,n=this.cues_.length,i=!1;t<n;t++)this.cues_[t]===e&&(this.cues_.splice(t,1),i=!0);i&&this.cues.setCues_(this.cues_)},loadTrack=function(e,t){vjs.xhr(e,vjs.bind(this,(function(e,n,i){if(e)return vjs.log.error(e);t.loaded_=!0,parseCues(i,t)})))},parseCues=function(e,t){if("function"!=typeof window.WebVTT)return window.setTimeout((function(){parseCues(e,t)}),25);var n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder());n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){vjs.log.error(e)},n.parse(e),n.flush()},indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),r=i.length>>>0;if(0===r)return-1;var o=+t||0;if(Math.abs(o)===1/0&&(o=0),o>=r)return-1;for(n=Math.max(o>=0?o:r-Math.abs(o),0);n<r;){if(n in i&&i[n]===e)return n;n++}return-1},vjs.TextTrackList=function(e){var t,n=this,i=0;if(vjs.IS_IE8)for(t in n=document.createElement("custom"),vjs.TextTrackList.prototype)n[t]=vjs.TextTrackList.prototype[t];for(e=e||[],n.tracks_=[],Object.defineProperty(n,"length",{get:function(){return this.tracks_.length}});i<e.length;i++)n.addTrack_(e[i]);if(vjs.IS_IE8)return n},vjs.TextTrackList.prototype=vjs.obj.create(vjs.EventEmitter.prototype),vjs.TextTrackList.prototype.constructor=vjs.TextTrackList,vjs.TextTrackList.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},function(){var e;for(e in vjs.TextTrackList.prototype.allowedEvents_)vjs.TextTrackList.prototype["on"+e]=null}(),vjs.TextTrackList.prototype.addTrack_=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),e.addEventListener("modechange",vjs.bind(this,(function(){this.trigger("change")}))),this.tracks_.push(e),this.trigger({type:"addtrack",track:e})},vjs.TextTrackList.prototype.removeTrack_=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e){this.tracks_.splice(t,1);break}this.trigger({type:"removetrack",track:e})},vjs.TextTrackList.prototype.getTrackById=function(e){for(var t,n=0,i=this.length,r=null;n<i;n++)if((t=this[n]).id===e){r=t;break}return r},vjs.TextTrackCueList=function(e){var t,n=this;if(vjs.IS_IE8)for(t in n=document.createElement("custom"),vjs.TextTrackCueList.prototype)n[t]=vjs.TextTrackCueList.prototype[t];if(vjs.TextTrackCueList.prototype.setCues_.call(n,e),Object.defineProperty(n,"length",{get:function(){return this.length_}}),vjs.IS_IE8)return n},vjs.TextTrackCueList.prototype.setCues_=function(e){var t,n=this.length||0,i=0,r=e.length;if(this.cues_=e,this.length_=e.length,t=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})},n<r)for(i=n;i<r;i++)t.call(this,i)},vjs.TextTrackCueList.prototype.getCueById=function(e){for(var t,n=0,i=this.length,r=null;n<i;n++)if((t=this[n]).id===e){r=t;break}return r},function(){"use strict";vjs.TextTrackDisplay=vjs.Component.extend({init:function(e,t,n){vjs.Component.call(this,e,t,n),e.on("loadstart",vjs.bind(this,this.toggleDisplay)),e.ready(vjs.bind(this,(function(){var t,n,i;if(e.tech&&e.tech.featuresNativeTextTracks)this.hide();else for(e.on("fullscreenchange",vjs.bind(this,this.updateDisplay)),n=e.options_.tracks||[],t=0;t<n.length;t++)i=n[t],this.player_.addRemoteTextTrack(i)})))}}),vjs.TextTrackDisplay.prototype.toggleDisplay=function(){this.player_.tech&&this.player_.tech.featuresNativeTextTracks?this.hide():this.show()},vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})},vjs.TextTrackDisplay.prototype.clearDisplay=function(){"function"==typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.el_)};var e=function(e,t){return"rgba("+parseInt(e[1]+e[1],16)+","+parseInt(e[2]+e[2],16)+","+parseInt(e[3]+e[3],16)+","+t+")"},t="#222",n={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},i=function(e,t,n){try{e.style[t]=n}catch(e){}};vjs.TextTrackDisplay.prototype.updateDisplay=function(){var e,t=this.player_.textTracks(),n=0;if(this.clearDisplay(),t)for(;n<t.length;n++)"showing"===(e=t[n]).mode&&this.updateForTrack(e)},vjs.TextTrackDisplay.prototype.updateForTrack=function(r){if("function"==typeof window.WebVTT&&r.activeCues){for(var o,a,s=0,l=this.player_.textTrackSettings.getValues(),d=[];s<r.activeCues.length;s++)d.push(r.activeCues[s]);for(window.WebVTT.processCues(window,r.activeCues,this.el_),s=d.length;s--;)o=d[s].displayState,l.color&&(o.firstChild.style.color=l.color),l.textOpacity&&i(o.firstChild,"color",e(l.color||"#fff",l.textOpacity)),l.backgroundColor&&(o.firstChild.style.backgroundColor=l.backgroundColor),l.backgroundOpacity&&i(o.firstChild,"backgroundColor",e(l.backgroundColor||"#000",l.backgroundOpacity)),l.windowColor&&(l.windowOpacity?i(o,"backgroundColor",e(l.windowColor,l.windowOpacity)):o.style.backgroundColor=l.windowColor),l.edgeStyle&&("dropshadow"===l.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+t:"raised"===l.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+t:"depressed"===l.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+t:"uniform"===l.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+t)),l.fontPercent&&1!==l.fontPercent&&(a=window.parseFloat(o.style.fontSize),o.style.fontSize=a*l.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"),l.fontFamily&&"default"!==l.fontFamily&&("small-caps"===l.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=n[l.fontFamily])}},vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(e,t){var n,i,r=this.track=t.track,o=e.textTracks();o&&(n=vjs.bind(this,(function(){var e,t,n,i="showing"===this.track.mode;if(this instanceof vjs.OffTextTrackMenuItem)for(i=!0,t=0,n=o.length;t<n;t++)if((e=o[t]).kind===this.track.kind&&"showing"===e.mode){i=!1;break}this.selected(i),(vjs.IS_IOS||vjs.IS_ANDROID)&&this.el_&&this.el_.parentNode&&this.el_.parentNode.parentNode&&(this.el_.parentNode.parentNode.classList.remove("vjs-lock-showing"),this.el_.parentNode.parentNode.style.display="none")})),o.addEventListener("change",n),e.on("dispose",(function(){o.removeEventListener("change",n)}))),t.label=r.label||r.language||"Unknown",t.selected=r.default||"showing"===r.mode,vjs.MenuItem.call(this,e,t),o&&void 0===o.onchange&&this.on(["tap","click"],(function(){if("object"!=typeof window.Event)try{i=new window.Event("change")}catch(e){}i||(i=document.createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(i)}))}}),vjs.TextTrackMenuItem.prototype.onClick=function(){var e,t=this.track.kind,n=this.player_.textTracks(),i=0;if(vjs.MenuItem.prototype.onClick.call(this),n)for(;i<n.length;i++)(e=n[i]).kind===t&&(e===this.track?e.mode="showing":e.mode="disabled")},vjs.TextTrackMenuItem.prototype.onEnterClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this)},vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(e,t){t.track={kind:t.kind,player:e,label:t.kind+" off",default:!1,mode:"disabled"},vjs.TextTrackMenuItem.call(this,e,t),this.selected(!0)}}),vjs.CaptionSettingsMenuItem=vjs.TextTrackMenuItem.extend({init:function(e,t){t.track={kind:t.kind,player:e,label:t.kind+" settings",default:!1,mode:"disabled"},vjs.TextTrackMenuItem.call(this,e,t),this.addClass("vjs-texttrack-settings")}}),vjs.CaptionSettingsMenuItem.prototype.onClick=function(){this.player().getChild("textTrackSettings").show()},vjs.TextTrackButton=vjs.MenuButton.extend({init:function(e,t){var n,i;vjs.MenuButton.call(this,e,t),n=this.player_.textTracks(),this.items.length<=1&&this.hide(),n&&(i=vjs.bind(this,this.update),n.addEventListener("removetrack",i),n.addEventListener("addtrack",i),this.player_.on("dispose",(function(){n.removeEventListener("removetrack",i),n.removeEventListener("addtrack",i)})))}}),vjs.TextTrackButton.prototype.createItems=function(){var e,t,n=[];if(!(this instanceof vjs.CaptionsButton)||this.player().tech&&this.player().tech.featuresNativeTextTracks||n.push(new vjs.CaptionSettingsMenuItem(this.player_,{kind:this.kind_})),n.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_})),!(t=this.player_.textTracks()))return n;for(var i=0;i<t.length;i++)(e=t[i]).kind===this.kind_&&n.push(new vjs.TextTrackMenuItem(this.player_,{track:e}));return n},vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(e,t,n){vjs.TextTrackButton.call(this,e,t,n),this.el_.setAttribute("aria-label","Captions Menu")}}),vjs.CaptionsButton.prototype.kind_="captions",vjs.CaptionsButton.prototype.buttonText="Captions",vjs.CaptionsButton.prototype.className="vjs-captions-button",vjs.CaptionsButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{tabIndex:10})},vjs.CaptionsButton.prototype.update=function(){var e=2;vjs.TextTrackButton.prototype.update.call(this),this.player().tech&&this.player().tech.featuresNativeTextTracks&&(e=1),this.items&&this.items.length>e?this.show():this.hide()},vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(e,t,n){vjs.TextTrackButton.call(this,e,t,n),this.el_.setAttribute("aria-label","Subtitles Menu")}}),vjs.SubtitlesButton.prototype.kind_="subtitles",vjs.SubtitlesButton.prototype.buttonText="Subtitles",vjs.SubtitlesButton.prototype.className="vjs-subtitles-button",vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(e,t,n){vjs.TextTrackButton.call(this,e,t,n),this.el_.setAttribute("aria-label","Chapters Menu")}}),vjs.ChaptersButton.prototype.kind_="chapters",vjs.ChaptersButton.prototype.buttonText="Chapters",vjs.ChaptersButton.prototype.className="vjs-chapters-button",vjs.ChaptersButton.prototype.createItems=function(){var e,t,n=[];if(!(t=this.player_.textTracks()))return n;for(var i=0;i<t.length;i++)(e=t[i]).kind===this.kind_&&n.push(new vjs.TextTrackMenuItem(this.player_,{track:e}));return n},vjs.ChaptersButton.prototype.createMenu=function(){for(var e,t,n=this.player_.textTracks()||[],i=0,r=n.length,o=this.items=[];i<r;i++)if((e=n[i]).kind==this.kind_){if(e.cues){t=e;break}e.mode="hidden",window.setTimeout(vjs.bind(this,(function(){this.createMenu()})),100)}var a=this.menu;if(void 0===a&&(a=new vjs.Menu(this.player_)).contentEl().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1})),t){var s,l,d=t.cues;for(i=0,r=d.length;i<r;i++)s=d[i],l=new vjs.ChaptersTrackMenuItem(this.player_,{track:t,cue:s}),o.push(l),a.addChild(l);this.addChild(a)}return this.items.length>0&&this.show(),a},vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(e,t){var n=this.track=t.track,i=this.cue=t.cue,r=e.currentTime();t.label=i.text,t.selected=i.startTime<=r&&r<i.endTime,vjs.MenuItem.call(this,e,t),n.addEventListener("cuechange",vjs.bind(this,this.update))}}),vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},vjs.ChaptersTrackMenuItem.prototype.update=function(){var e=this.cue,t=this.player_.currentTime();this.selected(e.startTime<=t&&t<e.endTime)}}();var cacheManager=__webpack_require__(5079).y;if(function(){"use strict";function e(e){var t;return e.selectedOptions?t=e.selectedOptions[0]:e.options&&(t=e.options[e.options.selectedIndex]),t.value}function t(e,t){var n;if(t){for(n=0;n<e.options.length&&e.options[n].value!==t;n++);e.selectedIndex=n}}vjs.TextTrackSettings=vjs.Component.extend({init:function(e,t){vjs.Component.call(this,e,t),this.hide(),vjs.on(this.el().querySelector(".vjs-done-button"),"click",vjs.bind(this,(function(){this.saveSettings(),this.hide()}))),vjs.on(this.el().querySelector(".vjs-default-button"),"click",vjs.bind(this,(function(){this.el().querySelector(".vjs-fg-color > select").selectedIndex=0,this.el().querySelector(".vjs-bg-color > select").selectedIndex=0,this.el().querySelector(".window-color > select").selectedIndex=0,this.el().querySelector(".vjs-text-opacity > select").selectedIndex=0,this.el().querySelector(".vjs-bg-opacity > select").selectedIndex=0,this.el().querySelector(".vjs-window-opacity > select").selectedIndex=0,this.el().querySelector(".vjs-edge-style select").selectedIndex=0,this.el().querySelector(".vjs-font-family select").selectedIndex=0,this.el().querySelector(".vjs-font-percent select").selectedIndex=2,this.updateDisplay()}))),vjs.on(this.el().querySelector(".vjs-fg-color > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-bg-color > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".window-color > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-text-opacity > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-bg-opacity > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-window-opacity > select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-font-percent select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-edge-style select"),"change",vjs.bind(this,this.updateDisplay)),vjs.on(this.el().querySelector(".vjs-font-family select"),"change",vjs.bind(this,this.updateDisplay)),e.options().persistTextTrackSettings&&this.restoreSettings()}}),vjs.TextTrackSettings.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:'<div class="vjs-tracksettings"><div class="vjs-tracksettings-colors"><div class="vjs-fg-color vjs-tracksetting"><label class="vjs-label">Foreground</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-text-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Opaque</option></select></span></div><div class="vjs-bg-color vjs-tracksetting"><label class="vjs-label">Background</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-bg-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div><div class="window-color vjs-tracksetting"><label class="vjs-label">Window</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-window-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div></div><div class="vjs-tracksettings-font"><div class="vjs-font-percent vjs-tracksetting"><label class="vjs-label">Font Size</label><select><option value="0.50">50%</option><option value="0.75">75%</option><option value="1.00" selected>100%</option><option value="1.25">125%</option><option value="1.50">150%</option><option value="1.75">175%</option><option value="2.00">200%</option><option value="3.00">300%</option><option value="4.00">400%</option></select></div><div class="vjs-edge-style vjs-tracksetting"><label class="vjs-label">Text Edge Style</label><select><option value="none">None</option><option value="raised">Raised</option><option value="depressed">Depressed</option><option value="uniform">Uniform</option><option value="dropshadow">Dropshadow</option></select></div><div class="vjs-font-family vjs-tracksetting"><label class="vjs-label">Font Family</label><select><option value="">Default</option><option value="monospaceSerif">Monospace Serif</option><option value="proportionalSerif">Proportional Serif</option><option value="monospaceSansSerif">Monospace Sans-Serif</option><option value="proportionalSansSerif">Proportional Sans-Serif</option><option value="casual">Casual</option><option value="script">Script</option><option value="small-caps">Small Caps</option></select></div></div></div><div class="vjs-tracksettings-controls"><button class="vjs-default-button">Defaults</button><button class="vjs-done-button">Done</button></div>'})},vjs.TextTrackSettings.prototype.getValues=function(){var t,n,i,r,o,a,s,l,d,c;for(c in r=e((t=this.el()).querySelector(".vjs-edge-style select")),o=e(t.querySelector(".vjs-font-family select")),a=e(t.querySelector(".vjs-fg-color > select")),i=e(t.querySelector(".vjs-text-opacity > select")),s=e(t.querySelector(".vjs-bg-color > select")),n=e(t.querySelector(".vjs-bg-opacity > select")),l=e(t.querySelector(".window-color > select")),d={backgroundOpacity:n,textOpacity:i,windowOpacity:e(t.querySelector(".vjs-window-opacity > select")),edgeStyle:r,fontFamily:o,color:a,backgroundColor:s,windowColor:l,fontPercent:window.parseFloat(e(t.querySelector(".vjs-font-percent > select")))})(""===d[c]||"none"===d[c]||"fontPercent"===c&&1===d[c])&&delete d[c];return d},vjs.TextTrackSettings.prototype.setValues=function(e){var n,i=this.el();t(i.querySelector(".vjs-edge-style select"),e.edgeStyle),t(i.querySelector(".vjs-font-family select"),e.fontFamily),t(i.querySelector(".vjs-fg-color > select"),e.color),t(i.querySelector(".vjs-text-opacity > select"),e.textOpacity),t(i.querySelector(".vjs-bg-color > select"),e.backgroundColor),t(i.querySelector(".vjs-bg-opacity > select"),e.backgroundOpacity),t(i.querySelector(".window-color > select"),e.windowColor),t(i.querySelector(".vjs-window-opacity > select"),e.windowOpacity),(n=e.fontPercent)&&(n=n.toFixed(2)),t(i.querySelector(".vjs-font-percent > select"),n)},vjs.TextTrackSettings.prototype.restoreSettings=function(){var e;try{e=JSON.parse(cacheManager.getGenericData("vjs-text-track-settings"))}catch(e){}e&&this.setValues(e)},vjs.TextTrackSettings.prototype.saveSettings=function(){var e;if(this.player_.options().persistTextTrackSettings){e=this.getValues();try{vjs.isEmpty(e)?cacheManager.deleteGenericData("vjs-text-track-settings"):cacheManager.setGenericData("vjs-text-track-settings",JSON.stringify(e))}catch(e){}}},vjs.TextTrackSettings.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}}(),vjs.JSON,void 0!==window.JSON&&"function"==typeof window.JSON.parse)vjs.JSON=window.JSON;else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){var j;function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(void 0!==(i=walk(r,n))?r[n]=i:delete r[n]);return reviver.call(e,t,r)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var e,t,n,i=document.getElementsByTagName("video"),r=document.getElementsByTagName("audio"),o=[];if(i&&i.length>0)for(t=0,n=i.length;t<n;t++)o.push(i[t]);if(r&&r.length>0)for(t=0,n=r.length;t<n;t++)o.push(r[t]);if(o&&o.length>0)for(t=0,n=o.length;t<n;t++){if(!(e=o[t])||!e.getAttribute){vjs.autoSetupTimeout(1);break}void 0===e.player&&null!==e.getAttribute("data-setup")&&videojs(e)}else vjs.windowLoaded||vjs.autoSetupTimeout(1)},vjs.autoSetupTimeout=function(e){setTimeout(vjs.autoSetup,e)},"complete"===document.readyState?vjs.windowLoaded=!0:vjs.one(window,"load",(function(){vjs.windowLoaded=!0})),vjs.autoSetupTimeout(1),vjs.plugin=function(e,t){vjs.Player.prototype[e]=t}},9766:(e,t,n)=>{"use strict";var i=n(1206).E$,r=n(1206).aj,o={NO_VIEWABILITY_DATA:100,MISSING_MANDATORY_PARAMETER_JS:101,FAILED_TO_LOAD_VIEWABILITY_JS:102,INITIALIZATION_FAILED:103,MISSING_MANDATORY_PARAMETER_CB:104,MISSING_MANDATORY_PARAMETER_RDCB:105,MISSING_MANDATORY_PARAMETER_VC:106},a=function(e,t,n,r,a,s,l,d){if(this.contextKey=r,this.service=l||{},this.MSANViewBeacon=d,this.adUID="WR_"+(new Date).getTime()+Math.round(1e3*Math.random()),this.viewabilityMeasurementActive=!0,this.viewabilityData=this.decodePayload(e),this.viewabilityData){if(this.contextKey&&""!==this.contextKey&&(this.log(i.INFO,"contextKey is set in this app, checking contextKey in viewability config"),!this.viewabilityData.hasOwnProperty("contextKey")||-1===this.viewabilityData.contextKey.indexOf(this.contextKey)))return this.log(i.INFO,"contextKey doesn't match, disabling viewability measurement"),void(this.viewabilityMeasurementActive=!1);var c="";try{"object"==typeof t?(this.videoNodeDocument=t.ownerDocument,this.videoNodeWindow=this.videoNodeDocument.defaultView||this.videoNodeDocument.videoNodeWindow,""===t.id&&(t.id="an_video_"+this.adUID),c=t.id):(c=t,this.videoNodeDocument=document,this.videoNodeWindow=window)}catch(e){this.videoNodeDocument=document,this.videoNodeWindow=window}var u={};"function"==typeof this.service.videoElementsCallback&&(u=this.service.videoElementsCallback()),this.videoInfo=this.decodeVideoInfos(n);var p={DomID:c,adUID:this.adUID,Duration:this.videoInfo.duration,Payload:e,Dimension:{w:this.videoInfo.w,h:this.videoInfo.h},Position:{x:this.videoInfo.x,y:this.videoInfo.y}};void 0!==u.videoElement&&(p.videoElement=u.videoElement),void 0!==u.videoContainer&&(p.videoContainer=u.videoContainer),this.log(i.INFO,"ANVideoViewabilityTracker start with parameters",p);try{if(void 0===this.videoNodeWindow.anxVVAPICache){this.videoNodeWindow.anxVVAPICache={events:Array(),init:Array()};var h=this.videoNodeDocument.createElement("script");h.type="text/javascript",h.async=!0,h.src=this.viewabilityData.vjs,h.readyState&&(h.onreadystatechange=function(){"loaded"!=h.readyState&&"complete"!=h.readyState||(h.onreadystatechange=null)}),h.onerror=function(){this.log(i.DEBUG,"script load onerror"),this.error(o.FAILED_TO_LOAD_VIEWABILITY_JS,"ANVideoViewabilityTracker failed to load viewability script ("+h.src+")."),this.viewabilityMeasurementActive=!1}.bind(this),this.videoNodeDocument.getElementsByTagName("head")[0].appendChild(h)}}catch(e){this.error(o.INITIALIZATION_FAILED,{message:"ANVideoViewabilityTracker initialization failed",exception:e})}if(this.extractVersionModule(this.viewabilityData),void 0===this.videoNodeWindow.anxVVAPI){var v={a:this.adUID,params:this.viewabilityData.viewParams,id:c,v:this.VIEWABILITY_MODULE_VERSION,vb:this.MSANViewBeacon,dur:this.videoInfo.duration,w:this.videoInfo.w,h:this.videoInfo.h,x:this.videoInfo.x,y:this.videoInfo.y};void 0!==u.videoElement&&(v.videoElement=u.videoElement),void 0!==u.videoContainer&&(v.videoContainer=u.videoContainer),this.videoNodeWindow.anxVVAPICache.init.push(v)}else this.videoNodeWindow.anxVVAPI.initializeFromParams(this.viewabilityData.viewParams,c,this.adUID,this.VIEWABILITY_MODULE_VERSION,this.videoInfo.duration,this.videoInfo.w,this.videoInfo.h,this.videoInfo.x,this.videoInfo.y,this.MSANViewBeacon,u.videoElement,u.videoContainer);null!==a&&this.onVolumeChange(a),null!==s&&this.onViewModeChange(s)}else this.viewabilityMeasurementActive=!1};a.prototype={VIEWABILITY_MODULE_VERSION:1,log:function(e,t,n){if(this.service.loggerCallback)try{this.service.loggerCallback(e,"[AppNexus] "+t,n)}catch(e){console.trace(e)}},error:function(e,t,n){if(this.service.errorCallback)try{this.service.errorCallback(e,t,n)}catch(e){console.trace(e)}else this.log(i.ERROR,"ERR-"+e+": "+t,n)},parseUrl:function(e){var t={http:"",params:""};try{if(e&&"string"==typeof e){var n=e.split(/:/);if(2===n.length&&(e=n[1],t.http=n[0]),2===(n=e.split(/\?/)).length?t.params=n[1]:(""===t.http||"//"!==e.substr(0,2))&&e.indexOf("=")>-1&&(t.params=n[0]),""!==t.params)for(var r in n=t.params.split(/&/),t.params={},n){var o=n[r].split(/=/);if(2===o.length)t.params[o[0]]=decodeURIComponent(o[1]);else if(o.length>2){for(var a="",s=1;s<o.length;s++)a+="="+o[s];t.params[o[0]]=decodeURIComponent(a.substr(1))}else t.params[o[0]]=""}}}catch(e){this.log(i.DEBUG,e)}return t},parseConfigs:function(e){try{if(e&&"string"==typeof e){"<![CDATA["===e.substring(0,9)&&(e=e.substring(9,e.length-3));var t=this.parseUrl(e);if(t.hasOwnProperty("params")&&""!==t.params)return t.params}}catch(t){return this.log(i.DEBUG,"Error parsing config:"+e),void this.log(i.DEBUG,t)}return this.error(o.NO_VIEWABILITY_DATA,"No viewability data provided"),null},createViewabilityConfig:function(e){var t,n=[],i=!1;for(t in e){var r=e[t];switch(t){case"cb":r||(this.error(o.MISSING_MANDATORY_PARAMETER_CB,"Missing mandatory parameter: "+t+"."),i=!0);break;case"rdcb":r||(this.error(o.MISSING_MANDATORY_PARAMETER_RDCB,"Missing mandatory parameter: "+t+"."),i=!0);break;case"vc":r||(this.error(o.MISSING_MANDATORY_PARAMETER_VC,"Missing mandatory parameter: "+t+"."),i=!0);var a=r.split(/;/);n.push("vc="+encodeURIComponent(a[0]));for(var s=1;s<a.length;s++)n.push(a[s]);continue}n.push(t+"="+encodeURIComponent(r))}return!0===i?null:(n.sort(),n.join("&"))},decodePayload:function(e){var t=this.parseConfigs(e);if(!t)return null;var n=this.createViewabilityConfig(t);if(!n)return null;var i={viewParams:n};return t.hasOwnProperty("vjs")&&""!==t.vjs?(i.vjs=t.vjs,t.hasOwnProperty("vid_context")&&(i.contextKey=t.vid_context),i):(this.error(o.MISSING_MANDATORY_PARAMETER_JS,"no viewability script js to load"),this.viewabilityMeasurementActive=!1,null)},decodeVideoInfos:function(e){var t={duration:0,w:0,h:0,x:0,y:0};return("number"==typeof e.duration||e.duration>0)&&(t.duration=e.duration),("number"==typeof e.w||e.w>0)&&(t.w=e.w),("number"==typeof e.h||e.h>0)&&(t.h=e.h),("number"==typeof e.x||e.x>0)&&(t.x=e.x),("number"==typeof e.y||e.y>0)&&(t.y=e.y),t},extractVersionModule:function(e){if(e){var t=/.+\/(\d+)\/trk\.js/.exec(e.viewJS);t&&t[1]&&(this.VIEWABILITY_MODULE_VERSION=t[1])}},notifyEvent:function(e){if(this.viewabilityMeasurementActive){switch(this.log(i.INFO,"notifyEvent: ["+e+"]"),"an_outstream"==this.contextKey&&"sound_off"==e&&(e="sound_on"),e){case"fullscreen":e="expand";break;case"exitFullscreen":e="collapse";break;case"expand":case"collapse":return}var t=(new Date).getTime();try{if(void 0===this.videoNodeWindow.anxVVAPI){var n={a:this.adUID,c:e,d:t};this.videoNodeWindow.anxVVAPICache.events.push(n)}else this.videoNodeWindow.anxVVAPI.notifyEvent(this.adUID,e)}catch(e){this.log(i.DEBUG,{message:"notifyEvent failed",exception:e})}}else this.log(i.INFO,"notifyEvent cancelled because viewability is not active")},lastKnownVolume:-1,onVolumeChange:function(e){this.viewabilityMeasurementActive?(e>1&&(e=1),e<0&&(e=0),e!==this.lastKnownVolume&&(e>0?this.notifyEvent("sound_on"):this.notifyEvent("sound_off"),this.lastKnownVolume=e)):this.log(i.INFO,"onVolumeChange cancelled because viewability is not active")},onViewModeChange:function(e){this.viewabilityMeasurementActive?e==r.NORMAL?this.notifyEvent("exitFullscreen"):this.notifyEvent("fullscreen"):this.log(i.INFO,"onViewModeChange cancelled because viewability is not active")}},e.exports=a,e.exports.LOG_LEVEL=i,e.exports.ERROR_CODE=o},7837:(e,t,n)=>{"use strict";var i=n(1206).E$,r={BAD_CONFIG:1,LIBRARY_LOADING_ERROR:2,INITIALIZATION_ERROR:3},o=function(e,t,n,o){this.debug=o,this.hasError=!1,this.service=n||{};var a={videoElt:e,params:t,service:n};for(var s in a)a.hasOwnProperty(s)&&(a[s]||(this.hasError=!0,this.log(i.ERROR,"Invalid parameter '"+s+"'='"+a[s]+"'")));if(n){const e=["loggerCallback","getVolumeCallback","getAdDimensionCallback","getAdDurationCallback","getViewModeCallback","errorCallback"];for(var l=0;l<e.length;l++){var d=e[l];if((!n[d]||"function"!=typeof n[d])&&(this.hasError=!0,this.log(i.ERROR,"Service did not implement '"+d+"' API"),"errorCallback"===d))return}}this.hasError?this.service.errorCallback(r.BAD_CONFIG,"Invalid parameter"):(this.videoElt=e,this.iasConfig=this.parseParams(t),this.fwVansInstance=null,this.iasConfig&&this.iasConfig.hasOwnProperty("advEntityId")&&this.iasConfig.hasOwnProperty("pubEntityId")?(this.init(),this.log(i.DEBUG,"Module initialised")):(this.log(i.ERROR,"Unable to initialise module (missing config)"),this.service.errorCallback(r.BAD_CONFIG,"Unable to initialise module (missing config)")))};o.prototype={init:function(){try{this.loadIasTrackingScript("https://assets.msn.com/staticsb/statics/latest/js/thirdparty/ias/___IASVANS_3.8.9.js",function(){this.fwVansInstance=window.__IASVANS(),this.fwVansInstance.initFW(this.iasConfig,this.videoElt),this.log(i.INFO,"Initialized IAS with config: ",this.iasConfig)}.bind(this))}catch(e){this.log(i.ERROR,"IAS initialization failed"),this.service.errorCallback(r.INITIALIZATION_ERROR,"IAS initialization failed")}},log:function(e,t,n){if(this.service.loggerCallback)try{this.service.loggerCallback(e,"[IAS] "+t,n)}catch(e){this.debug&&console.trace(e)}else this.debug&&console.log(e+": "+t,n)},parseParams:function(e){this.debug&&this.log(i.DEBUG,"Received params",{params:e});var t={adventityid:"advEntityId",pubentityid:"pubEntityId",ext_app_id:"xmapp",ias_auction:"xsId",partner:"partner",xmtp:"xmtp"};if(e&&"string"==typeof e){var n={},r={},o=e.split(/&/);for(var a in o){var s=o[a].split(/=/),l=s[0].toLowerCase(),d=s[0];-1!==Object.keys(t).indexOf(l)?n[t[l]]="ext_app_id"===l?""===s[1]?0:1:s[1]:r[d]=s[1]}n.partner="msft",n.xmtp="v";var c=!0,u={};for(var p in t){var h=t[p];this.checkParamExists(h,n)?u[h]=n[h]:(c=!1,this.log(i.ERROR,"Invalid parameter detected '"+h+"'='"+n[h]+"'"))}for(var v in u.staticConfig={useStatic:!0,origin:"assets.msn.com",path:"/staticsb/statics/latest/js/thirdparty/ias",parameters:'{"config":"/fwjsvid/static.adsafeprotected.com/'+n.advEntityId+"/"+n.pubEntityId+'/skeleton.js?iasProxyPartnerId=2"}'},r)u[v]=r[v];if(c)return u}return this.log(i.ERROR,"Invalid parameter received/parsed"),null},checkParamExists:function(e,t){return t.hasOwnProperty(e)&&""!==t[e]},notifyVPAIDEvent:function(e){if(this.fwVansInstance){this.log(i.INFO,"notifyVPAIDEvent: ["+e+"]");var t=this.service.getAdDimensionCallback(),n={ad_duration:this.service.getAdDurationCallback(),volume:this.service.getVolumeCallback(),viewMode:this.service.getViewModeCallback(),width:t.adWidth,height:t.adHeight};this.fwVansInstance.sendEvent(e,n)}},loadIasTrackingScript:function(e,t){try{var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=function(){"function"==typeof t&&t()},n.onerror=function(){this.log(i.DEBUG,"IAS tracking script failed to load"),this.service.errorCallback(r.LIBRARY_LOADING_ERROR,"Can not load IAS script")}.bind(this);var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)}catch(e){this.log(i.DEBUG,"IAS tracking script failed to load"),this.service.errorCallback(r.LIBRARY_LOADING_ERROR,"Can not load IAS script")}}},e.exports=o,e.exports.ERROR_CODE=r,e.exports.LOG_LEVEL=i},1206:e=>{"use strict";e.exports.E$={DEBUG:"debug",INFO:"info",ERROR:"error"},e.exports.Rl={START:"start",STOP:"stop",PAUSE:"pause",RESUME:"resume",FULL_SCREEN:"fullscreen",EXIT_FULL_SCREEN:"exitFullscreen",CLICK:"click",SOUND_OFF:"sound_off",SOUND_ON:"sound_on"},e.exports.WU={Ad_Loaded:"AdLoaded",Ad_Started:"AdStarted",Ad_Stopped:"AdStopped",Ad_Skipped:"AdSkipped",Ad_Skippable_State_Change:"AdSkippableStateChange",Ad_Size_Change:"AdSizeChange",Ad_Linear_Change:"AdLinearChange",Ad_Duration_Change:"AdDurationChange",Ad_Expanded_Change:"AdExpandedChange",Ad_Remaining_Time_Change:"AdRemainingTimeChange",Ad_Volume_Change:"AdVolumeChange",Ad_Impression:"AdImpression",Ad_Video_Start:"AdVideoStart",Ad_Video_First_Quartile:"AdVideoFirstQuartile",Ad_Video_Midpoint:"AdVideoMidpoint",Ad_Video_Third_Quartile:"AdVideoThirdQuartile",Ad_Video_Complete:"AdVideoComplete",Ad_Click_Thru:"AdClickThru",Ad_Interaction:"AdInteraction",Ad_User_Accept_Invitation:"AdUserAcceptInvitation",Ad_User_Minimize:"AdUserMinimize",Ad_User_Close:"AdUserClose",Ad_Paused:"AdPaused",Ad_Playing:"AdPlaying",Ad_Log:"AdLog",Ad_Error:"AdError"},e.exports.aj={NORMAL:"normal",FULL_SCREEN:"fullscreen"},e.exports.L7={APPNEXUS:1,IAS:4}},3715:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});const i=n(3518)},3518:(e,t,n)=>{"use strict";var i;i=n(1028),e.exports=i},1028:(e,t,n)=>{"use strict";var i=n(9766),r=n(7837),o=n(1206).E$,a=n(1206).Rl,s=n(1206).WU,l=n(1206).aj,d=n(1206).L7,c=function(e,t){p.call(this,e,t)};c.prototype={initAppNexus:function(e,t,n,i,r){try{this._private.initAppNexus(e,t,n,i,r)}catch(e){this._private,_debug&&console.error("exception in initAppNexus",e)}return this},initIas:function(e,t){try{this._private.initIas(e,t)}catch(e){this._private._debug&&console.error("exception in initIas",e)}},notifyEvent:function(e){try{this._private.notifyEvent(e)}catch(e){this._private._debug&&console.error("exception in notifyEvent",e)}return this}},e.exports=c,e.exports.LOG_LEVEL=o,e.exports.VIEW_EVENT=a,e.exports.VPAID_EVENT=s,e.exports.VIEW_MODE=l,e.exports.MODULE=d,e.exports.AppNexus=i,e.exports.Ias=r;var u=function(){this._debug=!1,this._viewabilityParams={},this._viewabilityModules={},this._service={}},p=function(e,t){try{this._private=new u,this._private._service=t,e&&this._private.configure(e)}catch(e){this.log(o.ERROR,"'_init' failed:",e)}};u.prototype={log:function(e,t,n){try{if(this._service.loggerCallback)try{this._service.loggerCallback(e,"[VVAdaptor] "+t,n)}catch(e){this._debug&&console.trace(e)}else this._debug&&console.log(e+": "+t,n)}catch(e){this._debug&&console.trace(e)}},configure:function(e){this._viewabilityParams={},this._viewabilityModules={};try{e.hasOwnProperty("config")&&""!==e.config&&(this._viewabilityParams[d.APPNEXUS]=e.config)}catch(e){this.log(o.ERROR,"'configure' failed for MODULE.APPNEXUS: ",e)}try{if(e.hasOwnProperty("third_party_providers")){var t=e.third_party_providers;for(var n in t)t[n].hasOwnProperty("code")&&"ias"===t[n].code&&t[n].hasOwnProperty("config")&&""!==t[n].config&&(this._viewabilityParams[d.IAS]=t[n].config)}}catch(e){this.log(o.ERROR,"'configure' failed for MODULE.IAS: ",e)}},initAppNexus:function(e,t,n,r,a){try{this._viewabilityModules[d.APPNEXUS]=null;var s=this._viewabilityParams[d.APPNEXUS];if(s&&r){r.loggerCallback=this._service.loggerCallback;var l=this.getVolume(),c=this.getViewMode();this._viewabilityModules[d.APPNEXUS]=new i(s,e,t,n,l,c,r,a),l&&(this.lastKnownVolume=l),c&&(this.lastKnownViewMode=c)}}catch(e){this.log(o.ERROR,"'initAppNexus' failed:",e)}},initIas:function(e,t){try{this._viewabilityModules[d.IAS]=null;var n=this._viewabilityParams[d.IAS];n&&t&&(t.loggerCallback=this._service.loggerCallback,t.getVolumeCallback=this._service.getVolumeCallback,t.getAdDimensionCallback=this._service.getAdDimensionCallback,t.getAdDurationCallback=this._service.getAdDurationCallback,t.getViewModeCallback=this._service.getViewModeCallback,this._viewabilityModules[d.IAS]=new r(e,n,t,this._debug))}catch(e){this.log(o.ERROR,"'initIas' failed for MODULE.IAS: ",e)}},notifyEvent:function(e){var t=null,n=null,i=null;if(this._viewabilityModules[d.APPNEXUS])try{var r=null;switch(e){case s.Ad_Video_Start:r=a.START;break;case s.Ad_Stopped:case s.Ad_Skipped:r=a.STOP;break;case s.Ad_Paused:r=a.PAUSE;break;case s.Ad_Playing:r=a.RESUME;break;case s.Ad_Click_Thru:r=a.CLICK;break;case s.Ad_Size_Change:case s.Ad_Expanded_Change:case s.Ad_User_Minimize:null!==(n=null!==n?n:this.getNewViewMode())&&this._viewabilityModules[d.APPNEXUS].onViewModeChange(n);break;case s.Ad_Volume_Change:null!==(t=null!==t?t:this.getNewVolume())&&this._viewabilityModules[d.APPNEXUS].onVolumeChange(t);break;case a.START:case a.STOP:case a.PAUSE:case a.RESUME:case a.CLICK:r=e;break;case a.FULL_SCREEN:case a.EXIT_FULL_SCREEN:null!==(n=null!==n?n:this.getNewViewMode())&&this._viewabilityModules[d.APPNEXUS].onViewModeChange(n);break;case a.SOUND_OFF:case a.SOUND_ON:null!==(t=null!==t?t:this.getNewVolume())&&this._viewabilityModules[d.APPNEXUS].onVolumeChange(t)}null!==r&&this._viewabilityModules[d.APPNEXUS].notifyEvent(r)}catch(t){this.log(o.ERROR,"'notifyEvent' failed for event '"+e+"' with MODULE.APPNEXUS: "+t.message,t.stack)}if(this._viewabilityModules[d.IAS])try{var l=null;switch(e){case s.Ad_Volume_Change:null!==(t=null!==t?t:this.getNewVolume())&&(l=e);break;case s.Ad_Size_Change:case s.Ad_Expanded_Change:case s.Ad_User_Minimize:null!==(n=null!==n?n:this.getNewViewMode())&&(l=e);break;case s.Ad_Remaining_Time_Change:case s.Ad_Duration_Change:null!==(i=null!==i?i:this.getNewAdDuration())&&(l=e);break;case s.Ad_Click_Thru:case s.Ad_Error:case s.Ad_Impression:case s.Ad_Interaction:case s.Ad_Linear_Change:case s.Ad_Loaded:case s.Ad_Log:case s.Ad_Paused:case s.Ad_Playing:case s.Ad_Skippable_State_Change:case s.Ad_Skipped:case s.Ad_Started:case s.Ad_Stopped:case s.Ad_User_Accept_Invitation:case s.Ad_User_Close:case s.Ad_Video_Start:case s.Ad_Video_First_Quartile:case s.Ad_Video_Midpoint:case s.Ad_Video_Third_Quartile:case s.Ad_Video_Complete:l=e}null!==l&&this._viewabilityModules[d.IAS]&&this._viewabilityModules[d.IAS].notifyVPAIDEvent(l)}catch(t){this.log(o.ERROR,"'notifyEvent' failed for event '"+e+"' with MODULE.IAS: "+t.message,t.stack)}null!==t&&(this.lastKnownVolume=t),null!==n&&(this.lastKnownViewMode=n),null!==i&&(this.lastKnownAdDuration=i)},lastKnownVolume:-1,getVolume:function(){var e=this._service.getVolumeCallback();return"number"==typeof e?e:null},getNewVolume:function(){var e=this.getVolume();return null!==e&&e!==this.lastKnownVolume?e:null},lastKnownViewMode:l.NORMAL,getViewMode:function(){var e=this._service.getViewModeCallback();if("string"==typeof e){switch(e){case l.NORMAL:case l.FULL_SCREEN:break;default:e=l.NORMAL}return e}return null},getNewViewMode:function(){var e=this.getViewMode();return null!==e&&e!==this.lastKnownViewMode?e:null},lastKnownAdDuration:-1,getAdDuration:function(){var e=this._service.getAdDurationCallback();return"number"==typeof e?e:null},getNewAdDuration:function(){var e=this.getAdDuration();return null!==e&&e!==this.lastKnownAdDuration?e:null}}},3415:(e,t,n)=>{var i=n(4987)(),r=function(e){var t,n=e.activeElement;if(n){if("IFRAME"===n.tagName)return n.contentDocument?t=r(n.contentDocument):null;var i=e.getElementsByTagName("video");if(i.length>0&&i[0].webkitDisplayingFullscreen)return i[0]}var o=e.getElementsByTagName("iframe");if(o.length>0)for(var a=0;a<o.length;a++)if(o[a].contentDocument&&(t=r(o[a].contentDocument)))return t;return null},o=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||null};e.exports=function(){return{test:{setUA:function(e){i=e}},exitFullscreen:function(){if(o()&&document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else if(i.isIos()){var e=r(document);e&&e.webkitExitFullscreen&&e.webkitExitFullscreen()}},isFullscreenRunning:function(e){var t=o();return!t&&i.isIos()&&(t=i.iOSversion()[0]<10&&e&&e.iframeVideoWrapper?null!==r(e.iframeVideoWrapper.contentDocument):null!==r(document)),!!t}}}},9103:e=>{e.exports=function(e){var t={isXandrVastPlayer:!0,useMsSkin:!1,msSkinCss:"",autoInitialSize:!1,initialPlayback:"click",initialAudio:"on",playOnMouseover:!1,audioOnMouseover:!1,skippable:{enabled:!0,videoThreshold:15,videoOffset:5,skipLocation:"top-left",skipText:"Video can be skipped in %%TIME%% seconds",skipButtonText:"SKIP"},adText:"Ad",showMute:!0,showVolume:!0,showProgressBar:!0,allowFullscreen:!0,enableInlineVideoForIos:!0,sideStream:{enabled:!1},forceAdInFullscreen:!0,disableTopBar:!1,learnMore:{location:"inline"},closedCaptions:{show:!0},enableReplay:!1,data:{skipOffset:"",durationMsec:null,skipOffsetMsec:null,isVastVideoSkippable:!1,vastProgressEvent:{},vastDurationMsec:null},content:{registryId:"unknown",contentId:"unknown"},test:function(){}};function n(e){return"object"==typeof e}"native"===e.adType&&(t.skippable.enabled=!1,t.disableTopBar=!0),"preview"===e.adType&&(t.enableReplay=!0),"preview"===e.adType&&e.onlyAudio&&(t.skippable.skipText="Audio can be skipped in %%TIME%% seconds");var i=function e(t){var i,r,o;for(r=1;r<arguments.length;r++)for(o in i=arguments[r])i.hasOwnProperty(o)&&(n(t[o])&&null!==t[o]&&n(i[o])?t[o]=e({},t[o],i[o]):t[o]=i[o]);return t}({},t,e||{});if(void 0!==i.playerTechnology&&0!==i.playerTechnology.length||(i.playerTechnology=["html5"]),i.enableExplicitPause=!0,i.skippable&&i.skippable.enabled)try{i.skippable.hasOwnProperty("skipText")&&0===i.skippable.skipText.trim().length&&i.skippable.hasOwnProperty("skipButtonText")&&0===i.skippable.skipButtonText.trim().length&&(i.skippable.enabled=!1)}catch(e){}return i}},1579:(e,t,n)=>{var i=n(9724).v;e.exports=function(e){function t(e){return"object"==typeof e}var n=function e(n){var i,r,o;for(r=1;r<arguments.length;r++)for(o in i=arguments[r])i.hasOwnProperty(o)&&(t(n[o])&&null!==n[o]&&t(i[o])?n[o]=e({},n[o],i[o]):n[o]=i[o]);return n}({},{isXandrVastPlayer:!0,useMsSkin:!0,msSkinCss:"",autoInitialSize:!1,initialPlayback:"click",initialAudio:"on",playOnMouseover:!1,audioOnMouseover:!1,skippable:{enabled:!0,videoThreshold:15,videoOffset:5,skipLocation:"",skipText:"Skip ad in %%TIME%%",skipButtonText:"Skip ad",nonSkippableText:"Video will play after ad"},learnMore:{enabled:!0,text:"Learn more"},closedCaptions:{show:!0},playVideoVisibleThreshold:50,wrapperLimit:5,adText:"Ad",enableReplay:!1,showMute:!1,showVolume:!0,showMsSkinMuteAndVolume:!0,showProgressBar:"both",allowFullscreen:!0,enableInlineVideoForIos:!0,sideStream:{enabled:!1},forceAdInFullscreen:!1,disableTopBar:!0,data:{skipOffset:"",durationMsec:null,skipOffsetMsec:null,isVastVideoSkippable:!1,vastProgressEvent:{},vastDurationMsec:null},content:{registryId:"unknown",contentId:"unknown"},test:function(){}},e||{});function r(e){return"false"!==e&&!!e}void 0!==n.playerTechnology&&0!==n.playerTechnology.length||(n.playerTechnology=["html5"]),n.enableExplicitPause=!0;try{if(["click","auto"].includes(n.initialPlayback)||(n.initialPlayback="click"),["on","off"].includes(n.initialAudio)||(n.initialAudio="on"),"object"!=typeof n.skippable)throw new Error("Invalid option 'sklippable'");if(n.skippable.enabled=r(n.skippable.enabled),n.skippable.skipText=n.skippable.skipText.toString(),n.skippable.skipButtonText=n.skippable.skipButtonText.toString(),n.skippable.nonSkippableText=n.skippable.nonSkippableText.toString(),"object"!=typeof n.learnMore)throw new Error("Invalid option 'learnMore'");n.learnMore.enabled=r(n.learnMore.enabled),n.learnMore.text=n.learnMore.text.toString(),n.learnMore.location&&!["inline","top-left","top-right"].includes(n.learnMore.location)&&(n.learnMore.location="inline"),n.learnMore.hasOwnProperty("clickToPause")&&(n.learnMore.clickToPause=r(n.learnMore.clickToPause)),n.closedCaptions.show=r(n.closedCaptions.show),n.enableReplay=r(n.enableReplay),n.adText=n.adText.toString(),n.showMute=r(n.showMute),n.showVolume=r(n.showVolume),["text","bar","both","none"].includes(n.showProgressBar)||(n.showProgressBar="both"),n.allowFullscreen=r(n.allowFullscreen)}catch(e){i.log("Vast Video Player","Invalid player options: "+e.message),n.invalidPlayerOptions="Invalid player options: "+e.message}return n}},4945:(e,t,n)=>{var i="Vast Video Player: VP-Locator",r=n(9724).v,o=n(3415)(),a=n(4987)();e.exports=function(e){var t,n=null,s=0,l=!1,d=!1,c=0,u=function(){var t=document.getElementsByClassName(e.external.options.sideElementClassName);if(t&&t.length>0){d=!0;var n=t[0],o=!1;setInterval((function(){var t=window.getComputedStyle(n,null),a=n.getElementsByTagName("VIDEO").length>0;if(o!==a)if(r.log(i,"activateSideStream:  hasVideo =  "+a),o=a){l=!0,n.style.left?e.external.targetElement.style.left=t.left:e.external.targetElement.style.left=null,n.style.top?e.external.targetElement.style.top=t.top:e.external.targetElement.style.top=null,n.style.bottom?e.external.targetElement.style.bottom=t.bottom:e.external.targetElement.style.bottom=null,n.style.right?e.external.targetElement.style.right=t.right:e.external.targetElement.style.right=null,e.external.targetElement.style.width=t.width,e.external.targetElement.style.height=t.height,e.external.targetElement.style.position=t.position,c=e.external.targetElement.style.zIndex;var s=Math.max(t.zIndex,e.external.getMaxZindexForChildren(n,0));r.log(i,"activateSideStream:  side stream z-index =  "+s),e.external.targetElement.style.zIndex=s+1,e.external.options.overlayPlayer&&(e.external.vFramework.resizePlayer(e.external.targetElement.offsetWidth,e.external.targetElement.offsetHeight),e.external.targetElement.style.width=t.width)}else l=!1,e.external.targetElement.style.position="absolute",p()}),200)}},p=function(h){var v,f;if(e.external.options.sideElementClassName&&!d&&u(),r.log(i,"repositionPlayer: try to reposition/resize overlay player"),r.log(i,"repositionPlayer: ****** opacity = "+e.external.targetElement.style.opacity),e.external.bTerminated)r.log(i,"repositionPlayer: never reposition terminated palyer");else if(l)r.log(i,"repositionPlayer: never reposition side stream");else if(o.isFullscreenRunning(e.external.vFramework))r.log(i,"repositionPlayer: never reposition player in fullscreen");else{var m,g;if(e.external.options.isWebviewEnvironment||"native"===e.external.options.adType)return e.external.targetElement.style.width="100%",e.external.targetElement.style.height="100%",g=e.external.getAbsoluteOffsetFromBody(m),r.log(i,"repositionPlayer: targetDiv absolute posiotion ="+g.left+", "+g.top),e.external.targetElement.style.left=g.left+"px",void(e.external.targetElement.style.top=g.top+"px");v=(m=e.external.targetDivContainer).offsetWidth,f=m.offsetHeight,0===v&&m.width&&m.width>0&&(v=m.width),0===f&&m.height&&m.height>0&&(f=m.height);var y=m.style.borderWidth;if(y&&y.length>0){var A=Number(y.substring(0,y.length-2));v-=2*A,f-=2*A}"preview"===e.external.options.adType&&e.external.options.onlyAudio&&e.external.options.hasOwnProperty("height")&&e.external.options.height>0&&(f=e.external.options.height),e.external.targetElement.style.width=v+"px",e.external.targetElement.style.height=f+"px",d&&0!==c&&(e.external.targetElement.style.zIndex=c),g=e.external.getAbsoluteOffsetFromBody(m),r.log(i,"repositionPlayer: targetDiv absolute posiotion ="+g.left+", "+g.top),e.external.targetElement.style.left=g.left+"px",e.external.targetElement.style.top=g.top+"px",r.log(i,"repositionPlayer: size =  "+v+", "+f),a.isAndroid()&&e.external.options.overlayPlayer&&!e.external.isRequiredUserActionToStart()&&(e.external.containerScreen||(e.external.containerScreen=document.createElement("div"),e.external.containerScreen.style.width="100%",e.external.containerScreen.style.width="100%",e.external.containerScreen.style.zIndex=e.external.targetElement.style.zIndex-1,e.external.containerScreen.style.backgroundColor="black",e.external.targetDivContainer.insertBefore(e.external.containerScreen,e.external.targetDivContainer.firstChild))),h&&e.external.options.overlayPlayer&&setTimeout((function(){r.log(i,"repositionPlayer: additional reposition for iPhones exiting fullscreen"),p()}),200),e.external.vFramework&&(e.external.options.overlayPlayer?(r.log(i,"repositionPlayer: call vFramework.resizePlayer("+v+", "+f+")"),e.external.vFramework.resizePlayer(v,f),e.external.targetElement.style.width=v+"px",t&&(s=0,n=setInterval((function(){try{top.window&&0===top.window.scrollY&&s<100&&(clearInterval(n),n=null,r.log(i,"use safariScrollY = "+t),top.window.scrollTo(0,t),t=null)}catch(e){}}),50))):e.external.vFramework.resizeVideo(null,!1,null))}},h=null;function v(l){r.log(i,"Resize event happened"),e&&(e.external.targetElement&&e.external.vFramework&&(e.external.needStartPlay?(e.external.needStartPlay=!1,e.external.startFromFullscreen&&e.external.options.overlayPlayer&&!a.isMobile()&&a.isSafari()&&(s=0,n=setInterval((function(){try{s++,top.window&&top.window.scrollY>0&&s<100&&(clearInterval(n),n=null,t=top.window.scrollY,r.log(i,"set safariScrollY = "+t),p())}catch(e){clearInterval(n),n=null}}),50)),setTimeout((function(){!e.external.isRequiredUserActionToStart()||e.external.needResume?(e.external.targetElement.style.zIndex=Math.max(100,e.external.getMaxZindexForChildren(e.external.targetDivContainer,0)+1),e.external.targetElement.style.display="none",p(),e.external.targetElement.style.display="block",e.external.coverPlayer(),e.external.vFramework.play()):(e.external.targetElement.style.zIndex=Math.max(100,e.external.getMaxZindexForChildren(e.external.targetDivContainer,0)+1),p(),e.external.makePlayerVisible())}),100)):(p(),a.isAndroid()?setTimeout(p,300):a.isIPhone()&&!e.external.fullscreenTimer&&o.isFullscreenRunning(e.external.vFramework)&&e.external.options.overlayPlayer&&(r.log(i,"playerResizeHandler: start fullscreen timer for iPhone"),e.external.fullscreenTimer=setInterval((function(){o.isFullscreenRunning(e.external.vFramework)||(clearInterval(e.external.fullscreenTimer),r.log(i,"playerResizeHandler: stop fullscreen timer for iPhone"),e.external.fullscreenTimer=null,p(!0))}),300)))),h&&h(l))}return document.body.onresize&&(h=document.body.onresize),window.onresize=v,a.isIPhone()&&a.iOSversion()[0]>=10&&(window.onorientationchange=function(){p()}),{test:{setUA:function(e){a=e},actSideStream:u},repositionPlayer:p,playerResizeHandler:v}}},7828:(e,t,n)=>{var i="Vast Video Player: Pod support",r=n(9724).v,o=n(940).Ot,a=n(940).ri,s=n(940).XQ,l=n(3415)(),d=n(1338);e.exports=function(e,t,n,c,u){if(r.log(i,"PodSupport started"),n&&n.vastXml){var p=null;try{p=new o(n.vastXml,!0,null,!0)}catch(e){return d.trackError(n.controlSessionId,0,"AdResponseManager instantiation error: "+e.message),r.error(i,"AdResponseManager instantiation error: "+e.message),void u(0,{code:0,message:"AdResponseManager instantiation error: "+e.message})}var h,v=n.vastXml;delete n.vastXml;var f=0;try{h=p.getMetadata();var m=JSON.stringify(h);if(r.info(i,"Metadata: "+m),h.responseType===a.SINGLE_AD)return n.vastXml=v,void e(t,n,c);if(h.responseType!==a.POD)return d.trackError(n.controlSessionId,h.errCode||0,h.errMessage||"Error: Invalid VAST Metadata"),void u(0,{code:h.errCode||0,message:h.errMessage||"Error: Invalid VAST Metadata"});f=h.slotCount,n.disableCollapse={enabled:!1,replay:!1},n.enableReplay=!1}catch(e){return d.trackCriticalError(n.controlSessionId,"",0,"Failed to get VAST metadata. Error: "+e.message),r.error(i,"Failed to get VAST metadata. Error: "+e.message),void u(0,{code:0,message:"Failed to get metadata. Error: "+e.message})}var g={slotCount:-1,slotNumber:-1,fallbackCount:-1,fallbackIndex:-1},y=!1,A=this,b=function(o){p.getUnwrappedAd(-1,2e3,o,(function(o){if(o.state===s.USED||o.state===s.UNKNOWN){if(r.log(i,"getUnwrappedAd: all ads processed"),y){l.exitFullscreen();var a=A.external.options&&("preview"===A.external.options.adType||"native"===A.external.options.adType);a||(t.style.height="1px",t.style.width="1px"),A.external.vFramework&&A.external.vFramework.resizePlayer(1,1);var p=A.external.targetDivContainer;setTimeout((function(){t&&(t.innerHTML="",t.parentNode===p&&(a||p.removeChild(t))),t=null}),a?1:2e3),A.external.playerCover&&p.removeChild(A.external.playerCover)}return}g={slotCount:h.slotCount,slotNumber:o.slotNumber,fallbackCount:o.fallbackCount,fallbackIndex:o.fallbackIndex+1},r.info(i,"Selected ad Info: "+JSON.stringify(g));let v=!1;return o.state===s.FAILED?(r.log(i,"getUnwrappedAd: ad failed, error - ",o.errorCode),g.fallbackCount===g.fallbackIndex&&(y=g.slotCount===g.slotNumber,v=!0),void b(v)):o.state===s.READY?(r.log(i,"getUnwrappedAd: ad ready to render"),n.adObj=o.unwrappedVastObj,n.useAdObj=!0,delete n.vpaid,A.prepareStateForPodSlot(),n.pod=!0,n.slotCount=f,n.slotNumber=o.slotNumber,n.slotNumber>1&&(n.initialPlayback="auto"),void e(t,n,c)):(d.trackCriticalError(n.controlSessionId,"",0,"getUnwrappedAd: invalid response state - "+o.state),r.log(i,"getUnwrappedAd: invalid response state - ",o.state),void u(0,{code:0,message:"Ad response type from getUnwrappedAd(...)"}))}))},k=this.external.notificationCallback;this.external.notificationCallback=function(e,t){switch(e){case 10:case 0:b(g.fallbackCount===g.fallbackIndex);break;case 1:b(!0)}k(e,t)},b(!1)}else e(t,n,c)}},1338:(e,t,n)=>{var i=n(9836),r=i.TelemetrySharedData,o=i.EventsTelemetry,a=i.ErrorsTelemetry,s=i.PerformanceTelemetry,l=i.commonTelemetryEvents,d={telemetrySharedData:r,playerTelEvents:{entryPointCall:"entryPointCall",adReady:"adReady",adReadyNoVideo:"adReadyNoVideo",entryPointCallRejected:"entryPointCallRejected"},Guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return"y"===e?(3&t|8).toString(16):t.toString(16)}))},trackEvent:function(e,t,n){e&&o.trackEvent({type:t,data:n},e)},trackCustomEvent:function(e,t,n,i){if(e)if(r.addPlacementData(e,{creativeId:i||""}),t===l[t])o.trackEvent({type:t,data:n},e);else if("object"==typeof n&&null!==n){var a=n;a.type=t,o.trackCustomEvent(a,e)}else o.trackCustomEvent({type:t,data:n},e)},trackCriticalError:function(e,t,n,i,o){if(e){r.addPlacementData(e,{creativeId:o||""});var s=(n?n+" - ":"")+i;a.trackCriticalError(t,new Error(s),e)}},trackError:function(e,t,n,i){e&&(r.addPlacementData(e,{creativeId:i||""}),a.trackAlertError("vastError",{message:n,debugData:{errorCode:t}},e))},startMark:function(e,t){e&&s.createStartMark(t)},trackEventPerformance:function(e,t,n){e&&s.trackMark(t,n,e)}};e.exports=d},4987:(e,t,n)=>{var i=n(3837).y;e.exports=function(){return{ua:i(),isAndroid:function(){return"android"===this.ua.os.name.toLowerCase()},isIPhone:function(){return!!this.isMobile()&&!!this.ua.device.model&&"iphone"===this.ua.device.model.toLowerCase()},isIos:function(){return"ios"===this.ua.os.name.toLowerCase()},isMobile:function(){return!(!this.ua.device.type&&!this.ua.device.model)},isAndroidPhone:function(){return!(!this.ua.device||"mobile"!==this.ua.device.type||!this.isAndroid())},isPhone:function(){return this.isIPhone()||this.isAndroidPhone()},isChrome:function(){return"chrome"===this.ua.browser.name.toLowerCase()},isFirefox:function(){return"firefox"===this.ua.browser.name.toLowerCase()},isSafari:function(){return this.ua.browser.name.toLowerCase().indexOf("safari")>=0},chromeVersion:function(){if(this.isChrome()){var e=this.ua.browser.major;return parseInt(e)}return 0},androidVersion:function(){if(this.isAndroid()){var e=this.ua.os.version.split(".");return[parseInt(e[0],10),parseInt(e[1],10),e.length>2?parseInt(e[2],10):0]}return[0,0,0]},iOSversion:function(){if("ios"===this.ua.os.name.toLowerCase()){var e=this.ua.os.version.split(".");return[parseInt(e[0],10),parseInt(e[1],10),e.length>2?parseInt(e[2],10):0]}return[0,0,0]}}}},3365:(e,t,n)=>{"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])}return n},writable:!0,configurable:!0});var i=n(9103),r=n(1579),o=n(7828),a=n(1602).Z,s=n(6863).g,l=n(9724).v,d=n(8330).rE,c=n(1338),u=n(9836),p=u.initTelemetry,h=u.TelemetrySharedData,v=u.commonTelemetryEvents;h.addSessionData({sdkVersion:d});var f="https://acdn.adnxs.com/video/player/vastPlayer/ms-default.css",m="ms-default.css";if(document&&document.currentScript&&document.currentScript.src){var g=document.currentScript.src.lastIndexOf("/");g>=0&&(m=document.currentScript.src.substr(0,g+1)+"ms-default.css")}var y=function(){var e="Vast Video Player",t=d;l.always(e,"VERSION "+t),this.external={options:{},targetElement:null,targetDivContainer:null,isDoneForReady:!1,notificationCallback:null,adSkipConfirmation:null,bTerminated:!1,isPlaying:!1,vFramework:null,playerCover:null,fullscreenTimer:null,containerScreen:null,needStartPlay:!1,startFromFullscreen:!1,needResume:!1,clickToPlayButton:null,isRequiredUserActionToStart:x,appendClickToPlayButton:C,getMaxZindexForChildren:M,coverPlayer:P,getAbsoluteOffsetFromBody:D,makePlayerVisible:j};var u,p,h,v,g=this.external,y=null,A={},b=0,k=!1,E="<style type=\"text/css\">@font-face{font-family: 'APN-OP-SpinnerJS';src: url(data:application/font-woff;charset=utf-8;base64,d09GRk9UVE8AAAnMAAsAAAAADWgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABDRkYgAAABCAAABokAAAgsXGkfVUZGVE0AAAeUAAAAHAAAABxxb8IrR0RFRgAAB7AAAAAiAAAAJgAnADxPUy8yAAAH1AAAAEMAAABgVDdTq2NtYXAAAAgYAAAAVgAAAWr6rrHraGVhZAAACHAAAAAsAAAANgaEyq9oaGVhAAAInAAAABwAAAAkCSAFLWhtdHgAAAi4AAAAJwAAAEgr1gKfbWF4cAAACOAAAAAGAAAABgAWUABuYW1lAAAI6AAAANUAAAGk8SNjJXBvc3QAAAnAAAAADAAAACAAAwAAeJxlVX9MW9cVvhf88K0Bt2txSTfLxNsSqkZaITjdgrZ2KaZiWYaI47lkCYTgphB+mFB+xFgZJDamqa+TAH4EkoDVNKRA3eF2UEqaJqHENKiVUAJI2zrSLkWZNO2P/dPqPnyg2r2A00zTue87737nfee943vuNUYqFcIYk8P2muqaGgfCcQijXCUDKZlY2RqnZMUrG1Q0KZ4mqQwa9Eij7VlKH9wkqWmuXiqOWiU9TnhUj9Bjepz5Az1K0qv3Po6eEqnikYQISkaPo1SkR0a0GW1BGWgbykYvIDP6DcpHe1AhKkKl6BC3KlTXkNGQ2bA1oyE3I2MVMgVsFZAlwCRgm4DnBPxcwC8EbBewQ8CLAnIEmAXkcshchZcacp/jCX+WsV5srGaE8Ov4JH4D+zDFfnwKn8ZncDvuwJ04gGXchc/ibtyDz+Hz+AJ6MlaVGmnQU+hptINXUYiq0S30Bb6Jb8d1xL0Z96/4syqN6j+SVVKoVpgia6Ny1KrbqAHTikln1GiZdWlet5SynLLCL0nLUviUza/IMJ+gWJfk2L1W2RSVdD/WaJUrrEb3Ew08vfSMmC69wlJ0P9XAC/98iIzOR7Xv61poc7tbdgbpUDC4uHiVEcoe42MfI1mLa2wwOESDTvKtcQo2UniGj92w0Wh0u5vbWiiB5+//X2ZFfDzML8ts9VJkSbu68CqO353XR99K0KvuKhd0PpbX+kXJZGv3sc4W+eAQ7D0LTRScFOzHS6tb3Mda3S2lVu8vT0IeOQ15Hb8a3SM3n/d2e0Yrmf0Ec77Bmk6xvV0fhLoD5zs6e8Zudv7Nz/LI8t8/0h1nxl9/CT/kn/foFoiHXHhpEeLZpjRe3sI/upmRgCGh7eUG+35KXmye++u3Q59cTxungxVnLESJPtnCjDu+hB9xtXZd/fX36p41tZeri/5HPVDRbiFrS7Mkr3DjyyEm5ohldjYSmZ21RMxmi8VsYP2gWmXvTEVm7+yeyjVbducamBn6deWDjuHhwcHhYcdgebnDUW4AlWAHHGHBhh0D5WU1NWUGEBmoOva0gVL194p+FouFB9Zi4ZqBsnIH11UqozxkGyuZmBgbmxChiZIxm62kxGbI4u+xhypHRkKhkZHKkN1eWWk3aBWrksLbMFqv1Is25AubomNh1gT54OImfDjtCD1yqvY0xHFLPQpPnCRvq2//6dNpeod2+WRfF5C/7BBtlUqYizWxfBY2rHdImCdo4igSNvG03LNVz2ecTwNZxYxMDWowcnvgmZqznBc+jU0tT+mytwMuBjUVA49n392+UMwwZWo+xhm+u0Bm8iiVIBVSKVQw7j7f9VX5fXqffjX8+WcslaVSVgHckZkZ6W72OODVTOpiwNuziXbpGybrimmp01FNlnNYleQP+ANUprIv4AsQRTCD1aPOcUoW5+YWF3PmsrJycrLSqNvv8Xu4Aqokx1BpsJgSwWfN5SzybhkNDg5xLY/5PD4PdRPBx/QGvv8Vq843c2zmyK3a6Vdu7hvff8USzr+Uf2nn2Z2+nb7f/rGgtqD294cOFJEDReXW+oL6guO7/NzO/a7f0m957+UPS8ZLJioiDZH66RPTfjLtv3Vu8tLkpWvDox9+MBa6fnGy5115+EyYnEkYHhwIp7WrN8Hzunrb4X0H7Qftf6iyNdoaLW6L3+Lf01N4sfCt/e8eGjk0Un316HVy9Ib7E/+kf7J74uK1ix+Hxv/83vvhK4MfB68FJ+Qbvgnf9ZarjeSjxrGq4VfDr759ILivb3+g0LeXUErbJFrRXxM66S0/cfhYJVnvghCFRqhrhaEO1sZ2MRtrpKJT8qEIaKxVH7TEd7wlQpQ1srpONuSFNtgFNuAC3oz5rIjRWD/HeiqN/5LsGx1lVkjvl7x9rb2eXnKPJYOe6SF5m+QKuALODlLHNoOV1sFmyel1eVweAsn3QA/6e5AseVytLm8TgfTXKFhZ+mtSR1OnS3YREyTzHHqm/Vq64On19HlJP6QzK+1n6VJfR2/gQoAwrYnxF5lYsiT3dvZ29JFl3KozWyJrB0LEsnogiG9MoTqapOF/hk8gCeMNGQWeG3TZBCZmAitYt/ybWXkFfCYlijlnTcsmShURN4mYlHj58ptuWkZWbqtpWaO79jIBL/OCeCiFmaiU+PBBv7BA2YbshYfPd6aBRF4fcEfWj/bEZtrS7u5y9tF3gn0P7ZI1oi/4Du1zxnYLiW0X94mWVe1/AVE82XMAAAAAAAABAAAAANDR138AAAAAz5mnxQAAAADRBELmeJxjYGRgYOABYjEGOQYmBkYgFAViFqAIExAzQjAACdkAZAAAeJxjYGb+xTiBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKIHEC0lxTGBwYGJ8xMB/4f4ABSAJ5QDVwBQpAyAgAobYMfwB4nGNgYGBmgGAZBkYGEEgB8hjBfBYGDyDNx8DBwMTABhRTeMD3QP4Zw/+///+DVSo8YHggB+Uz/n+swCL/VUoUqhsFMLIBMRO6KCpgxi895AEAetoSOQAAeJxjYGQAg2MiZgnx/DZfGbhZwPyLLM4yCPr/LtY45gNALgcDE0gUAOkeCHF4nGNgZGBgPvD/AAMDaxwDA5hkZEAFfABctgNZeJxjYEAAJiBmgeADQNzAguAzsDhAxFnjwHQDgwVcmzyIAABxXQOhAAAAUAAAFgAAeJx1zT0KwjAcBfDXL8UKIiguLh0FoVg8goMU6eLg4tTWIAVtIOpQPIBHcPQ2grfy1f4dG0j6y0tfAmCINyz8hy220MVIbNNzsUOvxC69F3vo4y7uMH+KfYzxYctye/JCYwsDqrFNT8UOvRS79EbsYYJc3GH+EPuY4VVfW/BY48ypUXKb67PWxBYKR9xwQgrDrTreTqlp/78t3/EegwvP6zxAhBALxspcCl0GUbho767ZLX/9FFd+D+xnqLjGv0byb6xVqUx6VYcgq4I410ld/wJ2ozpzAAAAeJxjYGbACwAAfQAE) format('woff'), url('font/vjs.eot?#iefix') format('embedded-opentype'), url('font/vjs.ttf') format('truetype'), url('font/vjs.svg#icomoon') format('svg');font-weight: normal;  font-style: normal;} .apn-op-loading-spinner {color: #CCCCCC; display: block; position: absolute; top: 50%; left: 50%; font-size: 2.8em; line-height: 1; width: 1em; height: 1em; margin-left: -0.5em; margin-top: -0.5em; opacity: 0.75; -webkit-animation: spin 1.5s infinite linear; -moz-animation: spin 1.5s infinite linear; -o-animation: spin 1.5s infinite linear; animation: spin 1.5s infinite linear;} .apn-op-loading-spinner:before {content: '\\e01e'; font-family: APN-OP-SpinnerJS; position: absolute; top: 0; left: 0; width: 1em; height: 1em; text-align: center; text-shadow: 0em 0em 0.1em #000;} @-moz-keyframes spin { 0% { -moz-transform: rotate(0deg);} 100% { -moz-transform: rotate(359deg);}} @-webkit-keyframes spin { 0% { -webkit-transform: rotate(0deg);} 100% { -webkit-transform: rotate(359deg);}} @-o-keyframes spin { 0% { -o-transform: rotate(0deg); } 100% { -o-transform: rotate(359deg); }} @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(359deg);}}</style>",w=n(3319)(this),T=n(4987)(),S=n(3415)(),I=n(4945)(this);function C(){if(g.options.test&&g.options.test.forceClickToPlayButton)return g.playerCover&&(g.targetDivContainer.removeChild(g.playerCover),g.playerCover=null),void g.vFramework.delayEventsTracking(!1);g.clickToPlayButton||(g.vFramework.disableTrackingUserActivity(!0),g.vFramework.pause(),g.clickToPlayButton=document.createElement("div"),g.clickToPlayButton.id="apn-click-to-play-cover-"+Date.now(),g.clickToPlayButton.style.width="100%",g.clickToPlayButton.style.height="100%",g.clickToPlayButton.style.zIndex=g.targetElement.style.zIndex+1,g.clickToPlayButton.style.position="absolute",g.clickToPlayButton.onclick=function(){if(g.targetDivContainer.removeChild(g.clickToPlayButton),g.clickToPlayButton=null,g.vFramework.delayEventsTracking(!1),g.vFramework.forceStartViewability(),!T.isIPhone()||T.iOSversion()[0]>9){if(T.isMobile())if(g.vFramework.checkWhenVideoPausedByDevice(!0))k=!1,setTimeout((function(){k||(g.vFramework.checkWhenVideoPausedByDevice(!1),g.vFramework.play(),g.vFramework.disableTrackingUserActivity(!1))}),2e3);else{var e=T.isIos()?1e3:500;setTimeout((function(){g.vFramework.play(),g.vFramework.disableTrackingUserActivity(!1)}),e)}g.notificationCallback(6,!0)}T.isMobile()||P(),g.vFramework.play(),T.isMobile()||"on"!==g.options.initialAudioOriginal||g.vFramework.unmute(),g.vFramework.disableTrackingUserActivity(!0),g.targetElement.style.opacity=1,(!T.isMobile()||T.isIPhone()&&9===T.iOSversion()[0])&&g.vFramework.disableTrackingUserActivity(!1)},g.options.useOverlayPlayerForClick||g.options.xandrSdk?g.vFramework.adVideoPlayer&&g.vFramework.adVideoPlayer.bigPlayButton&&(g.vFramework.adVideoPlayer.bigPlayButton.el_.style.opacity=1):g.targetElement.style.opacity=0,T.isMobile()||g.vFramework.mute(),g.playerCover&&(g.targetDivContainer.removeChild(g.playerCover),g.playerCover=null),g.notificationCallback&&g.notificationCallback(6,!1),g.targetDivContainer.insertBefore(g.clickToPlayButton,g.targetDivContainer.firstChild))}function P(){if(g.options.overlayPlayer&&!g.playerCover&&!g.clickToPlayButton&&!g.options.xandrSdk){g.playerCover=document.createElement("div"),p="apn-overlay-black-cover-"+Date.now(),g.playerCover.id=p,g.playerCover.style.width="100%",g.playerCover.style.height="100%",g.playerCover.style.zIndex=g.targetElement.style.zIndex+1,g.playerCover.style.backgroundColor="black",g.playerCover.style.position="absolute";var e=document.createElement("div");e.className="apn-op-loading-spinner",g.playerCover.appendChild(e),g.targetDivContainer.insertBefore(g.playerCover,g.targetDivContainer.firstChild)}}function x(){return"click"===g.options.initialPlayback||"mouseover"===g.options.initialPlayback}function j(){g.vFramework&&g.vFramework.iframeVideoWrapper&&g.vFramework.iframeVideoWrapper.style&&"none"===g.vFramework.iframeVideoWrapper.style.display&&(g.vFramework.iframeVideoWrapper.style.display="block")}function _(t){l.log(e,"Build Ad Player Callback"),g.bTerminated||(l.log(e,"Building single player"),g.options=u.init(t),u.buildPlayer(A,g.options))}function V(){g.options={},g.targetElement=null,g.targetDivContainer=null,A={},u?u.resetPlayerForPodSlot():u=Object.create(a),g.isDoneForReady=!1,g.notificationCallback=null,g.bTerminated=!1,g.isPlaying=!1,v=null}function N(t){l.log(e,"Got notification: "+t),"leaveFullscreen"===t?S.exitFullscreen():l.log(e,"Unknown player notification: "+t)}function D(e){for(var t=0,n=0;e&&"BODY"!==e.tagName&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop)&&document.defaultView;){var i=document.defaultView.getComputedStyle(e,null).position;if(i&&""!==i&&"static"!==i)break;t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent}return{left:t,top:n}}function M(e,t){if(!e.children)return t;for(var n,i,r=Math.max(t,(n=e,"auto"!==(i=document.defaultView.getComputedStyle(n,null).zIndex)&&n.id!==p?i:0)),o=0;o<e.children.length;o++){var a=e.children[o];r=Math.max(r,M(a,r))}return r}function O(t,o,a){var s=function(e){if(0===e.length)g.options=i(g.options),g.options.useMsSkin=!1;else{var n=g.options.skippable&&g.options.skippable.hasOwnProperty("nonSkippableText");if(g.options=r(g.options),g.options.invalidPlayerOptions)return g.notificationCallback&&g.notificationCallback(0,{code:0,message:g.options.invalidPlayerOptions}),void delete g.options.invalidPlayerOptions;g.options.useMsSkin=!0,g.options.controlBarPosition="fixed",g.options.disableTopBar=!0,g.options.overlayPlayer?g.options.allowFullscreen=!1:n||(g.options.skippable.nonSkippableText=""),g.options.showMute=!1,g.options.xandrSdk||(g.options.showMsSkinMuteAndVolume=g.options.showVolume),g.options.showVolume=!1,"none"===g.options.showProgressBar&&(g.options.showProgressBar=!1),"preview"===g.options.adType&&(g.options.enableReplay=!0),g.options.customPlayerSkinCss=e}R.bind(this)(t)};if(l.log(e,"playPrepareOptions function called"),g.isDoneForReady=!1,g.notificationCallback=null,g.bTerminated=!1,o&&(g.notificationCallback=o),a&&(g.adSkipConfirmation=a),T.isIos()&&(g.options.enableInlineVideoForIos=!1),g.options.hasOwnProperty("msSkinCss")||(g.options.msSkinCss=m),l.debug(e,"options before merge with defaults: ",JSON.stringify(g.options)),""!==g.options.msSkinCss){var d=this,c=n(7886).B;c.load(g.options.msSkinCss,(function(e,t){e||0===t.length?g.options.msSkinCss===m?(g.options.msSkinCss=f,c.load(g.options.msSkinCss,(function(e,t){e||0===t.length?s.bind(d)(""):s.bind(d)(t)}),null,!1)):(g.options.msSkinCss=m,c.load(g.options.msSkinCss,(function(e,t){e||0===t.length?(g.options.msSkinCss=f,c.load(g.options.msSkinCss,(function(e,t){e||0===t.length?s.bind(d)(""):s.bind(d)(t)}),null,!1)):s.bind(d)(t)}),null,!1)):s.bind(d)(t)}),null,!1)}else g.options=i(g.options),g.options.useMsSkin=!1,R.bind(this)(t)}function R(t){l.log(e,"play function called"),l.debug(e,"options after merge with defaults: ",JSON.stringify(g.options)),g.options.width=t.offsetWidth?t.offsetWidth:t.width,g.options.height=t.offsetHeight?t.offsetHeight:t.height;var n=t.style.borderWidth;if(n&&n.length>0){var i=Number(n.substring(0,n.length-2));g.options.width-=2*i,g.options.height-=2*i}g.options.playerHeight=g.options.height,l.debug(e,"offsetWidth="+t.offsetWidth+", offsetHeight="+t.offsetHeighth),h=g.options.width;var r=g.options.pod?document.getElementById(t.id+"_overlay_pod"):null;if(!r){if((r=document.createElement("div")).id=t.id+"_overlay_"+(g.options.pod?"pod":c.Guid()),"native"===g.options.adType)t.replaceChildren(),r.style.width="100%",r.style.height="100%",r.style.left="0px",r.style.top="0px";else{r.style.width=g.options.width+"px",r.style.height=g.options.height+"px";var a=D(t);l.debug(e,"targetDiv absolute posiotion ="+a.left+", "+a.top),r.style.position="absolute",r.style.left=a.left+"px",r.style.top=a.top+"px"}b=Math.max(100,M(t,0)+1),S.isFullscreenRunning(g.vFramework)?r.style.zIndex=0:r.style.zIndex=b,r.style.overflow="hidden",g.options.banners&&g.options.banners.preShow?(r.style.backgroundImage="url("+g.options.banners.preShow+")",r.style.backgroundRepeat="no-repeat",r.style.backgroundSize="100% 100%"):r.style.backgroundColor="black",t.appendChild(r)}if(l.debug(e,"player container offsetLeft = "+r.offsetLeft+", offsetTop = "+r.offsetTop),g.targetElement=r,g.targetDivContainer=t,!g.targetDivContainer.ownerDocument.getElementById("overlay-spinner-style")){var d=g.targetDivContainer.ownerDocument.createElement("div");d.id="overlay-spinner-style",d.style.display="none",d.innerHTML=E,g.targetDivContainer.appendChild(d)}g.options.userSyncTargetElement=g.targetDivContainer,v=(new Date).getTime(),l.log(e,"Player start time = "+v),A.cbRenderVideo=function(t,n){l.debug(e,"cbRenderVideo called");try{l.debug(e,"cbRenderVideo options: ",JSON.stringify(n))}catch(e){}x()||T.isMobile()||P(),_(n)},A.cbWhenDestroy=w.cbTerminate,A.cbWhenReady=w.cbWhenReady,A.cbWhenImpression=function(){var e;"function"==typeof Event?e=new Event("vastplayer-impression"):(e=document.createEvent("Event")).initEvent("vastplayer-impression",!0,!0),g.targetElement.dispatchEvent(e)},g.options.cbApnVastPlayer=w.cbApnVastPlayer,g.options.playerNotification=N,g.options.cbNotification||(g.options.cbNotification=w.internalCbNotification),g.options.initialPlaybackOriginal=g.options.initialPlayback,x()&&T.isMobile()&&(g.options.delayStartViewability=!0),x()&&T.isAndroid()?(g.options.initialPlayback="click",g.options.initialAudio="on"):!g.options.instream&&x()&&T.isIos()&&T.iOSversion()[0]>=10?(g.options.enableNativeInline=!0,g.options.initialPlayback="click",g.options.initialAudio="on"):g.options.enableWaterfall&&T.isIos()&&T.iOSversion()[0]<10?(g.options.initialPlayback="auto",g.options.initialAudio="on"):(g.options.initialAudioOriginal=g.options.initialAudio,l.debug(e,"before options.initialAudio = "+g.options.initialAudio),!x()&&"on"===g.options.initialAudio&&T.isMobile()&&T.isChrome()&&T.chromeVersion()>=53&&(g.options.initialAudio="off",g.options.useMsSkin||(g.options.showMute=!0,g.options.showVolume=!0)),!g.options.instream&&T.isIos()&&T.iOSversion()[0]>=10&&!T.isFirefox()&&(g.options.enableNativeInline=!0,x()||(g.options.initialAudio="off",g.options.useMsSkin||(g.options.showMute=!0,g.options.showVolume=!0))),l.debug(e,"after options.initialAudio = "+g.options.initialAudio)),g.options.playerSkin&&g.options.playerSkin.controlBarHeight||!T.isPhone()||(g.options.playerSkin||(g.options.playerSkin={}),g.options.playerSkin.controlBarHeight=40),!g.options.useMsSkin&&T.isMobile()&&(g.options.controlBarPosition="below"),this.checkingContainerWidth||(setInterval((function(){var e=document.defaultView.getComputedStyle(g.targetDivContainer,null).width,t=e.indexOf("px");t>-1&&(e=e.substr(0,t)),e&&Number(e)!==h&&(h=Number(e),I.repositionPlayer())}),500),this.checkingContainerWidth=!0),g.options.enableReplay?g.options.disableCollapse={enabled:!0,replay:!0}:g.options.disableCollapse={enabled:!1,replay:!1},g.options.overlayPlayer&&(g.options.playerContextId="anoverlayplayer"),g.options.overlayPlayer&&x()&&!T.isMobile()&&P(),o.bind(y)(s,g.targetElement,g.options,A,g.notificationCallback)}g.fullscreenHandler=S,g.repositionPlayer=I.repositionPlayer,this.isRequiredUserActionToStart=function(){return x()},this.prepareStateForPodSlot=function(){u||(u=Object.create(a)),g.isDoneForReady=!1,g.bTerminated=!1,g.isPlaying=!1,v=null},this.playVast=function(n,i,r,o,a){l.log(e,"playVast function called playerId = "+this.vastPlayerId),"native"!==i.adType&&"preview"!==i.adType&&w.cbTerminate(!1,!0),V(),y=this,g.options=i,g.options.vastXml=r,g.options.clientUA="Vast Video Player/"+t+" unknown",O.bind(this)(n,o,a)},this.playAdObject=function(n,i,r,o){l.log(e,"playAdObject function called playerId = "+this.vastPlayerId),i.overlayPlayer||w.cbTerminate(!1,!0),V(),g.options=i,"string"==typeof r?g.options.vastXml=r:(g.options.useAdObj=!0,g.options.adObj=r),g.options.clientUA="Vast Video Player/"+t+" unknown",O.bind(this)(n,o)},this.resumeAd=function(){g.vFramework&&g.vFramework.play()},this.pauseAd=function(){g.vFramework&&g.vFramework.pause()},this.stop=function(){w.cbTerminate(!1,!0)},this.removeFromPage=function(){g.bTerminated=!0,g.targetElement&&(g.targetElement.innerHTML="",g.targetDivContainer.removeChild(g.targetElement),g.targetElement=null)},this.play=function(t,n,i){if(l.log(e,"play function called playerId = "+this.vastPlayerId+", forceResume = "+n+", keepPaused = "+i),g.vFramework){g.targetElement.style.opacity=1,t&&(g.notificationCallback=t);var r=T.isIPhone()&&T.iOSversion()[0]<10;if(S.isFullscreenRunning(g.vFramework)&&g.options.overlayPlayer||r)g.options.forceAdInFullscreen||r?(g.needResume=n,g.needStartPlay=!0,g.startFromFullscreen=!0,S.exitFullscreen(),T.isIPhone()&&(g.fullscreenTimer=setInterval((function(){S.isFullscreenRunning(g.vFramework)||(clearInterval(g.fullscreenTimer),g.fullscreenTimer=null,I.playerResizeHandler())}),500))):w.cbTerminate(!1,!0,!0);else{if(g.targetElement&&(g.targetElement.style.zIndex=Math.max(100,M(g.targetDivContainer,0)+1)),i)return void I.repositionPlayer();!x()||n?("off"===g.options.initialAudioOriginal&&g.vFramework.explicitMute(),P(),I.repositionPlayer(),g.vFramework.play()):(I.repositionPlayer(),j(),g.options.overlayPlayer&&x()&&(l.debug(e,"play: click to play placement for overlay player"),C()))}}else l.error(e,"play: Framework not ready")},this.handleFullscreen=function(e){g.vFramework&&(e?g.targetDivContainer.requestFullscreen?g.targetDivContainer.requestFullscreen():g.targetDivContainer.webkitRequestFullscreen?g.targetDivContainer.webkitRequestFullscreen():g.targetDivContainer.mozRequestFullScreen?g.targetDivContainer.mozRequestFullScreen():g.targetDivContainer.msRequestFullscreen&&g.targetDivContainer.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen())},this.vastPlayerId=(new Date).getTime(),this.isTerminated=function(){return g.bTerminated},this.test={appendClickToPlayButton:C,coverPlayer:P,fnBuildVideoPlayer:_,clearState:V,getAbsoluteOffsetFromBody:D,getMaxZindexForChildren:M,play:R,getVPM_obj:function(){return u}}};e.exports={test:{setVPM:function(e){a=e},setAdHandler:function(e){s=e},getPlayer:function(){return new y}},vastPlayerForPod:null,playAdObject:function(e,t,n,i){var r;t.pod&&t.slotNumber>1&&t.useExistingPlayer&&this.vastPlayerForPod?r=this.vastPlayerForPod:(this.vastPlayerForPod=null,r=new y,t.pod&&(this.vastPlayerForPod=r),i(5,r)),r&&r.playAdObject(e,t,n,i)},playVast:function(e,t,n,i,r){var o=Object.assign({},t);o.requestTime=Date.now(),h.inited||p(.001),o.controlSessionId=c.Guid(),h.addPlacementData(o.controlSessionId,{placementId:"playVast",adType:"video",controlSessionUuid:o.controlSessionId}),console.log("Vast Video Player - controlSessionUuid: ",o.controlSessionId),c.trackCustomEvent(o.controlSessionId,c.playerTelEvents.entryPointCall);var a=new y;a&&a.playVast(e,o,n,i,r),i(5,a)},loadAndPlayVast:function(e,t,i,r,o){var a=Object.assign({},t);a.requestTime=Date.now(),h.inited||p(.001),a.controlSessionId=c.Guid(),h.addPlacementData(a.controlSessionId,{placementId:"loadAndPlayVast",adType:"video",controlSessionUuid:a.controlSessionId}),console.log("Vast Video Player - controlSessionUuid: ",a.controlSessionId),c.trackCustomEvent(a.controlSessionId,c.playerTelEvents.entryPointCall),c.trackEvent(a.controlSessionId,v.adServerRequest,{url:i}),n(7886).B.load(i,(function(t,n){if(t||0===n.length)c.trackEvent(a.controlSessionId,v.adServerRequestNoFill),c.trackError(a.controlSessionId,t||0,"Failed to load "+i),l.error("Vast Video Player","Failed to load "+i);else{c.trackEvent(a.controlSessionId,v.adServerRequestFill);var s=new y;s&&s.playVast(e,a,n,r,o),r(5,s)}}))},resumeAd:function(e){e&&e.resumeAd()},pauseAd:function(e){e&&e.pauseAd()},stop:function(e){e&&e.stop()},removeFromPage:function(e){e&&e.removeFromPage()},play:function(e,t,n,i){e&&e.play(t,n,i)},handleFullscreen:function(e,t){e&&e.handleFullscreen(t)},playNativeAdVideo:function(e,t,i,r,o){var a,s=Object.assign({},i);if(s.requestTime=Date.now(),h.inited||p(.001),s.controlSessionId=c.Guid(),h.addPlacementData(s.controlSessionId,{placementId:"playNativeAdVideo",adType:"video",controlSessionUuid:s.controlSessionId}),console.log("Vast Video Player - controlSessionUuid: ",s.controlSessionId),(a=e)&&(a.hasAttribute("inuse")||(a.setAttribute("inuse",!0),0)))c.trackCustomEvent(s.controlSessionId,c.playerTelEvents.entryPointCallRejected,{message:"ad contained in use"});else{c.trackCustomEvent(s.controlSessionId,c.playerTelEvents.entryPointCall),s.adType="native";var d,u={preShow:r.preBanner,postShow:r.postBanner?r.postBanner:r.preBanner,postShowClickUrl:r.clickUrl,postShowTrackUrl:r.trackingUrl};u.preShow&&(u.preShow=u.preShow.trim()),u.postShow&&(u.postShow=u.postShow.trim()),u.postShowClickUrl&&(u.postShowClickUrl=u.postShowClickUrl.trim()),u.postShowTrackUrl&&(u.postShowTrackUrl=u.postShowTrackUrl.trim()),s.banners=u,delete s.endCard,delete s.disableCollapse,s.skippable||(s.skippable={}),s.skippable.hasOwnProperty("nonSkippableText")||(s.skippable.nonSkippableText=""),t&&(t=t.trim()),t&&t.length>0&&"<"===t[0]?((d=new y)&&d.playVast(e,s,t,o),o&&o(5,d)):t&&t.length>0?(c.trackEvent(s.controlSessionId,v.adServerRequest,{url:t}),n(7886).B.load(t,(function(n,i){n||0===i.length?(c.trackEvent(s.controlSessionId,v.adServerRequestNoFill),c.trackError(s.controlSessionId,n||0,"Failed to load "+vastUrl),l.error("Vast Video Player","Failed to load "+t),d=new y,s.badVastXml=!0,d&&d.playVast(e,s,"<VAST></VAST>",o),o&&o(5,d)):(c.trackEvent(s.controlSessionId,v.adServerRequestFill),(d=new y)&&d.playVast(e,s,i,o),o&&o(5,d))}))):(l.error("Vast Video Player","Nither VAST or VAST url present in parameter list"),o&&o(5,d))}},playAdPreview:function(e,t,i,r,o){var a=Object.assign({},i);a.adType="preview",a.playVideoVisibleThreshold=0;var s,d={preShow:r,postShow:r};a.banners=d,delete a.endCard,delete a.disableCollapse,t&&(t=t.trim()),t&&t.length>0&&"<"===t[0]?((s=new y)&&s.playVast(e,a,t,o),o&&o(5,s)):t&&t.length>0?n(7886).B.load(t,(function(n,i){n||0===i.length?(l.error("Vast Video Player","Failed to load "+t),o&&o(0,{code:n,message:"Failed to load "+t})):((s=new y)&&s.playVast(e,a,i,o),o&&o(5,s))})):(l.error("Vast Video Player","Nither VAST or VAST url present in parameter list"),o&&o(5,s))},playAudioAdPreview:function(e,t,i,r){var o,a=Object.assign({},i);a.adType="preview",a.playVideoVisibleThreshold=0,a.onlyAudio=!0,a.initialPlayback="click",a.initialAudio="on",a.banners={preShow:null,postShow:null},t&&(t=t.trim()),t&&t.length>0&&"<"===t[0]?((o=new y)&&o.playVast(e,a,t,r),r&&r(5,o)):t&&t.length>0?n(7886).B.load(t,(function(n,i){n||0===i.length?(l.error("Vast Video Player","Failed to load "+t),r&&r&&r(0,{code:n,message:"Failed to load "+t})):((o=new y)&&o.playVast(e,a,i,r),r&&r(5,o))})):(l.error("Vast Video Player","Nither VAST or VAST url present in parameter list"),r&&r(5,o))}}},3319:(e,t,n)=>{var i="Vast Video Player: VP-Callbacks",r=n(9724).v,o=n(4987)(),a=n(3415)(),s=n(1338);e.exports=function(e){var t=!1,n=!1,l=null,d=null,c={impression:!1,firstQuartile:!1,midpoint:!1,thirdQuartile:!1,complete:!1,skipped:!1,error:!1},u=function(e,t){var n=function(){if(t&&["complete","skipped","error"].includes(e))for(var n in c)c[n]=!1};if(c.hasOwnProperty(e)){if(c[e])return n(),!1;c[e]=!0,n()}return!0};return{cbTerminate:function(o,l,c){var p=e.external.targetElement,h=e.external.targetDivContainer,v=e.external.notificationCallback,f=e.external.vFramework,m=e.external.options&&("bannerstream"===e.external.options.adType||"preview"===e.external.options.adType||"native"===e.external.options.adType),g=function(){var t=e.external.options;return!(t.pod&&t.slotNumber&&t.slotNumber>0&&t.slotNumber!==t.slotCount)};r.log(i,"cbTerminate error: "+(!1===o?"false":JSON.stringify(o)));var y="unknown";if(p&&(y=p.id.toString()),r.log(i,"cbTerminate:  bTerminated = "+e.external.bTerminated+", targetElement id = "+y),e.external.isPlaying=!1,!e.external.bTerminated){e.external.bTerminated=!0,e.external.controlSizeTimer&&(clearInterval(e.external.controlSizeTimer),e.external.controlSizeTimer=null),!e.external.options.xandrSdk&&g()&&(l||a.exitFullscreen(),!c&&t&&a.isFullscreenRunning(f)&&e.external.options.overlayPlayer&&a.exitFullscreen());var A=o&&903===o.code;if(t=!1,p&&!A&&g())e.external.containerScreen&&h.removeChild(e.external.containerScreen),f&&(f.isPlayingVideo&&(r.log(i,"cbTerminate: pause ad"),f.disableTrackingUserActivity(!0),f.pause()),m||(p.style.height="1px",p.style.width="1px"),f.resizePlayer(1,1)),e.external.options.xandrSdk||setTimeout((function(){p&&(p.innerHTML="",p.parentNode===h&&(m||h.removeChild(p))),p=null}),m?1:2e3),e.external.playerCover&&h.removeChild(e.external.playerCover);else if(e.external.options.vpaid){var b=f.iframeVideoWrapper.contentWindow.document.getElementsByClassName("VPAID-container");b&&b.length>0&&b[0].remove()}if(h&&h.removeAttribute("inuse"),v)if(o){var k=function(e){try{return JSON.parse(e).creativeId||""}catch(e){return""}};403===o.code&&d&&(o.message=d),u("error",e.external.options.pod)&&(o.code&&"0"!==o.code&&0!==o.code?s.trackError(e.external.options.controlSessionId,o.code,o.message,f&&f.options.creativeId?f.options.creativeId:k(o.message)):s.trackCriticalError(e.external.options.controlSessionId,"","0",o.message,f&&f.options.creativeId?f.options.creativeId:k(o.message))),o.failedAfterReady=e.external.isDoneForReady,v(0,o)}else v(c?3:1,n),n=!1}},cbWhenReady:function(t){if(!e.external.bTerminated){e.external.isDoneForReady=!0,e.external.vFramework=t;var n=e.external.vFramework,d=e.external.notificationCallback,c=e.external.targetElement;if(n.options.height>0&&n.options.width>0&&s.telemetrySharedData.addPlacementData(e.external.options.controlSessionId,{adWidth:n.options.width,adHeight:n.options.height}),n.options.video?(n.options.finalVastUri&&(n.options.video.inlineVastUrl=n.options.finalVastUri),s.trackCustomEvent(e.external.options.controlSessionId,s.playerTelEvents.adReady,n.options.video,n.options.creativeId)):s.trackCustomEvent(e.external.options.controlSessionId,s.playerTelEvents.adReadyNoVideo,"",n?n.options.creativeId:""),e.external.adSkipConfirmation&&(n.adSkipConfirmation=e.external.adSkipConfirmation),n&&o.isMobile()&&e.external.isRequiredUserActionToStart()&&n.delayEventsTracking(!0,["video-start","impression"]),r.log(i,"cbWhenReady in "+((new Date).getTime()-e.external.dtStartPlayer)+" msecs"),d&&d(2,c),e.external.targetElement&&!e.external.targetElement.style.width&&(e.external.targetElement.style.width=e.external.options.width+"px"),e.external.isRequiredUserActionToStart())o.isAndroid()&&(a.isFullscreenRunning(n)&&a.exitFullscreen(),"native"!==e.external.options.adType&&e.external.repositionPlayer());else if(a.isFullscreenRunning(n)&&e.external.options.overlayPlayer)e.external.options.forceAdInFullscreen?(e.external.needStartPlay=!0,e.external.startFromFullscreen=!0,a.exitFullscreen(),o.isIPhone()&&(e.external.fullscreenTimer=setInterval((function(){a.isFullscreenRunning(n)||(clearInterval(e.external.fullscreenTimer),e.external.fullscreenTimer=null,e.external.playerResizeHandler())}),500))):c&&(c.style.width="1px",c.style.height="1px");else{if(c&&(c.style.zIndex=Math.max(100,e.external.getMaxZindexForChildren(e.external.targetDivContainer,0)+1)),e.external.repositionPlayer(),o.isIos()&&o.iOSversion()[0]<10)return;"off"===e.external.options.initialAudioOriginal&&n.explicitMute(),e.external.coverPlayer(),n.pausedByViewability||n.play()}e.external.options.overlayPlayer&&e.external.isRequiredUserActionToStart()&&(r.debug(i,"cbWhenReady: click to play placement"),e.external.repositionPlayer(),e.external.appendClickToPlayButton()),!l&&e.external.options.isWebviewEnvironment&&(l=new ResizeObserver((function(){e.external.vFramework&&e.external.vFramework.resizeVideo(null,!1,null)}))).observe(e.external.targetDivContainer)}},cbApnVastPlayer:function(a,l){r.debug(i,"cbApnVastPlayer: Framework event = "+a);var c=e.external.notificationCallback;if("creativedata"!==a)if("err403"!==a){var p={impression:"impression",video_impression:"impression",AdImpression:"impression","video-first-quartile":"firstQuartile",AdVideoFirstQuartile:"firstQuartile","video-mid":"midpoint",AdVideoMidpoint:"midpoint","video-third-quartile":"thirdQuartile",AdVideoThirdQuartile:"thirdQuartile",video_complete:"complete","video-complete":"complete",AdVideoComplete:"complete","user-close":"skipped",video_skipped:"skipped",video_skip:"skipped","video-skip":"skipped",AdSkipped:"skipped",fullscreenchange:"playerStateChange",video_fullscreen:"enterFullscreen","video-fullscreen":"enterFullscreen","video-exit-fullscreen":"exitFullscreen","ad-click":"adClick","cc-present":"ccPresent",parsing:"parsing",video_pause:"nativePause","video-pause":"nativePause"},h=e.external.vFramework,v=e.external.playerCover;if(p.hasOwnProperty(a)&&u(p[a],e.external.options.pod)){if("impression"===a&&h.adVideoPlayer){var f=h.adVideoPlayer.duration().toFixed();f&&(l={adDuration:f})}if("nativePause"===p[a]){if("native"===e.external.options.adType){var m=h.adVideoPlayer.duration().toFixed();m&&(l={adDuration:m,adTime:h.adVideoPlayer.currentTime().toFixed()}),s.trackCustomEvent(e.external.options.controlSessionId,p[a],l,h?h.options.creativeId:"")}}else s.trackCustomEvent(e.external.options.controlSessionId,p[a],l||"boolean"==typeof l?l:"",h?h.options.creativeId:"")}"ad-replay"!==a?(c&&c(11,{event:a,data:l}),"video-complete"!==a&&"AdVideoComplete"!==a||e.external.targetDivContainer&&e.external.targetDivContainer.removeAttribute("inuse"),"start"!==a&&"video-start"!==a&&"AdStarted"!==a||(!v||"video-start"!==a&&"AdStarted"!==a||(o.isIPhone()&&o.iOSversion()[0]<10?setTimeout((function(){e.external.targetDivContainer.removeChild(v),e.external.playerCover=null}),1500):(e.external.targetDivContainer.removeChild(v),e.external.playerCover=null),e.external.options.overlayPlayer&&e.external.isRequiredUserActionToStart()&&o.isMobile()?(r.debug(i,"cbApnVastPlayer: click to play placement on mobile"),e.external.appendClickToPlayButton()):e.external.options.overlayPlayer&&"click"===e.external.options.initialPlaybackOriginal&&o.isIos()&&o.iOSversion()[0]<10&&(r.debug(i,"cbApnVastPlayer: click to play placement on iOS 9"),e.external.appendClickToPlayButton())),c&&!t&&(t=!0,c(4))),"video-skip"===a&&(n=!0),!e.external.clickToPlayButton||"firstplay"!==a||o.isIos()&&o.iOSversion()[0]<10||h.pause(),"apn-video-paused-by-device"===a&&(e.external.clickAdResumed=!0,h.checkWhenVideoPausedByDevice(!1),h.play(),h.disableTrackingUserActivity(!1))):c(13,!0===l?{started:!0}:{ended:!0})}else d=l;else c&&c(12,{type:a,value:l})},internalCbNotification:function(){},test:{setFsHandler:function(e){a=e}}}}},5981:e=>{"use strict";e.exports="// extracted by mini-css-extract-plugin\nexport {};"},121:e=>{"use strict";e.exports="/*!************************************************************************************************************************!*\\\n  !*** css ../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./src/css/video-js.less ***!\n  \\************************************************************************************************************************/\n/* SKIN\n================================================================================\nThe main class name for all skin-specific styles. To make your own skin,\nreplace all occurrences of 'vjs-default-skin' with a new name. Then add your new\nskin name to your video tag instead of the default skin.\ne.g. <video class=\"video-js my-skin-name\">\n*/\n.vjs-default-skin {\n  color: #cccccc;\n}\n/* Custom Icon Font\n--------------------------------------------------------------------------------\nThe control icons are from a custom font. Each icon corresponds to a character\n(e.g. \"\\e001\"). Font icons allow for easy scaling and coloring of icons.\n*/\n@font-face {\n  font-family: 'VideoJS';\n  src: url(vjs.eot);\n  src: url(data:application/font-woff;base64,d09GRgABAAAAABG0AAsAAAAAEWgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIHUGNtYXAAAAFoAAAAfAAAAHyz47CpZ2FzcAAAAeQAAAAIAAAACAAAABBnbHlmAAAB7AAADTwAAA08MPTaTGhlYWQAAA8oAAAANgAAADYP2gkbaGhlYQAAD2AAAAAkAAAAJAkgBThobXR4AAAPhAAAAGQAAABkW54DGGxvY2EAAA/oAAAANAAAADQeIiIQbWF4cAAAEBwAAAAgAAAAIAAiAIluYW1lAAAQPAAAAVYAAAFWUqTEiXBvc3QAABGUAAAAIAAAACAAAwAAAAMD/AGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6ioDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEAGAAAAAUABAAAwAEAAEAIOAO4B/mAOkm6YTqKv/9//8AAAAAACDgAOAe5gDpJumE6ir//f//AAH/4yAEH/UaFRbwFpMV7gADAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAH//wAPAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAIAAP/ABAADwAAGAA0AAAERJwcnNycDBxchERc3BACgwGDAoKDAoP5goMADwP5goMBgwKD9YMCgAaCgwAAAAAABAMAAQANAA0AAAgAAEwkBwAKA/YADQP6A/oAAAgCAAEADgANAAAMABwAAEyERIQEhESGAAUD+wAHAAUD+wANA/QADAP0AAAABAAAADwHAA3EACwAAATYWFREUBi8BIxEzAZEUGxsU8aCgA3EUDBv8xBsMFPEBgAACAAAADwJHA3EAGAAkAAAlIiYnJjQ3PgE0JicmNDc2MhceARQGBw4BAzYWFREUBi8BIxEzAiUJEgcODh4fHx4ODg4oDiwtLSwHEp0UGxsU8aCg2wcHDigOHk1QTR4OKA4ODixxdHEsBwcClhQMG/zEGwwU8QGAAAADAAAADwNwA3EAHQA2AEIAACUiJicmNDc+ATQmJyY0NzYyFx4DFRQOAgcOASciJicmNDc+ATQmJyY0NzYyFx4BFAYHDgEDNhYVERQGLwEjETMC0AoRBw4OMTExMQ4ODicOHy8gEREgLx8HEbQJEgcODh4fHx4ODg4oDiwtLSwHEp0UGxsU8aCggAcIDicOMnuCezIOJw4PDx5HTVQrK1RNRx4IB1sHBw4oDh5NUE0eDigODg4scXRxLAcHApYUDBv8xBsMFPEBgAAAAAAEAAAADwRAA3EAIwBBAFoAZgAAJSImJyY0Nz4DNTQuAicmNDc2MhceAxUUDgIHDgEjJyImJyY0Nz4BNCYnJjQ3NjIXHgMVFA4CBw4BJyImJyY0Nz4BNCYnJjQ3NjIXHgEUBgcOAQM2FhURFAYvASMRMwN6CRIHDg4hMyISEiIzIQ4ODigOKD0pFhYpPSgHEgmqChEHDg4xMTExDg4OJw4fLyARESAvHwcRtAkSBw4OHh8fHg4ODigOLC0tLAcSnRQbGxTxoKAmBwcOKA4hTFNaLi5aU0whDigODg4oW2VsODhsZVsoBwdaBwgOJw4ye4J7Mg4nDg8PHkdNVCsrVE1HHggHWwcHDigOHk1QTR4OKA4ODixxdHEsBwcClhQMG/zEGwwU8QGAAAEAwP/AA0ADwAADAAAJAwIA/sABQAFAA8D+AP4AAgAABAAA/7oFXgPAAAMALwBSAHUAABMhESEBLgEnLgEnLgMjIg4CBw4BBw4BBx4BFx4BFx4DFz4DNz4BNz4BJS4DIyIOAhUUHgIzMj4CNyMOASMiJjU0NjMyFhczIS4DIyIOAhUUHgIzMj4CNyMOASMiJjU0NjMyFhczAAVe+qIE3QESIAUUCRBVfZxWVZ+AWBAJFAcfEQICER8HFAkQWICfVVacfVUQCRQFIBL9ugQgOE4yLlA7IiA8VjcrSTYjBIoEIyM2ICsmIikDiAHeBCE3TjMtUDsiIDxWNixJNiIFigQjIzcfKyYhKQSIA8D7+gIHh4opCQwHCxAKBAQKEAsHDAkpioeHiSoJDAYMEAoFAQEFChAMBgwJKom2NVM5HyhLa0JDa0soHzpUNSc1WzpPUS8rNVM5HyhLa0JDa0soHzpUNSc1WzpPUS8rAAABAIAAQAOAA0AAAwAAEyERIYADAP0AA0D9AAAACAA4AAADwAPAAAsAFwAjAC8ASABhAHoAhgAAARQWMzI2NTQmIyIGBRQWMzI2NTQmIyIGExQWMzI2NTQmIyIGAxQWMzI2NTQmIyIGBTgBMRQWMzI2NTgBMTgBMTQmIyIGFRQ0MSU4ATEUFjMyNjU4ATE4ATE0JiMiBhUUNDEDOAExFBYzMjY1OAExOAExNCYjIgYVFDQxAxQWMzI2NTQmIyIGAYBLNTVLSzU1SwEQSzU1S0s1NUuwJRsbJSUbGyVwJRsaJiYaGyX+8CUbGyUlGxsl/vAmGhslJRsaJiA5Jyg4OCgnOVgqHh4qKh4eKgNANUtLNTVLS6U1S0s1NUtL/rsbJSUbGyUl/tUaJiYaGyUlixslJRsbJSUbGxtwGiYmGhslJRsaGgIgKDg4KCc5OScoKP7wHioqHh4qKgAAAAACAAD/wAQAA8AABgANAAABEScHJzcnAQcXIREXNwHAoMBgwKAD4MCg/mCgwAGA/mCgwGDAoAHgwKABoKDAAAAAAQAA/8AEAAOAACIAAAEyHgIVFA4CIyImJw4DBzU+ATU0JicuAzU0PgICAGq7i1BQi7tqFCgUKVpdYDAzTQEBLEYxG1CLuwOAQXGYVlaYcUEDAikzHQoCGxpXNAcPBxxIUlwxVphxQQADAAD/wAQAA8AAEwAnAFoAAAEiDgIVFB4CMzI+AjU0LgIDMh4CFRQOAiMiLgI1ND4CAQ4DIyIuAicuAzU0PgI3FzgBMQ4BFBYXHgEzMjY3PgE0Jic3HgMVFA4CAgBqu4tQUIu7amq7i1BQi7tqNV1GKChGXTU1XUYoKEZdAWYeR01UKytUTUceHy8gEREgLx9DMTExMTB7Q0N7MDExMTFDHy8gEREgLwPAUIu7amq7i1BQi7tqaruLUP8AKEZdNTVdRigoRl01NV1GKP3PHy8gEREgLx8eR01UKytUTUceQzJ7gnsyLzMzLzJ7gnsyQx5HTVQrK1RNRwAAAAABAAD/wAQAA8AAMwAAASIGByU+ATU0JiclHgEzMjY1NCYjIgYVFBYXBS4BIyIGFRQWMzI2NwUOARUUFjMyNjU0JgNgIjsW/lEBAQEBAa8WOyJCXl5CQl4BAf5RFjsiQl5eQiI7FgGvAQFeQkJeXgEAGhfYBg0GBg0G2BcaXkJCXl5CBg0G2BcaXkJCXhoX2AYNBkJeXkJCXgAAAAACACD/8AQAA7AAOgByAAABLgEnLgEnLgEnLgEHDgEHDgEHDgEHDgEXHgEXHgEXHgEXHgE3PgE3PgE3PgE3PgE3OgEzMjY1PAE1MQcOAQcOAQcOAScuAScuAScuAScuATc+ATc+ATc+ATc+ARceARceARceARceAQcxHAEVFBYXDgEHBAABFRUUOSQjVC4tYTExXywtTyEhNBESEAEBFBMTNiEiTisrWi4uWSkpSx4fMRAJDgMBAgEbJWYRMx8fSSgoVSoqUycmRR0dLA8PDgEBEhARLh0eQyUlTycnTSQjQBobKQ4NDQEhGAUPCwHAMmMtLlIiIzUSEhEBARUTFDcjIlEtLF4vL1wrK00gIDIQERABARQSEjQhIEwpGTQbJRsBAwGqKEceHi4QDw8BARIRETEeHkcmJ1EpKVAlJUIcGysODw0BAREQEC0cHEEkI0smAQMBGSQDGjMYAAACAAD/wAQAA8AAGQAzAAABIg4CBz4DMzIeAhUUFjMyNjU0LgIDMj4CNw4DIyIuAjU0JiMiBhUUHgICAGm4ilIDAkNxlVVWmHFBOCgoOFCLu2ppuIpSAwJDcZVVVphxQTgoKDhQi7sDwE6Itmhbn3ZERnqjXSg4OChqu4tQ/ABOiLZoW592REZ6o10oODgoaruLUAAAAgAA/8AEAAPAADAAPAAAATUnLgEnNycHLgEvASMHDgEHJwcXDgEPARUXHgEXBxc3HgEfATM3PgE3FzcnPgE/AQUiJjU0NjMyFhUUBgQAkwQLBlaIeQwbDhjAGA4bDHmIVgYLBJOTBQoHV4h6DBoNGcAZDRoMeohXBwoFk/4ANUtLNTVLSwFgwBkNGg15iFYGCwWSkgULBlaIeQ0aDRnAGQ0aDXmIVwYLBZOTBQsGV4h5DRoNGSBLNTVLSzU1SwAABgBA/8ADwAPAABkAIQA3AEUAUwBhAAABLgEnLgEnLgEjISIGFREUFjMhMjY1ETQmJyceARcjNR4BExQGIyEiJjURNDYzMDoCMRUUFjsBAyEiJjU0NjMhMhYVFAYnISImNTQ2MyEyFhUUBichIiY1NDYzITIWFRQGA5YRLRkaMxcnKQv+ECEvLyEC4CEvDhyFFyUNmhEphgkH/SAHCQkHm7qbEw3goP5ADRMTDQHADRMTDf5ADRMTDQHADRMTDf5ADRMTDQHADRMTAtsXMxoZLREcDi8h/KAhLy8hAnALKSc2FykRmg0l/OgHCQkHA2AHCeANE/4AEw0NExMNDROAEw0NExMNDROAEw0NExMNDRMAAAAAAQAA/8AEAAPAAC0AAAEhNy4BIyIGBw4BFRQWFx4BMzI2Nz4BNxcOAyMiLgI1ND4CMzIeAhc3BAD+gJA3jE1NjDc2Ojo2N4xNTYw3BAkEYCNWYmw6aruLUFCLu2o1ZFxSI5YCQJA2Ojo2N4xNTYw3Njo6NgUJBVQoQS0ZUIu7amq7i1AVJzcjlgAAAAACAAAAAAPAA34ADwAqAAABFSMnByM1Nyc1Mxc3MxUHASImLwEjIiY1ETQ2OwE3PgEXHgEVERQGBw4BA8BVa2tVa2tVa2tVa/5LBgwF9nMNExMNc/YHEwkJCwsJAwYBVVVra1Vra1Vra1Vr/kAFBPcTDQFADRP3BgQDBBAK/MAKEAQBAQABAAAAAQAAi1igY18PPPUACwQAAAAAANWuYlIAAAAA1a5iUgAA/7oFXgPAAAAACAACAAAAAAAAAAEAAAPA/8AAAAVeAAAAAAVeAAEAAAAAAAAAAAAAAAAAAAAZBAAAAAAAAAAAAAAAAgAAAAQAAAAEAADABAAAgAQAAAAEAAAABAAAAARAAAAEAADABV4AAAQAAIAEAAA4BAAAAAQAAAAEAAAABAAAAAQAACAEAAAABAAAAAQAAEAEAAAABAAAAAAAAAAACgAUAB4APgBMAGIAegC2ARwBsAHAAmYCdAMUAzQDaAPmBDQE4gUsBYwGFgZcBp4AAQAAABkAhwAIAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAMAAAABAAAAAAACAAcAPAABAAAAAAADAAMAKgABAAAAAAAEAAMAUQABAAAAAAAFAAsACQABAAAAAAAGAAMAMwABAAAAAAAKABoAWgADAAEECQABAAYAAwADAAEECQACAA4AQwADAAEECQADAAYALQADAAEECQAEAAYAVAADAAEECQAFABYAFAADAAEECQAGAAYANgADAAEECQAKADQAdHZqcwB2AGoAc1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMHZqcwB2AGoAc3ZqcwB2AGoAc1JlZ3VsYXIAUgBlAGcAdQBsAGEAcnZqcwB2AGoAc0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format('woff'), url(vjs.eot?#iefix) format('embedded-opentype'), url(vjs.ttf) format('truetype'), url(vjs.svg#icomoon) format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n/* Base UI Component Classes\n--------------------------------------------------------------------------------\n*/\n/* Slider - used for Volume bar and Seek bar */\n.vjs-default-skin .vjs-slider {\n  /* Replace browser focus highlight with handle highlight */\n  outline: 0;\n  position: relative;\n  cursor: pointer;\n  padding: 0;\n  /* background-color-with-alpha */\n  background-color: #333333;\n  background-color: rgba(51, 51, 51, 0.9);\n}\n.vjs-default-skin .vjs-slider:focus {\n  /* box-shadow */\n  -webkit-box-shadow: 0 0 2em #fff;\n  -moz-box-shadow: 0 0 2em #fff;\n  box-shadow: 0 0 2em #fff;\n}\n.vjs-default-skin .vjs-slider-handle {\n  position: absolute;\n  /* Needed for IE6 */\n  left: 0;\n  top: 0;\n}\n.vjs-default-skin .vjs-slider-handle:before {\n  content: '\\e009';\n  font-family: VideoJS;\n  font-size: 1em;\n  line-height: 1;\n  text-align: center;\n  text-shadow: 0em 0em 1em #fff;\n  position: absolute;\n  top: 0;\n  left: 0;\n  /* Rotate the square icon to make a diamond */\n  /* transform */\n  -webkit-transform: rotate(-45deg);\n  -moz-transform: rotate(-45deg);\n  -ms-transform: rotate(-45deg);\n  -o-transform: rotate(-45deg);\n  transform: rotate(-45deg);\n}\n/* Control Bar\n--------------------------------------------------------------------------------\nThe default control bar that is a container for most of the controls.\n*/\n.vjs-default-skin .vjs-control-bar {\n  /* Start hidden */\n  display: none;\n  position: absolute;\n  /* Place control bar at the bottom of the player box/video.\n     If you want more margin below the control bar, add more height. */\n  bottom: 0;\n  /* Use left/right to stretch to 100% width of player div */\n  left: 0;\n  right: 0;\n  /* Height includes any margin you want above or below control items */\n  height: 3em;\n  /* background-color-with-alpha */\n  background-color: #07141e;\n  background-color: rgba(7, 20, 30, 0.7);\n}\n/* Show the control bar only once the video has started playing */\n.vjs-default-skin.vjs-has-started .vjs-control-bar {\n  display: block;\n  /* Visibility needed to make sure things hide in older browsers too. */\n  visibility: visible;\n  opacity: 1;\n  /* transition */\n  -webkit-transition: visibility 0.1s, opacity 0.1s;\n  -moz-transition: visibility 0.1s, opacity 0.1s;\n  -o-transition: visibility 0.1s, opacity 0.1s;\n  transition: visibility 0.1s, opacity 0.1s;\n}\n/* Hide the control bar when the video is playing and the user is inactive  */\n.vjs-default-skin.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  display: block;\n  visibility: hidden;\n  opacity: 0;\n  /* transition */\n  -webkit-transition: visibility 0.5s, opacity 0.5s;\n  -moz-transition: visibility 0.5s, opacity 0.5s;\n  -o-transition: visibility 0.5s, opacity 0.5s;\n  transition: visibility 0.5s, opacity 0.5s;\n}\n.vjs-default-skin.vjs-controls-disabled .vjs-control-bar {\n  display: none;\n}\n.vjs-default-skin.vjs-using-native-controls .vjs-control-bar {\n  display: none;\n}\n/* The control bar shouldn't show after an error */\n.vjs-default-skin.vjs-error .vjs-control-bar {\n  display: none;\n}\n/* Don't hide the control bar if it's audio */\n.vjs-audio.vjs-default-skin.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  opacity: 1;\n  visibility: visible;\n}\n/* IE8 is flakey with fonts, and you have to change the actual content to force\nfonts to show/hide properly.\n  - \"\\9\" IE8 hack didn't work for this\n  - Found in XP IE8 from http://modern.ie. Does not show up in \"IE8 mode\" in IE9\n*/\n@media \\0screen {\n  .vjs-default-skin.vjs-user-inactive.vjs-playing .vjs-control-bar :before {\n    content: '';\n  }\n}\n/* General styles for individual controls. */\n.vjs-default-skin .vjs-control {\n  outline: none;\n  position: relative;\n  float: left;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: 3em;\n  width: 4em;\n}\n/* Font button icons */\n.vjs-default-skin .vjs-control:before {\n  font-family: VideoJS;\n  font-size: 1.5em;\n  line-height: 2;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);\n}\n/* Replacement for focus outline */\n.vjs-default-skin .vjs-control:focus:before,\n.vjs-default-skin .vjs-control:hover:before {\n  text-shadow: 0em 0em 1em #ffffff;\n}\n.vjs-default-skin .vjs-control:focus {\n  /*  outline: 0; */\n  /* keyboard-only users cannot see the focus on several of the UI elements when\n  this is set to 0 */\n}\n/* Hide control text visually, but have it available for screenreaders */\n.vjs-default-skin .vjs-control-text {\n  /* hide-visually */\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n/* Play/Pause\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin .vjs-play-control {\n  width: 5em;\n  cursor: pointer;\n}\n.vjs-default-skin .vjs-play-control:before {\n  content: '\\e001';\n}\n.vjs-default-skin.vjs-playing .vjs-play-control:before {\n  content: '\\e002';\n}\n/* Playback toggle\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin .vjs-playback-rate .vjs-playback-rate-value {\n  font-size: 1.5em;\n  line-height: 2;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  text-align: center;\n  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);\n}\n.vjs-default-skin .vjs-playback-rate.vjs-menu-button .vjs-menu .vjs-menu-content {\n  width: 4em;\n  left: -2em;\n  list-style: none;\n}\n/* Volume/Mute\n-------------------------------------------------------------------------------- */\n.vjs-default-skin .vjs-mute-control,\n.vjs-default-skin .vjs-volume-menu-button {\n  cursor: pointer;\n  float: right;\n}\n.vjs-default-skin .vjs-mute-control:before,\n.vjs-default-skin .vjs-volume-menu-button:before {\n  content: '\\e006';\n}\n.vjs-default-skin .vjs-mute-control.vjs-vol-0:before,\n.vjs-default-skin .vjs-volume-menu-button.vjs-vol-0:before {\n  content: '\\e003';\n}\n.vjs-default-skin .vjs-mute-control.vjs-vol-1:before,\n.vjs-default-skin .vjs-volume-menu-button.vjs-vol-1:before {\n  content: '\\e004';\n}\n.vjs-default-skin .vjs-mute-control.vjs-vol-2:before,\n.vjs-default-skin .vjs-volume-menu-button.vjs-vol-2:before {\n  content: '\\e005';\n}\n.vjs-default-skin .vjs-volume-control {\n  width: 5em;\n  float: right;\n}\n.vjs-default-skin .vjs-volume-bar {\n  width: 5em;\n  height: 0.6em;\n  margin: 1.1em auto 0;\n}\n.vjs-default-skin .vjs-volume-level {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 0.5em;\n  /* assuming volume starts at 1.0 */\n  width: 100%;\n  background: #66a8cc url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAP0lEQVQIHWWMAQoAIAgDR/QJ/Ub//04+w7ZICBwcOg5FZi5iBB82AGzixEglJrd4TVK5XUJpskSTEvpdFzX9AB2pGziSQcvAAAAAAElFTkSuQmCC) -50% 0 repeat;\n}\n.vjs-default-skin .vjs-volume-bar .vjs-volume-handle {\n  width: 0.5em;\n  height: 0.5em;\n  /* Assumes volume starts at 1.0. If you change the size of the\n     handle relative to the volume bar, you'll need to update this value\n     too. */\n  left: 4.5em;\n}\n.vjs-default-skin .vjs-volume-handle:before {\n  font-size: 0.9em;\n  top: -0.2em;\n  left: -0.2em;\n  width: 1em;\n  height: 1em;\n}\n/* The volume menu button is like menu buttons (captions/subtitles) but works\n    a little differently. It needs to be possible to tab to the volume slider\n    without hitting space bar on the menu button. To do this we're not using\n    display:none to hide the slider menu by default, and instead setting the\n    width and height to zero. */\n.vjs-default-skin .vjs-volume-menu-button .vjs-menu {\n  display: block;\n  width: 0;\n  height: 0;\n  border-top-color: transparent;\n}\n.vjs-default-skin .vjs-volume-menu-button .vjs-menu .vjs-menu-content {\n  height: 0;\n  width: 0;\n}\n.vjs-default-skin .vjs-volume-menu-button:hover .vjs-menu,\n.vjs-default-skin .vjs-volume-menu-button .vjs-menu.vjs-lock-showing {\n  border-top-color: rgba(7, 40, 50, 0.5);\n  /* Same as ul background */\n}\n.vjs-default-skin .vjs-volume-menu-button:hover .vjs-menu .vjs-menu-content,\n.vjs-default-skin .vjs-volume-menu-button .vjs-menu.vjs-lock-showing .vjs-menu-content {\n  height: 2.9em;\n  width: 10em;\n}\n/* Progress\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin .vjs-progress-control {\n  position: absolute;\n  left: 0;\n  right: 0;\n  width: auto;\n  font-size: 0.3em;\n  height: 1.2em;\n  /* Increase default height of progress bar by a decision for VIDLA-1692 */\n  /* Set above the rest of the controls. */\n  top: -1em;\n  /* Shrink the bar slower than it grows. */\n  /* transition */\n  -webkit-transition: all 0.4s;\n  -moz-transition: all 0.4s;\n  -o-transition: all 0.4s;\n  transition: all 0.4s;\n}\n/* On hover, make the progress bar grow to something that's more clickable.\n    This simply changes the overall font for the progress bar, and this\n    updates both the em-based widths and heights, as wells as the icon font */\n.vjs-default-skin:hover .vjs-progress-control {\n  /* commented out by a decision for VIDLA-1692 */\n  /* font-size: .9em; */\n  /* Even though we're not changing the top/height, we need to include them in\n      the transition so they're handled correctly. */\n  /* .transition(all 0.2s);  */\n}\n/* Box containing play and load progresses. Also acts as seek scrubber. */\n.vjs-default-skin .vjs-progress-holder {\n  height: 100%;\n}\n/* Progress Bars */\n.vjs-default-skin .vjs-progress-holder .vjs-play-progress,\n.vjs-default-skin .vjs-progress-holder .vjs-load-progress,\n.vjs-default-skin .vjs-progress-holder .vjs-load-progress div {\n  position: absolute;\n  display: block;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  /* updated by javascript during playback */\n  width: 0;\n  /* Needed for IE6 */\n  left: 0;\n  top: 0;\n}\n.vjs-default-skin .vjs-play-progress {\n  /*\n    Using a data URI to create the white diagonal lines with a transparent\n      background. Surprisingly works in IE8.\n      Created using http://www.patternify.com\n    Changing the first color value will change the bar color.\n    Also using a paralax effect to make the lines move backwards.\n      The -50% left position makes that happen.\n  */\n  background: #66a8cc url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAP0lEQVQIHWWMAQoAIAgDR/QJ/Ub//04+w7ZICBwcOg5FZi5iBB82AGzixEglJrd4TVK5XUJpskSTEvpdFzX9AB2pGziSQcvAAAAAAElFTkSuQmCC) -50% 0 repeat;\n}\n.vjs-default-skin .vjs-load-progress {\n  background: #646464 /* IE8- Fallback */;\n  background: rgba(255, 255, 255, 0.2);\n}\n/* there are child elements of the load progress bar that represent the\n   specific time ranges that have been buffered */\n.vjs-default-skin .vjs-load-progress div {\n  background: #787878 /* IE8- Fallback */;\n  background: rgba(255, 255, 255, 0.1);\n}\n.vjs-default-skin .vjs-seek-handle {\n  width: 1.5em;\n  height: 100%;\n}\n.vjs-default-skin .vjs-seek-handle:before {\n  padding-top: 0.1em /* Minor adjustment */;\n}\n/* Live Mode\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin.vjs-live .vjs-time-controls,\n.vjs-default-skin.vjs-live .vjs-time-divider,\n.vjs-default-skin.vjs-live .vjs-progress-control {\n  display: none;\n}\n.vjs-default-skin.vjs-live .vjs-live-display {\n  display: block;\n}\n/* Live Display\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin .vjs-live-display {\n  display: none;\n  font-size: 1em;\n  line-height: 3em;\n}\n/* Time Display\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin .vjs-time-controls {\n  font-size: 1em;\n  /* Align vertically by making the line height the same as the control bar */\n  line-height: 3em;\n}\n.vjs-default-skin .vjs-current-time {\n  float: left;\n}\n.vjs-default-skin .vjs-duration {\n  float: left;\n}\n/* Remaining time is in the HTML, but not included in default design */\n.vjs-default-skin .vjs-remaining-time {\n  display: none;\n  float: left;\n}\n.vjs-time-divider {\n  float: left;\n  line-height: 3em;\n}\n/* Fullscreen\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin .vjs-fullscreen-control {\n  width: 3.8em;\n  cursor: pointer;\n  float: right;\n}\n.vjs-default-skin .vjs-fullscreen-control:before {\n  content: '\\e000';\n}\n/* Switch to the exit icon when the player is in fullscreen */\n.vjs-default-skin.vjs-fullscreen .vjs-fullscreen-control:before {\n  content: '\\e00b';\n}\n/* Big Play Button (play button at start)\n--------------------------------------------------------------------------------\nPositioning of the play button in the center or other corners can be done more\neasily in the skin designer. http://designer.videojs.com/\n*/\n.vjs-default-skin .vjs-big-play-button {\n  left: 0.5em;\n  top: 0.5em;\n  font-size: 3em;\n  display: block;\n  z-index: 2;\n  position: absolute;\n  width: 4em;\n  height: 2.6em;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  opacity: 1;\n  /* Need a slightly gray bg so it can be seen on black backgrounds */\n  /* background-color-with-alpha */\n  background-color: #07141e;\n  background-color: rgba(7, 20, 30, 0.7);\n  border: 0.1em solid #3b4249;\n  /* border-radius */\n  -webkit-border-radius: 0.8em;\n  -moz-border-radius: 0.8em;\n  border-radius: 0.8em;\n  /* box-shadow */\n  -webkit-box-shadow: 0px 0px 1em rgba(255, 255, 255, 0.25);\n  -moz-box-shadow: 0px 0px 1em rgba(255, 255, 255, 0.25);\n  box-shadow: 0px 0px 1em rgba(255, 255, 255, 0.25);\n  /* transition */\n  -webkit-transition: all 0.4s;\n  -moz-transition: all 0.4s;\n  -o-transition: all 0.4s;\n  transition: all 0.4s;\n}\n/* Optionally center */\n.vjs-default-skin.vjs-big-play-centered .vjs-big-play-button {\n  /* Center it horizontally */\n  left: 50%;\n  margin-left: -2.1em;\n  /* Center it vertically */\n  top: 50%;\n  margin-top: -1.4em;\n}\n/* Hide if controls are disabled */\n.vjs-default-skin.vjs-controls-disabled .vjs-big-play-button {\n  display: none;\n}\n/* Hide when video starts playing */\n.vjs-default-skin.vjs-has-started .vjs-big-play-button {\n  display: none;\n}\n/* Hide on mobile devices. Remove when we stop using native controls\n    by default on mobile  */\n.vjs-default-skin.vjs-using-native-controls .vjs-big-play-button {\n  display: none;\n}\n.vjs-default-skin:hover .vjs-big-play-button,\n.vjs-default-skin .vjs-big-play-button:focus {\n  outline: 0;\n  border-color: #fff;\n  /* IE8 needs a non-glow hover state */\n  background-color: #505050;\n  background-color: rgba(50, 50, 50, 0.75);\n  /* box-shadow */\n  -webkit-box-shadow: 0 0 3em #fff;\n  -moz-box-shadow: 0 0 3em #fff;\n  box-shadow: 0 0 3em #fff;\n  /* transition */\n  -webkit-transition: all 0s;\n  -moz-transition: all 0s;\n  -o-transition: all 0s;\n  transition: all 0s;\n}\n.vjs-default-skin .vjs-big-play-button:before {\n  content: '\\e001';\n  font-family: VideoJS;\n  /* In order to center the play icon vertically we need to set the line height\n     to the same as the button height */\n  line-height: 2.6em;\n  text-shadow: 0.05em 0.05em 0.1em #000;\n  text-align: center /* Needed for IE8 */;\n  position: absolute;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n.vjs-error .vjs-big-play-button {\n  display: none;\n}\n/* Error Display\n--------------------------------------------------------------------------------\n*/\n.vjs-error-display {\n  display: none;\n}\n.vjs-error .vjs-error-display {\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n.vjs-error .vjs-error-display:before {\n  content: 'X';\n  font-family: Arial;\n  font-size: 4em;\n  color: #666666;\n  /* In order to center the play icon vertically we need to set the line height\n     to the same as the button height */\n  line-height: 1;\n  text-shadow: 0.05em 0.05em 0.1em #000;\n  text-align: center /* Needed for IE8 */;\n  vertical-align: middle;\n  position: absolute;\n  left: 0;\n  top: 50%;\n  margin-top: -0.5em;\n  width: 100%;\n}\n.vjs-error-display div {\n  position: absolute;\n  bottom: 1em;\n  right: 0;\n  left: 0;\n  font-size: 1.4em;\n  text-align: center;\n  padding: 3px;\n  background: #000000;\n  background: rgba(0, 0, 0, 0.5);\n}\n.vjs-error-display a,\n.vjs-error-display a:visited {\n  color: #f4a460;\n}\n/* Loading Spinner\n--------------------------------------------------------------------------------\n*/\n.vjs-loading-spinner {\n  /* Should be hidden by default */\n  display: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  font-size: 4em;\n  line-height: 1;\n  width: 1em;\n  height: 1em;\n  margin-left: -0.5em;\n  margin-top: -0.5em;\n  opacity: 0.75;\n}\n/* Show the spinner when waiting for data and seeking to a new time */\n.vjs-waiting .vjs-loading-spinner,\n.vjs-seeking .vjs-loading-spinner {\n  display: block;\n  /* only animate when showing because it can be processor heavy */\n  /* animation */\n  -webkit-animation: spin 1.5s infinite linear;\n  -moz-animation: spin 1.5s infinite linear;\n  -o-animation: spin 1.5s infinite linear;\n  animation: spin 1.5s infinite linear;\n}\n/* Errors are unrecoverable without user interaction so hide the spinner */\n.vjs-error .vjs-loading-spinner {\n  display: none;\n  /* ensure animation doesn't continue while hidden */\n  /* animation */\n  -webkit-animation: none;\n  -moz-animation: none;\n  -o-animation: none;\n  animation: none;\n}\n.vjs-default-skin .vjs-loading-spinner:before {\n  content: '\\e01e';\n  font-family: VideoJS;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 1em;\n  height: 1em;\n  text-align: center;\n  text-shadow: 0em 0em 0.1em #000;\n}\n@-moz-keyframes spin {\n  0% {\n    -moz-transform: rotate(0deg);\n  }\n  100% {\n    -moz-transform: rotate(359deg);\n  }\n}\n@-webkit-keyframes spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(359deg);\n  }\n}\n@-o-keyframes spin {\n  0% {\n    -o-transform: rotate(0deg);\n  }\n  100% {\n    -o-transform: rotate(359deg);\n  }\n}\n@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(359deg);\n  }\n}\n/* Menu Buttons (Captions/Subtitles/etc.)\n--------------------------------------------------------------------------------\n*/\n.vjs-default-skin .vjs-menu-button {\n  float: right;\n  cursor: pointer;\n}\n.vjs-default-skin .vjs-menu {\n  display: none;\n  position: absolute;\n  bottom: 0;\n  left: 0em;\n  /* (Width of vjs-menu - width of button) / 2 */\n  width: 0em;\n  height: 0em;\n  margin-bottom: 3em;\n  border-left: 2em solid transparent;\n  border-right: 2em solid transparent;\n  border-top: 1.55em solid #000000;\n  /* Same width top as ul bottom */\n  border-top-color: rgba(7, 40, 50, 0.5);\n  /* Same as ul background */\n}\n/* Button Pop-up Menu */\n.vjs-default-skin .vjs-menu-button .vjs-menu .vjs-menu-content {\n  display: block;\n  padding: 0;\n  margin: 0;\n  position: absolute;\n  width: 10em;\n  bottom: 1.5em;\n  /* Same bottom as vjs-menu border-top */\n  max-height: 15em;\n  overflow: auto;\n  left: -5em;\n  /* Width of menu - width of button / 2 */\n  /* background-color-with-alpha */\n  background-color: #07141e;\n  background-color: rgba(7, 20, 30, 0.7);\n  /* box-shadow */\n  -webkit-box-shadow: -0.2em -0.2em 0.3em rgba(255, 255, 255, 0.2);\n  -moz-box-shadow: -0.2em -0.2em 0.3em rgba(255, 255, 255, 0.2);\n  box-shadow: -0.2em -0.2em 0.3em rgba(255, 255, 255, 0.2);\n}\n.vjs-default-skin .vjs-menu-button:hover .vjs-control-content .vjs-menu,\n.vjs-default-skin .vjs-control-content .vjs-menu.vjs-lock-showing {\n  display: block;\n}\n/* prevent menus from opening while scrubbing (FF, IE) */\n.vjs-default-skin.vjs-scrubbing .vjs-menu-button:hover .vjs-control-content .vjs-menu {\n  display: none;\n}\n.vjs-default-skin .vjs-menu-button ul li {\n  list-style: none;\n  margin: 0;\n  padding: 0.3em 0 0.3em 0;\n  line-height: 1.4em;\n  font-size: 1.2em;\n  text-align: center;\n  text-transform: lowercase;\n}\n.vjs-default-skin .vjs-menu-button ul li.vjs-selected {\n  background-color: #000;\n}\n.vjs-default-skin .vjs-menu-button ul li:focus,\n.vjs-default-skin .vjs-menu-button ul li:hover,\n.vjs-default-skin .vjs-menu-button ul li.vjs-selected:focus,\n.vjs-default-skin .vjs-menu-button ul li.vjs-selected:hover {\n  outline: 0;\n  color: #111;\n  /* background-color-with-alpha */\n  background-color: #ffffff;\n  background-color: rgba(255, 255, 255, 0.75);\n  /* box-shadow */\n  -webkit-box-shadow: 0 0 1em #ffffff;\n  -moz-box-shadow: 0 0 1em #ffffff;\n  box-shadow: 0 0 1em #ffffff;\n}\n.vjs-default-skin .vjs-menu-button ul li.vjs-menu-title {\n  text-align: center;\n  text-transform: uppercase;\n  font-size: 1em;\n  line-height: 2em;\n  padding: 0;\n  margin: 0 0 0.3em 0;\n  font-weight: bold;\n  cursor: default;\n}\n/* Subtitles Button */\n.vjs-default-skin .vjs-subtitles-button:before {\n  content: '\\e00c';\n}\n/* Captions Button */\n.vjs-default-skin .vjs-captions-button:before {\n  content: '\\e008';\n}\n/* Chapters Button */\n.vjs-default-skin .vjs-chapters-button:before {\n  content: '\\e00c';\n}\n.vjs-default-skin .vjs-chapters-button.vjs-menu-button .vjs-menu .vjs-menu-content {\n  width: 24em;\n  left: -12em;\n}\n/* Replacement for focus outline */\n.vjs-default-skin .vjs-captions-button:focus .vjs-control-content:before,\n.vjs-default-skin .vjs-captions-button:hover .vjs-control-content:before {\n  /* box-shadow */\n  -webkit-box-shadow: 0 0 1em #ffffff;\n  -moz-box-shadow: 0 0 1em #ffffff;\n  box-shadow: 0 0 1em #ffffff;\n}\n/*\nREQUIRED STYLES (be careful overriding)\n================================================================================\nWhen loading the player, the video tag is replaced with a DIV,\nthat will hold the video tag or object tag for other playback methods.\nThe div contains the video playback element (Flash or HTML5) and controls,\nand sets the width and height of the video.\n\n** If you want to add some kind of border/padding (e.g. a frame), or special\npositioning, use another containing element. Otherwise you risk messing up\ncontrol positioning and full window mode. **\n*/\n.video-js {\n  background-color: #000;\n  position: relative;\n  padding: 0;\n  /* Start with 10px for base font size so other dimensions can be em based and\n     easily calculable. */\n  font-size: 10px;\n  /* Allow poster to be vertically aligned. */\n  vertical-align: middle;\n  /*  display: table-cell; */\n  /*This works in Safari but not Firefox.*/\n  /* Provide some basic defaults for fonts */\n  font-weight: normal;\n  font-style: normal;\n  /* Avoiding helvetica: issue #376 */\n  font-family: Arial, sans-serif;\n  /* Turn off user selection (text highlighting) by default.\n     The majority of player components will not be text blocks.\n     Text areas will need to turn user selection back on. */\n  /* user-select */\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n/* Playback technology elements expand to the width/height of the containing div\n    <video> or <object> */\n.video-js .vjs-tech {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n/* Fix for Firefox 9 fullscreen (only if it is enabled). Not needed when\n   checking fullScreenEnabled. */\n.video-js:-moz-full-screen {\n  position: absolute;\n}\n/* Fullscreen Styles */\nbody.vjs-full-window {\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  /* Fix for IE6 full-window. http://www.cssplay.co.uk/layouts/fixed.html */\n  overflow-y: auto;\n}\n.video-js.vjs-fullscreen {\n  position: fixed;\n  overflow: hidden;\n  z-index: 1000;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 100% !important;\n  height: 100% !important;\n  /* IE6 full-window (underscore hack) */\n  _position: absolute;\n}\n.video-js:-webkit-full-screen {\n  width: 100% !important;\n  height: 100% !important;\n}\n.video-js.vjs-fullscreen.vjs-user-inactive {\n  cursor: none;\n}\n/* Poster Styles */\n.vjs-poster {\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: contain;\n  background-color: #000000;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.vjs-poster img {\n  display: block;\n  margin: 0 auto;\n  max-height: 100%;\n  padding: 0;\n  width: 100%;\n}\n/* Hide the poster after the video has started playing */\n.video-js.vjs-has-started .vjs-poster {\n  display: none;\n}\n/* Don't hide the poster if we're playing audio */\n.video-js.vjs-audio.vjs-has-started .vjs-poster {\n  display: block;\n}\n/* Hide the poster when controls are disabled because it's clickable\n    and the native poster can take over */\n.video-js.vjs-controls-disabled .vjs-poster {\n  display: none;\n}\n/* Hide the poster when native controls are used otherwise it covers them */\n.video-js.vjs-using-native-controls .vjs-poster {\n  display: none;\n}\n/* Text Track Styles */\n/* Overall track holder for both captions and subtitles */\n.video-js .vjs-text-track-display {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 3em;\n  right: 0;\n  pointer-events: none;\n}\n/* Captions Settings Dialog */\n.vjs-caption-settings {\n  position: relative;\n  top: 1em;\n  background-color: #000;\n  opacity: 0.75;\n  color: #fff;\n  margin: 0 auto;\n  padding: 0.5em;\n  height: 15em;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 12px;\n  width: 40em;\n}\n.vjs-caption-settings .vjs-tracksettings {\n  top: 0;\n  bottom: 2em;\n  left: 0;\n  right: 0;\n  position: absolute;\n  overflow: auto;\n}\n.vjs-caption-settings .vjs-tracksettings-colors,\n.vjs-caption-settings .vjs-tracksettings-font {\n  float: left;\n}\n.vjs-caption-settings .vjs-tracksettings-colors:after,\n.vjs-caption-settings .vjs-tracksettings-font:after,\n.vjs-caption-settings .vjs-tracksettings-controls:after {\n  clear: both;\n}\n.vjs-caption-settings .vjs-tracksettings-controls {\n  position: absolute;\n  bottom: 1em;\n  right: 1em;\n}\n.vjs-caption-settings .vjs-tracksetting {\n  margin: 5px;\n  padding: 3px;\n  min-height: 40px;\n}\n.vjs-caption-settings .vjs-tracksetting label {\n  display: block;\n  width: 100px;\n  margin-bottom: 5px;\n}\n.vjs-caption-settings .vjs-tracksetting span {\n  display: inline;\n  margin-left: 5px;\n}\n.vjs-caption-settings .vjs-tracksetting > div {\n  margin-bottom: 5px;\n  min-height: 20px;\n}\n.vjs-caption-settings .vjs-tracksetting > div:last-child {\n  margin-bottom: 0;\n  padding-bottom: 0;\n  min-height: 0;\n}\n.vjs-caption-settings label > input {\n  margin-right: 10px;\n}\n.vjs-caption-settings input[type='button'] {\n  width: 40px;\n  height: 40px;\n}\n/* Hide disabled or unsupported controls */\n.vjs-hidden {\n  display: none !important;\n}\n.vjs-lock-showing {\n  display: block !important;\n  opacity: 1;\n  visibility: visible;\n}\n/*  In IE8 w/ no JavaScript (no HTML5 shim), the video tag doesn't register.\n    The .video-js classname on the video tag also isn't considered.\n    This optional paragraph inside the video tag can provide a message to users\n    about what's required to play video. */\n.vjs-no-js {\n  padding: 2em;\n  color: #ccc;\n  background-color: #333;\n  font-size: 1.8em;\n  font-family: Arial, sans-serif;\n  text-align: center;\n  width: 30em;\n  height: 15em;\n  margin: 0 auto;\n}\n.vjs-no-js a,\n.vjs-no-js a:visited {\n  color: #f4a460;\n}\n/* -----------------------------------------------------------------------------\nThe original source of this file lives at\nhttps://github.com/videojs/video.js/blob/master/src/css/video-js.less */\n\n"},214:e=>{"use strict";e.exports="\"use strict\";\n/* jshint ignore:start */\n(function (window, document, vjs, undefined) {\n    /*jshint unused:false */\n    'use strict';\n    var NODE_TYPE_ELEMENT = 1;\n    function noop() { }\n    function isNull(o) {\n        return o === null;\n    }\n    function isDefined(o) {\n        return o !== undefined;\n    }\n    function isUndefined(o) {\n        return o === undefined;\n    }\n    function isObject(obj) {\n        return typeof obj === 'object';\n    }\n    function isFunction(str) {\n        return typeof str === 'function';\n    }\n    function isNumber(num) {\n        return typeof num === 'number';\n    }\n    function isWindow(obj) {\n        return isObject(obj) && obj.window === obj;\n    }\n    function isArray(array) {\n        return Object.prototype.toString.call(array) === '[object Array]';\n    }\n    function isArrayLike(obj) {\n        if (obj === null || isWindow(obj) || isFunction(obj) || isUndefined(obj)) {\n            return false;\n        }\n        var length = obj.length;\n        if (obj.nodeType === NODE_TYPE_ELEMENT && length) {\n            return true;\n        }\n        return isString(obj) || isArray(obj) || length === 0 || (typeof length === 'number' && length > 0 && length - 1 in obj);\n    }\n    function isString(str) {\n        return typeof str === 'string';\n    }\n    function isEmptyString(str) {\n        return isString(str) && str.length === 0;\n    }\n    function isNotEmptyString(str) {\n        return isString(str) && str.length !== 0;\n    }\n    function arrayLikeObjToArray(args) {\n        return Array.prototype.slice.call(args);\n    }\n    function forEach(obj, iterator, context) {\n        var key, length;\n        if (obj) {\n            if (isFunction(obj)) {\n                for (key in obj) {\n                    // Need to check if hasOwnProperty exists,\n                    // as on IE8 the result of querySelectorAll is an object without a hasOwnProperty function\n                    if (key !== 'prototype' &&\n                        key !== 'length' &&\n                        key !== 'name' &&\n                        (!obj.hasOwnProperty || obj.hasOwnProperty(key))) {\n                        iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            }\n            else if (isArray(obj)) {\n                var isPrimitive = typeof obj !== 'object';\n                for (key = 0, length = obj.length; key < length; key++) {\n                    if (isPrimitive || key in obj) {\n                        iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            }\n            else if (obj.forEach && obj.forEach !== forEach) {\n                obj.forEach(iterator, context, obj);\n            }\n            else {\n                for (key in obj) {\n                    if (obj.hasOwnProperty(key)) {\n                        iterator.call(context, obj[key], key, obj);\n                    }\n                }\n            }\n        }\n        return obj;\n    }\n    var SNAKE_CASE_REGEXP = /[A-Z]/g;\n    function snake_case(name, separator) {\n        separator = separator || '_';\n        return name.replace(SNAKE_CASE_REGEXP, function (letter, pos) {\n            return (pos ? separator : '') + letter.toLowerCase();\n        });\n    }\n    function isValidEmail(email) {\n        if (!isString(email)) {\n            return false;\n        }\n        var EMAIL_REGEXP = /^[a-z0-9!#$%&'*+\\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i;\n        return EMAIL_REGEXP.test(email.trim());\n    }\n    function extend(obj) {\n        var arg, i, k;\n        for (i = 1; i < arguments.length; i++) {\n            arg = arguments[i];\n            for (k in arg) {\n                if (arg.hasOwnProperty(k)) {\n                    if (isObject(obj[k]) && !isNull(obj[k]) && isObject(arg[k])) {\n                        obj[k] = extend({}, obj[k], arg[k]);\n                    }\n                    else {\n                        obj[k] = arg[k];\n                    }\n                }\n            }\n        }\n        return obj;\n    }\n    function capitalize(s) {\n        return s.charAt(0).toUpperCase() + s.slice(1);\n    }\n    function decapitalize(s) {\n        return s.charAt(0).toLowerCase() + s.slice(1);\n    }\n    /**\n     * This method works the same way array.prototype.map works but if the transformer returns undefine, then\n     * it won't be added to the transformed Array.\n     */\n    function transformArray(array, transformer) {\n        var transformedArray = [];\n        array.forEach(function (item, index) {\n            var transformedItem = transformer(item, index);\n            if (isDefined(transformedItem)) {\n                transformedArray.push(transformedItem);\n            }\n        });\n        return transformedArray;\n    }\n    function toFixedDigits(num, digits) {\n        var formattedNum = num + '';\n        digits = isNumber(digits) ? digits : 0;\n        num = isNumber(num) ? num : parseInt(num, 10);\n        if (isNumber(num) && !isNaN(num)) {\n            formattedNum = num + '';\n            while (formattedNum.length < digits) {\n                formattedNum = '0' + formattedNum;\n            }\n            return formattedNum;\n        }\n        return NaN + '';\n    }\n    function debounce(callback, wait) {\n        var timeoutId;\n        return function () {\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n            }\n            timeoutId = setTimeout(function () {\n                callback.apply(this, arguments);\n                timeoutId = undefined;\n            }, wait);\n        };\n    }\n    // a function designed to blow up the stack in a naive way\n    // but it is ok for videoJs children components\n    function treeSearch(root, getChildren, found) {\n        var children = getChildren(root);\n        for (var i = 0; i < children.length; i++) {\n            if (found(children[i])) {\n                return children[i];\n            }\n            else {\n                var el = treeSearch(children[i], getChildren, found);\n                if (el) {\n                    return el;\n                }\n            }\n        }\n    }\n    function echoFn(val) {\n        return function () {\n            return val;\n        };\n    }\n    //Note: Supported formats come from http://www.w3.org/TR/NOTE-datetime\n    // and the iso8601 regex comes from http://www.pelagodesign.com/blog/2009/05/20/iso-8601-date-validation-that-doesnt-suck/\n    function isISO8601(value) {\n        if (isNumber(value)) {\n            value = value + ''; //we make sure that we are working with strings\n        }\n        if (!isString(value)) {\n            return false;\n        }\n        /*jslint maxlen: 500 */\n        var iso8086Regex = /^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;\n        return iso8086Regex.test(value.trim());\n    }\n    /**\n     * Checks if the Browser is IE9 and below\n     * @returns {boolean}\n     */\n    function isOldIE() {\n        var version = getInternetExplorerVersion(navigator);\n        if (version === -1) {\n            return false;\n        }\n        return version < 10;\n    }\n    /**\n     * Returns the version of Internet Explorer or a -1 (indicating the use of another browser).\n     * Source: https://msdn.microsoft.com/en-us/library/ms537509(v=vs.85).aspx\n     * @returns {number} the version of Internet Explorer or a -1 (indicating the use of another browser).\n     */\n    function getInternetExplorerVersion(navigator) {\n        var rv = -1;\n        if (navigator.appName == 'Microsoft Internet Explorer') {\n            var ua = navigator.userAgent;\n            var re = new RegExp('MSIE ([0-9]{1,}[.0-9]{0,})');\n            var res = re.exec(ua);\n            if (res !== null) {\n                rv = parseFloat(res[1]);\n            }\n        }\n        return rv;\n    }\n    /*** Mobile Utility functions ***/\n    var _UA = navigator.userAgent;\n    function isIDevice() {\n        return /iP(hone|ad)/.test(_UA);\n    }\n    function isMobile() {\n        return /iP(hone|ad|od)|Android|Windows Phone/.test(_UA);\n    }\n    function isIPhone() {\n        return /iP(hone|od)/.test(_UA);\n    }\n    function isAndroid() {\n        return /Android/.test(_UA);\n    }\n    (function e(t, n, r) {\n        function s(o, u) {\n            if (!n[o]) {\n                if (!t[o]) {\n                    var a = typeof require == 'function' && require;\n                    if (!u && a)\n                        return a(o, !0);\n                    if (i)\n                        return i(o, !0);\n                    var f = new Error(\"Cannot find module '\" + o + \"'\");\n                    throw ((f.code = 'MODULE_NOT_FOUND'), f);\n                }\n                var l = (n[o] = { exports: {} });\n                t[o][0].call(l.exports, function (e) {\n                    var n = t[o][1][e];\n                    return s(n ? n : e);\n                }, l, l.exports, e, t, n, r);\n            }\n            return n[o].exports;\n        }\n        var i = typeof require == 'function' && require;\n        for (var o = 0; o < r.length; o++)\n            s(r[o]);\n        return s;\n    })({\n        1: [\n            function (require, module, exports) {\n                'use strict';\n                var METHODS = [\n                    'handshakeVersion',\n                    'initAd',\n                    'startAd',\n                    'stopAd',\n                    'skipAd', // VPAID 2.0 new method\n                    'resizeAd',\n                    'pauseAd',\n                    'resumeAd',\n                    'expandAd',\n                    'collapseAd',\n                    'subscribe',\n                    'unsubscribe',\n                ];\n                var EVENTS = [\n                    'AdLoaded',\n                    'AdStarted',\n                    'AdStopped',\n                    'AdSkipped',\n                    'AdSkippableStateChange', // VPAID 2.0 new event\n                    'AdSizeChange', // VPAID 2.0 new event\n                    'AdLinearChange',\n                    'AdDurationChange', // VPAID 2.0 new event\n                    'AdExpandedChange',\n                    'AdRemainingTimeChange', // [Deprecated in 2.0] but will be still fired for backwards compatibility\n                    'AdVolumeChange',\n                    'AdImpression',\n                    'AdVideoStart',\n                    'AdVideoFirstQuartile',\n                    'AdVideoMidpoint',\n                    'AdVideoThirdQuartile',\n                    'AdVideoComplete',\n                    'AdClickThru',\n                    'AdInteraction', // VPAID 2.0 new event\n                    'AdUserAcceptInvitation',\n                    'AdUserMinimize',\n                    'AdUserClose',\n                    'AdPaused',\n                    'AdPlaying',\n                    'AdLog',\n                    'AdError',\n                ];\n                var GETTERS = [\n                    'getAdLinear',\n                    'getAdWidth', // VPAID 2.0 new getter\n                    'getAdHeight', // VPAID 2.0 new getter\n                    'getAdExpanded',\n                    'getAdSkippableState', // VPAID 2.0 new getter\n                    'getAdRemainingTime',\n                    'getAdDuration', // VPAID 2.0 new getter\n                    'getAdVolume',\n                    'getAdCompanions', // VPAID 2.0 new getter\n                    'getAdIcons', // VPAID 2.0 new getter\n                ];\n                var SETTERS = ['setAdVolume'];\n                /**\n                 * This callback is displayed as global member. The callback use nodejs error-first callback style\n                 * @callback NodeStyleCallback\n                 * @param {string|null}\n                 * @param {undefined|object}\n                 */\n                /**\n                 * IVPAIDAdUnit\n                 *\n                 * @class\n                 *\n                 * @param {object} creative\n                 * @param {HTMLElement} el\n                 * @param {HTMLVideoElement} video\n                 */\n                function IVPAIDAdUnit(creative, el, video) { }\n                /**\n                 * handshakeVersion\n                 *\n                 * @param {string} VPAIDVersion\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.handshakeVersion = function (VPAIDVersion, callback) { };\n                /**\n                 * initAd\n                 *\n                 * @param {number} width\n                 * @param {number} height\n                 * @param {string} viewMode can be 'normal', 'thumbnail' or 'fullscreen'\n                 * @param {number} desiredBitrate indicates the desired bitrate in kbps\n                 * @param {object} [creativeData] used for additional initialization data\n                 * @param {object} [environmentVars] used for passing implementation-specific of js version\n                 * @param {NodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.initAd = function (width, height, viewMode, desiredBitrate, creativeData, environmentVars, callback) { };\n                /**\n                 * startAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.startAd = function (callback) { };\n                /**\n                 * stopAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.stopAd = function (callback) { };\n                /**\n                 * skipAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.skipAd = function (callback) { };\n                /**\n                 * resizeAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.resizeAd = function (width, height, viewMode, callback) { };\n                /**\n                 * pauseAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.pauseAd = function (callback) { };\n                /**\n                 * resumeAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.resumeAd = function (callback) { };\n                /**\n                 * expandAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.expandAd = function (callback) { };\n                /**\n                 * collapseAd\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.collapseAd = function (callback) { };\n                /**\n                 * subscribe\n                 *\n                 * @param {string} event\n                 * @param {nodeStyleCallback} handler\n                 * @param {object} context\n                 */\n                IVPAIDAdUnit.prototype.subscribe = function (event, handler, context) { };\n                /**\n                 * startAd\n                 *\n                 * @param {string} event\n                 * @param {function} handler\n                 */\n                IVPAIDAdUnit.prototype.unsubscribe = function (event, handler) { };\n                /**\n                 * getAdLinear\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdLinear = function (callback) { };\n                /**\n                 * getAdWidth\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdWidth = function (callback) { };\n                /**\n                 * getAdHeight\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdHeight = function (callback) { };\n                /**\n                 * getAdExpanded\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdExpanded = function (callback) { };\n                /**\n                 * getAdSkippableState\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdSkippableState = function (callback) { };\n                /**\n                 * getAdRemainingTime\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdRemainingTime = function (callback) { };\n                /**\n                 * getAdDuration\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdDuration = function (callback) { };\n                /**\n                 * getAdVolume\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdVolume = function (callback) { };\n                /**\n                 * getAdCompanions\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdCompanions = function (callback) { };\n                /**\n                 * getAdIcons\n                 *\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.getAdIcons = function (callback) { };\n                /**\n                 * setAdVolume\n                 *\n                 * @param {number} volume\n                 * @param {nodeStyleCallback} callback\n                 */\n                IVPAIDAdUnit.prototype.setAdVolume = function (volume, callback) { };\n                addStaticToInterface(IVPAIDAdUnit, 'METHODS', METHODS);\n                addStaticToInterface(IVPAIDAdUnit, 'GETTERS', GETTERS);\n                addStaticToInterface(IVPAIDAdUnit, 'SETTERS', SETTERS);\n                addStaticToInterface(IVPAIDAdUnit, 'EVENTS', EVENTS);\n                var VPAID1_METHODS = METHODS.filter(function (method) {\n                    return ['skipAd'].indexOf(method) === -1;\n                });\n                addStaticToInterface(IVPAIDAdUnit, 'checkVPAIDInterface', function checkVPAIDInterface(creative) {\n                    var result = VPAID1_METHODS.every(function (key) {\n                        return typeof creative[key] === 'function';\n                    });\n                    return result;\n                });\n                module.exports = IVPAIDAdUnit;\n                function addStaticToInterface(Interface, name, value) {\n                    Object.defineProperty(Interface, name, {\n                        writable: false,\n                        configurable: false,\n                        value: value,\n                    });\n                }\n            },\n            {},\n        ],\n        2: [\n            function (require, module, exports) {\n                'use strict';\n                var IVPAIDAdUnit = require('./IVPAIDAdUnit');\n                var Subscriber = require('./subscriber');\n                var checkVPAIDInterface = IVPAIDAdUnit.checkVPAIDInterface;\n                var utils = require('./utils');\n                var METHODS = IVPAIDAdUnit.METHODS;\n                var ERROR = 'AdError';\n                var AD_CLICK = 'AdClickThru';\n                var FILTERED_EVENTS = IVPAIDAdUnit.EVENTS.filter(function (event) {\n                    return event != AD_CLICK;\n                });\n                /**\n                 * This callback is displayed as global member. The callback use nodejs error-first callback style\n                 * @callback NodeStyleCallback\n                 * @param {string|null}\n                 * @param {undefined|object}\n                 */\n                /**\n                 * VPAIDAdUnit\n                 * @class\n                 *\n                 * @param VPAIDCreative\n                 * @param {HTMLElement} [el] this will be used in initAd environmentVars.slot if defined\n                 * @param {HTMLVideoElement} [video] this will be used in initAd environmentVars.videoSlot if defined\n                 */\n                function VPAIDAdUnit(VPAIDCreative, el, video, iframe) {\n                    this._isValid = checkVPAIDInterface(VPAIDCreative);\n                    if (this._isValid) {\n                        this._creative = VPAIDCreative;\n                        this._el = el;\n                        this._videoEl = video;\n                        this._iframe = iframe;\n                        this._subscribers = new Subscriber();\n                        $addEventsSubscribers.call(this);\n                    }\n                }\n                VPAIDAdUnit.prototype = Object.create(IVPAIDAdUnit.prototype);\n                /**\n                 * isValidVPAIDAd will return if the VPAIDCreative passed in constructor is valid or not\n                 *\n                 * @return {boolean}\n                 */\n                VPAIDAdUnit.prototype.isValidVPAIDAd = function isValidVPAIDAd() {\n                    return this._isValid;\n                };\n                IVPAIDAdUnit.METHODS.forEach(function (method) {\n                    //NOTE: this methods arguments order are implemented differently from the spec\n                    var ignores = ['subscribe', 'unsubscribe', 'initAd'];\n                    if (ignores.indexOf(method) !== -1)\n                        return;\n                    VPAIDAdUnit.prototype[method] = function () {\n                        var ariaty = IVPAIDAdUnit.prototype[method].length;\n                        // TODO avoid leaking arguments\n                        // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n                        var args = Array.prototype.slice.call(arguments);\n                        var callback = ariaty === args.length ? args.pop() : undefined;\n                        setTimeout(function () {\n                            var result, error = null;\n                            try {\n                                result = this._creative[method].apply(this._creative, args);\n                            }\n                            catch (e) {\n                                error = e;\n                            }\n                            callOrTriggerEvent(callback, this._subscribers, error, result);\n                        }.bind(this), 0);\n                    };\n                });\n                /**\n                 * initAd concreate implementation\n                 *\n                 * @param {number} width\n                 * @param {number} height\n                 * @param {string} viewMode can be 'normal', 'thumbnail' or 'fullscreen'\n                 * @param {number} desiredBitrate indicates the desired bitrate in kbps\n                 * @param {object} [creativeData] used for additional initialization data\n                 * @param {object} [environmentVars] used for passing implementation-specific of js version, if el & video was used in constructor slot & videoSlot will be added to the object\n                 * @param {NodeStyleCallback} callback\n                 */\n                VPAIDAdUnit.prototype.initAd = function initAd(width, height, viewMode, desiredBitrate, creativeData, environmentVars, callback) {\n                    creativeData = creativeData || {};\n                    environmentVars = utils.extend({\n                        slot: this._el,\n                        videoSlot: this._videoEl,\n                    }, environmentVars || {});\n                    setTimeout(function () {\n                        var error;\n                        try {\n                            this._creative.initAd(width, height, viewMode, desiredBitrate, creativeData, environmentVars);\n                        }\n                        catch (e) {\n                            error = e;\n                        }\n                        callOrTriggerEvent(callback, this._subscribers, error);\n                    }.bind(this), 0);\n                };\n                /**\n                 * subscribe\n                 *\n                 * @param {string} event\n                 * @param {nodeStyleCallback} handler\n                 * @param {object} context\n                 */\n                VPAIDAdUnit.prototype.subscribe = function subscribe(event, handler, context) {\n                    this._subscribers.subscribe(handler, event, context);\n                };\n                /**\n                 * unsubscribe\n                 *\n                 * @param {string} event\n                 * @param {nodeStyleCallback} handler\n                 */\n                VPAIDAdUnit.prototype.unsubscribe = function unsubscribe(event, handler) {\n                    this._subscribers.unsubscribe(handler, event);\n                };\n                //alias\n                VPAIDAdUnit.prototype.on = VPAIDAdUnit.prototype.subscribe;\n                VPAIDAdUnit.prototype.off = VPAIDAdUnit.prototype.unsubscribe;\n                IVPAIDAdUnit.GETTERS.forEach(function (getter) {\n                    VPAIDAdUnit.prototype[getter] = function (callback) {\n                        setTimeout(function () {\n                            var result, error = null;\n                            try {\n                                result = this._creative[getter]();\n                            }\n                            catch (e) {\n                                error = e;\n                            }\n                            callOrTriggerEvent(callback, this._subscribers, error, result);\n                        }.bind(this), 0);\n                    };\n                });\n                /**\n                 * setAdVolume\n                 *\n                 * @param volume\n                 * @param {nodeStyleCallback} callback\n                 */\n                VPAIDAdUnit.prototype.setAdVolume = function setAdVolume(volume, callback) {\n                    setTimeout(function () {\n                        var self = this;\n                        var result, error = null;\n                        try {\n                            this._creative.setAdVolume(volume);\n                        }\n                        catch (e) {\n                            error = e;\n                        }\n                        // Wait for creative volume to be set\n                        setTimeout(function () {\n                            result = self._creative.getAdVolume();\n                            // Commented this code, because, for the new MS skin, a few volume changes may happened\n                            // during 200 msecs. In this case we cannot correctly validate volume value\n                            // related to particular volume change event and ad player may go to the bad state\n                            // for volume controls.\n                            // if (!error) {\n                            //     error = utils.validate(result === volume, 'failed to apply volume: ' + volume);\n                            // }\n                            callOrTriggerEvent(callback, self._subscribers, error, result);\n                        }, 200);\n                    }.bind(this), 0);\n                };\n                VPAIDAdUnit.prototype._destroy = function destroy() {\n                    this.stopAd();\n                    this._subscribers.unsubscribeAll();\n                };\n                function $addEventsSubscribers() {\n                    // some ads implement\n                    // so they only handle one subscriber\n                    // to handle this we create our one\n                    FILTERED_EVENTS.forEach(function (event) {\n                        this._creative.subscribe($trigger.bind(this, event), event);\n                    }.bind(this));\n                    // map the click event to be an object instead of depending of the order of the arguments\n                    this._creative.subscribe($clickThruHook.bind(this), AD_CLICK);\n                    // because we are adding the element inside the iframe\n                    // the user is not able to click in the video\n                    if (this._videoEl) {\n                        var documentElement = this._iframe.contentDocument.documentElement;\n                        var videoEl = this._videoEl;\n                        documentElement.addEventListener('click', function (e) {\n                            if (e.target === documentElement) {\n                                videoEl.click();\n                            }\n                        });\n                    }\n                }\n                function $clickThruHook(url, id, playerHandles) {\n                    this._subscribers.triggerSync(AD_CLICK, { url: url, id: id, playerHandles: playerHandles });\n                }\n                function $trigger(event) {\n                    // TODO avoid leaking arguments\n                    // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n                    this._subscribers.trigger(event, Array.prototype.slice.call(arguments, 1));\n                }\n                function callOrTriggerEvent(callback, subscribers, error, result) {\n                    if (callback) {\n                        callback(error, result);\n                    }\n                    else if (error) {\n                        subscribers.trigger(ERROR, error);\n                    }\n                }\n                module.exports = VPAIDAdUnit;\n            },\n            { './IVPAIDAdUnit': 1, './subscriber': 4, './utils': 5 },\n        ],\n        3: [\n            function (require, module, exports) {\n                'use strict';\n                var utils = require('./utils');\n                var unique = utils.unique('vpaidIframe');\n                var VPAIDAdUnit = require('./VPAIDAdUnit');\n                //var defaultTemplate = \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n</head>\\n<body>\\n    <script type=\\\"text/javascript\\\" src=\\\"{{iframeURL_JS}}\\\"><\/script>\\n    <script>\\n        parent.postMessage('{\\\"event\\\": \\\"ready\\\", \\\"id\\\": \\\"{{iframeID}}\\\"}', window.location.origin);\\n    <\/script>\\n    <div class=\\\"ad-element\\\">\\n    </div>\\n</body>\\n</html>\\n\";\n                var defaultTemplate = '<!DOCTYPE html>\\n<html>\\n <head>\\n </head>\\n <body style=\"margin:0px;overflow:hidden;\">\\n    <script type=\"text/javascript\" src=\"{{iframeURL_JS}}\"><\/script>\\n    <script>\\n        //parent.postMessage(\\'{\"event\": \"ready\", \"id\": \"{{iframeID}}\"}\\', window.location.origin);\\n        //minthe : this should have proper logic for dynamic iframe generates on runtime.\\n        console.log(\"send postmessage\");\\n        parent.postMessage(\\'{\"event\": \"ready\", \"id\": \"{{iframeID}}\"}\\', \"*\");\\n    <\/script>\\n    <div class=\"ad-element\">\\n    </div>\\n</body>\\n</html>\\n';\n                var AD_STOPPED = 'AdStopped';\n                /**\n                 * This callback is displayed as global member. The callback use nodejs error-first callback style\n                 * @callback NodeStyleCallback\n                 * @param {string|null}\n                 * @param {undefined|object}\n                 */\n                /**\n                 * VPAIDHTML5Client\n                 * @class\n                 *\n                 * @param {HTMLElement} el that will contain the iframe to load adUnit and a el to add to adUnit slot\n                 * @param {HTMLVideoElement} video default video element to be used by adUnit\n                 * @param {object} [templateConfig] template: html template to be used instead of the default, extraOptions: to be used when rendering the template\n                 * @param {object} [vpaidOptions] timeout: when loading adUnit\n                 */\n                function VPAIDHTML5Client(el, video, templateConfig, vpaidOptions) {\n                    templateConfig = templateConfig || {};\n                    this._id = unique();\n                    this._destroyed = false;\n                    this._frameContainer = utils.createElementInEl(el, 'div');\n                    this._videoEl = video;\n                    this._vpaidOptions = vpaidOptions || { timeout: 10000 };\n                    this._templateConfig = {\n                        template: templateConfig.template || defaultTemplate,\n                        extraOptions: templateConfig.extraOptions || {},\n                    };\n                }\n                /**\n                 * destroy\n                 *\n                 */\n                VPAIDHTML5Client.prototype.destroy = function destroy() {\n                    if (this._destroyed) {\n                        return;\n                    }\n                    this._destroyed = true;\n                    $unloadPreviousAdUnit.call(this);\n                };\n                /**\n                 * isDestroyed\n                 *\n                 * @return {boolean}\n                 */\n                VPAIDHTML5Client.prototype.isDestroyed = function isDestroyed() {\n                    return this._destroyed;\n                };\n                /**\n                 * loadAdUnit\n                 *\n                 * @param {string} adURL url of the js of the adUnit\n                 * @param {nodeStyleCallback} callback\n                 */\n                VPAIDHTML5Client.prototype.loadAdUnit = function loadAdUnit(adURL, callback) {\n                    $throwIfDestroyed.call(this);\n                    $unloadPreviousAdUnit.call(this);\n                    var frame = utils.createIframeWithContent(this._frameContainer, this._templateConfig.template, utils.extend({\n                        iframeURL_JS: adURL,\n                        iframeID: this.getID(),\n                    }, this._templateConfig.extraOptions));\n                    this._frame = frame;\n                    this._onLoad = utils.callbackTimeout(this._vpaidOptions.timeout, onLoad.bind(this), onTimeout.bind(this));\n                    // Set up user activity detection Hook for the iframe;\n                    handleUserActivityIframeEvents(this._frame);\n                    window.addEventListener('message', this._onLoad);\n                    function onLoad(e) {\n                        console.log('got postMessage from container');\n                        //minthe : this should have proper logic for dynamic iframe generates on runtime.\n                        //don't clear timeout\n                        //if (e.origin !== window.location.origin) return;\n                        var result = JSON.parse(e.data);\n                        //don't clear timeout\n                        if (result.id !== this.getID())\n                            return;\n                        var adUnit, error, createAd;\n                        if (!this._frame.contentWindow) {\n                            error = 'the iframe is not anymore in the DOM tree';\n                        }\n                        else {\n                            createAd = this._frame.contentWindow.getVPAIDAd;\n                            error = utils.validate(typeof createAd === 'function', \"the ad didn't return a function to create an ad\");\n                        }\n                        if (!error) {\n                            var adEl = this._frame.contentWindow.document.querySelector('.ad-element');\n                            adUnit = new VPAIDAdUnit(createAd(), adEl, this._videoEl, this._frame);\n                            adUnit.subscribe(AD_STOPPED, $adDestroyed.bind(this));\n                            error = utils.validate(adUnit.isValidVPAIDAd(), 'the add is not fully complaint with VPAID specification');\n                        }\n                        this._adUnit = adUnit;\n                        $destroyLoadListener.call(this);\n                        callback(error, error ? null : adUnit);\n                        //clear timeout\n                        return true;\n                    }\n                    function onTimeout() {\n                        callback('timeout', null);\n                    }\n                    // VIDLA 1106 + VIDLA 601:\n                    // Root cause for video JS not detecting UserActivity.\n                    // if mousemove and touch events happens inside an iframe,\n                    // then it is not automatically propogated to the player element.\n                    // This code is forcing the mouse and touch event up to video js\n                    // so that useractivity logic works just as for Vast mp4s\n                    function handleUserActivityIframeEvents(iframe) {\n                        // Save any previous handler\n                        var existingOnMouseMove = iframe.contentWindow.onmousemove;\n                        var existingOnMouseOver = iframe.contentWindow.onmouseover;\n                        var existingOnTouchStart = iframe.contentWindow.ontouchstart;\n                        var existingOnTouchEnd = iframe.contentWindow.ontouchend;\n                        iframe.contentWindow.onmousemove = function (e) {\n                            if (existingOnMouseMove)\n                                existingOnMouseMove(e);\n                            forwardMouseEvent(e, 'mousemove');\n                        };\n                        iframe.contentWindow.onmouseover = function (e) {\n                            if (existingOnMouseOver)\n                                existingOnMouseOver(e);\n                            forwardMouseEvent(e, 'mouseover');\n                        };\n                        function forwardMouseEvent(e, nameOfEvent) {\n                            var evt = document.createEvent('MouseEvents');\n                            // We'll need this to offset the mouse move appropriately\n                            var boundingClientRect = iframe.getBoundingClientRect();\n                            // Initialize the event, copying exiting event values\n                            // for the most part\n                            evt.initMouseEvent(nameOfEvent, true, // bubbles\n                            false, // not cancelable\n                            window, e.detail, e.screenX, e.screenY, e.clientX + boundingClientRect.left, e.clientY + boundingClientRect.top, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.button, null // no related element\n                            );\n                            iframe.dispatchEvent(evt);\n                        }\n                        iframe.contentWindow.ontouchstart = function (e) {\n                            if (existingOnTouchStart)\n                                existingOnTouchStart(e);\n                            forwardTouch(e);\n                        };\n                        iframe.contentWindow.ontouchend = function (e) {\n                            if (existingOnTouchEnd)\n                                existingOnTouchEnd(e);\n                            forwardTouch(e);\n                        };\n                        function forwardTouch(e) {\n                            var evt = document.createEvent('HTMLEvents');\n                            evt.initEvent(e.type, true, // bubbles\n                            false, // not cancelable\n                            window);\n                            iframe.dispatchEvent(evt);\n                        }\n                    }\n                };\n                /**\n                 * unloadAdUnit\n                 *\n                 */\n                VPAIDHTML5Client.prototype.unloadAdUnit = function unloadAdUnit() {\n                    $unloadPreviousAdUnit.call(this);\n                };\n                /**\n                 * getID will return the unique id\n                 *\n                 * @return {string}\n                 */\n                VPAIDHTML5Client.prototype.getID = function () {\n                    return this._id;\n                };\n                /**\n                 * $removeEl\n                 *\n                 * @param {string} key\n                 */\n                function $removeEl(key) {\n                    var el = this[key];\n                    if (el) {\n                        el.remove();\n                        delete this[key];\n                    }\n                }\n                function $adDestroyed() {\n                    $removeAdElements.call(this);\n                    delete this._adUnit;\n                }\n                function $unloadPreviousAdUnit() {\n                    $removeAdElements.call(this);\n                    $destroyAdUnit.call(this);\n                }\n                function $removeAdElements() {\n                    $removeEl.call(this, '_frame');\n                    $destroyLoadListener.call(this);\n                }\n                /**\n                 * $destroyLoadListener\n                 *\n                 */\n                function $destroyLoadListener() {\n                    if (this._onLoad) {\n                        window.removeEventListener('message', this._onLoad);\n                        utils.clearCallbackTimeout(this._onLoad);\n                        delete this._onLoad;\n                    }\n                }\n                function $destroyAdUnit() {\n                    if (this._adUnit) {\n                        this._adUnit.stopAd();\n                        delete this._adUnit;\n                    }\n                }\n                /**\n                 * $throwIfDestroyed\n                 *\n                 */\n                function $throwIfDestroyed() {\n                    if (this._destroyed) {\n                        throw new Error('VPAIDHTML5Client already destroyed!');\n                    }\n                }\n                module.exports = VPAIDHTML5Client;\n                window.VPAIDHTML5Client = VPAIDHTML5Client;\n            },\n            { './VPAIDAdUnit': 2, './utils': 5 },\n        ],\n        4: [\n            function (require, module, exports) {\n                'use strict';\n                function Subscriber() {\n                    this._subscribers = {};\n                }\n                Subscriber.prototype.subscribe = function subscribe(handler, eventName, context) {\n                    this.get(eventName).push({ handler: handler, context: context });\n                };\n                Subscriber.prototype.unsubscribe = function unsubscribe(handler, eventName) {\n                    this._subscribers[eventName] = this.get(eventName).filter(function (subscriber) {\n                        return handler === subscriber.handler;\n                    });\n                };\n                Subscriber.prototype.unsubscribeAll = function unsubscribeAll() {\n                    this._subscribers = {};\n                };\n                Subscriber.prototype.trigger = function (eventName, data) {\n                    var that = this;\n                    that.get(eventName).forEach(function (subscriber) {\n                        setTimeout(function () {\n                            if (that.get(eventName)) {\n                                subscriber.handler.call(subscriber.context, data);\n                            }\n                        }, 0);\n                    });\n                };\n                Subscriber.prototype.triggerSync = function (eventName, data) {\n                    this.get(eventName).forEach(function (subscriber) {\n                        subscriber.handler.call(subscriber.context, data);\n                    });\n                };\n                Subscriber.prototype.get = function get(eventName) {\n                    if (!this._subscribers[eventName]) {\n                        this._subscribers[eventName] = [];\n                    }\n                    return this._subscribers[eventName];\n                };\n                module.exports = Subscriber;\n            },\n            {},\n        ],\n        5: [\n            function (require, module, exports) {\n                'use strict';\n                /**\n                 * noop a empty function\n                 */\n                function noop() { }\n                /**\n                 * validate if is not validate will return an Error with the message\n                 *\n                 * @param {boolean} isValid\n                 * @param {string} message\n                 */\n                function validate(isValid, message) {\n                    return isValid ? null : new Error(message);\n                }\n                var timeouts = {};\n                /**\n                 * clearCallbackTimeout\n                 *\n                 * @param {function} func handler to remove\n                 */\n                function clearCallbackTimeout(func) {\n                    var timeout = timeouts[func];\n                    if (timeout) {\n                        clearTimeout(timeout);\n                        delete timeouts[func];\n                    }\n                }\n                /**\n                 * callbackTimeout if the onSuccess is not called and returns true in the timelimit then onTimeout will be called\n                 *\n                 * @param {number} timer\n                 * @param {function} onSuccess\n                 * @param {function} onTimeout\n                 */\n                function callbackTimeout(timer, onSuccess, onTimeout) {\n                    var callback, timeout;\n                    timeout = setTimeout(function () {\n                        onSuccess = noop;\n                        if (!timeouts[callback]) {\n                            // Timeout has already been resolved.\n                            return;\n                        }\n                        delete timeout[callback];\n                        onTimeout();\n                    }, timer);\n                    callback = function () {\n                        // TODO avoid leaking arguments\n                        // https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#32-leaking-arguments\n                        if (onSuccess.apply(this, arguments)) {\n                            clearCallbackTimeout(callback);\n                        }\n                    };\n                    timeouts[callback] = timeout;\n                    return callback;\n                }\n                /**\n                 * createElementInEl\n                 *\n                 * @param {HTMLElement} parent\n                 * @param {string} tagName\n                 * @param {string} id\n                 */\n                function createElementInEl(parent, tagName, id) {\n                    var nEl = document.createElement(tagName);\n                    if (id)\n                        nEl.id = id;\n                    parent.appendChild(nEl);\n                    return nEl;\n                }\n                /**\n                 * createIframeWithContent\n                 *\n                 * @param {HTMLElement} parent\n                 * @param {string} template simple template using {{var}}\n                 * @param {object} data\n                 */\n                function createIframeWithContent(parent, template, data) {\n                    var iframe = createIframe(parent);\n                    if (!setIframeContent(iframe, simpleTemplate(template, data)))\n                        return;\n                    return iframe;\n                }\n                function isSafari() {\n                    return /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i.test(navigator.userAgent.toLowerCase());\n                }\n                /**\n                 * createIframe\n                 *\n                 * @param {HTMLElement} parent\n                 * @param {string} url\n                 */\n                function createIframe(parent, url) {\n                    var nEl = document.createElement('iframe');\n                    if (isSafari()) {\n                        // Sometimes in Safari iframe is created without document element.\n                        // To make sure a document element is created, we use srcdoc property with fake data.\n                        nEl.srcdoc = '<p>.</p>';\n                    }\n                    nEl.src = url || 'about:blank';\n                    nEl.width = '100%';\n                    nEl.height = '100%';\n                    nEl.style.position = 'absolute';\n                    nEl.style.left = '0';\n                    nEl.style.top = '0';\n                    nEl.style.border = '0';\n                    parent.innerHTML = '';\n                    parent.appendChild(nEl);\n                    return nEl;\n                }\n                /**\n                 * simpleTemplate\n                 *\n                 * @param {string} template\n                 * @param {object} data\n                 */\n                function simpleTemplate(template, data) {\n                    Object.keys(data).forEach(function (key) {\n                        var value = typeof value === 'object' ? JSON.stringify(data[key]) : data[key];\n                        template = template.replace(new RegExp('{{' + key + '}}', 'g'), value);\n                    });\n                    return template;\n                }\n                /**\n                 * setIframeContent\n                 *\n                 * @param {HTMLIframeElement} iframeEl\n                 * @param content\n                 */\n                function setIframeContent(iframeEl, content) {\n                    var iframeDoc = iframeEl.contentWindow && iframeEl.contentWindow.document;\n                    if (!iframeDoc)\n                        return false;\n                    iframeDoc.write(content);\n                    return true;\n                }\n                /**\n                 * extend object with keys from another object\n                 *\n                 * @param {object} toExtend\n                 * @param {object} fromSource\n                 */\n                function extend(toExtend, fromSource) {\n                    Object.keys(fromSource).forEach(function (key) {\n                        toExtend[key] = fromSource[key];\n                    });\n                    return toExtend;\n                }\n                /**\n                 * unique will create a unique string everytime is called, sequentially and prefixed\n                 *\n                 * @param {string} prefix\n                 */\n                function unique(prefix) {\n                    var count = -1;\n                    return function () {\n                        return prefix + '_' + ++count;\n                    };\n                }\n                module.exports = {\n                    noop: noop,\n                    validate: validate,\n                    clearCallbackTimeout: clearCallbackTimeout,\n                    callbackTimeout: callbackTimeout,\n                    createElementInEl: createElementInEl,\n                    createIframeWithContent: createIframeWithContent,\n                    createIframe: createIframe,\n                    simpleTemplate: simpleTemplate,\n                    setIframeContent: setIframeContent,\n                    extend: extend,\n                    unique: unique,\n                };\n            },\n            {},\n        ],\n    }, {}, [3]);\n    //Small subset of async\n    var async = {};\n    async.setImmediate = function (fn) {\n        setTimeout(fn, 0);\n    };\n    async.iterator = function (tasks) {\n        var makeCallback = function (index) {\n            var fn = function () {\n                if (tasks.length) {\n                    tasks[index].apply(null, arguments);\n                }\n                return fn.next();\n            };\n            fn.next = function () {\n                return index < tasks.length - 1 ? makeCallback(index + 1) : null;\n            };\n            return fn;\n        };\n        return makeCallback(0);\n    };\n    async.waterfall = function (tasks, callback) {\n        callback = callback || function () { };\n        if (!isArray(tasks)) {\n            var err = new Error('First argument to waterfall must be an array of functions');\n            return callback(err);\n        }\n        if (!tasks.length) {\n            return callback();\n        }\n        var wrapIterator = function (iterator) {\n            return function (err) {\n                if (err) {\n                    callback.apply(null, arguments);\n                    callback = function () { };\n                }\n                else {\n                    var args = Array.prototype.slice.call(arguments, 1);\n                    var next = iterator.next();\n                    if (next) {\n                        args.push(wrapIterator(next));\n                    }\n                    else {\n                        args.push(callback);\n                    }\n                    async.setImmediate(function () {\n                        iterator.apply(null, args);\n                    });\n                }\n            };\n        };\n        wrapIterator(async.iterator(tasks))();\n    };\n    async.when = function (condition, callback) {\n        if (!isFunction(callback)) {\n            throw new Error('async.when error: missing callback argument');\n        }\n        var isAllowed = isFunction(condition)\n            ? condition\n            : function () {\n                return !!condition;\n            };\n        return function () {\n            var args = arrayLikeObjToArray(arguments);\n            var next = args.pop();\n            if (isAllowed.apply(null, args)) {\n                return callback.apply(this, arguments);\n            }\n            args.unshift(null);\n            return next.apply(null, args);\n        };\n    };\n    ('use strict');\n    var dom = {};\n    dom.isVisible = function isVisible(el) {\n        var style = window.getComputedStyle(el);\n        return style.visibility !== 'hidden';\n    };\n    dom.isHidden = function isHidden(el) {\n        var style = window.getComputedStyle(el);\n        return style.display === 'none';\n    };\n    dom.isShown = function isShown(el) {\n        return !dom.isHidden(el);\n    };\n    dom.hide = function hide(el) {\n        el.__prev_style_display_ = el.style.display;\n        el.style.display = 'none';\n    };\n    dom.show = function show(el) {\n        if (dom.isHidden(el)) {\n            el.style.display = el.__prev_style_display_;\n        }\n        el.__prev_style_display_ = undefined;\n    };\n    dom.hasClass = function hasClass(el, cssClass) {\n        var classes, i, len;\n        if (isNotEmptyString(cssClass)) {\n            if (el.classList) {\n                return el.classList.contains(cssClass);\n            }\n            classes = isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n            cssClass = cssClass || '';\n            for (i = 0, len = classes.length; i < len; i += 1) {\n                if (classes[i] === cssClass) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    };\n    dom.addClass = function (el, cssClass) {\n        var classes;\n        if (isNotEmptyString(cssClass)) {\n            if (el.classList) {\n                return el.classList.add(cssClass);\n            }\n            classes = isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n            if (isString(cssClass) && isNotEmptyString(cssClass.replace(/\\s+/, ''))) {\n                classes.push(cssClass);\n                el.setAttribute('class', classes.join(' '));\n            }\n        }\n    };\n    dom.removeClass = function (el, cssClass) {\n        var classes;\n        if (isNotEmptyString(cssClass)) {\n            if (el.classList) {\n                return el.classList.remove(cssClass);\n            }\n            classes = isString(el.getAttribute('class')) ? el.getAttribute('class').split(/\\s+/) : [];\n            var newClasses = [];\n            var i, len;\n            if (isString(cssClass) && isNotEmptyString(cssClass.replace(/\\s+/, ''))) {\n                for (i = 0, len = classes.length; i < len; i += 1) {\n                    if (cssClass !== classes[i]) {\n                        newClasses.push(classes[i]);\n                    }\n                }\n                el.setAttribute('class', newClasses.join(' '));\n            }\n        }\n    };\n    dom.addEventListener = function addEventListener(el, type, handler) {\n        if (isArray(el)) {\n            forEach(el, function (e) {\n                dom.addEventListener(e, type, handler);\n            });\n            return;\n        }\n        if (isArray(type)) {\n            forEach(type, function (t) {\n                dom.addEventListener(el, t, handler);\n            });\n            return;\n        }\n        if (el.addEventListener) {\n            el.addEventListener(type, handler, false);\n        }\n        else if (el.attachEvent) {\n            // WARNING!!! this is a very naive implementation !\n            // the event object that should be passed to the handler\n            // would not be there for IE8\n            // we should use \"window.event\" and then \"event.srcElement\"\n            // instead of \"event.target\"\n            el.attachEvent('on' + type, handler);\n        }\n    };\n    dom.removeEventListener = function removeEventListener(el, type, handler) {\n        if (isArray(el)) {\n            forEach(el, function (e) {\n                dom.removeEventListener(e, type, handler);\n            });\n            return;\n        }\n        if (isArray(type)) {\n            forEach(type, function (t) {\n                dom.removeEventListener(el, t, handler);\n            });\n            return;\n        }\n        if (el.removeEventListener) {\n            el.removeEventListener(type, handler, false);\n        }\n        else if (el.detachEvent) {\n            el.detachEvent('on' + type, handler);\n        }\n        else {\n            el['on' + type] = null;\n        }\n    };\n    dom.dispatchEvent = function dispatchEvent(el, event) {\n        if (el.dispatchEvent) {\n            el.dispatchEvent(event);\n        }\n        else {\n            el.fireEvent('on' + event.eventType, event);\n        }\n    };\n    dom.isDescendant = function isDescendant(parent, child) {\n        var node = child.parentNode;\n        while (node !== null) {\n            if (node === parent) {\n                return true;\n            }\n            node = node.parentNode;\n        }\n        return false;\n    };\n    dom.getTextContent = function getTextContent(el) {\n        return el.textContent || el.text;\n    };\n    dom.prependChild = function prependChild(parent, child) {\n        if (child.parentNode) {\n            child.parentNode.removeChild(child);\n        }\n        return parent.insertBefore(child, parent.firstChild);\n    };\n    dom.remove = function removeNode(node) {\n        if (node && node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    };\n    dom.isDomElement = function isDomElement(o) {\n        return o instanceof Element;\n    };\n    dom.click = function (el, handler) {\n        dom.addEventListener(el, 'click', handler);\n    };\n    dom.once = function (el, type, handler) {\n        function handlerWrap() {\n            handler.apply(null, arguments);\n            dom.removeEventListener(el, type, handlerWrap);\n        }\n        dom.addEventListener(el, type, handlerWrap);\n    };\n    //Note: there is no getBoundingClientRect on iPad so we need a fallback\n    dom.getDimension = function getDimension(element) {\n        var rect;\n        var parentNode = element.parentNode;\n        // VIDLA-910 Always initializing with 1x1 for creative to better deal with falsy cases.\n        // some creatives do not like 0x0 initializations specially inside iframe.\n        var width = 1;\n        var height = 1;\n        if (parentNode) {\n            width = parentNode.clientWidth ? parentNode.clientWidth : width;\n            height = parentNode.clientHeight ? parentNode.clientHeight : height;\n        }\n        else {\n            width = element.offsetWidth ? element.offsetWidth : width;\n            height = element.offsetHeight ? element.offsetHeight : height;\n        }\n        return {\n            width: width,\n            height: height,\n        };\n    };\n    ('use strict');\n    var logger = {};\n    ('use strict');\n    //minthe2 profile\n    var profile = {};\n    profile.timeout = 0;\n    profile.initAdTimestamp = 0;\n    profile.adLoadedTimestamp = 0;\n    profile.startAdTimestamp = 0;\n    profile.adStartedTimestamp = 0;\n    profile.startAdTimeoutReported = false;\n    profile.adImpressionTimestamp = 0;\n    profile.getState = function () {\n        if (profile.adImpressionTimestamp) {\n            return 'adImpression';\n        }\n        if (profile.startAdTimestamp) {\n            return 'startAd';\n        }\n        if (profile.initAdTimestamp) {\n            return 'initAd';\n        }\n        return 'pluginInit';\n    };\n    profile.getRemainingTime = function (type) {\n        var offset = 0;\n        var currTime = new Date().getTime();\n        switch (type) {\n            case 'initAd':\n                offset = currTime - profile.initAdTimestamp;\n                break;\n            case 'AdLoaded':\n                offset = profile.getInitTime();\n                break;\n            case 'startAd':\n                offset = profile.getInitTime();\n                break;\n            case 'AdStarted':\n                offset = profile.getInitTime() + profile.getStartTime();\n                break;\n            case 'AdImpression':\n                offset = profile.getTotalTime();\n                break;\n            default:\n                break;\n        }\n        var remainingTime = profile.timeout - offset;\n        return remainingTime;\n    };\n    profile.getInitTime = function () {\n        var interval = profile.adLoadedTimestamp - profile.initAdTimestamp;\n        return interval;\n    };\n    profile.getStartTime = function () {\n        var interval = profile.adStartedTimestamp - profile.startAdTimestamp;\n        return interval;\n    };\n    profile.getAdImpressionTime = function () {\n        var interval = profile.adImpressionTimestamp - profile.startAdTimestamp;\n        return interval;\n    };\n    profile.getTotalTime = function () {\n        var interval = profile.getInitTime();\n        if (profile.adStartedTimestamp > profile.adImpressionTimestamp) {\n            interval = interval + profile.getStartTime();\n        }\n        else {\n            interval = interval + profile.getAdImpressionTime();\n        }\n        // if (profile.adImpressionTimestamp) {\n        //     interval = interval + profile.getAdImpressionTime();\n        // }\n        return interval;\n    };\n    ('use strict');\n    //minthe2 timer\n    var timer = {};\n    timer.killUnresponsiveCreative = false;\n    timer.responseWaitingTime = 1000;\n    timer.killTimeout = null;\n    timer.adCancelTimeout = 5000;\n    timer.adLoadTimeout = null;\n    timer.adStartTimeout = null;\n    // timer.adImpressionTimeout = null;\n    timer.adStartedResponseTime = 0;\n    timer.adImpressionResponseTime = 0;\n    timer.startKillTimeout = function (adUnit) {\n        if (timer.killUnresponsiveCreative) {\n            // if already timeout is set . cleanup\n            if (timer.killTimeout) {\n                timer.stopKillTimeout();\n            }\n            timer.killTimeout = setTimeout(function () {\n                if (timer.killTimeout) {\n                    logger.log('killUnresponsiveCreative Timeout reached ');\n                    adUnit.stopAd();\n                }\n            }, timer.responseWaitingTime);\n        }\n    };\n    timer.stopKillTimeout = function () {\n        if (!timer.killTimeout) {\n            return;\n        }\n        timer.clearTimeout(timer.killTimeout);\n        timer.killTimeout = null;\n    };\n    timer.handleAdTimeout = function (cb, state) {\n        logger.error('VPAID AD TIMED OUT :: AFTER ' + state + ' ,timeout value : ' + timer.adCancelTimeout);\n        if (cb) {\n            cb(new VASTError('timeout while waiting for the video to start playing', 402));\n        }\n    };\n    timer.clearTimeout = function (timeout) {\n        if (timeout) {\n            clearTimeout(timeout);\n            timeout = null;\n        }\n    };\n    timer.startInitAdTimeout = function (cb) {\n        profile.timeout = timer.adCancelTimeout;\n        profile.initAdTimestamp = new Date().getTime();\n        timer.adLoadTimeout = setTimeout(function () {\n            timer.handleAdTimeout(cb, 'initAd');\n        }, timer.adCancelTimeout);\n    };\n    timer.stopInitAdTimeout = function () {\n        profile.adLoadedTimestamp = new Date().getTime();\n        timer.adStartedResponseTime = timer.adCancelTimeout - profile.getInitTime();\n        timer.clearTimeout(timer.adLoadTimeout);\n    };\n    timer.startStartAdTimeout = function (cb) {\n        profile.startAdTimestamp = new Date().getTime();\n        var timeoutFunction;\n        timeoutFunction = function () {\n            if (profile.startAdTimeoutReported) {\n                // avoid ad start timeout report duplication\n                // in case of'pod' timeout report duplication may destroy next ad slot\n                return;\n            }\n            profile.startAdTimeoutReported = true;\n            if (profile.adStartedTimestamp > 0) {\n                timer.handleAdTimeout(cb, 'AdStarted');\n            }\n            else {\n                timer.handleAdTimeout(cb, 'startAd');\n            }\n        };\n        timer.adStartTimeout = setTimeout(timeoutFunction, timer.adStartedResponseTime);\n    };\n    timer.stopStartAdTimeout = function () {\n        timer.clearTimeout(timer.adStartTimeout);\n        logger.debug('stopStartAdTimeout');\n    };\n    // timer.startAdImpressionTimeout =  function(cb) {\n    //     profile.adImpressionTimestamp = new Date().getTime();\n    //     timer.adImpressionTimeout = setTimeout(function(){\n    //         timer.handleAdTimeout(cb,\"AdStarted\");\n    //     }, timer.adImpressionResponseTime);\n    // };\n    // timer.stopAdImpressionTimeout =  function() {\n    //     profile.adImpressionTimestamp = new Date().getTime();\n    //     timer.clearTimeout(timer.adImpressionTimeout);\n    // };\n    timer.stopAdTimeouts = function () {\n        logger.debug('stopAdTimeouts');\n        timer.clearTimeout(timer.adLoadTimeout);\n        timer.clearTimeout(timer.adStartTimeout);\n        // timer.clearTimeout(timer.adImpressionTimeout);\n    };\n    ('use strict');\n    function HttpRequestError(message) {\n        this.message = 'HttpRequest Error: ' + (message || '');\n    }\n    HttpRequestError.prototype = new Error();\n    HttpRequestError.prototype.name = 'HttpRequest Error';\n    function HttpRequest(createXhr) {\n        if (!isFunction(createXhr)) {\n            throw new HttpRequestError('Missing XMLHttpRequest factory method');\n        }\n        this.createXhr = createXhr;\n    }\n    HttpRequest.prototype.run = function (method, url, callback, options) {\n        sanityCheck(url, callback, options);\n        var timeout, timeoutId;\n        var xhr = this.createXhr();\n        options = options || {};\n        timeout = isNumber(options.timeout) ? options.timeout : 0;\n        xhr.open(method, urlParts(url).href, true);\n        if (options.headers) {\n            setHeaders(xhr, options.headers);\n        }\n        if (options.withCredentials) {\n            xhr.withCredentials = true;\n        }\n        xhr.onload = function () {\n            var statusText, response, status;\n            /**\n             * The only way to do a secure request on IE8 and IE9 is with the XDomainRequest object. Unfortunately, microsoft is\n             * so nice that decided that the status property and the 'getAllResponseHeaders' method where not needed so we have to\n             * fake them. If the request gets done with an XDomainRequest instance, we will assume that there are no headers and\n             * the status will always be 200. If you don't like it, DO NOT USE ANCIENT BROWSERS!!!\n             *\n             * For mor info go to: https://msdn.microsoft.com/en-us/library/cc288060(v=vs.85).aspx\n             */\n            if (!xhr.getAllResponseHeaders) {\n                xhr.getAllResponseHeaders = function () {\n                    return null;\n                };\n            }\n            if (!xhr.status) {\n                xhr.status = 200;\n            }\n            if (isDefined(timeoutId)) {\n                clearTimeout(timeoutId);\n                timeoutId = undefined;\n            }\n            statusText = xhr.statusText || '';\n            // responseText is the old-school way of retrieving response (supported by IE8 & 9)\n            // response/responseType properties were introduced in XHR Level2 spec (supported by IE10)\n            response = 'response' in xhr ? xhr.response : xhr.responseText;\n            // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)\n            status = xhr.status === 1223 ? 204 : xhr.status;\n            callback(status, response, xhr.getAllResponseHeaders(), statusText);\n        };\n        xhr.onerror = requestError;\n        xhr.onabort = requestError;\n        xhr.send();\n        if (timeout > 0) {\n            timeoutId = setTimeout(function () {\n                xhr && xhr.abort();\n            }, timeout);\n        }\n        function sanityCheck(url, callback, options) {\n            if (!isString(url) || isEmptyString(url)) {\n                throw new HttpRequestError(\"Invalid url '\" + url + \"'\");\n            }\n            if (!isFunction(callback)) {\n                throw new HttpRequestError(\"Invalid handler '\" + callback + \"' for the http request\");\n            }\n            if (isDefined(options) && !isObject(options)) {\n                throw new HttpRequestError(\"Invalid options map '\" + options + \"'\");\n            }\n        }\n        function setHeaders(xhr, headers) {\n            forEach(headers, function (value, key) {\n                if (isDefined(value)) {\n                    xhr.setRequestHeader(key, value);\n                }\n            });\n        }\n        function requestError() {\n            callback(-1, null, null, '');\n        }\n    };\n    HttpRequest.prototype.get = function (url, callback, options) {\n        this.run('GET', url, processResponse, options);\n        function processResponse(status, response, headersString, statusText) {\n            if (isSuccess(status)) {\n                callback(null, response, status, headersString, statusText);\n            }\n            else {\n                callback(new HttpRequestError(statusText), response, status, headersString, statusText);\n            }\n        }\n        function isSuccess(status) {\n            return 200 <= status && status < 300;\n        }\n    };\n    function createXhr() {\n        var xhr = new XMLHttpRequest();\n        if (!('withCredentials' in xhr)) {\n            // XDomainRequest for IE.\n            xhr = new XDomainRequest();\n        }\n        return xhr;\n    }\n    var http = new HttpRequest(createXhr);\n    var playerUtils = {};\n    /**\n     * Returns an object that captures the portions of player state relevant to\n     * video playback. The result of this function can be passed to\n     * restorePlayerSnapshot with a player to return the player to the state it\n     * was in when this function was invoked.\n     * @param {object} player The videojs player object\n     */\n    playerUtils.getPlayerSnapshot = function getPlayerSnapshot(player) {\n        var tech = player.el().querySelector('.vjs-tech');\n        var snapshot = {\n            ended: player.ended(),\n            src: player.currentSrc(),\n            currentTime: player.currentTime(),\n            type: player.currentType(),\n            playing: !player.paused(),\n            suppressedTracks: getSuppressedTracks(player),\n        };\n        if (tech) {\n            snapshot.nativePoster = tech.poster;\n            snapshot.style = tech.getAttribute('style');\n        }\n        return snapshot;\n        /**** Local Functions ****/\n        function getSuppressedTracks(player) {\n            var tracks = player.remoteTextTracks ? player.remoteTextTracks() : [];\n            if (tracks && isArray(tracks.tracks_)) {\n                tracks = tracks.tracks_;\n            }\n            if (!isArray(tracks)) {\n                tracks = [];\n            }\n            var suppressedTracks = [];\n            tracks.forEach(function (track) {\n                suppressedTracks.push({\n                    track: track,\n                    mode: track.mode,\n                });\n                track.mode = 'disabled';\n            });\n            return suppressedTracks;\n        }\n    };\n    /**\n     * Attempts to modify the specified player so that its state is equivalent to\n     * the state of the snapshot.\n     * @param {object} snapshot - the player state to apply\n     */\n    playerUtils.restorePlayerSnapshot = function restorePlayerSnapshot(player, snapshot) {\n        var tech = player.el().querySelector('.vjs-tech');\n        var attempts = 20; // the number of remaining attempts to restore the snapshot\n        if (snapshot.nativePoster) {\n            tech.poster = snapshot.nativePoster;\n        }\n        if ('style' in snapshot) {\n            // overwrite all css style properties to restore state precisely\n            tech.setAttribute('style', snapshot.style || '');\n        }\n        if (hasSrcChanged(player, snapshot)) {\n            // on ios7, fiddling with textTracks too early will cause safari to crash\n            player.one('contentloadedmetadata', restoreTracks);\n            player.one('canplay', tryToResume);\n            ensureCanplayEvtGetsFired();\n            // if the src changed for ad playback, reset it\n            player.src({ src: snapshot.src, type: snapshot.type });\n            // safari requires a call to `load` to pick up a changed source\n            player.load();\n        }\n        else {\n            restoreTracks();\n            if (snapshot.playing) {\n                player.play();\n            }\n        }\n        /*** Local Functions ***/\n        /**\n         * Sometimes firefox does not trigger the 'canplay' evt.\n         * This code ensure that it always gets triggered triggered.\n         */\n        function ensureCanplayEvtGetsFired() {\n            var timeoutId = setTimeout(function () {\n                player.trigger('canplay');\n            }, 1000);\n            player.one('canplay', function () {\n                clearTimeout(timeoutId);\n            });\n        }\n        /**\n         * Determine whether the player needs to be restored to its state\n         * before ad playback began. With a custom ad display or burned-in\n         * ads, the content player state hasn't been modified and so no\n         * restoration is required\n         */\n        function hasSrcChanged(player, snapshot) {\n            if (player.src()) {\n                return player.src() !== snapshot.src;\n            }\n            // the player was configured through source element children\n            return player.currentSrc() !== snapshot.src;\n        }\n        function restoreTracks() {\n            var suppressedTracks = snapshot.suppressedTracks;\n            suppressedTracks.forEach(function (trackSnapshot) {\n                trackSnapshot.track.mode = trackSnapshot.mode;\n            });\n        }\n        /**\n         * Determine if the video element has loaded enough of the snapshot source\n         * to be ready to apply the rest of the state\n         */\n        function tryToResume() {\n            if (playerUtils.isReadyToResume(tech)) {\n                // if some period of the video is seekable, resume playback\n                return resume();\n            }\n            // delay a bit and then check again unless we're out of attempts\n            if (attempts--) {\n                setTimeout(tryToResume, 50);\n            }\n            else {\n                (function () {\n                    try {\n                        resume();\n                    }\n                    catch (e) {\n                        videojs.log.warn('Failed to resume the content after an advertisement', e);\n                    }\n                })();\n            }\n            /*** Local functions ***/\n            function resume() {\n                player.currentTime(snapshot.currentTime);\n                if (snapshot.playing) {\n                    player.play();\n                }\n            }\n        }\n    };\n    playerUtils.isReadyToResume = function (tech) {\n        if (tech.readyState > 1) {\n            // some browsers and media aren't \"seekable\".\n            // readyState greater than 1 allows for seeking without exceptions\n            return true;\n        }\n        if (tech.seekable === undefined) {\n            // if the tech doesn't expose the seekable time ranges, try to\n            // resume playback immediately\n            return true;\n        }\n        if (tech.seekable.length > 0) {\n            // if some period of the video is seekable, resume playback\n            return true;\n        }\n        return false;\n    };\n    /**\n     * This function prepares the player to display ads.\n     * Adding convenience events like the 'vast.firsPlay' that gets fired when the video is first played\n     * and ads the blackPoster to the player to prevent content from being displayed before the preroll ad.\n     *\n     * @param player\n     */\n    playerUtils.prepareForAds = function (player, disableMonkeyPatchPlayerApi) {\n        var blackPoster = player.addChild('blackPoster');\n        var _firstPlay = true;\n        var volumeSnapshot;\n        var originalPlay;\n        var originalPause;\n        var originalPaused;\n        // VID-1955 Causes Interference with Waterfall playback\n        // VIDLA-853 Causes Interference with Mobile App playback\n        if (!disableMonkeyPatchPlayerApi) {\n            monkeyPatchPlayerApi();\n        }\n        player.on('play', tryToTriggerFirstPlay);\n        player.on('vast.reset', resetFirstPlay); //Every time we change the sources we reset the first play.\n        player.on('vast.firstPlay', restoreContentVolume);\n        player.on('error', hideBlackPoster); //If there is an error in the player we remove the blackposter to show the err msg\n        player.on('vast.adStart', hideBlackPoster);\n        player.on('vast.adsCancel', hideBlackPoster);\n        player.on('vast.adError', hideBlackPoster);\n        player.on('vast.adStart', addStyles);\n        player.on('vast.adEnd', removeStyles);\n        player.on('vast.adsCancel', removeStyles);\n        /*** Local Functions ***/\n        /**\n             What this function does is ugly and horrible and I should think twice before calling myself a good developer. With that said,\n             it is the best solution I could find to mute the video until the 'play' event happens (on mobile devices) and the plugin can decide whether\n             to play the ad or not.\n    \n             We also need this monkeypatch to be able to pause and resume an ad using the player's API\n    \n             If you have a better solution please do tell me.\n             */\n        function monkeyPatchPlayerApi() {\n            /**\n             * Monkey patch needed to handle firstPlay and resume of playing ad.\n             *\n             * @param prepareForAds necessary flag to prevent infinite loop when you are restoring a VAST ad.\n             * @returns {player}\n             */\n            var origPlay = player.play;\n            originalPlay = origPlay;\n            player.play = function (callOrigPlay) {\n                if (isFirstPlay()) {\n                    firstPlay.call(this);\n                }\n                else {\n                    resume.call(this, callOrigPlay);\n                }\n                return this;\n                /*** local functions ***/\n                function firstPlay() {\n                    if (!isIPhone()) {\n                        volumeSnapshot = saveVolumeSnapshot();\n                        player.muted(true);\n                    }\n                    // Do not call play on the video element instead just trigger startAd and the creative will call play as it is suppose to.\n                    // VID-2515 Force the enabling of the spinner. As we do not call actual play the wait state to trigger spinner never gets activated until its too late.\n                    player.addClass('vjs-waiting');\n                    player.trigger('firstplay');\n                    player.trigger('play');\n                }\n                function resume(callOrigPlay) {\n                    if (isAdPlaying() && !callOrigPlay) {\n                        player.vast.adUnit.resumeAd();\n                    }\n                    else {\n                        origPlay.apply(this, arguments);\n                    }\n                }\n            };\n            /**\n             * Needed monkey patch to handle pause of playing ad.\n             *\n             * @param callOrigPlay necessary flag to prevent infinite loop when you are pausing a VAST ad.\n             * @returns {player}\n             */\n            var origPause = player.pause;\n            originalPause = origPause;\n            player.pause = function (callOrigPause) {\n                if (isAdPlaying() && !callOrigPause) {\n                    player.vast.adUnit.pauseAd();\n                }\n                else {\n                    origPause.apply(this, arguments);\n                }\n                return this;\n            };\n            /**\n             * Needed monkey patch to handle paused state of the player when ads are playing.\n             *\n             * @param callOrigPlay necessary flag to prevent infinite loop when you are pausing a VAST ad.\n             * @returns {player}\n             */\n            var origPaused = player.paused;\n            originalPaused = origPaused;\n            player.paused = function (callOrigPaused) {\n                if (isAdPlaying() && !callOrigPaused) {\n                    return player.vast.adUnit.isPaused();\n                }\n                return origPaused.apply(this, arguments);\n            };\n        }\n        function isAdPlaying() {\n            return player.vast && player.vast.adUnit;\n        }\n        function tryToTriggerFirstPlay() {\n            if (isFirstPlay()) {\n                _firstPlay = false;\n                player.trigger('vast.firstPlay');\n            }\n        }\n        function reserOriginals() {\n            if (originalPlay) {\n                player.play = originalPlay;\n            }\n            if (originalPause) {\n                player.pause = originalPause;\n            }\n            if (originalPaused) {\n                player.paused = originalPaused;\n            }\n        }\n        function resetFirstPlay() {\n            _firstPlay = true;\n            reserOriginals();\n            blackPoster.show();\n            restoreContentVolume();\n        }\n        function isFirstPlay() {\n            return _firstPlay;\n        }\n        function saveVolumeSnapshot() {\n            return {\n                muted: player.muted(),\n                volume: player.volume(),\n            };\n        }\n        function restoreContentVolume() {\n            if (volumeSnapshot) {\n                player.currentTime(0);\n                restoreVolumeSnapshot(volumeSnapshot);\n                volumeSnapshot = null;\n            }\n        }\n        function restoreVolumeSnapshot(snapshot) {\n            if (isObject(snapshot)) {\n                player.volume(snapshot.volume);\n                player.muted(snapshot.muted);\n            }\n        }\n        function hideBlackPoster() {\n            if (!dom.hasClass(blackPoster.el(), 'vjs-hidden')) {\n                blackPoster.hide();\n            }\n        }\n        function addStyles() {\n            dom.addClass(player.el(), 'vjs-ad-playing');\n        }\n        function removeStyles() {\n            dom.removeClass(player.el(), 'vjs-ad-playing');\n        }\n    };\n    /**\n     * Remove the poster attribute from the video element tech, if present. When\n     * reusing a video element for multiple videos, the poster image will briefly\n     * reappear while the new source loads. Removing the attribute ahead of time\n     * prevents the poster from showing up between videos.\n     * @param {object} player The videojs player object\n     */\n    playerUtils.removeNativePoster = function (player) {\n        var tech = player.el().querySelector('.vjs-tech');\n        if (tech) {\n            tech.removeAttribute('poster');\n        }\n    };\n    /**\n     * Helper function to listen to many events until one of them gets fired, then we\n     * execute the handler and unsubscribe all the event listeners;\n     *\n     * @param player specific player from where to listen for the events\n     * @param events array of events\n     * @param handler function to execute once one of the events fires\n     */\n    playerUtils.once = function once(player, events, handler) {\n        function listener() {\n            handler.apply(null, arguments);\n            events.forEach(function (event) {\n                player.off(event, listener);\n            });\n        }\n        events.forEach(function (event) {\n            player.on(event, listener);\n        });\n    };\n    ('use strict');\n    /**\n     * documentMode is an IE-only property\n     * http://msdn.microsoft.com/en-us/library/ie/cc196988(v=vs.85).aspx\n     */\n    var msie = document.documentMode;\n    /**\n     *\n     * IMPORTANT NOTE: This function comes from angularJs and was originally called urlResolve\n     *                 you can take a look at the original code here https://github.com/angular/angular.js/blob/master/src/ng/urlUtils.js\n     *\n     * Implementation Notes for non-IE browsers\n     * ----------------------------------------\n     * Assigning a URL to the href property of an anchor DOM node, even one attached to the DOM,\n     * results both in the normalizing and parsing of the URL.  Normalizing means that a relative\n     * URL will be resolved into an absolute URL in the context of the application document.\n     * Parsing means that the anchor node's host, hostname, protocol, port, pathname and related\n     * properties are all populated to reflect the normalized URL.  This approach has wide\n     * compatibility - Safari 1+, Mozilla 1+, Opera 7+,e etc.  See\n     * http://www.aptana.com/reference/html/api/HTMLAnchorElement.html\n     *\n     * Implementation Notes for IE\n     * ---------------------------\n     * IE >= 8 and <= 10 normalizes the URL when assigned to the anchor node similar to the other\n     * browsers.  However, the parsed components will not be set if the URL assigned did not specify\n     * them.  (e.g. if you assign a.href = \"foo\", then a.protocol, a.host, etc. will be empty.)  We\n     * work around that by performing the parsing in a 2nd step by taking a previously normalized\n     * URL (e.g. by assigning to a.href) and assigning it a.href again.  This correctly populates the\n     * properties such as protocol, hostname, port, etc.\n     *\n     * IE7 does not normalize the URL when assigned to an anchor node.  (Apparently, it does, if one\n     * uses the inner HTML approach to assign the URL as part of an HTML snippet -\n     * http://stackoverflow.com/a/472729)  However, setting img[src] does normalize the URL.\n     * Unfortunately, setting img[src] to something like \"javascript:foo\" on IE throws an exception.\n     * Since the primary usage for normalizing URLs is to sanitize such URLs, we can't use that\n     * method and IE < 8 is unsupported.\n     *\n     * References:\n     *   http://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement\n     *   http://www.aptana.com/reference/html/api/HTMLAnchorElement.html\n     *   http://url.spec.whatwg.org/#urlutils\n     *   https://github.com/angular/angular.js/pull/2902\n     *   http://james.padolsey.com/javascript/parsing-urls-with-the-dom/\n     *\n     * @kind function\n     * @param {string} url The URL to be parsed.\n     * @description Normalizes and parses a URL.\n     * @returns {object} Returns the normalized URL as a dictionary.\n     *\n     *   | member name   | Description    |\n     *   |---------------|----------------|\n     *   | href          | A normalized version of the provided URL if it was not an absolute URL |\n     *   | protocol      | The protocol including the trailing colon                              |\n     *   | host          | The host and port (if the port is non-default) of the normalizedUrl    |\n     *   | search        | The search params, minus the question mark                             |\n     *   | hash          | The hash string, minus the hash symbol\n     *   | hostname      | The hostname\n     *   | port          | The port, without \":\"\n     *   | pathname      | The pathname, beginning with \"/\"\n     *\n     */\n    var urlParsingNode = document.createElement('a');\n    function urlParts(url) {\n        var href = url;\n        if (msie) {\n            // Normalize before parse.  Refer Implementation Notes on why this is\n            // done in two steps on IE.\n            urlParsingNode.setAttribute('href', href);\n            href = urlParsingNode.href;\n        }\n        urlParsingNode.setAttribute('href', href);\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n            href: urlParsingNode.href,\n            protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n            host: urlParsingNode.host,\n            search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n            hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n            hostname: urlParsingNode.hostname,\n            port: isNotEmptyString(urlParsingNode.port) ? urlParsingNode.port : 80,\n            pathname: urlParsingNode.pathname.charAt(0) === '/' ? urlParsingNode.pathname : '/' + urlParsingNode.pathname,\n        };\n    }\n    /**\n     * This function accepts a query string (search part of a url) and returns a dictionary with\n     * the different key value pairs\n     * @param {string} qs queryString\n     */\n    function queryStringToObj(qs, cond) {\n        var pairs, qsObj;\n        cond = isFunction(cond)\n            ? cond\n            : function () {\n                return true;\n            };\n        qs = qs.trim().replace(/^\\?/, '');\n        pairs = qs.split('&');\n        qsObj = {};\n        forEach(pairs, function (pair) {\n            var keyValue, key, value;\n            if (pair !== '') {\n                keyValue = pair.split('=');\n                key = keyValue[0];\n                value = keyValue[1];\n                if (cond(key, value)) {\n                    qsObj[key] = value;\n                }\n            }\n        });\n        return qsObj;\n    }\n    /**\n     * This function accepts an object and serializes it into a query string without the leading '?'\n     * @param obj\n     * @returns {string}\n     */\n    function objToQueryString(obj) {\n        var pairs = [];\n        forEach(obj, function (value, key) {\n            pairs.push(key + '=' + value);\n        });\n        return pairs.join('&');\n    }\n    var xml = {};\n    xml.strToXMLDoc = function strToXMLDoc(stringContainingXMLSource) {\n        //IE 8\n        if (typeof window.DOMParser === 'undefined') {\n            var xmlDocument = new ActiveXObject('Microsoft.XMLDOM');\n            xmlDocument.async = false;\n            xmlDocument.loadXML(stringContainingXMLSource);\n            return xmlDocument;\n        }\n        return parseString(stringContainingXMLSource);\n        function parseString(stringContainingXMLSource) {\n            var parser = new DOMParser();\n            var parsedDocument;\n            //Note: This try catch is to deal with the fact that on IE parser.parseFromString does throw an error but the rest of the browsers don't.\n            try {\n                parsedDocument = parser.parseFromString(stringContainingXMLSource, 'application/xml');\n                if (isParseError(parsedDocument) || isEmptyString(stringContainingXMLSource)) {\n                    throw new Error();\n                }\n            }\n            catch (e) {\n                throw new Error(\"xml.strToXMLDOC: Error parsing the string: '\" + stringContainingXMLSource + \"'\");\n            }\n            return parsedDocument;\n        }\n        function isParseError(parsedDocument) {\n            try {\n                // parser and parsererrorNS could be cached on startup for efficiency\n                var parser = new DOMParser(), errorneousParse = parser.parseFromString('INVALID', 'text/xml'), parsererrorNS = errorneousParse.getElementsByTagName('parsererror')[0].namespaceURI;\n                if (parsererrorNS === 'http://www.w3.org/1999/xhtml') {\n                    // In PhantomJS the parseerror element doesn't seem to have a special namespace, so we are just guessing here :(\n                    return parsedDocument.getElementsByTagName('parsererror').length > 0;\n                }\n                return parsedDocument.getElementsByTagNameNS(parsererrorNS, 'parsererror').length > 0;\n            }\n            catch (e) {\n                //Note on IE parseString throws an error by itself and it will never reach this code. Because it will have failed before\n            }\n        }\n    };\n    xml.parseText = function parseText(sValue) {\n        if (/^\\s*$/.test(sValue)) {\n            return null;\n        }\n        if (/^(?:true|false)$/i.test(sValue)) {\n            return sValue.toLowerCase() === 'true';\n        }\n        if (isFinite(sValue)) {\n            return parseFloat(sValue);\n        }\n        if (isISO8601(sValue)) {\n            return new Date(sValue);\n        }\n        return sValue.trim();\n    };\n    xml.JXONTree = function JXONTree(oXMLParent) {\n        var parseText = xml.parseText;\n        //The document object is an especial object that it may miss some functions or attrs depending on the browser.\n        //To prevent this problem with create the JXONTree using the root childNode which is a fully fleshed node on all supported\n        //browsers.\n        if (oXMLParent.documentElement) {\n            return new xml.JXONTree(oXMLParent.documentElement);\n        }\n        if (oXMLParent.hasChildNodes()) {\n            var sCollectedTxt = '';\n            for (var oNode, sProp, vContent, nItem = 0; nItem < oXMLParent.childNodes.length; nItem++) {\n                oNode = oXMLParent.childNodes.item(nItem);\n                /*jshint bitwise: false*/\n                if (((oNode.nodeType - 1) | 1) === 3) {\n                    sCollectedTxt += oNode.nodeType === 3 ? oNode.nodeValue.trim() : oNode.nodeValue;\n                }\n                else if (oNode.nodeType === 1 && !oNode.prefix) {\n                    sProp = decapitalize(oNode.nodeName);\n                    vContent = new xml.JXONTree(oNode);\n                    if (this.hasOwnProperty(sProp)) {\n                        if (this[sProp].constructor !== Array) {\n                            this[sProp] = [this[sProp]];\n                        }\n                        this[sProp].push(vContent);\n                    }\n                    else {\n                        this[sProp] = vContent;\n                    }\n                }\n            }\n            if (sCollectedTxt) {\n                this.keyValue = parseText(sCollectedTxt);\n            }\n        }\n        //IE8 Stupid fix\n        var hasAttr = typeof oXMLParent.hasAttributes === 'undefined' ? oXMLParent.attributes.length > 0 : oXMLParent.hasAttributes();\n        if (hasAttr) {\n            var oAttrib;\n            for (var nAttrib = 0; nAttrib < oXMLParent.attributes.length; nAttrib++) {\n                oAttrib = oXMLParent.attributes.item(nAttrib);\n                this['@' + decapitalize(oAttrib.name)] = parseText(oAttrib.value.trim());\n            }\n        }\n    };\n    xml.JXONTree.prototype.attr = function (attr) {\n        return this['@' + decapitalize(attr)];\n    };\n    xml.toJXONTree = function toJXONTree(xmlString) {\n        var xmlDoc = xml.strToXMLDoc(xmlString);\n        return new xml.JXONTree(xmlDoc);\n    };\n    /**\n     * Helper function to extract the keyvalue of a JXONTree obj\n     *\n     * @param xmlObj {JXONTree}\n     * return the key value or undefined;\n     */\n    xml.keyValue = function getKeyValue(xmlObj) {\n        if (xmlObj) {\n            return xmlObj.keyValue;\n        }\n        return undefined;\n    };\n    xml.attr = function getAttrValue(xmlObj, attr) {\n        if (xmlObj) {\n            return xmlObj['@' + decapitalize(attr)];\n        }\n        return undefined;\n    };\n    xml.encode = function encodeXML(str) {\n        return str\n            .replace(/&/g, '&amp;')\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')\n            .replace(/\"/g, '&quot;')\n            .replace(/'/g, '&apos;');\n    };\n    xml.decode = function decodeXML(str) {\n        return str\n            .replace(/&apos;/g, \"'\")\n            .replace(/&quot;/g, '\"')\n            .replace(/&gt;/g, '>')\n            .replace(/&lt;/g, '<')\n            .replace(/&amp;/g, '&');\n    };\n    //minthe : initalize vastClient\n    vjs.plugin('vastClient', function VASTPlugin(options) {\n        var snapshot;\n        var player = this;\n        var vast = new VASTClient();\n        var adsCanceled = false;\n        var defaultOpts = {\n            // maximum amount of time in ms to wait to receive `adsready` from the ad\n            // implementation after play has been requested. Ad implementations are\n            // expected to load any dynamic libraries and make any requests to determine\n            // ad policies for a video during this time.\n            timeout: 500,\n            //TODO:finish this IOS FIX\n            //Whenever you play an add on IOS, the native player kicks in and we loose control of it. On very heavy pages the 'play' event\n            // May occur after the video content has already started. This is wrong if you want to play a preroll ad that needs to happen before the user\n            // starts watching the content. To prevent this usec\n            iosPrerollCancelTimeout: 2000,\n            // maximun amount of time for the ad to actually start playing. If this timeout gets\n            // triggered the ads will be cancelled\n            adCancelTimeout: 5000,\n            // Boolean flag that configures the player to play a new ad before the user sees the video again\n            // the current video\n            playAdAlways: false,\n            // Flag to enable or disable the ads by default.\n            adsEnabled: true,\n            // Boolean flag to enable or disable the resize with window.resize or orientationchange\n            autoResize: true,\n            //Boolean flag to enable/disable Controls on mouse over/out.\n            disableControlsOnMouseover: false,\n            initialAudio: 'off',\n            overlayPlayer: false,\n            mobileSDK: false,\n            controlBarPosition: 'below',\n            isXandrVastPlayer: false,\n        };\n        var settings = extend({}, defaultOpts, options || {});\n        if (isUndefined(settings.adTagUrl) && isDefined(settings.url)) {\n            settings.adTagUrl = settings.url;\n        }\n        if (isString(settings.adTagUrl)) {\n            settings.adTagUrl = echoFn(settings.adTagUrl);\n        }\n        if (isDefined(settings.adTagXML) && !isFunction(settings.adTagXML)) {\n            return trackAdError(new VASTError('on VideoJS VAST plugin, the passed adTagXML option does not contain a function'));\n        }\n        if (!isDefined(settings.adTagUrl) && !isFunction(settings.adTagXML)) {\n            return trackAdError(new VASTError('on VideoJS VAST plugin, missing adTagUrl on options object'));\n        }\n        var disableMonkeyPatchPlayerApi = settings.mobileSDK;\n        playerUtils.prepareForAds(player, disableMonkeyPatchPlayerApi);\n        if (settings.playAdAlways) {\n            // No matter what happens we play a new ad before the user sees the video again.\n            player.on('vast.contentEnd', function () {\n                setTimeout(function () {\n                    player.trigger('vast.reset');\n                }, 0);\n            });\n        }\n        player.on('vast.firstPlay', tryToPlayPrerollAd);\n        player.on('vast.reset', function () {\n            //If we are reseting the plugin, we don't want to restore the content\n            snapshot = null;\n            cancelAds();\n        });\n        player.vast = {\n            isEnabled: function () {\n                return settings.adsEnabled;\n            },\n            enable: function () {\n                settings.adsEnabled = true;\n            },\n            disable: function () {\n                settings.adsEnabled = false;\n            },\n        };\n        if (settings.loggerCallback) {\n            logger = settings.loggerCallback;\n        }\n        else {\n            logger = console;\n        }\n        if (settings.terminateUnresponsiveVPAIDCreative) {\n            timer.killUnresponsiveCreative = true;\n        }\n        if (settings.adCancelTimeout) {\n            timer.adCancelTimeout = settings.adCancelTimeout;\n        }\n        var vastResponse = getAnVastXml();\n        var adIntegrator = isVPAID(vastResponse) ? new VPAIDIntegrator(player, settings) : new VASTIntegrator(player);\n        if (settings.delayExpandUntilVPAIDInit) {\n            checkAd(); //minthe : invoke init method of vpaid creative here in order to check valid ad, at the end of this checkAd process it will dispatch custom event which is called \"an.readytogovpaid\"\n        }\n        return player.vast;\n        /**** Local functions ****/\n        function tryToPlayPrerollAd() {\n            //We remove the poster to prevent flickering whenever the content starts playing\n            playerUtils.removeNativePoster(player);\n            playerUtils.once(player, ['vast.adsCancel', 'vast.adEnd'], function () {\n                removeAdUnit();\n                restoreVideoContent();\n            });\n            async.waterfall([checkAdsEnabled, preparePlayerForAd, playPrerollAd], function (error, response) {\n                if (error) {\n                    trackAdError(error, response);\n                }\n                else {\n                    player.trigger('vast.adEnd');\n                }\n            });\n            /*** Local functions ***/\n            function removeAdUnit() {\n                if (player.vast && player.vast.adUnit) {\n                    player.vast.adUnit = null; //We remove the adUnit\n                }\n            }\n            function restoreVideoContent() {\n                setupContentEvents();\n                if (snapshot) {\n                    playerUtils.restorePlayerSnapshot(player, snapshot);\n                    snapshot = null;\n                }\n            }\n            function setupContentEvents() {\n                playerUtils.once(player, ['playing', 'vast.reset', 'vast.firstPlay'], function (evt) {\n                    if (evt.type !== 'playing') {\n                        return;\n                    }\n                    player.trigger('vast.contentStart');\n                    playerUtils.once(player, ['ended', 'vast.reset', 'vast.firstPlay'], function (evt) {\n                        if (evt.type === 'ended') {\n                            player.trigger('vast.contentEnd');\n                        }\n                    });\n                });\n            }\n            function checkAdsEnabled(next) {\n                if (settings.adsEnabled) {\n                    return next(null);\n                }\n                next(new VASTError('Ads are not enabled'));\n            }\n            function preparePlayerForAd(next) {\n                if (canPlayPrerollAd()) {\n                    snapshot = playerUtils.getPlayerSnapshot(player);\n                    addSpinnerIcon();\n                    next(null);\n                }\n                else {\n                    next(new VASTError('video content has been playing before preroll ad'));\n                }\n            }\n            function canPlayPrerollAd() {\n                return !isIPhone() || player.currentTime() <= settings.iosPrerollCancelTimeout;\n            }\n            function addSpinnerIcon() {\n                dom.addClass(player.el(), 'vjs-vast-ad-loading');\n                playerUtils.once(player, ['vast.adStart', 'vast.adsCancel'], removeSpinnerIcon);\n            }\n            function removeSpinnerIcon() {\n                //IMPORTANT NOTE: We remove the spinnerIcon asynchronously to give time to the browser to start the video.\n                // If we remove it synchronously we see a flash of the content video before the ad starts playing.\n                setTimeout(function () {\n                    dom.removeClass(player.el(), 'vjs-vast-ad-loading');\n                }, 100);\n            }\n        }\n        function cancelAds() {\n            player.trigger('vast.adsCancel');\n            adsCanceled = true;\n        }\n        function playPrerollAd(callback) {\n            async.waterfall([\n                //getVastResponse,//minthe : comment out, we're not using mail online's vast parser and loader\n                playAd,\n            ], callback);\n        }\n        function getVastResponse(callback) {\n            vast.getVASTResponse(settings.adTagUrl ? settings.adTagUrl() : settings.adTagXML, callback);\n        }\n        function getAnVastXml() {\n            //minthe : override vast response to use jsVpaidUrl coming from videoplayer framework\n            var vastResponse = new VASTResponse();\n            vastResponse._linearAdded = true;\n            vastResponse.ads = [\n                {\n                    'id': 1234567,\n                    'inLine': {\n                        'adTitle': '',\n                        'adSystem': '',\n                        'impressions': [],\n                        'creatives': [\n                            {\n                                'sequence': 1,\n                                'linear': {\n                                    'duration': 13000,\n                                    'mediaFiles': [\n                                        {\n                                            'src': settings.jsVpaidUrl,\n                                            'type': 'application/javascript',\n                                            'apiFramework': 'VPAID',\n                                        },\n                                    ],\n                                    'skipoffset': null,\n                                },\n                            },\n                            { 'sequence': 1 },\n                        ],\n                        'description': 'Vpaid Linear Video Ad',\n                        'surveys': [],\n                    },\n                },\n            ];\n            vastResponse.errorURLMacros = [];\n            vastResponse.impressions = [];\n            vastResponse.customClicks = [];\n            vastResponse.mediaFiles = [\n                {\n                    'src': settings.jsVpaidUrl,\n                    'type': 'application/javascript',\n                    'apiFramework': 'VPAID',\n                },\n            ];\n            vastResponse.clickThrough = settings.clickUrl;\n            vastResponse.adTitle = '';\n            vastResponse.adParameters = settings.adParameters;\n            return vastResponse;\n        }\n        function playAd(vastResponse, callback) {\n            //minthe : override vast response to use jsVpaidUrl coming from videoplayer framework\n            vastResponse = getAnVastXml();\n            //TODO: Find a better way to stop the play. The 'playPrerollWaterfall' ends in an inconsistent situation\n            //If the state is not 'preroll?' it means the ads were canceled therefore, we break the waterfall\n            if (adsCanceled) {\n                return;\n            }\n            var adFinished = false;\n            //comment out for VID-1359\n            //if (isIDevice()) {\n            //preventManualProgress();\n            //}\n            callback = callback || trackAdError;\n            player.vast.adUnit = adIntegrator.playAd(vastResponse, callback);\n            //comment out for VID-1359\n            //function preventManualProgress() {\n            //    //IOS video clock is very unreliable and we need a 3 seconds threshold to ensure that the user forwarded/rewound the ad\n            //    var PROGRESS_THRESHOLD = 3;\n            //    var previousTime = 0;\n            //    var tech = player.el().querySelector('.vjs-tech');\n            //    var skipad_attempts = 0;\n            //\n            //    player.on('timeupdate', adTimeupdateHandler);\n            //    playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel', 'vast.adError'], stopPreventManualProgress);\n            //\n            //    /*** Local functions ***/\n            //    function adTimeupdateHandler() {\n            //        var currentTime = player.currentTime();\n            //        var progressDelta = Math.abs(currentTime - previousTime);\n            //\n            //        if (progressDelta > PROGRESS_THRESHOLD) {\n            //            skipad_attempts += 1;\n            //            if (skipad_attempts >= 2) {\n            //                player.pause();\n            //            }\n            //            player.currentTime(previousTime);\n            //        } else {\n            //            previousTime = currentTime;\n            //        }\n            //    }\n            //\n            //    function stopPreventManualProgress() {\n            //        player.off('timeupdate', adTimeupdateHandler);\n            //    }\n            //}\n        }\n        //minthe : checkAd to check vpaid ad is ready to go\n        function checkAd(vastResponse, callback) {\n            vastResponse = getAnVastXml();\n            callback = callback || trackAdError;\n            player.vast.adUnit = adIntegrator.playAd(vastResponse, callback, true);\n        }\n        function trackAdError(error, vastResponse) {\n            if (!error)\n                return;\n            player.trigger({ type: 'vast.adError', error: error });\n            cancelAds();\n            if (console && console.log) {\n                console.log('AD ERROR:', error.message, error, vastResponse);\n            }\n        }\n        function isVPAID(vastResponse) {\n            var i, len;\n            var mediaFiles = vastResponse.mediaFiles;\n            for (i = 0, len = mediaFiles.length; i < len; i++) {\n                if (vastUtil.isVPAID(mediaFiles[i])) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    });\n    vjs.AdsLabel = vjs.Component.extend({\n        /** @constructor */\n        init: function (player, options) {\n            vjs.Component.call(this, player, options);\n            var that = this;\n            // We asynchronously reposition the ads label element\n            setTimeout(function () {\n                var currentTimeComp = player.controlBar &&\n                    (player.controlBar.getChild('timerControls') || player.controlBar.getChild('currentTimeDisplay'));\n                if (currentTimeComp) {\n                    player.controlBar.el().insertBefore(that.el(), currentTimeComp.el());\n                }\n                dom.removeClass(that.el(), 'vjs-label-hidden');\n            }, 0);\n        },\n    });\n    vjs.AdsLabel.prototype.createEl = function () {\n        return vjs.Component.prototype.createEl.call(this, 'div', {\n            className: 'vjs-ads-label vjs-control vjs-label-hidden',\n            innerHTML: 'Advertisement',\n        });\n    };\n    /**\n     * The component that shows a black screen until the ads plugin has decided if it can or it can not play the ad.\n     *\n     * Note: In case you wonder why instead of this black poster we don't just show the spinner loader.\n     *       IOS devices do not work well with animations and the browser chrashes from time to time That is why we chose to\n     *       have a secondary black poster.\n     *\n     *       It also makes it much more easier for the users of the plugin since it does not change the default behaviour of the\n     *       spinner and the player works the same way with and without the plugin.\n     *\n     * @param {vjs.Player|Object} player\n     * @param {Object=} options\n     * @constructor\n     */\n    vjs.BlackPoster = vjs.Component.extend({\n        /** @constructor */\n        init: function (player, options) {\n            vjs.Component.call(this, player, options);\n            var posterImg = player.getChild('posterImage');\n            //We need to do it asynchronously to be sure that the black poster el is on the dom.\n            setTimeout(function () {\n                if (posterImg) {\n                    player.el().insertBefore(this.el(), posterImg.el());\n                }\n            }.bind(this), 0);\n        },\n    });\n    /**\n     * Create the black poster div element\n     * @return {Element}\n     */\n    vjs.BlackPoster.prototype.createEl = function () {\n        return vjs.createEl('div', {\n            className: 'vjs-black-poster',\n        });\n    };\n    function VPAIDAdUnitWrapper(vpaidAdUnit, opts) {\n        if (!(this instanceof VPAIDAdUnitWrapper)) {\n            return new VPAIDAdUnitWrapper(vpaidAdUnit, opts);\n        }\n        sanityCheck(vpaidAdUnit, opts);\n        this.options = extend({}, opts);\n        this._adUnit = vpaidAdUnit;\n        this._adLoaded = false;\n        this._adStopped = false;\n        this._adStarted = false;\n        this._adSkipped = false;\n        /*** Local Functions ***/\n        function sanityCheck(adUnit, opts) {\n            if (!adUnit || !VPAIDAdUnitWrapper.checkVPAIDInterface(adUnit)) {\n                throw new VASTError('on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface');\n            }\n            if (!isObject(opts)) {\n                throw new VASTError(\"on VPAIDAdUnitWrapper, expected options hash  but got '\" + opts + \"'\");\n            }\n            if (!('adCancelTimeout' in opts) || !isNumber(opts.adCancelTimeout)) {\n                throw new VASTError('on VPAIDAdUnitWrapper, expected adCancelTimeout in options');\n            }\n        }\n    }\n    VPAIDAdUnitWrapper.checkVPAIDInterface = function checkVPAIDInterface(VPAIDAdUnit) {\n        //NOTE: skipAd is not part of the method list because it only appears in VPAID 2.0 and we support VPAID 1.0\n        var VPAIDInterfaceMethods = [\n            'handshakeVersion',\n            'initAd',\n            'startAd',\n            'stopAd',\n            'resizeAd',\n            'pauseAd',\n            'expandAd',\n            'collapseAd',\n        ];\n        for (var i = 0, len = VPAIDInterfaceMethods.length; i < len; i++) {\n            if (!VPAIDAdUnit || !isFunction(VPAIDAdUnit[VPAIDInterfaceMethods[i]])) {\n                return false;\n            }\n        }\n        return canSubscribeToEvents(VPAIDAdUnit) && canUnsubscribeFromEvents(VPAIDAdUnit);\n        /*** Local Functions ***/\n        function canSubscribeToEvents(adUnit) {\n            return isFunction(adUnit.subscribe) || isFunction(adUnit.addEventListener) || isFunction(adUnit.on);\n        }\n        function canUnsubscribeFromEvents(adUnit) {\n            return isFunction(adUnit.unsubscribe) || isFunction(adUnit.removeEventListener) || isFunction(adUnit.off);\n        }\n    };\n    VPAIDAdUnitWrapper.prototype.adUnitAsyncCall = function () {\n        var args = arrayLikeObjToArray(arguments);\n        var method = args.shift();\n        var cb = args.pop();\n        var timeoutId;\n        sanityCheck(method, cb, this._adUnit);\n        args.push(wrapCallback());\n        this._adUnit[method].apply(this._adUnit, args);\n        timeoutId = setTimeout(function () {\n            timeoutId = null;\n            cb(new VASTError(\"on VPAIDAdUnitWrapper, timeout while waiting for a response on call '\" + method + \"'\"));\n            cb = noop;\n        }, this.options.adCancelTimeout);\n        /*** Local functions ***/\n        function sanityCheck(method, cb, adUnit) {\n            if (!isString(method) || !isFunction(adUnit[method])) {\n                throw new VASTError('on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name');\n            }\n            if (!isFunction(cb)) {\n                throw new VASTError('on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback');\n            }\n        }\n        function wrapCallback() {\n            return function () {\n                if (timeoutId) {\n                    clearTimeout(timeoutId);\n                }\n                cb.apply(this, arguments);\n            };\n        }\n    };\n    VPAIDAdUnitWrapper.prototype.on = function (evtName, handler) {\n        var addEventListener = this._adUnit.addEventListener || this._adUnit.subscribe || this._adUnit.on;\n        addEventListener.call(this._adUnit, evtName, handler);\n    };\n    VPAIDAdUnitWrapper.prototype.off = function (evtName, handler) {\n        var removeEventListener = this._adUnit.removeEventListener || this._adUnit.unsubscribe || this._adUnit.off;\n        removeEventListener.call(this._adUnit, evtName, handler);\n    };\n    //minthe : waitForEvent\n    VPAIDAdUnitWrapper.prototype.waitForEvent = function (evtName, cb, context) {\n        var timeoutId;\n        sanityCheck(evtName, cb);\n        context = context || null;\n        this.on(evtName, responseListener);\n        timeoutId = setTimeout(function () {\n            cb(new VASTError(\"on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '\" + evtName + \"'\"));\n            timeoutId = null;\n            cb = noop;\n        }, this.options.adCancelTimeout);\n        /*** Local functions ***/\n        function sanityCheck(evtName, cb) {\n            if (!isString(evtName)) {\n                throw new VASTError('on VPAIDAdUnitWrapper.waitForEvent, missing evt name');\n            }\n            if (!isFunction(cb)) {\n                throw new VASTError('on VPAIDAdUnitWrapper.waitForEvent, missing callback');\n            }\n        }\n        var that = this;\n        function responseListener() {\n            var args = arrayLikeObjToArray(arguments);\n            if (timeoutId) {\n                clearTimeout(timeoutId);\n                timeoutId = null;\n            }\n            if (evtName === 'AdPlaying') {\n                // set paused flag to false only when we got AdPlaying event\n                that._adUnit._isPaused = false;\n            }\n            args.unshift(null);\n            cb.apply(context, args);\n        }\n    };\n    // VPAID METHODS\n    VPAIDAdUnitWrapper.prototype.handshakeVersion = function (version, cb) {\n        this.adUnitAsyncCall('handshakeVersion', version, cb);\n    };\n    /* jshint maxparams:6 */\n    VPAIDAdUnitWrapper.prototype.initAd = function (width, height, viewMode, desiredBitrate, adUnitData, environmentVars, cb) {\n        //minthe : AdLoaded\n        logger.info('Calling VPAID initAd, time remaining =' + profile.getRemainingTime('initAd'));\n        this.waitForEvent('AdLoaded', cb);\n        //minthe VID-1580\n        this._adUnit.initAd(width, height, viewMode, desiredBitrate, adUnitData, environmentVars);\n    };\n    VPAIDAdUnitWrapper.prototype.resizeAd = function (width, height, viewMode, cb) {\n        // NOTE: AdSizeChange event is only supported on VPAID 2.0 so for the moment we are not going to use it\n        // and will assume that everything is fine after the async call\n        this.adUnitAsyncCall('resizeAd', width, height, viewMode, cb);\n    };\n    VPAIDAdUnitWrapper.prototype.startAd = function (cb) {\n        logger.info('Calling VPAID startAd, time remaining =' + profile.getRemainingTime('startAd'));\n        this.waitForEvent('AdStarted', cb);\n        this._adUnit.startAd();\n    };\n    VPAIDAdUnitWrapper.prototype.stopAd = function (cb) {\n        logger.info(' Calling VPAID stopAd');\n        this.waitForEvent('AdStopped', cb);\n        this._adUnit.stopAd();\n    };\n    VPAIDAdUnitWrapper.prototype.pauseAd = function (cb) {\n        // ignore pauseAd if creative already pause\n        if (this._adStopped || !this._adStarted || this._adUnit._isPaused)\n            return;\n        logger.log(' Calling VPAID pauseAd');\n        this._adUnit.pauseAd();\n        this._adUnit._isPaused = true;\n        timer.startKillTimeout(this._adUnit);\n    };\n    VPAIDAdUnitWrapper.prototype.resumeAd = function (cb) {\n        // ignore resumeAd if creative already playing\n        if (this._adStopped || !this._adStarted || this._adUnit._isPaused === false)\n            return;\n        logger.log(' Calling VPAID resumeAd');\n        this._adUnit._resumedByPlayer = true; // set flag about ad resumed by player\n        this.waitForEvent('AdPlaying', cb);\n        this._adUnit.resumeAd();\n        this._adUnit._isPaused = false;\n        timer.startKillTimeout(this._adUnit);\n    };\n    VPAIDAdUnitWrapper.prototype.expandAd = function (cb) {\n        if (this._adStopped)\n            return;\n        this.waitForEvent('AdExpandedChange', cb);\n        this._adUnit.expandAd();\n    };\n    VPAIDAdUnitWrapper.prototype.collapseAd = function (cb) {\n        if (this._adStopped)\n            return;\n        this.waitForEvent('AdExpandedChange', cb);\n        this._adUnit.collapseAd();\n    };\n    VPAIDAdUnitWrapper.prototype.skipAd = function (cb) {\n        var skipAnyway = function () {\n            if (!this._adSkipped) {\n                logger.debug('VPAID Creative has ' +\n                    (this._adStopped ? 'already stopped' : 'not responded with AdSkipped') +\n                    ': Forcing AdSkipped');\n                this._adSkipped = true;\n                this.player.trigger('vpaid.AdSkipped');\n            }\n        };\n        if (this._adStopped) {\n            // VIDLA-990 VPAID Ads that have already stopped should be skipped anyway (to support collapsing ad unit when disableCollapse is on)\n            skipAnyway.apply(this);\n            return;\n        }\n        logger.log('Calling VPAID skipAd');\n        if (cb) {\n            this.waitForEvent('AdSkipped', cb);\n        }\n        this._adUnit.skipAd();\n        //VIDLA-442 VPAID Ads that don't respond to skipAd should be skipped anyway\n        setTimeout(function () {\n            skipAnyway.apply(this);\n        }.bind(this), 500);\n    };\n    //VPAID property getters\n    [\n        'adLinear',\n        'adWidth',\n        'adHeight',\n        'adExpanded',\n        'adSkippableState',\n        'adRemainingTime',\n        'adDuration',\n        'adVolume',\n        'adCompanions',\n        'adIcons',\n    ].forEach(function (property) {\n        var getterName = 'get' + capitalize(property);\n        VPAIDAdUnitWrapper.prototype[getterName] = function (cb) {\n            this.adUnitAsyncCall(getterName, cb);\n        };\n    });\n    //VPAID property setters\n    VPAIDAdUnitWrapper.prototype.setAdVolume = function (volume, cb) {\n        if (this._adStopped)\n            return;\n        logger.debug('Calling VPAID setAdVolume :: volume :' + volume);\n        this.adUnitAsyncCall('setAdVolume', volume, cb);\n    };\n    function VPAIDHTML5Tech(mediaFile) {\n        if (!(this instanceof VPAIDHTML5Tech)) {\n            return new VPAIDHTML5Tech(mediaFile);\n        }\n        sanityCheck(mediaFile);\n        this.name = 'vpaid-html5';\n        this.containerEl = null;\n        this.videoEl = null;\n        this.vpaidHTMLClient = null;\n        this.mediaFile = mediaFile;\n        function sanityCheck(mediaFile) {\n            if (!mediaFile || !isString(mediaFile.src)) {\n                throw new VASTError(VPAIDHTML5Tech.INVALID_MEDIA_FILE);\n            }\n        }\n    }\n    VPAIDHTML5Tech.supports = function (type) {\n        return !isOldIE() && type === 'application/javascript';\n    };\n    VPAIDHTML5Tech.prototype.loadAdUnit = function loadAdUnit(containerEl, videoEl, callback) {\n        sanityCheck(containerEl, videoEl, callback);\n        this.containerEl = containerEl;\n        this.videoEl = videoEl;\n        this.vpaidHTMLClient = new VPAIDHTML5Client(containerEl, videoEl, {});\n        this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src, callback);\n        function sanityCheck(container, video, cb) {\n            if (!dom.isDomElement(container)) {\n                throw new VASTError(VPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL);\n            }\n            if (!dom.isDomElement(video) || video.tagName.toLowerCase() !== 'video') {\n                throw new VASTError(VPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL);\n            }\n            if (!isFunction(cb)) {\n                throw new VASTError(VPAIDHTML5Tech.MISSING_CALLBACK);\n            }\n        }\n    };\n    VPAIDHTML5Tech.prototype.unloadAdUnit = function unloadAdUnit() {\n        if (this.vpaidHTMLClient) {\n            try {\n                this.vpaidHTMLClient.destroy();\n            }\n            catch (e) {\n                if (console && isFunction(console.log)) {\n                    console.log('VAST ERROR: trying to unload the VPAID adunit');\n                }\n            }\n            this.vpaidHTMLClient = null;\n        }\n        if (this.containerEl) {\n            dom.remove(this.containerEl);\n            this.containerEl = null;\n        }\n    };\n    var PREFIX = 'on VPAIDHTML5Tech';\n    VPAIDHTML5Tech.INVALID_MEDIA_FILE = PREFIX + ', invalid MediaFile';\n    VPAIDHTML5Tech.INVALID_DOM_CONTAINER_EL = PREFIX + ', invalid container HtmlElement';\n    VPAIDHTML5Tech.INVALID_DOM_VIDEO_EL = PREFIX + ', invalid HTMLVideoElement';\n    VPAIDHTML5Tech.MISSING_CALLBACK = PREFIX + ', missing valid callback';\n    function VPAIDIntegrator(player, settings) {\n        if (!(this instanceof VPAIDIntegrator)) {\n            return new VPAIDIntegrator(player);\n        }\n        this.VIEW_MODE = {\n            NORMAL: 'normal',\n            FULLSCREEN: 'fullscreen',\n            THUMBNAIL: 'thumbnail',\n        };\n        this.player = player;\n        this.containerEl = createVPAIDContainerEl(player);\n        this.options = {\n            adCancelTimeout: 5000,\n            VPAID_VERSION: '2.0',\n        };\n        this.settings = settings;\n        this.volume = 1;\n        this.initVolume = 1;\n        if (this.settings.initialAudio === 'off') {\n            logger.log('Initial audio off');\n            this.initVolume = 0;\n        }\n        else if (this.settings.isXandrVastPlayer && this.settings.initVolume !== null) {\n            // using isXandrVastPlayer flag, because overlayPlayer flag always set to false for video SDK for JSVPAID initialization\n            // sync volume with content player\n            this.initVolume = this.settings.initVolume;\n        }\n        this.initAdUnitCalled = false;\n        this.initialisedAdUnit = null;\n        this.initAdTimeout = false;\n        /*** Local functions ***/\n        function createVPAIDContainerEl() {\n            var containerEl = document.createElement('div');\n            dom.addClass(containerEl, 'VPAID-container');\n            var smokeElem = document.getElementsByClassName('vjs-smoke-layer');\n            if (smokeElem && smokeElem.length > 0) {\n                player.el().insertBefore(containerEl, smokeElem[0]);\n            }\n            else {\n                player.el().insertBefore(containerEl, player.controlBar.el());\n            }\n            return containerEl;\n        }\n        this.EVENTS = [\n            'AdLoaded',\n            'AdStarted',\n            'AdStopped',\n            'AdSkipped',\n            'AdSkippableStateChange',\n            'AdSizeChange',\n            'AdLinearChange',\n            'AdDurationChange',\n            'AdExpandedChange',\n            'AdRemainingTimeChange',\n            'AdVolumeChange',\n            'AdImpression',\n            'AdVideoStart',\n            'AdVideoFirstQuartile',\n            'AdVideoMidpoint',\n            'AdVideoThirdQuartile',\n            'AdVideoComplete',\n            'AdClickThru',\n            'AdInteraction',\n            'AdUserAcceptInvitation',\n            'AdUserMinimize',\n            'AdUserClose',\n            'AdPaused',\n            'AdPlaying',\n            'AdLog',\n            'AdError',\n        ];\n    }\n    //List of supported VPAID technologies\n    VPAIDIntegrator.techs = [VPAIDHTML5Tech];\n    //minthe : protoype.playAd\n    VPAIDIntegrator.prototype.playAd = function playVPaidAd(vastResponse, callback, isTestPlay) {\n        //flag to sperate logic for checking vpaid ad is valid\n        isTestPlay = isTestPlay && isTestPlay !== undefined ? isTestPlay : false;\n        var that = this;\n        var tech;\n        var player = this.player;\n        callback = callback || noop;\n        if (!(vastResponse instanceof VASTResponse)) {\n            return callback(new VASTError('on VASTIntegrator.playAd, missing required VASTResponse'));\n        }\n        tech = this._findSupportedTech(vastResponse, this.settings);\n        dom.addClass(player.el(), 'vjs-vpaid-ad');\n        player.on('vast.adsCancel', triggerVpaidAdEnd);\n        player.one('vpaid.adEnd', function () {\n            player.off('vast.adsCancel', triggerVpaidAdEnd);\n            removeAdUnit();\n        });\n        if (tech) {\n            //if it's test-play this routine will invoke initAd and return result to notify the creative is ready to go\n            if (isTestPlay) {\n                async.waterfall([\n                    function (next) {\n                        next(null, tech, vastResponse);\n                    },\n                    this._loadAdUnit.bind(this),\n                    this._initAdUnit.bind(this),\n                ], function (error, adUnit, vastResponse) {\n                    if (error) {\n                        that._trackError(vastResponse);\n                    }\n                    else {\n                        player.trigger('an.readytogovpaid');\n                    }\n                    callback(error, vastResponse);\n                });\n            }\n            else {\n                var errorCallback = function (error, adUnit, vastResponse) {\n                    if (error) {\n                        that._trackError(vastResponse);\n                    }\n                    player.trigger('vpaid.adEnd');\n                    callback(error, vastResponse);\n                };\n                var taskList = [\n                    function (next) {\n                        next(null, that.initialisedAdUnit, vastResponse, true);\n                    },\n                    this._playAdUnit.bind(this),\n                ];\n                if (this.initialisedAdUnit) {\n                    async.waterfall(taskList, errorCallback);\n                }\n                else {\n                    if (this.initAdUnitCalled) {\n                        player.one('an.readytogovpaid', function () {\n                            async.waterfall(taskList, errorCallback);\n                        });\n                    }\n                    else {\n                        async.waterfall([\n                            function (next) {\n                                next(null, tech, vastResponse);\n                            },\n                            this._loadAdUnit.bind(this),\n                            this._initAdUnit.bind(this),\n                            this._playAdUnit.bind(this),\n                        ], errorCallback);\n                    }\n                }\n            }\n            this._adUnit = {\n                _paused: true,\n                _completed: false,\n                type: 'VPAID',\n                pauseAd: function () {\n                    player.trigger('vpaid.pauseAd');\n                    // We don't need VIDLA-1327-1329 fix for XandrVastPlayer.\n                    // Xandr Vast Player is not going to immediately pause the player here as\n                    // this is contrary to the IAB Spec and also causes problem in the VPAID\n                    // creatives - see VSSPP-2975\n                    // IAB spec says: \"If the video player does not receive the AdPaused event\n                    // after a pauseAd() call, then either the ad unit cannot be paused or it\n                    // failed to send the AdPaused event. In either case, the video player should\n                    // treat the lack of response as a failed attempt to pause the ad.\"\n                    if (!player.options_.isXandrVastPlayer) {\n                        // VIDLA-1327-1329 Reverting back the pause which caused the regression.\n                        player.pause(true);\n                    }\n                },\n                resumeAd: function () {\n                    player.trigger('vpaid.resumeAd');\n                },\n                isPaused: function () {\n                    return that.player.paused(true);\n                },\n                getSrc: function () {\n                    return tech.mediaFile;\n                },\n            };\n            return this._adUnit;\n        }\n        callback(new VASTError('on VPAIDIntegrator.playAd, could not find a supported mediaFile'));\n        return null;\n        /*** Local functions ***/\n        function triggerVpaidAdEnd() {\n            player.trigger('vpaid.adEnd');\n        }\n        function removeAdUnit() {\n            if (tech) {\n                tech.unloadAdUnit();\n            }\n            dom.removeClass(player.el(), 'vjs-vpaid-ad');\n        }\n    };\n    VPAIDIntegrator.prototype._findSupportedTech = function (vastResponse, settings) {\n        if (!(vastResponse instanceof VASTResponse)) {\n            return null;\n        }\n        var vpaidMediaFiles = vastResponse.mediaFiles.filter(vastUtil.isVPAID);\n        var i, len, mediaFile, VPAIDTech;\n        for (i = 0, len = vpaidMediaFiles.length; i < len; i += 1) {\n            mediaFile = vpaidMediaFiles[i];\n            VPAIDTech = findSupportedTech(mediaFile);\n            if (VPAIDTech) {\n                return new VPAIDTech(mediaFile, settings);\n            }\n        }\n        return null;\n        /*** Local functions ***/\n        function findSupportedTech(mediafile) {\n            var type = mediafile.type;\n            var i, len, VPAIDTech;\n            for (i = 0, len = VPAIDIntegrator.techs.length; i < len; i += 1) {\n                VPAIDTech = VPAIDIntegrator.techs[i];\n                if (VPAIDTech.supports(type)) {\n                    return VPAIDTech;\n                }\n            }\n            return null;\n        }\n    };\n    //minthe : loadAdUnit\n    VPAIDIntegrator.prototype._loadAdUnit = function (tech, vastResponse, next) {\n        if (this.initAdUnitCalled) {\n            return;\n        }\n        var player = this.player;\n        var vjsTechEl = player.el().querySelector('.vjs-tech');\n        var adCancelTimeout = this.settings.adCancelTimeout || this.options.adCancelTimeout;\n        var overlayPlayer = this.settings.overlayPlayer;\n        var initialPlayback = this.settings.initialPlayback;\n        var controlBarPosition = this.settings.controlBarPosition;\n        var isXandrVastPlayer = this.settings.isXandrVastPlayer;\n        tech.loadAdUnit(this.containerEl, vjsTechEl, function (error, adUnit) {\n            if (error) {\n                return next(error, adUnit, vastResponse);\n            }\n            try {\n                var WrappedAdUnit = new VPAIDAdUnitWrapper(adUnit, {\n                    src: tech.mediaFile.src,\n                    adCancelTimeout: adCancelTimeout,\n                    overlayPlayer: overlayPlayer,\n                    initialPlayback: initialPlayback,\n                    controlBarPosition: controlBarPosition,\n                    isXandrVastPlayer: isXandrVastPlayer,\n                });\n                WrappedAdUnit.player = player;\n                var techClass = 'vjs-' + tech.name + '-ad';\n                dom.addClass(player.el(), techClass);\n                player.one('vpaid.adEnd', function () {\n                    dom.removeClass(player.el(), techClass);\n                });\n                //Entry point for player's skip button which trigger 'skip' event;\n                player.on('skip', function () {\n                    WrappedAdUnit.skipAd();\n                });\n                //Entry point for 'stop' event\n                player.on('stop', function () {\n                    if (!WrappedAdUnit._adStopped) {\n                        WrappedAdUnit.stopAd(function (error) {\n                            if (error) {\n                                // stop anyway\n                                WrappedAdUnit._adStopped = true;\n                                player.trigger('vpaid.AdStopped');\n                            }\n                        });\n                    }\n                });\n                player.on('vpaid.AdPaused', function () {\n                    // if vpaid creative is paused internally by clicking on vpaid video,\n                    // set 'paused' flag to 'true' in ad unit wrapper instance\n                    if (WrappedAdUnit._adUnit) {\n                        WrappedAdUnit._adUnit._isPaused = true;\n                    }\n                });\n                next(null, WrappedAdUnit, vastResponse);\n            }\n            catch (e) {\n                next(e, adUnit, vastResponse);\n            }\n        });\n    };\n    //minthe : _testAdUnit\n    VPAIDIntegrator.prototype._initAdUnit = function (adUnit, vastResponse, callback) {\n        if (this.initAdUnitCalled) {\n            return;\n        }\n        this.initAdUnitCalled = true;\n        async.waterfall([\n            function (next) {\n                next(null, adUnit, vastResponse);\n            },\n            this._handshake.bind(this),\n            this._setupEvents.bind(this),\n            this._initAd.bind(this),\n        ], callback);\n    };\n    //minthe : _playAdUnit\n    VPAIDIntegrator.prototype._playAdUnit = function (adUnit, vastResponse, callback) {\n        async.waterfall([\n            function (next) {\n                next(null, adUnit, vastResponse);\n            },\n            this._linkPlayerControls.bind(this),\n            this._startAd.bind(this),\n        ], callback);\n    };\n    VPAIDIntegrator.prototype._handshake = function handshake(adUnit, vastResponse, next) {\n        adUnit.handshakeVersion(this.options.VPAID_VERSION, function (error, version) {\n            if (error) {\n                return next(error, adUnit, vastResponse);\n            }\n            if (version && isSupportedVersion(version)) {\n                return next(null, adUnit, vastResponse);\n            }\n            return next(new VASTError('on VPAIDIntegrator._handshake, unsupported version \"' + version + '\"'), adUnit, vastResponse);\n        });\n        function isSupportedVersion(version) {\n            var majorNum = major(version);\n            return majorNum >= 1 && majorNum <= 2;\n        }\n        function major(version) {\n            var parts = version.split('.');\n            return parseInt(parts[0], 10);\n        }\n    };\n    //minthe : _initAd\n    VPAIDIntegrator.prototype._initAd = function (adUnit, vastResponse, next) {\n        var self = this;\n        var tech = this.player.el().querySelector('.vjs-tech');\n        var dimension = dom.getDimension(tech);\n        // Reset the timeout flag\n        self.initAdTimeout = false;\n        timer.startInitAdTimeout(function (error) {\n            self.initAdTimeout = true;\n            self._reportTimeout(adUnit, error);\n        });\n        /*\n            adUnit.initAd(dimension.width, dimension.height, this.VIEW_MODE.NORMAL, -1, {AdParameters: vastResponse.adParameters || ''}, function (error) {\n                self.initialisedAdUnit = adUnit;\n                next(error, adUnit, vastResponse);\n            });\n            */\n        adUnit.initAd(dimension.width, dimension.height, this.VIEW_MODE.NORMAL, -1, { AdParameters: vastResponse.adParameters || '' }, self.settings.vpaidEnvironmentVars, function (error) {\n            self.initialisedAdUnit = adUnit;\n            next(error, adUnit, vastResponse);\n        });\n    };\n    VPAIDIntegrator.prototype._setupEvents = function (adUnit, vastResponse, next) {\n        var adUnitSrc = adUnit.options.src;\n        var tracker = new VASTTracker(adUnitSrc, vastResponse);\n        var player = this.player;\n        var that = this;\n        function setupEventCallbacks() {\n            var cb = that.settings.vpaidEventCallback;\n            if (!cb)\n                return;\n            that.EVENTS.forEach(function (event) {\n                adUnit.on(event, function (data) {\n                    cb.call(this, event, data);\n                });\n            });\n        }\n        setupEventCallbacks();\n        adUnit.on('AdLoaded', function () {\n            adUnit._adLoaded = true;\n            timer.stopInitAdTimeout();\n            logger.info('VPAID event received :: AdLoaded, time = ' +\n                profile.getInitTime() +\n                ', time remaining = ' +\n                profile.getRemainingTime('AdLoaded'));\n        });\n        //minthe2 AdStarted Handler\n        //fix for VID-1525\n        adUnit.on('AdStarted', function () {\n            adUnit._adStarted = true;\n            profile.adStartedTimestamp = new Date().getTime();\n            if (that.settings.delayExpandUntilVPAIDImpression) {\n                if (profile.adImpressionTimestamp !== 0 && profile.adStartedTimestamp !== 0) {\n                    timer.stopStartAdTimeout();\n                }\n            }\n            else {\n                timer.stopStartAdTimeout();\n            }\n            // if (profile.adImpressionTimestamp !== 0) {//if AdImpression is deliverd without AdStarted\n            //     profile.adLoadedTimestamp = profile.adImpressionTimestamp;\n            // }\n            if (!adUnit._adLoaded) {\n                var remainingTime = profile.timeout - (profile.adStartedTimestamp - profile.initAdTimestamp);\n                logger.info('VPAID event received :: AdStarted, time = ' +\n                    0 +\n                    ', time remaining = ' +\n                    remainingTime +\n                    ', Out of order AdStarted');\n            }\n            else {\n                if (that.settings.delayExpandUntilVPAIDImpression && profile.adImpressionTimestamp === 0) {\n                    logger.info('VPAID event received :: AdStarted');\n                }\n                else {\n                    logger.info('VPAID event received :: AdStarted, time = ' +\n                        profile.getStartTime() +\n                        ', total time = ' +\n                        profile.getTotalTime() +\n                        ', time remaining = ' +\n                        profile.getRemainingTime('AdStarted'));\n                }\n            }\n            if (that.settings.isXandrVastPlayer) {\n                // VSSPP_3055 - immediately set volume on player when ad has started\n                player.volume(that.initVolume);\n            }\n            player.trigger('vpaid.AdStarted');\n            tracker.trackCreativeView();\n            notifyPlayToPlayer();\n            //activate impression timer if it's not already started\n            if (that.settings.delayExpandUntilVPAIDImpression && profile.adImpressionTimestamp === 0) {\n                profile.adImpressionTimestamp = new Date().getTime();\n                // timer.startAdImpressionTimeout(function (error) {\n                //     that._reportTimeout(adUnit, error);\n                // });\n            }\n            if (isAndroid()) {\n                ChiveFacebookHack();\n            }\n        });\n        // For creatives that do not use the video tag provided by the player.\n        function handleAdPlayPause() {\n            // Ad creatives do not creative their own video tags on devices so no need to handle AdProgess timer\n            // TODO : find  more reliable way to figure out the video src set.\n            if (isIDevice() || isAndroid()) {\n                // VIDLA-421 (do not ignore pause/resume event handlers for overlay player)\n                if (!adUnit.options.overlayPlayer) {\n                    return;\n                }\n            }\n            // Ad uses video JS Slot\n            if (isVideoSlotUsed()) {\n                return;\n            }\n            var creative = adUnit._adUnit ? adUnit._adUnit._creative : null;\n            if (adUnit.options.overlayPlayer) {\n                // since no monkeypatch api is activated.\n                player.on('pause', function () {\n                    if (adUnit._adUnit && creative) {\n                        that._adUnit.pauseAd();\n                    }\n                });\n                player.on('play', function () {\n                    if (adUnit._adUnit && creative) {\n                        that._adUnit.resumeAd();\n                    }\n                });\n            }\n            //IE11 has an issue to not listen this pause event - VID-2405, VID-2406\n            //video.js has their own event pooling sytem for video element and parent div of video element, the \"pause event\" area is so crowded for now - when vpaid player injects \"pause\" listener to player object on IE11, the video.js doesn't handle as well. looks like incorrect GUID setting problem in order to get events unique\n            //for handling this vpaid-creative.pause by \"pause\" signal from video.js we don't have to stick with the crowded \"pause\" signal. we can do samething with differnet signal for this\n            // player.on('pause', function(){\n            //     if(creative){\n            //         that._adUnit.pauseAd();\n            //     }\n            // });\n            player.on('apn-vpaid-pause', function () {\n                //this \"apn-vpaid-pause\" will be dispatch from video.js pause.\n                if (creative) {\n                    // that._adUnit.pauseAd();//no need to dispatch pause again to video.js because video.js already dispatch pause before triggered \"apn-vpaid-pause\". this will also cover a case showing pause button on the UI\n                    player.trigger('vpaid.pauseAd'); //vpaid video pause\n                }\n            });\n        }\n        // For creatives that do not use the video tag provided by the player.\n        function handleAdProgress() {\n            // VSSPP-2986 (do not ignore progress for Xandr Vast player)\n            if (!adUnit.options.isXandrVastPlayer) {\n                // Ad creatives do not creative their own video tags on devices so no need to handle AdProgess timer\n                // TODO : find  more reliable way to figure out the video src set.\n                //if(isIDevice() || isAndroid()){\n                if (isIDevice()) {\n                    //for VID-2597\n                    return;\n                }\n            }\n            // Ad uses video JS Slot\n            if (isVideoSlotUsed()) {\n                return;\n            }\n            // Ad is using its own Video slot.\n            var creative = adUnit._adUnit._creative;\n            var remainingTimeUnknown = false;\n            var lastTime = -1;\n            function updateProgress() {\n                var duration = creative.getAdDuration ? creative.getAdDuration() : 0;\n                var remainingTime = creative.getAdRemainingTime ? creative.getAdRemainingTime() : -1;\n                remainingTime = isNumber(remainingTime) ? remainingTime : -1;\n                remainingTime = remainingTime > duration ? duration : remainingTime; //fix VIDLA-429\n                var currentTime = duration - remainingTime;\n                switch (remainingTime) {\n                    case -2:\n                        // If time is not currently known\n                        remainingTimeUnknown = true;\n                        player.controlBar.currentTimeDisplay.hide();\n                        player.controlBar.timeDivider.hide();\n                        player.controlBar.durationDisplay.hide();\n                        break;\n                    case -1:\n                        // If time is not implemeneted\n                        clearInterval(progressHandler);\n                        player.controlBar.currentTimeDisplay.hide();\n                        player.controlBar.timeDivider.hide();\n                        player.controlBar.durationDisplay.hide();\n                        break;\n                    case 0:\n                        if (lastTime > 0 && lastTime < duration) {\n                            player.currentTime(currentTime);\n                            player.trigger('timeupdate');\n                            player.controlBar.currentTimeDisplay.updateContent();\n                            player.duration(duration);\n                            player.controlBar.durationDisplay.updateContent();\n                            lastTime = currentTime;\n                            if (that._adUnit._completed) {\n                                player.pause();\n                            }\n                        }\n                        clearInterval(progressHandler);\n                        break;\n                    default:\n                        if (remainingTimeUnknown) {\n                            remainingTimeUnknown = false;\n                            player.controlBar.currentTimeDisplay.show();\n                            player.controlBar.timeDivider.show();\n                            player.controlBar.durationDisplay.show();\n                        }\n                        // because time in control bar is second base, we don't have to update it very often\n                        if (currentTime - lastTime >= 0.2) {\n                            // Fix for VSSPP-2189 (Freezing or choppy playing Celtra VPAID creatives).\n                            // Commented the setting new player time for VPAID, because it forces vjs to seeking\n                            // for the new video position on video slot. The seeking moves video position to the\n                            // closer key-frame, which generates very choppy experience. Also, moving to the new\n                            // video position forces some VPAID creatives (for example: celtra VPAID creative)\n                            // to do its own work and to fire unneeded VPAID events.\n                            // player.currentTime(currentTime);\n                            // To make sure, the countdown timer, progress bar, and skippability controls are\n                            // working properly for creatives are not using ad player video tag, we have to\n                            // update time and every time trigger 'timeupdate' event for our ad player.\n                            var intPlayerTime = player.currentTime();\n                            if (currentTime > intPlayerTime) {\n                                player.currentTime(currentTime);\n                                player.trigger('timeupdate');\n                                player.controlBar.currentTimeDisplay.updateContent();\n                            }\n                            player.duration(duration);\n                            player.controlBar.durationDisplay.updateContent();\n                            lastTime = currentTime;\n                        }\n                        break;\n                }\n            }\n            var progressHandler = setInterval(updateProgress, 200);\n            updateProgress();\n        }\n        adUnit.on('AdSkipped', function () {\n            logger.log('VPAID event received :: AdSkipped');\n            if (!adUnit._adSkipped) {\n                adUnit._adSkipped = true;\n                player.trigger('vpaid.AdSkipped');\n                tracker.trackSkip();\n            }\n        });\n        //minthe2 AdImpression Handler\n        adUnit.on('AdImpression', function () {\n            profile.adImpressionTimestamp = new Date().getTime();\n            if (that.settings.delayExpandUntilVPAIDImpression) {\n                if (profile.adImpressionTimestamp !== 0 && profile.adStartedTimestamp !== 0) {\n                    timer.stopStartAdTimeout();\n                }\n            }\n            // if (profile.adImpressionTimestamp !== 0) {//if AdImpression is deliverd without AdStarted\n            //     profile.adLoadedTimestamp = profile.adImpressionTimestamp;\n            // }\n            // if (profile.adStartedTimestamp === 0) {//if AdImpression is deliverd without AdStarted\n            //     profile.adStartedTimestamp = profile.adLoadedTimestamp;\n            // }\n            if (that.settings.delayExpandUntilVPAIDImpression && profile.adStartedTimestamp === 0) {\n                logger.info('VPAID event received :: AdImpression');\n            }\n            else {\n                logger.info('VPAID event received :: AdImpression, time = ' +\n                    profile.getAdImpressionTime() +\n                    ', total time = ' +\n                    profile.getTotalTime() +\n                    ', time remaining = ' +\n                    profile.getRemainingTime('AdImpression'));\n            }\n            player.trigger('vpaid.AdImpression');\n            tracker.trackImpressions();\n            if (adUnit._adUnit && adUnit._adUnit._creative) {\n                var creative = adUnit._adUnit._creative;\n                var creativeIcons = false;\n                if (creative.getAdIcons) {\n                    creativeIcons = creative.getAdIcons();\n                }\n                player.trigger({ type: 'vpaid.AdIcons', adIcons: creativeIcons });\n            }\n        });\n        adUnit.on('AdVideoStart', function () {\n            logger.info('VPAID event received :: AdVideoStart');\n            // VIDLA-441 This is definitely when the Ad video has started and all the metadata is ready. AdStarted event may be too early\n            handleAdPlayPause();\n            handleAdProgress();\n            player.trigger('vpaid.AdVideoStart');\n            tracker.trackStart();\n            notifyPlayToPlayer();\n            if (that.settings.initialAudio === 'off') {\n                player.muted(true);\n            }\n            else {\n                player.muted(false);\n            }\n            linkVolumeControl();\n            var controlBarPosition = adUnit.options.controlBarPosition ? adUnit.options.controlBarPosition : 'over';\n            if (controlBarPosition === 'over') {\n                var handleUserActive = function () {\n                    logger.debug('caught useractive');\n                    resizeAd(player, adUnit, that.VIEW_MODE, true);\n                    logger.debug('did resizeAd');\n                };\n                var handleUserInActive = function () {\n                    logger.debug('caught userinactive');\n                    if (player.hasClass('vjs-paused') === false || player.paused() === false || that._adUnit._completed === true) {\n                        //fix unnecessary resize after pause which can cause bad user experience with transparent controlbar color\n                        resizeAd(player, adUnit, that.VIEW_MODE, true);\n                        logger.debug('did resizeAd');\n                    }\n                };\n                var handleManualUserActive = function () {\n                    logger.debug('caught handleManualUserActive');\n                    setTimeout(function () {\n                        resizeAd(player, adUnit, that.VIEW_MODE, true, 'useractive');\n                        logger.debug('did resizeAd');\n                    }, 0);\n                };\n                var handleManualUserInActive = function (e) {\n                    logger.debug('caught handleManualUserInActive');\n                    setTimeout(function () {\n                        resizeAd(player, adUnit, that.VIEW_MODE, true, 'userinactive');\n                        logger.debug('did resizeAd');\n                    }, 0);\n                };\n                //handle VPAID resize by useractive event from video.js\n                player.on('useractive', handleUserActive);\n                //handle VPAID resize by userinactive event from video.js\n                player.on('userinactive', handleUserInActive);\n                //handle VPAID resize by useractive event from video.js\n                player.on('handleManualUserActive', handleManualUserActive);\n                //handle VPAID resize by userinactive event from video.js\n                player.on('handleManualUserInActive', handleManualUserInActive);\n            }\n            //VIDLA-2143\n            //to figure out specific creative issue which has 1px of height after AdVideoStart\n            //details here: https://stash.corp.appnexus.com/projects/VIDEO/repos/resources_video-ad-video-player-html5-plugin-vpaid/pull-requests/14/overview\n            resizeAd(player, adUnit, that.VIEW_MODE, true);\n            if (isIDevice()) {\n                ChiveFacebookHack();\n            }\n        });\n        // VID-3052 This is a temporary hack for FB creative autoplay on chive pages. Please see ticket for details.\n        function ChiveFacebookHack() {\n            var videoSlot = adUnit._adUnit._videoEl;\n            if (adUnit.options.overlayPlayer && adUnit.options.initialPlayback === 'auto' && videoSlot.paused) {\n                setTimeout(function () {\n                    // Overlay Chive hack for Facebook Creative\n                    logger.log('Applying Facebook Chive Hack');\n                    player.muted(true);\n                    that._adUnit.resumeAd();\n                }, 1000);\n            }\n        }\n        adUnit.on('AdPlaying', function () {\n            logger.log('VPAID event received :: AdPlaying');\n            timer.stopKillTimeout();\n            player.trigger('vpaid.AdPlaying');\n            tracker.trackResume();\n            notifyPlayToPlayer();\n            if (!adUnit._adUnit._resumedByPlayer) {\n                // notify player if ad resumed by vpaid creative (not by player)\n                player.trigger('adResumedByVpaidCreative');\n                adUnit._adUnit._isPaused = false;\n            }\n            delete adUnit._adUnit._resumedByPlayer;\n            player.trigger('handleManualUserInActive');\n        });\n        adUnit.on('AdPaused', function () {\n            logger.log('VPAID event received :: AdPaused');\n            timer.stopKillTimeout();\n            player.trigger('vpaid.AdPaused');\n            tracker.trackPause();\n            notifyPauseToPlayer();\n            player.trigger('handleManualUserActive');\n        });\n        function notifyPlayToPlayer() {\n            if (that._adUnit && that._adUnit.isPaused()) {\n                that._adUnit._paused = false;\n            }\n            player.trigger('play');\n        }\n        function notifyPauseToPlayer() {\n            if (that._adUnit) {\n                that._adUnit._paused = true;\n            }\n            player.trigger('pause');\n        }\n        adUnit.on('AdVideoFirstQuartile', function () {\n            logger.info('VPAID event received :: AdVideoFirstQuartile');\n            player.trigger('vpaid.AdVideoFirstQuartile');\n            tracker.trackFirstQuartile();\n        });\n        adUnit.on('AdVideoMidpoint', function () {\n            logger.info('VPAID event received :: AdVideoMidpoint');\n            player.trigger('vpaid.AdVideoMidpoint');\n            tracker.trackMidpoint();\n        });\n        adUnit.on('AdVideoThirdQuartile', function () {\n            logger.info('VPAID event received :: AdVideoThirdQuartile');\n            player.trigger('vpaid.AdVideoThirdQuartile');\n            tracker.trackThirdQuartile();\n        });\n        adUnit.on('AdVideoComplete', function () {\n            logger.info('VPAID event received :: AdVideoComplete');\n            player.trigger('vpaid.AdVideoComplete');\n            tracker.trackComplete();\n            that._adUnit._completed = true;\n        });\n        adUnit.on('AdClickThru', function (data) {\n            player.trigger('vpaid.AdClickThru');\n        });\n        adUnit.on('AdUserAcceptInvitation', function () {\n            player.trigger('vpaid.AdUserAcceptInvitation');\n            tracker.trackAcceptInvitation();\n            tracker.trackAcceptInvitationLinear();\n        });\n        adUnit.on('AdUserClose', function () {\n            player.trigger('vpaid.AdUserClose');\n            tracker.trackClose();\n            tracker.trackCloseLinear();\n        });\n        adUnit.on('AdUserMinimize', function () {\n            player.trigger('vpaid.AdUserMinimize');\n            tracker.trackCollapse();\n        });\n        adUnit.on('AdError', function (message) {\n            timer.stopAdTimeouts();\n            logger.error('VPAID event received :: AdError : message : ' + message);\n            //player.trigger('vast.adError');//TODO jeff's change for VID-583\n            if (message) {\n                player.trigger({ type: 'vpaid.AdError', message: message });\n            }\n            else {\n                player.trigger('vpaid.AdError');\n            }\n            //NOTE: we track errors code 901, as noted in VAST 3.0\n            tracker.trackErrorWithCode(901);\n        });\n        adUnit.on('AdVolumeChange', function () {\n            logger.debug('VPAID event received :: AdVolumeChange');\n            player.trigger('vpaid.AdVolumeChange');\n        });\n        adUnit.on('AdStopped', function () {\n            logger.info('VPAID event received :: AdStopped');\n            adUnit._adStopped = true;\n            player.trigger('vpaid.AdStopped');\n        });\n        var updateViewSize = resizeAd.bind(this, player, adUnit, this.VIEW_MODE);\n        var autoResize = this.settings.autoResize;\n        if (autoResize) {\n            dom.addEventListener(window, 'resize', updateViewSize);\n            dom.addEventListener(window, 'orientationchange', updateViewSize);\n        }\n        player.on('vast.resize', updateViewSize);\n        player.on('vpaid.pauseAd', pauseAdUnit);\n        player.on('vpaid.resumeAd', resumeAdUnit);\n        player.one('vpaid.adEnd', function () {\n            player.off('vast.resize', updateViewSize);\n            player.off('vpaid.pauseAd', pauseAdUnit);\n            player.off('vpaid.resumeAd', resumeAdUnit);\n            if (autoResize) {\n                dom.removeEventListener(window, 'resize', updateViewSize);\n                dom.removeEventListener(window, 'orientationchange', updateViewSize);\n            }\n        });\n        next(null, adUnit, vastResponse);\n        /*** Local Functions ***/\n        function pauseAdUnit() {\n            adUnit.pauseAd(noop);\n        }\n        function resumeAdUnit() {\n            adUnit.resumeAd(noop);\n        }\n        function isVideoSlotUsed() {\n            var videoSlot = adUnit._adUnit._videoEl;\n            var creative = adUnit._adUnit._creative;\n            var hasSource = videoSlot && videoSlot.src;\n            if (videoSlot && !hasSource) {\n                var sources = videoSlot.getElementsByTagName('source');\n                for (var i = 0; i < sources; i++) {\n                    if (sources[i].src) {\n                        hasSource = true;\n                    }\n                }\n            }\n            // Ad uses video JS Slot\n            if (!creative || !videoSlot || hasSource) {\n                return true;\n            }\n            return false;\n        }\n        function linkVolumeControl() {\n            // Ad uses video JS slot. Volume be controlled via Player Framework\n            if (isVideoSlotUsed()) {\n                return;\n            }\n            // for creatives that create own tag set initial volume appropriately\n            adUnit.setAdVolume(that.initVolume, function (error, result) {\n                if (error) {\n                    logger.log('The volume change is not implemented as part of the ad unit');\n                }\n                else {\n                    logger.debug('The volume change is implemented as part of the ad unit');\n                }\n            });\n            // Ad is using its own Video slot. Volume be controlled by setAdVolume\n            player.on('volumechange', updateAdUnitVolume);\n            player.one('vpaid.adEnd', function () {\n                player.off('volumechange', updateAdUnitVolume);\n            });\n            /*** local functions ***/\n            function updateAdUnitVolume() {\n                var vol;\n                if (player.muted()) {\n                    vol = 0;\n                }\n                else {\n                    that.volume = player.volume() ? player.volume() : that.volume;\n                    vol = that.volume;\n                }\n                adUnit.setAdVolume(vol, logError);\n            }\n        }\n    };\n    VPAIDIntegrator.prototype._linkPlayerControls = function (adUnit, vastResponse, next) {\n        var that = this;\n        linkFullScreenControl(this.player, adUnit, this.VIEW_MODE);\n        next(null, adUnit, vastResponse);\n        /*** Local functions ***/\n        function linkFullScreenControl(player, adUnit, VIEW_MODE) {\n            var updateViewSize = resizeAd.bind(this, player, adUnit, VIEW_MODE);\n            player.on('fullscreenchange', updateViewSize);\n            player.on('fullscreenchange', function () {\n                if (player.paused() || player.hasClass('vjs-paused')) {\n                    player.trigger('handleManualUserActive');\n                }\n            });\n            player.one('vpaid.adEnd', function () {\n                player.off('fullscreenchange', updateViewSize);\n            });\n        }\n    };\n    //minthe : _startAd\n    VPAIDIntegrator.prototype._startAd = function (adUnit, vastResponse, next) {\n        var self = this;\n        var player = this.player;\n        if (self.initAdTimeout) {\n            return;\n        }\n        // VIDLA-245 IAS hack: If AdStarted is received before calling startAd then do not cap it with a timer.\n        if (!adUnit._adStarted) {\n            timer.startStartAdTimeout(function (error) {\n                self._reportTimeout(adUnit, error);\n            });\n        }\n        else {\n            //Just set the timestamp correctly for VIDLA-245\n            profile.startAdTimestamp = new Date().getTime();\n        }\n        adUnit.startAd(function (error) {\n            if (!error) {\n                player.trigger('vast.adStart');\n            }\n        });\n    };\n    VPAIDIntegrator.prototype._trackError = function trackError(response) {\n        vastUtil.track(response.errorURLMacros, { ERRORCODE: 901 });\n    };\n    VPAIDIntegrator.prototype._reportTimeout = function (adUnit, error) {\n        var player = this.player;\n        player.trigger({ type: 'vast.adTimeout', error: error });\n        try {\n            if (adUnit && adUnit._adUnit) {\n                logger.log('Calling VPAID stopAd on TIMEOUT');\n                adUnit._adUnit.stopAd();\n            }\n        }\n        catch (e) {\n            logger.log('VPAID error in calling stopAd on Timeout');\n        }\n    };\n    var lastSize = {\n        width: 0,\n        height: 0,\n    };\n    function resizeAd(player, adUnit, VIEW_MODE, isAdVideoStart, manualUserActive) {\n        var tech = player.el().querySelector('.vjs-tech');\n        var dimension = dom.getDimension(tech);\n        var width = dimension.width;\n        var height = dimension.height;\n        var MODE = player.isFullscreen() ? VIEW_MODE.FULLSCREEN : VIEW_MODE.NORMAL;\n        var slot = adUnit._adUnit._el;\n        var videoSlot = adUnit._adUnit._videoEl;\n        var controlBar = player.controlBar;\n        var needToUserActive = player.hasClass('vjs-controls-enabled') && player.hasClass('vjs-has-started') && player.hasClass('vjs-paused');\n        if (needToUserActive || player.userActive() || manualUserActive != undefined) {\n            //if video.js's useractive status is true by mousemove\n            if (needToUserActive) {\n                manualUserActive = 'useractive';\n            }\n            var controlBarPosition = adUnit.options.controlBarPosition ? adUnit.options.controlBarPosition : 'over';\n            var currentControlBarHeight = manualUserActive === 'userinactive' ? 0 : controlBar.height();\n            var controlBarHeight = controlBar && controlBarPosition === 'over' ? currentControlBarHeight : 0;\n            if (controlBar && controlBarHeight && player.hasClass('vjs-ended') === false) {\n                height = dimension.height - controlBarHeight;\n            }\n        }\n        // (optimization) do nothing if size did not changed\n        if (lastSize.width != width || lastSize.height != height) {\n            // save current size\n            lastSize.width = width;\n            lastSize.height = height;\n            //Resize both slot and video slot (Ads could use either or both)\n            if (slot && videoSlot) {\n                slot.style.height = height + 'px';\n                videoSlot.style.height = height + 'px';\n            }\n            //VIDLA-2143\n            //To figure out specific creative issue which has 1px of height after AdVideoStart\n            //details here: https://stash.corp.appnexus.com/projects/VIDEO/repos/resources_video-ad-video-player-html5-plugin-vpaid/pull-requests/14/overview\n            if (isAdVideoStart && isAdVideoStart === true) {\n                adUnit.resizeAd(width + 1, height + 1, MODE, logError);\n                adUnit.resizeAd(width, height, MODE, logError);\n            }\n            else {\n                adUnit.resizeAd(width, height, MODE, logError);\n            }\n        }\n    }\n    function logError(error) {\n        if (error) {\n            logger.log('ERROR: ' + error.message);\n        }\n    }\n    function Ad(adJTree) {\n        if (!(this instanceof Ad)) {\n            return new Ad(adJTree);\n        }\n        this.id = adJTree.attr('id');\n        this.sequence = adJTree.attr('sequence');\n        if (adJTree.inLine) {\n            this.inLine = new InLine(adJTree.inLine);\n        }\n        if (adJTree.wrapper) {\n            this.wrapper = new Wrapper(adJTree.wrapper);\n        }\n    }\n    function Creative(creativeJTree) {\n        if (!(this instanceof Creative)) {\n            return new Creative(creativeJTree);\n        }\n        this.id = creativeJTree.attr('id');\n        this.sequence = creativeJTree.attr('sequence');\n        this.adId = creativeJTree.attr('adId');\n        this.apiFramework = creativeJTree.attr('apiFramework');\n        if (creativeJTree.linear) {\n            this.linear = new Linear(creativeJTree.linear);\n        }\n    }\n    function InLine(inlineJTree) {\n        if (!(this instanceof InLine)) {\n            return new InLine(inlineJTree);\n        }\n        //Required Fields\n        this.adTitle = xml.keyValue(inlineJTree.adTitle);\n        this.adSystem = xml.keyValue(inlineJTree.adSystem);\n        this.impressions = vastUtil.parseImpressions(inlineJTree.impression);\n        this.creatives = vastUtil.parseCreatives(inlineJTree.creatives);\n        //Optional Fields\n        this.description = xml.keyValue(inlineJTree.description);\n        this.advertiser = xml.keyValue(inlineJTree.advertiser);\n        this.surveys = parseSurveys(inlineJTree.survey);\n        this.error = xml.keyValue(inlineJTree.error);\n        this.pricing = xml.keyValue(inlineJTree.pricing);\n        this.extensions = inlineJTree.extensions;\n        /*** Local Functions ***/\n        function parseSurveys(inlineSurveys) {\n            if (inlineSurveys) {\n                return transformArray(isArray(inlineSurveys) ? inlineSurveys : [inlineSurveys], function (survey) {\n                    if (isNotEmptyString(survey.keyValue)) {\n                        return {\n                            uri: survey.keyValue,\n                            type: survey.attr('type'),\n                        };\n                    }\n                    return undefined;\n                });\n            }\n            return [];\n        }\n    }\n    function Linear(linearJTree) {\n        if (!(this instanceof Linear)) {\n            return new Linear(linearJTree);\n        }\n        //Required Elements\n        this.duration = vastUtil.parseDuration(xml.keyValue(linearJTree.duration));\n        this.mediaFiles = parseMediaFiles(linearJTree.mediaFiles && linearJTree.mediaFiles.mediaFile);\n        //Optional fields\n        this.trackingEvents = parseTrackingEvents(linearJTree.trackingEvents && linearJTree.trackingEvents.tracking, this.duration);\n        this.skipoffset = vastUtil.parseOffset(xml.attr(linearJTree, 'skipoffset'), this.duration);\n        if (linearJTree.videoClicks) {\n            this.videoClicks = new VideoClicks(linearJTree.videoClicks);\n        }\n        if (linearJTree.adParameters) {\n            this.adParameters = xml.keyValue(linearJTree.adParameters);\n            if (xml.attr(linearJTree.adParameters, 'xmlEncoded')) {\n                this.adParameters = xml.decode(this.adParameters);\n            }\n        }\n        /*** Local functions ***/\n        function parseTrackingEvents(trackingEvents, duration) {\n            var trackings = [];\n            if (isDefined(trackingEvents)) {\n                trackingEvents = isArray(trackingEvents) ? trackingEvents : [trackingEvents];\n                trackingEvents.forEach(function (trackingData) {\n                    trackings.push(new TrackingEvent(trackingData, duration));\n                });\n            }\n            return trackings;\n        }\n        function parseMediaFiles(mediaFilesJxonTree) {\n            var mediaFiles = [];\n            if (isDefined(mediaFilesJxonTree)) {\n                mediaFilesJxonTree = isArray(mediaFilesJxonTree) ? mediaFilesJxonTree : [mediaFilesJxonTree];\n                mediaFilesJxonTree.forEach(function (mfData) {\n                    mediaFiles.push(new MediaFile(mfData));\n                });\n            }\n            return mediaFiles;\n        }\n    }\n    function MediaFile(mediaFileJTree) {\n        if (!(this instanceof MediaFile)) {\n            return new MediaFile(mediaFileJTree);\n        }\n        //Required attributes\n        this.src = xml.keyValue(mediaFileJTree);\n        this.delivery = mediaFileJTree.attr('delivery');\n        this.type = mediaFileJTree.attr('type');\n        this.width = mediaFileJTree.attr('width');\n        this.height = mediaFileJTree.attr('height');\n        //Optional attributes\n        this.codec = mediaFileJTree.attr('codec');\n        this.id = mediaFileJTree.attr('id');\n        this.bitrate = mediaFileJTree.attr('bitrate');\n        this.minBitrate = mediaFileJTree.attr('minBitrate');\n        this.maxBitrate = mediaFileJTree.attr('maxBitrate');\n        this.scalable = mediaFileJTree.attr('scalable');\n        this.maintainAspectRatio = mediaFileJTree.attr('maintainAspectRatio');\n        this.apiFramework = mediaFileJTree.attr('apiFramework');\n    }\n    function TrackingEvent(trackingJTree, duration) {\n        if (!(this instanceof TrackingEvent)) {\n            return new TrackingEvent(trackingJTree, duration);\n        }\n        this.name = trackingJTree.attr('event');\n        this.uri = xml.keyValue(trackingJTree);\n        if ('progress' === this.name) {\n            this.offset = vastUtil.parseOffset(trackingJTree.attr('offset'), duration);\n        }\n    }\n    //minthe : VASTClient initialize\n    function VASTClient(options) {\n        if (!(this instanceof VASTClient)) {\n            return new VASTClient(options);\n        }\n        var defaultOptions = {\n            WRAPPER_LIMIT: 5,\n        };\n        options = options || {};\n        this.settings = extend({}, options, defaultOptions);\n        this.errorURLMacros = [];\n    }\n    VASTClient.prototype.getVASTResponse = function getVASTResponse(adTagUrl, callback) {\n        var that = this;\n        var error = sanityCheck(adTagUrl, callback);\n        if (error) {\n            if (isFunction(callback)) {\n                return callback(error);\n            }\n            throw error;\n        }\n        async.waterfall([this._getVASTAd.bind(this, adTagUrl), buildVASTResponse], callback);\n        /*** Local functions ***/\n        function buildVASTResponse(adsChain, cb) {\n            try {\n                var response = that._buildVASTResponse(adsChain);\n                cb(null, response);\n            }\n            catch (e) {\n                cb(e);\n            }\n        }\n        function sanityCheck(adTagUrl, cb) {\n            if (!adTagUrl) {\n                return new VASTError('on VASTClient.getVASTResponse, missing ad tag URL');\n            }\n            if (!isFunction(cb)) {\n                return new VASTError('on VASTClient.getVASTResponse, missing callback function');\n            }\n        }\n    };\n    VASTClient.prototype._getVASTAd = function (adTagUrl, callback) {\n        var that = this;\n        getAdWaterfall(adTagUrl, function (error, vastTree) {\n            var waterfallAds = vastTree && isArray(vastTree.ads) ? vastTree.ads : null;\n            if (error) {\n                that._trackError(error, waterfallAds);\n                return callback(error, waterfallAds);\n            }\n            getAd(waterfallAds.shift(), [], waterfallHandler);\n            /*** Local functions ***/\n            function waterfallHandler(error, adChain) {\n                if (error) {\n                    that._trackError(error, adChain);\n                    if (waterfallAds.length > 0) {\n                        getAd(waterfallAds.shift(), [], waterfallHandler);\n                    }\n                    else {\n                        callback(error, adChain);\n                    }\n                }\n                else {\n                    callback(null, adChain);\n                }\n            }\n        });\n        /*** Local functions ***/\n        function getAdWaterfall(adTagUrl, callback) {\n            var requestVastXML = that._requestVASTXml.bind(that, adTagUrl);\n            async.waterfall([requestVastXML, buildVastWaterfall], callback);\n        }\n        function buildVastWaterfall(xmlStr, callback) {\n            var vastTree;\n            try {\n                vastTree = xml.toJXONTree(xmlStr);\n                vastTree.ads = isArray(vastTree.ad) ? vastTree.ad : [vastTree.ad];\n                callback(validateVASTTree(vastTree), vastTree);\n            }\n            catch (e) {\n                callback(new VASTError('on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml', 100), null);\n            }\n        }\n        function validateVASTTree(vastTree) {\n            var vastVersion = xml.attr(vastTree, 'version');\n            if (!vastTree.ad) {\n                return new VASTError('on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree', 303);\n            }\n            if (vastVersion && vastVersion != 3 && vastVersion != 2) {\n                return new VASTError('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version \"' + vastVersion + '\"', 102);\n            }\n            return null;\n        }\n        function getAd(adTagUrl, adChain, callback) {\n            if (adChain.length >= that.WRAPPER_LIMIT) {\n                return callback(new VASTError('on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is ' + that.WRAPPER_LIMIT + ')', 302), adChain);\n            }\n            async.waterfall([\n                function (next) {\n                    if (isString(adTagUrl)) {\n                        requestVASTAd(adTagUrl, next);\n                    }\n                    else {\n                        next(null, adTagUrl);\n                    }\n                },\n                buildAd,\n            ], function (error, ad) {\n                if (ad) {\n                    adChain.push(ad);\n                }\n                if (error) {\n                    return callback(error, adChain);\n                }\n                if (ad.wrapper) {\n                    return getAd(ad.wrapper.VASTAdTagURI, adChain, callback);\n                }\n                return callback(null, adChain);\n            });\n        }\n        function buildAd(adJxonTree, callback) {\n            try {\n                var ad = new Ad(adJxonTree);\n                callback(validateAd(ad), ad);\n            }\n            catch (e) {\n                callback(new VASTError('on VASTClient.getVASTAd.buildAd, error parsing xml', 100), null);\n            }\n        }\n        function validateAd(ad) {\n            var wrapper = ad.wrapper;\n            var inLine = ad.inLine;\n            var errMsgPrefix = 'on VASTClient.getVASTAd.validateAd, ';\n            if (inLine && wrapper) {\n                return new VASTError(errMsgPrefix + 'InLine and Wrapper both found on the same Ad', 101);\n            }\n            if (!inLine && !wrapper) {\n                return new VASTError(errMsgPrefix + 'nor wrapper nor inline elements found on the Ad', 101);\n            }\n            if (inLine && inLine.creatives.length === 0) {\n                return new VASTError(errMsgPrefix + 'missing creative in InLine element', 101);\n            }\n            if (wrapper && !wrapper.VASTAdTagURI) {\n                return new VASTError(errMsgPrefix + \"missing 'VASTAdTagURI' in wrapper\", 101);\n            }\n        }\n        function requestVASTAd(adTagUrl, callback) {\n            that._requestVASTXml(adTagUrl, function (error, xmlStr) {\n                if (error) {\n                    return callback(error);\n                }\n                try {\n                    var vastTree = xml.toJXONTree(xmlStr);\n                    callback(validateVASTTree(vastTree), vastTree.ad);\n                }\n                catch (e) {\n                    callback(new VASTError('on VASTClient.getVASTAd.requestVASTAd, error parsing xml', 100));\n                }\n            });\n        }\n    };\n    VASTClient.prototype._requestVASTXml = function requestVASTXml(adTagUrl, callback) {\n        try {\n            if (isFunction(adTagUrl)) {\n                adTagUrl(requestHandler);\n            }\n            else {\n                http.get(adTagUrl, requestHandler, {\n                    withCredentials: true,\n                });\n            }\n        }\n        catch (e) {\n            callback(e);\n        }\n        /*** Local functions ***/\n        function requestHandler(error, response, status) {\n            if (error) {\n                var errMsg = isDefined(status)\n                    ? \"on VASTClient.requestVastXML, HTTP request error with status '\" + status + \"'\"\n                    : 'on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn';\n                return callback(new VASTError(errMsg, 301), null);\n            }\n            callback(null, response);\n        }\n    };\n    VASTClient.prototype._buildVASTResponse = function buildVASTResponse(adsChain) {\n        var response = new VASTResponse();\n        addAdsToResponse(response, adsChain);\n        validateResponse(response);\n        return response;\n        //*** Local function ****\n        function addAdsToResponse(response, ads) {\n            ads.forEach(function (ad) {\n                response.addAd(ad);\n            });\n        }\n        function validateResponse(response) {\n            var progressEvents = response.trackingEvents.progress;\n            if (!response.hasLinear()) {\n                throw new VASTError('on VASTClient._buildVASTResponse, Received an Ad type that is not supported', 200);\n            }\n            if (response.duration === undefined) {\n                throw new VASTError('on VASTClient._buildVASTResponse, Missing duration field in VAST response', 101);\n            }\n            if (progressEvents) {\n                progressEvents.forEach(function (progressEvent) {\n                    if (!isNumber(progressEvent.offset)) {\n                        throw new VASTError('on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event', 101);\n                    }\n                });\n            }\n        }\n    };\n    VASTClient.prototype._trackError = function (error, adChain) {\n        if (!isArray(adChain) || adChain.length === 0) {\n            //There is nothing to track\n            return;\n        }\n        var errorURLMacros = [];\n        adChain.forEach(addErrorUrlMacros);\n        vastUtil.track(errorURLMacros, { ERRORCODE: error.code || 900 }); //900 <== Undefined error\n        /*** Local functions  ***/\n        function addErrorUrlMacros(ad) {\n            if (ad.wrapper && ad.wrapper.error) {\n                errorURLMacros.push(ad.wrapper.error);\n            }\n            if (ad.inLine && ad.inLine.error) {\n                errorURLMacros.push(ad.inLine.error);\n            }\n        }\n    };\n    var VAST = {};\n    function VASTError(message, code) {\n        this.message = 'VAST Error: ' + (message || '');\n        if (code) {\n            this.code = code;\n        }\n    }\n    VASTError.prototype = new Error();\n    VASTError.prototype.name = 'VAST Error';\n    /**\n     * Inner helper class that deals with the logic of the individual steps needed to setup an ad in the player.\n     *\n     * @param player {object} instance of the player that will play the ad. It assumes that the videojs-contrib-ads plugin\n     *                        has been initialized when you use its utility functions.\n     *\n     * @constructor\n     */\n    function VASTIntegrator(player) {\n        if (!(this instanceof VASTIntegrator)) {\n            return new VASTIntegrator(player);\n        }\n        this.player = player;\n    }\n    VASTIntegrator.prototype.playAd = function playAd(vastResponse, callback) {\n        var that = this;\n        callback = callback || noop;\n        if (!(vastResponse instanceof VASTResponse)) {\n            return callback(new VASTError('On VASTIntegrator, missing required VASTResponse'));\n        }\n        async.waterfall([\n            function (next) {\n                next(null, vastResponse);\n            },\n            this._selectAdSource.bind(this),\n            this._createVASTTracker.bind(this),\n            this._addClickThrough.bind(this),\n            this._setupEvents.bind(this),\n            this._playSelectedAd.bind(this),\n        ], function (error, response) {\n            if (error && response) {\n                that._trackError(error, response);\n            }\n            callback(error, response);\n        });\n        this._adUnit = {\n            _src: null,\n            type: 'VAST',\n            pauseAd: function () {\n                that.player.pause(true); //video.js player pause\n            },\n            resumeAd: function () {\n                that.player.play(true);\n            },\n            isPaused: function () {\n                return that.player.paused(true);\n            },\n            getSrc: function () {\n                return this._src;\n            },\n        };\n        return this._adUnit;\n    };\n    VASTIntegrator.prototype._selectAdSource = function selectAdSource(response, callback) {\n        var source;\n        var playerWidth = dom.getDimension(this.player.el()).width;\n        response.mediaFiles.sort(function compareTo(a, b) {\n            var deltaA = Math.abs(playerWidth - a.width);\n            var deltaB = Math.abs(playerWidth - b.width);\n            return deltaA - deltaB;\n        });\n        source = this.player.selectSource(response.mediaFiles).source;\n        if (source) {\n            if (this._adUnit) {\n                this._adUnit._src = source;\n            }\n            return callback(null, source, response);\n        }\n        // code 403 <== Couldn't find MediaFile that is supported by this video player\n        callback(new VASTError('Could not find Ad mediafile supported by this player', 403), response);\n    };\n    VASTIntegrator.prototype._createVASTTracker = function createVASTTracker(adMediaFile, response, callback) {\n        try {\n            callback(null, adMediaFile, new VASTTracker(adMediaFile.src, response), response);\n        }\n        catch (e) {\n            callback(e, response);\n        }\n    };\n    VASTIntegrator.prototype._setupEvents = function setupEvents(adMediaFile, tracker, response, callback) {\n        var previouslyMuted;\n        var player = this.player;\n        player.on('fullscreenchange', trackFullscreenChange);\n        player.on('vast.adStart', trackImpressions);\n        player.on('pause', trackPause);\n        player.on('timeupdate', trackProgress);\n        player.on('volumechange', trackVolumeChange);\n        playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], unbindEvents);\n        playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel', 'vast.adSkip'], function (evt) {\n            if (evt.type === 'vast.adEnd') {\n                tracker.trackComplete();\n            }\n        });\n        return callback(null, adMediaFile, response);\n        /*** Local Functions ***/\n        function unbindEvents() {\n            player.off('fullscreenchange', trackFullscreenChange);\n            player.off('vast.adStart', trackImpressions);\n            player.off('pause', trackPause);\n            player.off('timeupdate', trackProgress);\n            player.off('volumechange', trackVolumeChange);\n        }\n        function trackFullscreenChange() {\n            if (player.isFullscreen()) {\n                tracker.trackFullscreen();\n            }\n            else {\n                tracker.trackExitFullscreen();\n            }\n        }\n        function trackPause() {\n            //NOTE: whenever a video ends the video Element triggers a 'pause' event before the 'ended' event.\n            //      We should not track this pause event because it makes the VAST tracking confusing again we use a\n            //      Threshold of 2 seconds to prevent false positives on IOS.\n            if (Math.abs(player.duration() - player.currentTime()) < 2) {\n                return;\n            }\n            tracker.trackPause();\n            playerUtils.once(player, ['play', 'vast.adEnd', 'vast.adsCancel'], function (evt) {\n                if (evt.type === 'play') {\n                    tracker.trackResume();\n                }\n            });\n        }\n        function trackProgress() {\n            var currentTimeInMs = player.currentTime() * 1000;\n            tracker.trackProgress(currentTimeInMs);\n        }\n        function trackImpressions() {\n            tracker.trackImpressions();\n            tracker.trackCreativeView();\n        }\n        function trackVolumeChange() {\n            var muted = player.muted();\n            if (muted) {\n                tracker.trackMute();\n            }\n            else if (previouslyMuted) {\n                tracker.trackUnmute();\n            }\n            previouslyMuted = muted;\n        }\n    };\n    VASTIntegrator.prototype._addClickThrough = function addClickThrough(mediaFile, tracker, response, callback) {\n        var player = this.player;\n        var blocker = createClickThroughBlocker(player, tracker, response);\n        var updateBlocker = updateBlockerURL.bind(this, blocker, response, player);\n        player.el().insertBefore(blocker, player.controlBar.el());\n        player.on('timeupdate', updateBlocker);\n        playerUtils.once(player, ['vast.adEnd', 'vast.adsCancel'], removeBlocker);\n        return callback(null, mediaFile, tracker, response);\n        /*** Local Functions ***/\n        function createClickThroughBlocker(player, tracker, response) {\n            var blocker = window.document.createElement('a');\n            var clickThroughMacro = response.clickThrough;\n            dom.addClass(blocker, 'vast-blocker');\n            blocker.href = generateClickThroughURL(clickThroughMacro, player);\n            if (isString(clickThroughMacro)) {\n                blocker.target = '_blank';\n            }\n            blocker.onclick = function (e) {\n                if (player.paused()) {\n                    player.play();\n                    //We prevent event propagation to avoid problems with the player's normal pause mechanism\n                    if (window.Event.prototype.stopPropagation !== undefined) {\n                        e.stopPropagation();\n                    }\n                    return false;\n                }\n                player.pause();\n                tracker.trackClick();\n            };\n            return blocker;\n        }\n        function updateBlockerURL(blocker, response, player) {\n            blocker.href = generateClickThroughURL(response.clickThrough, player);\n        }\n        function generateClickThroughURL(clickThroughMacro, player) {\n            var variables = {\n                ASSETURI: mediaFile.src,\n                CONTENTPLAYHEAD: vastUtil.formatProgress(player.currentTime() * 1000),\n            };\n            return clickThroughMacro ? vastUtil.parseURLMacro(clickThroughMacro, variables) : '#';\n        }\n        function removeBlocker() {\n            player.off('timeupdate', updateBlocker);\n            dom.remove(blocker);\n        }\n    };\n    VASTIntegrator.prototype._playSelectedAd = function playSelectedAd(source, response, callback) {\n        var player = this.player;\n        player.preload('auto'); //without preload=auto the durationchange event is never fired\n        player.src(source);\n        playerUtils.once(player, ['durationchange', 'error', 'vast.adsCancel'], function (evt) {\n            if (evt.type === 'durationchange') {\n                playAd();\n            }\n            else if (evt.type === 'error') {\n                callback(new VASTError('on VASTIntegrator, Player is unable to play the Ad', 400), response);\n            }\n            //NOTE: If the ads get canceled we do nothing/\n        });\n        /**** local functions ******/\n        function playAd() {\n            player.play();\n            playerUtils.once(player, ['playing', 'vast.adsCancel'], function (evt) {\n                if (evt.type === 'vast.adsCancel') {\n                    return;\n                }\n                player.trigger('vast.adStart');\n                playerUtils.once(player, ['ended', 'vast.adsCancel', 'vast.adSkip'], function (evt) {\n                    if (evt.type === 'ended' || evt.type === 'vast.adSkip') {\n                        callback(null, response);\n                    }\n                    //NOTE: if the ads get cancel we do nothing\n                });\n            });\n        }\n    };\n    VASTIntegrator.prototype._trackError = function trackError(error, response) {\n        vastUtil.track(response.errorURLMacros, { ERRORCODE: error.code || 900 });\n    };\n    (function (window) {\n        'use strict';\n        function VASTResponse() {\n            if (!(this instanceof VASTResponse)) {\n                return new VASTResponse();\n            }\n            this._linearAdded = false;\n            this.ads = [];\n            this.errorURLMacros = [];\n            this.impressions = [];\n            this.clickTrackings = [];\n            this.customClicks = [];\n            this.trackingEvents = {};\n            this.mediaFiles = [];\n            this.clickThrough = undefined;\n            this.adTitle = '';\n            this.duration = undefined;\n            this.skipoffset = undefined;\n        }\n        VASTResponse.prototype.addAd = function (ad) {\n            var inLine, wrapper;\n            if (ad instanceof Ad) {\n                inLine = ad.inLine;\n                wrapper = ad.wrapper;\n                this.ads.push(ad);\n                if (inLine) {\n                    this._addInLine(inLine);\n                }\n                if (wrapper) {\n                    this._addWrapper(wrapper);\n                }\n            }\n        };\n        VASTResponse.prototype._addErrorTrackUrl = function (error) {\n            var errorURL = error instanceof xml.JXONTree ? xml.keyValue(error) : error;\n            if (errorURL) {\n                this.errorURLMacros.push(errorURL);\n            }\n        };\n        VASTResponse.prototype._addImpressions = function (impressions) {\n            isArray(impressions) && appendToArray(this.impressions, impressions);\n        };\n        VASTResponse.prototype._addClickThrough = function (clickThrough) {\n            if (isNotEmptyString(clickThrough)) {\n                this.clickThrough = clickThrough;\n            }\n        };\n        VASTResponse.prototype._addClickTrackings = function (clickTrackings) {\n            isArray(clickTrackings) && appendToArray(this.clickTrackings, clickTrackings);\n        };\n        VASTResponse.prototype._addCustomClicks = function (customClicks) {\n            isArray(customClicks) && appendToArray(this.customClicks, customClicks);\n        };\n        VASTResponse.prototype._addTrackingEvents = function (trackingEvents) {\n            var eventsMap = this.trackingEvents;\n            if (trackingEvents) {\n                trackingEvents = isArray(trackingEvents) ? trackingEvents : [trackingEvents];\n                trackingEvents.forEach(function (trackingEvent) {\n                    if (!eventsMap[trackingEvent.name]) {\n                        eventsMap[trackingEvent.name] = [];\n                    }\n                    eventsMap[trackingEvent.name].push(trackingEvent);\n                });\n            }\n        };\n        VASTResponse.prototype._addTitle = function (title) {\n            if (isNotEmptyString(title)) {\n                this.adTitle = title;\n            }\n        };\n        VASTResponse.prototype._addDuration = function (duration) {\n            if (isNumber(duration)) {\n                this.duration = duration;\n            }\n        };\n        VASTResponse.prototype._addVideoClicks = function (videoClicks) {\n            if (videoClicks instanceof VideoClicks) {\n                this._addClickThrough(videoClicks.clickThrough);\n                this._addClickTrackings(videoClicks.clickTrackings);\n                this._addCustomClicks(videoClicks.customClicks);\n            }\n        };\n        VASTResponse.prototype._addMediaFiles = function (mediaFiles) {\n            isArray(mediaFiles) && appendToArray(this.mediaFiles, mediaFiles);\n        };\n        VASTResponse.prototype._addSkipoffset = function (offset) {\n            if (offset) {\n                this.skipoffset = offset;\n            }\n        };\n        VASTResponse.prototype._addAdParameters = function (adParameters) {\n            if (adParameters) {\n                this.adParameters = adParameters;\n            }\n        };\n        VASTResponse.prototype._addLinear = function (linear) {\n            if (linear instanceof Linear) {\n                this._addDuration(linear.duration);\n                this._addTrackingEvents(linear.trackingEvents);\n                this._addVideoClicks(linear.videoClicks);\n                this._addMediaFiles(linear.mediaFiles);\n                this._addSkipoffset(linear.skipoffset);\n                this._addAdParameters(linear.adParameters);\n                this._linearAdded = true;\n            }\n        };\n        VASTResponse.prototype._addInLine = function (inLine) {\n            var that = this;\n            if (inLine instanceof InLine) {\n                this._addTitle(inLine.adTitle);\n                this._addErrorTrackUrl(inLine.error);\n                this._addImpressions(inLine.impressions);\n                inLine.creatives.forEach(function (creative) {\n                    if (creative.linear) {\n                        that._addLinear(creative.linear);\n                    }\n                });\n            }\n        };\n        VASTResponse.prototype._addWrapper = function (wrapper) {\n            var that = this;\n            if (wrapper instanceof Wrapper) {\n                this._addErrorTrackUrl(wrapper.error);\n                this._addImpressions(wrapper.impressions);\n                wrapper.creatives.forEach(function (creative) {\n                    var linear = creative.linear;\n                    if (linear) {\n                        that._addVideoClicks(linear.videoClicks);\n                        that.clickThrough = undefined; //We ensure that no clickThrough has been added\n                        that._addTrackingEvents(linear.trackingEvents);\n                    }\n                });\n            }\n        };\n        VASTResponse.prototype.hasLinear = function () {\n            return this._linearAdded;\n        };\n        function appendToArray(array, items) {\n            items.forEach(function (item) {\n                array.push(item);\n            });\n        }\n        window.VASTResponse = VASTResponse;\n    })(window);\n    function VASTTracker(assetURI, vastResponse) {\n        if (!(this instanceof VASTTracker)) {\n            return new VASTTracker(assetURI, vastResponse);\n        }\n        sanityCheck(assetURI, vastResponse);\n        this.response = vastResponse;\n        this.assetURI = assetURI;\n        this.progress = 0;\n        this.quartiles = {\n            firstQuartile: { tracked: false, time: Math.round(25 * vastResponse.duration) / 100 },\n            midpoint: { tracked: false, time: Math.round(50 * vastResponse.duration) / 100 },\n            thirdQuartile: { tracked: false, time: Math.round(75 * vastResponse.duration) / 100 },\n        };\n        /*** Local Functions ***/\n        function sanityCheck(assetURI, vastResponse) {\n            if (!isString(assetURI) || isEmptyString(assetURI)) {\n                throw new VASTError('on VASTTracker constructor, missing required the URI of the ad asset being played');\n            }\n            if (!(vastResponse instanceof VASTResponse)) {\n                throw new VASTError('on VASTTracker constructor, missing required VAST response');\n            }\n        }\n    }\n    VASTTracker.prototype.trackURLs = function trackURLs(urls, variables) {\n        if (isArray(urls) && urls.length > 0) {\n            variables = extend({\n                ASSETURI: this.assetURI,\n                CONTENTPLAYHEAD: vastUtil.formatProgress(this.progress),\n            }, variables || {});\n            vastUtil.track(urls, variables);\n        }\n    };\n    VASTTracker.prototype.trackEvent = function trackEvent(eventName, trackOnce) {\n        this.trackURLs(getEventUris(this.response.trackingEvents[eventName]));\n        if (trackOnce) {\n            this.response.trackingEvents[eventName] = undefined;\n        }\n        /*** Local function ***/\n        function getEventUris(trackingEvents) {\n            var uris;\n            if (trackingEvents) {\n                uris = [];\n                trackingEvents.forEach(function (event) {\n                    uris.push(event.uri);\n                });\n            }\n            return uris;\n        }\n    };\n    VASTTracker.prototype.trackProgress = function trackProgress(newProgressInMs) {\n        var events = [];\n        var ONCE = true;\n        var ALWAYS = false;\n        var trackingEvents = this.response.trackingEvents;\n        if (isNumber(newProgressInMs)) {\n            addTrackEvent('start', ONCE, newProgressInMs > 0);\n            addTrackEvent('rewind', ALWAYS, hasRewound(this.progress, newProgressInMs));\n            addQuartileEvents.call(this, newProgressInMs);\n            trackProgressEvents.call(this, newProgressInMs);\n            trackEvents.call(this);\n            this.progress = newProgressInMs;\n        }\n        /*** Local function ***/\n        function hasRewound(currentProgress, newProgress) {\n            var REWIND_THRESHOLD = 3000; //IOS video clock is very unreliable and we need a 3 seconds threshold to ensure that there was a rewind an that it was on purpose.\n            return currentProgress > newProgressInMs && Math.abs(newProgress - currentProgress) > REWIND_THRESHOLD;\n        }\n        function addTrackEvent(eventName, trackOnce, canBeAdded) {\n            if (trackingEvents[eventName] && canBeAdded) {\n                events.push({\n                    name: eventName,\n                    trackOnce: !!trackOnce,\n                });\n            }\n        }\n        function addQuartileEvents(progress) {\n            var quartiles = this.quartiles;\n            var firstQuartile = this.quartiles.firstQuartile;\n            var midpoint = this.quartiles.midpoint;\n            var thirdQuartile = this.quartiles.thirdQuartile;\n            if (!firstQuartile.tracked) {\n                trackQuartile('firstQuartile', progress);\n            }\n            else if (!midpoint.tracked) {\n                trackQuartile('midpoint', progress);\n            }\n            else {\n                trackQuartile('thirdQuartile', progress);\n            }\n            /*** Local function ***/\n            function trackQuartile(quartileName, progress) {\n                var quartile = quartiles[quartileName];\n                if (canBeTracked(quartile, progress)) {\n                    quartile.tracked = true;\n                    addTrackEvent(quartileName, ONCE, true);\n                }\n            }\n        }\n        function canBeTracked(quartile, progress) {\n            var quartileTime = quartile.time;\n            //We only fire the quartile event if the progress is bigger than the quartile time by 5 seconds at most.\n            return progress >= quartileTime && progress <= quartileTime + 5000;\n        }\n        function trackProgressEvents(progress) {\n            if (!isArray(trackingEvents.progress)) {\n                return; //Nothing to track\n            }\n            var pendingProgressEvts = [];\n            var that = this;\n            trackingEvents.progress.forEach(function (evt) {\n                if (evt.offset <= progress) {\n                    that.trackURLs([evt.uri]);\n                }\n                else {\n                    pendingProgressEvts.push(evt);\n                }\n            });\n            trackingEvents.progress = pendingProgressEvts;\n        }\n        function trackEvents() {\n            events.forEach(function (event) {\n                this.trackEvent(event.name, event.trackOnce);\n            }, this);\n        }\n    };\n    [\n        'rewind',\n        'fullscreen',\n        'exitFullscreen',\n        'pause',\n        'resume',\n        'mute',\n        'unmute',\n        'acceptInvitation',\n        'acceptInvitationLinear',\n        'collapse',\n        'expand',\n    ].forEach(function (eventName) {\n        VASTTracker.prototype['track' + capitalize(eventName)] = function () {\n            this.trackEvent(eventName);\n        };\n    });\n    ['start', 'skip', 'close', 'closeLinear'].forEach(function (eventName) {\n        VASTTracker.prototype['track' + capitalize(eventName)] = function () {\n            this.trackEvent(eventName, true);\n        };\n    });\n    ['firstQuartile', 'midpoint', 'thirdQuartile'].forEach(function (quartile) {\n        VASTTracker.prototype['track' + capitalize(quartile)] = function () {\n            this.quartiles[quartile].tracked = true;\n            this.trackEvent(quartile, true);\n        };\n    });\n    VASTTracker.prototype.trackComplete = function () {\n        if (this.quartiles.thirdQuartile.tracked) {\n            this.trackEvent('complete', true);\n        }\n    };\n    VASTTracker.prototype.trackErrorWithCode = function trackErrorWithCode(errorcode) {\n        if (isNumber(errorcode)) {\n            this.trackURLs(this.response.errorURLMacros, { ERRORCODE: errorcode });\n        }\n    };\n    VASTTracker.prototype.trackImpressions = function trackImpressions() {\n        this.trackURLs(this.response.impressions);\n    };\n    VASTTracker.prototype.trackCreativeView = function trackCreativeView() {\n        this.trackEvent('creativeView');\n    };\n    VASTTracker.prototype.trackClick = function trackClick() {\n        this.trackURLs(this.response.clickTrackings);\n    };\n    function VideoClicks(videoClickJTree) {\n        if (!(this instanceof VideoClicks)) {\n            return new VideoClicks(videoClickJTree);\n        }\n        this.clickThrough = xml.keyValue(videoClickJTree.clickThrough);\n        this.clickTrackings = parseClickTrackings(videoClickJTree.clickTracking);\n        this.customClicks = parseClickTrackings(videoClickJTree.customClick);\n        /*** Local functions ***/\n        function parseClickTrackings(trackingData) {\n            var clickTrackings = [];\n            if (trackingData) {\n                trackingData = isArray(trackingData) ? trackingData : [trackingData];\n                trackingData.forEach(function (clickTrackingData) {\n                    clickTrackings.push(xml.keyValue(clickTrackingData));\n                });\n            }\n            return clickTrackings;\n        }\n    }\n    function Wrapper(wrapperJTree) {\n        if (!(this instanceof Wrapper)) {\n            return new Wrapper(wrapperJTree);\n        }\n        //Required elements\n        this.adSystem = xml.keyValue(wrapperJTree.adSystem);\n        this.impressions = vastUtil.parseImpressions(wrapperJTree.impression);\n        this.VASTAdTagURI = xml.keyValue(wrapperJTree.vASTAdTagURI);\n        //Optional elements\n        this.creatives = vastUtil.parseCreatives(wrapperJTree.creatives);\n        this.error = xml.keyValue(wrapperJTree.error);\n        this.extensions = wrapperJTree.extensions;\n        //Optional attrs\n        this.followAdditionalWrappers = isDefined(xml.attr(wrapperJTree, 'followAdditionalWrappers'))\n            ? xml.attr(wrapperJTree, 'followAdditionalWrappers')\n            : true;\n        this.allowMultipleAds = xml.attr(wrapperJTree, 'allowMultipleAds');\n        this.fallbackOnNoAd = xml.attr(wrapperJTree, 'fallbackOnNoAd');\n    }\n    ('use strict');\n    var vastUtil = {\n        track: function track(URLMacros, variables) {\n            var sources = vastUtil.parseURLMacros(URLMacros, variables);\n            var trackImgs = [];\n            sources.forEach(function (src) {\n                var img = new Image();\n                img.src = src;\n                trackImgs.push(img);\n            });\n            return trackImgs;\n        },\n        parseURLMacros: function parseMacros(URLMacros, variables) {\n            var parsedURLs = [];\n            variables = variables || {};\n            if (!variables['CACHEBUSTING']) {\n                variables['CACHEBUSTING'] = Math.round(Math.random() * 1.0e10);\n            }\n            URLMacros.forEach(function (URLMacro) {\n                parsedURLs.push(vastUtil._parseURLMacro(URLMacro, variables));\n            });\n            return parsedURLs;\n        },\n        parseURLMacro: function parseMacro(URLMacro, variables) {\n            variables = variables || {};\n            if (!variables['CACHEBUSTING']) {\n                variables['CACHEBUSTING'] = Math.round(Math.random() * 1.0e10);\n            }\n            return vastUtil._parseURLMacro(URLMacro, variables);\n        },\n        _parseURLMacro: function parseMacro(URLMacro, variables) {\n            variables = variables || {};\n            forEach(variables, function (value, key) {\n                URLMacro = URLMacro.replace(new RegExp('\\\\[' + key + '\\\\]', 'gm'), value);\n            });\n            return URLMacro;\n        },\n        parseDuration: function parseDuration(durationStr) {\n            var durationRegex = /(\\d\\d):(\\d\\d):(\\d\\d)(\\.(\\d\\d\\d))?/;\n            var match, durationInMs;\n            if (isString(durationStr)) {\n                match = durationStr.match(durationRegex);\n                if (match) {\n                    durationInMs =\n                        parseHoursToMs(match[1]) + parseMinToMs(match[2]) + parseSecToMs(match[3]) + parseInt(match[5] || 0);\n                }\n            }\n            return isNaN(durationInMs) ? null : durationInMs;\n            /*** local functions ***/\n            function parseHoursToMs(hourStr) {\n                return parseInt(hourStr, 10) * 60 * 60 * 1000;\n            }\n            function parseMinToMs(minStr) {\n                return parseInt(minStr, 10) * 60 * 1000;\n            }\n            function parseSecToMs(secStr) {\n                return parseInt(secStr, 10) * 1000;\n            }\n        },\n        parseImpressions: function parseImpressions(impressions) {\n            if (impressions) {\n                impressions = isArray(impressions) ? impressions : [impressions];\n                return transformArray(impressions, function (impression) {\n                    if (isNotEmptyString(impression.keyValue)) {\n                        return impression.keyValue;\n                    }\n                    return undefined;\n                });\n            }\n            return [];\n        },\n        parseCreatives: function parseCreatives(creativesJTree) {\n            var creatives = [];\n            var creativesData;\n            if (isDefined(creativesJTree) && isDefined(creativesJTree.creative)) {\n                creativesData = isArray(creativesJTree.creative) ? creativesJTree.creative : [creativesJTree.creative];\n                creativesData.forEach(function (creative) {\n                    creatives.push(new Creative(creative));\n                });\n            }\n            return creatives;\n        },\n        //We assume that the progress is going to arrive in milliseconds\n        formatProgress: function formatProgress(progress) {\n            var hours, minutes, seconds, milliseconds;\n            hours = progress / (60 * 60 * 1000);\n            hours = Math.floor(hours);\n            minutes = (progress / (60 * 1000)) % 60;\n            minutes = Math.floor(minutes);\n            seconds = (progress / 1000) % 60;\n            seconds = Math.floor(seconds);\n            milliseconds = progress % 1000;\n            return (toFixedDigits(hours, 2) +\n                ':' +\n                toFixedDigits(minutes, 2) +\n                ':' +\n                toFixedDigits(seconds, 2) +\n                '.' +\n                toFixedDigits(milliseconds, 3));\n        },\n        parseOffset: function parseOffset(offset, duration) {\n            if (isPercentage(offset)) {\n                return calculatePercentage(offset, duration);\n            }\n            return vastUtil.parseDuration(offset);\n            /*** Local function ***/\n            function isPercentage(offset) {\n                var percentageRegex = /^\\d+(\\.\\d+)?%$/g;\n                return percentageRegex.test(offset);\n            }\n            function calculatePercentage(percentStr, duration) {\n                if (duration) {\n                    return calcPercent(duration, parseFloat(percentStr.replace('%', '')));\n                }\n                return null;\n            }\n            function calcPercent(quantity, percent) {\n                return (quantity * percent) / 100;\n            }\n        },\n        isVPAID: function isVPAIDMediaFile(mediaFile) {\n            return !!mediaFile && mediaFile.apiFramework === 'VPAID';\n        },\n    };\n})(window, document, videojs);\n/* jshint ignore:end */\n"},8330:e=>{"use strict";e.exports={rE:"8.4.1"}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";window.APNVideo_VastVideoPlayer||(window.APNVideo_VastVideoPlayer=__webpack_require__(3365)),__webpack_require__(5981)})()})();