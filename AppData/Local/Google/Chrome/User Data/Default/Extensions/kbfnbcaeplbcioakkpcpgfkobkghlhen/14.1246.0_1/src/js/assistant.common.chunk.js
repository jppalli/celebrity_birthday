(self.webpackChunk=self.webpackChunk||[]).push([[8721],{84857:(e,t,i)=>{var n=i(56518),r="chrome-extension://__MSG_@@extension_id__/",a="moz-extension://__MSG_@@extension_id__/",s="safari-web-extension://__MSG_@@extension_id__/",o=self.GR_RESOURCE_ROOT||r,l=self.GR_RESOURCE_ROOT||a,c=self.GR_RESOURCE_ROOT||s;e.exports={__css:n.toString().replace(new RegExp(r,"g"),o).replace(new RegExp(a,"g"),l).replace(new RegExp(s,"g"),c),...n.locals}},91735:(e,t,i)=>{i.d(t,{b:()=>s});var n=i(92379),r=i(20182),a=i(18506);function s(){const[e,t]=n.useState(!1);return n.useEffect((()=>{(0,a.OB)().experimentClient.isGateEnabled(r.K.AssistantInSidePanel)&&(0,a.OB)().bgRpc.api.isSidePanelSupported().then(t)}),[]),e}},90387:(e,t,i)=>{i.d(t,{c:()=>a});var n=i(47230),r=i(18506);function a(){const e=(0,r.OB)().experimentClient;return!("autocorrect_disabled"===e.getTreatment(n.p.DisableAutoCorrectAndAutoComplete)||"both_disabled"===e.getTreatment(n.p.DisableAutoCorrectAndAutoComplete))}},83854:(e,t,i)=>{i.d(t,{t:()=>n});const n=e=>(e=>"Cheetah/_System/Push/SimplifyRewrite"===e)(e)||(e=>"Cheetah/_System/Push/ImproveParagraph"===e)(e)},68490:(e,t,i)=>{i.d(t,{G:()=>o,m:()=>s});var n=i(92379),r=i(22408),a=i(18931);const s=26,o=n.forwardRef((function({forceTooltipMessage:e,onClick:t,onMouseEnter:i,onMouseLeave:s},o){return n.createElement(r.u,{message:"Rewrite with Grammarly",forcedMessage:e},n.createElement("button",{onClick:t,"data-grammarly-part":"cheetah-ideate-button","aria-label":"Rewrite with Grammarly",className:a.ideateButton,ref:o,onMouseEnter:i,onMouseLeave:s},n.createElement("div",{className:a.ideateButtonIcon})))}))},97884:(e,t,i)=>{if(i.d(t,{FU:()=>p,OY:()=>C,Td:()=>g,UI:()=>f,XG:()=>_,eC:()=>u,ex:()=>k,gO:()=>l,r4:()=>v,sO:()=>y,xq:()=>h}),1388==i.j)var n=i(90023);if(1388==i.j)var r=i(58303);if(1388==i.j)var a=i(88347);var s=i(18669),o=i(23031);function l(e,t){var i,n,r;const a=null===(r=null===(n=null===(i=null==t?void 0:t.citationBuilder)||void 0===i?void 0:i.domains)||void 0===n?void 0:n[e])||void 0===r?void 0:r.disabled;return void 0!==a?!a:void 0}function c(e,t){return w(t).some((t=>new RegExp(t.domain).test(e)))}function d(e){var t,i;return!(null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.disabled)&&void 0!==i&&i)}function u(e,t){return w(t).some((t=>{const i=new RegExp(t.domain),n=new RegExp(t.pathname);return i.test(e.hostname)&&n.test(e.pathname)}))}function h(e){return r.Y3((()=>{const t=new URL(e).hostname.split(".");return t.slice(t.length-2).join(".")}))}function g(e,t,i,n){return i?function(e,t,i){const n=l(e,i);return d(t)&&(void 0===n&&c(e,t)||!0===n)}(e,t,n):function(e,t,i){return d(t)&&c(e,t)&&!1!==l(e,i)}(e,t,n)}function p(e,t){return w(t).some((t=>new RegExp(t.domain).test(e)&&!0===t.reparse))}const m={verticalLocation:"bottom",horizontalLocation:"left",offsetX:17,offsetY:32};function f(e,t){var i;return(null===(i=w(t).find((t=>new RegExp(t.domain).test(e))))||void 0===i?void 0:i.buttonPosition)||m}function v(e,t,i){return d(t)&&(i?!function(e,t){var i,n;return(null!==(n=null===(i=t.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==n?n:[]).includes(e)}(e,t):c(e,t))}function b(e,t){var i,n,r;const a=new Set(null!==(n=null===(i=e.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==n?n:[]);return Object.entries((null===(r=t.citationBuilder)||void 0===r?void 0:r.domains)||{}).filter((([,e])=>void 0!==e&&!e.disabled)).filter((([e])=>{return t=e,!a.has(t);var t})).map((([e])=>e))}function w(e){var t,i;return null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.sources)&&void 0!==i?i:[]}const S=(0,o.hz)((()=>{const e=document.location.href;return(0,s.KK)(e)}));function y(e){const t=e=>`^${e.replace(/\./g,"\\.")}$`;return{sources:w(e.dynamicConfig),explicitlyEnabledDomainsWithRegexStrings:b(e.dynamicConfig,e.page).map((e=>[e,t(e)]))}}const k=(0,o.hz)((e=>{const t=document.location.href;return{url:t,domain:(0,s.KK)(t),isUrlAllowlisted:u(document.location,e)}})),E=(0,o.hz)((()=>o.iy.create()));function _(e){const t=E(),i=S();return(0,n.zG)(e,(0,a.H6)("citeCopyButtonClick","citeCopyIntextClick","citePopupButtonDisable","citePopupButtonShow","citePopupEditClick","citePopupButtonClick","citePopupEditSuccess","citePopupMissingInfoShow","citePopupMissingInfoFormShow","feedbackSentButtonClick","citePopupAddMissingClick"),(e=>({...e,domain:i,sessionId:t})))}function C(e,t){return e.manualInvocation&&!0===l(t.domain,t)}},79096:(e,t,i)=>{i.d(t,{R:()=>n});var n,r=i(32329),a=i(20182),s=i(18669),o=i(7221),l=i(4256),c=i(23031),d=i(18506);!function(e){function t(e,t=(0,d.OB)(),i,n){return((0,s.t_)(i,n)?t.experimentClient.isGateEnabled(a.K.ConnectorGdocs):t.experimentClient.isGateEnabled(a.K.ConnectorNonGdocs))&&e.isMac&&(0,o.i7)()}e.shouldEnableFieldIntegration=t,e.shouldShowPermissionPopup=function(e,i=0,n=(0,d.OB)()){return Promise.resolve(i+l.v0<Date.now()&&t(e,n)&&n.bgRpc.api.isPermissionGranted(r.d.nativeMessaging).then(c.X0))}}(n||(n={}))},38476:(e,t,i)=>{i.d(t,{g:()=>u});var n=i(92379),r=i(79096),a=i(34420),s=i(32329),o=i(86297),l=i(56209),c=i(18506),d=i(21120);const u=n.memo((function(e){const[t,i]=n.useState(!1),u=n.useCallback((()=>{const{connector:e}=(0,l.Tb)();e.permissionViewClicked("settingPopup"),(0,c.OB)().bgRpc.api.requestGrantPermissionAndReloadExtOnAccept(s.d.nativeMessaging)}),[]);return n.useEffect((()=>{e.url&&Promise.all([(0,c.OB)().bgRpc.api.getSystemInfo().then((({os:t})=>r.R.shouldEnableFieldIntegration(t,(0,c.OB)(),e.url,e.domain))),a.C.isGranted(s.d.nativeMessaging)]).then((([e,t])=>{i(e&&!t)}))}),[]),n.useEffect((()=>{t&&(0,l.Tb)().connector.permissionViewShow("settingPopup")}),[t]),t?n.createElement(o.w,null,n.createElement(d.b,{onClick:u})):null}))},21120:(e,t,i)=>{i.d(t,{b:()=>d});var n=i(92379),r=i(19294),a=i(88813),s=i(43150),o=i(45656),l=i(38578),c=i(33457);const d=e=>n.createElement(r.k,{direction:"row",style:{gap:"12px",width:"100%",backgroundColor:a.Gold0,borderBottom:`1px solid ${a.Gold10}`},padding:"8px 16px 10px 16px"},n.createElement(r.k,{width:"36px"},n.createElement(c.u,null)),n.createElement(r.k,{direction:"column",style:{gap:"8px"}},n.createElement(r.k,{direction:"column",style:{gap:"2px"}},n.createElement(s.X,{as:"h1",variant:"heading-xxsmall",style:{marginTop:"4px"}},"Boost Grammarly’s Performance"),n.createElement(o.x,{as:"p",variant:"text-xsmall"},"Allow the Grammarly Chrome extension to connect with the desktop app to provide suggestions faster.")),n.createElement(l.z,{variant:"ghost",onClick:e.onClick,text:"Continue",size:"small",style:{position:"relative",left:"-8px"}})))},34420:(e,t,i)=>{i.d(t,{C:()=>n});var n,r=i(81058);!function(e){e.isGranted=function(e,t=(0,r.O)().browserApi.permissions){return t?t.contains({permissions:[e]}):Promise.resolve(!1)},e.request=function(e,t=(0,r.O)().browserApi.permissions){return t?t.request({permissions:[e]}):Promise.resolve(!1)}}(n||(n={}))},32329:(e,t,i)=>{var n;i.d(t,{d:()=>n}),function(e){e.nativeMessaging="nativeMessaging",e.clipboardRead="clipboardRead"}(n||(n={}))},36986:(e,t,i)=>{i.d(t,{V:()=>a,X:()=>s});var n=i(20182),r=i(47230);function a(e){return e.isGateEnabled(n.K.GOSRollout)||"test"===e.getTreatment(r.p.GOSRollout)}function s(e){return!!a(e)&&(e.isGateEnabled(n.K.OggyOnGOS)||"test"===e.getTreatment(r.p.OggyOnGOS))}},33368:(e,t,i)=>{i.d(t,{x:()=>a});var n=i(92379),r=i(90447);function a({node:e}){const t=n.useContext(r.nS.Context);return n.useEffect((()=>{if(t&&!e.isConnected)return t.prepend(e),()=>e.remove()}),[e]),null}},86297:(e,t,i)=>{i.d(t,{w:()=>c});var n=i(92379),r=i(37489),a=i(30101),s=i(9358),o=i(33368);const l=r.D;function c(e){const t=n.useMemo((()=>{const e=document.createElement("div");e.style.position="absolute",e.style.zIndex=String(s.op);const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=(0,a.n)("designSystem"),e.appendChild(t),e}),[]);return n.createElement(n.Fragment,null,n.createElement(l,{default:t},n.createElement(a.L,{chunkName:"designSystem"},e.children)),n.createElement(o.x,{node:t}))}},66795:(e,t,i)=>{i.d(t,{SU:()=>f,U8:()=>b,gm:()=>v,ol:()=>m});var n=i(90023),r=i(92379),a=i(13391),s=i(50750),o=i(59179),l=i(18519),c=i(66878),d=i(84714),u=i(14969),h=i(58303),g=i(20182),p=i(78542);const m=(e,t)=>!e.anonymous&&!e.premium&&t.isGateEnabled(g.K.InProductDiscountSpecialOffer),f=e=>(0,n.zG)(s.D(e.getSpecialOffer({names:["in_product_discount_pro"]})),o.U((0,n.ls)(h.Uo,h.tS((e=>h.ij(e.in_product_discount_pro))),h.UI((e=>!0===e.eligibility)))),l.V(2e3),c.K((()=>(p.Y.create("inProductDiscount").warn("getSpecialOffer request did not finish within 2000ms"),d.of(h.of(!1))))),u.P()),v=(e,t)=>a.h.combine(e,t,((e,t)=>({...e,hasSpecialOffer:t}))),b=r.createContext({hasSpecialOffer:a.h.create(!1)})},414:(e,t,i)=>{i.d(t,{Zq:()=>r,qQ:()=>s,u1:()=>a});var n=i(70394);function r(e,t){return{type:n.lY.Type.sduiCardAction,actions:e,sourceId:t,cardId:"",scope:{alertRefs:[]}}}const a=e=>e.startsWith("Plagiarism/Plagiarism/UnoriginalContent"),s={enablePlagiarismSearch:()=>{throw new Error("Not implemented enablePlagiarismSearch")},disablePlagiarismSearch:()=>{throw new Error("Not implemented disablePlagiarismSearch")}}},68932:(e,t,i)=>{i.d(t,{u:()=>r,y:()=>n});var n,r,a=i(64297),s=i(97472),o=i(2223);function l({id:e,touchTypistId:t,kind:i,replacement:n,previewDelta:r,revertDelta:a,highlightRanges:o,highlightTexts:l,transformRange:c,transformText:d,title:u}){return{_tag:s.b.touchTypist,id:e,touchTypistId:t,kind:i,replacement:n,previewDelta:r,revertDelta:a,revision:"",highlightRanges:o,highlightTexts:l,transformRange:c,transformText:d,transforms:[],extraProperties:{},title:u}}!function(e){e.Preview="Preview",e.RecentRevert="RecentRevert",e.Revert="Revert"}(n||(n={})),function(e){function t(e,t){const i=e=>""===e.trim();return i(e)||i(t)?i(t)?`Removed “${e}”`:`Added “${t}”`:e}e.is=function(e){return e._tag===s.b.touchTypist},e.equals=function(e,t){return s.S.ordering.areSame(e,t)},e.createHighlightsMeta=function(e,t){return{highlightId:t,alertId:e.id,...function(e){switch(e){case n.Preview:return{highlightColor:o.hE.Preset.create(o.al.red),highlightDisplayFormat:o.jk.underlineAndPersistentBackground};case n.RecentRevert:return{highlightColor:o.hE.Preset.create(o.al.green),highlightDisplayFormat:o.jk.background};case n.Revert:return{highlightColor:o.hE.Preset.create(o.al.gray),highlightDisplayFormat:o.jk.dottedUnderlineAndBackground};default:(0,a.L0)(e)}}(e.kind),highlightDisappearOnHoverDelay:null,highlightLiveliness:null}},e.fromPreview=function(){return({id:e,touchTypistId:t,begin:i,end:r,original:a,highlight:s,replacement:o,delta:c,reverseDelta:d})=>{const u={start:s.s,end:s.e},h=s.text,g={start:i,end:r},p=a;return l({id:String(e),touchTypistId:t,kind:n.Preview,replacement:o,previewDelta:c,revertDelta:d,highlightRanges:[u],highlightTexts:[h],transformRange:g,transformText:p,title:""})}},e.fromRevert=function(){return({revertId:e,touchTypistId:i,highlightBegin:r,highlightEnd:a,highlightText:s,text:o,isRecent:c,correspondingPreview:d})=>{const u={start:r,end:a},h=u,g=s;return l({id:String(e),touchTypistId:i,kind:c?n.RecentRevert:n.Revert,replacement:o,previewDelta:d.delta,revertDelta:d.reverseDelta,highlightRanges:[u],highlightTexts:[s],transformRange:h,transformText:g,title:t(o,d.replacement)})}},e.createRevertTitle=t}(r||(r={}))},1211:(e,t,i)=>{i.d(t,{F:()=>w});var n=i(92379),r=i(98227),a=i(19294),s=i(71668),o=i(56845),l=i(45656),c=i(42636),d=i(31409),u=i(72741),h=i(46803),g=i(38578),p=i(24909),m=i(13391),f=i(49079),v=i(45611),b=i(97578);const w=({userId:e,settings:t,isMac:i,actions:w,gnar:S})=>{var y,k;const E=null!==(y=null==t?void 0:t.enabled)&&void 0!==y?y:f.Y.enabled,_=n.useRef(null),C=m.h.create(!1),A=null!==(k=null==t?void 0:t.hotkey)&&void 0!==k?k:"Tab",I=new v.c(A,C);n.useEffect((()=>{const e=I.listenToHotkeyChange(i);return()=>{e.unsubscribe()}})),n.useEffect((()=>{const e=I.isActiveHotkeyChange.subscribe((e=>{e&&setTimeout((()=>{_.current&&(_.current.focus(),C.set(!0))}),0)}));return()=>e.unsubscribe()}),[I.isActiveHotkeyChange]);const x=n.useCallback((t=>{(async()=>{await w.toggleTouchTypist(t),await w.setTouchTypistToggledByUser({userId:e,value:!0}),await S.touchTypistSettingsToggleClick(t?"on":"off")})()}),[e]),T=()=>{const e=I.tmpHotkey.get();e===A?I.onDismissHotkeyChange():(I.onApplyHotkeyChange(w),S.touchTypistSettingsEditHotkeyButtonClick(e))};return n.createElement(a.k,{direction:"column",gap:2},n.createElement(a.k,{gap:2,justify:"start",className:b.heading,color:"base-default"},"Quick fix",n.createElement(s.V,{label:"Beta",variant:"addition"})),n.createElement(o.r,{label:"Accept all critical suggestions with a key",isSelected:E,onChange:x}),n.createElement(a.k,{direction:"row",justify:"space-between",align:"center"},n.createElement(l.x,{color:"base-default",as:"span",variant:"text-xsmall",className:b.labelsFont},"Quick fix key"),n.createElement(p.F.div,{className:b.labelsFont},m.h.combine(I.tmpHotkey,I.isActiveHotkeyChange,((e,t)=>t?n.createElement(c.n,{ref:_,value:e,style:{width:r.ux.px(130)},labelDisplay:"hidden",label:"Change quick fix key",onBlur:()=>C.set(!1)}):n.createElement(l.x,{color:"base-default",as:"span",variant:"text-xsmall"},e)))),n.createElement(p.F.div,null,I.isActiveHotkeyChange.view((e=>e?n.createElement(a.k,{gap:.5},n.createElement(d.h,{"data-testid":"accept-shortcut-change",accessibilityLabel:"Accept",style:{backgroundColor:"#11A683"},variant:"primary",icon:u.L,onClick:T}),n.createElement(d.h,{"data-testid":"dismiss-shortcut-change",accessibilityLabel:"Dismiss",variant:"secondary",icon:h.V,onClick:()=>I.onDismissHotkeyChange()})):n.createElement(g.z,{variant:"ghost",onClick:()=>I.onIsActiveHotkeyChange()},"Edit"))))))}},45611:(e,t,i)=>{i.d(t,{c:()=>d});var n=i(13391),r=i(84308),a=i(59179),s=i(20161),o=i(36344),l=i(63532),c=i(68945);class d{constructor(e,t){this._lastSubmittedShortcutValue=e,this._isInputFocused=t,this._isActiveHotkeyChange=n.h.create(!1),this.onApplyHotkeyChange=e=>{e.setTouchTypistHotkey({hotkey:this._tmpHotkey.get()}),this._isActiveHotkeyChange.set(!1)},this.onDismissHotkeyChange=()=>{this._tmpHotkey.set(this._lastSubmittedShortcutValue),this._isActiveHotkeyChange.set(!1)},this.onIsActiveHotkeyChange=()=>{this._isActiveHotkeyChange.set(!0)},this._tmpHotkey=n.h.create(this._lastSubmittedShortcutValue)}listenToHotkeyChange(e){return r.a([this._isActiveHotkeyChange,this._isInputFocused]).pipe(a.U((([e,t])=>e&&t)),s.w((t=>t?(0,c.A8)(self,e):o.E)),l.b((({shortcut:e})=>{this._tmpHotkey.set(e)}))).subscribe()}get isActiveHotkeyChange(){return this._isActiveHotkeyChange}get tmpHotkey(){return this._tmpHotkey}}},68945:(e,t,i)=>{i.d(t,{A8:()=>v,_w:()=>b});var n=i(44071),r=i(13712),a=i(29416),s=i(63532),o=i(97092),l=i(59179),c=i(90572);if(6168!=i.j)var d=i(64271);function u(e){const t=new Set;return e.filter((e=>{const i=e.code.toLowerCase();return!t.has(i)&&(t.add(i),!0)}))}function h(e,t){return"ControlLeft"===e.code||"ControlRight"===e.code?t?"⌃":"Ctrl":"ShiftLeft"===e.code||"ShiftRight"===e.code?"⇧":"AltLeft"===e.code||"AltRight"===e.code?t?"⌥":"Alt":"MetaLeft"===e.code||"MetaRight"===e.code?t?"⌘":"Win":"ArrowUp"===e.code?"↑":"ArrowDown"===e.code?"↓":"ArrowLeft"===e.code?"←":"ArrowRight"===e.code?"→":"Home"===e.code?"Home":"End"===e.code?"End":"PageUp"===e.code?"PageUp":"PageDown"===e.code?"PageDown":"Backspace"===e.code?"Backspace":"Delete"===e.code?"Delete":"Enter"===e.code?"Enter":"Tab"===e.code?"Tab":"Space"===e.code?"Space":e.code.startsWith("F")&&!isNaN(parseInt(e.code.substring(1),10))?e.code:"Escape"===e.code?"ESC":"CapsLock"===e.code?"CapsLock":"NumLock"===e.code?"NumLock":"ScrollLock"===e.code?"ScrollLock":"PrintScreen"===e.code?"PrintScreen":"Pause"===e.code?"Pause":"MediaPlayPause"===e.code?"MediaPlayPause":"VolumeUp"===e.code?"VolumeUp":"VolumeDown"===e.code?"VolumeDown":"AudioVolumeMute"===e.code?"Mute":e.code.startsWith("Digit")?e.code.slice(5):e.code.startsWith("Numpad")?e.code.slice(6):"Equal"===e.code?e.shiftKey?"plus":"=":"Minus"===e.code?"-":"NumpadAdd"===e.code?"plus":"NumpadSubtract"===e.code?"-":"NumpadEqual"===e.code?"=":null}function g(e){return function(t){return{shortcut:t.map((t=>{const i=h(t,e);return i||(t.code.toLowerCase().startsWith("key")?t.code.slice(3):t.code)})).join("")}}}function p(e,t,i){return e.map((e=>{const n=function(e,t,i){return["Tab","Enter","Backspace","ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].some((n=>e===n&&t===h({code:e},i)))}(e.code,t.get(),i);return n&&(e.preventDefault(),e.stopImmediatePropagation()),e}))}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function f(e){return e.sort(((e,t)=>t.code.length-e.code.length))}function v(e,t){const i=n.R(e,"keydown",{capture:!0}).pipe(r.g("code")),d=n.R(e,"keyup",{capture:!0}).pipe(a.b(50));return i.pipe(s.b(m),o.f(d),l.U(u),c.h((e=>e.length>0)),l.U(f),l.U(g(t)))}function b(e,t,i){const r=n.R(e,"keydown",{capture:!0}),a=n.R(e,"keyup",{capture:!0}),o=new Map;return d.T(r.pipe(s.b((e=>{o.set(e.code,e)}))),a.pipe(s.b((e=>{o.delete(e.code)})))).pipe(l.U((()=>[...o.values()])),s.b((e=>p(e,i,t))),l.U(f),l.U((e=>{const{shortcut:i}=g(t)(e);return{shortcut:i,events:e}})))}},37514:(e,t,i)=>{i.d(t,{_:()=>r,y:()=>a});var n=i(47230);const r=e=>{const t=e.peekTreatment(n.p.ExtensionSettingsUphookHub);return"test"===t||"control"===t},a=e=>"test"===e.peekTreatment(n.p.ExtensionSettingsUphookHub)},239:(e,t,i)=>{i.d(t,{Qi:()=>a,jc:()=>s,nE:()=>r});const n=e=>e.reduce(((e,t)=>{const i=t.lensType;return e[i]=e[i]?e[i]+1:1,e}),{}),r=(e,t)=>{const{placement:i,bannerType:r,advancedAlerts:a=[],inline:s=!1,numberOfAdvancedAlerts:o,numberOfCriticalAlerts:l,sessionUuid:c,upgradeHookName:d,upgradeHookSlot:u,upgradeHookVariant:h}=t,g=n(a);e.getPremiumButtonShow(i,r,g.clarity,g.correctness,g.delivery,g.engagement,s,(null!=o?o:a.length>0)?a.length:void 0,l,c,d,u,h)},a=(e,t)=>{const{placement:i,bannerType:r,advancedAlerts:a=[],inline:s=!1,numberOfAdvancedAlerts:o,numberOfCriticalAlerts:l,sessionUuid:c,upgradeHookName:d,upgradeHookSlot:u,upgradeHookVariant:h}=t,g=n(a);e.getPremiumButtonClick(i,r,g.clarity,g.correctness,g.delivery,g.engagement,s,(null!=o?o:a.length>0)?a.length:void 0,l,c,d,u,h)},s=(e,t)=>{const{placement:i,bannerType:r,advancedAlerts:a=[],inline:s=!1,numberOfAdvancedAlerts:o,numberOfCriticalAlerts:l,sessionUuid:c,upgradeHookName:d,upgradeHookSlot:u,upgradeHookVariant:h}=t,g=n(a);e.dismissUpHookButtonClick(i,r,g.clarity,g.correctness,g.delivery,g.engagement,s,(null!=o?o:a.length>0)?a.length:void 0,l,c,d,u,h)}},73206:(e,t,i)=>{i.d(t,{B:()=>n});var n,r=i(32073),a=i(8261),s=i(7221),o=i(3140),l=i(26002),c=i(18100),d=i(32738);!function(e){function t(e){const t=()=>{e.bgRpc.api.sendToPopup({kind:o.I.Kind.sendCsLogs,option:{logs:e.historyLogsService.getLogs(),isIframeIntegration:(0,s.n_)()}})};return e.message.on(o.B.Kind.sendCsLogsToPopup,t),{dispose(){e.message.off(o.B.Kind.sendCsLogsToPopup,t)}}}function i(e){return[new c.r("bg",(()=>e.bgRpc.api.getBGLogs()),c.r.getLogsFromSessionStorageFallbackGetter(d.v.bgHistoryLogs)),new c.r("cs",(()=>Promise.resolve(e.historyLogsService.getLogs())),c.r.getLogsFromSessionStorageFallbackGetter(d.v.csHistoryLogs))]}function n(e){return e.message.on(o.B.Kind.downloadDebugReportsFromCS,h),{dispose(){e.message.off(o.B.Kind.sendCsLogsToPopup,h)}}}function u(e){const t=(0,s.n_)()?new r.w0:l.E.initKeyboardShortcutHandler(i(e));return{dispose(){t.unsubscribe()}}}function h(){const e=i((0,a.OB)());l.E.download(e)}e.initSendLogsToPopupHandler=t,e.initDownloadDebugReportsListener=n,e.initKeyboardShortcutHandler=u,e.initListeners=function(e){const i=[t(e),u(e),n(e)];return{dispose(){i.forEach((e=>{e.dispose()}))}}},e.download=h}(n||(n={}))},73995:(e,t,i)=>{i.d(t,{N:()=>o,h:()=>l});var n=i(39953);if(6168!=i.j)var r=i(53533);if(6168!=i.j)var a=i(97472);var s=i(68818);const o=(e,t,i,r)=>{(0,n.zG)(t,s.$.match({withPosition:n=>e.warn(`positioned alert #${t.id} inconsistent with document text: alert (${JSON.stringify(n.transformText)}, ${JSON.stringify(n.highlightTexts)}) vs text (${JSON.stringify(i.slice(n.transformRange.start,n.transformRange.end))}, ${JSON.stringify(n.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${r}`),withTransformJSON:t=>{e.warn(`transformJson alert #${t.id} inconsistent with document text: alert (${JSON.stringify(t.transformText)}, ${JSON.stringify(t.highlightTexts)}) vs text (${JSON.stringify(i.slice(t.transformRange.start,t.transformRange.end))}, ${JSON.stringify(t.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${r}`)},withSubAlerts:t=>e.warn(`super alert #${t.id} inconsistent with document text: alert (${JSON.stringify(t.highlightTexts)}) vs text (${JSON.stringify(t.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${r}`)}))},l=(e,t)=>{a.S.isCommonAlert(t)&&a.S.isRevertAutoApplyAlert(t)&&e.autoApply.inconsistentRevertAlertError((0,r.Cg)(),t.originalPatternName)}},33487:(e,t,i)=>{var n;i.d(t,{i:()=>n}),function(e){e.textChange="textChange",e.reset="reset",e.alertAccepted="alertAccepted",e.alertUpdate="alertUpdate",e.capiRemove="capiRemove",e.ignore="ignore"}(n||(n={}))},16020:(e,t,i)=>{i.d(t,{IH:()=>r,JH:()=>m,SV:()=>n,W8:()=>p});var n,r,a=i(90023),s=i(17690),o=i(70394),l=i(64297),c=i(74822),d=i(58303);if(6168!=i.j)var u=i(6655);if(6168!=i.j)var h=i(41384);!function(e){let t,i;!function(e){e.alertApply="alertApply",e.alertIgnore="alertIgnore"}(t=e.Kind||(e.Kind={})),function(e){e.assistant="assistant",e.sidebar="sidebar",e.inlineCard="inlineCard"}(i=e.Source||(e.Source={})),e.isAlertApply=function(e){return e.kind===t.alertApply},e.isAlertIgnore=function(e){return e.kind===t.alertIgnore}}(n||(n={})),(0,l.L0)(void 0),function(e){e.create=function(){return new g}}(r||(r={}));class g{constructor(){this.events=new c.x}next(e){this.events.next(e)}}function p(e,t,i){switch(t){case h.H.apply:return d.G({kind:n.Kind.alertApply,source:n.Source.inlineCard,alertId:u.wQ.Id.create(e),freePremium:i});case h.H.ignore:return d.G({kind:n.Kind.alertIgnore,source:n.Source.inlineCard,alertId:u.wQ.Id.create(e),freePremium:i});default:return d.YP}}function m(e,t){return i=>{switch(i.type){case o.lY.Type.alertApply:return(0,a.zG)(e.getById(i.alertId),d.tS(s.bZ.getRawId),d.UI((e=>({kind:n.Kind.alertApply,source:t,alertId:e}))));case o.lY.Type.alertIgnore:return(0,a.zG)(e.getById(i.alertId),d.tS(s.bZ.getRawId),d.UI((e=>({kind:n.Kind.alertIgnore,source:t,alertId:e}))));default:return d.YP}}}},57183:(e,t,i)=>{i.d(t,{M:()=>H,O:()=>U});var n=i(64271),r=i(93440),a=i(59179),s=i(10883),o=i(20161),l=i(14969),c=i(44045),d=i(29479),u=i(90572),h=i(58303),g=i(6655),p=i(83854),m=i(8405),f=i(414),v=i(68932),b=i(33487),w=i(97472),S=i(25961),y=i(57283),k=i(2223),E=i(56209),_=i(4256),C=i(78542),A=i(93184);var I=i(99035),x=i(90023),T=i(84358);function R(e){return e.isPremium&&e.isHidden}function M(e,t){return(0,x.zG)(T.gz(function(e){return function(e){const{free_premium:t}=e.extraProperties;return!!t&&["locked","unlocked","uphook"].includes(t)}(e)?h.G(function(e){const{free_premium:t}=e.extraProperties;return t}(e)):h.YP}(e),t),h.UI((([e,t])=>t[e])))}var P=i(84714),F=i(5588);var D=i(23031);function L(e){return(0,n.T)((t=e.textRevisionManager.revisionChanges,t.pipe((0,F.D)((e=>1===Math.abs(e.deltaChanges.length)?(0,r.H)(1e3).pipe((0,a.U)((()=>e))):(0,P.of)(e))))),U(e.textObserver,e.layout)).subscribe((t=>{!function(e,t,i,n,r){if(e){const e=(0,D.DV)((()=>t.processPendingTextRevisions()),(e=>(r.warn("alertProcessor: processing text revision failed",e),null)));try{const a=e&&e.transformedAlerts.map((e=>t.alerts.getAlertById(e.id))).filter((e=>null!==e))||[];try{const e=a.flatMap((e=>i.get(e.id)||[]));n.maintainConsistency(e,void 0,void 0,((e,t)=>a.some((e=>e.id===t.alertId))))}catch(e){r.error("error maintaining highlight consistency",e)}}catch(e){r.error("failed on update/maintain",e)}}try{n.recalculateAllHighlights()}catch(e){r.error("error recalculating highlights",e)}}(t,e.alertProcessor,e.alertIdToHighlightIds,e.highlights,e.log)}));var t}class H{constructor(e,t,i,r,s,o,l,c=C.Y.create("AquaAlertsWiring"),d,u,h,g,p){this._alertProcessor=e,this._highlights=t,this._alertFilter=i,this._textObserver=r,this._textRevisionManager=s,this._layout=o,this._felog=l,this._log=c,this._isAssistantOpened=d,this._showInlineLockedUIUnderlines=u,this._showColoredLockedUIUnderlines=h,this._isLockedUIExperimentTreatmentGroup=g,this._lockedUIHighlights=p,this._subs=[],this._alertIdToHighlightIds=new Map,this._alertsToProcessOnFilterChange=this._alertFilter.pipe((0,a.U)((e=>{const t=[],i=[];for(const e of this._alertProcessor.alerts.getAll()){const n=this._alertIdToHighlightIds.get(e.id);n&&n.some((e=>this._highlights.hasHighlight(e)))?i.push(e):t.push(e)}return{addedAlerts:t,updatedAlerts:i,removedAlerts:[],transformedAlerts:[]}}))),this._subs.push(L({alertIdToHighlightIds:this._alertIdToHighlightIds,layout:this._layout,log:this._log,textRevisionManager:this._textRevisionManager,textObserver:this._textObserver,highlights:this._highlights,alertProcessor:this._alertProcessor})),this._subs.push(this._updateHighlightsOnAlertChange()),this._subs.push(function(e,t,i,r){let a=e.getTextSource().getPlainText().length;return(0,n.T)(i.revisionChanges,U(e,t)).subscribe((e=>{if(e){const t=e.deltaChanges.length;if(1===Math.abs(t)){const i=Math.min(...e.changes.map((e=>e.pos)));let n=0;n=a+t-1;const s={start:i,end:n};r.updateHighlightsForTextRange(s,t)}a+=t}}))}(this._textObserver,this._layout,this._textRevisionManager,this._highlights))}static getHighlightColor(e,t,i,n,r,a){const{ethical_ai_highlight_background_color:s,ethical_ai_highlight_underline_color:o,critical_mistake:l,reactivation_yellow_underlines:c}=e.extraProperties,d=I.p.shouldShowInlineYellowUnderlinesForInProductReactivation(c),u=H._shouldReplaceColorWithYellow(e,t,r,n,i,d);d&&(0,E.Tb)().sendFemetricsRate("inProductReactivation.shown",{yellowOnClient:u});const v=M(e,a);return h.pC(v)?k.hE.Preset.create(v.value):"true"!==l||u?"false"!==l||u?s&&o?k.hE.Custom.create(s,o):u?k.hE.Preset.create(k.al.gold):(0,m.JD)(e.patternName)?k.hE.Preset.create(k.al.gray):(0,p.t)(e.patternName)?k.hE.Preset.create(k.al.green):(0,f.u1)(e.patternName)?k.hE.Preset.create(k.al.plagiarism):e.extraProperties.underline_with_teaser?k.hE.Preset.create(k.al.weHbar):e.impact===g.wQ.Impact.Critical?k.hE.Preset.create(k.al.red):H._outcomeToHighlightColor[e.outcome]:k.hE.Preset.create(k.al.blue):k.hE.Preset.create(k.al.red)}static getHighlightDisplayFormat(e){return e.belongsToKnowledgeHubTermDetails?k.jk.background:e.belongsToKnowledgeHubSuggestedTerm?k.jk.underline:e.isEnclosing?k.jk.enclosing:e.isEnclosed?e.isMain?k.jk.underline:e.isMainStart?k.jk.underlineStart:k.jk.underlineAndBackground:e.belongsToActiveAlert&&e.belongsToSuperAlert?e.isActive?k.jk.underlineAndBackground:k.jk.background:k.jk.underlineAndBackground}static _extractHighlightInfo(e,t){const i="enclosing"===t.type,n=e.highlightRanges.some((e=>"enclosing"===e.type));return{isEnclosing:i,isEnclosed:n,isMain:"main"===t.type,isMainStart:"main_start"===t.type,belongsToKnowledgeHubTermDetails:(0,m.Ed)(e),belongsToKnowledgeHubSuggestedTerm:(0,m.kK)(e)}}static getHighlightMeta(e,t,i,n,r,a,s,o){if(w.S.isTouchTypistAlert(e))return v.u.createHighlightsMeta(e,t);const{hColor:l,dFormat:c}=this._getHighlightColorAndFormat(e,i,n,r,a,s,o);return{highlightId:t,alertId:e.id,highlightColor:l,highlightDisplayFormat:c,highlightDisappearOnHoverDelay:null,highlightLiveliness:null}}static _getHighlightColorAndFormat(e,t,i,n,r,a,s){let o=w.S.isCapiAlert(e)?H.getHighlightColor({...e,isPremium:!e.isFree,isHidden:e.isHidden},i,n,r,a,s):null,l=w.S.isCapiAlert(e)?H.getHighlightDisplayFormat(H._extractHighlightInfo(e,t)):null;return e._tag===w.b.snippetsTemplate&&(o=k.hE.Preset.create(k.al.green),l=k.jk.background),{hColor:o,dFormat:l}}_addHighlightsFor(e,t){e.highlightRanges.forEach(((i,n)=>{const r=y.y$.Id.create(e.id,n),a=this._alertIdToHighlightIds.get(e.id)||[];this._alertIdToHighlightIds.set(e.id,[...a,r]),this._highlights.addHighlight(r,y.NC.expandIfNeeded(i,t),H.getHighlightMeta(e,r,i,this._isAssistantOpened.get(),this._showInlineLockedUIUnderlines.get(),this._showColoredLockedUIUnderlines.get(),this._isLockedUIExperimentTreatmentGroup.get(),this._lockedUIHighlights.get()))}))}_updateHighlightsFor(e,t){const i=this._alertIdToHighlightIds.get(e.id);if(i&&i.length!==e.highlightRanges.length)this._clearHighlightsFor(e.id),this._addHighlightsFor(e,t);else{const n=[];e.highlightRanges.forEach(((r,a)=>{let s;const o=null==i?void 0:i[a];o?s=o:(s=y.y$.Id.create(e.id,a),n.push(s)),this._highlights.updateHighlight(s,y.NC.expandIfNeeded(r,t),H.getHighlightMeta(e,s,r,this._isAssistantOpened.get(),this._showInlineLockedUIUnderlines.get(),this._showColoredLockedUIUnderlines.get(),this._isLockedUIExperimentTreatmentGroup.get(),this._lockedUIHighlights.get()))}));const r=this._alertIdToHighlightIds.get(e.id)||[];this._alertIdToHighlightIds.set(e.id,[...r,...n])}}_updateHighlightsOnAlertChange(){return(0,n.T)(this._alertProcessor.alerts.changes.pipe(A.d5.measure(this._felog.processAlerts.measure)),this._alertsToProcessOnFilterChange.pipe(A.d5.measure(this._felog.processFilterChange.measure))).pipe((0,s.M)(this._alertFilter),(0,a.U)((([{addedAlerts:e,removedAlerts:t,transformedAlerts:i,updatedAlerts:n},r])=>({addedAlerts:e.filter(r),updatedAlerts:n.filter(r),transformedAlerts:i.filter((e=>{const t=this._alertProcessor.alerts.getAlertById(e.id);return!!t&&r(t)})),removedAlerts:[...t.filter((e=>r(e.alert))),...n.filter((e=>!r(e))).map((e=>({id:e.id,alert:e,reason:{_tag:b.i.alertUpdate}})))]}))),u.h((e=>e.addedAlerts.length>0||e.updatedAlerts.length>0||e.transformedAlerts.length>0||e.removedAlerts.length>0))).subscribe((e=>{try{for(const t of e.removedAlerts)this._clearHighlightsFor(t.id)}catch(e){this._log.error("failed to remove highlights",e)}if(e.addedAlerts.length>0||e.updatedAlerts.length>0||e.transformedAlerts.length>0){const t=this._textObserver.getTextSource().getPlainText();for(const i of e.addedAlerts)try{this._addHighlightsFor(i,t)}catch(e){this._log.warn(`failed to add highlight for #${i.id}`,e)}for(const i of e.updatedAlerts)try{this._updateHighlightsFor(i,t)}catch(e){this._log.error(`failed to update highlight for #${i.id}`,e)}for(const i of e.transformedAlerts)try{const e=this._alertProcessor.alerts.getAlertById(i.id);e&&this._updateHighlightsFor(e,t)}catch(e){this._log.error(`failed to update highlight geometry for #${i.id}`,e)}}}))}_clearHighlightsFor(e){const t=this._alertIdToHighlightIds.get(e);t&&(this._highlights.removeHighlights(t),this._alertIdToHighlightIds.set(e,[]))}static _shouldReplaceColorWithYellow(e,t,i,n,r,a){if(function(e){const{free_premium:t}=e.extraProperties;return e.inline===g.wQ.Inline.inline&&R(e)&&"uphook"===t}(e))return!0;if(t){const t=!i||!n;return R(e)&&t||a}return!(!function(e){const{free_premium:t}=e.extraProperties;return e.inline===g.wQ.Inline.inline&&R(e)&&"locked"===t}(e)||!r||n)||!!a}getHighlightsForAlert(e){return this._alertIdToHighlightIds.get(e)||[]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}function U(e,t){return e.contentChanges.async.pipe((0,o.w)((()=>t.scroll.changes.pipe((0,l.P)(),(0,c.R)((0,r.H)(_.E0)),(0,d.h)(null)))))}H._outcomeToHighlightColor={[S.TC.correctness]:k.hE.Preset.create(k.al.red),[S.TC.clarity]:k.hE.Preset.create(k.al.blue),[S.TC.engagement]:k.hE.Preset.create(k.al.green),[S.TC.tone]:k.hE.Preset.create(k.al.purple),[S.TC.vox]:k.hE.Preset.create(k.al.gray),[S.TC.knowledgeHub]:k.hE.Preset.create(k.al.lightGreen),[S.TC.other]:k.hE.Preset.create(k.al.gold)}},76187:(e,t,i)=>{i.d(t,{o:()=>s});var n=i(31491),r=i(90572),a=i(20302);function s(e,t){const i=t.pipe(r.h((0,n.Kg)(a.hX.is("session_started"),a.hX.is("finish")))).subscribe((t=>{var i;return null===(i=e())||void 0===i?void 0:i.pushStartOrFinishEvent(t)}));return{dispose:()=>i.unsubscribe()}}},70225:(e,t,i)=>{i.d(t,{I:()=>c,O:()=>n});var n,r=i(92379),a=i(27640),s=i(21138),o=i(48886),l=i(89809);!function(e){e.Context=r.createContext(s.Y.invariantContent("AssistantTextResources")),e.holder=o.VF((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(n||(n={}));const c=l.Pj(l.GG({denali:a.m.holder,assistant:n.holder}))((()=>({denali:{}})))},699:(e,t,i)=>{var n;i.d(t,{O:()=>n}),function(e){e.headerHeight=48,e.panelHeight=106,e.predictionsPreviewHeaderHeight=52,e.predictionInsightHeight=52,e.predictionInsightBottomMargin=16}(n||(n={}))},22002:(e,t,i)=>{i.d(t,{t:()=>M});var n=i(90023),r=i(93380),a=i(23778),s=i(44970),o=i(99531),l=i(50887),c=i(47311),d=i(64297),u=i(12518),h=i(58303),g=i(59833),p=i(17572),m=i(49445),f=i(55768),v=i(57283),b=i(27853),w=i(54760),S=i(74822),y=i(90572),k=i(59179),E=i(954),_=i(52351),C=i(42008),A=i(78542);class I{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new S.x,this.highlightDataChanged=this._highlightDataChanged}getByHighlightId(e){return this._mapByHighlightId.get(e)}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightDataObs(e){return this._highlightDataChanged.pipe(y.h((t=>t===e)),k.U((()=>this.getByHighlightId(e))),E.O(this.getByHighlightId(e)))}}class x{constructor(e,t,i,n,r=(()=>_.E9.zero),a=A.Y.create("DenaliHighlightsUpdater")){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=n,this._getParentScroll=r,this._log=a}register(e,t,i,n){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,n);{const r=new w.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),a={id:e,alertId:n.alertId,mark:r,visualization:i};this._denaliHighlights.set(e,a);const s=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,C.rX)((0,C.mp)(r.range),s),n),a}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,n){const r=this._denaliHighlights.get(e);if(r){this._denaliHighlights.set(e,{...r,visualization:i});const a=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,C.rX)(t.meta.range(),a),n),r}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var T=i(5387),R=i(4256);class M{constructor(e,t,i,r,a,s,o=A.Y.create("DenaliViewAdapter"),d,g){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=r,this._scroller=a,this._selectedHighlightsTracker=s,this._log=o,this._requestAwaitService=d,this._formattingService=g,this._subs=new l.w.Keeper,this._disposed=!1,this._highlightedAlertId=null,this._marks=new Map,this.markChangeApplied=new c.Subject,this._highlightsDataStore=new I,this._highlightUpdater=new x(this._highlightsDataStore,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return b.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._highlightsDataStore.getHighlightDataObs(e).pipe(c.map((e=>e&&e.visualization.type===w.sO.Change.VisualState.Type.highlighted?{[w.sO.Change.VisualState.Source.sidebar]:v.pc.hoveredNeedsAttention,[w.sO.Change.VisualState.Source.text]:v.pc.hovered,[w.sO.Change.VisualState.Source.api]:this._highlightedAlertId===e.alertId?v.pc.hovered:v.pc.none}[e.visualization.source]:v.pc.none)))},this._updateContentsBuffer=new c.Subject,this._flushUpdater=new c.Subject,this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${String(e)}, ${String(t)}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return m.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return m.RI.resFromText(i)}},this.changes=c.mergeStatic((0,n.zG)(m.RI.res(this.getContents().delta),u.g_((()=>c.EMPTY),(e=>c.of(e)))),this._textObserver.contentChanges.async.pipe(c.filter((e=>e.changes.length>0)),c.map((({deltaChange:e})=>e)))),this.activeMarks=new c.BehaviorSubject(h.YP),this.contentUpdated=new c.Subject,this.hoveredMarks=new c.BehaviorSubject(h.YP),this.textChangedAfterPaste=new c.Subject,this.activeWord=new c.BehaviorSubject(h.YP),this.clickedWord=new c.BehaviorSubject(h.YP),this.ongoingSelection=new c.BehaviorSubject(!1),this._log.info(`${M.name} created`),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight(),this._trackFocusedAlert())}_trackFocusedAlert(){return this._highlightsDataStore.highlightDataChanged.pipe(c.map((e=>this._highlightsDataStore.getByHighlightId(e))),c.filter((e=>!!e))).subscribe((e=>{this._highlightedAlertId===e.alertId||e.visualization.type!==w.sO.Change.VisualState.Type.highlighted||e.visualization.source!==w.sO.Change.VisualState.Source.text&&e.visualization.source!==w.sO.Change.VisualState.Source.sidebar?e.alertId===this._highlightedAlertId&&e.visualization.type===w.sO.Change.VisualState.Type.visible&&(this._highlightedAlertId=null,this._log.trace(`Mark ${e.id} unfocused - alertId ${e.alertId}`)):(this._highlightedAlertId=e.alertId,this._log.trace(`Mark ${e.id} focused - alertId ${e.alertId}`))}))}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),m.RI.isFlush(e)?this._flushUpdater.next(void 0):m.RI.isReset(e)?this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,T.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),a.Y1.empty}get contentRect(){throw this._log.trace("contentRect"),Error("not implemented")}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),u.F2(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=v.y$.Id.createFromMark(e.id),i=e.meta.capiAlertId;switch(e.action){case s.v.Change.ActionType.create:{const n=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),r=(null==n?void 0:n.mark)||null;return r&&this._marks.set(r.id,r),r}case s.v.Change.ActionType.update:{const n=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),r=(null==n?void 0:n.mark)||null;return r&&this._marks.set(r.id,r),r}case s.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),this._marks.delete(e.id),null;default:(0,d.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),s.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case s.v.Change.ActionType.create:e.created.set(t.id,u.ij(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case s.v.Change.ActionType.update:e.updated.set(t.id,u.ij(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case s.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,u.F2(void 0))}return e}),s.v.Change.Result.getEmpty()))}scrollToMark(e,t){var i;const n=null!==(i=this._marks.get(e))&&void 0!==i?i:null;return this._log.trace("scrollToMark",{markId:e,mark:n,opts:t}),n?this._scroller.scrollToMark(n,t):(this._log.warn(`Tried to scroll to nonexistent mark with id: ${e}`),c.EMPTY)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe(c.bufferWhen((()=>c.mergeStatic(c.timer((0,R.Xd)(20)),this._flushUpdater).pipe(c.first()))),c.filter((e=>e.length>0)),c.map((e=>e.reduce(((e,t)=>e.compose(t)),new r.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((0,f.g)(e)).then((()=>{const t=(0,f.B)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe(c.map((0,n.ls)(g.UI((e=>{var t;return(0,n.zG)(h.ij(null===(t=this._highlightsDataStore.get(e))||void 0===t?void 0:t.mark),h.hX((e=>(0,n.zG)(e.range(),u.g_(n.W8,(0,n.ff)(o.x.isEnclosingView))))))})),g.oA))).subscribe((e=>this.activeMarks.next(h.G(e))))}_updateContents(e,t){this._updateContentsBuffer.next((0,T.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),p.vM((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(`${M.name} disposed`),this._disposed=!0}}},55768:(e,t,i)=>{i.d(t,{B:()=>c,g:()=>l});var n=i(93380),r=i(33632),a=i(37038),s=i(23031),o=i(15716);function l(e,t=!1){return e.reduce((({actions:e,index:i},a)=>{const o=e[0];return r.s.isInsertString(a)?(e.unshift({pos:{start:i,end:i},value:t&&a.attributes?(new n.i).insert(a.insert,a.attributes):a.insert}),{actions:e,index:i}):r.s.isInsertEmbed(a)?{actions:e,index:i+1}:r.s.isRetain(a)?(t&&a.attributes&&e.unshift({pos:{start:i,end:i+a.retain},value:(new n.i).retain(a.retain,a.attributes)}),{actions:e,index:i+a.retain}):r.s.isDelete(a)?(o&&o.pos.start===o.pos.end&&o.pos.end===i?o.pos={...o.pos,end:o.pos.end+a.delete}:e.unshift({pos:{start:i,end:i+a.delete},value:""}),{actions:e,index:i+a.delete}):void(0,s.vE)(a)}),{actions:[],index:0}).actions.reduce(((e,t)=>(e.length&&e[e.length-1].value&&e[e.length-1].pos.start===t.pos.start&&(0,o.HD)(t.value)&&(0,o.HD)(e[e.length-1].value)?e[e.length-1].value=`${String(t.value)}${String(e[e.length-1].value)}`:e.push(t),e)),[])}const c=e=>e.reduce((({formattings:e,index:t},i)=>a.m.hasFormatting(i)?r.s.isInsertString(i)?(e.push({range:{start:t,end:"\n"===i.insert?t:t+i.insert.length},formatting:i.attributes}),{formattings:e,index:t+i.insert.length}):r.s.isInsertEmbed(i)?{formattings:e,index:t+1}:r.s.isRetain(i)?(e.push({range:{start:t,end:t+i.retain},formatting:i.attributes}),{formattings:e,index:t+i.retain}):{formattings:e,index:t}:r.s.isInsertString(i)?{formattings:e,index:t+i.insert.length}:r.s.isInsertEmbed(i)?{formattings:e,index:t+1}:r.s.isRetain(i)?{formattings:e,index:t+i.retain}:r.s.isDelete(i)?{formattings:e,index:t}:void(0,s.vE)(i)),{formattings:[],index:0}).formattings},72418:(e,t,i)=>{i.d(t,{f:()=>o});var n=i(62552),r=i(84308),a=i(20161),s=i(57283);class o{constructor(e){this._originalHoverProvider=e,this._assistantHoverProviderSbj=new n.X(null)}setAssistantHover(e){this._assistantHoverProviderSbj.next(e)}removeAssistantHover(){this._assistantHoverProviderSbj.next(null)}getHoveredStateBehavior(e){const t=this._originalHoverProvider.getHoveredStateBehavior(e);return this._assistantHoverProviderSbj.pipe((0,a.w)((i=>null==i?t:(0,r.a)(t,i.getHoveredStateBehavior(e),((e,t)=>t!==s.pc.none?t:e)))))}}},7247:(e,t,i)=>{i.d(t,{W:()=>n});const n=(e,t,i)=>{const n=e.textField.visibleRect.getApproximate();let r=(i||0)-n.client.top;(r<=0||r>=n.size.height)&&(r=n.size.height/2);const a=t.top-r-n.client.top;requestAnimationFrame((()=>e.textField.scroller.scrollBy({top:a})))}},33549:(e,t,i)=>{i.d(t,{t:()=>c});var n=i(39953),r=i(31789),a=i(8867),s=i(12518),o=i(42008),l=i(54760);function c({scrollToMarkRect:e,scrollToRange:t}){return{scrollToMark:(i,c)=>(0,n.zG)(l.Fd.getMarkRect(i),s.vx((()=>(t((0,o.mp)(i.range)),l.Fd.getMarkRect(i)))),s.g_((e=>r._(new Error(`Cannot get mark's rect: ${i.id}: ${e.message}`))),(t=>new a.y((i=>{i.next(void 0),e(t,c)})))))}}},33380:(e,t,i)=>{i.d(t,{H:()=>l});var n=i(90023),r=i(64271),a=i(44071),s=i(59179),o=i(63524);function l(e){const{textField:t,selectionService:i,highlights:l}=e;return(0,r.T)((0,a.R)(t,"click"),(0,a.R)(t,"keyup")).pipe((0,s.U)((()=>{const e=(0,n.zG)(i.getCurrentSelection(),o.Ey);return null===e?[]:l.intersectingHighlightIDs(e)})))}},81442:(e,t,i)=>{i.d(t,{V:()=>n});var n,r=i(699);!function(e){e.defaultLayout={name:"default",anchorMargin:{top:r.O.headerHeight+r.O.panelHeight,bottom:0,left:16,right:16},anchorOrigin:{horizontal:"right",vertical:"top"},assistantOrigin:{horizontal:"left",vertical:"top"},repositioningStrategy:[{horizontal:"flip",vertical:"translate"},{horizontal:"translate",vertical:"translate"}]}}(n||(n={}))},80031:(e,t,i)=>{i.r(t),i.d(t,{AssistantControllerImpl:()=>cs,AssistantService:()=>ys,LocalAssistantHighlightCollection:()=>n.c});var n=i(51285),r=i(39953),a=i(92379),s=i(50887),o=i(2123),l=i(64297),c=i(13391),d=i(74822),u=i(90572),h=i(59179),g=i(49601),p=i(20161),m=i(84714),f=i(84308),v=i(44071),b=i(954),w=i(10883),S=i(44045),y=i(63532),k=i(94032),E=i(78129),_=i(58303),C=i(84358),A=i(6655),I=i(1067),x=i(78542),T=i(97472),R=i(66061),M=i(90023),P=i(5412),F=i(699),D=i(77933),L=i(47311),H=i(24909),U=i(28082),B=i(1805),O=i(23950);const G=({message:e,emoji:t,emojiId:i,icon:n,iconPartName:r})=>a.createElement("div",{className:O.insight},t&&i&&a.createElement("div",{className:O.insight__inline_icon},a.createElement(B.dy,{unicodeHexArray:[i],unicodeLiteral:t})),n&&a.createElement("div",{className:O.insight__inline_icon,"data-grammarly-part":r},n),a.createElement("div",{className:O.insight__inline_text},e));var N,V=i(52308),z=i(13155),W=i(22939);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(N||(N={}));const j=({predictionsVM:e})=>U.UI.mount(J,e.previewFlow),q=U.UI.Grid.make((({slots:e})=>a.createElement("div",{className:W.predictions},a.createElement("div",{className:W.predictions__header},"Predictions"),a.createElement(H.F.Fragment,null,e.children)))),Y=({children:e,count:t,dataPartName:i})=>a.createElement(V.Z,{kind:"assistant-priority-lens",dataPartName:i,marginBottom:"12px"},a.createElement("div",{className:W.predictions__card},e,t>0&&a.createElement("div",{className:W.counterContainer},a.createElement(D.CL,null,t)))),$=U.UI.Node.make((({state:e,notify:t})=>a.createElement(z.M,{clickHandler:t("select")},a.createElement(H.F.Fragment,null,e.pipe(L.map((e=>a.createElement(Y,{count:e.alertsCount,dataPartName:"emogenie-prediction-card"},a.createElement(G,{key:"tone",message:"off"===e.emotion.brandToneLabel?a.createElement(a.Fragment,null,"May sound ",a.createElement("span",{className:W.predictions__off_brand},"off-brand")):`Sounds ${e.emotion.name}`,emoji:e.emotion.emoji,emojiId:e.emotion.emojiId}))))))))),K=U.UI.Group.make({tone:(X=$,{tag:"_tag",members:{Some:(0,r.zG)(X,U.UI.contramapState((e=>e.value))),None:U.UI.Node.empty}})});var X;const J=U.UI.Union.make("kind",{[N.hidden]:U.UI.Node.empty,[N.zero]:U.UI.Node.empty,[N.visible]:U.UI.Composite.make(q,K)});var Z=i(33981);const Q=(e,t)=>{const i=(0,Z.ux)(e.lensState,e.cardsListScrollManager,e.capabilities),n=Math.max(600,t.size.height+F.O.headerHeight+F.O.panelHeight);return i.pipe((0,w.M)(e.predictionsPreviewViewModel.previewState),(0,h.U)((([e,t])=>{if(t.kind!==N.visible)return e;const i=[t.tone].filter(_.pC).length;return i>0?e+F.O.predictionsPreviewHeaderHeight+F.O.predictionInsightHeight*i+F.O.predictionInsightBottomMargin:e})),(0,b.O)(0),(0,h.U)((e=>Math.max(e+F.O.headerHeight,n))),(0,h.U)((e=>Math.min(e,750))))};var ee,te=i(24332),ie=i(12589),ne=i(17690),re=i(48640),ae=i(83042),se=i(91167),oe=i(60152),le=i(61736),ce=i(67145),de=i(17560),ue=i(64996),he=i(70394),ge=i(87517),pe=i(14677),me=i(74075),fe=i(88367),ve=i(57576),be=i(525),we=i(99817),Se=i(73926),ye=i(54632),ke=i(91689),Ee=i(58690),_e=i(31491),Ce=i(31603),Ae=i(64271),Ie=i(29479),xe=i(24666),Te=i(36344),Re=i(72111),Me=i(12518),Pe=i(17572),Fe=i(8261),De=i(16020);!function(e){e.createSubscription=function(e,t,i){return e.pipe(L.filter(he.lY.isAlertApplyAction)).subscribe((e=>(0,r.zG)(i(e.alertId),C.bw((e=>{"unlocked"===C.Fc(e.extraProperties.freePremium)&&t.freePremiumSuggestionAcceptButtonClick("assistant")})))))}}(ee||(ee={}));class Le{constructor(e,t,i){this._cardActions=e,this._gnar=t,this._alertsReader=i,this._subs=[Ue(this._cardActions,this._gnar,"assistant"),He(this._cardActions,this._gnar),ee.createSubscription(this._cardActions,this._gnar,this._alertsReader.getById)]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}const He=(e,t)=>e.pipe(u.h((e=>e.type===he.lY.Type.sduiCardAction&&"learn-more"===e.sourceId))).subscribe((()=>{t.learnMoreButtonClick()})),Ue=(e,t,i)=>e.pipe(h.U((e=>e.type)),u.h((e=>e===he.lY.Type.muteAlertCategory||e===he.lY.Type.undoMuteAlertCategory||e===he.lY.Type.mutedAlertSuggestionManagementClick||e===he.lY.Type.mutedAlertSuccessShow))).subscribe((e=>{switch(e){case he.lY.Type.muteAlertCategory:t.mutedAlertsCardTurnOffButtonClick(i);break;case he.lY.Type.undoMuteAlertCategory:t.mutedAlertsTurnBackOnButtonClick(i);break;case he.lY.Type.mutedAlertSuggestionManagementClick:t.suggestionManagementClick(i);break;case he.lY.Type.mutedAlertSuccessShow:t.categoryDeactivatedShow(i)}}));var Be,Oe=i(59833),Ge=i(64741),Ne=i(65676),Ve=i(23841),ze=i(64570),We=i(60846),je=i(239),qe=i(50299),Ye=i(74205),$e=i(56209),Ke=i(23031);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard",e.clickOnUpgradeCard="clickOnUpgradeCard"}(t=e.Type||(e.Type={}))}(Be||(Be={}));class Xe{constructor(e,t,i,n,a,o){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=n,this._gnar=a,this._isFreeUser=o,this._subs=new s.w.Keeper,this.activeAlert=this._lensState.pipe(L.map((e=>ve.nL.hasCards(e)&&P.R.isMainLens(e.currentLens.id)?qe.O.getActiveItemWithAlert(e.currentLens):_.YP)),L.map((e=>(0,r.zG)(e,_.g_((()=>null),(e=>e.activeAlert)))))),this.successView=c.h.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>be.v.WithSuccess.State.isInSuccess(this._capabilities)(e)?t.kind===N.visible?_.G(We.g.SuccessType.applied):_.G(We.g.SuccessType.small):_.YP)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,M.ls)(_.UI((e=>e.count)),_.fS((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new L.BehaviorSubject(!1),this.upgradeHookExpanded=(0,r.zG)(this._upgradeHookExpanded,L.distinctUntilChanged()),this.upgradeHookFlow=(0,r.zG)((0,Ge.d)(this._upgradeViewModel.advancedAlerts),U.Z.extendActions(L.tap((e=>{e.key===Ne.n.State.expanded?"upgrade"===e.action.kind?((0,je.Qi)(this._gnar,{placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),(0,$e.Tb)().upgradeHooks.clickUpgradeHook("advancedIssues","singleCardAssistant"),this._upgradeViewModel.openUpgradeUrl(Ye.L.Place.assistantCardList)):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===Ne.n.State.minimized&&"onClick"===e.action.action&&(this._upgradeHookExpandReason.next("click"),this._isFreeUser&&this.assistantActions.next({type:Be.Type.clickOnUpgradeCard}))}))),U.Z.patchState(L.merge(this._minimizeUpgradeHook())),U.Z.patchState(L.merge(this._autoOpenUpgradeHook())),U.Z.patchState(L.tap((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return Ne.n.State.hidden;case"expanded":return Ne.n.State.expanded;case"minimized":return Ne.n.State.minimized;default:(0,Ke.vE)(e)}}(e.kind))))),U.Z.patchState(L.tap((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new L.BehaviorSubject(_.YP),this.assistantActions=new L.Subject,this.autoFocusEnabled=c.h.create(!0),this.cardListViewportHeight=c.h.create(_.YP),this._onUpgradeButtonMount=new L.ReplaySubject,this._upgradeHookExpandReason=new L.ReplaySubject,this._onUpgradeHookShown=new L.Subject,this._unselectActiveAlert=this.assistantActions.pipe(L.filter((e=>e.type===Be.Type.clickOnEmpty||e.type===Be.Type.clickOnFakeCard||!(!this._isFreeUser||e.type!==Be.Type.clickOnUpgradeCard))),L.tap((()=>this.autoFocusEnabled.set(!1))),L.map((()=>e=>e.patch({currentLens:(0,r.zG)(ve.In.getActiveItem(e.currentLens),_.g_((()=>e.currentLens),(t=>ve.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:ne.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:P.R.isWithAlertsId,what:ve.nL.Effect.Applicator.create(L.mergeStatic(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(L.debounceTime(1),L.distinctUntilChanged(),L.filter((e=>e===Ne.n.State.minimized))).subscribe((()=>{this._gnar.assistantCollapsedUpgradeHookShow()})),this._onUpgradeButtonMount.pipe(Ve.oA,L.combineLatest(this.cardListContext.pipe(Ve.oA,L.first())),L.switchMap((([e,t])=>ze.n(e,{root:t}).pipe(L.first()))),L.filter(Oe.Od),L.map((e=>Math.trunc(100*e[0].intersectionRatio))),L.withLatestFrom(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>{this._gnar.assistantExpandedUpgradeHookShow(i,e,t)})),this._lensState.pipe(L.filter(ve.nL.hasCards),L.map((e=>ve.In.getActiveItem(e.currentLens))),L.pairwise(),L.filter((([e,t])=>_.Wi(e)&&_.pC(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_minimizeUpgradeHook(){return this.activeAlert.pipe(L.distinctUntilChanged(),L.withLatestFrom(this.upgradeHookExpanded),L.filter((([e,t])=>!!(e&&t&&this._isFreeUser))),L.withLatestFrom(this._upgradeViewModel.advancedAlerts),L.map((([e,t])=>(0,r.zG)(t,_.g_((()=>({kind:Ne.n.State.hidden})),(e=>({kind:Ne.n.State.minimized,alertsCount:e.count})))))))}_autoOpenUpgradeHook(){return this._lensState.pipe(L.filter((e=>(0,r.zG)(e.currentLens.id,P.R.isAllAlerts))),L.map(be.v.WithSuccess.State.isInSuccess(this._capabilities)),L.combineLatest(this.havePremiumAlerts,((e,t)=>e&&t)),L.distinctUntilChanged(),L.tap((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),L.withLatestFrom(this._upgradeViewModel.advancedAlerts),L.map((([e,t])=>(0,r.zG)(t,_.g_((()=>({kind:Ne.n.State.hidden})),(t=>e?{kind:Ne.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:Ne.n.State.minimized,alertsCount:t.count}))))))}}var Je,Ze=i(2485),Qe=i(11271);!function(e){e.settings="settings"}(Je||(Je={}));class et{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i,this._entryPoint=void 0}getDomain(){return this._domain}openFeedback(e){this._entryPoint=e,this._gnar.assistantFeedbackButtonClick(),this._assistantLayoutViewModel.pushActiveView({type:Ze.a.Type.feedback})}submitFeedback(e){this._entryPoint&&this._gnar.assistantFeedbackSubmitButtonClick(this._entryPoint,e.domain,e.text,(0,Qe.dK)(e)?e.score:void 0)}}var tt,it,nt=i(7221);!function(e){e.shouldShow=e=>{var t;return!!(null===(t=e.institutionInfo)||void 0===t?void 0:t.voxEnabled)};const t=e=>({onShow:t=>e.gbPromptFormShow(t),onAccept:t=>e.gbPromptAcceptClick(t),onDismiss:t=>e.gbPromptDismissClick(t)});e.getCardsViewModelSendToURLExperiment=(e,i)=>({handleGbPrompt:le.sU.Experiments.handleGbPrompt(e,{account:{styleGuide:(0,nt.Um)().styleGuideSettings,writingStyle:(0,nt.Um)().writingStyleSettings}},t(i))})}(tt||(tt={})),function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(it||(it={}));class rt{constructor(e,t,i,n,a,o){this._sessionModel=e,this._layoutVM=t,this._modalManager=i,this._user=n,this._gnar=a,this._closeAssistant=o,this.showSetGoalsActionButton=c.h.create(!0),this.showSettingsActionButton=c.h.create(!0),this.close=()=>{this._closeAssistant()},this.score=L.combineLatestStatic([this._sessionModel.score.view(_.UI((e=>({capiScore:e.rank})))),this._sessionModel.checkingState]).pipe(L.map((([e,t])=>(0,r.zG)(e,_.UI((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,M.ls)(_.tS((e=>e.messages)),_.UI((e=>e.assistantHeader)),_.fS((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,f.a)([this._layoutVM.activeView,this.score]).pipe(L.map((([e,t])=>(0,r.zG)(t,_.g_((()=>({type:"logo"})),(t=>e.type!==Ze.a.Type.default?{type:"logo"}:{type:"score",score:t}))))),L.distinctUntilChanged(it.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===Ze.a.Type.default?"visible":"hidden")),this._subs=new s.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){if("setGoals"===e)this._subs.push(this._modalManager.show(ie.Iy.setGoals("user")).subscribe());else(0,l.vE)(e)}_trackHeaderMessageChanges(){const e=this.summary.pipe(L.pairwise()).subscribe((([e,t])=>{var i,n;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,r.zG)(this._sessionModel.textInfo.get(),_.FS))||void 0===i?void 0:i.wordsCount,null===(n=(0,r.zG)(this._sessionModel.score.get(),C.Fc))||void 0===n?void 0:n.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=this._user.subscribe((e=>{e.isAnonymous?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}var at=i(88786);class st{constructor(e,t,i,n,r){this._lensPreviewVM=e,this._layoutVM=t,this._emogenieService=i,this._session=n,this._gnar=r,this._subs=new s.w.Keeper,this.previewState=c.h.create({kind:N.hidden}),this.previewFlow=U.Z.fromSideEffect((e=>{if("tone"===e.action.key){const e=this._emogenieService.viewState.view("prevalentEmotion").get();return e&&this._gnar.emogeniePredictionButtonClick(e.name),this._layoutVM.pushActiveView({type:Ze.a.Type.emogenie})}(0,l.vE)(e.action.key)}),this.previewState),this._previewState=(0,M.zG)(L.combineLatestStatic([this._emogenieService.viewState.view((e=>_.ij(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._session.documentLength,this._lensPreviewVM.getLens(P.R.SpecialId.PredictionEmogenie)]),L.map((([e,t,i,n])=>_.pC(e)&&i.trimmed>0?{kind:N.visible,tone:(0,M.zG)(e,_.UI((e=>({emotion:e,alertsCount:n.count,brandToneOffImageUrl:t}))))}:i.trimmed>0?{kind:N.zero}:{kind:N.hidden}))),this._subs.push(this._previewState.subscribe(k.wW(this.previewState)))}dispose(){this._subs.dispose()}}var ot=i(84766),lt=i(26590);class ct{constructor(e,t,i,n){this.feature=t,this._closeAssistant=i,this._gnar=n,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,xe.x)(),(0,E.G)(),(0,w.M)(e.activeView)).subscribe((([[t,i],n])=>{t===lt.eE.REVIEWING&&n.type===Ze.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,w.M)(e.activeView)).subscribe((([t,i])=>{i.type!==Ze.a.Type.proofitRequest&&i.type!==Ze.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,u.h)((e=>e===lt.eE.ACCEPTED)));(0,ot.F)(100).pipe((0,S.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}onSubmitFeedback(e){this._gnar.proofitFeedbackFormSubmit(e.text,e.score)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}var dt,ut=i(17789),ht=i(31789),gt=i(29416),pt=i(39845);function mt(e,t,i,n,a){return{id:"changeAlertEffect",when:P.R.isWithAlertsId,what:ve.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(p.w((e=>{const s=t.get();if(!ve.nL.hasCards(s))return ht._(new l.ej("Cannot update state without cards"));switch(e.type){case he.lY.Type.alertMinicardButtonClick:return(0,r.zG)(i.getRegistered(e.alertHighlight.alert.id),_.g_((()=>(a.warn("somehow we got click on non registered alert",e.alertHighlight.alert),Te.E)),(()=>m.of(e.alertHighlight))));case he.lY.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,r.zG)("right"===e.direction?n.nextAlert(t.card):(0,r.zG)(n.prevAlert(t.card),C.vx(n.anyRegisteredAlert(t.card))),_.g_((()=>Te.E),(e=>m.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,r.zG)(i.getRegistered(t.card.activeAlert.id),_.g_((()=>Te.E),(()=>m.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,l.vE)(t)}default:return Te.E}})),h.U((e=>({alertHighlight:e,alertSource:ne.l$.sidebar,options:{order:"lensOrder"}})))))}}function ft(e,t,i){const n=e.pipe(u.h(ve.nL.hasCards),gt.b(0),u.h((e=>e.currentLens.items.size>0&&_.Wi(ve.In.getActiveItem(e.currentLens))&&i.get())),h.U((e=>(0,r.zG)(e.currentLens.items.getAt(0),_.tS(qe.O.checksFeedItemsMapper((e=>_.G(e.activeAlert)),(e=>_.G(e.activeAlert)))),C.bw((()=>t.set(_.G(pt.CV.skip))))))),Ve.oA,u.h((e=>e.state.type===ne.bZ.State.Type.REGISTERED)),xe.x());return{id:"focusFirstCardSideEffect",when:e=>e!==P.R.SpecialId.PredictionEmogenie,what:ve.nL.Effect.SwitchLens.create(n.pipe(w.M(e),h.U((([e,t])=>({lensId:t.currentLens.id,alertSource:ne.l$.text,options:{order:"lensOrder",toFocus:ve.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function vt(e,t,i){const n=e.pipe(h.U((e=>n=>e.type===Ee.ay.Type.AppliedAlertAnimationFinished&&n.currentLens.meta.filter(e.alert)&&ve.nL.hasItems(n)?n.patch({currentLens:(0,r.zG)(Me.Y3((()=>ne.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(n.currentLens):n.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),Me.fS((()=>n.currentLens))),alertSource:e.alert.state.source}):n)));return{id:"onAlertApply",when:M.W8,what:ve.nL.Effect.Applicator.create(n)}}function bt(e,t){return{id:"lensChangeEffect",when:M.W8,what:ve.nL.Effect.SwitchLens.create(e.pipe(w.M(t),u.h((([e,t])=>e.lensId!==t)),h.U((([e])=>({lensId:e.lensId,alertSource:ne.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?ve.nL.Effect.FocusBehavior.focusFirst:ve.nL.Effect.FocusBehavior.noFocus}})))))}}!function(e){const t=(e,t)=>e.pipe(u.h(he.lY.isCreateSnippetAction),h.U((({id:e})=>i=>{const n=(0,M.zG)(i.currentLens.items.update(e,t({type:"success",clockwise:!0})),Me.g_((()=>i.currentLens.items),M.yR));return le.sU.itemsLens.set(n,i)})));e.applicatorEffects=(e,i)=>(0,M.zG)([[t(e,i),"suggestedSnippetSuccessEffect"]],Oe.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:P.R.isWithAlertsId,what:ve.nL.Effect.Applicator.create(e)}))))}(dt||(dt={}));var wt=i(3018),St=i(87856),yt=i(41262),kt=i(11928),Et=i(69247),_t=i(10726),Ct=i(69465),At=i(88347);function It({documentModel:e,features:t,gnar:i,modalOperations:n,upgradeVM:a,source:s}){return(0,_t.k)(e,function(e,t,i){return{goalsPopupShow:t=>{e.goalsPopupShow(t),(0,je.nE)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:"pro"}),(0,$e.Tb)().upgradeHooks.showUpgradeHook("assistantGoals","gDocsSetGoalsPopup","pro")},getPremiumButtonClick:()=>{(0,je.Qi)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:"pro"}),(0,$e.Tb)().upgradeHooks.clickUpgradeHook("assistantGoals","gDocsSetGoalsPopup","pro")},goalsFormSuccess:(n,a)=>{const s=()=>C.FX("academic")(n.domain)&&t;return e.goalsFormSuccess((0,r.zG)(n.domain,_.fS((()=>a.domain))),(0,r.zG)(n.goals,_.UI((e=>s()?[]:e)),_.fS((()=>a.goals)),(e=>Array.from(e))),i,(0,r.zG)(n.outcomeContext,_.hX(s),_.UI((0,At.ei)("type")),_.FS),(0,r.zG)(n.audience,_.hX((0,_e.ff)(s)),_.FS),(0,r.zG)(n.outcomeContext,_.hX(s),_.UI((0,At.ei)("citation")),_.FS),(0,r.zG)(n.style,_.hX((0,_e.ff)(s)),_.FS))}}}(i,t.isStudentsOFE,s),n,s,Ct.R$.defaultContextFallback,t,(()=>a.openUpgradeUrl(Ye.L.Place.gdocsGoals)),!1)}class xt{constructor(e,t,i,n,r=!1){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._gnar=n,this._isStudentsOFE=r}load(e){switch(e.type){case ie.dC.SetGoals:return this._loadSetGoals(e.source);case ie.dC.Performance:return Promise.resolve((()=>({instance:{type:ie.dC.Performance},component:U.UI.mount(U.UI.Node.empty,(()=>Te.E))})));default:return(0,l.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i=It({features:{demoMode:!1,isFree:!this._isPremiumUser,isStudentsOFE:this._isStudentsOFE,isEligibleForFreeTrial:!1,assignToFreeTrialEuUkExperiment:M.Q1,isEligibleForFreeTrialEuUk:!1,isEligibleForPro:!1,assignToProVsPremiumExperiment:M.Q1},documentModel:this._documentModel,upgradeVM:this._upgradeViewModel,source:e,modalOperations:t,gnar:this._gnar});return{instance:{type:ie.dC.SetGoals,source:e},component:U.UI.mount(Et.R.Modal,i)}}))}}var Tt=i(81356),Rt=i(49129),Mt=i(90447);const Pt=(e,t)=>e.alertClicked.pipe(h.U((e=>(0,r.zG)(e,_.g_(M.gn,(e=>e.alert))))),u.h(Ke.fQ),w.M((e=>e.pipe(h.U((e=>ve.nL.hasCards(e)&&P.R.isMainLens(e.currentLens.id)?qe.O.getActiveItemWithAlert(e.currentLens):_.YP)),h.U((e=>(0,r.zG)(e,_.g_((()=>null),(e=>e.activeAlert)))))))(t)),u.h((([e,t])=>e.id!==(null==t?void 0:t.id))),h.U((([e,t])=>e))),Ft=(e,t,i,n,a,s,o,l,g,f,v,w,S,y,A,I,x,T,R,F,D,L,H,U,B,O,G)=>{const N=Re.C8.Logging.getLogger("view_models"),V=c.h.create(re.A.defaultState),z=c.h.create(!1),W=c.h.create(!1),j=c.h.create(!1),q=Tt.n.isFree(v.view("user").get()),Y=se.t.create({...se.t.defaultLensFilters,[P.R.SpecialId.AllAlerts]:ne.bZ.belongsToAllAlerts},{...se.t.defaultTextFilters,[P.R.SpecialId.Closed]:M.jv,[P.R.SpecialId.AllAlerts]:(e=>(0,_e.W9)((()=>!W.get()),(0,_e.W9)((e=>!j.get()||ne.bZ.isInline(e)),e)))(ne.bZ.belongsToAllAlerts)}),$=Ae.T(W,z,j).pipe(Ie.h(k.PU)),K=re.A.get(e.alertsList.state,e.alertsList.lensesScores,Y).subscribe(k.wW(V)),X=new yt.t(V.view("lenses"),Y,e.sessionModel.scoreStatus),J=(0,ce.$y)((0,Rt.a)(t).getContents),Q={features:new Set([ge.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:fe.j.Density.minimal,shouldAnimateAlertApply:ge.IG.Default.shouldAnimateAlertApply,cardVisualMode:c.h.create(fe.j.CardVisualMode.RegularLightMode)},ee=(0,ge.Ls)(J,e.alertsReader,Q,(()=>m.of(_.YP)),e.mutingAlertsReader),He=de.R.ItemFactory.create(J,e.mutingAlertsReader,Q,(()=>m.of(_.YP))),Ue=c.h.create(_.YP),Be=((e,t,i)=>n=>{const r=e(),a=e=>e*i(),s=a(1),o=a(2.25);return(0,M.zG)(t(),_.UI((e=>e-(0,Z.US)())),_.UI((e=>P.R.isMainLens(r)&&n?e-o-s:e-s)),_.UI((e=>e-a(1))),_.hX((e=>e>0)))})((()=>Qe.get().currentLens.id),(()=>Ue.get()),(()=>Mt.o6)),Oe=qe.O.getCapabilities(ee,He,e.alertsReader,J,Be),Ge=new ke.gi(qe.O.equatable.structEq,qe.O.defaultOrd),Ne=(0,ke.is)(ee,Oe),Ve=new ke.ad((e=>P.R.isAllAlerts(e.id)),Ge,qe.O.equatable.structEq,qe.O.bundlesOrd),ze=(0,ke.kn)(He,Q,(e=>P.R.isAllAlerts(e)),Ne,Oe),We=we.v.createWithInitialAlerts(Ve,ze,Y,(0,M.ff)(ne.bZ.isMuted),Oe),je=new oe.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,Y.alertCanBeDisplayed),$e=new ye.oq(e.alertsList.state,e.alertsReader,V.view("lenses"),je,X,We,ze,Oe,Y),Je=i.get(),Qe=c.h.create($e.emptyState(Je).patch({alertSource:ne.l$.sidebar})),it=(0,ue.u0)((()=>t.getCursor().index),$e),ot=new Ye.x(e.alertsList,Qe,3,G,S),lt=new ie.EQ(new xt(e.sessionModel,ot,A.get().isPremium,S)),ht=new wt.C((0,Fe.nD)(U())),gt=new le.Xx({flush:()=>t.flushChanges()},new d.x,ee,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,r.zG)(e.mutedAlertsCategoriesModel,_.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,nt.Um)().suggestionsSettings)})))),_.G(tt.getCardsViewModelSendToURLExperiment(ht,S)),(()=>!1),qe.O.getActiveItemWithAlert,Oe,ht,{bufferTransitions:!0,showGbPrompt:tt.shouldShow(A.get())}),Et=new Le(gt.actionEvents,S,e.alertsReader),_t=new Ze.D(S,x,T,L,H),Ct=new st(X,_t,n,e.sessionModel,S),At=new Xe(Qe,Ct,ot,Oe,S,q),It=new pe.o((()=>Me.F2(void 0))),Ft=At.upgradeHookExpanded.pipe(xe.x()).subscribe(k.wW(z)),Dt=(0,kt.xl)(Qe,Y,$,z),Lt=new kt.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,Qe,Dt,qe.O.getActiveItemWithAlert,z,g,!0),Ht=(0,pt.hp)(Qe,Lt,It,t,N),Ut=new d.x,Bt=Qe.pipe(h.U((e=>e.currentLens.id))),Ot=new rt(e.sessionModel,_t,lt,A,S,I),Gt=_t.activeView.pipe(h.U((e=>e.type)),b.O(Ze.a.Type.startupPlaceholder),E.G(),h.U((([e,t])=>e===Ze.a.Type.startupPlaceholder&&t===Ze.a.Type.proofitRequest))).subscribe(k.wW(j)),Nt=At.cardListViewportHeight.subscribe(k.wW(Ue)),Vt=new et(_t,y,S),zt=(0,r.zG)(l,_.UI((e=>new ct(_t,e,I,S)))),Wt=Qe.view(ve.nL.getActiveAlertHighlight(qe.O.getActiveItemWithAlert)),jt=new ae.mN(t,Lt,e.alertsReader,Wt,Qe.view((e=>e.currentLens.meta.filter))),qt=(e=>e.view((e=>(0,r.zG)(_.DT(ve.nL.hasItems)(e),_.UI((e=>e.currentLens.items)),_.UI((e=>e.filter((0,_e.Kg)(qe.O.isAlertCard,qe.O.isAlertsBundle)))),_.UI((e=>e.filter((e=>"rendered"===e.visualState.transition.type)))),_.g_((()=>null),(e=>e.values()))))).pipe(b.O([]),u.h(Ke.Nf),E.G(),h.U((([e,t])=>{const i=new Set(e.map((e=>e.id)));return t.filter((e=>!i.has(e.id)))})),Ce.J()))(Qe),Yt=Pt(jt,Qe),$t=a.pipe(p.w(_.g_((()=>Te.E),(t=>t.initAssistantCardActionsProcessing(gt.actionEvents,e.alertsReader,Qe,qt,Yt))))).subscribe(),Kt=s.pipe(p.w(_.g_((()=>Te.E),(t=>t.initCardActionsProcessing(gt.actionEvents,e.alertsReader,qt,Yt,Qe))))).subscribe(),Xt=o.pipe(p.w(_.g_((()=>Te.E),(t=>t.initCardActionsProcessing(gt.actionEvents,e.alertsReader,qt,Qe))))).subscribe(),Jt=c.h.create((0,r.zG)(f,_.g_((()=>pt.CV.skip),(()=>ne.l$.text)),_.G)),Zt=[(0,St.A7)(jt,Qe,q),(0,r.zG)(Ee.EQ.focusMarkByActiveAlert(Qe,Lt,e.alertsReader,qe.O.getActiveFocusableItem,N.getLogger("MarksEffects.focusMarkByActiveAlert")),ve.nL.Effect.Producer.delayed(g)),vt(Lt.events,Oe,N.getLogger("createOnAlertApplySideEffect")),mt(gt,Qe,e.alertsReader,ee,N),ft(Qe,Jt,At.autoFocusEnabled),...gt.getApplicatorEffects(),At.applicatorEffects,me.R7(Qe,It,Oe,(0,M.MZ)(gt.actionEvents),{cardsAroundActive:10,cardsBeyondViewport:10}),(0,r.zG)((0,pt.k9)(Qe,Ht,Jt,qe.O.getActiveAlignableItem,Oe),ve.nL.Effect.Producer.delayed(g)),me.XU(Qe,It,Oe),bt(Ut,Bt),le.dv.createSendActiveAlertFeedbacksEffect(Qe,qe.O.getActiveItemWithAlert,e.alertsService,e.alertsReader,N.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),...dt.applicatorEffects(gt.actionEvents,Oe.transitionTo)],Qt=c.h.create(P.R.SpecialId.AllAlerts),ei=Qe.view((e=>e.currentLens.id)).pipe(u.h((e=>e===P.R.SpecialId.AllAlerts))).subscribe(k.wW(Qt)),ti=(0,ue.VC)($e,it,Qt,Oe),ii=c.h.create(f),ni=(0,ue.Dv)((e=>P.R.isMainLens(e.currentLens.id)),ti,Oe),ri=new ue.vM(e.sessionModel.checkingState,Qe),ai=(0,r.zG)([(0,r.zG)((e=>ue.Py.whenShouldVerifyCurrentLens(qe.O.getActiveItemWithAlert,Oe)(e)),ue.Py.behaviorToEffect((()=>_.G(ve.nL.Effect.FocusBehavior.focusNext)))),(0,r.zG)((0,_e.W9)((()=>_.pC(ii.get())),ue.Py.whenNoActiveCard),ue.Py.behaviorToEffect((e=>(0,r.zG)((e=>{const t=(0,_.DT)((0,_e.Kg)(qe.O.isAlertCard,qe.O.isAlertsBundle));return(0,r.zG)(ii.get(),_.tS((i=>(ii.set(_.YP),ve.nL.hasCards(e)?(0,r.zG)(e.currentLens.items.reduce(((e,n)=>(0,r.zG)(e,_.wp((()=>(0,r.zG)(n,t,_.tS((e=>_.ij(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),_.YP),_.UI((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):_.YP))))})(e),_.UI((e=>ve.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,r.zG)((0,_e.W9)((()=>At.autoFocusEnabled.get()),(0,_e.W9)(ue.Py.whenFirstOpeningDocumentWithAlerts(ri),ue.Py.whenNoActiveCard)),ue.Py.behaviorToEffect((()=>_.G(ve.nL.Effect.FocusBehavior.focusFirst))))],(0,te.g_)((0,te._e)(_.gW())())),si=ue.Py.getStateTransformer(ai,ni,e.alertsReader,Oe,(e=>At.autoFocusEnabled.get()&&"text"!==e.alertSource),M.Q1,Qt),oi=be.v.Items.getItemsPositionsUpdateTransformer(Oe),li=(0,M.ls)(si,Pe.L9(oi)),ci=new Se.l(Qe,$e,e.alertsReader,e.alertsService,Zt,qe.O.getActiveItemWithAlert,li),di=Ut.pipe(h.U((({lensId:e})=>e)),u.h((e=>e===P.R.SpecialId.AllAlerts)),xe.x()).subscribe((e=>{i.set(e)})),ui=_t.activeView.pipe(h.U((e=>{switch(e.type){case Ze.a.Type.default:return i.get();case Ze.a.Type.emogenie:return P.R.SpecialId.PredictionEmogenie;case Ze.a.Type.proofitReview:return P.R.SpecialId.RealTimeProofit;default:return null}})),u.h(Ke.fQ),xe.x(),h.U((e=>[e,e===P.R.SpecialId.AllAlerts]))).subscribe((([e,t])=>Ut.next({lensId:e,focusFirstCard:t}))),hi=c.h.create(_.YP),gi=G();gi&&gi.capiMessages.pipe(u.h((e=>"start"===e.action))).subscribe((e=>hi.set(_.G(e))));const pi=new ut.X(v,w,O,y),mi=gt.actionEvents.pipe(u.h(he.lY.isOpenIdeasGallery)).subscribe((()=>self.open((0,nt.Um)().grammarlyIdeasSales,"_blank"))),fi=(0,at.W)(R),vi=gt.actionEvents.subscribe((0,M.ls)((0,De.JH)(e.alertsReader,De.SV.Source.assistant),C.bw((e=>{(async()=>{e.kind===De.SV.Kind.alertApply&&e.source===De.SV.Source.assistant&&await B.incrementCounter(),D.next(e)})()}))));return{lensState:Qe,cardsViewModel:gt,lensPreviewViewModel:X,cardsListScrollManager:It,upgradeViewModel:ot,alertProcessor:F,assistantHeaderViewModel:Ot,assistantLayoutViewModel:_t,assistantCardListViewModel:At,lensChanged:Ut,predictionsPreviewViewModel:Ct,assistantFeedbackViewModel:Vt,assistantSettingsViewModel:pi,assistantProofitViewModel:zt,assistantModalManager:lt,marksViewModel:Lt,gnar:S,positionViewModel:fi,user:A,capabilities:Oe,isSingleCardAssistant:!1,dispose:()=>{vi.unsubscribe(),gt.dispose(),ci.dispose(),Lt.dispose(),Ct.dispose(),di.unsubscribe(),K.unsubscribe(),ui.unsubscribe(),Ot.dispose(),At.dispose(),lt.hideAll(),ei.unsubscribe(),Nt.unsubscribe(),Gt.unsubscribe(),mi.unsubscribe(),Kt.unsubscribe(),Xt.unsubscribe(),$t.unsubscribe(),Ft.unsubscribe(),(0,r.zG)(zt,C.bw((e=>e.dispose()))),Et.dispose()}}};var Dt,Lt=i(8794),Ht=i(45806),Ut=i(67311),Bt=i(3058),Ot=i(12995),Gt=i(66795);!function(e){e.AccountCreation="accountCreation",e.Tour="tour",e.TryWebsite="tryWebsite",e.ViewApps="viewApps"}(Dt||(Dt={}));const Nt={completedItems:[]};var Vt,zt;!function(e){e.installed="installed",e.notInstalled="notInstalled"}(Vt||(Vt={})),function(e){e.macExtension="macExtension",e.windowsExtension="windowsExtension",e.mobileIOS="mobile-ios",e.mobileAndroid="mobile-android"}(zt||(zt={}));class Wt{constructor(e,t,i,n){this.anonymous=e,this.state=t,this.gnar=i,this._dapiActions=n,this.actions={updateChecklistState:e=>{var t;this._dapiActions.setGetStartedChecklistState((t=e,encodeURI(JSON.stringify({...t,completedItems:t.completedItems.filter((e=>null!=e&&"string"==typeof e))}))))}}}get userClientState(){return e=this.state.user,new Map(Object.values(zt).map((t=>[t,e.groups.includes(t)?Vt.installed:Vt.notInstalled])));var e}get isStudent(){var e,t;return"school"===(null===(t=null===(e=this.state.user)||void 0===e?void 0:e.customFields)||void 0===t?void 0:t.frontend_role)}get checklistState(){return this.state.dapi["DN:getStartedChecklistSettings"]?(e=>{try{const t=decodeURI(e),i=JSON.parse(t);if("completedItems"in i&&Array.isArray(i.completedItems)){const e=i.completedItems.filter((e=>null!==e&&"string"==typeof e));return{...i,completedItems:e}}}catch(e){return Nt}return Nt})(this.state.dapi["DN:getStartedChecklistSettings"]):Nt}}var jt=i(32073),qt=i(79620),Yt=i(20182);class $t{constructor(e,t,i,n){if(this._cardsViewModel=t,this._subs=new jt.w0,this._successReportFooterBulkDismissAlertsCount=c.h.create(0),this.showBulkDismissFeed=()=>{this._cardsViewModel.actionEvents.next(qt.fr.create([{type:"pushAssistantFeed",feedId:qt.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID}]))},n.isGateEnabled(Yt.K.SduiBulkDismiss)){const t=e.pipe(h.U(qt.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),h.U((e=>e.size)),xe.x());this._subs.add(f.a([t,i.pipe(xe.x())]).pipe(h.U((([e,t])=>t?e:0))).subscribe(k.wW(this._successReportFooterBulkDismissAlertsCount)))}}get successReportFooterBulkDismissAlertsCount(){return this._successReportFooterBulkDismissAlertsCount.view()}dispose(){this._subs.unsubscribe()}}var Kt,Xt=i(65810),Jt=i(84825),Zt=i(14944),Qt=i(54553),ei=i(39491),ti=i(85262),ii=i(93259),ni=i(44046);!function(e){const t=e=>(0,r.zG)(ve.In.getActiveItemOfType(n)(e),_.tS(Bt.P.Capabilities.toAlertItem));function i(e){return ve.nL.Items.mapper((e=>e.kind),{[Bt.P.Kind]:e})}function n(e){return e.kind===Bt.P.Kind}function a(){return{viewState:()=>e=>(e.kind,Bt.P.Kind,{view:e,kind:"alertRefSDUI"})}}e.isSelectableItem=n,e.getActiveItemWithAlert=function(e){return t(e)},e.getActiveAlignableItem=e=>t(e),e.getActiveFocusableItem=e=>t(e),e.checksFeedItemsMapper=i,e.isAlertRefSDUI=n,e.defaultOrd=t=>(0,te.g_)(Zt.iP())([(0,r.zG)(Zt.C2,Zt.Uz((0,_e.ff)(Bt.P.Item.isBulkAcceptSDUI))),(0,r.zG)(Zt.C2,Zt.Uz(Bt.P.Item.isBulkDismissSDUI)),e.getByActiveAlertPositionOrd(t)]),e.sduiToChecksFeedOrd=function(t){return i=>Zt.Zt(((n,r)=>ei.e.isSDUIItem(n)&&ei.e.isSDUIItem(r)?ei.e.getOrd(i).compare(n,r):e.getByActiveAlertPositionOrd(t).compare(n,r)))},e.getByActiveAlertPositionOrd=e=>(0,te.g_)(Zt.iP())([(0,r.zG)(ne.h$.ordHRange,Zt.Uz((t=>(0,r.zG)(e.hasActiveAlert(t),_.UI((e=>e.alert)),_.fS((()=>({getHighlightRanges:()=>[{start:0,end:0}]})))))))]),e.item=e=>Qt.UI.Union.make("kind",{alertRefSDUI:ti.p.SingleCard(e),empty:ii.Q.Empty}),e.viewState=a,e.createCardListFlow=ni.p,e.listItemOrd=e=>Zt.Uz((e=>e.cell.item.view))(e).compare;const s={equals:(e,t)=>e.kind===t.kind&&Xt.s.eqById.equals(e,t)},o=e=>({equals:(t,i)=>{const n={[Bt.P.Kind]:e};return s.equals(t,i)&&function(e,t){return(i,n)=>t[e(i)].equals(i,n)}((e=>e.kind),n)(t,i)}});function l(){return{changePosition:e=>i(Bt.P.Capabilities.changePosition(e))}}function c(){return{completeTransition:e=>i(Bt.P.Capabilities.animatable.completeTransition(e)),transitionTo:e=>i(Bt.P.Capabilities.animatable.transitionTo(e)),changeVisualState:e=>i(Bt.P.Capabilities.animatable.changeVisualState(e))}}function d(){return{select:(e,t)=>i(Bt.P.Capabilities.select.select(e,t)),selectByAlert:(e,t,n)=>i(Bt.P.Capabilities.select.selectByAlert(e,t,n)),unselect:(e,t)=>i(Bt.P.Capabilities.select.unselect((0,M.MZ)(e),t))}}function u(){return{removeAlertFromItem:(e,t)=>i((i=>i.id===qt.D1.SuccessReport.ID?i:Bt.P.Capabilities.removeAlert.removeAlertFromItem(e,t)(i)))}}function h(){return{remove:(e,t)=>i(Bt.P.Capabilities.remove.remove(e,t))}}function g(){return{updateWithAlerts:e=>i(M.yR)}}function p(){return{nextAlert:i((()=>_.YP)),prevAlert:i((()=>_.YP))}}function m(){return{updateUserInput:e=>i(M.yR)}}e.equatable={structEq:o(Bt.P.eq),idEq:o(s),visualStateEq:o(Bt.P.eq)},e.changePosition=l,e.disposable={isScheduledToDispose:i(Bt.P.Capabilities.disposable.isScheduledToDispose)},e.hidable={isHidden:i(Jt.o.isHidden)},e.animatableItem=c,e.hasAlertsQueries={isSelectableByAlert:e=>i(Bt.P.Capabilities.hasAlerts.isSelectableByAlert(e)),hasAlert:e=>i(Bt.P.Capabilities.hasAlerts.hasAlert(e)),hasActiveAlert:i(Bt.P.Capabilities.hasAlerts.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:i(M.jv)},e.select=d,e.removeAlert=u,e.remove=h,e.updateWithAlert=g,e.releaseAlert=()=>be.v.Capabilities.getAlertReleaser({...u(),...e.disposable}),e.unselectable=()=>be.v.Capabilities.getUnselectable(ve.In.getActiveItem,{...d(),...e.disposable}),e.selectableByAlert=()=>be.v.Capabilities.getSelectableByAlert(ve.In.getActiveItem,{...e.hasAlertsQueries,...d(),...be.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=()=>be.v.Capabilities.getSelectableById(ve.In.getActiveItem,{...d(),...e.disposable}),e.updateMeta=()=>({updateMeta:be.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=e=>be.v.Capabilities.getAnimatable(e,{...u(),...c(),...be.v.Capabilities.getHasChecksFeed()}),e.alignable={isValidToAlign:i((t=>!e.disposable.isScheduledToDispose(t)))},e.alertIterator=p,e.itemReleaser=()=>be.v.Capabilities.getItemReleaser(),e.hasAlerts=be.v.Capabilities.getHasAlerts,e.hasUserInput=m,e.verifiable=()=>be.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>({clone:i(Xt.s.Capabilities.getPojoCloneable().clone)});const f={getFeatures:i((e=>Bt.P.Item.isBulkDismissSDUI(e)?[Bt.P.Features.BulkDismiss]:Bt.P.Item.isBulkAcceptSDUI(e)?[Bt.P.Features.BulkAccept]:[]))};e.getCapabilities=function(t,i){return{...a(),...e.disposable,...e.hidable,...e.equatable,...m(),...e.cloneable(),...l(),...c(),...d(),...h(),...u(),...g(),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t),...e.unselectable(t),...e.selectableByAlert(t),...e.selectableById(t),...e.updateMeta(t),...e.animatableFeed(t),...e.itemReleaser(),...f,...e.verifiable(),shouldAnimatePositionChange:()=>()=>!1,...e.cloneable(),...e.hasAlerts(p(),i,(()=>e.isSelectableItem),{...e.hasAlertsQueries,...e.disposable})}}}(Kt||(Kt={}));class ri{constructor(e,t){this._sub=new jt.w0;const i=(0,r.zG)(e,h.U((0,M.ls)((e=>e.actions),Oe.Ew((e=>"openCreateSnippetModal"===e.type)))),Ve.oA);this._sub.add((0,r.zG)(i,w.M(t.pipe(h.U(_.pF((()=>null)))))).subscribe((([e,t])=>{t&&t.showSnippetsEditor(e.snippetContent)})))}dispose(){this._sub.unsubscribe()}}class ai{constructor(e,t){this._domain=e,this._gnar=t}getDomain(){return this._domain}submitFeedback(e){this._gnar.assistantFeedbackSubmitButtonClick("single_card_assistant",e.domain,e.text,(0,Qe.dK)(e)?e.score:void 0)}}var si,oi=i(90127);!function(e){e.correct="correct",e.incorrect="incorrect",e.neutral="neutral"}(si||(si={}));class li{constructor(e,t,i,n,a){this._learnMoreInfo=c.h.create(null),this._sub=new jt.w0;const s=(0,r.zG)(n,h.U((0,M.ls)((e=>e.actions),Oe.Ew((e=>"openLearnMore"===e.type||"switchView"===e.type&&"learn-more"===e.selected)))),Ve.oA);this._sub.add((0,r.zG)(s,w.M(e),h.U((([e,n])=>{let s=null;if(ve.nL.hasItems(n)){const o=(0,r.zG)(a(n.currentLens),_.pF((()=>null))),l=o?(0,r.zG)(t.getById(o.activeAlert.id),_.pF((()=>null))):null,c=(0,r.zG)(_.ij(l),_.tS(ne.bZ.getRawId),_.pF((()=>null))),d=c?i.alerts.getAlertById(c):null;d&&T.S.isCapiAlert(d)&&(s={title:d.todo,showTitleOnContent:"switchView"===e.type,details:d.details||d.explanation,examples:(0,r.zG)(oi.J.parse(d.examples,d.point.includes("Italicization")),_.UI((e=>e.map((e=>e.map((e=>({type:e.color===oi.J.Color.green?si.correct:e.color===oi.J.Color.red?si.incorrect:si.neutral,title:(0,r.zG)(e.title,_.UI((e=>`${e}:`)),_.pF((()=>null))),text:e.text,useItalicText:!e.hasItalic}))))).flat())),_.pF((()=>[])))})}return s}))).subscribe(k.wW(this._learnMoreInfo)))}get learnMoreInfo(){return this._learnMoreInfo.view()}dispose(){this._sub.unsubscribe()}}class ci{get header(){return this._header}constructor(e,t){this.popView=new d.x,this._header=c.h.create(_.YP),this._subs=new s.w.Keeper,this._subs.push((0,M.zG)(this.popView,w.M(f.a([t.sduiManager.state,t.sduiFeedManager.feed])),h.U((([e,[t,i]])=>qt.D1.AssistantFeed.Header.getSelectedViewBackButtonActions(t,i.feedId))),Ve.oA,y.b((t=>e.actionEvents.next(qt.fr.create(t))))).subscribe()),this._subs.push(t.sduiFeedManager.header.pipe(h.U(_.of)).subscribe(k.wW(this._header)))}dispose(){this._subs.dispose()}}var di=i(25961),ui=i(47230);class hi{constructor(e,t,i,n,r,a){this._cardEvents=e,this._alertProcessor=t,this._pageState=i,this._actions=n,this._experimentClient=r,this._gnar=a,this._subs=new jt.w0,this.currentCard=c.h.create(void 0),this._getExtraFooterOutcomeType=e=>{var t,i;if(e){const n=this._alertProcessor.alerts.getAlertById(e.toString());if(n&&T.S.isCapiAlert(n)){const e=n.outcome;if((0,di.wF)(e)&&!(null===(i=null===(t=this._pageState.get().lifetimeAlertStats)||void 0===t?void 0:t.seen)||void 0===i?void 0:i[e]))return this._actions.setHasSeenSuggestionType(e),e}}},this.onShow=()=>{var e;this._gnar.firstAcceptFooterShow(null!==(e=this.extraFooterOutcomeType.get())&&void 0!==e?e:"other","assistant")},this._pageState.get().showFirstSuggestionFooters&&"test"===this._experimentClient.getTreatment(ui.p.ProgressiveExposure)?(this._subs.add(this._cardEvents.subscribe((e=>{if(e.type===he.eI.Kind.completeTransitionTo){const t=e.id;"number"!=typeof t&&"string"!=typeof t||this.currentCard.set(t)}}))),this.extraFooterOutcomeType=this.currentCard.view((e=>this._getExtraFooterOutcomeType(e)))):this.extraFooterOutcomeType=c.h.create(void 0)}dispose(){this._subs.unsubscribe()}}var gi=i(29227),pi=i(98665),mi=i(74925),fi=i(29677),vi=i(75435);const bi=e=>e.pipe(u.h((e=>"sdui_add"===e.kind||"sdui_update"===e.kind)),h.U((e=>e.sdui)),u.h((e=>"assistantFeed"===e.type&&"default-feed"===e.id)),h.U((e=>vi.ab.getCardPropsForFeed(e))),b.O({})),wi=(e,t,i)=>[{type:"text",id:mi.JX.from("text"),meta:{label:"You accepted "},size:fi.yH.Regular,text:"You accepted ",textColor:fi.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:`${i}`},size:fi.yH.Regular,text:`${i}`,textColor:fi.Il.CoreNeutral50,format:[fi.SQ.Bold],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:" suggestions and improved your quality score by "},size:fi.yH.Regular,text:" suggestions and improved your quality score by ",textColor:fi.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:""+(e-t)},size:fi.yH.Regular,text:""+(e-t),textColor:fi.Il.CoreNeutral50,format:[fi.SQ.Bold],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:" points."},size:fi.yH.Regular,text:" points.",textColor:fi.Il.CoreNeutral50,format:[],selectable:!1}],Si=[{type:"text",id:mi.JX.from("text"),meta:{label:"Keep it up! You’ve earned a perfect quality score."},size:fi.yH.Regular,text:"Keep it up! You’ve earned a perfect quality score.",textColor:fi.Il.CoreNeutral50,format:[],selectable:!1}];var yi;!function(e){e[e.default=0]="default",e[e.withQualityScore=1]="withQualityScore",e[e.withPerformanceScore=2]="withPerformanceScore"}(yi||(yi={}));class ki{constructor(e,t,i,n,a,s,o,l){this._sduiManager=e,this._sduiBufferService=i,this._statisticsService=n,this._upgradeHookCardExists=s,this._sessionModel=o,this._experimentClient=l,this._subs=new jt.w0,this.shouldShowSuccessReportWithPerformanceScore=(e,t)=>e===pi.v0.ScoresStatus.OK&&t>=3&&"test"===this._experimentClient.getTreatment(ui.p.PerformanceScoreSuccessState),this.shouldShowSuccessReportWithQualityScore=e=>e===pi.v0.ScoresStatus.OK&&("text"===this._experimentClient.getTreatment(ui.p.QualityScore)||"progress_bar"===this._experimentClient.getTreatment(ui.p.QualityScore)),this.focusSuccessReportStateTransformer=({state:e,metadata:t})=>{if(!ve.nL.hasCards(e))return Me.t$({state:e,metadata:t});const i=ve.nL.Prism.getLens();return Me.t$({state:i.modify((e=>_.pC(e.cardIndex)||e.items.size>1||(0,r.zG)(e.items.getAt(0),_.UI((e=>e.id!==qt.D1.SuccessReport.ID)),_.fS(M.jv))?e:{...e,cardIndex:_.G(0)}),e),metadata:t})};const c=this._sduiManager.state.pipe(h.U((e=>qt.D1.GButton.getPushAssistantFeedAction(e,qt.D1.GButton.DEFAULT_GBUTTON_ID))),Ve.oA,h.U((e=>e.feedId))),d=a.pipe(h.U((e=>ve.nL.hasSuccess(e)&&ve.nL.hasItems(e)&&(0===e.currentLens.items.size||(0,r.zG)(e.currentLens.items.getAt(0),_.UI((e=>e.id===qt.D1.SuccessReport.ID)),_.fS(M.jv)))))),u=t.feed.pipe(w.M(c),h.U((([e,t])=>e.feedId===t)));this.isSuccess=f.a([d,u]).pipe(h.U((([e,t])=>e&&t)))}_getSuccessMessages(e,t){return{title:t<2?"Looking good so far":e>0?`${e} ${(0,gi._6)(e,"issue addressed","issues addressed")}`:"Nice job!",subTitle:t<2?"Keep writing to see suggestions.":e>0?"All clear!":"You made that look easy!"}}_getSduiKnownId(e){switch(e){case yi.withQualityScore:return qt.D1.SuccessReport.SUCCESS_REPORT_WITH_QUALITY_SCORE_CARD_ID;case yi.withPerformanceScore:return qt.D1.SuccessReport.SUCCESS_REPORT_WITH_PERFORMANCE_SCORE_CARD_ID;default:return qt.D1.SuccessReport.SUCCESS_REPORT_CARD_ID}}_getSuccessReportSDUI(e,t,i,n){const{title:r,subTitle:a}=this._getSuccessMessages(e,t),s=[{type:"block",id:mi.JX.from("block"),parts:[{type:"image",id:mi.JX.from("image"),meta:{},name:mi.yL.unknown("success_report_image"),url:"https://assets.grammarly.com/icons/v1/notification-ok.svg",width:2,height:2}],name:mi.yL.unknown("success_report_image_block"),spacing:{top:fi.T.D1,right:fi.T.D0,bottom:fi.T.D075,left:fi.T.D0},horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[{type:"text",id:mi.JX.from("text"),size:fi.yH.Regular,meta:{label:r},text:r,textColor:fi.Il.CoreNeutral90,format:[fi.SQ.Bold],selectable:!1}],name:mi.yL.unknown("success_report_title_block"),horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[{type:"text",id:mi.JX.from("text"),size:fi.yH.Regular,meta:{label:a},text:a,textColor:fi.Il.CoreNeutral50,format:[],selectable:!1}],name:mi.yL.unknown("success_report_subtitle_block"),horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_subtitle_space_1_block"),spacing:{top:fi.T.D0,right:fi.T.D0,bottom:fi.T.D1,left:fi.T.D0}},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_subtitle_space_2_block"),spacing:{top:fi.T.D0,right:fi.T.D0,bottom:fi.T.D1,left:fi.T.D0}},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_subtitle_space_3_block"),spacing:{top:fi.T.D0,right:fi.T.D0,bottom:fi.T.D1,left:fi.T.D0}},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_subtitle_space_4_block"),spacing:{top:fi.T.D0,right:fi.T.D0,bottom:fi.T.D1,left:fi.T.D0}}],o=this._getSduiKnownId(null==n?void 0:n.layout),l=n?(t=>{switch(t.layout){case yi.withPerformanceScore:return((e,t,i)=>[{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_top_spacing_block"),spacing:{top:fi.T.D1,right:fi.T.D0,bottom:fi.T.D1,left:fi.T.D0}},{type:"block",id:mi.JX.from("block"),parts:[{type:"text",id:mi.JX.from("text"),meta:{label:`${e}`},size:fi.yH.HeadingLevel1,text:`${e}`,textColor:fi.Il.CoreNeutral90,format:[fi.SQ.Bold],selectable:!1}],name:mi.yL.unknown("success_report_score_block"),spacing:{top:fi.T.D0,right:fi.T.D0,bottom:fi.T.D025,left:fi.T.D0},horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[{type:"text",id:mi.JX.from("text"),meta:{label:"Out of 100"},size:fi.yH.Medium,text:"Out of 100",textColor:fi.Il.CoreNeutral90,format:[fi.SQ.Bold],selectable:!1}],name:mi.yL.unknown("success_report_out_of_100_block"),horizontalAlign:fi.Kq.Center},{type:"row",id:mi.JX.from("row"),left:[{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_you_corrected_left_spacing_block"),fraction:1,horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[{type:"text",id:mi.JX.from("text"),meta:{label:"You corrected "},size:fi.yH.Regular,text:"You corrected ",textColor:fi.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:`${i}`},size:fi.yH.Regular,text:`${i}`,textColor:fi.Il.CoreNeutral50,format:[fi.SQ.Bold],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:" issues and improved your writing by "},size:fi.yH.Regular,text:" issues and improved your writing by ",textColor:fi.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:""+(e-t)},size:fi.yH.Regular,text:""+(e-t),textColor:fi.Il.CoreNeutral50,format:[fi.SQ.Bold],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:" points."},size:fi.yH.Regular,text:" points.",textColor:fi.Il.CoreNeutral50,format:[],selectable:!1}],name:mi.yL.unknown("success_report_you_corrected_text_block"),fraction:4,horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_you_corrected_right_spacing_block"),fraction:1,horizontalAlign:fi.Kq.Center}],right:[],verticalAlign:fi.g$.Middle,name:mi.yL.unknown("success_report_you_corrected_row"),spacing:{top:fi.T.D025,right:fi.T.D0,bottom:fi.T.D025,left:fi.T.D0}},{type:"block",id:mi.JX.from("block"),parts:[{type:"button",id:qt.D1.SuccessReport.OPEN_PERFORMANCE_SCORE_INTERACTION_ID,meta:{label:"See Details"},name:mi.yL.unknown("success_report_see_details_button"),kind:fi.Lv.Primary,state:fi.BN.Enabled,label:{type:"block",id:mi.JX.from("block"),parts:[{type:"text",id:mi.JX.from("text"),meta:{label:"See Details"},size:fi.yH.Regular,text:"See Details",textColor:fi.Il.CoreNeutral0,format:[],selectable:!1}],name:mi.yL.unknown("textContainer"),spacing:{top:fi.T.D0,right:fi.T.D05,bottom:fi.T.D0,left:fi.T.D05},verticalAlign:fi.g$.Middle},actions:[{type:"pushAssistantFeed",feedId:"performance-score-feed"},{type:"notify",userAction:fi.nz.Click}],shape:fi.jL.Square}],name:mi.yL.unknown("success_report_cta_block"),spacing:{top:fi.T.D025,right:fi.T.D0,bottom:fi.T.D0,left:fi.T.D0},horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_bottom_spacing_block"),spacing:{top:fi.T.D1,right:fi.T.D0,bottom:fi.T.D1,left:fi.T.D0}}])(t.score,t.lowestScore,e);case yi.withQualityScore:return((e,t,i)=>[{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_top_spacing_block"),spacing:{top:fi.T.D125,right:fi.T.D0,bottom:fi.T.D125,left:fi.T.D0}},{type:"block",id:mi.JX.from("block"),parts:[{type:"image",id:mi.JX.from("image"),meta:{},name:mi.yL.unknown("illustration"),url:"https://assets.grammarly.com/sdui/v1/paper-plane.svg",width:5,height:5}],name:mi.yL.unknown("success_report_illustration_block"),spacing:{top:fi.T.D0,right:fi.T.D0,bottom:fi.T.D1,left:fi.T.D0},horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[{type:"text",id:mi.JX.from("text"),meta:{label:"Quality Score: "},size:fi.yH.Medium,text:"Quality Score: ",textColor:fi.Il.CoreNeutral90,format:[fi.SQ.Bold],selectable:!1},{type:"text",id:mi.JX.from("text"),meta:{label:`${e}`},size:fi.yH.Medium,text:`${e}`,textColor:fi.Il.CoreNeutral90,format:[fi.SQ.Bold],selectable:!1}],name:mi.yL.unknown("success_report_quality_score_block"),horizontalAlign:fi.Kq.Center},{type:"row",id:mi.JX.from("row"),left:[{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_you_accepted_left_spacing_block"),fraction:8,horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:e>=100&&t>=100?Si:wi(e,t,i),name:mi.yL.unknown("success_report_you_accepted_text_block"),fraction:84,horizontalAlign:fi.Kq.Center},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_you_accepted_right_spacing_block"),fraction:8,horizontalAlign:fi.Kq.Center}],right:[],verticalAlign:fi.g$.Middle,name:mi.yL.unknown("success_report_you_accepted_row"),spacing:{top:fi.T.D0,right:fi.T.D0,bottom:fi.T.D0,left:fi.T.D0}},{type:"block",id:mi.JX.from("block"),parts:[],name:mi.yL.unknown("success_report_bottom_spacing_block"),spacing:{top:fi.T.D125,right:fi.T.D0,bottom:fi.T.D125,left:fi.T.D0}}])(t.score,t.lowestScore,e);case yi.default:return s}})(n):s;return{type:"assistantCard",id:o,meta:{},child:{type:"viewStack",id:"card-viewStack",views:{"default-suggestion":{type:"column",id:mi.JX.from("column"),children:l,name:mi.yL.unknown("success_report_content_column")},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"},feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"}},selected:"default-suggestion"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:fi.nz.Focus}],onBlur:[],properties:i}}initSuccessReportSDUIEmulation(){const e=this._statisticsService.sessionStats.view((e=>e?e.alertsStats.accepted.total:0)),t=this._statisticsService.generalScore.view((e=>null!=e?e:0)).pipe(xe.x()),i=this._statisticsService.lowestGeneralScore.view((e=>null!=e?e:0)).pipe(xe.x()),n=this._sessionModel.scoreStatus.pipe(xe.x(),h.U(_.fS((()=>pi.v0.ScoresStatus.ERROR))));this._subs.add(f.a([this.isSuccess.pipe(xe.x()),this._sduiManager.state.pipe(h.U(qt.D1.SuccessReport.findSuccessReportSduiItem),h.U(_.pC),xe.x()),this._upgradeHookCardExists,t,i,n]).pipe(w.M(bi(this._sduiBufferService.capiEvents)),h.U((([[e,t,i,n,r,a],s])=>{var o,l,c,d;const u=null!==(l=null===(o=this._statisticsService.sessionStats.get())||void 0===o?void 0:o.alertsStats.accepted.total)&&void 0!==l?l:0,h=null!==(d=null===(c=this._statisticsService.sessionStats.get())||void 0===c?void 0:c.alertsStats.dismissed.total)&&void 0!==d?d:0,g=this._statisticsService.wordsCount.get(),p=this.shouldShowSuccessReportWithPerformanceScore(a,u+h),m=this.shouldShowSuccessReportWithQualityScore(a);if(!e||i||t)return!(!e||!t)||!(e||!t)&&(this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_remove",sduiRootId:qt.D1.SuccessReport.ID}),!1);{const e=this._getSuccessReportSDUI(u,g,s,p?{layout:yi.withPerformanceScore,score:n,lowestScore:r}:m?{layout:yi.withQualityScore,score:n,lowestScore:r}:{layout:yi.default});return this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_add",rev:0,sduiRootId:qt.D1.SuccessReport.ID,sdui:e}),!0}})),p.w((r=>r?f.a([e,this._statisticsService.wordsCount,t,i,n,bi(this._sduiBufferService.capiEvents)]).pipe(y.b((([e,t,i,n,r,a])=>{var s,o;const l=null!==(o=null===(s=this._statisticsService.sessionStats.get())||void 0===s?void 0:s.alertsStats.dismissed.total)&&void 0!==o?o:0,c=this.shouldShowSuccessReportWithPerformanceScore(r,e+l),d=this.shouldShowSuccessReportWithQualityScore(r),u=this._getSuccessReportSDUI(e,t,a,c?{layout:yi.withPerformanceScore,score:i,lowestScore:n}:d?{layout:yi.withQualityScore,score:i,lowestScore:n}:{layout:yi.default});this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_update",rev:0,sduiRootId:qt.D1.SuccessReport.ID,sdui:u})}))):Te.E))).subscribe())}dispose(){this._subs.unsubscribe()}}var Ei=i(61230),_i=i(20358);const Ci={"Style/ToneImprovement/ConfidentRewrite/ToneAI":"1f91d","Style/ToneImprovement/PersonableRewrite/ToneAI":"1f917","Style/ToneImprovement/PositiveFraming/ToneAI":"1f64c"},Ai=["Style/Sensitivity/SupportUkraine/WarLanguage","Style/Sensitivity/ExtremelySensitive/SuicideIdeation"],Ii=e=>e.patternName.startsWith("Style/Sensitivity")&&!Ai.some((t=>e.patternName===t));var xi;!function(e){e.isToneImprovementSuggestionInfo=function(e){return"emojiId"in e},e.isInclusiveLanguageToneSuggestionInfo=function(e){return"iconId"in e&&"inclusive_language"===e.toneCategory},e.createToneImprovementSuggestionUphookInfo=function(e){const t=e._raw.minicardTitle||e._raw.title||"",i=t.replace(_i.V,"").trim(),n=t.match(_i.V),r=n&&n.length?n[0]:null,a=Ci[e.patternName];return{...r?{emojiLiteral:r}:a?{emojiId:a}:{},title:i,alertId:e.id,toneCategory:i,patternName:e.patternName,isUphook:!0}},e.isToneImprovementSuggestionUphookInfo=function(e){return"isUphook"in e&&e.isUphook}}(xi||(xi={}));class Ti{constructor(e,t,i,n,r,a,s,o,l){this._alertsReader=e,this._getSessionUuid=i,this._gnar=n,this.emogenieService=r,this._upgradeViewModel=a,this._cardActions=o,this._sduiItems=l,this._sub=new jt.w0;const d=this._sduiItems.view(qt.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),u=c.h.combine(t,d,((e,t)=>Ei.p.reduce([],((e,i)=>(t.has(i.id)||e.push(i.alert),e)))(e))),h=r.viewState.view("isBrandTonesEnabled"),g=s.view("isPremium");this.toneSuggestionInfo=c.h.combine(u,h,g,((e,t,i)=>Ti.getToneSuggestionInfoFromAlerts(e,t,i))).view()}static getToneSuggestionInfoFromAlerts(e,t,i){let n;if(i){n=e.filter((e=>e.patternName.startsWith("Style/ToneImprovement")||Ii(e))).map((e=>{var t,i,n;return Ii(e)?{iconId:null!==(t=e._raw.extra_properties.icon_id)&&void 0!==t?t:"",title:e.miniCardTitle,alertId:e.id,toneCategory:"inclusive_language",patternName:e.patternName}:{emojiId:null!==(i=e._raw.extra_properties.emoji_id)&&void 0!==i?i:"",title:ne.bZ.isToneAI(e)?e.miniCardTitle:e.miniCardTitle.replace(_i.V,"").trim(),alertId:e.id,toneCategory:null!==(n=e._raw.extra_properties.tone)&&void 0!==n?n:"",patternName:e.patternName}}))}else{n=e.filter((e=>e._raw.hidden&&(e=>e.patternName.startsWith("Style/ToneImprovement"))(e))).map(xi.createToneImprovementSuggestionUphookInfo)}const r=new Set(n.map((e=>e.toneCategory))),a=n[0],s=t?"Want to sound more on-brand?":r.size>1?"Strike the right tone":null==a?void 0:a.title;return a?{...a,title:s}:a}_getCurrentSessionUuid(){return(0,r.zG)(this._getSessionUuid(),_.fS((()=>"")))}onShowToneSuggestionInfo(e){const t=xi.isToneImprovementSuggestionInfo(e)?e.emojiId:xi.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=xi.isToneImprovementSuggestionUphookInfo(e);this._gnar.toneDetectorToneSuggestionInfoShow(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i&&((0,je.nE)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport",upgradeHookVariant:"pro"}),(0,$e.Tb)().upgradeHooks.showUpgradeHook("toneDetector","emogenieReport","pro"))}onClickToneSuggestionInfoCta(e){const t=xi.isToneImprovementSuggestionInfo(e)?e.emojiId:xi.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=xi.isToneImprovementSuggestionUphookInfo(e);if(this._gnar.toneDetectorToneSuggestionInfoCtaClick(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i)(0,je.Qi)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport",upgradeHookVariant:"pro"}),(0,$e.Tb)().upgradeHooks.clickUpgradeHook("toneDetector","emogenieReport","pro"),this._upgradeViewModel.openUpgradeUrl(Ye.L.Place.toneSuggestion);else{const t=this._sduiItems.get(),i=(0,r.zG)(this._alertsReader.getById(e.alertId),_.tS(ne.bZ.getRawId),_.tS((e=>qt.D1.getByAlertId(t,e))),C.MH);this._cardActions.next(qt.fr.create([qt.D1.AssistantFeed.createPushAssistantFeedAction(qt.D1.AssistantFeed.TONE_INSIGHTS_SUGGESTIONS_FEED_ID,i.id)]))}}dispose(){this._sub.unsubscribe()}}var Ri=i(18669);class Mi{constructor(e){this._subs=new jt.w0,this._upgradeHookCard=c.h.create(_.YP),this._upgradeHookCardFocused=c.h.create(!1),this.processUpgradeHookSduiCardActions=(e,t,i)=>e.pipe(w.M(this._upgradeHookCard),h.U((([{actions:e,cardId:n},r])=>{e.forEach((e=>{"upgradeToPremium"===e.type?t.openUpgradeUrl(Ye.L.Place.assistantCardList):"notify"===e.type&&e.userAction===fi.nz.Focus&&(0,M.zG)(r,_.g_(M.jv,(e=>e.id.toString()===n)),(e=>{this._upgradeHookCardFocused.set(e),e&&i.upgradeHooksExp.upgradeHookCardShown((0,Ri.ge)())}))}))}))).subscribe(),this._subs.add(e.pipe(h.U(qt.D1.StrongAlertRef.findStrongAlertRefUpgradeHookSduiItem)).subscribe(k.wW(this._upgradeHookCard)))}get upgradeHookCard(){return this._upgradeHookCard.view()}get upgradeHookCardExists(){return this._upgradeHookCard.view(_.pC)}get upgradeHookCardFocused(){return this._upgradeHookCardFocused.view()}dispose(){this._subs.unsubscribe()}}var Pi=i(29093),Fi=i(98227),Di=i(79813),Li=i(88813),Hi=i(72255),Ui=i(679),Bi=i(14969),Oi=i(37514),Gi=i(73206),Ni=i(9358),Vi=i(22408),zi=i(49969),Wi=i(57065),ji=i(33384);const qi=({feedbackVM:e,entryPoint:t})=>a.createElement(Vi.u,{showDelay:Ni.gk,message:"Leave feedback"},a.createElement("div",{className:ji.feedbackButton,onClick:()=>e.openFeedback(t),"data-grammarly-part":"assistant-feedback-btn"},a.createElement(zi.A,{color:Wi.Z.blue50}),"Anything we can improve?"));var Yi=i(7150);const $i=({children:e,popActiveView:t,panelClassName:i,contentClassName:n,footer:r,onClickBack:s,hideBackButton:o=c.h.create(!1),dataPartName:l})=>a.createElement("div",{className:Yi.viewOverlay,"data-grammarly-part":"assistant-view-overlay"},a.createElement(H.F.Fragment,null,o.view((e=>!e&&a.createElement(z.M,{className:Yi.viewOverlayGoBack,clickHandler:()=>s?s():t(),dataGrammarlyPart:"assistant-go-back"},"<- Back")))),a.createElement("div",{className:i||Yi.defaultViewOverlayPanel},a.createElement("div",{className:n||Yi.content,"data-grammarly-part":l},e),r&&a.createElement("div",{className:Yi.footer},r)));var Ki=i(30337),Xi=i(41038),Ji=i(18385),Zi=i(59144),Qi=i(53533),en=i(60556),tn=i(7480),nn=i(40535);const rn=({assistantSettingsViewModel:e,upgradeViewModel:t,experimentClient:i,assistantFeedbackViewModel:n,onClose:r,children:s})=>{const{domain:o,actions:l,state:d,hasInProductDiscountSpecialOffer:h}=e,g=a.useRef(c.h.create(_.YP)),p=(0,Oi._)(i);a.useEffect((()=>{p&&l.getConfiguration("assistantSettingsPopup").then((e=>{(0,M.zG)(e,Me.UI((e=>{g.current.set(_.ij(e))})))}))}),[p]);const m=a.useCallback((({overrideUrl:e})=>{t.openUpgradeUrlWithOverride(Ye.L.Place.extensionSettingsAssistant,e)}),[t]),[f,v]=a.useState(!!d.view("page","enabled").get()),b={checked:f,update:v},w=a.createElement(H.F.div,{role:"region","aria-label":"Grammarly settings"},d.view((({user:e,page:t,dynamicConfig:n,dapi:r})=>a.createElement(Ji.a7,{actions:l,config:{enabled:!0,domain:o},settings:t,user:e,dapi:r,dynamicConfig:n,siteCategory:en.y.other,isReportBugFeatureAllowed:!i.isGateEnabled(Yt.K.HideReportBugByGrammarlyEmployeeFeature),openReportBugForm:e=>{self.open(tn.WY(e))},openDebugPage:()=>{self.open(chrome.runtime.getURL("src/debug.html"))},openUrl:e=>self.open(e),placement:"assistant",showCitationBuilderToggle:!1,siteSwitcherChecked:b,isIndianEnglishDialectSupported:i.isGateEnabled(Yt.K.IndianEnglishDialect)||i.isGateEnabled(Yt.K.IndianEnglishDialectInternal),isAutoApplySupported:i.isGateEnabled(Yt.K.SuggestionDeliveryAutoApply),downloadDebugReports:()=>Gi.B.download()}))),n?a.createElement(qi,{feedbackVM:n,entryPoint:Je.settings}):null),S=a.createElement(Xi.z,{kind:"primary",type:"submit",onClick:()=>{l.toggleSite(f,o),Ki.J.checkingToggleClick("assistant",en.y.other,f?"on":"off",o),(0,$e.Tb)().toggleExtension(f,"assistant",(0,Qi.Cg)(o)),null==r||r()},className:nn.settingsViewDoneButton,dataGrammarlyPart:"single-card-assistant-settings-done-button"},"Done"),y=a.createElement(H.F.Fragment,null,(0,Gt.gm)(d,h).view((({user:e,hasSpecialOffer:t})=>a.createElement(Zi.Z,{user:e,openSubscriptionDialog:m,isAssistant:!0,hasInProductDiscountSpecialOffer:t,hasUphookHubTestTreatment:(0,Oi.y)(i),uphookConfiguration:g.current,trackUphookHubEvent:(e,t)=>{t.pipe((0,u.h)(_.pC),(0,Bi.P)()).subscribe((t=>{l.trackConfiguration(e,t.value)}))}}))),S);return s({content:w,footer:y})},an=({viewModels:e,experimentClient:t})=>a.createElement(rn,{onClose:()=>e.assistantLayoutViewModel.popActiveView(),assistantSettingsViewModel:e.assistantSettingsViewModel,upgradeViewModel:e.upgradeViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,experimentClient:t},(({content:t,footer:i})=>a.createElement($i,{dataPartName:"settings-view-overlay",popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),panelClassName:nn.settingsViewOverlayPanel,contentClassName:nn.settingsViewOverlayContent,footer:i},t)));var sn=i(35917),on=i(48906),ln=i(49898);const cn={caption:"Compose an email",buttons:[{id:"gmail",icon:"gmail",label:"Gmail",href:"https://mail.google.com/#compose"},{id:"outlook",icon:"outlook",label:"Outlook",href:"https://outlook.office.com/mail/"}]},dn={caption:"Edit a document",buttons:[{id:"gDocs",icon:"gdocs",label:"Google Docs",href:"https://docs.google.com/"},{id:"word",icon:"word",label:"Word",href:"https://www.microsoft365.com/launch/word"}]},un=[cn,dn,{caption:"Update your profile",buttons:[{id:"linkedIn",icon:"linkedIn",label:"LinkedIn",href:"https://www.linkedin.com/feed/"}]}],hn=[cn,dn,{caption:"Send a message",buttons:[{id:"slack",icon:"slack",label:"Slack",href:"https://app.slack.com/client/"},{id:"teams",icon:"teams",label:"Teams",href:"https://teams.microsoft.com/"}]}],gn=({isStudent:e})=>(a.useEffect((()=>{Ki.J.getStartedUseCasesShow()}),[]),a.createElement("div",{className:ln.getStartedUseCases},a.createElement("section",{className:ln.copyContainer},a.createElement("p",{className:ln.title},"Now, see Grammarly in action"),a.createElement("p",{className:ln.subtitle},"Start writing something new, or proofread a piece of text you already wrote.")),a.createElement("section",{className:ln.ctaContainer},(e?un:hn).map((({caption:e,buttons:t})=>a.createElement("div",{key:e},a.createElement("p",{className:ln.ctaCaption},e),a.createElement("div",{className:ln.ctaButtons},t.map((({id:e,icon:t,label:i,href:n})=>a.createElement(Di.zx,{key:e,className:ln.externalLink,"data-part":`use-case-link-${e}`,"aria-label":e,name:`get-started-use-cases-${e}`,styleType:sn.Z.Type.Base,href:n,target:"_blank",onClick:()=>{Ki.J.getStartedUseCasesLinkClick(e)}},t&&a.createElement("div",{...(0,on.Sh)(ln.icon,ln[t])}),a.createElement("span",null,i)))))))))));var pn=i(36554),mn=i(42606),fn=i(66711),vn=i(3140);const bn=[{id:Dt.AccountCreation,title:"Create an account",description:"Sign up for free or sign in to an existing account to start receiving writing insights."},{id:Dt.Tour,title:"Take a quick tour",description:"Want to see how Grammarly works?"},{id:Dt.TryWebsite,title:"Try writing with Grammarly",description:"Get suggestions wherever you write online with the browser extension."},{id:Dt.ViewApps,title:"Explore other Grammarly products",description:"Get suggestions from Grammarly when you write on all your favorite platforms and devices."}],wn=[{id:"gmail",text:"Try it in Gmail",icon:"gmail",href:"https://mail.google.com/#compose"},{id:"outlook",text:"Try it in Microsoft Outlook",icon:"outlook",href:"https://outlook.live.com/mail"},{id:"gDocs",text:"Try it in Google Docs",icon:"gdocs",href:"https://docs.google.com"}],Sn=[{id:"desktop",text:"Grammarly for Desktop",href:"https://www.grammarly.com/desktop"},{id:"keyboard",text:"The Grammarly Keyboard",href:"https://www.grammarly.com/mobile"}];var yn=i(10498);const kn=({label:e,href:t,onClick:i})=>a.createElement(Di.zx.Primary,{className:yn.link,"data-part":e.toLowerCase().split(" ").join("-"),onClick:i,target:t?"_blank":"_self",href:t},e),En=({items:e,onClick:t})=>a.createElement(a.Fragment,null,e.map((({id:e,text:i,icon:n,href:r})=>a.createElement(Di.zx,{key:e,className:yn.externalLink,"data-part":`try-${e}`,"aria-label":e,name:`get-started-${e}`,styleType:sn.Z.Type.Base,href:r,target:"_blank",onClick:()=>t(e)},n&&a.createElement("div",{...(0,on.Sh)(yn.icon,yn[n])}),a.createElement("span",null,i))))),_n=(e,t)=>{const i=e.find((e=>!t.has(e.id)));return null==i?void 0:i.id};var Cn=i(70881);const An=({completed:e,total:t})=>a.createElement("div",{className:Cn.progressBarBg},a.createElement("div",{"data-name":"progress-bar","aria-label":"completionProgress",className:Cn.progressBar,role:"progressbar","aria-valuenow":e,style:{width:(e<=t&&e>=0?e/t*100:e<0?0:100)+"%"}}));var In,xn;!function(e){e.Complete="complete",e.Incomplete="incomplete"}(In||(In={})),function(e){e.macDesktop="macDesktop",e.winDesktop="winDesktop",e.android="android",e.iOS="iOS"}(xn||(xn={}));const Tn=e=>{switch(e){case zt.macExtension:return xn.macDesktop;case zt.windowsExtension:return xn.winDesktop;case zt.mobileAndroid:return xn.android;case zt.mobileIOS:return xn.iOS;default:(0,l.vE)(e)}},Rn=({getStartedChecklistViewModel:e,notify:t})=>{const{anonymous:i,checklistState:n,gnar:r,actions:s,userClientState:o}=e,[l,c]=a.useState((()=>{const e=new Set([...n.completedItems,...i?[]:[Dt.AccountCreation]]);return{items:e,count:e.size}})),[d,u]=a.useState(((e,t)=>{const i=_n(e,t);return i?new Set([i]):new Set})(bn,l.items)),h=(e,i)=>{const a=new Set,d=new Set(l.items);if(e!==Dt.AccountCreation){l.items.has(e)||(d.add(e),c({items:d,count:d.size}),Object.values(Dt).every((e=>d.has(e)))&&t());const h=_n(bn,d);a.delete(e),h&&a.add(h),u(a);const g=Object.values(zt).filter((e=>o.get(e)===Vt.installed)).map(Tn);r.getStartedLinkClick(g,i,e,d.size,bn.length),s.updateChecklistState({...n,completedItems:[...d]})}},g=e=>l.items.has(e)?In.Complete:In.Incomplete;return a.useEffect((()=>{r.getStartedChecklistShow(Array.from(l.items),_n(bn,l.items))}),[]),a.createElement("div",{className:fn.getStartedChecklist},a.createElement(mn.K,{size:24,type:"full",className:fn.logo}),a.createElement(sn.Z.H3,{className:fn.title},"Welcome! Here are a few steps to get you started."),a.createElement(sn.Z.Base,{className:fn.progressCaption},"You’ve completed ",a.createElement("strong",null,l.count)," out of"," ",a.createElement("strong",null,bn.length)," steps."),a.createElement(An,{total:bn.length,completed:l.count}),a.createElement(pn.W,{allChecklistItems:bn,completedItems:l,expandedItems:d,onExpandItem:e=>{const t=new Set,n=g(e),a=i?Dt.AccountCreation:e,s=g(a);if(r.getStartedSectionClick(n,e),0===d.size)t.add(a),r.getStartedItemExpand(s,a);else{const[i]=d;i!=e?(t.add(a),r.getStartedItemCollapse(n,i),r.getStartedItemExpand(s,a)):r.getStartedItemCollapse(n,i)}u(t)},getCTA:e=>((e,t)=>{switch(e){case"accountCreation":return a.createElement(kn,{label:"Sign up",href:"https://www.grammarly.com/signup",onClick:()=>t(Dt.AccountCreation,Dt.AccountCreation)});case"tour":return a.createElement(kn,{label:"Start tour",onClick:()=>{t(Dt.Tour,Dt.Tour),(0,Fe.OB)().bgRpc.api.sendToFocusTab({kind:vn.B.Kind.showOnboardingDialog})}});case"tryWebsite":return a.createElement(En,{items:wn,onClick:e=>t(Dt.TryWebsite,e)});case"viewApps":return a.createElement(En,{items:Sn,onClick:e=>t(Dt.ViewApps,e)});default:return null}})(e,h)}))};var Mn=i(72314);const Pn=({htmlToSanitize:e,...t})=>a.createElement("div",{...t,dangerouslySetInnerHTML:{__html:(0,Mn.sanitize)(e)}});var Fn=i(56270);const Dn=({title:e,details:t,examples:i})=>a.createElement("div",{className:Fn.learnMore},void 0!==e?a.createElement("div",{className:Fn.learnMoreTitle},(0,gi.kC)(e)):null,a.createElement(Pn,{htmlToSanitize:t}),i.map(((e,t)=>{const i=e.type===si.correct,n=e.type===si.incorrect,r=i||n?a.createElement("div",{...(0,on.Sh)(Fn.learnMoreExampleIcon,i?Fn.learnMoreExampleCorrectIcon:null,n?Fn.learnMoreExampleIncorrectIcon:null)}):null;return a.createElement("div",{className:Fn.learnMoreExample,key:`learn-more-example-${t}`},e.title?a.createElement(a.Fragment,null,a.createElement("div",{className:Fn.learnMoreExampleIconAndTitle},r,a.createElement("div",{className:Fn.learnMoreExampleTitle},e.title)),a.createElement(Pn,{...(0,on.Sh)(r?Fn.learnMoreExampleTextMarginLeft:null,e.useItalicText?Fn.learnMoreExampleTextItalic:null),htmlToSanitize:e.text})):a.createElement(Pn,{...(0,on.Sh)(e.useItalicText?Fn.learnMoreExampleTextItalic:null),htmlToSanitize:e.text}))}))),Ln=({learnMoreInfo:e})=>a.createElement(H.F.Fragment,null,e.view((e=>e?a.createElement(Dn,{title:e.showTitleOnContent?e.title:void 0,details:e.details,examples:e.examples}):null)));var Hn=i(73541),Un=i(29832);const Bn=({browser:e,className:t,title:i="BETA",color:n="blue"})=>"safari"!==e?a.createElement(Un.C,{title:i,className:t,kind:"blue"===n?"primary":"green"===n?"success":(0,M.Rz)(n)}):null,On=({popActiveView:e,browser:t,onClickBack:i,children:n})=>{const[r,s]=a.useState(!1);return a.createElement($i,{dataPartName:"proofit-view-overlay",popActiveView:e,panelClassName:Hn.proofitViewOverlayPanel,onClickBack:i},a.createElement("div",{className:Hn.proofitViewOverlayContent,tabIndex:-1,ref:e=>{null===e||r||(e.focus(),s(!0))}},a.createElement("div",{className:Yi.defaultViewOverlayHeader},a.createElement("div",{className:Hn.proofitViewOverlayHeader},"Expert Writing Help",a.createElement(Bn,{browser:t,className:Hn.proofitViewOverlayHeaderBetaBadge}))),n))};var Gn=i(38860),Nn=i(6066),Vn=i(48008);var zn=i(59294),Wn=i(93035),jn=i(26189);const qn=({turnaroundTime:e})=>a.createElement("div",{className:Wn.proofitHowItWorksSteps},a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStep,Wn.proofitHowItWorksStepOne)},"Your draft will be minimized and shared with writing experts.",a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStepNumberContainer,Wn.proofitHowItWorksStepOneNumberContainer)},a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStepNumber,Wn.proofitHowItWorksStepOneNumber)},"1"))),a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStep,Wn.proofitHowItWorksStepTwo)},"You will see progress indication. The average turnaround is ",e," seconds.",a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStepNumberContainer,Wn.proofitHowItWorksStepTwoNumberContainer)},a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStepNumber,Wn.proofitHowItWorksStepTwoNumber)},"2"))),a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStep,Wn.proofitHowItWorksStepThree)},"Your draft will re-open with revisions highlighted.",a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStepNumberContainer,Wn.proofitHowItWorksStepThreeNumberContainer)},a.createElement("div",{...(0,on.Sh)(Wn.proofitHowItWorksStepNumber,Wn.proofitHowItWorksStepThreeNumber)},"3")))),Yn=({turnaroundTime:e,freeTrialQuota:t,onSubmit:i,disabledInfo:n=null,isLoading:r=!1,style:s,onTogglePrivacyInfo:o,showPrivacyInfo:l,disableHowItWorksInfo:c=!1,onDisableHowItWorksInfo:d,showHowItWorksInfo:u,onShowHowItWorksInfo:h})=>{const[g,p]=a.useState(null!=l&&l),[m,f]=a.useState(null!=u&&u),v=t>0?t:0;var b,w;a.useEffect((()=>{null==o||o(g)}),[g]),a.useEffect((()=>{p(null!=l&&l)}),[l]),a.useEffect((()=>{f(null!=u&&u)}),[u]),b=()=>null==h?void 0:h(),w=m,a.useEffect((()=>{w&&b()}),[w]);const S=a.useCallback((()=>{c||m?i():f(!0)}),[c,m,i]);return a.createElement("div",{"data-grammarly-part":"proofit-request-form",style:{width:"100%",height:"100%",...s}},a.createElement("div",{className:jn.proofitRequestForm},g?a.createElement(a.Fragment,null,a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoTitle},"How we protect you"),a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoDescription},a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoDescriptionItem},a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoDescriptionItemText},"Our writing experts will see only your current email draft—no prior messages or contact details.")),a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoDescriptionItem},a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),a.createElement("div",{className:jn.proofitRequestFormPrivacyInfoDescriptionItemText},"We will not sell, rent, or make public any of your personal data."))),a.createElement(Xi.z,{kind:"outlined",onClick:()=>p(!1)},"Continue")):a.createElement(a.Fragment,null,m?a.createElement(qn,{turnaroundTime:e}):a.createElement(a.Fragment,null,a.createElement("div",{className:jn.proofitRequestFormImg}),a.createElement("div",{className:jn.proofitRequestFormTitle},"Get instant writing help"),a.createElement("div",{className:jn.proofitRequestFormDescription},"Our writing experts are standing by to review your email."),a.createElement("div",{className:jn.proofitRequestFormCostAndTime},a.createElement("div",{className:jn.proofitRequestFormCost},a.createElement("div",{className:jn.proofitRequestFormCostAndTimeTitle},v," free ",(0,gi._6)(v,"review","reviews")),a.createElement("div",{className:jn.proofitRequestFormCostAndTimeSubtitle},"left this month",a.createElement("sup",null,"*"))),a.createElement("div",{className:jn.proofitRequestFormTime},a.createElement("div",{className:jn.proofitRequestFormCostAndTimeTitle},e," seconds"),a.createElement("div",{className:jn.proofitRequestFormCostAndTimeSubtitle},"average turnaround")))),a.createElement(Xi.z,{kind:"primary",className:jn.proofitRequestFormRequestBtn,disabled:Boolean(n||r),onClick:S},r?a.createElement("div",{className:zn.proofitRequestFormBtnLoadingSpinner}):c||m?"Start review":"Request now"),n||r?n?a.createElement("div",{className:jn.proofitRequestFormUnavailableMsg},a.createElement(Vn.Q,{info:n})):null:a.createElement(Xi.z,{kind:"link",onClick:()=>p(!0)},"Learn how we protect your privacy"),a.createElement("div",{...(0,on.Sh)(jn.proofitRequestFormFootnote,m?jn.proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:jn.proofitRequestFormFootnoteFreeTrial)},m?a.createElement(Nn.J,{labelId:"proofit-request-form-how-it-works-dont-show-again",onChange:d},"Don't show this again"):a.createElement("span",null,a.createElement("sup",null,"*")," included with your Premium subscription")))))},$n=({proofitVM:e,...t})=>{const i=(0,Gn.fW)(),[n,r]=a.useState(!1),[s,o]=a.useState(!1),l=a.createElement(H.F.Fragment,null,(0,f.a)([e.feature.layoutCreated,e.feature.requestInfo,e.feature.turnaroundTime,e.feature.quotaRemaining,e.feature.requestDisabledInfo,e.feature.disableHowItWorksInfo]).pipe((0,h.U)((([t,l,c,d,u,h])=>t&&l.status!==lt.eE.REVIEWING?a.createElement(Yn,{turnaroundTime:c,freeTrialQuota:d,onSubmit:()=>e.onSubmitRequest(i),style:{height:"calc(100% - 48px)"},disabledInfo:u,isLoading:l.status===lt.eE.PREPARING||l.status===lt.eE.PRE_SUBMIT,showPrivacyInfo:n,onTogglePrivacyInfo:r,disableHowItWorksInfo:h,onDisableHowItWorksInfo:t=>e.feature.onDisableHowItWorksInfo(t),showHowItWorksInfo:s,onShowHowItWorksInfo:()=>o(!0)}):null))));return t.insideSingleCardAssistant?l:a.createElement(On,{popActiveView:t.popActiveView,browser:t.browser,onClickBack:()=>{n?r(!1):s?o(!1):t.popActiveView()}},l)};var Kn=i(26995),Xn=i(77390);const Jn=({suggestionsMade:e,onAccept:t,onFeedbackFormSubmitted:i})=>a.createElement("div",{className:Xn.proofitReviewForm,"data-grammarly-part":"proofit-review-form"},a.createElement("div",{className:Xn.proofitReviewFormTitle},"Our experts made ",e," ",(0,gi._6)(e,"suggestion","suggestions")),a.createElement("div",{className:Xn.proofitReviewFormDescription},"Are you satisfied with the suggestions that our experts provided?"),a.createElement("div",{className:Xn.proofitFeedbackForm},a.createElement(Kn.q,{hideLogo:!0,hideTitle:!0,hideTextBoxTitle:!0,withScore:!0,placeholderText:"How can we improve?",onSubmit:i,showPostSubmitScreen:!1})),a.createElement("div",{className:Xn.proofitDoneButton},a.createElement(Xi.z,{kind:"link",onClick:t},"Done"))),Zn=({proofitVM:e,...t})=>{const i=(0,Gn.fW)(),n=a.createElement(H.F.Fragment,null,(0,f.a)([e.feature.layoutCreated,e.feature.requestInfo]).pipe((0,h.U)((([t,n])=>t&&n.status===lt.eE.REVIEWING?a.createElement(Jn,{suggestionsMade:n.suggestionsMade,onAccept:()=>e.onCompleteRequest(i),onFeedbackFormSubmitted:t=>{e.onSubmitFeedback(t),e.onCompleteRequest(i)}}):null))));return t.insideSingleCardAssistant?n:a.createElement(On,{popActiveView:t.popActiveView,browser:t.browser},n)};var Qn=i(91020),er=i(47897),tr=i(22224);const ir=({message:e,children:t,placement:i,size:n,hideAfter:r,onClose:s,dataGrammarlyPart:o="ui-kit-popover-notification"})=>{const[l,c]=a.useState(!1);return a.useEffect((()=>{let e;return r>0&&(c(!0),e=self.setTimeout((()=>{c(!1),null==s||s()}),r)),()=>{e&&self.clearTimeout(e)}}),[r]),a.createElement(er.J,{dataGrammarlyPart:o,isOutsideReferenceElement:!1,headerContent:a.createElement("div",{className:tr.popoverNotificationMessage},e),mainContent:null,show:l,placement:i,size:n,onClose:()=>{c(!1),null==s||s()},showArrow:!1,includeMainContentPadding:!1},t)};var nr=i(23951),rr=i(46180),ar=i(282);const sr=({emotion:e,isBrandTonesEnabled:t,index:i,onFeedback:n})=>{const[r,s]=a.useState(0),o=a.createElement(Vi.u,{message:`${e.prevalence} intensity`,showDelay:300},a.createElement("div",{className:ar.emogenieReportItemEmotionIntensity},[0,1,2,3,4].map((t=>{const i=t/5<=e.confidence;return a.createElement("div",{key:`${e.name}-intensity-${t}`,...(0,on.Sh)(ar.emogenieReportItemEmotionIntensityDot,i&&ar.emogenieReportItemEmotionIntensityDotActive)})})))),l=a.createElement(Vi.u,{message:e.brandToneDescription,showDelay:300},a.createElement("div",null,a.createElement(Qn.JO.Info,{width:10,className:"off"===e.brandToneLabel?ar.emogenieBrandToneInfoIconOff:ar.emogenieBrandToneInfoIconOn}))),c=a.createElement(Un.C,{title:a.createElement(a.Fragment,null,e.brandToneLabel,"-BRAND ",l),kind:"off"===e.brandToneLabel?"error":"primary"}),d=e.brandToneLabel?c:o,u=`emotion-${i}-${e.name}`;return a.createElement(H.F.div,{...(0,on.Sh)(ar.emogenieReportItem,t?ar.emogenieReportItemBrandTone:null),"data-grammarly-part":"tone-detector-emotion","data-tone-detector-emotion-name":e.name},a.createElement("div",{role:u},a.createElement("div",{className:ar.emogenieReportItemEmotion},a.createElement("div",{className:ar.emogenieReportItemEmotionEmojiAndNameContainer},a.createElement(ir,{dataGrammarlyPart:"tone-detector-emotion-feedback-notification",message:"Thank you for the feedback!",hideAfter:r,placement:"right",onClose:()=>s(0),size:"medium"},a.createElement("div",{className:ar.emogenieReportItemEmotionEmojiAndName},a.createElement(B.dy,{size:"small-medium",unicodeHexArray:[e.emojiId],unicodeLiteral:e.emoji,className:ar.emogenieReportItemEmotionEmoji}),a.createElement("span",{className:ar.emogenieReportItemEmotionName},e.name)))),a.createElement("div",{className:ar.emogenieReportItemEmotionBadgeOrIntensity},d),a.createElement(nr.m,{dataGrammarlyPart:"tone-detector-emotion-actions-menu",ariaMenuId:`${e.name}-emotion-actions-menu`,ariaMenuLabel:`${e.name} Emotion Actions Menu`,sections:[{title:"Help us improve",items:[{id:"tone-detector-emotion-actions-menu-item-like",icon:a.createElement("div",{className:ar.emogenieReportItemEmootionActionsMenuThumsUpIcon}),label:"Tone seems correct",onClick:()=>{n({emotionName:e.name,feedbackType:A.y_.EMOTION_LIKE}),s(1200)}},{id:"tone-detector-emotion-actions-menu-item-dislike",icon:a.createElement("div",{className:ar.emogenieReportItemEmootionActionsMenuThumsDownIcon}),label:"Tone seems incorrect",onClick:()=>{n({emotionName:e.name,feedbackType:A.y_.EMOTION_DISLIKE}),s(1200)}}]}],size:"medium",placement:"left"},a.createElement(rr.h,{dataGrammarlyPart:"tone-detector-emotion-actions-menu-button",className:ar.emogenieReportItemEmotionActionsMenuButton},a.createElement("div",{className:ar.emogenieReportItemEmotionActionsMenuIcon}))))))};var or=i(43882),lr=i(46916);const cr=({emotions:e,isBrandTonesEnabled:t,toneSuggestionInfo:i,onMount:n,onReportEmotionFeedback:r,...s})=>{let o;switch(a.useEffect(n,[]),!0){case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel&&e.confidence>.75)):o="Your tone may sound off to readers";break;case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel)):o="Something sounds slightly off...";break;case e.some((e=>e.brandToneLabel&&"on"===e.brandToneLabel)):o=t?"You're on-brand! Great job!":"Your writing sounds clear and aligned. Great job!";break;default:o="How this may sound to readers:"}return a.createElement("div",{className:lr.emogenieReport,"data-grammarly-part":"tone-detector"},a.createElement("div",{className:lr.emogenieReportHeader},a.createElement("div",{className:lr.emogenieReportHeaderTitle},o),s.showBetaLabel?a.createElement(Bn,{browser:s.browser}):null),a.createElement("div",{className:lr.emogenieReportItems,"data-grammarly-part":"tone-detector-emotions"},e.map(((e,i)=>a.createElement(sr,{key:e.name,index:i,emotion:e,isBrandTonesEnabled:t,onFeedback:r})))),i?a.createElement(dr,{...i}):null)},dr=({onMount:e,emojiId:t,emojiLiteral:i,iconId:n,title:r,onClickCta:s,ctaText:o,isUphook:l})=>(a.useEffect(e,[]),a.createElement("div",{className:lr.emogenieReportToneSuggestionInfo},a.createElement("div",{className:lr.emogenieReportToneSuggestionInfoEmojiAndTitle},t?a.createElement(B.dy,{size:"small-medium",unicodeHexArray:[t],unicodeLiteral:null,className:lr.emogenieReportToneSuggestionInfoEmoji}):i?a.createElement(B.dy,{size:"small-medium",unicodeHexArray:null,unicodeLiteral:i,className:lr.emogenieReportToneSuggestionInfoEmoji}):n?a.createElement("img",{alt:n,src:`https://assets.grammarly.com/icons/v1/${n}.svg`,style:{width:20,height:20},className:lr.emogenieReportToneSuggestionInfoEmoji}):null,a.createElement("div",null,r)),l?a.createElement(or.Y,{onClick:s,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta",cta:"Get Pro"}):a.createElement(Xi.z,{kind:"primary",onClick:s,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta"},o))),ur=({emogenieService:e,toneSuggestionInfo:t,onShowToneSuggestionInfo:i,onClickToneSuggestionInfoCta:n,showBetaLabel:r,browser:s})=>a.createElement(H.F.Fragment,null,c.h.combine(e.viewState,null!=t?t:c.h.create(void 0),(({report:t,isBrandTonesEnabled:o},l)=>{let c;if(l&&(c={title:l.title,onMount(){null==i||i(l)},onClickCta(){null==n||n(l)},ctaText:"See suggestions",isUphook:!1},xi.isToneImprovementSuggestionUphookInfo(l)&&(c={...c,isUphook:!0,emojiId:l.emojiId,emojiLiteral:l.emojiLiteral}),c=xi.isInclusiveLanguageToneSuggestionInfo(l)?{...c,iconId:l.iconId}:{...c,emojiId:l.emojiId}),t&&Array.isArray(t.emotions)){const i={emotions:t.emotions,isBrandTonesEnabled:o,onMount:()=>e.actions.trackReportShow(o),onReportEmotionFeedback:t=>e.actions.reportEmotionFeedback(t),toneSuggestionInfo:c};return r?a.createElement(cr,{...i,showBetaLabel:!0,browser:s}):a.createElement(cr,{...i,showBetaLabel:!1})}return null})));var hr;!function(e){e.Feedback="feedback",e.Settings="settings",e.ToneInsight="toneInsight",e.LearnMore="learnMore"}(hr||(hr={}));const gr=a.createContext({isEnabled:!1,currentView:null,setCurrentView:()=>{}}),pr=({children:e,view:t})=>{const{setCurrentView:i,isEnabled:n}=a.useContext(gr);return a.useEffect((()=>{if(n)return i(t),()=>i(null)}),[n,t]),a.createElement(a.Fragment,null,e)};var mr=i(86399),fr=i(6122);const vr=e=>{const t=t=>"known"===t.source.kind?a.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):a.createElement(e.designSystem.image,{key:t.source.name,backgroundColor:t.backgroundColor,...t.source});return a.createElement(fr.v.Dropdown,{label:t(e.icon),placement:"top right",theme:{button:Sr.button,item:Sr.item},"aria-label":e.menu.meta.label,onAction:t=>(0,M.zG)(e.menu.sections,mr.tS((e=>e.items)),mr.Ew((e=>e.id===String(t))),C.bw((t=>e.onClick(t.onClickActions,t.id)())))},e.menu.sections.map(((e,i)=>a.createElement(fr.v.Section,{key:i,title:e.title},e.items.map((e=>a.createElement(fr.v.Item,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)))))))},br={flexShrink:0,alignItems:"center",justifyContent:"center",height:Fi.ux.rem(2),width:Fi.ux.rem(2)},wr={$nest:{"& i":{height:Fi.ux.rem(2),width:Fi.ux.rem(2)}}},Sr=Fi.ux.stylesheet({button:[br],item:[wr]});var yr=i(8670);const kr={...(0,Pi.T)({default:{},hovered:{backgroundColor:Li.NeutralGray10},clicked:{},disabled:{},toggled:{},hidden:{}})},Er=Fi.ux.stylesheet({main:[Hi.o_],primary:[Hi.U8],secondary:[kr,Hi.P5],toggle:Hi.hc,round:[Hi.$O],yellow:Hi.g2,outlined:[kr,Hi.Yf],link:[Hi.wy],darkPrimary:[Hi.hx],darkSecondary:[Hi.kG],ggoPrimary:[Hi.KF]});const _r=({children:e})=>a.createElement("div",{className:yr.singleCardAssistantNativeContentWithPadding},e),Cr=({children:e,maxHeight:t})=>a.createElement("div",{style:{maxHeight:t,overflowY:"auto"}},e),Ar=Fi.ux.style(Hi.o_,(0,Pi.T)({default:{backgroundColor:Li.Gold20,color:Li.Gold90,lineHeight:Fi.ux.rem(2),transitionDuration:".2s",$nest:{"& span":{color:Li.Gold90}}},hovered:{backgroundColor:Li.Gold30,$nest:{"& i":{fill:Li.Gold90,stroke:Li.Gold90},"& span":{color:Li.Gold90}}},disabled:{},clicked:{},toggled:{},hidden:{}}),{$nest:{"& i":{fill:Li.Gold90,stroke:Li.Gold90},"& span":{color:Li.Gold90}}}),Ir=()=>{const e=(0,Hi.ND)(),t=e.primary;return{...e,primary:e=>"goPremium"===e.name?a.createElement(Di.zx.Primary,{name:e.name,onClick:e.onClick,className:Ar},e.text):a.createElement(t,{...e})}};var xr=i(69136);const Tr=(e,t,i,n,s,o,l,g,v,b,S,y,E,A,I,x,T,F,D,L,H,U,B,O,G,N,V,z)=>{const W=Re.C8.Logging.getLogger("SingleCardAssistant.ViewModels"),j=c.h.create(re.A.defaultState),q=se.t.create(se.t.defaultLensFilters,{...se.t.defaultTextFilters,[P.R.SpecialId.Closed]:M.jv,[P.R.SpecialId.AllAlerts]:ne.bZ.belongsToAllAlerts}),Y=re.A.get(e.alertsList.state,e.alertsList.lensesScores,q).subscribe(k.wW(j)),$=new yt.t(j.view("lenses"),q,e.sessionModel.scoreStatus),K=(0,ce.$y)((0,Rt.a)(t).getContents),X={features:new Set([ge.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:fe.j.Density.minimal,shouldAnimateAlertApply:ge.IG.Default.shouldAnimateAlertApply,cardVisualMode:c.h.create(fe.j.CardVisualMode.RegularLightMode)},J=(0,ge.Ls)(K,e.alertsReader,X,(()=>m.of(_.YP)),e.mutingAlertsReader),Z=Kt.getCapabilities(J,e.alertsReader),Q=new ke.gi(Kt.equatable.structEq,Kt.defaultOrd(Z)),ee=()=>()=>M.yR,te=we.v.createWithInitialAlerts(Q,ee,q,(0,M.ff)(ne.bZ.isMuted),Z),ie=new oe.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,q.alertCanBeDisplayed),de=new ye.oq(e.alertsList.state,e.alertsReader,j.view("lenses"),ie,$,te,ee,Z,q),ue=c.h.create(de.emptyState(P.R.SpecialId.AllAlerts).patch({alertSource:ne.l$.sidebar})),he=new wt.C((0,Fe.nD)(x())),me=new le.Xx({flush:()=>t.flushChanges()},new d.x,J,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,M.zG)(e.mutedAlertsCategoriesModel,_.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,nt.Um)().suggestionsSettings)})))),_.G(tt.getCardsViewModelSendToURLExperiment(he,o)),M.jv,Kt.getActiveItemWithAlert,Z,he,{bufferTransitions:!0,showGbPrompt:tt.shouldShow(g.get())}),_e=new Ht.q(L.sduiFeedbackService,Z,ue,L.sduiManager,L.sduiFeedManager,e.alertsReader,{...e.plagiarismClient,...e.writingExpertClient},me,he),Ce=_e.sduiActionEvents.subscribe((({actions:e})=>e.forEach((e=>{"closeCard"===e.type&&v()})))),Ae=new ai(l,o),Ie=new Le(me.actionEvents,o,e.alertsReader),xe=new pe.o((()=>Me.F2(void 0))),He=new Ye.x(e.alertsList,ue,3,z,o),Ue=new Mi(L.sduiManager.state),Be=((e,t,i,n)=>{const r=t.pipe(h.U(qt.D1.NativeUpgradeHook.findUpgradeHookSduiItem),h.U(_.pC));return e.pipe(w.M(r,i),h.U((([{actions:e},t,i])=>{e.forEach((e=>{"pushAssistantFeed"===e.type&&"default-feed"===e.feedId&&(t||i)&&n.upgradeHooksExp.upgradeHookFeedRendered((0,Ri.ge)())}))})))})(_e.sduiActionEvents,L.sduiManager.state,Ue.upgradeHookCardExists,V).subscribe(),Oe=Ue.processUpgradeHookSduiCardActions(_e.sduiActionEvents,He,V),Ge=Ue.upgradeHookCardFocused,Ne=L.sduiFeedManager.feed.pipe(h.U((e=>e.feedId===qt.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),Ve=c.h.create(!1),ze=f.a([Ge,Ne]).pipe(h.U((([e,t])=>e||t))).subscribe(k.wW(Ve)),We=f.a([(0,kt.gM)(L.sduiManager.state,L.sduiFeedManager.feed),Ve]).pipe(h.U((([e,t])=>i=>e(i)&&!ne.bZ.isHidden(i)||t&&ne.bZ.isPremium(i)&&ne.bZ.isHidden(i)||ne.bZ.isLocked(i)||ne.bZ.isLockedUIUphook(i)))),je=new kt.o$(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,ue,We,Kt.getActiveItemWithAlert,Ve,i,!0),qe=(0,pt.hp)(ue,je,xe,t,W),$e=ue.view(ve.nL.getActiveAlertHighlight(Kt.getActiveItemWithAlert)),Ke=new ae.mN(t,je,e.alertsReader,$e,ue.view((e=>e.currentLens.meta.filter))),Xe=new Ti(e.alertsReader,e.alertsList.state,(()=>_.ij(null==y?void 0:y.sessionUuid)),o,D,He,g,me.actionEvents,L.sduiManager.state),Je=new li(ue,e.alertsReader,S,_e.sduiActionEvents,Kt.getActiveItemWithAlert),Qe=new ri(_e.sduiActionEvents,N),et=new ki(L.sduiManager,L.sduiFeedManager,L.sduiBufferService,A,ue,Ue.upgradeHookCardExists,e.sessionModel,T);et.initSuccessReportSDUIEmulation();const it=new $t(L.sduiManager.state,me,et.isSuccess,T),rt=Ke.alertClicked.pipe(Lt.T(1),p.w(_.g_((()=>Te.E),m.of)),u.h((e=>e.alert.lensId!==P.R.SpecialId.Premium||(0,xr.cN)(T))),w.M(L.sduiManager.state),h.U((([t,i])=>(0,M.zG)(e.alertsReader.getById(t.alert.id),_.tS(ne.bZ.getRawId),_.tS((e=>qt.D1.getByAlertId(i,e))),C.MH))),w.M(L.sduiFeedManager.feed)).subscribe((([e,t])=>{let i;i=t.feedId===qt.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID||t.feedId===qt.D1.AssistantFeed.PERFORMANCE_SCORE_FEED?[qt.D1.AssistantFeed.createPopAssistantFeedAction(),qt.D1.AssistantFeed.createFocusAssistantCardAction(e.id)]:[qt.D1.AssistantFeed.createFocusAssistantCardAction(e.id)],me.actionEvents.next(qt.fr.create(i))})),st=((e,t,i,n)=>e.pipe(Lt.T(1),p.w(_.g_((()=>Te.E),m.of)),u.h((e=>e.alert.lensId===P.R.SpecialId.Premium)),w.M(t,i)).subscribe((([e,t,i])=>{if(i.feedId===qt.D1.AssistantFeed.PERFORMANCE_SCORE_FEED){const e=(0,M.zG)(t,_.g_((()=>qt.D1.NativeUpgradeHook.ID),(e=>e.id))),i=[qt.D1.AssistantFeed.createPopAssistantFeedAction(),qt.D1.AssistantFeed.createFocusAssistantCardAction(e)];n.next(qt.fr.create(i))}})))(Ke.alertClicked,Ue.upgradeHookCard,L.sduiFeedManager.feed,me.actionEvents),ot=[(0,M.zG)(Ee.EQ.focusMarkByActiveAlert(ue,je,e.alertsReader,Kt.getActiveFocusableItem,W.getLogger("MarksEffects.focusMarkByActiveAlert")),ve.nL.Effect.Producer.delayed(i)),...me.getApplicatorEffects(),..._e.getApplicatorEffects(),(0,M.zG)((0,pt.k9)(ue,qe,c.h.create(_.YP),Kt.getActiveAlignableItem,Z),ve.nL.Effect.Producer.delayed(i)),Ut.N.PrevNextNavigation.sideEffect(Ut.N.PrevNextNavigation.Events.fromSduiCardActions(_e.sduiActionEvents),ue,Z),Bt.P.SideEffects.createSDUIFeedSideEffect(Z,L.sduiFeedManager.feed,Kt.sduiToChecksFeedOrd(Z),e.alertsReader)],lt=({state:e,metadata:t})=>{if(!ve.nL.hasCards(e))return Me.t$({state:e,metadata:t});const i=ve.nL.Prism.getLens();return Me.t$({state:i.modify((e=>_.pC(e.cardIndex)||e.items.size>1||(0,r.zG)(e.items.getAt(0),_.UI((e=>e.id!==qt.D1.NativeUpgradeHook.ID)),_.fS(M.jv))?e:{...e,cardIndex:_.G(0)}),e),metadata:t})},dt=be.v.Items.getRemoveDisposedItemsTransformer(Z),ht=Ot.i.DisablePrevNextButtons.create(Z),gt=be.v.Items.getSingleItemFeedPositionsUpdateTransformer(Z),mt=(0,M.ls)(lt,Pe.L9(et.focusSuccessReportStateTransformer),Pe.L9(dt),Pe.L9(ht),Pe.L9(gt)),ft=new Se.l(ue,de,e.alertsReader,e.alertsService,ot,Kt.getActiveItemWithAlert,mt),vt=c.h.create(_.YP);y&&y.capiMessages.pipe(u.h((e=>"start"===e.action))).subscribe((e=>vt.set(_.G(e))));const bt=new ut.X(n,s,G,l,(0,Gt.ol)(n.view("user").get(),T)),St=me.actionEvents.subscribe((0,M.ls)((0,De.JH)(e.alertsReader,De.SV.Source.assistant),C.bw((e=>(e.kind===De.SV.Kind.alertApply&&e.source===De.SV.Source.assistant&&F.incrementCounter(),E.next(e)))))),Et=(0,at.W)(b),_t=I.pipe(p.w(_.g_((()=>Te.E),(t=>t.initSingleCardAssistantActionsProcessing(e.alertsReader,Pt(Ke,ue)))))).subscribe(),Ct=new ci(me,L),At=new Ze.D(o,B,O,H),It=(0,M.zG)(U,_.UI((e=>new ct(At,e,v,o)))),xt=new hi(me.actionEvents,S,n.view("page"),s,T,o),Tt=new Wt(g.get().isAnonymous,n.get(),o,G),Mt=function(e,t,i,n,r,s,o,l,c,d){const u=()=>o.next(void 0);return{...Ui.k,button:Ir(),dropDownMenuButton:vr,nativeToneInsightsModal:()=>a.createElement(pr,{view:hr.ToneInsight},a.createElement(_r,null,a.createElement(ur,{emogenieService:e.emogenieService,toneSuggestionInfo:e.toneSuggestionInfo,onShowToneSuggestionInfo:t=>e.onShowToneSuggestionInfo(t),onClickToneSuggestionInfoCta:t=>e.onClickToneSuggestionInfoCta(t),showBetaLabel:!0,browser:l}))),nativeLearnMoreModal:()=>a.createElement(pr,{view:hr.LearnMore},a.createElement(Cr,{maxHeight:216},a.createElement(_r,null,a.createElement(Ln,{learnMoreInfo:t.learnMoreInfo})))),nativeFeedbackModal:()=>a.createElement(pr,{view:hr.Feedback},a.createElement(_r,null,a.createElement(Kn.q,{domain:i.getDomain(),hideDomainHelpText:!0,onClose:u,align:"left",title:a.createElement("span",null,"How do you like Grammarly?"),onSubmit:e=>{i.submitFeedback(e)},withScore:!0,hideLogo:!0,hideTextBoxTitle:!0,placeholderText:"How can we improve?",compactDisplay:!0}))),nativeSettingsModal:()=>a.createElement(pr,{view:hr.Settings},a.createElement(_r,null,a.createElement(rn,{onClose:u,assistantSettingsViewModel:n,upgradeViewModel:r,experimentClient:s},(({content:e,footer:t})=>a.createElement(a.Fragment,null,e,t))))),nativeProofitModal:()=>(0,M.zG)(c,_.g_((()=>null),(e=>{const t=e.feature.dialogCaller().type;return t===R.WT.proofitReview?a.createElement(_r,null,a.createElement(Zn,{proofitVM:e,insideSingleCardAssistant:!0})):t===R.WT.proofitRequest?a.createElement(_r,null,a.createElement($n,{proofitVM:e,insideSingleCardAssistant:!0})):null}))),nativeGetStartedChecklistModal:({notify:e})=>{const t="test"===s.getTreatment(ui.p.ChecklistUX);return a.createElement(_r,null,t?a.createElement(gn,{isStudent:d.isStudent}):a.createElement(Rn,{getStartedChecklistViewModel:d,notify:e}))}}}(Xe,Je,Ae,bt,He,T,Ct.popView,H,It,Tt),Ft={...Ui.k,button:(0,Hi.ND)(Er)},Dt=ue.lens(ve.nL.Prism.getLens());return{checksFeedItem:()=>Kt.item(Mt),checksFeedFlow:()=>Kt.createCardListFlow(Dt,Z),lensState:ue,cardsViewModel:me,lensPreviewViewModel:$,cardsListScrollManager:xe,alertProcessor:S,checkingService:y,assistantFeedbackViewModel:Ae,assistantSettingsViewModel:bt,getStartedChecklistViewModel:Tt,marksViewModel:je,upgradeViewModel:He,gnar:o,user:g,positionViewModel:Et,isSingleCardAssistant:!0,statisticsService:A,toneDetectorViewModel:Xe,learnMoreViewModel:Je,createSnippetModalViewModel:Qe,closeAssistant:v,bulkDismissViewModel:it,nativeViewsViewModel:Ct,successReportViewModel:et,outcomeExtraFooterViewModel:xt,designSystem:Mt,headerDesignSystem:Ft,sduiEngine:L,sduiCardsViewModel:_e,dispose:()=>{St.unsubscribe(),me.dispose(),ft.dispose(),je.dispose(),Y.unsubscribe(),Ie.dispose(),_t.unsubscribe(),Qe.dispose(),Je.dispose(),Xe.dispose(),null==it||it.dispose(),null==Ct||Ct.dispose(),et.dispose(),rt.unsubscribe(),st.unsubscribe(),Oe.unsubscribe(),Ce.unsubscribe(),_e.dispose(),xt.dispose(),Ue.dispose(),Be.unsubscribe(),ze.unsubscribe()}}};var Rr=i(50618),Mr=i(66918),Pr=i(73799),Fr=i(27640),Dr=i(55263),Lr=i(19371),Hr=i(82174),Ur=i(70225),Br=i(91320),Or=i(7491),Gr=i(99677),Nr=i(38148),Vr=i(63169),zr=i(84341);const Wr=a.forwardRef((({successView:e},t)=>{const i=a.useContext(Fr.m.Context),n=(0,Nr.hM)((0,Nr.JT)((0,r.zG)(e,Ve.oA),i));return a.createElement("div",{className:zr.compactSuccessLens,ref:t},a.createElement("div",{className:zr.compactSuccessLensContainer},U.UI.mount(Vr.q,n)))}));Wr.displayName="SuccessLens";const jr=a.forwardRef((function({viewModels:e},t){return a.createElement("div",{className:Gr.mainView},a.createElement(Yr,{ref:t,state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,assistantCardListViewModel:e.assistantCardListViewModel,predictionsPreviewViewModel:e.predictionsPreviewViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,headerViewModel:e.assistantHeaderViewModel,layoutViewModel:e.assistantLayoutViewModel,capabilities:e.capabilities}))})),qr=({position:e,isSuccess:t,children:i})=>a.createElement(H.F.Fragment,null,e.pipe(xe.x(((e,t)=>e.offset===t.offset&&e.visible===t.visible)),h.U((e=>e.visible?a.createElement(H.F.div,{...(0,on.Sh)(Gr.cardListFooterStatic,e.animationInProgress?Gr.cardListFooterAnimate:void 0,t?void 0:Gr.cardListFooterDynamic),style:t?{}:{transform:o.ux.translateY(e.offset)}},i):null)))),Yr=a.forwardRef((function({state:e,assistantCardListViewModel:t,cardsViewModel:i,cardsListScrollManager:n,capabilities:s,...o},l){const c=k.jw((e=>{let t=7;return t=31*t+(0,Br.AC)(e.currentLens.id),t=31*t+(be.v.WithSuccess.State.isInSuccess(s)(e)?1231:1237),t}),e),d=(0,r.zG)(c,h.U((e=>{const t=e.get();return be.v.WithSuccess.State.isInSuccess(s)(t)}))),u=(0,r.zG)((0,Z.ux)(e,n,s),w.M(e),h.U((([e,t])=>({visible:!ve.nL.hasCards(t)||_.Wi(t.currentLens.items.find((e=>!e.positionState.isHeightValid))),offset:e+6,animationInProgress:!0}))),b.O({visible:!1,offset:0,animationInProgress:!0}));return a.createElement(Or.C,{className:Gr.cardList,onClick:e=>{e.target.getAttribute("class")===Gr.cardList&&t.assistantActions.next({type:Be.Type.clickOnEmpty})},footer:a.createElement(H.F.Fragment,null,(0,r.zG)(d,h.U((e=>a.createElement(qr,{key:"assistant-footer",position:u,isSuccess:e},a.createElement(j,{predictionsVM:o.predictionsPreviewViewModel})))))),ref:e=>{t.cardListViewportHeight.set(_.ij(null==e?void 0:e.offsetHeight))}},(o=>a.createElement(H.F.Fragment,null,(0,r.zG)(f.a([d,t.havePremiumAlerts]),h.U((([r,c])=>r&&!c?a.createElement(a.Fragment,null,a.createElement(Wr,{successView:t.successView,ref:l})):a.createElement(Z.hz,{state:e,cardsViewModel:i,cardsListScrollManager:n,connectorElements:o,ref:l,header:a.createElement(a.Fragment,null,c?a.createElement("div",{className:Gr.upgradeHookWrapper,"data-role":"uphook-wrapper"},U.UI.mount(Ne.n.TogglablePanel,t.upgradeHookFlow)):null),comparator:qe.O.listItemOrd,capabilities:s})))))))})),$r=a.forwardRef((function({viewModels:e,header:t,footer:i,className:n},r){return a.createElement(Or.C,{ref:t=>{"function"==typeof r?r(t):r&&(r.current=t),e.assistantCardListViewModel.cardListViewportHeight.set(_.ij(null==t?void 0:t.offsetHeight))},className:n},(n=>a.createElement(Z.hz,{state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,connectorElements:n,header:t,footer:i,comparator:qe.O.listItemOrd,capabilities:e.capabilities})))}));var Kr=i(30101),Xr=i(87124),Jr=i(69911);const Zr=a.lazy((()=>i.e(2826).then(i.bind(i,39376)).then((({BrandTonesActivationUphookView:e})=>({default:e}))))),Qr=a.forwardRef((function({emogenieService:e,viewModels:t},i){const n=a.createElement(a.Fragment,null,a.createElement(ea,{isBrandTonesEnabled:e.viewState.view("isBrandTonesEnabled"),institutionLogo:e.viewState.view("report").view((e=>null==e?void 0:e.institutionLogo)),institutionName:e.viewState.view("institutionName"),browser:t.assistantLayoutViewModel.browser}),a.createElement(ur,{emogenieService:e,showBetaLabel:!1,browser:t.assistantLayoutViewModel.browser}),a.createElement(H.F.Fragment,null,e.viewState.view((t=>!t.isBrandTonesEnabled&&!t.isBrandTonesConfigured&&!t.settings.hideBrandTonesActivationUphook&&t.settings.shouldShowBrandTonesActivationUphook&&a.createElement(a.Suspense,{fallback:a.createElement(a.Fragment,null)},a.createElement(Kr.L,{chunkName:"brandTonesActivationUphook"},a.createElement(Zr,{trackShow:e.actions.trackBrandToneActivationUphookShow,onActivateClick:e.actions.brandToneActivationUphookCTAClick,onDismissClick:e.actions.brandToneActivationUphookDismissClick})))))));return a.createElement($i,{dataPartName:"emogenie-view-overlay",popActiveView:()=>t.assistantLayoutViewModel.popActiveView(),panelClassName:Yi.gradientViewOverlayPanel,hideBackButton:t.user.view((e=>e.isAnonymous))},a.createElement(H.F.Fragment,null,t.lensPreviewViewModel.getLens(P.R.SpecialId.PredictionEmogenie).pipe(L.map((e=>e.count>0)),L.distinctUntilChanged(),L.map((e=>e?a.createElement($r,{key:"emogeniePredictionCardList",viewModels:t,ref:i,header:a.createElement(a.Fragment,null,n,a.createElement("div",{className:Jr.relatedSuggestionsTitle},"RELATED SUGGESTIONS"))}):a.createElement("div",{className:Yi.gradientViewOverlayContent},n))))))}));Qr.displayName="EmogenieView";const ea=({isBrandTonesEnabled:e,institutionLogo:t,institutionName:i,browser:n})=>a.createElement(H.F.Fragment,null,c.h.combine(e,t,i,((e,t,i)=>a.createElement("div",{className:Yi.defaultViewOverlayHeader},a.createElement("div",{className:Xr.emogenieViewOverlayHeader},e?a.createElement("div",null,t?a.createElement("img",{className:Yi.logo,src:t,alt:"logo"}):null,i," Tone detector"):"Tone detector",a.createElement(Bn,{browser:n,className:Xr.emogenieViewOverlayHeaderBetaBadge})))))),ta=({feedbackVM:e,layoutVM:t})=>a.createElement($i,{dataPartName:"feedback-view-overlay",popActiveView:()=>t.popActiveView(),panelClassName:Yi.gradientViewOverlayPanel},a.createElement("div",{className:Yi.gradientViewOverlayContent},a.createElement("div",{className:Yi.defaultViewOverlayHeader},"Product Feedback"),a.createElement(Kn.q,{domain:e.getDomain(),onClose:()=>t.popActiveView(),align:"left",style:{height:"calc(100% - 48px)"},onSubmit:t=>e.submitFeedback(t),withScore:!0,fixSubmitButtonOverflowBottomPadding:!0,hideLogo:!0})));var ia=i(97225),na=i(16425);const ra=a.memo((({width:e,strokeWidth:t,generalScore:i,componentStyle:n,fontSize:r=9,isLoading:s})=>{const o=e/2,l=o-t/2,c=2*l*Math.PI,d=(s?75:i)/100*c,u=c-d,h=(e=>{const{red40:t,yellow50:i,green50:n}=Wi.Z;return e<65?t:e<95?i:n})(i);return a.createElement("div",{...(0,on.Sh)(na.scoreRing,s&&na.loading),style:n},a.createElement("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`},a.createElement("circle",{fill:"white",r:l,cx:o,cy:o}),a.createElement("circle",{stroke:Wi.Z.neutral20,fill:"transparent",strokeWidth:t,style:{strokeDashoffset:d},r:l,cx:o,cy:o}),a.createElement("circle",{stroke:h,fill:"transparent",strokeWidth:t,strokeDasharray:`${c} ${c}`,style:{strokeDashoffset:u},r:l,cx:o,cy:o}),a.createElement("text",{className:na.scoreText,x:"50%",y:"-35%",fontSize:r,fill:"black",textAnchor:"middle",transform:"rotate(90)"},i>0&&!s?i:"")))}));var aa=i(12945);const sa=e=>{const t=U.Z.animatingFlow((()=>e.headerVM.logoScore),oa);return a.createElement("div",{className:aa.logo_score},U.UI.mount(ha,t))},oa=(e,t)=>(0,r.zG)(e,_.hX((e=>e.type!==t.type)),_.UI((()=>ia.Hk("fadeout","fadein")))),la=U.UI.Node.make((()=>a.createElement(mn.K,{className:aa.grammarly_logo,size:22}))),ca=U.UI.Node.make((({view:e})=>a.createElement(H.F.div,{className:aa.score_container,"data-grammarly-part":"assistant-score"},(0,r.zG)(e("score"),(0,h.U)((({capiScore:e,isLoading:t})=>a.createElement(a.Fragment,null,a.createElement(ra,{generalScore:e,strokeWidth:2,width:22,fontSize:e<100?11:9,isLoading:t,componentStyle:{transform:"translate(2px, -2px) rotate(-90deg)",cursor:"default"}})))))))),da=U.UI.Union.make("type",{logo:la,score:ca}),ua=U.UI.Transition.make({fadein:aa.logoscore_fadein},{fadeout:aa.logoscore_fadeout}),ha=U.UI.Animated.make(ua,da);var ga=i(35352),pa=i(23761);const ma=e=>{const[t,i]=a.useState(!1),[n,s]=a.useState(!1),o=e.viewModels.assistantLayoutViewModel,l=e.viewModels.assistantHeaderViewModel,d=a.useContext(Ur.O.Context),u=(0,r.zG)(e.viewModels.assistantProofitViewModel,_.UI((e=>e.feature)),_.UI((t=>a.createElement(H.F.Fragment,null,f.a([t.layoutCreated,o.activeView.view((e=>e.type===t.assistantViewType()))]).pipe(h.U((([i,n])=>i?a.createElement(Vi.u,{message:d.proofitTooltip,showDelay:Ni.gk,disabled:n},a.createElement(rr.h,{onClick:()=>{n?o.popActiveView():(e.viewModels.gnar.proofitButtonClick("assistant_header"),o.pushActiveView({type:t.assistantViewType()}))},dataGrammarlyPart:"assistant-header-action-btn-proofit"},a.createElement("div",{className:aa.headerActionBtnProofitIcon}))):null)))))),_.WG),g=a.createElement(ga.P,{onClick:l.close,tooltipMessage:"Close panel",dataGrammarlyPart:"assistant-header-action-btn-close"});return a.createElement(Vi.u,{message:"Grab and drag to move panel",showDelay:Ni.gk,disabled:t},a.createElement("div",{...(0,on.Sh)(aa.header,n&&aa.actions_hovered),ref:e.draggableRef,onMouseDown:()=>i(!0),onMouseOut:()=>i(!1)},a.createElement(sa,{headerVM:l}),a.createElement(fa,null),a.createElement(H.F.div,{className:aa.headerActions,onMouseOver:()=>s(!0),onMouseOut:()=>s(!1)},o.isHeaderNavigationEnabled.view((e=>e?a.createElement(a.Fragment,null,u,a.createElement(H.F.Fragment,null,l.showSetGoalsActionButton.view((e=>e&&a.createElement(Vi.u,{message:d.setGoalsTooltip,showDelay:Ni.gk},a.createElement(rr.h,{onClick:()=>l.open("setGoals"),dataGrammarlyPart:"assistant-header-action-btn-set-goals"},a.createElement("div",{className:aa.headerActionBtnGoalsIcon})))))),a.createElement(H.F.Fragment,null,c.h.combine(l.showSettingsActionButton,o.activeView,((e,t)=>{const i=t.type===Ze.a.Type.settings;return e&&a.createElement(pa.l,{onClick:()=>i?o.popActiveView():o.pushActiveView({type:Ze.a.Type.settings}),enableTooltip:!i,dataGrammarlyPart:"assistant-header-action-btn-settings"})}))),g):g)))))},fa=()=>a.createElement("div",{className:aa.draggableWrapper,"data-grammarly-part":"assistant-draggable-handler"},a.createElement("div",{className:aa.draggable})),va=({modalManager:e})=>a.createElement(H.F.Fragment,null,e.state.view((0,M.ls)(_.UI((({component:e})=>e)),_.WG)));var ba=i(77495),wa=i(10658),Sa=i(55016);i(47133),i(94396);const ya=({children:e})=>a.createElement(a.Fragment,null,a.createElement(wa.o,{"data-grammarly-part":"gdocs-sidebar",className:Sa.wrapper},e),a.createElement(ba.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}));var ka=i(89338),Ea=i(39692),_a=i(35076),Ca=i(88927),Aa=i(4256),Ia=i(76002);const xa=({children:e,experimentClient:t})=>{const i=t.isGateEnabled(Yt.K.ExtensionA11yUIFixes),[n,r]=a.useState(null),s=a.useMemo((()=>({currentView:n,setCurrentView:r,isEnabled:i})),[n,i]);return a.createElement(gr.Provider,{value:s},e)},Ta=a.memo((function({viewModels:e,experimentClient:t,emogenieService:i,height:n,ready:s,OuterElementsPortalSource:l}){const d=new wt.C((0,Fe.nD)());(0,Ia.X)("viewModels",e);const u=(0,Gn.IQ)(),h=(0,Gn.e8)(),g=a.useContext(Gn.Dg).state.pipe(L.filter((e=>!e.dragging)),L.startWith(ka.h.create())),p=a.useContext(Ea.Y4),m=(0,_a.C7)(),f=c.h.create(o.UL.empty);(0,Ca.A)(L.combineLatestStatic([g,p]).pipe(L.map((([e,t])=>{const i=t.top+e.translate.y,n=t.left+e.translate.x,r=m.height-i-t.height,a=m.width-n-t.width;return{height:t.height,width:t.width,top:i,left:n,bottom:r,right:a}})),L.tap(k.wW(f)))),(0,Ca.A)(g.pipe(L.tap((t=>e.positionViewModel.onDrag(t))))),(0,Ca.A)(e.assistantLayoutViewModel.activeView.pipe(L.pairwise(),L.tap((([t,i])=>{t.type!==i.type&&Ze.a.isDefault(i)&&e.cardsListScrollManager.paddingTop.set(0)}))));const v=a.useRef(null);return a.useEffect((()=>{e.assistantCardListViewModel.cardListContext.next(_.ij(v.current));const t=v.current?ze.rl(v.current,{subtree:!0,childList:!0}):L.NEVER,i=f.view((e=>({top:e.top,left:e.left}))),n=(0,r.zG)(t,L.timeout((0,Aa.m9)(1)),L.debounceTime(10),L.first()).subscribe((()=>s(i,u)),(()=>{s(i,u,!0)}));return()=>{n.unsubscribe()}}),[]),a.createElement(Ra,{environment:d,viewport:f,experimentClient:t},a.createElement(H.F.div,{"data-grammarly-part":"assistant-popup-content",...(0,on.Sh)(Gr.assistant,u.pipe(L.startWith(!1),L.map((e=>e?Gr.dragging:null)))),style:{height:n,maxHeight:"90vh"}},a.createElement(ma,{viewModels:e,draggableRef:h}),e.assistantLayoutViewModel.activeView.view((n=>Ze.a.isDefault(n)?a.createElement(jr,{viewModels:e,ref:v,key:"default-view"}):Ze.a.isEmogenie(n)?a.createElement(Qr,{emogenieService:i,viewModels:e,experimentClient:t,key:"emogenie-view",ref:v}):Ze.a.isFeedback(n)?a.createElement(ta,{feedbackVM:e.assistantFeedbackViewModel,layoutVM:e.assistantLayoutViewModel,key:"feedback-view"}):Ze.a.isSettings(n)?a.createElement(an,{viewModels:e,experimentClient:t,key:"settings-view"}):Ze.a.isProofitRequest(n)&&_.pC(e.assistantProofitViewModel)?a.createElement($n,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-request-view"}):Ze.a.isProofitReview(n)&&_.pC(e.assistantProofitViewModel)?a.createElement(Zn,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-review-view"}):null))),a.createElement(l,null,a.createElement(ya,null,a.createElement(va,{modalManager:e.assistantModalManager}))),a.createElement(Rr.X,null))})),Ra=({environment:e,viewport:t,children:i,experimentClient:n})=>{var r;const s=a.useRef((0,Ur.I)(Fr.m.getConfig(e.has(wt.U.Flag.isAppleSystem)?"mac":"windows"))),o=null===(r=a.useContext(Mt.nS.Context))||void 0===r?void 0:r.host;return a.createElement(Lr.p.Manager,{cardWidth:Lr.p.withCardWidthEffect(Lr.p.defaultSizeObserver,(e=>{Lr.p.setRootCssVar(o||document.documentElement,e)}))},a.createElement(wt.U.Context.Provider,{value:e},a.createElement(Pr.a.Context.Provider,{value:e},a.createElement(Ur.O.Context.Provider,{value:s.current.assistant},a.createElement(Fr.m.Context.Provider,{value:s.current.denali},a.createElement(Hr.TG.ContextMock,null,a.createElement(Dr.l.RootVirtualContainer,{viewport:t,name:"draggable"},a.createElement(Mr.G.DefaultProvider,null,a.createElement(ya,null,a.createElement(xa,{experimentClient:n},i))))))))))};var Ma=i(98767);const Pa=({textFieldRect:e,viewModels:t,children:i})=>{const{initialPositionOffset:n}=t.positionViewModel,r={...e.client,...e.size},s=(0,_a.C7)(),o=t.assistantLayoutViewModel.layout;return a.createElement(Ma._,{bounds:s,hasDragHandle:!0},(({translate:e})=>a.createElement(Ea.sX,{anchorRect:r,viewportRect:s,anchorOrigin:o.anchorOrigin,elementOrigin:o.assistantOrigin,anchorMargin:o.anchorMargin,repositioning:o.repositioningStrategy,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:n.left,vertical:n.top}},(({top:t,left:n})=>a.createElement("div",{"data-grammarly-part":"assistant-popup",style:{position:"fixed",transform:`translate(${e.x}px, ${e.y}px)`,zIndex:Ni.Eq,top:t,left:n}},i)))))};var Fa=i(54081),Da=i(79805);const La=({alignmentRect:e,viewModels:t,onDomRectChange:i,anchor:n,experimentClient:r,onMaxHeightChange:s,children:o})=>{const c=(0,_a.C7)(),{top:d,setTop:u,left:h,setLeft:g,width:p,height:m,positionerRef:f}=(0,Da.G)(),{x:v,y:b,setDragState:w}=(0,Fa.f)(d,u,h,g),S=c.height;a.useEffect((()=>{const e=c.height-d-m,t=c.width-h-p;if(i({top:d,left:h,bottom:e,right:t,height:m,width:p}),s){s(S)}}),[d,h,p,m,S]);const y="textField"===n?{anchorOrigin:{horizontal:"right",vertical:"bottom"},elementOrigin:{horizontal:"left",vertical:"bottom"},anchorMargin:{top:0,bottom:0,left:16,right:16},repositioning:[{horizontal:"flip",vertical:"translate"}]}:"GButton"===n?{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},anchorMargin:{top:4,bottom:4,left:0,right:0},repositioning:[{horizontal:"translate",vertical:"flip"}]}:(0,l.vE)(n);let k;r.isGateEnabled(Yt.K.ExtensionA11yUIFixes)&&(k=e=>!e.target.closest("button"));const{bottom:E,right:_}=function(e,t,i,n,r){const a=r.height-n,s=r.width-i,o=Math.max(0,Math.min(a,a-e)),l=Math.max(0,Math.min(s,s-t));return{bottom:o,right:l}}(d,h,p,m,c);return a.createElement(Ma._,{hasDragHandle:!0,bounds:c,onChangeDragState:w,dragEventFilter:k},a.createElement(Ea.sX,{...y,anchorRect:e,viewportRect:c,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:t.positionViewModel.initialPositionOffset.left,vertical:t.positionViewModel.initialPositionOffset.top},onChangePosition:e=>f.current.next(e)},a.createElement("div",{style:{position:"fixed",transform:`translate(${v}px, ${b}px)`,zIndex:Ni.Eq,bottom:E,right:_}},o)))};var Ha=i(16465),Ua=i(15074),Ba=i(32635),Oa=i.n(Ba);const Ga={[hr.Settings]:"Grammarly settings are active",[hr.Feedback]:"Grammarly feedback form is active",[hr.ToneInsight]:"Grammarly tone settings are active",[hr.LearnMore]:"Additional information about Grammarly suggestion is active"},Na=()=>{const{currentView:e,isEnabled:t}=a.useContext(gr);if(!t)return null;const i=null===e?"Grammarly assistant is active":Ga[e];return a.createElement("div",{"aria-live":"assertive","aria-atomic":!0,className:Oa().viewAnnouncer,"data-grammarly-part":"assistant-view-announcer"},a.createElement("p",null,i))};var Va=i(56546),za=i(50544);const Wa=({dragHandle:e,headerContent:t,className:i,children:n,includeContentPadding:r,footer:s,dataGrammarlyPart:o="single-card-assistant",maxHeight:l,onHeightChange:c})=>{const[d,u]=a.useState(0),[h,g]=a.useState(0),[p,m]=a.useState(0),f=a.useRef(null),v=a.useRef(null),b=a.useRef(null);a.useEffect((()=>{null==c||c(d+h+p)}),[d,h,p]);const w=a.useRef(null);a.useEffect((()=>{var e;return f.current?(null===(e=w.current)||void 0===e||e.disconnect(),w.current=Va.N.getResizeObserver((()=>{f.current&&u(f.current.getBoundingClientRect().height)})),w.current.observe(f.current)):u(0),()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.disconnect()}}),[f.current]);const S=a.useRef(null);a.useEffect((()=>{var e;return v.current?(null===(e=S.current)||void 0===e||e.disconnect(),S.current=Va.N.getResizeObserver((()=>{v.current&&g(v.current.getBoundingClientRect().height)})),S.current.observe(v.current)):g(0),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.disconnect()}}),[v.current]);const y=a.useRef(null);return a.useEffect((()=>{var e;return b.current?(null===(e=y.current)||void 0===e||e.disconnect(),y.current=Va.N.getResizeObserver((()=>{b.current&&m(b.current.getBoundingClientRect().height)})),y.current.observe(b.current)):m(0),()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.disconnect()}}),[s,b.current]),a.useEffect((()=>{v.current&&(v.current.scrollTop=0)}),[v.current,h]),a.createElement(a.Fragment,null,a.createElement("div",{...(0,on.Sh)(za.singleCardAssistant,i),style:l?{maxHeight:l}:void 0,"data-grammarly-part":o,role:"region","aria-label":"Grammarly assistant"},a.createElement("header",{"data-grammarly-part":o+"-header","aria-label":"Grammarly assistant toolbar",...(0,on.Sh)(za.singleCardAssistantHeader,e?za.singleCardAssistantHeaderDraggable:null),ref:t=>{f.current=t,null==e||e(t)}},a.createElement(H.F.Fragment,null,t)),a.createElement("div",{"data-grammarly-part":o+"-content",...(0,on.Sh)(za.singleCardAssistantContent,r?za.singleCardAssistantContentWithPadding:null),ref:v},n),s?a.createElement("footer",{"data-grammarly-part":o+"-footer",className:za.singleCardAssistantFooter,ref:b,onClick:()=>s.onClick()},a.createElement("div",{className:za.singleCardAssistantFooterText},s.content),s.tooltip&&a.createElement(Vi.u,{message:s.tooltip,showDelay:Ni.gk},a.createElement(rr.h,{onClick:()=>s.onClick()},a.createElement("div",{className:za.singleCardAssistantFooterButtonIcon})))):null),a.createElement(Na,null))};var ja=i(59160),qa=i(62761),Ya=i(65350),$a=i(97196),Ka=i(73107),Xa=i.n(Ka);const Ja={clarity:ja.G,correctness:qa.a,tone:Ya.D,engagement:$a.L},Za=({suggestionType:e})=>{const t=Ja[e];return a.createElement("div",{className:Xa().container},a.createElement(t,null),"Your first ",e," suggestion!")},Qa=a.memo((function({viewModels:e,height:t,domRect:i,ready:n,maxHeight:s,experimentClient:o}){const l=new wt.C((0,Fe.nD)());(0,Ia.X)("viewModels",e);const c=(0,Gn.IQ)(),d=(0,Gn.e8)(),g=a.useContext(Gn.Dg).state.pipe(u.h((e=>!e.dragging)),b.O(ka.h.create()));(0,Ca.A)(g.pipe(y.b((t=>{e.positionViewModel.onDrag(t)})))),a.useEffect((()=>{const e=i.view((e=>({top:e.top,left:e.left})));n(e,c)}),[]);const p=e.nativeViewsViewModel.header.view(_.g_((()=>a.createElement(a.Fragment,null)),(t=>a.createElement(Ha.P,{key:"header",sduiRootId:t.id,content:t,designSystem:e.headerDesignSystem,notify:(i,n,r)=>e.cardsViewModel.actionEvents.next({type:he.lY.Type.sduiCardAction,sourceId:i,cardId:t.id,actions:n,scope:r}),transitions:[],prevContent:_.YP,onAnimationEnd:M.Q1,onMount:M.Q1})))),m=e.checksFeedFlow(),v=(0,r.zG)(m,Qt.Z.extendActions(y.b((t=>{"content"===t.key&&"card"===t.action.key&&"alertRefSDUI"===t.action.action.key&&e.cardsViewModel.actionEvents.next(t.action.action.action)}))));return a.createElement(Ra,{environment:l,viewport:i,experimentClient:o},a.createElement(H.F.Fragment,null,f.a([e.bulkDismissViewModel.successReportFooterBulkDismissAlertsCount,e.outcomeExtraFooterViewModel.extraFooterOutcomeType]).pipe(h.U((([i,n])=>a.createElement(Wa,{key:"single-card-assistant",className:yr.singleCardAssistant,dragHandle:d,headerContent:p,maxHeight:s,footer:es(e,i,n),onHeightChange:e=>t.set(e)},Qt.UI.mount(Ua.c.assistant(e.checksFeedItem(e.cardsViewModel.actionEvents)),v)))))),a.createElement(Rr.X,null))}));function es(e,t,i){return t>0?function(e,t){return{content:a.createElement(a.Fragment,null,"We hid ",t," ",(0,gi._6)(t,"suggestion","suggestions")," that didn’t seem relevant to your text. Want to review"," ",(0,gi._6)(t,"it","them"),"?"),tooltip:"Review suggestions",onClick:()=>{e.bulkDismissViewModel.showBulkDismissFeed()}}}(e,t):void 0!==i?function(e){return{content:a.createElement(Za,{suggestionType:e}),onClick:()=>null}}(i):void 0}var ts=i(52351),is=i(20302),ns=i(15648),rs=i(54490);var as=i(85150),ss=i(13728);function os(e,t){return(0,M.zG)(t,_.g_((()=>e),(({feedId:t})=>e.filter((e=>"pushAssistantFeed"===e.type&&e.feedId!==t)))))}function ls(e,t){if(e.isSingleCardAssistant){if(t.type===R.WT.sdui){const i=function(e){const t=(0,M.zG)(e.find((e=>"pushAssistantFeed"===e.type)),_.ij,_.g_((()=>[]),(e=>null!=e.cardId?[e.cardId,e.feedId]:[e.feedId])),Oe.UI((e=>(0,M.ls)(as.a.get(ss.j.Item.Id.from(e)),_.pC))));return e=>t.every((t=>t(e)))}(t.action.actions);return e.sduiEngine.sduiManager.state.pipe(u.h(i),Bi.P()).subscribe((i=>e.cardsViewModel.actionEvents.next(t.action)))}const i=(0,M.zG)(function(e){const t=e.type;switch(t){case R.WT.gButton:case R.WT.card:case R.WT.snippetsAppAction:return _.G({id:qt.D1.GButton.DEFAULT_GBUTTON_ID,getContent:qt.D1.GButton.getContent});case R.WT.emogenie:return _.G({id:qt.D1.GButton.TONE_GBUTTON_ID,getContent:qt.D1.GButton.getContent});case R.WT.getStartedChecklist:return _.G({id:qt.D1.GButton.GET_STARTED_GBUTTON_ID,getContent:qt.D1.GButton.getContent});case R.WT.proofitRequest:case R.WT.proofitReview:return _.G({id:qt.D1.Proofit.ID,getContent:qt.D1.Proofit.getContent});default:(0,l.L0)(t)}}(t),_.fS((()=>({id:qt.D1.GButton.DEFAULT_GBUTTON_ID,getContent:qt.D1.GButton.getContent}))));return e.sduiEngine.sduiManager.state.pipe(h.U((e=>i.getContent(e,i.id))),Ve.oA,Bi.P(),w.M(e.sduiEngine.sduiManager.state),h.U((([e,i])=>{const n=t.type===R.WT.card?t.alertId:null;return(0,M.zG)(_.ij(n),_.tS((e=>qt.D1.getByAlertId(i,e))),_.UI((e=>e.id)),_.g_((()=>({initialSduiItemId:_.YP,openingButtonActions:e.actions})),(t=>({initialSduiItemId:_.G(t),openingButtonActions:e.actions}))))})),h.U((({initialSduiItemId:i,openingButtonActions:n})=>{const r=os(n,e.sduiEngine.sduiFeedManager.currentFeed),a=qt.fr.create(r);return(0,M.zG)(i,_.g_((()=>((t.type===R.WT.proofitRequest||t.type===R.WT.proofitReview)&&r.some((e=>"pushAssistantFeed"===e.type))&&e.gnar.proofitButtonClick("gmail_toolbar"),a)),(e=>({...a,actions:a.actions.map((t=>"pushAssistantFeed"===t.type?{...t,cardId:e}:t))}))))}))).subscribe((t=>e.cardsViewModel.actionEvents.next(t)))}return t.type===R.WT.emogenie?e.assistantLayoutViewModel.pushActiveView({type:Ze.a.Type.emogenie}):t.type===R.WT.proofitRequest?e.assistantLayoutViewModel.pushActiveView({type:Ze.a.Type.proofitRequest}):t.type===R.WT.proofitReview?e.assistantLayoutViewModel.pushActiveView({type:Ze.a.Type.proofitReview}):e.assistantLayoutViewModel.pushActiveView({type:Ze.a.Type.default}),jt.w0.EMPTY}class cs{constructor(e,t){this._params=e,this._felog=t,this._log=x.Y.create("AssistantControllerImpl"),this._integration=null,this._viewModels=c.h.create(null),this._assistantPopupIsReady=new d.x,this._initPerformance=void 0,this._openMeasure=void 0,this._height=c.h.create(0),this._domRect=c.h.create(o.UL.empty),this._maxHeight=c.h.create((0,_a.C7)().height),this._openState=c.h.create("closed"),this._subs=new s.w.Keeper,this.openState=this._openState.view(),this.open=e=>{var t,i;const n=this._params.contentScriptState.view("user").view((e=>({isPremium:e.premium,isAnonymous:e.anonymous,customFields:e.customFields,institutionInfo:e.institutionInfo,isGrammarlyEmployee:Tt.n.isGrammarlyEmployee(e),isTestUser:Tt.n.isTestUser(e),isFreeTrial:Tt.n.isFreeTrial(e)}))),a=this._viewModels.get();if(null!==a)this._subs.push(ls(a,e));else{this._openMeasure=this._felog.assistant.openTime.startMeasure();const a=this._felog.assistant.initTime.startMeasure();this._openState.set("opening");const s=this._params.assistantService.createIntegration({gnar:this._params.gnar,felog:this._felog,snippetsFeature:this._params.snippetsFeature,experimentClient:this._params.experimentClient});if(!s)return this._log.warn("tried to open assistant with checking service not initialized"),a.cancelMeasure(),void this._openMeasure.cancelMeasure();null===(i=(t=this._params).onOpen)||void 0===i||i.call(t,s),this._integration=s;const o=(0,r.zG)(_.ij(e.type===R.WT.card?e.alertId:null),_.UI(A.wQ.Id.create)),l=_.pC(s.engine.sduiEngine)?(0,r.zG)(C.MH(s.engine.sduiEngine),(({sduiBufferService:e,sduiFeedbackService:t,sduiPopoverManager:i})=>((e,t,i,n,a)=>{const s=(0,r.zG)(e.capiEvents,u.h(is.hX.is("sdui_add","sdui_remove","sdui_update")),u.h((e=>"sdui_remove"===e.kind||!qt.D1.InlineCard.isInlineCard(e.sdui)))),o=new ns.A(t,s,i,a),l=new rs._(o.state);return{sduiBufferService:e,sduiFeedbackService:n,sduiManager:o,sduiFeedManager:l,dispose:()=>{o.dispose(),l.dispose()}}})(e,s.engine.alertsList.state,s.engine.getByRawAlertId,t,i)),(e=>{const t=Tr(s.engine,s.denaliViewAdapter,this._assistantPopupIsReady,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,n,this.close,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.checkingService,this._params.cardEvents,this._params.statisticsService,this._params.toneAIFeature,(()=>this._params.envFactory()),this._params.experimentClient,this._params.userEngagedByAlertsAcceptedService,this._params.emogenieService,e,this._params.browser,_.ij(this._params.proofitFeature),this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.dapiActions,this._params.snippetsFeature,this._felog,(()=>this._params.checkingService));return{...t,dispose:()=>{t.dispose(),e.dispose()}}})):Ft(s.engine,s.denaliViewAdapter,s.document.settings.lens("selectedLens"),this._params.emogenieService,this._params.toneAIFeature,this._params.ethicalAIFeature,this._params.snippetsFeature,_.ij(this._params.proofitFeature),this._assistantPopupIsReady,o,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,n,this.close,this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.cardEvents,this._params.browser,this._params.layout.assistant,(()=>this._params.envFactory()),this._params.userEngagedByAlertsAcceptedService,this._params.dapiActions,(()=>this._params.checkingService));this._subs.push(ls(l,e)),l.isSingleCardAssistant&&this._subs.push(l.cardsViewModel.actionEvents.pipe(u.h(I.t.isSduiCardAction),u.h((e=>e.sourceId===qt.D1.Proofit.ID)),h.U((e=>os(e.actions,l.sduiEngine.sduiFeedManager.currentFeed))),u.h((e=>e.length>0))).subscribe((()=>{l.gnar.proofitButtonClick("assistant_header")}))),this._initPerformance=a.endMeasure(),this._viewModels.set(l)}},this.close=()=>{var e,t,i,n;null!==this._viewModels.get()&&(this._trackAssistantClose(),(0,r.zG)(_.ij(this._integration),_.tS((e=>e.engine.sduiEngine)),_.UI((()=>this._viewModels.get())),_.UI((e=>e.sduiCardsViewModel.onAssistantClose()))),null===(t=(e=this._params).onClose)||void 0===t||t.call(e),this._openState.set("closed"),null===(i=this._integration)||void 0===i||i.dispose(),this._integration=null,null===(n=this._viewModels.get())||void 0===n||n.dispose(),this._viewModels.set(null))},this._asyncReadyCbSub=null,this._getReadyFn=()=>{const e=this._felog.assistant.renderTime.startMeasure();return(t,i,n)=>{const r=e.endMeasure();let a;if((0,l.kG)(!!this._openMeasure,"Expected Assistant to be open"),n)this._openMeasure.cancelMeasure();else{const e=this._openMeasure.endMeasure();a=null==e?void 0:e.duration,this._initPerformance&&r&&e&&e.duration>500&&this._log.warn("assistant popup took too long to open:",{init:this._initPerformance.duration,render:r.duration,total:e.duration})}this._asyncReadyCbSub=g.E.schedule((()=>{this._openState.set("open"),this._assistantPopupIsReady.next(void 0),this._trackAssistantOpen(t,a),this._trackAssistantDrag(t,i)}))}},this._applyIframeOffset=e=>{var t,i;const n=null===(i=(t=this._params).getCustomOffset)||void 0===i?void 0:i.call(t);return n?{...e,size:{width:n.width,height:n.height},client:{...e.client,left:n.left+e.client.left,top:n.top+e.client.top},offset:{...e.offset,left:n.left+e.offset.left,top:n.top+e.offset.top},page:{...e.page,left:n.left+e.page.left,top:n.top+e.page.top}}:e}}get view(){return this._viewModels.pipe(p.w((e=>null===e?m.of(null):f.a([v.R(self,"resize").pipe(b.O(null)),this._maxHeight]).pipe(w.M(this._params.layout.textField.rect.behavior),w.M(f.a([this._params.layout.gbutton.positionBehavior,this._params.layout.gbutton.sizeBehavior]).pipe(h.U((([e,t])=>{const i=t.heightAndWidth,n=t.heightAndWidth;return{top:e.client.top-n,left:e.client.left-i,width:i,height:n}})))),h.U((([[[t,i],n],r])=>{const s=this._applyIframeOffset(n),o=this._getReadyFn();let l;const c="test"===this._params.experimentClient.getTreatment(ui.p.SingleCardAssistantNextToTextField);l=c?{...s.client,...s.size}:r;const d=e=>{this._maxHeight.set(e)};return e.isSingleCardAssistant?a.createElement(La,{anchor:c?"textField":"GButton",alignmentRect:l,viewModels:e,onDomRectChange:e=>{this._domRect.set(e)},onMaxHeightChange:d,experimentClient:this._params.experimentClient},a.createElement(Qa,{viewModels:e,height:this._height,ready:o,maxHeight:i,domRect:this._domRect.view(),experimentClient:this._params.experimentClient})):a.createElement(Pa,{textFieldRect:s,gButtonRect:r,viewModels:e},a.createElement(Ta,{viewModels:e,experimentClient:this._params.experimentClient,emogenieService:this._params.emogenieService,height:Q(e,s).pipe(S.R(this._assistantPopupIsReady.asObservable()),y.b(k.wW(this._height))),ready:o,OuterElementsPortalSource:this._params.OuterElementsPortalSource}))}))))))}get activeView(){return this._viewModels.pipe(p.w((e=>{var t;return(null==e?void 0:e.isSingleCardAssistant)?m.of(null):null!==(t=null==e?void 0:e.assistantLayoutViewModel.activeView)&&void 0!==t?t:m.of(null)})))}dispose(){var e;this.close(),this._subs.dispose(),null===(e=this._asyncReadyCbSub)||void 0===e||e.unsubscribe()}_trackAssistantOpen(e,t){var i,n;const r=this._viewModels.get();if(null!==r){const a=r.isSingleCardAssistant?{top:0,left:0}:r.positionViewModel.initialPositionOffset,{statisticsService:s}=this._params,o=s.alertCounts.get(),l=0===a.top&&0===a.left?r.isSingleCardAssistant||"default"===r.assistantLayoutViewModel.layout.name?"smart":"hardcoded":"sticky",c=r.isSingleCardAssistant?"default":r.assistantLayoutViewModel.activeView.get().type;this._params.gnar.assistantPopupShow(c,this._height.get(),e.get().left,e.get().top,o.unmutedCapiAlerts,o.filter((e=>T.S.isCapiAlert(e)&&e.outcome===di.TC.clarity)).visibleNotInlineCapiAlerts,o.visibleInlineCapiAlerts,o.filter((e=>T.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,s.wordsCount.get(),l,null!==(n=null===(i=this._params.checkingService)||void 0===i?void 0:i.sessionUuid)&&void 0!==n?n:"",void 0,t,s.generalScore.get())}}_trackAssistantClose(){var e;const{statisticsService:t}=this._params,i=t.alertCounts.get(),n=this._viewModels.get(),r=(null==n?void 0:n.isSingleCardAssistant)?"default":null!==(e=null==n?void 0:n.assistantLayoutViewModel.activeView.get().type)&&void 0!==e?e:Ze.a.Type.default;this._params.gnar.assistantPopupCloseButtonClick(r,i.unmutedCapiAlerts,i.filter((e=>T.S.isCapiAlert(e)&&e.outcome===di.TC.clarity)).visibleNotInlineCapiAlerts,i.visibleInlineCapiAlerts,i.filter((e=>T.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,void 0)}_trackAssistantDrag(e,t){const i=e.get();let n=i;this._subs.push(t.pipe(E.G(),u.h((([e,t])=>e&&!t))).subscribe((()=>{const t=e.get();ts.E9.l1Distance(t,n)<10||(this._params.gnar.assistantPopupDrag(t.left,t.top,this._height.get(),i.left,i.top),n=t)})))}}var ds=i(72418),us=i(33487),hs=i(22002),gs=i(90328),ps=i(45917),ms=i(4550);class fs{constructor(e,t,i,n,r,a,s,o,l,c){this.connectionState=e,this.gnar=t,this.user=i,this._hoverProvider=n,this.document=r,this.formattingService=a,this.denaliViewAdapter=s,this.capiProxy=o,this.engine=l,this.experimentClient=c,n.setAssistantHover(s.highlightHoverProvider)}static create(e){var t;const i=new hs.t(e.highlights,e.textObserver,e.replacementService,e.layout,e.scroller,e.selectedHighlightsTracker,void 0,e.requestAwaitService,null===(t=e.formattingService)||void 0===t?void 0:t.get()),n=ps.p.create(e.checkingService.get(),e.checkingServiceInitialState,e.alertsTransformer,e.alertProcessor,e.textRevisionManager,e.customEventsFilter),r=(0,ms.r)(n,i,e.document.settings.lens("context"),(()=>{var t,i;return null!==(i=null===(t=e.getExistingAlerts)||void 0===t?void 0:t.call(e))&&void 0!==i?i:(0,gs.q)(e.alertProcessor)}),e.textObserver,(()=>e.checkingServiceInitialState.value.lastStart),e.snippetsFeature,e.sduiBufferService,e.sduiPopoverManager,e.felog,e.experimentClient,(t=>t.forEach((t=>e.alertProcessor.removeAlert(t,{_tag:us.i.alertAccepted})))));return new fs(e.connectionState,e.gnar,e.user,e.hoverProvider,e.document,e.formattingService,i,n,r,e.experimentClient)}dispose(){this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown(),this._hoverProvider.removeAssistantHover()}}var vs=i(7247),bs=i(33549);class ws{constructor({layout:e}){this._scroller=(0,bs.t)({scrollToMarkRect(t,i){(0,vs.W)(e,t,null==i?void 0:i.paddingTop)},scrollToRange(){}})}scrollToMark(e,t){return this._scroller.scrollToMark(e,t)}}var Ss=i(64642);class ys{constructor(e){this._params=e,this.sidebarEvents=new d.x,this.hoverProvider=new ds.f(this._params.hoverProvider),this.selectedHighlightsTracker=this._params.highlights.getSelectedHighlightsTracker({textField:this._params.originalTextField,selectionService:this._params.selectionService}),this.positionModel=(0,Ss.j)(this._params.originalTextField,this._params.state,this._params.fieldSettings,this._params.actions),this.isTextFieldEmpty=this._params.textObserver.contentChanges.async.pipe(h.U((e=>""===e.newText.trim())),xe.x()),this._checkingService=null}setCheckingService(e){this._checkingService=e}getCheckingServiceState(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.state.value}createIntegration(e){var t,i;const{layout:n,highlights:r,textObserver:a,replacementService:s,alertProcessor:o,textRevisionManager:l,state:c,document:d,requestAwaitService:u,formattingService:h,sduiBufferService:g,sduiPopoverManager:p}=this._params;if(null==this._checkingService)return null;const m=null===(i=(t=this._params).getCheckingServicePreviousState)||void 0===i?void 0:i.call(t);m&&(this._checkingService.state.value=m);const f=this._params.createAssistantScroller?this._params.createAssistantScroller():new ws({layout:n}),{user:v}=c.get();return fs.create({layout:n,alertProcessor:o,textRevisionManager:l,connectionState:c.view((e=>e.connection)),highlights:r,textObserver:a,replacementService:s,checkingService:this._checkingService.lazyCheckingService,checkingServiceInitialState:this._checkingService.state,gnar:e.gnar,felog:e.felog,user:{isPremium:v.premium,isAnonymous:v.anonymous,customFields:v.customFields,isGrammarlyEmployee:Tt.n.isGrammarlyEmployee(v),isTestUser:Tt.n.isTestUser(v),isFreeTrial:Tt.n.isFreeTrial(v)},hoverProvider:this.hoverProvider,selectedHighlightsTracker:this.selectedHighlightsTracker,scroller:f,sidebarEvents:this.sidebarEvents,document:d,alertsTransformer:this._params.alertsTransformer,requestAwaitService:u,formattingService:h,getExistingAlerts:this._params.getExistingAlerts?()=>this._params.getExistingAlerts?this._params.getExistingAlerts():null:void 0,snippetsFeature:e.snippetsFeature,experimentClient:e.experimentClient,sduiBufferService:g,sduiPopoverManager:p,customEventsFilter:this._params.customEventsFilter})}dispose(){var e;null===(e=this._checkingService)||void 0===e||e.state.dispose()}}},90328:(e,t,i)=>{i.d(t,{q:()=>r});var n=i(97472);function r(e){return Array.from(e.alerts.getAll()).filter(n.S.isCapiAlert)}},4550:(e,t,i)=>{i.d(t,{r:()=>z});var n=i(18117),r=i(24332),a=i(90023),s=i(39953),o=i(42868),l=i(95102),c=i(54729),d=i(17690),u=i(28942),h=i(97244),g=i(78171),p=i(70017),m=i(77063),f=i(34611),v=i(61230),b=i(82051),w=i(50887),S=i(47311),y=i(94032),k=i(69465),E=i(26308),_=i(12518),C=i(17572),A=i(58303),I=i(84358),x=i(59833),T=i(49445),R=i(20302),M=i(6655),P=i(78592),F=i(73995),D=i(97168),L=i(13391),H=i(69413);var U=i(68818),B=i(23792),O=i(20182),G=i(38437),N=i(78542),V=i(76187);const z=(e,t,i,d,v,E,z,j,q,Y,$,K)=>{const X=N.Y.create("createEngine"),J=new w.w.Keeper,Z=function(e,t,i){const n=L.h.create(A.YP),r=L.h.create(A.YP);return{score:L.h.create(A.YP),scoreStatus:L.h.create(A.YP),title:L.h.create(void 0),textInfo:L.h.create(A.YP),checkingState:L.h.create(e.checkingState),asyncChecksState:L.h.create(e.asyncChecksState),context:i,contextCompleteness:i.view(D.j.calculateCompleteness),updateContext:e=>{const t=!k.R$.eq.equals(i.get(),e);return i.set(e),t},defaultContext:n,updateDefaultContext:e=>{const t=!(0,s.zG)((0,a.bc)([n.get(),e],I.vB(k.R$.eq.equals)));return n.set(e),t},documentText:t.getText(),documentLength:L.h.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:L.h.create(D.dM.group.empty),calculateStats:()=>H.Vi(e.requestDocStats).then((e=>(r.set(A.G(e)),e))),recentDocumentStats:r}}(e,t,i),Q=t.changes.pipe(S.scan(((e,i)=>T.RI.isReset(i)?(0,s.zG)(i.text,_.g_((()=>t.getText()),a.yR)):T.RI.isDelta(i)?(0,s.zG)(T.RI.resFromText(e).compose(i),C.VS((e=>e.text)),_.g_((()=>t.getText()),a.yR)):e),""));J.push(e.events.pipe(S.withLatestFrom(Q),S.tap((([e,t])=>{if("alert_received"===e.kind){const i=(0,B.IM)(e.alert,G.Q.fromString("fake"));U.$.isConsistentWithText(i,t)||(Y.alerts.inconsistentAlertWithText("assistant",null==i?void 0:i._tag),(0,F.N)(X,i,t,"logging"))}}))).subscribe(),e.events.pipe(S.tap((t=>{Z.checkingState.set(e.checkingState),R.hX.is("text_info")(t)?Z.textInfo.set(A.G(t.data)):R.hX.is("finish")(t)?(Z.score.set(t.score),Z.scoreStatus.set(t.scoreStatus)):R.hX.is("feedback_ack")(t)?((0,s.zG)(t,A.DT(R.hX.isUserFeedbackWithGeneralScore),A.UI((e=>e.outcomeScores.GeneralScore)),A.UI((e=>Math.trunc(100*e))),I.bw((e=>Z.score.modify((0,a.ls)(A.UI((t=>({...t,rank:e}))),I.vx(A.G({errorRateScore:0,rank:e}))))))),(0,s.zG)(t,A.DT(R.hX.isUserFeedbackWithScoreStatus),A.UI((e=>e.scoreStatus)),I.bw((e=>Z.scoreStatus.set(A.G(e)))))):R.hX.is("session_started")(t)&&Z.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),...$.isGateEnabled(O.K.CheetahClearSDUIBufferOnReconnect)?[]:[(0,V.o)((()=>A.WG(j)),e.events)],v.contentChanges.async.pipe(S.debounceTime(300),S.map((e=>e.newText)),S.map((e=>({full:e.length-1,trimmed:e.trim().length}))),S.tap(y.wW(Z.documentLength))).subscribe()),(0,s.zG)(E(),A.UI((e=>{Z.updateDefaultContext(k.R$.parseDefault(e.defaultDocumentContext))})));const ee=new b.Xr,te=new h.Ek,ie=(0,r.g_)((0,r.Zm)())(x.oA([A.G((e=>(0,s.zG)(z.get(),A.g_((()=>e),(t=>t.addSnippetsTriggerToAlert(e))))))])),ne=new o.a,re=new u.SC(ee,te,(()=>t.getContents().delta),e.events,e,Z.counters,ie,void 0,ne),ae=l.e.create(re.state),se=new c.k(ae,re._ops);J.push(p.R.init(p.R.UserTextChangesSync.create(t),e.events,g.nR.ignoreTEResult(e),g.nR.ignoreResult(ee),te,g.Av.merge([re])).subscribe()),e.loadAlerts(d()),re.flushAlerts(),$.isGateEnabled(O.K.DontSyncAlertApplicationsWithInlineMode)||J.push(W(re.state,K));const oe=A.G(m.J.CategoriesModel.create(e.events,e,re.state,se,M.JW.ScopeType.GLOBAL)),le=A.G(f.k.create(ae)),ce=(0,s.zG)((0,n.gz)(A.Kw)(j,q),A.UI((([t,i])=>({sduiBufferService:t,sduiFeedbackService:new P.Q(e),sduiPopoverManager:i})))),de={enablePlagiarismSearch:e.enablePlagiarismSearch,disablePlagiarismSearch:e.disablePlagiarismSearch},ue={requestWritingExpert:e.requestWritingExpert,enableWritingExpert:e.enableWritingExpert,disableWritingExpert:e.disableWritingExpert};return{alertsList:re,alertsReader:ae,alertsService:se,positionManager:ee,getByRawAlertId:ne.getByRawAlertId.bind(ne),sessionModel:Z,mutedAlertsCategoriesModel:oe,mutingAlertsReader:le,shutdown:()=>{re.dispose(),J.dispose()},sduiEngine:ce,plagiarismClient:de,writingExpertClient:ue}},W=(e,t)=>e.pipe(S.startWith(v.p.empty),S.pairwise(),S.map((([e,t])=>v.p.diff(e,t))),S.map((e=>(0,s.zG)(e,E.vh.reduce([],((e,t)=>(0,s.zG)(t.alert,A.DT((e=>d.bZ.isApplied(e))),A.UI((e=>e.rawId)),A.fS((()=>A.YP)),A.g_((()=>e),(t=>[...e,t])))),a.yR,a.yR))))).subscribe((e=>{e.length&&t(e)}))},64642:(e,t,i)=>{i.d(t,{j:()=>s});var n=i(13391),r=i(52351),a=i(8526);const s=(e,t,i,n)=>{const s=t.view("page","domain").get(),o=(0,a.U)(e,s),l=i.view((({widgetOffset:e})=>null!=e?e:r.E9.zero));return{initialPositionOffset:l,updateInitialPositionOffset:e=>{r.E9.equals(e,l.get())||n.field.patchFieldSettings({fieldId:o,fieldSettings:{widgetOffset:e}})}}};n.h.create({top:0,left:0})},50299:(e,t,i)=>{i.d(t,{O:()=>n});var n,r=i(24332),a=i(90023),s=i(39953),o=i(51170),l=i(90277),c=i(33671),d=i(21961),u=i(17560),h=i(87517),g=i(90658),p=i(65810),m=i(84825),f=i(57576),v=i(525),b=i(31491),w=i(14944),S=i(21147),y=i(58303),k=i(28082);!function(e){function t(e,t){return f.nL.Items.mapper((e=>e.kind),{[d.X.Kind]:e,[u.R.Kind]:t})}function i(e){return e.kind===d.X.Kind}function n(e){return e.kind===u.R.Kind}function E(e){return i(e)&&g.i.isEthicalAIItem(e)}function _(e){return n(e)&&g.i.isEthicalAIItem(e)}function C(e){return{viewState:(i,n)=>t((t=>({view:t,isLastCard:i,kind:"alertCard",visibleViewportHeight:e(n)})),(t=>({view:t,isLastCard:i,kind:"alertsBundle",visibleViewportHeight:e(n)})))}}e.isSelectableWithAlertItem=(0,b.Kg)(i,n),e.getActiveItemWithAlert=f.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=f.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=f.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=n,e.isEthicalAIAlertCard=E,e.isEthicalAIAlertsBundle=_,e.defaultOrd=(0,r.g_)(w.iP())([(0,s.zG)(w.C2,w.Uz((0,b.ff)(E))),w.Zt(((e,t)=>i(e)&&i(t)?d.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,r.g_)(w.iP())([(0,s.zG)(w.C2,w.Uz((0,b.ff)(_))),w.Zt(((e,t)=>n(e)&&n(t)?u.R.ord.compare(e,t):0))]),e.item=e=>k.UI.Union.make("kind",{alertCard:o.p.Card(e),alertsBundle:c.Q.Card(e)}),e.viewState=C,e.createCardListFlow=()=>(0,l.sJ)(a.Q1),e.listItemOrd=e=>w.Uz((e=>e.cell.item.view))(e).compare;const A={equals:(e,t)=>e.kind===t.kind&&p.s.eqById.equals(e,t)},I=(e,t)=>({equals:(i,n)=>{const r={[d.X.Kind]:e,[u.R.Kind]:t};return A.equals(i,n)&&(a=e=>e.kind,s=r,(e,t)=>s[a(e)].equals(e,t))(i,n);var a,s}}),x=(0,r.g_)(S.uZ())([m.o.eq,p.s.verticalPositionEq,A]);function T(e){const i=d.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(i.changePosition(e),u.R.changePosition(e))}}function R(e,i){const n=d.X.Capabilities.getAnimatable(e),r=u.R.Capabilities.getAnimatable(i);return{completeTransition:e=>t(n.completeTransition(e),r.completeTransition(e)),transitionTo:e=>t(n.transitionTo(e),r.transitionTo(e)),changeVisualState:e=>t(n.changeVisualState(e),r.changeVisualState(e))}}function M(e,i,n,r){const s=u.R.getCardHydrator(r),o=u.R.getSelect(i,n,s),l=u.R.getSelectByAlert(i,n,s),c=d.X.Capabilities.getSelect(e);return{select:(e,i)=>t(c.select(e,i),o(e,i)),selectByAlert:(e,i,n)=>t(c.selectByAlert(e,i,n),l(i,e,n)),unselect:(e,i)=>t(c.unselect((0,a.MZ)(e),i),u.R.unselect((0,a.MZ)(e),i))}}function P(e,r,a,s){return{removeAlertFromItem:(o,l)=>t((t=>d.X.Capabilities.getRemoveAlerts(e,l.itemsOrd)(o,f.In.getActiveItemOfType(i)(l))(t)),(e=>u.R.Capabilities.getRemoveAlertsCapability(r,a,s,l.itemsOrd)(o,f.In.getActiveItemOfType(n)(l))(e)))}}function F(e,i,n){const r=d.X.Capabilities.getRemove(e);return{remove:(e,a)=>t(r.remove(e,a),(t=>e(t)?u.R.Capabilities.getRemove(i,n)([t.activeAlert],a(t))(t):t))}}function D(e,i,n){const r=d.X.Capabilities.getUpdateWithAlert(e),a=u.R.Capabilities.getUpdatableWithAlertsCapability(i,n);return{updateWithAlerts:e=>t(r.updateWithAlerts(e),a(e))}}e.equatable={structEq:I(d.X.eq,u.R.eq),idEq:I(A,A),visualStateEq:I(x,x)},e.changePosition=T,e.disposable={isScheduledToDispose:t((e=>g.i.willBeDisposed(e,e.removedAlertsIds)),(e=>g.i.willBeDisposed(e,e.removedAlertsIds)))},e.hidable={isHidden:t(m.o.isHidden,m.o.isHidden)},e.animatableItem=R,e.hasAlertsQueries={isSelectableByAlert:e=>t(g.i.hasAlert(e.alert.id),g.i.hasAlert(e.alert.id)),hasAlert:e=>t(g.i.hasAlert(e),g.i.hasAlert(e)),hasActiveAlert:t(g.i.hasActiveAlert,g.i.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(a.jv,a.jv)},e.select=M,e.removeAlert=P,e.remove=F,e.updateWithAlert=D,e.releaseAlert=(t,i,n,r)=>v.v.Capabilities.getAlertReleaser({...P(t,i,n,r),...e.disposable}),e.unselectable=(t,i,n,r)=>v.v.Capabilities.getUnselectable(f.In.getActiveItem,{...M(t,i,n,r),...e.disposable}),e.selectableByAlert=(t,i,n,r)=>v.v.Capabilities.getSelectableByAlert(f.In.getActiveItem,{...e.hasAlertsQueries,...M(t,i,n,r),...v.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=(t,i,n,r)=>v.v.Capabilities.getSelectableById(f.In.getActiveItem,{...M(t,i,n,r),...e.disposable}),e.updateMeta=()=>({updateMeta:v.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=(e,t,i,n)=>v.v.Capabilities.getAnimatable(e,{...P(e,t,i,n),...R(e,n),...v.v.Capabilities.getHasChecksFeed()});const L=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function H(e){const i=h.Mq.getCardSelections(e);return{nextAlert:t(i.nextAlert,i.nextAlert),prevAlert:t(i.prevAlert,i.prevAlert)}}function U(){return{updateUserInput:e=>t(d.X.updateUserInput(e),u.R.changeUserInput(e))}}e.alignable={isValidToAlign:t(L,L)},e.alertIterator=H,e.itemReleaser=()=>v.v.Capabilities.getItemReleaser(),e.hasAlerts=v.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,b.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,s.zG)(i,e.hasAlertsQueries.hasActiveAlert,y.UI((e=>t.isRegistered(e.alert.id))),y.fS(a.jv)))),e.hasUserInput=U,e.verifiable=()=>v.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>{const e=p.s.Capabilities.getPojoCloneable().clone;return{clone:t(d.X.Capabilities.getCloneable().clone,e)}},e.getCapabilities=function(t,i,n,r,s=(0,a.a9)(y.YP),o=h.IG.Default){return{...C(s),...e.disposable,...e.hidable,...e.equatable,...U(),...e.cloneable(),...T(t),...R(t,r),...M(t,n,o,r),...F(t,o,r),...P(t,n,o,r),...D(t,i,r),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,n,o,r),...e.unselectable(t,n,o,r),...e.selectableByAlert(t,n,o,r),...e.selectableById(t,n,o,r),...e.updateMeta(t),...e.animatableFeed(t,n,o,r),...e.itemReleaser(),...e.verifiable(),shouldAnimatePositionChange:()=>()=>!1,...e.cloneable(),...e.hasAlerts(H(n),n,(()=>e.isSelectableWithAlertItem),{...e.hasAlertsQueries,...e.disposable})}}}(n||(n={}))},2485:(e,t,i)=>{i.d(t,{D:()=>l,a:()=>n});var n,r=i(47311),a=i(81442),s=i(6641),o=i(23031);!function(e){let t;!function(e){e.default="default",e.emogenie="emogenie",e.feedback="feedback",e.settings="settings",e.proofitRequest="proofitRequest",e.proofitReview="proofitReview",e.startupPlaceholder="startupPlaceholder"}(t=e.Type||(e.Type={})),e.isDefault=function(t){return t.type===e.Type.default},e.isEmogenie=function(t){return t.type===e.Type.emogenie},e.isFeedback=function(t){return t.type===e.Type.feedback},e.isSettings=function(t){return t.type===e.Type.settings},e.isProofitRequest=function(t){return t.type===e.Type.proofitRequest},e.isProofitReview=function(t){return t.type===e.Type.proofitReview}}(n||(n={}));class l extends s.A{constructor(e,t,i,s,l=a.V.defaultLayout){super({type:n.Type.startupPlaceholder},{type:n.Type.default}),this.browser=s,this.layout=l,this._sub=new r.Subscription,this._sub.add(t.subscribe((e=>{if(e.length>0)for(;!this.activeViewHasAlerts();)this.popActiveView()})));const c=new Set([n.Type.emogenie]);this._sub.add(i.pipe(r.debounceTime(100),r.filter(o.fQ)).subscribe((()=>{if(c.has(this._activeView.get().type))for(;this._activeView.get().type!==this._defaultView.type;)this.popActiveView()}))),this._sub.add(this._activeView.subscribe((t=>{switch(t.type){case n.Type.settings:return void e.assistantSettingsShow();case n.Type.proofitRequest:return void e.proofitRequestFormShow();default:return}})))}activeViewHasAlerts(){switch(this._activeView.get().type){case n.Type.default:case n.Type.emogenie:return!0;default:return!1}}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}get isHeaderNavigationEnabled(){return this._activeView.view((e=>e.type!==n.Type.feedback))}dispose(){this._sub.unsubscribe()}}},88786:(e,t,i)=>{i.d(t,{W:()=>r});var n=i(52351);const r=e=>{const t=e.initialPositionOffset.get();return{initialPositionOffset:t,onDrag:i=>{e.updateInitialPositionOffset(n.E9.plus(t,n.E9.fromCartesian(i.translate)))}}}},17789:(e,t,i)=>{i.d(t,{X:()=>s});var n=i(13391),r=i(58303),a=i(66795);class s{constructor(e,t,i,s,o=!1){this._contentScriptState=e,this._contentScriptActions=t,this._dapiActions=i,this.domain=s,this._canRequestInProductDiscountSpecialOffer=o,this.hasInProductDiscountSpecialOffer=n.h.create(r.YP),this.state=this._contentScriptState.view((e=>({user:e.user,page:e.page,dynamicConfig:e.dynamicConfig,dapi:e.dapi}))),this.actions={toggleSite:(e,t)=>{this._contentScriptActions.toggleSite({enabled:e,domain:t})},toggleDefs:e=>{this._contentScriptActions.toggleDefs(e)},toggleAutocomplete:e=>{this._contentScriptActions.toggleAutocomplete(e)},toggleAutocorrect:e=>{this._contentScriptActions.toggleAutocorrect(e)},toggleAlwaysAvailableAssistant:e=>{this._contentScriptActions.toggleAlwaysAvailableAssistant(e)},cheetahToggleInlineRewrite:e=>{this._contentScriptActions.cheetahToggleInlineRewrite(e)},cheetahToggleInlineQuickReply:e=>{this._contentScriptActions.cheetahToggleInlineQuickReply(e)},toggleCitationBuilderForDomain:e=>{this._contentScriptActions.toggleCitationBuilderForDomain(e)},changeStrongDialect:e=>{this._dapiActions.changeStrongDialect(e)},setDesktopIntegration:e=>{this._contentScriptActions.setDesktopIntegration(e)},setEmogenieEmojiState:e=>{this._dapiActions.setEmogenieEmojiState(e)},setSerengetiState:e=>{this._dapiActions.setSerengetiState(e)},toggleKnowledgeHub:e=>{this._contentScriptActions.toggleKnowledgeHub(e)},toggleTouchTypist:e=>{this._contentScriptActions.toggleTouchTypist(e)},setTouchTypistToggledByUser:e=>{this._contentScriptActions.setTouchTypistToggledByUser(e)},setTouchTypistHotkey:e=>{this._contentScriptActions.setTouchTypistHotkey(e)},toggleGOSDebugger:e=>{this._contentScriptActions.patchCommonSettings({gOSDebuggerEnabled:e})},setGOSAppletChannel:e=>{this._contentScriptActions.patchCommonSettings({gOSAppletChannel:e})},setGOSAssistantAppletUrl:e=>{this._contentScriptActions.patchCommonSettings({gOSAssistantAppletUrl:e})},hwrSetEnabled:e=>{this._contentScriptActions.hwrSetEnabled(e)},setKeyboardShortcut:(e,t)=>{this._contentScriptActions.setKeyboardShortcut({[e]:t})},getConfiguration:e=>this._contentScriptActions.getConfiguration(e),trackConfiguration:(e,t)=>this._contentScriptActions.trackConfiguration(e,t),toggleEnhancedScreenReaderUXSupport:e=>{this._contentScriptActions.toggleEnhancedScreenReaderUXSupport(e)}},this._canRequestInProductDiscountSpecialOffer&&(0,a.SU)(this._contentScriptActions).subscribe((e=>this.hasInProductDiscountSpecialOffer.set(e)))}}},54081:(e,t,i)=>{i.d(t,{f:()=>a});var n=i(92379),r=i(89338);const a=(e,t,i,a)=>{const[s,o]=n.useState(r.h.create()),[l,c]=n.useState(null),[d,u]=n.useState(null),h=null!=d?d:s.translate;return n.useEffect((()=>{!s.dragging&&s.dragEnd&&(t(e+h.y),a(i+h.x),c(s.translate),u({x:0,y:0}))}),[s]),n.useEffect((()=>{s.dragging&&d&&l&&u({x:s.translate.x-l.x,y:s.translate.y-l.y})}),[s]),{dragState:s,setDragState:o,x:h.x,y:h.y}}},79805:(e,t,i)=>{i.d(t,{G:()=>o});var n=i(92379),r=i(62552),a=i(78129),s=i(39692);const o=()=>{const[e,t]=n.useState(s.KC.top),[i,o]=n.useState(s.KC.left),[l,c]=n.useState(s.KC.height),[d,u]=n.useState(s.KC.width),h=n.useRef(new r.X(s.KC));return n.useEffect((()=>{const n=h.current.pipe(a.G()).subscribe((([n,r])=>{const a=((e,t,i)=>{if(e===s.KC.left||t.left!==i.left)return i.left})(i,n,r),l=((e,t,i)=>e===s.KC.top?i.top:t.height!==i.height?Math.max(e-(i.height-t.height),0):void 0)(e,n,r);void 0!==l&&t(l),void 0!==a&&o(a),u(r.width),c(r.height)}));return()=>n.unsubscribe()}),[e,i]),{top:e,setTop:t,left:i,setLeft:o,height:l,width:d,positionerRef:h}}},20358:(e,t,i)=>{i.d(t,{V:()=>n});i(76074);const n=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g},37038:(e,t,i)=>{i.d(t,{m:()=>n});var n,r=i(33632);!function(e){e.isInlineFormatting=function(e){return"bold"in e||"italic"in e||"underline"in e||"link"in e},e.isListFormatting=function(e){return"list"in e},e.isHeaderFormatting=function(e){return"header"in e},e.hasFormatting=function(t){return!r.s.isDelete(t)&&void 0!==t.attributes&&(e.isInlineFormatting(t.attributes)||e.isListFormatting(t.attributes)||e.isHeaderFormatting(t.attributes))}}(n||(n={}))},89886:(e,t,i)=>{i.d(t,{V:()=>n});var n,r=i(68490);!function(e){e.gbuttonInnerSize=22,e.gButtonPadding=2,e.gButtonGroupPadding=2,e.gButtonTopLeftMargin=1,e.gButtonMinimizedSize=12,e.getGButtonComponentSize=(t=e.gButtonMaxSize)=>e.gbuttonInnerSize*t/e.gButtonMaxSize,e.getEmogenieSize=e.getGButtonComponentSize,e.getTotalWidth=(t,i,n)=>{const a=[];i&&!n&&a.push(e.getEmogenieSize()+-1),n&&a.push(r.m);const s=a.reduce(((e,t)=>e+t),0);return(e.gButtonMaxSize+s)*t/e.gButtonMaxSize},e.gButtonMaxSize=e.gbuttonInnerSize+2*e.gButtonPadding+2*e.gButtonGroupPadding;e.getGButtonSize=(t,i)=>Math.max(Math.min(t,i,e.gButtonMaxSize),24)}(n||(n={}))},51285:(e,t,i)=>{i.d(t,{c:()=>r});var n=i(33380);class r{constructor(e){this._highlights=e}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,n.H)({...e,highlights:this._highlights})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}},57283:(e,t,i)=>{i.d(t,{NC:()=>s,WF:()=>h,pc:()=>c,qH:()=>a,y$:()=>o});var n=i(90023);if(6168!=i.j)var r=i(24666);var a,s,o,l,c,d=i(13391),u=i(23031);function h(e){return e.rect.map((e=>e.size)).behavior.pipe((0,r.x)(((e,t)=>e.height===t.height&&e.width===t.width)))}!function(e){let t;!function(e){e.invalidate="invalidate",e.preserve="preserve"}(t=e.ChangeType||(e.ChangeType={}))}(a||(a={})),function(e){e.everything=d.h.create({filter:e=>!0,type:e.ChangeType.preserve})}(a||(a={})),function(e){function t(e,t){const i=e.end-e.start==1,n="a"===t.slice(e.start,e.end);return i&&!n}e.is=function(e){const t=e;return(0,u.Nf)(t.increasedLeft)&&"number"==typeof t.increasedLeft&&(0,u.Nf)(t.increasedRight)&&"number"==typeof t.increasedRight},e.expandIfNeeded=function(e,i){if(t(e,i)){const t=e.start>0?1:0,n=e.end!==i.length?1:0;return{start:e.start-t,end:e.end+n,increasedLeft:t,increasedRight:n}}return{...e}},e.shouldExpand=t}(s||(s={})),function(e){let t;!function(e){let t=0;e.create=function(e,i){return t++,`${e}-${t}${void 0!==i?`|${i}`:""}`},e.createFromMark=function(e){return`${e}`}}(t=e.Id||(e.Id={}))}(o||(o={})),function(e){e.Mock=class{constructor(){this.addHighlight=n.W8,this.updateHighlight=n.W8,this.removeHighlights=n.Q1,this.removeAllHighlights=n.Q1,this.recalculateHighlight=n.Q1,this.recalculateAllHighlights=n.Q1,this.maintainConsistency=n.Q1,this.hasHighlight=n.W8,this.updateHighlightsForTextRange=n.Q1,this.dispose=n.Q1,this.geometry=d.h.create(new Map)}intersectingHighlightIDs(e){return[]}}}(l||(l={})),function(e){e.none="none",e.hovered="hovered",e.hoveredNeedsAttention="hovered_needs_attention"}(c||(c={}))},41384:(e,t,i)=>{if(i.d(t,{H:()=>c,c:()=>d}),6168!=i.j)var n=i(58303);if(6168!=i.j)var r=i(6655);if(6168!=i.j)var a=i(72860);if(6168!=i.j)var s=i(78542);if(6168!=i.j)var o=i(25961);if(6168!=i.j)var l=i(10585);var c;!function(e){e.apply="apply",e.ignore="ingnore",e.acknowledge="acknowledge",e.mute="mute",e.addToDictionary="addToDictionary",e.hide="hide"}(c||(c={}));class d{constructor(e,t,i,r,a,o,c,d,u,h,g=!1,p=s.Y.create("InlineCardModelImpl")){this.alert=e,this.sdui=t,this._replacementService=i,this._removeAlert=r,this._checkingService=a,this._viewActions=o,this._snippetsEvents=c,this._openGrammarlyGo=d,this._formattingService=u,this._experimentClient=h,this._disableHoverToOpen=g,this._log=p,this._wasShown=!1,this._wasReplaced=!1,this._wasIgnored=!1,this._wasAddedToDictionary=!1,this._wasHidden=!1,this._wasAcknowledged=!1,this._wasMuted=!1,this._shouldSendFeedback=n.Wi(this.sdui)||(0,l.T)(this.sdui),this.onSnippetsEditor=e=>{this._snippetsEvents.next(e)},this.onOpenGrammarlyGo=e=>{this._openGrammarlyGo(e)}}get wasAddedToDictionary(){return this._wasAddedToDictionary}onShown(){n.Wi(this.sdui)&&!this._wasShown&&(this._checkingService.onAlertSimpleFeedback(r.wQ.Id.create(this.alert.id),r.PZ.LOOKED,this._disableHoverToOpen?r.e3.Click:r.e3.Hover),this._wasShown=!0)}async onReplace(e){if(this._wasReplaced)this._log.warn(`onReplace called more than once for #${this.alert.id}`);else try{this._replacementService.canPerformReplacement({pos:this.alert.transformRange,oldValue:this.alert.transformText,value:e},{alert:this.alert})?(this._log.info("replacing",[this.alert.transformRange,e]),this._checkingService.onAlertApplied(this.alert,r.e3.Inline,e,void 0,void 0,this._shouldSendFeedback),await this._replacementService.performReplacement({pos:this.alert.transformRange,value:e,oldValue:this.alert.transformText},{alert:this.alert})):this._log.error(`can't perform replacement for #${this.alert.id} upon replace click`),this._wasReplaced=!0,this._removeAlert(this.alert.id,c.apply,o.DD.isFreePremiumUnlocked(this.alert)),this._viewActions.onAlertApplied()}catch(e){this._log.error(`failed to perform replacement for #${this.alert.id}`,e)}}onIgnore(){this._wasIgnored?this._log.warn(`onIgnore called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertIgnored(this.alert,r.e3.Inline),this._removeAlert(this.alert.id,c.ignore,o.DD.isFreePremiumUnlocked(this.alert)),this._wasIgnored=!0)}onMute(e){this._wasMuted?this._log.warn(`onMute called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertMuted(e),this._removeAlert(this.alert.id,c.mute,o.DD.isFreePremiumUnlocked(this.alert)),this._wasMuted=!0)}onHide(){this._wasHidden?this._log.warn(`onHide called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertSimpleFeedback(r.wQ.Id.create(this.alert.id),r.PZ.HIDE,r.e3.Inline),this._removeAlert(this.alert.id,c.hide,o.DD.isFreePremiumUnlocked(this.alert)),this._wasHidden=!0)}onAcknowledge(){this._wasAcknowledged?this._log.warn(`onAcknowledge called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertAcknowledged(r.wQ.Id.create(this.alert.id),r.e3.Inline),this._removeAlert(this.alert.id,c.acknowledge,o.DD.isFreePremiumUnlocked(this.alert)),this._wasAcknowledged=!0)}onOpenExpandedView(e){this._viewActions.openExpandedViewFromInlineCard(e)}onOpenExpandedViewBySduiAction(e){this._viewActions.openExpandedViewFromSduiInlineCard(e)}onShowUnifiedLoginReminder(){this._viewActions.showUnifiedLoginReminder()}onAddToDictionary(){this._wasAddedToDictionary?this._log.warn(`onAddToDictionary called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertSimpleFeedback(r.wQ.Id.create(this.alert.id),r.PZ.ADD_TO_DICTIONARY,r.e3.Inline),this._removeAlert(this.alert.id,c.addToDictionary,o.DD.isFreePremiumUnlocked(this.alert)),this._wasAddedToDictionary=!0)}openPlanComparisonPage(e){this._viewActions.openPlanComparisonPage(e)}openSignUpPage(e){this._viewActions.openSignUpPage(e)}openSigninPage(e,t){this._viewActions.openSigninPage(e,void 0,t)}openGoogleSignupFlow(e){this._viewActions.openGoogleSignupFlow(e,{utmCampaign:"inlineCard",utmSource:e.action===a.VP.SignIn?"signinHook":"signupHook"})}openAccountChooserFlow(e){this._viewActions.openAccountChooserFlow(e,{utmCampaign:"inlineCard",utmSource:e.action===a.VP.SignUp?"signupHook":"signinHook"})}}},69136:(e,t,i)=>{i.d(t,{N1:()=>g,S3:()=>m,cN:()=>v,e9:()=>p,tJ:()=>h});var n=i(13391),r=i(18669),a=i(47230),s=i(20182);if(6168!=i.j)var o=i(81356);if(6168!=i.j)var l=i(78542);const c=n.h.create(!1),d=n.h.create(!1),u=n.h.create(!1),h=6168!=i.j?c:null,g=d,p=u,m=(e,t,i=l.Y.create("InlineLockedUIUnderlines.activateInlineUnderlines"))=>{i.debug("Trying to activate Inline locked underlines"),o.n.isFree(e.view("user").get())&&(v(t)&&(i.debug("Should show underlines for locked inline suggestions are activated"),c.set(!0),u.set(!0)),f(t)&&d.set(!0))},f=e=>{const t=e.peekTreatment(a.p.LockedUIWithNewUx);return null!==t&&"control"!==t},v=e=>(e=>!(0,r.Lu)()&&"unlimited_pool"===e.peekTreatment(a.p.LockedUIChrome))(e)||(e=>"unlimited_pool"===e.peekTreatment(a.p.LockedUIGDoc)&&(0,r.Lu)())(e)||(e=>e.isGateEnabled(s.K.LockedUIRollout))(e)},97512:(e,t,i)=>{i.d(t,{O:()=>u,m:()=>d});var n=i(13391),r=i(58303),a=i(2223);if(6168!=i.j)var s=i(47230);if(6168!=i.j)var o=i(81356);const l={all_yellow:{locked:a.al.gold,unlocked:a.al.gold,uphook:a.al.gold},all_yellow_except_gray_uphook:{locked:a.al.gold,unlocked:a.al.gold,uphook:a.al.gray}},c=n.h.create(r.YP),d=c,u=(e,t)=>{if(!o.n.isFree(e.view("user").get()))return;const i=t.peekTreatment(s.p.LockedUiNewHighlightColors);null!==i&&"control"!==i&&"NOT_ASSIGNED"!==i&&c.set(r.G(l[i]))}},99035:(e,t,i)=>{var n;i.d(t,{p:()=>n}),function(e){e.shouldShowInlineYellowUnderlinesForInProductReactivation=e=>"true"===e}(n||(n={}))},86149:(e,t,i)=>{i.d(t,{N:()=>n});var n,r=i(8867),a=i(62552),s=i(36344),o=i(9642),l=i(93790),c=i(24666),d=i(8794),u=i(59179),h=i(23031);class g{constructor(e,t,i){this._getImmediateValue=e,this._source=t,this._compare=i,this._subject=null,this.behavior=new r.y((e=>{const t=this._source.subscribe(e);return{unsubscribe:()=>{t.unsubscribe(),this._subject=null}}})).pipe((0,o.O)((()=>(this._subject=new a.X(this._getImmediateValue()),this._subject))),(0,l.x)(),(0,c.x)(this._compare)),this.changes=this.behavior.pipe((0,d.T)(1)),this.getCurrent=this._getImmediateValue}getApproximate(){return this._subject?this._subject.getValue():this._getImmediateValue()}map(e,t=h.fS){return new g((()=>e(this._getImmediateValue())),this.changes.pipe((0,u.U)(e)),t)}}!function(e){function t(e,t,i){return new g(e,t.pipe((0,u.U)(e)),i)}e.create=t,e.createOptimized=function(e,t,i){return new g(e,t.pipe((0,u.U)((t=>void 0!==t?t:e()))),i)},e.constant=function(e){return t((()=>e),(0,s.c)(),(()=>!0))}}(n||(n={}))},90038:(e,t,i)=>{if(i.d(t,{By:()=>A,FJ:()=>v,RV:()=>k,Ti:()=>m,We:()=>b,Yq:()=>C,_i:()=>w,bk:()=>_,dk:()=>E,kP:()=>S,nX:()=>p,tQ:()=>f,x$:()=>y}),6168!=i.j)var n=i(44071);if(6168!=i.j)var r=i(64271);if(6168!=i.j)var a=i(59179);if(6168!=i.j)var s=i(24666);if(6168!=i.j)var o=i(89886);if(6168!=i.j)var l=i(52351);if(6168!=i.j)var c=i(5681);if(6168!=i.j)var d=i(23031);if(6168!=i.j)var u=i(60774);var h=i(20545);if(6168!=i.j)var g=i(86149);function p(e){return[(0,n.R)(e,"scroll"),(0,n.R)(e,"mousewheel"),(0,n.R)(e,"touchmove")]}function m(e){return(0,r.T)(...p(e),c.x.create(e,{attributes:!1,childList:!0,subtree:!0,characterData:!0}),(0,n.R)(e,"keydown"),(0,n.R)(e,"keyup"))}function f(e){return{left:parseFloat(e.paddingLeft)||0,top:parseFloat(e.paddingTop)||0,right:parseFloat(e.paddingRight)||0,bottom:parseFloat(e.paddingBottom)||0}}const v=h.S.hz4,b=h.S.sec2,w=h.S.hz30;function S(e,t){const i=e.height-t.bottom-t.top,n=e.width-t.left-t.right;return o.V.getGButtonSize(n,i)}function y(e,t=0,i=e.container,n={top:0,left:0}){return{zIndex:e.zIndex.map((e=>e+1),d.fS),position:e.textFieldRect.behavior.pipe(a.U((e=>{const i=Math.max(e.padding.right,t),r=Math.max(e.padding.bottom,t);return{...l.Cv.create({top:e.position.top+e.height-r+n.top,left:e.position.left+e.width-i+n.left}),effectivePadding:{right:i,bottom:r,left:e.padding.left,top:e.padding.top},textFieldHeight:e.height,textFieldWidth:e.width}})),s.x(d.fS)),container:i}}function k(e){return g.N.create((()=>((0,u.YN)(e)||0)+1),b,d.fS)}function E(e,t){return _(e,t,(e=>e))}function _(e,t,i){const n=[];let r=0,a=e;for(;a.parentElement&&r!==t;)n.push(i(a.parentElement)),a=a.parentElement,r++;return n}function C(e,t){let i=0,n=e;for(;i<t&&n.parentElement;)n=n.parentElement,i++;return i<t?null:n}function A(e,t){return(0,r.T)(...E(e,t).map((e=>(0,n.R)(e,"scroll"))))}},6641:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(13391);class r{constructor(e,t){this._viewHistory=[],this._startupPlaceHolder=e,this._activeView=n.h.create(this._startupPlaceHolder),this._defaultView=t}get activeView(){return this._activeView.view()}get lastView(){return this._viewHistory[this._viewHistory.length-1]||this._defaultView}pushActiveView(e){const t=this._activeView.get();e.type!==t.type&&(t.type!==this._startupPlaceHolder.type&&this._viewHistory.push(t),this._activeView.set(e))}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}replaceActiveView(e){e.type!==this._activeView.get().type&&this._activeView.set(e)}}},79620:(e,t,i)=>{i.d(t,{D1:()=>a,Oe:()=>r,fr:()=>n});var n,r,a,s=i(86399),o=i(39953),l=i(70394),c=i(58303),d=i(85150),u=i(75435),h=i(29677);!function(e){e.create=function(e){return{type:l.lY.Type.sduiCardAction,sourceId:"native",cardId:"",actions:e,scope:{alertRefs:[]}}}}(n||(n={})),function(e){e.create=function(e,t,i="inline",n={alertRefs:[]}){return{type:l.lY.Type.sduiCardAction,sourceId:i,cardId:t,actions:e,scope:n}}}(r||(r={})),function(e){function t(e,t){return d.a.find((e=>e.id.toString()===t))(e)}function i(e,t){return d.a.find((e=>e.content.type===t))(e)}let n,r,a,l,g,p,m,f,v,b;e.getById=t,e.findAllByType=i,e.getByAlertId=function(e,t){return d.a.find((e=>{const i=u.ab.getAllAlertIds(e.content);return 1===i.length&&i[0]===t}))(e)},function(e){e.BulkDismiss="bulk_dismiss",e.BulkAccept="bulk_accept"}(n=e.Features||(e.Features={})),function(e){e.isInlineCard=e=>(0,o.zG)(u.ab.findFirst(e,"inlineCard",u.ab.TreeTraversal.PreOrder),c.pC)}(r=e.InlineCard||(e.InlineCard={})),function(e){e.isPopoverStack=e=>(0,o.zG)(u.ab.findFirst(e,"popoverStack",u.ab.TreeTraversal.PreOrder),c.pC)}(a=e.PopoverStack||(e.PopoverStack={})),function(e){function t(e){return"strongAlertRef"===e.type}function i(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===h.MU.StrongAlertRefBulkDismiss}function n(e){return d.a.find((e=>i(e.content)))(e)}function r(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===h.MU.StrongAlertRefUpgradeHook}e.isStrongAlertRefContent=t,e.isStrongAlertRefBulkDismissContent=i,e.isStrongAlertRefBulkAcceptContent=function(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===h.MU.StrongAlertRefBulkAccept},e.findStrongAlertRefBulkDismissSduiItem=n,e.getStrongAlertRefBulkDismissAlertIds=function(e){return(0,o.zG)(n(e),c.UI((e=>new Set(e.alertIds.map((e=>e.toString()))))),c.fS((()=>new Set)))},e.isStrongAlertRefUpgradeHookContent=r,e.findStrongAlertRefUpgradeHookSduiItem=function(e){return d.a.find((e=>r(e.content)))(e)}}(l=e.StrongAlertRef||(e.StrongAlertRef={})),function(e){function n(e){return"gButton"===e.type}function r(t){return t.type===e.PLAGIARISM_TYPE}function a(e,i){return(0,o.zG)(t(e,i),c.UI((e=>e.content)),c.hX(n))}e.DEFAULT_GBUTTON_ID="gButton-default",e.TONE_GBUTTON_ID="gButton-tone",e.GET_STARTED_GBUTTON_ID="gButton-get-started",e.PLAGIARISM_TYPE="gButton:plagiarism",e.isGButtonContent=n,e.isGButtonPlagiarismContent=r,e.getContent=a,e.getPlagiarismContent=function(t){return(0,o.zG)(i(t,e.PLAGIARISM_TYPE),c.UI((e=>e.content)),c.hX(r))},e.getPushAssistantFeedAction=function(e,t){return(0,o.zG)(a(e,t),c.UI((e=>e.actions)),c.tS((e=>c.ij(e.find(m.isPushAssistantFeedAction)))))}}(g=e.GButton||(e.GButton={})),function(e){e.isViewStackContent=function(e){return"viewStack"===e.type},e.getSelectedContent=function(e){return c.ij(e.views[e.selected])}}(p=e.ViewStack||(e.ViewStack={})),function(e){function i(e){return"assistantFeed"===e.type}let n;e.BULK_DISMISS_CARD_FEED_ID="bulk-dismiss-card-feed",e.BULK_DISMISS_REVIEW_FEED_ID="bulk-dismiss-review-feed",e.TONE_INSIGHTS_CARD_FEED_ID="tone-insights-card-feed",e.TONE_INSIGHTS_SUGGESTIONS_FEED_ID="tone-insights-suggestions-feed",e.PERFORMANCE_SCORE_FEED="performance-score-feed",e.isAssistantFeedContent=i,e.getContent=function(e,n){return(0,o.zG)(t(e,n),c.UI((e=>e.content)),c.hX(i))},e.createFocusAssistantCardAction=function(e){return{type:"focusAssistantCard",cardId:e}},e.createPopAssistantFeedAction=function(){return{type:"popAssistantFeed"}},e.createPushAssistantFeedAction=function(e,t){return{type:"pushAssistantFeed",feedId:e,cardId:t}},e.isPushAssistantFeedAction=function(e){return"pushAssistantFeed"===e.type},function(t){function i(e){return(0,o.zG)(c.G(u.ab.reduce(e,((e,t)=>"button"===t.type&&"back"===t.name.value?e.concat(t.actions):e),u.ab.TreeTraversal.PostOrder,[])),c.hX(s.Od))}function n(e,i){return(0,o.zG)(t.getContent(e,i),c.tS(p.getSelectedContent))}t.getContent=function(t,i){return(0,o.zG)(e.getContent(t,i),c.UI((e=>e.header)),c.hX(p.isViewStackContent))},t.getBackButtonActions=i,t.getSelectedViewContent=n,t.getSelectedViewBackButtonActions=function(e,t){return(0,o.zG)(n(e,t),c.tS(i))}}(n=e.Header||(e.Header={}))}(m=e.AssistantFeed||(e.AssistantFeed={})),function(e){function i(e){return"proofitButton"===e.type}e.ID="proofit-button",e.isProofitContent=i,e.getContent=function(e,n){return(0,o.zG)(t(e,n),c.UI((e=>e.content)),c.hX(i))}}(f=e.Proofit||(e.Proofit={})),function(e){e.ID="upgrade_hook",e.findUpgradeHookSduiItem=function(i){return t(i,e.ID)}}(v=e.NativeUpgradeHook||(e.NativeUpgradeHook={})),function(e){e.ID="success_report",e.SUCCESS_REPORT_CARD_ID="success_report@Short-known:card-assistantCard",e.SUCCESS_REPORT_WITH_PERFORMANCE_SCORE_CARD_ID="success-report-with-performance-score@Short-known:card-assistantCard",e.SUCCESS_REPORT_WITH_QUALITY_SCORE_CARD_ID="success-report-with-quality-score@Short-known:card-assistantCard",e.OPEN_PERFORMANCE_SCORE_INTERACTION_ID="success-state-known:open-performance-score",e.findSuccessReportSduiItem=function(i){return t(i,e.ID)}}(b=e.SuccessReport||(e.SuccessReport={}))}(a||(a={}))},63524:(e,t,i)=>{function n(e){return e.length>0?e[0]:null}function r(e){return 1===e.length?e[0]:null}function a(e){return 1===e.length?e[0]:e.length>0?e.reduce(((e,t)=>t.start===t.end?e:e.start===e.end?t:{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)})):null}i.d(t,{Ey:()=>n,Ls:()=>a,qq:()=>r})},88193:(e,t,i)=>{i.d(t,{q:()=>n});var n,r=i(18669);!function(e){function t(e,t){if(!e||!t)return!0;return!t.includes(e)}function i(e,t){var i;return Boolean((null==t?void 0:t.isDesktopIntegrationEnabled)&&(null===(i=e.llamaIntegration)||void 0===i?void 0:i.enabled))}function n(e,i,n,a){var s,o;const l=a?(0,r.KK)(a):void 0,c=i.isLlamaInstalled&&(null===(s=n.llamaIntegration)||void 0===s?void 0:s.enabled);return t(l,null===(o=n.llamaIntegration)||void 0===o?void 0:o.disabledByDomain)&&(c||"true"===e.showDesktopIntegrationExtensionToggle)}e.isEnabled=i,e.showSettingPopupToggle=n,e.showDisabledByDesktopExtensionGButton=function(e,t,r,a){return n(t,e,r,a)&&i(r,e)},e.isIntegrationEnabled=function(e,n,r){var a;return!(!e||!r)&&(t(n,null===(a=r.llamaIntegration)||void 0===a?void 0:a.disabledByDomain)&&i(r,e))}}(n||(n={}))},3018:(e,t,i)=>{i.d(t,{C:()=>l,U:()=>n});var n,r=i(92379),a=i(73799),s=i(21138),o=i(17572);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...a.a.Flag},e.Context=r.createContext(s.Y.invariantContent("Environment"))}(n||(n={}));class l{constructor(e){this._flags=new Set,this.actions={openUrl:e=>o.vM((()=>{document.location.href=e.toString()})),openPopup:e=>o.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e&&this._flags.add(n.Flag.isAppleSystem),this._flags.add(n.Flag.supportsSVGDominantBaseline),this._flags.add(n.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},33981:(e,t,i)=>{i.d(t,{US:()=>N,hz:()=>V,ux:()=>z});var n=i(90023),r=i(92379),a=i(98227),s=i(96584),o=i(91320),l=i(65557),c=i(34837),d=i(31882),u=i(57576),h=i(94635),g=i(2123),p=i(24909),m=i(59179),f=i(94032),v=i(74822),b=i(954),w=i(84714),S=i(84308),y=i(23841),k=i(64271),E=i(79256),_=i(20161),C=i(36344),A=i(64570),I=i(63532),x=i(17705),T=i(90517),R=i(90572),M=i(44071),P=i(29479),F=i(47311),D=i(72111),L=i(58303),H=i(28082),U=i(50299),B=i(38860),O=i(95686);const G=H.UI.Grid.make((({slots:e,view:t})=>r.createElement(p.F.div,{style:{marginBottom:t("spacing").pipe(m.U(a.ux.rem))}},e.children)));function N(){return 1}const V=r.forwardRef((function({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:a,header:c,footer:d,capabilities:g,comparator:m},S){const y=f.jw((e=>{let t=7;return t=31*t+(0,o.AC)(e.currentLens.id),t=31*t+(u.nL.hasItems(e)?1231:1237),t}),e).view((e=>u.nL.hasItems(e.get())?e.view(u.nL.Prism.getLens()):null)).view((e=>e?{state:e,spacing:1}:null)),k=r.useContext(B.Dg).state;return r.createElement(h.d,{className:w.of(""),name:"cardlist",stateSyncListener:W(i,a,k),height:z(e,i,g),isMaster:!0},r.createElement(r.Fragment,null,c?r.createElement(p.F.div,{className:O.headerOrFooterWrapper,mount:e=>a.lens("title").set(L.ij(e))},c):null,r.createElement(p.F.div,{mount:S},y.view((e=>{return e?H.UI.mount((r=e.spacing,(0,n.zG)(s.A.cardList(U.O.item(t.actionEvents)),H.UI.patch("content","cell","item")((e=>(0,n.zG)(H.UI.Knot.make(G,{children:e.child}),H.UI.squash,H.UI.contramapState((e=>({children:e,root:{spacing:r}})))))))),(e=>(0,n.zG)(U.O.createCardListFlow()(t,e,new v.x,l.i$(i).pipe(b.O(!1)),g,m)))(e.state)):null;var r}))),d?r.createElement(p.F.div,{className:O.headerOrFooterWrapper},d):null))})),z=(e,t,i)=>{const n=(0,d.Sd)(i)(e.view(u.nL.mapper((({currentLens:e,alertSource:t})=>L.G({currentLens:e,alertSource:t})))));return S.a([n.pipe(y.oA,m.U((({currentLens:e})=>e.cardsHeight)),b.O(0)),t.paddingTop]).pipe(m.U((([e,t])=>e+t)))},W=(e,t,i)=>{const n=D.C8.Logging.getLogger("view_models");return k.T(E.P((()=>w.of(e.paddingTop.set(0)))),t.view("viewport").pipe(_.w(L.g_((()=>C.E),(e=>A.YC(e).pipe(I.b((()=>n.debug("update card list viewport due to viewport resize event"))),x.T(i.pipe(T.j("dragging"),R.h((e=>!e)),_.w(f.b2.rafScheduler),I.b((()=>n.debug("update card list viewport due to drag end event"))))),m.U((()=>e.getBoundingClientRect())),m.U((e=>({top:c.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),I.b(f.wW(e.viewport))),t.view("scrollProvider").pipe(_.w(L.g_((()=>C.E),(t=>M.R(t,"scroll").pipe(m.U((()=>t.scrollTop)),b.O(t.scrollTop),I.b(f.wW(e.scrollTop)),P.h(f.PU)))))),t.view("title").pipe(_.w(L.g_((()=>w.of(g.UL.empty)),(e=>A.YC(e)))),m.U((e=>e.height)),F.shareReplay({bufferSize:1,refCount:!0}),I.b(f.wW(e.paddingTop))),t.view("scrollConsumer").pipe(_.w(L.g_((()=>C.E),(t=>e.scrollOffset.pipe(I.b((e=>{t.scrollTop+=e})))))))).pipe(P.h(void 0))}},7491:(e,t,i)=>{i.d(t,{C:()=>P});var n=i(90023),r=i(92379),a=i(55263),s=i(66918),o=i(5412),l=i(65676),c=i(91320),d=i(525),u=i(94635),h=i(2123),g=i(24909),p=i(94032),m=i(23841),f=i(59179),v=i(58303),b=i(28082),w=i(50299),S=i(33981),y=i(9130),k=i(98436),E=i(47311),_=i(74205),C=i(12294);const A=({upgradeViewModel:e})=>{const t=e.advancedAlerts.pipe(E.map(v.UI((e=>({count:e.count,alerts:e.alerts()})))));return r.createElement(g.F.div,{className:C.premiumLens},b.UI.mount(k.r,b.Z.fromSideEffect((t=>{"upgrade"===t.action.action.action.kind?(e.trackUpgradeButtonClick({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"}),e.openUpgradeUrl(_.L.Place.gdocsSidebarCardList)):"onUpgradeButtonMount"===t.action.action.action.kind&&e.trackUpgradeButtonShow({placement:"advancedIssues",bannerType:"GoPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"gDocsSidebarSuccessView"})}),t)))};var I=i(27640),x=i(38148),T=i(63169),R=i(97428);const M=({successLensViewModel:e})=>{const t=(0,x.hM)((0,x.wK)(e.successState.view("type"),r.useContext(I.m.Context)));return r.createElement(g.F.div,{className:R.successLens},b.UI.mount(T.q,t))},P=(r.forwardRef((function({state:e,cardsViewModel:t,upgradeViewModel:i,cardsListScrollManager:n,capabilities:a,upgradeHookFlow:u,...h},m){const f=p.jw((e=>{let t=7;return t=31*t+(0,c.AC)(e.currentLens.id),t=31*t+(d.v.WithSuccess.State.isInSuccess(a)(e)?1231:1237),t}),e);return r.createElement(s.G.DefaultProvider,null,r.createElement(P,{ref:m},(e=>r.createElement(g.F.Fragment,null,f.view((s=>{const c=s.get();return c.currentLens.id===o.R.SpecialId.Premium?r.createElement(A,{upgradeViewModel:i}):d.v.WithSuccess.State.isInSuccess(a)(c)?r.createElement(M,{successLensViewModel:h.successLensViewModel}):r.createElement("div",null,r.createElement(S.hz,{state:s,cardsViewModel:t,cardsListScrollManager:n,connectorElements:e,header:b.UI.mount(l.n.TogglablePanel,u),comparator:w.O.listItemOrd,capabilities:a}))}))))))})),r.forwardRef((function({children:e,onClick:t,className:i=y.cardList,footer:s,...o},l){const c=u.d.Elements.create(),d=(0,n.zG)(c.view("viewport"),m.oA,f.U(h.UL.fromEl));return r.createElement("div",{...o,onClick:t,className:i,ref:e=>{"function"==typeof l?l(e):l&&(l.current=e);const t=v.ij(e);c.lens("scrollConsumer").set(t),c.lens("scrollProvider").set(t),c.lens("viewport").set(t)}},r.createElement(a.l.RootVirtualContainer,{name:"cardListConnector",viewport:d},e(c)),s)})))},39845:(e,t,i)=>{i.d(t,{CV:()=>E,hp:()=>k,k9:()=>_});var n=i(90023),r=i(39953),a=i(23778),s=i(17690),o=i(5412),l=i(47311),c=i(23841),d=i(94032),u=i(31842),h=i(68136),g=i(34837),p=i(31882),m=i(88367),f=i(57576),v=i(13391),b=i(58303),w=i(84358),S=i(78542);class y{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=S.Y.create("SidebarAlignmentViewModelImpl")}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:n},a){return l.defer((()=>this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:n}))).pipe(c.oA,l.map((i=>(0,r.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(m.j.Features.showLabel),b.G(i),"cardContentTop"),b.Uo))),c.oA,l.switchMap((i=>this._cardPositions.setCardPosition(e,t.has(m.j.Features.showLabel),!0,i.top))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align card to mark",e),l.EMPTY))),l.share())}alignMarkTo(e,t,i,n){return l.defer((()=>l.of((0,r.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(m.j.Features.showLabel),b.G(i),"cardContentTop"),b.Uo)).pipe(c.oA))).pipe(l.switchMap((i=>l.mergeStatic(this._markPositions.moveAlertHighlightInViewport(t,g.r.FromWindowTop.ISO.modify(g.L.concatC(i.contentOffset))(i.top),a.uq.initial),this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(m.j.Features.showLabel),!0,i.top)))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align mark to suggested position",e),l.EMPTY))),l.share())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:n},s,o=b.YP){return l.defer((()=>l.of((0,r.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(m.j.Features.showLabel),o,"cardContentTop"),b.Uo)).pipe(c.oA))).pipe(l.switchMap((r=>l.mergeStatic(this._markPositions.moveAlertHighlightInViewport({alert:n,highlightIndex:i},g.r.FromWindowTop.ISO.modify(g.L.concatC(r.contentOffset))(r.top),a.uq.initial),this._cardPositions.setCardPosition(e,t.has(m.j.Features.showLabel),!0,r.top)))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align mark to card",e),l.EMPTY))),l.share())}alignCardTo(e,t,i){const n=i!==u.v.Animation.NO_ANIMATION;return l.defer((()=>l.of((0,r.zG)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(m.j.Features.showLabel),b.G(t),"cardTop"),b.Uo)).pipe(c.oA))).pipe(l.switchMap((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(m.j.Features.showLabel),n,t.top))),l.mapTo(d.PU),l.catchError((e=>(this._log.error("Cannot align card to required top",e),l.EMPTY))),l.share())}}const k=(e,t,i,n,r)=>new y(h.eZ.getSuperScrollMapper(e,i,v.h.create(16)),h.UC.getMapper(t,n,r));var E;!function(e){e.skip="skip"}(E||(E={}));const _=(e,t,i,a,c,h=d.b2.rafScheduler)=>{const m=(e,i,n,r)=>{if(n===s.l$.text)return t.alignCardToMark(e,i?u.v.Animation.ANIMATE_ALL:u.v.Animation.NO_ANIMATION,!0);if(n===f.h8.forceText)return t.alignCardToMark(e,u.v.Animation.NO_ANIMATION,!1);{const a=n===s.l$.sidebar;return t.alignMarkToCard(e,a?i?u.v.Animation.ANIMATE_ALL:u.v.Animation.ANIMATE_MARK:u.v.Animation.NO_ANIMATION,r)}},v=l.mergeStatic(e.view(f.nL.mapper((({currentLens:e,alertSource:t})=>b.G({currentLens:e,alertSource:t})))).pipe(l.startWith(b.YP),l.map(b.UI((e=>e.currentLens.id))),l.pairwise(),l.filter((([e,t])=>(0,r.zG)(w.vB(((e,t)=>e!==t))(e,t),b.Gg(n.yR)))),l.mapTo(b.YP)),e.view(f.nL.mapper((({currentLens:e,alertSource:t})=>b.G({currentLens:e,alertSource:t})))).pipe(l.filter(b.Gg((({currentLens:e})=>(0,p.Bk)(c)(e)))),l.map(b.tS((({currentLens:e,alertSource:t})=>(0,r.zG)(a(e),b.hX(c.isValidToAlign),b.UI((i=>({item:i,source:t,lensId:e.id}))))))))).pipe(l.distinctUntilChanged((0,n.ls)(w.vB(((e,t)=>e.lensId===t.lensId&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),b.Gg(n.yR))),l.startWith(b.YP),l.pairwise(),l.map((([e,t])=>(0,r.zG)(t,b.UI((i=>({item:i.item,source:i.source,animate:(0,r.zG)(e,w.wo((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,r.zG)(e,b.hX((e=>!c.isScheduledToDispose(e.item))),b.tS((e=>(0,r.zG)(t,b.UI((t=>[e.item,t.item]))))),b.hX((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),b.UI((([e,t])=>g.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),l.switchMap(b.g_((()=>l.EMPTY),h)),l.withLatestFrom(i),l.switchMap((([{item:e,source:t,animate:n,suggestedPosition:a},s])=>(0,r.zG)(s,b.g_((()=>m(e,n,t,a)),(t=>(i.set(b.YP),t===E.skip?l.NEVER:m(e,n,t,a))))))));return{id:"alignmentSideEffect",when:o.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(v.pipe(l.switchMapTo(l.NEVER)))}}},87856:(e,t,i)=>{i.d(t,{A7:()=>c});var n=i(90023),r=i(5412),a=i(17690),s=i(47311),o=i(57576),l=i(58303);function c(e,t,i){return{id:"alertSwitchingByClickSideEffect",when:n.W8,what:o.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(s.skip(1),s.switchMap(l.g_((()=>s.EMPTY),s.of)),s.filter((e=>!i||e.alert.lensId!==r.R.SpecialId.Premium)),s.withLatestFrom(t.pipe(s.filter(o.nL.hasCards),s.map((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),s.map((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:a.l$.text,options:{lensId:i,order:"textOrder"}})))))}}},41262:(e,t,i)=>{i.d(t,{t:()=>v});var n=i(59833),r=i(38538),a=i(56164),s=i(90023),o=i(39953),l=i(5412),c=i(32719),d=i(89490),u=i(64297),h=i(13391),g=i(31491),p=i(58303),m=i(2245),f=i(98665);class v{constructor(e,t,i){this._lensesList=e,this._alertsFilterService=t,this._scoreStatus=i,this.getLens=(0,g.HP)((function(e){switch(e){case l.R.SpecialId.AllAlerts:return this._lensesList.view(b(l.R.Info.allAlerts,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.AllAlerts)));case l.R.SpecialId.PredictionTakeaways:return this._lensesList.view(b(l.R.Info.predictionTakeaways,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.PredictionTakeaways)));case l.R.SpecialId.PredictionEmogenie:return this._lensesList.view(b(l.R.Info.predictionEmogenie,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.PredictionEmogenie)));case l.R.SpecialId.RealTimeProofit:return this._lensesList.view(b(l.R.Info.realTimeProofit,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.RealTimeProofit)));case l.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case l.R.SpecialId.Premium:return this._lensesList.view(b(l.R.Info.premium,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.Premium)));case l.R.SpecialId.FreePremiumAlerts:return this._lensesList.view(b(l.R.Info.freePremium,l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(l.R.SpecialId.FreePremiumAlerts)));case l.R.SpecialId.Correctness:case l.R.SpecialId.Clarity:case l.R.SpecialId.Engagement:case l.R.SpecialId.Delivery:case l.R.SpecialId.Vox:case l.R.SpecialId.KnowledgeHub:return this._lensesList.view(b(l.R.Info.createOutcome(e),l.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,u.vE)(e)}})),this._outcomes=[l.R.SpecialId.Correctness,l.R.SpecialId.Clarity,l.R.SpecialId.Engagement,l.R.SpecialId.Delivery],this._previews=(0,g.HP)((()=>r.uX((0,a.mL)(),n.IX)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=h.h.create(!1),this._isFree=h.h.create(!1),this._outcomeStatusMask=h.h.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=d.x.IsDocumentEmpty),t&&(i|=d.x.IsFreeUser),i})),this._getPlagiarismLens=(0,s.ls)(b(l.R.Info.plagiarism,{...l.R.Meta.group.empty,percentile:c.T.MAX},this._alertsFilterService.getLensesFilter(l.R.SpecialId.Plagiarism)),l.R.WithAlerts.modifyMeta((e=>({...e,percentile:c.T.groupSum.concat(c.T.MAX,c.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,o.zG)(p.ij([this.getLens(l.R.SpecialId.AllAlerts),this.getLens(l.R.SpecialId.Premium)].find((t=>e(t.get())))),p.UI((e=>e.get().id)))}_getPreview(e){return{...l.R.Info.base,logo:p.YP,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,n=this._isFree.view((t=>t&&(e===l.R.SpecialId.Engagement||e===l.R.SpecialId.Delivery))),r=h.h.combine(t.view("count").view((e=>0===e)),n,((e,t)=>e&&!t)),{description:a,stateMessage:u}=(0,d.O)(e),g=h.h.combine(this._isDocumentEmpty,r,t.view("percentile"),((e,t,i)=>e?c.T.MIN:t?c.T.MAX:i)).view(c.g.fromRatio),m=h.h.create(!1),v=h.h.combine(this._scoreStatus.view((e=>(0,o.zG)(e,p.UI((e=>e===f.v0.ScoresStatus.SENSITIVE)),p.fS(s.jv)))),t,g,this._outcomeStatusMask,m,u);return{id:e,title:i,description:a,status:v,progress:g,isUnavailable:n}}get nonEmptyLensId(){return(0,o.zG)(p.ij([this.getLens(l.R.SpecialId.AllAlerts),this.getLens(l.R.SpecialId.Premium)].find((e=>e.get().count>0))),p.UI((e=>e.get().id)))}}function b(e,t,i){return n=>{return new l.R.LensImpl(e,(r=e.id,a=t,e=>(0,o.zG)(m.P5(l.R.Id.ord)(r,e),p.fS((()=>a))))(n),i);var r,a}}},11928:(e,t,i)=>{i.d(t,{gM:()=>X,o$:()=>Z,xl:()=>J});var n,r=i(90023),a=i(39953),s=i(5412),o=i(17690),l=i(99531),c=i(61230),d=i(81405),u=i(50887),h=i(94032),g=i(44290),p=i(93631),m=i(80388),f=i(57576),v=i(58690),b=i(64297),w=i(13391),S=i(31491),y=i(59179),k=i(3199),E=i(84308),_=i(64271),C=i(90572),A=i(24666),I=i(10883),x=i(84714),T=i(74822),R=i(78129),M=i(66878),P=i(63532),F=i(23841),D=i(90517),L=i(26308),H=i(72111),U=i(59833),B=i(58303),O=i(12518),G=i(84358),N=i(88347),V=i(57183),z=i(50299),W=i(25961),j=i(79620),q=i(54760),Y=i(4256),$=i(69136),K=i(97512);!function(e){e.create=(e,t,i,n,r,a)=>(s,o)=>{const l=o.to.visualState===g.Bd.highlighted;return q.sO.Change.getCreateAction({range:s,capiAlertId:e,visualState:l?{type:q.sO.Change.VisualState.Type.highlighted,source:t()}:{type:q.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:n(s(),l),highlightDisappearOnHoverDelay:r,order:a})},e.update=(e,t,i,n,r,a)=>(s,o)=>{const l=o.to.visualState===g.Bd.highlighted;return q.sO.Change.getUpdateAction({range:s,capiAlertId:e,visualState:l?{type:q.sO.Change.VisualState.Type.highlighted,source:t()}:{type:q.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:n(s(),l),highlightDisappearOnHoverDelay:r,order:a})},e.remove=e=>t=>q.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(n||(n={}));const X=(e,t)=>{const i=e.pipe(y.U(j.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds)),n=t.pipe(y.U((e=>e.cards)),k.R(((e,t)=>(0,a.zG)(t,L.vh.reduce(e,((e,t)=>(e.delete(t.id),e)),((e,t,i)=>e.set(i.id,i.alertIds.map((e=>e.toString())))),((e,t)=>e.set(t.id,t.alertIds.map((e=>e.toString()))))))),new Map),y.U((e=>(0,a.zG)(Array.from(e.values()),U.xH))),y.U((e=>new Set(e)))),r=t.pipe(y.U((e=>e.feedId===j.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID))),s=t.pipe(y.U((e=>e.feedId===j.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),o=t.pipe(y.U((e=>e.feedId===j.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID))),l=t.pipe(y.U((e=>e.feedId===j.D1.AssistantFeed.BULK_DISMISS_REVIEW_FEED_ID)));return E.a([i,n,r,s,o,l]).pipe(y.U((([e,t,i,n,r,a])=>i||n?t=>!e.has(t.id):r||a?e=>t.has(e.id):i=>t.has(i.id)&&!e.has(i.id))))},J=(e,t,i,n=w.h.create(!1),r=w.h.create(!1))=>_.T(e.pipe(C.h((e=>e.currentLens.id!==s.R.SpecialId.Premium)),A.x(((e,t)=>e.currentLens.id===t.currentLens.id)),A.x()),i.pipe(I.M(e),y.U((([e,t])=>t)))).pipe(I.M(n,r),y.U((([e,i,n])=>i?(0,S.W9)(o.bZ.isPremium,o.bZ.isHidden):n?o.bZ.isPlagiarism:t.alertVisibleInText(e.currentLens.id))));class Z{constructor(e,t,i,d,h,b,k,E,_,A=x.of(void 0),I=!1){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=d,this._ded=h,this._lensState=b,this._filterChanges=k,this._getActiveItemWithAlert=E,this._showPremiumHighlights=_,this._readyObs=A,this._emulateAppliedAlertAnimation=I,this._highlightedAlert=B.YP,this._focusedAlert=B.YP,this._marksMap=new Map,this._subs=new u.w.Keeper,this.events=new T.x,this._alertStateDiff=this._alertList.state.pipe(R.G(),y.U((([e,t])=>c.p.diff(e,t))),C.h((0,S.ff)(L.vh.isEmpty))),this._alertsFilter=w.h.create(r.jv),this._filteredAlerts=w.h.create(B.YP),this._ready=!1,this._log=H.C8.Logging.getLogger("marks_view_model"),this.unhighlightAlertHighlight=()=>{throw new Error("Method not implemented.")},this.getMarkByAlert=e=>(0,a.zG)(this._marksMap.get(e.alert.id),B.ij,B.tS((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,a.zG)(this._alertsReader.getRegistered(l.P.fromRangeIdToAlertId(e.id)),B.tS((t=>(0,a.zG)(v.$A.getHighlightIndex(t,e.range()),O.UI((e=>({alert:m.$.fromModel(t),highlightIndex:e}))),B.Uo)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,a.zG)(this.getMarkByAlert(e),B.g_((()=>x.of(O.t$(new Error("getMarkByAlert returned O.none")))),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t}).pipe(y.U(O.F2),M.K((e=>x.of(O.t$(e)))))))),this._createMA=e=>{const t=G.MH(e.rawId),{impact:i,cardLayout:{outcome:c},extra_properties:d}=e.toRawAlert(),u=V.M.getHighlightColor({inline:e.inline,outcome:W.DD.createOutcomeType(c),impact:i,extraProperties:d,patternName:e.patternName,isPremium:o.bZ.isPremium(e),isHidden:o.bZ.isHidden(e)},!0,!1,$.N1.get(),$.e9.get(),K.m.get()),h=this._lensState.view(f.nL.getActiveItem(z.O.getActiveItemWithAlert)).view((0,r.ls)(B.hX((t=>t.activeAlert.id===e.id)),B.UI((e=>e.activeHighlightIndex)),B.fS((()=>0)))),b=e=>(t,i)=>{const n=l.x.isEnclosingView(t),r=e.getHighlightRanges().some(l.x.isEnclosingView),s=l.x.isMainView(t),c=l.x.isMainStartView(t),d=e.getHighlightRanges(),u=(0,a.zG)(d,U.cx((e=>e.start===t.start&&e.end===t.end)),B.fS((()=>0)))===h.get(),g=o.bZ.isSuperAlert(e);return V.M.getHighlightDisplayFormat({isEnclosing:n,isEnclosed:r,isMain:s,isMainStart:c,isActive:u,belongsToActiveAlert:i,belongsToSuperAlert:g})},w=s.R.getSortOrder(e.lensType),S=new p.v((t=>(0,a.zG)(this._alertsReader.getById(e.id),B.wp((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),B.G(e)))),B.UI(m.$.fromModel),G.MH)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),n.create(t,(()=>q.sO.Change.VisualState.Source.api),u,b(e),null,w),n.update(t,(()=>Q.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),u,b(e),null,w),n.remove(t),(t=>{t.to.visualState===g.Bd.applied&&(this.events.next({type:v.ay.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,S),S},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(g.Bd.disposed),t})),this._handleAlertUpdate=e=>e.map((e=>o.bZ.isRegistered(e)&&!o.bZ.isMuted(e)?(0,a.zG)(B.ij(this._marksMap.get(e.id)),B.g_((()=>this._alertsFilter.get()(e)?this._createMA(e):null),(e=>(e.scheduleUpdate(),g.Oe.isOrWillBe(g.Bd.success)(e)&&e.scheduleApply(g.Bd.highlighted),e)))):(0,a.zG)(B.ij(this._marksMap.get(e.id)),B.g_((()=>{}),(t=>(e.allowUpdate&&o.bZ.isCapiDone(e)&&o.bZ.isRated(e)&&g.Oe.isOrWillBe(g.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(g.Bd.success)):(t.scheduleApply(g.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}getPlagiarismAlertsEditingTracker(){return e=>this._alertList.state.pipe(C.h((0,r.ls)(d.v.iso.get,(e=>e.latestChangeDiff),L.vh.filter(r.jv,((e,t)=>t.alert.lensType===s.R.Type.Plagiarism&&t.state.type===o.bZ.State.Type.REMOVED&&(t.state.reason===o.bZ.State.Removed.Reason.capiDone||t.state.reason===o.bZ.State.Removed.Reason.textChange)),r.jv),(0,S.ff)(L.vh.isEmpty))),P.b((()=>e())))}focusAlertHighlight(e){return this._ready?(0,a.zG)(this._marksMap.get(e.alert.id),B.ij,B.UI((t=>{this._focusedAlert=B.G(e.alert.id),t.scheduleApply(g.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),O.Yo((()=>new Error("Unknown alert"))),O.UI((()=>({dispose:()=>{B.Gg((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=B.YP),(0,a.zG)(this._marksMap.get(e.alert.id),B.ij,B.hX((()=>!(0,a.zG)(this._highlightedAlert,B.Gg((t=>t===e.alert.id))))),B.UI((e=>{e.scheduleApply(g.Bd.visible),e.apply()})))}})))):O.t$(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,a.zG)(this._marksMap.get(e.id),B.ij,B.UI((t=>{this._highlightedAlert=B.G(e.id),t.scheduleApply(g.Bd.highlighted),t.apply()})),O.Yo((()=>new Error("Unknown alert"))),O.UI((()=>({dispose:()=>{B.Gg((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=B.YP),(0,a.zG)(this._marksMap.get(e.id),B.ij,B.hX((()=>!(0,a.zG)(this._focusedAlert,B.Gg((t=>t===e.id))))),B.UI((e=>{e.scheduleApply(g.Bd.visible),e.apply()})))}})))):O.t$(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,a.zG)(this._marksMap.get(e.alert.id),B.ij,B.tS((t=>t.markByIndex(e.highlightIndex))),B.tS((e=>B.Uo(e.range()))),B.g_((()=>O.t$(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:n}=this._ded.getCursor();if(0===n&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,a.zG)(this._ded.setCursor(i,0),O.vx(O.t$))}return O.F2(void 0)}))):O.t$(new Error("marks view model is not ready yet"))}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return _.T(this._filteredAlerts.pipe(F.cp((({visible:t,hidden:i})=>x.of(e({activeAlerts:(0,N.qo)(t),removedAlerts:(0,N.qo)(i)}))))),this._alertStateDiff.pipe(I.M(this._alertsFilter),y.U((([t,i])=>(0,a.zG)(t,L.vh.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(o.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(I.M(this._showPremiumHighlights),y.U((([{activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:n},r])=>{let a=[];return a=a.concat(e.filter((0,S.W9)((0,S.Kg)((e=>r&&o.bZ.isPremium(e)&&o.bZ.isHidden(e)||o.bZ.isLocked(e)||o.bZ.isLockedUIUphook(e)),(0,S.ff)(o.bZ.isPremium)),(e=>B.pC(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{n.forEach((e=>{this.events.next({type:v.ay.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,Y.Xd)(20)),a=a.concat(this._handleRemovedAlerts(t.concat(n).filter((e=>this._marksMap.has(e.id))))),a=a.concat(this._handleAlertUpdate(i)),a}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(D.j("changed"),y.U((e=>e.filter((e=>l.P.is(e)&&l.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),C.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).reduce(((e,t)=>(0,a.zG)(this._alertsReader.getById(t.meta.alertId),B.tS((e=>this._alertsReader.getRegistered(e.id))),B.tS((e=>B.ij(this._marksMap.get(e.id)))),G.bw((t=>e.set(t.alert.id,t))),(0,r.a9)(e))),new Map),i=Array.from(t.values());if(i.forEach((e=>{e.scheduleForceUpdate()})),i.length>0){const[e,...t]=i;e.applyWith(t)}}))}_listenFilterChange(){return this._filterChanges.subscribe((e=>{h.wW(this._alertsFilter)(e)}))}_listenFilteredAlerts(){return this._alertsFilter.pipe(I.M(this._alertList.state),y.U((([e,t])=>(0,a.zG)(t,c.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&o.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>B.G(e)))))).subscribe(h.wW(this._filteredAlerts))}}var Q;!function(e){e.toSidebarFluidMarkSource=e=>{switch(e){case o.l$.text:case f.h8.forceText:return q.sO.Change.VisualState.Source.text;case o.l$.sidebar:case f.h8.forceSidebar:return q.sO.Change.VisualState.Source.sidebar;case o.l$.api:return q.sO.Change.VisualState.Source.api;default:return(0,b.vE)(e)}},e.getAlertSource=(t,i,n)=>f.nL.hasCards(i)?(0,a.zG)(n(i.currentLens),B.g_((()=>q.sO.Change.VisualState.Source.api),(n=>n.activeAlert.id===t.id?e.toSidebarFluidMarkSource(i.alertSource):q.sO.Change.VisualState.Source.api))):q.sO.Change.VisualState.Source.api}(Q||(Q={}))},74205:(e,t,i)=>{i.d(t,{L:()=>n,x:()=>k});var n,r=i(39953),a=i(17690),s=i(18777),o=i(61230),l=i(13391),c=i(31491),d=i(84308),u=i(59179),h=i(94032),g=i(72111),p=i(58303),m=i(17572),f=i(12518),v=i(239),b=i(8261),w=i(23792),S=i(56209),y=i(38437);!function(e){let t;!function(e){e.gdocsSidebarCardList="gdocsSidebarCardList",e.gdocsGoals="gdocsGoals",e.assistantCardList="assistantCardList",e.extensionSettingsAssistant="extensionSettingsAssistant",e.toneSuggestion="toneSuggestion"}(t=e.Place||(e.Place={}))}(n||(n={}));class k{constructor(e,t,i,n,r){this._alertsList=e,this._lensState=t,this._maxAlertCategories=i,this.getCheckingService=n,this.gnar=r,this._log=g.C8.Logging.getLogger("UpgradeViewModel"),this._advancedAlerts=l.h.create([]),this.advancedAlerts=this._advancedAlerts.view((e=>e.length>0?p.G({count:e.length,alerts:()=>this._formatLiteAlerts(k._getGroupedLiteAlerts(e))}):p.YP)),this._formatLiteAlerts=e=>{const t=e.slice(0,this._maxAlertCategories),i=e.slice(this._maxAlertCategories).map((e=>e.count)).reduce(c.Sm,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i,lensName:"",bundleInfo:p.YP}]:t},this._connectionId=y._.createWithRandomId("sidebar"),d.a([this._lensState.view("currentLens").view("id").view((()=>e=>a.bZ.isRegistered(e)&&a.bZ.isPremium(e))),this._alertsList.state]).pipe(u.U((([e,t])=>o.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t)))).subscribe(h.wW(this._advancedAlerts))}openSignupUrl(){}trackUpgradeButtonShow(e){var t,i;const n=this._advancedAlerts.get();(0,v.nE)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:n,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot,sessionUuid:null!==(i=null===(t=this.getCheckingService())||void 0===t?void 0:t.sessionUuid)&&void 0!==i?i:""}),this.gnar.assistantExpandedUpgradeHookShow(n.length,100),(0,S.Tb)().upgradeHooks.showUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}trackUpgradeButtonClick(e){var t,i;const n=this._advancedAlerts.get();(0,v.Qi)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:n,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot,sessionUuid:null!==(i=null===(t=this.getCheckingService())||void 0===t?void 0:t.sessionUuid)&&void 0!==i?i:""}),(0,S.Tb)().upgradeHooks.clickUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}openUpgradeUrl(e){(0,r.zG)(m.vM((()=>{(0,b.OB)().bgRpc.api.openSubscriptionPage({currentAlerts:this._getCapiAlerts(),utmCampaign:e})})),f.fS((e=>this._log.fatal("unexpected error on open upgrade page",e))))}openUpgradeUrlWithOverride(e,t){t?(0,r.zG)(m.vM((()=>{(0,b.OB)().bgRpc.api.openSubscriptionPage({currentAlerts:this._getCapiAlerts(),overrideUrl:t,utmCampaign:e})})),f.fS((e=>this._log.fatal("unexpected error on open upgrade page",e)))):this.openUpgradeUrl(e)}_getCapiAlerts(){return this._advancedAlerts.get().map((e=>(0,w.IM)(k._toRawAlertWithPossibleWrongId(e),y.Q.create(this._connectionId,0))))}static _getGroupedLiteAlerts(e){return s.Q.group(e.map((e=>e.toLiteAlert())))}static _toRawAlertWithPossibleWrongId(e){return{...e.toRawAlert(),id:(0,r.zG)(e.rawId,p.fS((()=>e.id)))}}}},8526:(e,t,i)=>{i.d(t,{U:()=>d});var n=i(90038);function r(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function a(e,t){return e<<t|e>>>32-t}const s=3432918353,o=461845907;class l{getHash(e,t=0){const i=(new TextEncoder).encode(e),n=i.length%4,l=i.length-n;let c,d=t,u=0;for(c=0;c<l;c+=4)d=r(a(d^r(a(r(i[c]|i[c+1]<<8|i[c+2]<<16|i[c+3]<<24,s),15),o),13),5)+3864292196;switch(u=0,n){case 3:u^=i[c+2]<<16;case 2:u^=i[c+1]<<8;case 1:u^=i[c],d^=r(a(r(u,s),15),o)}return h=r((h=d^i.length)^h>>>16,2246822507),((h=r(h^h>>>13,3266489909))^h>>>16)>>>0;var h}}var c;!function(e){e.preferred=l}(c||(c={}));const d=(e,t)=>{const i=(0,n.bk)(e,-1,(e=>e.nodeName)),r=`${t},${e.nodeName},${i.join()}`;return(new c.preferred).getHash(r).toString()}},30337:(e,t,i)=>{i.d(t,{J:()=>r});var n=i(18506);const r=new Proxy({},{get:(e,t)=>(...e)=>(0,n.OB)().bgRpc.api.trackGnar(t,e)})},38860:(e,t,i)=>{i.d(t,{Dg:()=>l,IQ:()=>u,e8:()=>c,fW:()=>d});var n=i(92379),r=i(63532),a=i(47311),s=i(88927),o=i(89338);const l=n.createContext({state:a.of(o.h.create()),onMount:()=>{}});function c(){return n.useContext(l).onMount}function d(){const e=n.useContext(l).state,[t,i]=n.useState(o.h.create());return(0,s.A)(e.pipe((0,r.b)((e=>i(e))))),t}function u(){return n.useContext(l).state.pipe(a.pluck("dragging"))}},89338:(e,t,i)=>{var n;i.d(t,{h:()=>n}),function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(n||(n={}))},98767:(e,t,i)=>{i.d(t,{_:()=>M});var n=i(92379),r=i(63532),a=i(30051),s=i(88927),o=i(25965),l=i(38860),c=i(89338),d=i(90023),u=i(62552),h=i(84308),g=i(59179),p=i(90572),m=i(56546),f=i(7638),v=i(84714),b=i(55341),w=i(32734),S=i(24666),y=i(20161),k=i(44071),E=i(44045),_=i(84908),C=i(10883),A=i(17610),I=i(3199),x=i(92244),T=i(23031);function R(e=v.of((e=>e)),t){const i=n.useRef(new b.t(1)),a=n.useRef(i.current.pipe(function(e=v.of(d.yR),t=(()=>!0)){return(0,d.ls)(p.h(T.fQ),S.x(),y.w((i=>k.R(i,"mousedown").pipe(p.h((e=>!e.button)),p.h((e=>t(e))),r.b((e=>e.preventDefault())),g.U((e=>({element:i,startPos:{x:e.clientX,y:e.clientY}}))),y.w((t=>k.R((0,x.Jj)(t.element),"mousemove").pipe(E.R(k.R((0,x.Jj)(t.element),"mouseup",{capture:!0})),_.p(10),g.U((({clientX:e,clientY:i})=>({kind:"dragInProgress",element:t.element,startPos:t.startPos,delta:{x:e-t.startPos.x,y:i-t.startPos.y}}))),C.M(e),g.U((([e,t])=>({...e,delta:t(e.delta)}))),A.l({kind:"dragDone"}))))))),I.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),c.h.create()))}(e,t),w.B())),s=n.useCallback((e=>i.current.next(e)),[i.current]);return[a.current,s]}const M=n.forwardRef((function({children:e,hasDragHandle:t,bounds:i,dragEventFilter:v,onChangeDragState:b},w){const S=n.useRef(null),y=(0,a.K)(i),[k,E]=function(e,t,i){const a=n.useRef(null),o=n.useRef(new u.X(null)),l=n.useRef(h.a([e,o.current]).pipe(g.U((([e,t])=>t&&e?(0,f.N)(t,e):d.yR)))),[c,v]=R(l.current,i);(0,s.A)(c.pipe(p.h((e=>e.dragStart)),r.b((()=>b())))),n.useEffect((()=>{var e;return t.current&&(null===(e=a.current)||void 0===e||e.disconnect(),a.current=m.N.getResizeObserver(b),a.current.observe(t.current)),()=>{var e;return null===(e=a.current)||void 0===e?void 0:e.disconnect()}}),[t.current]);const b=()=>{t.current&&o.current.next(t.current.getBoundingClientRect())};return[c,v]}(y,S,v),[_,C]=n.useState(c.h.create()),A=n.useRef({state:k,onMount:E});(0,s.A)(k.pipe((0,r.b)((e=>{C(e),null==b||b(e)}))));const I={ref:(0,o.l)([w,S,...(0,o.O)(e)?[e.ref]:[]],t?void 0:E)};return n.createElement(l.Dg.Provider,{value:A.current},n.cloneElement("function"==typeof e?e(_):e,I))}))},7638:(e,t,i)=>{function n(e,t){const i=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,n=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return{...e,left:i,top:n}}function r(e,t){return i=>{const r=n({left:e.left+i.x,top:e.top+i.y,width:e.width,height:e.height},t);return{x:r.left-e.left,y:r.top-e.top}}}i.d(t,{N:()=>r,m:()=>n})},43089:(e,t,i)=>{i.d(t,{Hz:()=>a,O0:()=>s,OR:()=>o,QO:()=>r,qR:()=>c,uU:()=>n,wl:()=>l});const n=["Alt","AltGraph","CapsLock","Control","Meta","NumLock","ScrollLock","Shift"],r=["Fn","FnLock","Hyper","Super","Symbol","SymbolLock"],a={openAssistant:{mac:{key:"KeyG",modifiers:["Shift","Control","Meta"]},other:{key:"KeyG",modifiers:["Shift","Control","Alt"]}},closeAssistant:{mac:{key:"Escape",modifiers:[]},other:{key:"Escape",modifiers:[]}},openVBar:{mac:{key:"BracketRight",modifiers:["Shift","Meta","Control"]},other:{key:"BracketRight",modifiers:["Shift","Alt","Control"]}}},s='[data-grammarly-part="assistant-draggable-wrapper"],[data-grammarly-part="assistant-static-wrapper"]',o='[data-focus-id="empty-state"], button[data-name^="button:"]',l="button, [href], input, select, textarea",c=`${l}, [tabindex]:not([tabindex^="-"])`},22180:(e,t,i)=>{i.d(t,{e:()=>a});var n=i(18506),r=i(43089);function a(e){return r.Hz[e][(0,n.nD)()?"mac":"other"]}},56890:(e,t,i)=>{i.d(t,{$:()=>s});const n=["Control","Alt","Shift","Meta","CapsLock","NumLock","ScrollLock","AltGraph"],r=/^Digit\d$/,a=/^Key[A-Z]$/;function s(e,t){const i=n.filter((t=>e.modifiers.includes(t))).map((e=>function(e,t){if(t){if("Meta"===e)return"Command";if("Alt"===e)return"Option"}return e}(e,t)));return e.key&&i.push(function(e){if(r.test(e)||a.test(e))return e.slice(-1);return e}(e.key)),i.join(" ")}},39692:(e,t,i)=>{i.d(t,{KC:()=>d,Y4:()=>u,sX:()=>h});var n=i(92379),r=i(62552),a=i(24666),s=i(47311),o=i(25965),l=i(56546),c=i(35076);const d={top:-1e4,left:-1e4,flippedHorizontal:!1,flippedVertical:!1,width:0,height:0},u=n.createContext(s.of(d)),h=n.forwardRef((({children:e,anchorRect:t,anchorOrigin:i={vertical:"bottom",horizontal:"left"},elementOrigin:s={vertical:"top",horizontal:"left"},offset:h={horizontal:0,vertical:0},postRepositioningOffset:g,repositioning:p={horizontal:"translate",vertical:"flip"},anchorMargin:m={top:0,left:0,bottom:0,right:0},viewportMargin:f=16,viewportRect:v=(0,c.C7)(),stickToTarget:b=!0,onChangePosition:w},S)=>{const y=n.useRef(null),k=n.useRef(null),E=n.useRef(new r.X(d)),[_,C]=n.useState(E.current.value),A=[v.top,v.left,v.width,v.height,t.top,t.left,t.width,t.height,i.horizontal,i.vertical,s.horizontal,s.vertical,h.horizontal,h.vertical,null==g?void 0:g.horizontal,null==g?void 0:g.vertical,m.top,m.right,m.bottom,m.left,f,b];n.useEffect((()=>{const e=E.current.pipe((0,a.x)(((e,t)=>function(e,t){return Math.floor(e.top)===Math.floor(t.top)&&Math.floor(e.left)===Math.floor(t.left)&&Math.floor(e.width)===Math.floor(t.width)&&Math.floor(e.height)===Math.floor(t.height)}(e,t)))).subscribe((e=>{C(e),null==w||w(e)}));return()=>e.unsubscribe()}),[]);const I=()=>{var e,n;const r=null===(e=y.current)||void 0===e?void 0:e.clientWidth,a=null===(n=y.current)||void 0===n?void 0:n.clientHeight,o=(0,c.C7)();if(r&&a){const e=(0,c.kl)(r,a,o,t,i,s,m,{top:f,bottom:f,left:f,right:f},h,g,p,b);E.current.next({...e,width:r,height:a})}};n.useEffect((()=>{var e;return y&&y.current&&(null===(e=k.current)||void 0===e||e.disconnect(),k.current=l.N.getResizeObserver(I),k.current.observe(y.current)),()=>{var e;return null===(e=k.current)||void 0===e?void 0:e.disconnect()}}),[y.current,...A]),n.useLayoutEffect((()=>{I()}),A);const x={ref:(0,o.l)([S,y,...(0,o.O)(e)?[e.ref]:[]])};return n.createElement(u.Provider,{value:E.current},n.cloneElement("function"==typeof e?e(_):e,x))}));h.displayName="Positioner"},52308:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(92379),r=i(48906),a=i(67728);const s=({kind:e="inline",onClick:t,dataPartName:i="card",marginBottom:s,children:o})=>n.createElement("div",{"data-grammarly-part":i,...(0,r.Sh)(a.card,["inline","inline-fixed-width","inline-fit-content"].includes(e)?a.cardInline:null,"inline"===e?a.cardInlineRegular:null,"inline-fixed-width"===e?a.cardInlineFixedWidth:null,"inline-fit-content"===e?a.cardInlineFitContent:null,["assistant-priority-lens","assistant-all-lens"].includes(e)?a.cardAssistant:null,"assistant-all-lens"===e?a.cardAssistantAllLens:null,t?a.cardClickable:null),onClick:t,style:{marginBottom:s}},o)},29832:(e,t,i)=>{i.d(t,{C:()=>s});var n=i(92379),r=i(48906),a=i(92248);const s=({kind:e="primary",dataGrammarlyPart:t="ui-kit-badge",title:i,boldTitle:s=!1,className:o,...l})=>n.createElement("div",{"data-grammarly-part":t,...(0,r.Sh)(a.badge,o,"primary"===e?a.badgePrimary:null,"success"===e?a.badgeSuccess:null,"gold"===e?a.badgeGold:null,"error"===e?a.badgeError:null,l.rounded?a.badgeRounded:null,!l.rounded||l.size&&"small"!==l.size?null:a.badgeRoundedSmall,l.rounded&&"medium"===l.size?a.badgeRoundedMedium:null,l.rounded&&"large"===l.size?a.badgeRoundedLarge:null)},n.createElement("div",{...(0,r.Sh)(a.badgeTitle,s?a.badgeTitleBold:null)},i))},23761:(e,t,i)=>{i.d(t,{l:()=>d});var n=i(92379),r=i(48906),a=i(9358),s=i(46180),o=i(22408),l=i(47301),c=i.n(l);const d=({enableTooltip:e=!1,size:t="medium",...i})=>n.createElement(o.u,{message:"Settings",showDelay:a.gk,disabled:!e},n.createElement(s.h,{...i},n.createElement("div",{...(0,r.Sh)("small"===t?c().settingsButtonSmallIcon:null,"medium"===t?c().settingsButtonMediumIcon:null)})))},6066:(e,t,i)=>{i.d(t,{J:()=>d});var n=i(90023),r=i(92379),a=i(28627),s=i(48906),o=i(23841),l=i(63532),c=i(34801);const d=({onChange:e,labelId:t,className:i,checkboxClassName:d,labelClassName:u,checked:h,children:g,disabled:p,useDS:m,dataGrammarlyPart:f="ui-kit-checkbox",tabIndex:v=0,onMount:b=n.Q1})=>{const[w,S]=r.useState(null!=h&&h);r.useEffect((()=>{S(Boolean(h))}),[h]);const y=t=>{t.preventDefault(),t.stopPropagation(),S(!w),null==e||e(!w)},{ref:k,onMount:E}=a.P.useElWatcher();return r.useEffect((()=>{const e=k.pipe(o.oA,l.b(b)).subscribe();return()=>e.unsubscribe()}),[]),r.createElement("div",{"data-grammarly-part":f,...(0,s.Sh)(c.checkboxContainer,i)},r.createElement("div",{...(0,s.Sh)(c.checkbox,d,w?c.checkboxChecked:null,m?c.checkboxDS:null),role:"checkbox","aria-checked":w,tabIndex:v,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&y(e)},onClick:p?n.Q1:y,ref:E},w?r.createElement("div",{className:c.checkboxCheckmark}):null),r.createElement("label",{id:t,onClick:y,className:u},g))}},1805:(e,t,i)=>{i.d(t,{Uq:()=>o,dy:()=>c,gT:()=>l});var n=i(92379),r=i(68823),a=i(48906),s=i(87035);const o=e=>[...e].map((e=>{var t,i;return null!==(i=null===(t=e.codePointAt(0))||void 0===t?void 0:t.toString(16))&&void 0!==i?i:""})).filter((e=>"fe0f"!==e.toLowerCase())),l=e=>`${r.g}${e.join("-")}.svg`,c=({size:e="small",unicodeHexArray:t,unicodeLiteral:i,className:r})=>{const[c,u]=n.useState(!1),[h,g]=n.useState(""),[p,m]=n.useState("");n.useEffect((()=>{if(u(!1),m(l(t||o(i))),t&&!i)try{g((e=>String.fromCodePoint(...e.map((e=>parseInt(e,16)))))(t))}catch(e){g("Invalid")}else g(i)}),[t,i]);const f=(0,a.Sh)(s.emoji,c?s.emojiAlt:null,r),v=d(e);return c?n.createElement("span",{...f,style:{fontSize:v},"data-grammarly-part":"ui-kit-emoji"},h):p?n.createElement("img",{onError:()=>u(!0),alt:h,src:p,...f,style:{width:v,height:v},"data-grammarly-part":"ui-kit-emoji"}):null},d=(e="small")=>{switch(e){case"extra-small":return"12px";case"small":return"16px";case"small-medium":return"20px";case"small-gbutton":return"22px";case"medium":return"24px";case"large":return"32px";case"extra-large":return"64px";default:return`${e}px`}}},10658:(e,t,i)=>{i.d(t,{o:()=>s});var n=i(92379),r=i(48906),a=i(80144);const s=n.forwardRef((function({children:e,className:t,...i},s){return n.createElement("div",{...i,...(0,r.Sh)(a.fontWrapper,t),ref:s},e)}))},77495:(e,t,i)=>{i.d(t,{p:()=>a});var n=i(92379),r=i(29621);const a=({thin:e=!1,thinItalic:t=!1,extraLight:i=!1,extraLightItalic:a=!1,light:s=!1,lightItalic:o=!1,regular:l=!1,italic:c=!1,medium:d=!1,mediumItalic:u=!1,semiBold:h=!1,semiBoldItalic:g=!1,bold:p=!1,boldItalic:m=!1,extraBold:f=!1,extraBoldItalic:v=!1,black:b=!1,blackItalic:w=!1})=>n.createElement("div",{"data-grammarly-part":"fonts-preloader",className:r.fontsPreloader},e?n.createElement("span",{className:r.interThin}):null,t?n.createElement("span",{className:r.interThinItalic}):null,i?n.createElement("span",{className:r.interExtraLight}):null,a?n.createElement("span",{className:r.interExtraLightItalic}):null,s?n.createElement("span",{className:r.interLight}):null,o?n.createElement("span",{className:r.interLightItalic}):null,l?n.createElement("span",{className:r.interRegular}):null,c?n.createElement("span",{className:r.interItalic}):null,d?n.createElement("span",{className:r.interMedium}):null,u?n.createElement("span",{className:r.interMediumItalic}):null,h?n.createElement("span",{className:r.interSemiBold}):null,g?n.createElement("span",{className:r.interSemiBoldItalic}):null,p?n.createElement("span",{className:r.interBold}):null,m?n.createElement("span",{className:r.interBoldItalic}):null,f?n.createElement("span",{className:r.interExtraBold}):null,v?n.createElement("span",{className:r.interExtraBoldItalic}):null,b?n.createElement("span",{className:r.interBlack}):null,w?n.createElement("span",{className:r.interBlackItalic}):null)},1629:(e,t,i)=>{i.d(t,{z:()=>h});var n=i(92379),r=i(95295);const a=({children:e,style:t,dataGrammarlyPart:i="ui-kit-iframe",...a})=>{const[s,o]=n.useState(null),l=n.useCallback((e=>{var t,i;let n=null;"contentDocument"in e.target&&(n=null!==(i=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==i?i:null),o(n),n&&(n.style.margin="0",n.style.height="100vh",n.style.overflowY="hidden")}),[]);return n.createElement("iframe",{...a,style:{border:"none",...t},onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":i},s&&(0,r.createPortal)(e,s))};var s=i(41580),o=i(20182),l=i(18506),c=i(84857),d=i.n(c);const u=({placeholder:e,ariaLabel:t,onChange:i})=>{const[r,a]=n.useState("");return n.useEffect((()=>{i(r)}),[r]),n.createElement(n.Fragment,null,n.createElement(s.b,null,d().__css),n.createElement("div",{role:"textbox",className:d().textBox,contentEditable:!0,onInput:e=>{a(e.target.innerText)},"data-placeholder":e,"aria-placeholder":e,"aria-label":t}))},h=({placeholder:e,onChange:t,ariaLabel:i,iframeTitle:r,className:s})=>(0,l.OB)().experimentClient.isGateEnabled(o.K.CentralizeStopEventPropagation)?n.createElement("div",{className:s,style:{width:"100%",height:"128px",maxHeight:"inherit"}},n.createElement(u,{onChange:t,ariaLabel:i,placeholder:e})):n.createElement(a,{dataGrammarlyPart:"ui-kit-textbox",className:s,style:{width:"100%",height:"100%"},title:r},n.createElement(u,{onChange:t,ariaLabel:i,placeholder:e}))},60121:(e,t,i)=>{i.d(t,{y:()=>d});var n=i(92379);if(6168!=i.j)var r=i(64297);if(6168!=i.j)var a=i(48906);if(6168!=i.j)var s=i(2223);var o=i(65262);const l={blue:o.highlightColorBlue,green:o.highlightColorGreen,lightGreen:o.highlightColorLightGreen,gray:o.highlightColorGray,purple:o.highlightColorPurple,red:o.highlightColorRed,gold:o.highlightColorGold,plagiarism:o.highlightColorPlagiarism,weHbar:o.highligthColorWeHbar};function c(e,t){switch(e){case s.jk.background:return o.highlightBackgroundOnly;case s.jk.enclosing:return o.highlightEnclosing;case s.jk.underline:return o.highlightUnderlineOnly;case s.jk.underlineStart:return"solid"===t?o.highlightUnderlineOnly:o.highlightUnderlineStartOnly;case s.jk.dottedUnderlineAndBackground:return o.highlightDottedUnderlineAndBackground;case s.jk.underlineAndBackground:return;case s.jk.underlineAndPersistentBackground:return o.highlightUnderlineAndPersistentBackground;default:(0,r.L0)(e)}}const d=e=>(n.useEffect((()=>{var t;null===(t=e.onMount)||void 0===t||t.call(e,e.alertId)}),[]),n.createElement(n.Fragment,null,e.rects.map(((t,i)=>{var r,d,u;const h=e.rects.length>1?`${e.id}-${i}`:e.id;return n.createElement("div",{key:h,"data-key":h,"data-grammarly-part":"highlight","data-highlight-format":e.displayFormat,"data-highlight-color-name":s.hE.getColorName(e.color),style:{top:t.top,left:t.left,width:t.width,height:Math.max(0,t.height+Number(e.heightOffset)),...s.hE.isPreset(e.color)?(0,s.Y4)(null===(r=e.underlineStartParts)||void 0===r?void 0:r[i],e.color.color):void 0},...(0,a.Sh)(o.highlight,s.hE.isPreset(e.color)?l[e.color.color]:void 0,e.hovered?o.highlightHovered:void 0,e.disappear?o.highlightDisappear:void 0,e.needsAttention?o.highlightNeedsAttention:void 0,c(e.displayFormat,null===(u=null===(d=e.underlineStartParts)||void 0===d?void 0:d[i])||void 0===u?void 0:u.kind),e.liveliness===s.iY.static?o.highlightStatic:e.liveliness===s.iY.inert?o.highlightInert:void 0,e.theme?"dark"===e.theme?o.dark:o.light:null)},n.createElement("div",{className:o.highlightBackground,style:s.hE.isCustom(e.color)?{backgroundColor:e.color.color.background}:void 0}),n.createElement("div",{...(0,a.Sh)(o.highlightUnderline,e.isWEHighlight?o.highlightHbar:null,"regular"===e.underlineAnimationSpeed?o.highlightUnderlineAnimatedRegular:null,"slow"===e.underlineAnimationSpeed?o.highlightUnderlineAnimatedSlow:null),style:s.hE.isCustom(e.color)?{backgroundColor:e.color.color.underline}:void 0}))}))))},2223:(e,t,i)=>{i.d(t,{Y4:()=>p,al:()=>n,hE:()=>r,iY:()=>s,jk:()=>a,y$:()=>g});var n,r,a,s,o=i(92379);if(6168!=i.j)var l=i(98227);if(6168!=i.j)var c=i(88813);if(6168!=i.j)var d=i(64297);if(6168!=i.j)var u=i(67005);if(6168!=i.j)var h=i(60121);!function(e){e.blue="blue",e.green="green",e.lightGreen="lightGreen",e.gray="gray",e.purple="purple",e.red="red",e.gold="gold",e.plagiarism="plagiarism",e.weHbar="weHbar"}(n||(n={})),function(e){let t,i;function n(e){return"preset"===e.kind}!function(e){e.create=function(e){return{kind:"preset",color:e}}}(t=e.Preset||(e.Preset={})),function(e){e.create=function(e,t){return{kind:"custom",color:{background:e,underline:t}}}}(i=e.Custom||(e.Custom={})),e.isCustom=function(e){return"custom"===e.kind},e.isPreset=n,e.getColorName=function(e){return n(e)?e.color:"custom"}}(r||(r={})),function(e){e.underline="underline",e.underlineStart="underlineStart",e.background="background",e.underlineAndBackground="underlineAndBackground",e.underlineAndPersistentBackground="underlineAndPersistentBackground",e.dottedUnderlineAndBackground="dottedUnderlineAndBackground",e.enclosing="enclosing"}(a||(a={})),function(e){e.isInteractable=function(t){return t!==e.enclosing}}(a||(a={})),function(e){e.animated="animated",e.static="static",e.inert="inert"}(s||(s={}));const g=({heightOffset:e=0,hovered:t=!1,needsAttention:i=!1,underlineAnimationSpeed:n="regular",liveliness:r=s.animated,theme:l,...c})=>{var d;const[g,p]=o.useState(!1);(0,u.x)((()=>p(!0)),null!==(d=c.disappearOnHoverDelay)&&void 0!==d?d:0,[c.disappearOnHoverDelay,t,i,g],(()=>null!==c.disappearOnHoverDelay&&c.disappearOnHoverDelay>=0&&(t||i)&&!g)),o.useEffect((()=>{p(!1)}),[c.disappearOnHoverDelay]),o.useEffect((()=>{t||i||p(!1)}),[t,i]);const m=c.displayFormat===a.underlineStart?function(e,t=100){let i=0;const n=e.reduce(((e,t)=>e+t.width),0)-t;return e.map((e=>{if(i+e.width<n)return i+=e.width,{kind:"solid"};if(i<n){const r=(n-i)/e.width,a=(e.width-(n-i))/t;return i+=e.width,{kind:"gradient",colorStops:[{alpha:1,stop:0},{alpha:1,stop:r},{alpha:1-a,stop:1}]}}{const r=i-n,a=r/t,s=(r+e.width)/t;return i+=e.width,{kind:"gradient",colorStops:[{alpha:1-a,stop:0},{alpha:1-s,stop:1}]}}}))}(c.rects):null;return o.createElement(h.y,{heightOffset:e,hovered:t,needsAttention:i,underlineAnimationSpeed:n,liveliness:r,theme:l,disappear:g,underlineStartParts:m,...c})};function p(e,t){return void 0===e||"solid"===e.kind?{}:function(e,t){const{underline:i,underlineHovered:r}=function(e){switch(e){case n.blue:return{underline:"#99C2FF",underlineHovered:"#4A6EE0"};case n.red:return{underline:"#FF99AB",underlineHovered:"#EA1537"};case n.green:return{underline:"#AAF2E1",underlineHovered:"#15C39A"};case n.lightGreen:return{underline:"#41D9B5",underlineHovered:"#15C39A"};case n.purple:return{underline:"#D3A1F7",underlineHovered:"#8F4CBF"};case n.gold:return{underline:"#FFDF80",underlineHovered:c.Gold40};case n.gray:return{underline:"#E7E9F5",underlineHovered:"#6D758D"};case n.plagiarism:return{underline:"#09A4B280",underlineHovered:"#09A4B2"};case n.weHbar:return{underline:"#D7E8A9",underlineHovered:"#ADD04F"};default:(0,d.vE)(e)}}(t);return{"--underline-start-gradient":m(e,i),"--underline-start-gradient-hovered":m(e,r)}}(e,t)}function m(e,t){return`linear-gradient(to right, ${e.colorStops.map((({stop:e,alpha:i})=>`${l.ux.color(t).fade(i).toRGBA().toString()} ${100*e}%`)).join(", ")})`}},49969:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(92379),r=i(57065);const a=({color:e=r.Z.neutral50})=>n.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8.98288 15.5197L6.48108 15.5197L5.85461 13.1078L15.9148 7.0713L18.2119 15.5197L13.2741 15.5197M8.98288 15.5197L13.2741 15.5197M8.98288 15.5197L9.13596 16.1335C9.35814 17.0244 10.1584 17.6496 11.0765 17.6496L11.5272 17.6496C12.651 17.6496 13.494 16.6218 13.2741 15.5197V15.5197",stroke:e,strokeLinejoin:"round"}))},91194:(e,t,i)=>{i.d(t,{i:()=>l,z:()=>o});var n=i(92379),r=i(11573),a=i(53618),s=i.n(a);const o=n.forwardRef((function({onClick:e,variant:t,size:i,width:a,children:o,className:l,...c},d){return n.createElement("button",{onClick:e,className:(0,r.cs)(s().button,s()[`variant-${t||"primary"}`],s()[`size-${i||"medium"}`],s()[`width-${a||"fixed"}`],l),ref:d,...c},o)})),l=n.forwardRef((function({onClick:e,variant:t,size:i,width:a,children:o,className:l,...c},d){return n.createElement("a",{onClick:e,className:(0,r.cs)(s().button,s().linkButton,s()[`variant-${t||"primary"}`],s()[`size-${i||"medium"}`],s()[`width-${a||"fixed"}`],l),ref:d,tabIndex:0,role:"button",onKeyPress:e=>{if("Enter"===e.key||" "===e.key){e.preventDefault();e.target.click()}},...c},o)}))},43882:(e,t,i)=>{i.d(t,{Y:()=>c});var n=i(92379),r=i(38578),a=i(36296),s=i(48906),o=i(67247),l=i.n(o);const c=({onClick:e,cta:t="Get Pro",dataGrammarlyPart:i="unlock-premium-button",className:o})=>n.createElement(r.z,{variant:"pro",onClick:e,"data-grammarly-part":i,iconStart:a.R,...(0,s.Sh)(l().premiumButton,o),text:t})},48008:(e,t,i)=>{i.d(t,{Q:()=>o});var n=i(92379),r=i(23031),a=i(26590);const s=e=>{if(e.reason===a.rS.NO_FREE_TRIALS_LEFT){const t="No email reviews left this month";let i;if(e.meta.quotaResetDate){const t=Intl.DateTimeFormat([],{month:"short",day:"numeric"}).format(new Date(Date.parse(e.meta.quotaResetDate)));i=`You will get ${a.SR} free reviews again next month (${t}). You can also use paid expert writing help in Grammarly's web editor anytime.`}else i=`You will get ${a.SR} free reviews again next month. You can also use paid expert writing help in Grammarly's web editor anytime.`;return{title:t,message:i}}return e.reason===a.rS.NOT_ENOUGH_WORDS?{message:`Your email must be at least ${a.fy} words (currently ${e.meta.wordsCount}).`}:e.reason===a.rS.TOO_MANY_WORDS?{message:`Your email must be under ${a.Vw} words (currently ${e.meta.wordsCount}).`}:(e=>{switch(e){case a.rS.NOT_AVAILABLE:return{message:"Our experts are currently working on other text. Please try again later."};case a.rS.NOT_AVAILABLE_QUOTA_ERROR:return{title:"Something went wrong",message:"We couldn't determine how many requests you have left. Please try again later."};case a.rS.CONFLICTING_REQUEST:return{title:"Separate request in progress",message:"You can submit this request once the experts are finished with the one you already submitted."};case a.rS.CHECKING_INITIAL_AVAILABILITY:return{message:"Checking for available experts..."};case a.rS.UNSUPPORTED_LANGUAGE:return{message:"Our writing experts can only help with emails written in English."};default:(0,r.vE)(e)}})(e.reason)},o=({info:e,includeTitle:t})=>{const i=s(e);return n.createElement(n.Fragment,null,t?n.createElement(n.Fragment,null,i.title?n.createElement("b",null,i.title):n.createElement("b",null,"Get expert writing help"),n.createElement("br",null)):null,i.message)};o.defaultProps={includeTitle:!1}},26995:(e,t,i)=>{i.d(t,{q:()=>_});var n=i(92379),r=i(48906),a=i(1629),s=i(91194),o=i(6066),l=i(31429);const c=e=>e.domain?n.createElement(n.Fragment,null,e.withHelpText&&n.createElement("div",{className:l.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),n.createElement(o.J,{checked:e.checked,labelId:"feedback-form-share-domain-checkbox",onChange:e.onChange,className:l.feedbackFormShareDomainCheckbox},"Include the domain ",n.createElement("b",null,e.domain)," with my feedback")):null;var d=i(55849);const u=e=>e.isEnabled?n.createElement(d.T,{type:"mini",size:26,className:l.feedbackFormLogoLine}):null,h=e=>{var t;if(!e.isEnabled)return null;const i=null!==(t=e.title)&&void 0!==t?t:n.createElement("span",null,"How do you like ",n.createElement("br",null)," Grammarly?");return n.createElement("h3",{...(0,r.Sh)(l.feedbackFormTitle,e.isCompact&&l.compact)},i)},g=e=>n.createElement(n.Fragment,null,n.createElement(o.J,{checked:e.checked,labelId:"feedback-form-share-user-text-checkbox",onChange:e.onChange,className:l.feedbackFormShareUserTextCheckbox},n.createElement("p",null,"Share my text with Grammarly")),n.createElement("p",{className:l.fedbackFormShareUserTextCheckboxLabel},"The text you checked with Grammarly will also be shared to improve the quality of our suggestions. Your feedback and text will not be associated with your account and will be deleted within 100 days. We will not use your feedback to train any models."));var p=i(5930);const m=({options:e,onChange:t=(()=>null),ariaLabel:i,className:a})=>{const s=[],[o,l]=n.useState(null);n.useEffect((()=>{var i;null!==o&&(null===(i=s[o])||void 0===i||i.focus()),t(null!==o?e[o].value:null)}),[o]);const c=null!==o?e[o]:null;return n.createElement("div",{"data-grammarly-part":"ui-kit-radio-group",className:a},n.createElement("div",{className:p.radioGroup,role:"radiogroup","aria-label":i,onKeyDown:t=>{if(" "!==t.key||c){if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault(),t.stopPropagation();l(((o||0)+1)%e.length)}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault(),t.stopPropagation();const i=(o||0)-1;l(i<0?e.length-1:i)}}else t.preventDefault(),t.stopPropagation(),l(0)}},e.map(((e,t)=>{const i=(null==c?void 0:c.value)===e.value,a=0===t;return n.createElement("div",{key:e.value,...(0,r.Sh)(p.radioGroupOption,i?p.radioGroupOptionSelected:null),role:"radio",tabIndex:i||a&&!c?0:-1,"aria-checked":i,onClick:e=>{e.preventDefault(),e.stopPropagation(),l(t)},ref:e=>s.push(e)},e.render())}))))};var f,v=i(23031),b=i(16607);!function(e){e.bad="bad",e.ok="ok",e.good="good"}(f||(f={}));const w=e=>{const t=[f.bad,f.ok,f.good];return e.isEnabled?n.createElement(n.Fragment,null,n.createElement(m,{ariaLabel:"Feedback Score",options:t.map((e=>({value:e,render:()=>n.createElement("div",{className:b.feedbackFormOption},n.createElement("div",{...(0,r.Sh)(b.feedbackFormOptionIcon,S(e))}),n.createElement("div",null,function(e){switch(e){case f.bad:return"I dislike it";case f.ok:return"It’s OK";case f.good:return"I like it";default:(0,v.vE)(e)}}(e)))}))),onChange:e.onChange,...(0,r.Sh)(l.feedbackFormScore,e.compactDisplay&&l.compact)}),!e.hideTextBoxTitle&&n.createElement("div",{className:l.feedbackFormTextBoxTitle},"Anything we can improve?")):null};function S(e){switch(e){case f.bad:return b.feedbackFormOptionIconDisheartening;case f.ok:return b.feedbackFormOptionIconNeutral;case f.good:return b.feedbackFormOptionIconSmiling;default:(0,v.vE)(e)}}const y=e=>{var t,i,o;const[d,p]=n.useState(null),[m,f]=n.useState(""),[v,b]=n.useState(null!==(t=e.domainSharedByDefault)&&void 0!==t&&t),[S,y]=n.useState(!1);return n.createElement("form",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,r.Sh)(l.feedbackFormContainer,"center"===e.align&&l.feedbackFormContainerAlignCenter,e.fixSubmitButtonOverflowBottomPadding&&l.feedbackFormContainerBottomPadding)},n.createElement("div",{className:l.feedbackFormFields},n.createElement(u,{isEnabled:!e.hideLogo}),n.createElement(h,{isEnabled:!e.hideTitle,title:e.title,isCompact:null!==(i=e.compactDisplay)&&void 0!==i&&i}),n.createElement(w,{isEnabled:e.withScore,compactDisplay:e.compactDisplay,hideTextBoxTitle:e.hideTextBoxTitle,onChange:p}),n.createElement(a.z,{onChange:f,placeholder:null!==(o=e.placeholderText)&&void 0!==o?o:"Your thoughts here",ariaLabel:"Feedback Text",iframeTitle:"Feedback text field",...(0,r.Sh)(l.feedbackFormTextBox,e.compactDisplay&&l.compact)}),n.createElement(c,{domain:e.domain,checked:e.domainSharedByDefault,withHelpText:!e.hideDomainHelpText,onChange:b}),e.showShareTextCheckbox&&n.createElement(g,{checked:S,onChange:y})),n.createElement(s.z,{type:"submit",onClick:t=>{t.preventDefault();const i=v?e.domain:void 0;e.withScore&&d?e.onSubmit({score:d,text:m,domain:i,shareUserText:S}):!e.withScore&&m&&e.onSubmit({text:m,domain:i,shareUserText:S})},disabled:e.withScore?!d:!m,width:"full","data-grammarly-part":"surveys-feedback-form-submit-button"},"Submit"))},k=e=>n.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,r.Sh)(l.feedbackFormContainer,l.feedbackFormContainerAlignCenter,e.fixSubmitButtonOverflowBottomPadding&&l.feedbackFormContainerBottomPadding)},n.createElement("div",{className:l.feedbackFormSuccessMessageTextContainer},n.createElement("div",{className:l.feedbackFormSuccessMessageIcon}),n.createElement("div",{className:l.feedbackFormSuccessMessageTitle},"Thank you!"),n.createElement("div",{className:l.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),n.createElement(s.z,{onClick:e.onClose,width:"full"},"Done"));var E=i(11271);const _=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:i=!1,showPostSubmitScreen:r=!0,...a})=>{const[s,o]=n.useState(!1),l=s&&r;return n.createElement("div",{style:a.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback","aria-live":"polite"},l?n.createElement(k,{fixSubmitButtonOverflowBottomPadding:i,onClose:a.onClose}):n.createElement(y,{...a,hideLogo:e,align:t,fixSubmitButtonOverflowBottomPadding:i,onSubmit:e=>{a.withScore?((0,E.n8)(e),a.onSubmit(e)):((0,E.TY)(e),a.onSubmit(e)),o(!0)}}))}},11271:(e,t,i)=>{function n(e){return"score"in e}function r(e){if(!n(e))throw new Error("Received unexpected feedback form data without score")}function a(e){if(n(e))throw new Error("Received unexpected feedback form data with score")}i.d(t,{TY:()=>a,dK:()=>n,n8:()=>r})},67005:(e,t,i)=>{i.d(t,{x:()=>r});var n=i(92379);function r(e,t,i,r=(()=>!0)){n.useEffect((()=>{let i=null;return r()&&(null!==i&&self.clearTimeout(i),i=self.setTimeout(e,t)),()=>{null!==i&&self.clearTimeout(i),i=null}}),i)}},35076:(e,t,i)=>{i.d(t,{C7:()=>p,jJ:()=>g,kl:()=>o});var n=i(20182),r=i(23031),a=i(18506),s=i(7638);function o(e,t,i,n,r,a,s,o,d,u,h,g){const p={top:i.top+o.top,left:i.left+o.left,width:i.width-o.left-o.right,height:i.height-o.top-o.bottom},b=function(e,t,i,n,r,a,s,o,l){const c=v(e,t,i,n,l,a,s);return[{...c,flippedHorizontal:!1,flippedVertical:!1}].concat((Array.isArray(r)?r:[r]).map((r=>({...v(e,f(t,r),f(i,r),m(n,c.overlap,r,a,s,o),l,a,s),flippedHorizontal:"flip"===r.horizontal,flippedVertical:"flip"===r.vertical}))))}({top:n.top-s.top,left:n.left-s.left,width:n.width+s.left+s.right,height:n.height+s.top+s.bottom},r,a,d,h,e,t,g,p),w=b.reduce(((e,t)=>e.overlap.vertical<=t.overlap.vertical?e:t)),S=b.reduce(((e,t)=>e.overlap.horizontal<=t.overlap.horizontal?e:t)),y=c({top:w.position.top,left:S.position.left,flippedHorizontal:S.flippedHorizontal,flippedVertical:w.flippedVertical},u,i,e,t);return l(y,e,t,p)}const l=(e,t,i,n)=>{const{top:r,left:a}=(0,s.m)({top:e.top,left:e.left,width:t,height:i},n);return{...e,top:r,left:a}},c=(e,t,i,n,r)=>{if(void 0===t)return e;const a=m(t,d(u({top:e.top+t.vertical,left:e.left+t.horizontal,width:n,height:r},i)),{horizontal:"translate",vertical:"translate"},n,r,!1);return{...e,top:e.top+a.vertical,left:e.left+a.horizontal}};function d(e){const t=Math.abs(Math.min(e.left,0)),i=Math.abs(Math.min(e.right,0)),n=Math.abs(Math.min(e.top,0)),r=Math.abs(Math.min(e.bottom,0));return{horizontal:t+i,vertical:n+r,top:n,bottom:r,left:t,right:i}}function u(e,t){return{top:e.top-t.top,bottom:t.top+t.height-(e.top+e.height),left:e.left-t.left,right:t.left+t.width-(e.left+e.width)}}const h=(0,r.Vo)((()=>(0,a.OB)().experimentClient.isGateEnabled(n.K.UseBodyToGetViewportDimentions)));function g(e=document){return!e.doctype&&h.get()?{top:e.body.scrollTop,left:e.body.scrollLeft,height:e.body.clientHeight,width:e.body.clientWidth}:{top:e.documentElement.scrollTop,left:e.documentElement.scrollLeft,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function p(e=document){return{top:0,left:0,height:!e.doctype&&h.get()?e.body.clientHeight:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function m(e,t,i,n,r,a){const s=t.left&&t.right?0:0!==t.left?Math.min(t.left,a?n:1/0):-Math.min(t.right,a?n:1/0),o=t.top&&t.bottom?0:0!==t.top?Math.min(t.top,a?r:1/0):-Math.min(t.bottom,a?r:1/0);return{horizontal:"translate"===i.horizontal?e.horizontal+s:-e.horizontal,vertical:"translate"===i.vertical?e.vertical+o:-e.vertical}}function f(e,t){return{vertical:"translate"===t.vertical?e.vertical:"top"===e.vertical?"bottom":"top",horizontal:"translate"===t.horizontal?e.horizontal:"left"===e.horizontal?"right":"left"}}function v(e,t,i,n,r,a,s){const{top:o,left:l}=function(e,t,i,n,r){return{top:e.top+r.vertical+("bottom"===i.vertical?e.height:"center"===i.vertical?e.height/2:0)-("bottom"===n.vertical?t.height:"center"===n.vertical?t.height/2:0),left:e.left+r.horizontal+("right"===i.horizontal?e.width:"center"===i.horizontal?e.width/2:0)-("right"===n.horizontal?t.width:"center"===n.horizontal?t.width/2:0)}}(e,{width:a,height:s},t,i,n);return{position:{top:o,left:l},overlap:d(u({top:o,left:l,width:a,height:s},r))}}},5681:(e,t,i)=>{i.d(t,{x:()=>n});var n,r=i(49601),a=i(8867),s=i(32734),o=i(37108),l=i(8065),c=i(59179);!function(e){function t(e,t){return i(e,t).pipe((0,s.B)(),(0,o.Q)(r.E))}function i(e,t){return new a.y((i=>{const n=new MutationObserver((e=>i.next(e)));return n.observe(e,t),()=>n.disconnect()}))}e.create=t,e.createUnsafe=i,e.createFlattenHot=function(e,t){return i(e,t).pipe((0,l.b)((e=>e)),(0,s.B)())},e.observeAttribute=function(e,i){return t(e,{attributes:!0,attributeFilter:[i],subtree:!1,childList:!1}).pipe((0,c.U)((t=>e.getAttribute(i))))},e.observeStyle=function(e){return t(e,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe((0,c.U)((t=>e.style)))},e.observeChildList=function(e){return t(e,{attributes:!1,subtree:!1,childList:!0}).pipe((0,c.U)((t=>e.childNodes)))}}(n||(n={}))},56546:(e,t,i)=>{i.d(t,{N:()=>n});var n,r=i(49601),a=i(8867),s=i(32734),o=i(37108),l=i(17705),c=i(954),d=i(20545),u=i(5681);!function(e){function t(e){return function(e){return new a.y((t=>{const n=i((()=>t.next(void 0)));return e.forEach((e=>n.observe(e))),()=>n.disconnect()}))}(e).pipe((0,s.B)(),(0,o.Q)(r.E))}function i(e){return new n(e)}e.observeSizeChanges=function(e){return t(e)},e.getResizeObserver=i;class n{constructor(e){this._af=null,this._callbackWasInvoked=!1;const t=()=>{this._callbackWasInvoked?(null!==this._af&&cancelAnimationFrame(this._af),this._af=requestAnimationFrame((()=>{e()}))):(e(),this._callbackWasInvoked=!0)};try{this._resizeObserver=new ResizeObserver(t)}catch(e){this._resizeObserver=new h(t)}}observe(e){this._clearAnimationFrame(),this._resizeObserver.observe(e)}unobserve(e){this._resizeObserver.unobserve(e),this._clearAnimationFrame()}disconnect(){this._resizeObserver.disconnect(),this._clearAnimationFrame()}_clearAnimationFrame(){this._af&&(cancelAnimationFrame(this._af),this._af=null),this._callbackWasInvoked=!1}}class h{constructor(e){this._callback=e,this._sub=null}observe(e){this._sub=u.x.create(e,{attributes:!0,childList:!0,subtree:!0}).pipe((0,l.T)(d.S.hz4),(0,c.O)(null)).subscribe((()=>{this._callback()}))}unobserve(){this._sub&&(this._sub.unsubscribe(),this._sub=null)}disconnect(){this.unobserve()}}}(n||(n={}))},42008:(e,t,i)=>{i.d(t,{Wb:()=>o,mp:()=>l,rX:()=>c});var n=i(39953),r=i(22561),a=i(12518),s=i(57283);function o(e){return{x:e.left,y:e.top,top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.top+e.height,right:e.left+e.width,toJSON:()=>e}}function l(e){return(0,n.zG)(e(),a.g_((e=>e),(e=>e)))}function c(e,t){const i=r.bv.is(e)?e.meta:{};return s.NC.expandIfNeeded({start:e.start,end:e.end,...i},t)}},54760:(e,t,i)=>{i.d(t,{Fd:()=>m,sO:()=>r});var n,r,a=i(51505),s=i(39953),o=i(84714),l=i(22561),c=i(90742),d=i(44970),u=i(12518),h=i(27853),g=i(52351),p=i(42008);class m{constructor(e,t,i,n,r){this._highlightId=e,this._markChange=t,this._highlights=i,this._getBaseRect=n,this._getBaseScroll=r}get id(){return this._markChange.id}get highlightId(){return this._highlightId}get range(){const e=this._markChange.meta.range();return l.SV.isEmpty(e)?a.t$(e):a.F2(e)}getRect(){const e=this._highlights.getGeometryByHighlightId(this._highlightId);if(!e||!e.rects||0===e.rects.length)return u.t$(new Error);const t=e.rects,i=this._getBaseRect(),n=t[0],r=1===t.length?n:t[t.length-1],a=this._getBaseScroll(),s=e=>(0,p.Wb)(h.UL.setPosition(g.Ir.fromOffsetPoint(e,i,a),e));return u.F2({rootClientRect:i,clientRects:[s(n),s(r)]})}fromMarkEvent(e){return(0,o.of)(u.t$(new Error("not implemented")))}static getMarkRect(e){return(0,s.zG)(e.getRect(),u.UI(c.n.relativeToViewport),u.g_((()=>u.t$(new Error("Mark is collapsed"))),(e=>u.F2({top:Math.round(e.top),bottom:Math.round(e.bottom),left:Math.round(e.left),right:Math.round(e.right)}))))}}!function(e){let t;!function(e){let t;!function(e){e.full="full",e.partial="partial"}(t=e.RemoveType||(e.RemoveType={})),e.getCreateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.create,meta:e})},e.getUpdateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.update,meta:e})},e.getRemoveAction=function(e,i=t.full){return t=>({id:t,action:d.v.Change.ActionType.remove,meta:{range:e.range,removeType:i}})}}(t=e.Change||(e.Change={}))}(n||(n={})),function(e){let t;!function(e){let t;!function(e){let t,i;!function(e){e.visible="visible",e.highlighted="highlighted"}(t=e.Type||(e.Type={})),function(e){e.api="api",e.sidebar="sidebar",e.text="text"}(i=e.Source||(e.Source={}))}(t=e.VisualState||(e.VisualState={})),e.getCreateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.create,meta:e})},e.getUpdateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.update,meta:e})},e.getRemoveAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.remove,meta:e})}}(t=e.Change||(e.Change={}))}(r||(r={}))},18385:(e,t,i)=>{i.d(t,{a7:()=>de});var n=i(92379),r=i(85644),a=i(56845),s=i(19294),o=i(43150),l=i(45656),c=i(56488),d=i(38578),u=i(71668),h=i(5836),g=i(40902),p=i(82710),m=i(43148),f=i(42636),v=i(44692),b=i(91735),w=i(81501),S=i(23789),y=i(72860),k=i(90387),E=i(97884),_=i(38476),C=i(36986),A=i(9138),I=i(1211),x=i(11573),T=i(48682),R=i(88193),M=i(22180),P=i(20182),F=i(9175),D=i(7221),L=i(56209),H=i(61756),U=i(81356),B=i(53533),O=i(95165),G=i(7480),N=i(18506),V=i(86465),z=i(8059),W=i(71221),j=i(93463),q=i(72994),Y=i(64150),$=i(87439),K=i(91724),X=i(76043),J=i(86818),Z=i(45982);const Q=()=>n.createElement("div",{className:J.separator}),ee=e=>{const t={source:"authHook",slot:y.G0.Toolbar,name:y.Vi.SessionTimeout,lastKnownUserType:(0,S.qf)(e.authUserDetails),experience:y.VP.SignIn};return n.createElement("div",{className:Z.sessionTimeoutWrapper},n.createElement("div",{className:Z.sessionTimeoutDiv},n.createElement("div",{className:Z.sessionTimeoutTextAndIcon},n.createElement("div",null,n.createElement(O.K,{className:Z.sessionTimeoutPopupIcon,width:"32",height:"32"})),n.createElement("div",{className:Z.sesstionTimeoutText},n.createElement("span",null,"Company policy expires your session in 1 hour.",n.createElement(r.i,{href:"#",onClick:()=>{const i={utmCampaign:"toolbarMenu",utmSource:"signinHook"};(0,F.B)((0,N.OB)().experimentClient)?(0,N.OB)().bgRpc.api.launchAuthFlow(!1,{...(0,w.xW)(t),...(0,H.OC)((0,H.g7)(i))}):e.openUrl((0,H.s7)(t,i,!0))}},n.createElement("span",{className:Z.signinLink},"Sign in")),"to avoid interruption.")))),n.createElement(Q,null))},te=e=>n.createElement(a.r,{label:e.isAutoApplySupported?"Correct text automatically":"Correct spelling automatically",isSelected:e.enabled,onChange:e.toggle,"data-grammarly-part":"settings-toggle-autocorrect"}),ie=e=>n.createElement(a.r,{isSelected:!e.enabled,label:"Check text with browser extension",helperMessage:e.enabled?"Grammarly's browser extension was deactivated since you're using Grammarly's desktop application":void 0,onChange:t=>{e.toggle(!t)},"data-grammarly-part":"disableDesktopIntegrationToggle"}),ne=e=>n.createElement(W.Z,{label:"Show phrasal predictions",isSelected:e.enabled,onChange:e.toggle}),re=e=>n.createElement(a.r,{label:"Show emoji for detected tones",isSelected:e.enabled,onChange:e.toggle,"data-grammarly-part":"settings-toggle-show-emoji-for-detected-tones"}),ae=e=>n.createElement(a.r,{label:"Show Knowledge Share",isSelected:e.enabled,onChange:e.toggle}),se=e=>n.createElement(s.k,{direction:"column",gap:2,className:J.section},n.createElement(o.X,{as:"h3",className:J.heading,color:"base-default"},n.createElement(s.k,{gap:2,justify:"start",align:"center"},"Accessibility")),n.createElement(a.r,{label:"Turn on enhanced screen reader support",isSelected:e.enabled,onChange:e.toggle})),oe=e=>n.createElement(j.Z,{label:`Show “Get citation” button on ${e.domain}`,isSelected:e.enabled,onChange:e.toggle},"Show “Get citation” button on"," ",n.createElement(l.x,{as:"span",variant:"text-small",weight:"semibold",color:"base-default",style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:250}},e.domain)),le=e=>n.createElement(a.r,{label:e.label,isSelected:e.enabled,isDisabled:e.disabled,onChange:e.toggle,helperMessage:e.helperMessage}),ce=({showReportBugButton:e,...t})=>{var i,r,v;const b=t.advancedHistoryLoggerEnabledUntil?Math.ceil((t.advancedHistoryLoggerEnabledUntil-Date.now())/6e4):0;return n.createElement(c.x,{"data-grammarly-part":"debugMenu"},n.createElement(Q,null),n.createElement(c.x,{className:J.debugMenu},n.createElement(s.k,{direction:"column",gap:3},n.createElement(o.X,{as:"h3",className:J.heading},n.createElement(l.x,{as:"span",color:"base-default"},"Debug Menu"),t.showHideButton&&n.createElement(d.z,{variant:"ghost",text:"Hide","data-grammarly-part":"debugMenuHideBtn",onClick:()=>{(0,N.OB)().bgRpc.api.toggleDebugMenu(!1)}})),n.createElement(a.r,{label:"Logging",onChange:e=>{e?(0,N.OB)().bgRpc.api.enableHistoryLoggerUntil(-1):(0,N.OB)().bgRpc.api.disableHistoryLogger()},"data-grammarly-part":"debugMenuLoggingToggle",isSelected:t.isEnabled}),n.createElement(Q,null),n.createElement(j.Z,{label:`Advanced Logging (${b} minutes left)`,isSelected:t.isAdvancedEnabled,isDisabled:!t.isEnabled,onChange:()=>{t.isAdvancedEnabled?(0,N.OB)().bgRpc.api.disableAdvancedHistoryLogger():(0,N.OB)().bgRpc.api.enableAdvancedHistoryLoggerUntil(Date.now()+36e5)}},"Advanced Logging"," ",t.isAdvancedEnabled&&null!==t.advancedHistoryLoggerEnabledUntil&&t.advancedHistoryLoggerEnabledUntil>0&&n.createElement(u.V,{label:`${b} mins left`,inline:!0})),n.createElement(Q,null)),n.createElement(o.X,{as:"h4",className:J.heading},n.createElement(d.z,{variant:"ghost",text:"Download Logs",className:J.downloadBtn,isDisabled:!t.isEnabled,onClick:t.downloadDebugReports,"data-grammarly-part":"debugMenuDownloadLogBtn"}),!0===e.enabled&&n.createElement(h.r,{href:"#",underline:"hover",weight:"bold",className:J.downloadBtn,"data-grammarly-part":"debugMenuReportBugBtn",onClick:()=>{e.onClick()}},n.createElement(s.k,null,n.createElement(l.x,{as:"span",variant:"text-small"},"Report a bug"),n.createElement(g.J,{icon:p.n,accessibilityLabel:"",size:"small",variant:"inherit"})))),t.showDebugPage&&n.createElement(n.Fragment,null,n.createElement(Q,null),n.createElement(o.X,{as:"h4",className:J.heading},n.createElement(h.r,{href:"#",underline:"hover",weight:"bold",className:J.downloadBtn,"data-grammarly-part":"debugMenuDebugPageBtn",onClick:t.openDebugPage},n.createElement(s.k,null,n.createElement(l.x,{as:"span",variant:"text-small"},"View debug page"),n.createElement(g.J,{icon:p.n,accessibilityLabel:"",size:"small",variant:"inherit"}))))),null!=t.gOSDebugSettings?n.createElement(n.Fragment,null,n.createElement(Q,null),n.createElement(c.x,{className:J.gOSMenu},n.createElement(s.k,{direction:"column",gap:3},n.createElement(o.X,{as:"h3",className:J.heading,color:"base-default"},"gOS Developer Settings"),n.createElement(a.r,{label:"Debugger",isSelected:t.gOSDebugSettings.debuggerEnabled,onChange:null===(i=t.gOSDebugSettings)||void 0===i?void 0:i.toggleDebugger,"data-grammarly-part":"gOSDebuggerToggle"}),n.createElement(Q,null)),n.createElement(s.k,{className:J.menuItem,justify:"space-between"},n.createElement(l.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default",marginTop:2},"Applet Channel"),n.createElement("div",{style:{width:"106px"}},n.createElement(m.P,{id:"gos-applet-channel",value:null!==(r=t.gOSDebugSettings.appletChannel)&&void 0!==r?r:"stable",onChange:e=>{var i;null===(i=t.gOSDebugSettings)||void 0===i||i.setAppletChannel(e)},label:"Applet Channel",labelDisplay:"hidden"},n.createElement(m.P.Option,{value:"dev",label:"dev"}),n.createElement(m.P.Option,{value:"preview",label:"preview"}),n.createElement(m.P.Option,{value:"stable",label:"stable"}),n.createElement(m.P.Option,{value:"qa",label:"qa"})))),n.createElement(Q,null),n.createElement(s.k,{className:J.menuItem,justify:"space-between"},n.createElement(l.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default",marginTop:2},"Assistant URL"),n.createElement("div",{style:{width:"190px"}},n.createElement(f.n,{labelDisplay:"hidden",label:"Assistant URL",id:"gos-assistant-applet-url",type:"url",placeholder:"e.g. http://localhost:3000/",value:null!==(v=t.gOSDebugSettings.assistantAppletUrl)&&void 0!==v?v:"",onChange:e=>{var i;null===(i=t.gOSDebugSettings)||void 0===i||i.setAssistantAppletUrl(e)}}))))):null))},de=e=>{var t,i,r,a,d,u,m,f,w,y,F,H,O,W,j,de;const{actions:ue,activeTab:he,config:ge,settings:pe,dapi:me,user:fe,sessionTimeoutValue:ve,siteCategory:be,placement:we,dynamicConfig:Se,enableRenderingHack:ye=!1,showCitationBuilderToggle:ke=!0,citationBuilderSessionId:Ee,isCitationBuilderManualInvocationEnabled:_e=!1,isKnowledgeHubSupported:Ce=!1,isTouchTypistSupported:Ae=!1,isIndianEnglishDialectSupported:Ie=!1,isCheetahSupported:xe=!1,showSerengetiFeatureToggle:Te=!1,isReportBugFeatureAllowed:Re,isAutoApplySupported:Me=!1,className:Pe,downloadDebugReports:Fe,isHumanWritingReportSupported:De=!1}=e,Le=(0,b.b)(),He=(0,S.no)(pe),Ue=(0,N.OB)().experimentClient;ye&&n.useEffect((()=>{(0,D.CB)()&&(self.screenLeft<0||self.screenTop<0||self.screenLeft>self.screen.width||self.screenTop>self.screen.height)&&chrome.runtime.getPlatformInfo((e=>{if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n            @keyframes redraw {\n              0% {\n                opacity: 1;\n              }\n              100% {\n                opacity: .99;\n              }\n            }\n          "),e.insertRule("\n            html {\n              animation: redraw 1s linear infinite;\n            }\n          "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))}),[]);const{anonymous:Be}=fe,Oe=(U.n.isGrammarlyEmployee(fe)||U.n.isTestUser(fe))&&Re,Ge=(0,D.i7)()&&U.n.isGrammarlyEmployee(fe),Ne=U.n.isGrammarlyEmployee(fe)&&(0,C.V)(Ue),Ve=Ue.isGateEnabled(P.K.KeyboardShortcut),{dialectSettings:ze}=pe,We=(null==ze?void 0:ze.dialect)||me.dialectStrong,je=["british","american","australian","canadian",...Ie?["indian"]:[]],qe=e.siteSwitcherChecked||{checked:!!pe.enabled,update:t=>{const{siteCategory:i}=e;ue.toggleSite(t,ge.domain),z.J.checkingToggleClick("toolbar",i,t?"on":"off",ge.domain),(0,L.Tb)().toggleExtension(t,"toolbar",(0,B.Cg)(ge.domain))}},Ye=n.useCallback((e=>{const t=he&&new URL(he.url).pathname;ue.toggleCitationBuilderForDomain({domain:ge.domain,enabled:e,pathName:t,inAllowList:he&&(0,E.eC)(new URL(he.url),Se)}),e||z.J.citePopupButtonDisable(ge.domain,"permanent",Ee||"","toolbar",_e&&!0===(0,E.gO)(ge.domain,pe))}),[null==he?void 0:he.url,ge.domain,Ee]);return n.createElement(c.x,{className:(0,x.cs)(J.settingsContent,Pe),"data-grammarly-part":"settings"},(()=>{const{customSessionTimeoutInfo:e}=fe;return!!(0,V.Xv)(e,Ue)&&(0,V.dU)(ve)})()&&n.createElement(ee,{openUrl:e.openUrl,authUserDetails:He}),n.createElement(_.g,{url:null==he?void 0:he.url,domain:ge.domain}),n.createElement(c.x,{className:Z.popupSettings},n.createElement(s.k,{direction:"column",gap:3,marginBottom:pe.isDebugMenuVisible||Oe?3:void 0},n.createElement(o.X,{as:"h4",variant:"heading-large",className:J.heading},n.createElement(l.x,{as:"span",color:"base-default"},"Quick Settings"),n.createElement(h.r,{href:"#",underline:"hover",weight:"bold",onClick:()=>{e.openUrl((0,D.Um)().allSettings),z.J.allSettingsButtonClick(we)}},n.createElement(s.k,{className:J.allSettings},n.createElement(l.x,{as:"span",variant:"text-small"},"All Settings"),n.createElement(g.J,{icon:p.n,accessibilityLabel:"",size:"small",variant:"inherit"})))),R.q.showSettingPopupToggle(me,pe,Se,null==he?void 0:he.url)&&n.createElement(n.Fragment,null,n.createElement(ie,{toggle:e=>{ue.setDesktopIntegration(e),z.J.desktopIntegrationToggleClick(e?"on":"off")},enabled:pe.isDesktopIntegrationEnabled}),n.createElement(Q,null)),n.createElement(X.w,{domain:ge.domain,enabledInConfig:null!==(t=ge.enabled)&&void 0!==t&&t,siteSwitcherChecked:qe,favicon:null==he?void 0:he.favIconUrl,siteCategory:be}),Ae&&n.createElement(n.Fragment,null,n.createElement(Q,null),n.createElement(I.F,{userId:fe.id,settings:pe.touchTypistSettings,isMac:(0,N.nD)(),actions:ue,gnar:z.J})),n.createElement(Q,null),Ve&&n.createElement(n.Fragment,null,n.createElement(K.Z,{isMac:(0,N.nD)(),showVBarsShortcut:(0,D.i7)(),currentOpenShortcut:null!==(r=null===(i=pe.keyboardShortcuts)||void 0===i?void 0:i.openAssistant)&&void 0!==r?r:(0,M.e)("openAssistant"),currentCloseShortcut:null!==(d=null===(a=pe.keyboardShortcuts)||void 0===a?void 0:a.closeAssistant)&&void 0!==d?d:(0,M.e)("closeAssistant"),currentVBarsShortcut:null!==(m=null===(u=pe.keyboardShortcuts)||void 0===u?void 0:u.openVBar)&&void 0!==m?m:(0,M.e)("openVBar"),onSetShortcut:(e,t)=>{ue.setKeyboardShortcut(e,t)}}),n.createElement(Q,null)),xe&&n.createElement(n.Fragment,null,n.createElement(q.Z,{openCheetahSettings:()=>e.openUrl((0,D.Um)().featuresSettings),cheetahSettings:pe.cheetah,cheetahToggleInlineQuickReply:ue.cheetahToggleInlineQuickReply,cheetahToggleInlineRewrite:ue.cheetahToggleInlineRewrite,showSerengetiFeatureToggle:Te,showDockedAssistantToggle:Le,dockedAssistantToggle:ue.toggleAlwaysAvailableAssistant,dockedAssistantEnabled:!!(null===(f=pe.alwaysAvailableAssistantSettings)||void 0===f?void 0:f.enabled),serengetiEnabled:"disabled"!==me.serengetiState,serengetiToggle:e=>{ue.setSerengetiState(!0===e?"enabled":"disabled")}}),n.createElement(Q,null)),ke&&(0,E.r4)(ge.domain,Se,_e)&&n.createElement(n.Fragment,null,n.createElement(oe,{enabled:(0,E.Td)(ge.domain,Se,_e,pe),domain:ge.domain,toggle:Ye}),n.createElement(Q,null)),Ce&&n.createElement(n.Fragment,null,n.createElement(ae,{enabled:null===(y=null===(w=pe.knowledgeHubSettings)||void 0===w?void 0:w.enabled)||void 0===y||y,toggle:e=>{ue.toggleKnowledgeHub(e),z.J.knowledgeHubFeatureToggleClick("popup",A.JJ.fromDomain(ge.domain),e?A.L5.on:A.L5.off),(0,L.Tb)().knowledgeHub.featureToggleClick(A.JJ.fromDomain(ge.domain),e?A.L5.on:A.L5.off)}}),n.createElement(Q,null)),n.createElement(Y.Z,{disabled:Be,enabledDefs:pe.enabledDefs,toggleDefs:ue.toggleDefs}),(0,k.c)()&&n.createElement(n.Fragment,null,n.createElement(Q,null),n.createElement(te,{enabled:pe.autocorrectEnabled||!1,isAutoApplySupported:Me,toggle:e=>{ue.toggleAutocorrect(e);const t=e?"on":"off";z.J.autocorrectToggleClick("popup",t),(0,L.Tb)().autoFix.featureToggleClick(t,"popup")}})),(0,T.f)()&&n.createElement(n.Fragment,null,n.createElement(Q,null),n.createElement(ne,{enabled:pe.autocompleteEnabled||!1,toggle:e=>{ue.toggleAutocomplete(e),z.J.autocompleteFeatureToggleClick("popup",e?"on":"off")}})),(!xe||!1===(null===(H=null===(F=pe.cheetah)||void 0===F?void 0:F.status)||void 0===H?void 0:H.cheetahEnabled))&&n.createElement(n.Fragment,null,n.createElement(Q,null),n.createElement(re,{enabled:"hide"!==me.emogenieEmojiState,toggle:e=>{ue.setEmogenieEmojiState(!0===e?"show":"hide"),z.J.settingsShowEmojiForDetectedTonesToggleClick(ge.domain,!0===e?"on":"off")}})),De&&n.createElement(n.Fragment,null,n.createElement(Q,null),n.createElement(le,{label:"Grammarly Authorship",enabled:"enabled"===(null===(O=pe.humanWritingReport)||void 0===O?void 0:O.kind),disabled:!1,toggle:e=>ue.hwrSetEnabled(e),helperMessage:"Prove where your words come from by recording what you type and which sources you use. You choose how to share your information."})),n.createElement(Q,null),n.createElement($.m,{dialects:je,changeStrongDialect:ue.changeStrongDialect,dialectStrong:We,dialectWeak:me.dialectWeak,dropdownOnTop:!0,disabled:Be,lock:{isLocked:Boolean(null==ze?void 0:ze.dialectLockedByInstitution),message:"Locked by your organization"}})),n.createElement(Q,null),n.createElement(se,{enabled:pe.isEnhancedScreenReaderUXSupported,toggle:ue.toggleEnhancedScreenReaderUXSupport}),(pe.isDebugMenuVisible||Oe)&&n.createElement(ce,{isAdvancedEnabled:pe.advancedHistoryLoggerEnabled,isEnabled:pe.historyLoggerEnabled,advancedHistoryLoggerEnabledUntil:pe.advancedHistoryLoggerEnabledUntil,showDebugPage:Ge,openDebugPage:e.openDebugPage,showReportBugButton:Oe?{enabled:!0,onClick:()=>{e.openReportBugForm(G.ZD({domain:ge.domain,userType:G.Ng(fe),version:(0,D.bo)(),systemInfo:v.Rd().systemInfo}))}}:{enabled:!1},showHideButton:!Oe,downloadDebugReports:Fe,gOSDebugSettings:Ne?{debuggerEnabled:null!==(W=pe.gOSDebuggerEnabled)&&void 0!==W&&W,toggleDebugger:ue.toggleGOSDebugger,appletChannel:null!==(j=pe.gOSAppletChannel)&&void 0!==j?j:null,setAppletChannel:ue.setGOSAppletChannel,assistantAppletUrl:null!==(de=pe.gOSAssistantAppletUrl)&&void 0!==de?de:null,setAssistantAppletUrl:ue.setGOSAssistantAppletUrl}:void 0})))}},77415:(e,t,i)=>{i.d(t,{R:()=>d});var n=i(92379),r=i(79813),a=i(79729),s=i(22408),o=i(81345),l=i(44995),c=i(47159);const d=({lock:e={message:"",isLocked:!1},dialect:t})=>n.createElement("div",{className:c.label},e.isLocked&&n.createElement(s.u,{message:e.message},n.createElement("div",{className:c.lockIconWrapper},n.createElement(a.N,null))),n.createElement(r.zx.White,{name:"dialect.box",style:{padding:"0"},disabled:e.isLocked},n.createElement("div",{className:`${c.selected} ${e.isLocked?c.disabled:""}`},n.createElement(o.G,{dialect:t,className:c.option}),n.createElement(l.pL,null))))},81345:(e,t,i)=>{i.d(t,{G:()=>l});var n=i(92379),r=i(29227),a=i(44995),s=i(86579);const o={american:n.createElement(a.UE,null),australian:n.createElement(a.aE,null),british:n.createElement(a.M8,null),canadian:n.createElement(a._P,null),indian:n.createElement(a.kj,null)},l=({dialect:e,className:t})=>n.createElement(n.Fragment,null,o[e],n.createElement("span",{"data-test-attr":`dialect_${e}`,className:`${s.option} ${null!=t?t:""}`},(0,r.kC)(e)+" English"))},51706:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(92379),r=i(85165),a=i(56488),s=i(19294),o=i(45656),l=i(38578),c=i(33267),d=i(42636),u=i(31409),h=i(72741),g=i(46803),p=i(43089),m=i(56890);const f=({label:e,isMac:t,currentShortcut:i,onEdit:r,shouldAutofocusEditButton:a})=>n.createElement(s.k,{justify:"space-between",align:"center",flex:"2",height:32,gap:1},n.createElement(o.x,{as:"p",variant:"text-small"},(0,m.$)(i,t)),n.createElement(s.k,null,n.createElement(l.z,{text:"Edit","aria-label":`Edit ${e} shortcut`,onClick:r,autoFocus:a,variant:"ghost"}))),v=({label:e,isMac:t,currentShortcut:i,onSetShortcut:r,ariaDescribedBy:a,onExit:o})=>{const[l,f]=n.useState(i),[v,b]=n.useState(!0),[w,S]=n.useState(void 0),y=`${e.replace(/ /g,"-").toLowerCase()}-shortcut-description-id`;return n.createElement(n.Fragment,null,n.createElement(c.u,{id:y},"Type a shortcut to configure the ",e," shortcut. Press tab for actions."),n.createElement(d.n,{label:`${e} shortcut`,value:(0,m.$)(l,t),labelDisplay:"hidden",errorMessage:w,onKeyDown:e=>{if(["Tab","Enter","CapsLock","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End","Insert","Delete","Backspace"].includes(e.code))b(!0);else{if(e.preventDefault(),p.uU.includes(e.key))if(v)f({key:void 0,modifiers:[e.key]});else{const t=l.modifiers;t.includes(e.key)||f({key:l.key,modifiers:[...t,e.key]})}else f(v?{key:e.code,modifiers:[]}:{key:e.code,modifiers:l.modifiers});b(!1)}},onKeyUp:()=>{b(!0)},autoFocus:!0,"aria-describedby":a?`${y} ${a}`:y}),n.createElement(s.k,{gap:1},n.createElement(u.h,{icon:h.L,accessibilityLabel:`Save ${(0,m.$)(l,t)} as ${e} shortcut`,tooltipContentProps:{children:"Save shortcut"},onClick:()=>{!function(e){return void 0!==e.key}(l)?S("Invalid shortcut. Must use at least one non-modifier key."):(r(l),o())}}),n.createElement(u.h,{icon:g.V,accessibilityLabel:"Cancel edits",onClick:o,variant:"tertiary"})))};const b=({label:e,isMac:t,currentShortcut:i,onSetShortcut:l,ariaDescribedBy:c})=>{const[d,u]=n.useState(!1),[h,g]=n.useState(!1);n.useEffect((()=>{d&&g(!0)}),[d]);const p=d?n.createElement(v,{label:e,isMac:t,currentShortcut:i,onSetShortcut:i=>{l(i),r.E.announce(`Shortcut to ${e} is ${(0,m.$)(i,t)}`)},onExit:()=>u(!1),ariaDescribedBy:c}):n.createElement(f,{label:e,isMac:t,currentShortcut:i,onEdit:()=>u(!0),shouldAutofocusEditButton:h});return n.createElement(a.x,{bgColor:d?"background-base-subdued":"background-base-default",marginLeft:-2,marginRight:-2,padding:2,borderRadius:3},n.createElement(s.k,{gap:1,direction:"column"},n.createElement(o.x,{as:"p",weight:"semibold",variant:"text-small"},e),n.createElement(s.k,{gap:3,flex:"2"},p)))}},71221:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(92379),r=i(71668),a=i(93463);const s=e=>n.createElement(r.V,{label:e.label||"Beta",variant:"addition",inline:!0}),o=({label:e,betaLabel:t,...i})=>n.createElement(a.Z,{label:`${e} (${t||"Beta"})`,...i},e," ",n.createElement(s,{label:t}))},93463:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(92379),r=i(19294),a=i(45656),s=i(56845);const o=({label:e,children:t,onChange:i,alignCenter:o,labelDisplay:l,...c})=>n.createElement(r.k,{justify:"space-between",align:o?"center":void 0},n.createElement(r.k,{direction:"column",gap:1},n.createElement(a.x,{as:"span",onClick:()=>{c.isDisabled||i(!c.isSelected)},variant:"text-small",weight:"medium",color:"base-default",style:{cursor:c.isDisabled?"not-allowed":"pointer"},"aria-hidden":!0},t),c.helperMessage&&n.createElement(a.x,{as:"p",variant:"text-xsmall",color:"base-subdued"},c.helperMessage)),n.createElement(s.r,{label:e,labelDisplay:"hidden",onChange:i,...c}))},72178:(e,t,i)=>{i.d(t,{X:()=>c});var n=i(92379),r=i(79813),a=i(79599),s=i(77415),o=i(81345),l=i(61386);class c extends n.Component{render(){var e;const t=this.props.dropdownOnTop?{customPosition:{top:`-${32*(this.props.dialects.length-1)+4}px`,left:"0"},vAlign:"top"}:{customPosition:{top:"36px",left:"0"}};return(null===(e=this.props.lock)||void 0===e?void 0:e.isLocked)?n.createElement(s.R,{lock:this.props.lock,dialect:this.props.dialect}):n.createElement(a.L,{...t,showDelay:0,closeDelay:150,appearanceBehavior:"mouseClick",name:"dialect",label:n.createElement(s.R,{dialect:this.props.dialect})},this.props.dialects.filter((e=>e!==this.props.dialect)).map((e=>n.createElement(r.zx.Flat,{name:e,key:e,onClick:t=>(null==t?void 0:t.isTrusted)&&this.props.onSetDialect(e)},n.createElement("div",{className:l.option},n.createElement(o.G,{className:l.label,dialect:e}))))))}}},44995:(e,t,i)=>{i.d(t,{M8:()=>l,UE:()=>s,_P:()=>c,aE:()=>o,kj:()=>d,pL:()=>a});var n=i(92379),r=i(34011);const a=()=>n.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M13.9207 15L15.5 17.2562L17.0793 15H13.9207Z",stroke:"#6D758D",strokeWidth:"2"})),s=()=>n.createElement("div",{className:r.american,role:"presentation"}),o=()=>n.createElement("div",{className:r.australian,role:"presentation"}),l=()=>n.createElement("div",{className:r.british,role:"presentation"}),c=()=>n.createElement("div",{className:r.canadian,role:"presentation"}),d=()=>n.createElement("div",{className:r.indian,role:"presentation"})},17181:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(92379),r=i(56488),a=i(23031),s=i(22408),o=i(80120);const l=({children:e,blocked:t,wrapperClassName:i,disabledText:l="Sign in to use this feature"})=>t?n.createElement(s.u,{message:l,position:"top"},n.createElement(r.x,{className:i},n.createElement("div",{className:o.hover_blocker,onClick:a.EI,onDoubleClick:a.EI},e))):n.createElement(n.Fragment,null,e)},72994:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(92379),r=i(19294),a=i(43150),s=i(38578),o=i(45656),l=i(56845),c=i(71221);function d(e){var t,i,d,u,h,g,p,m,f,v,b,w,S,y;return n.createElement(r.k,{direction:"column",gap:2},n.createElement(r.k,{direction:"column"},n.createElement(r.k,{justify:"space-between",align:"center"},n.createElement(a.X,{variant:"heading-xsmall",as:"h2",color:"base-default"},"Generative AI"),n.createElement(s.z,{variant:"ghost",text:"Manage","data-grammarly-part":"cheetahManageBtn",onClick:()=>{e.openCheetahSettings()}})),n.createElement(o.x,{as:"p",variant:"text-xsmall",color:"base-subdued"},"Brainstorm, write, and rewrite with Grammarly's generative AI assistance.")),e.showDockedAssistantToggle&&n.createElement(c.Z,{label:"Use docked chat launcher",isSelected:e.dockedAssistantEnabled,onChange:e.dockedAssistantToggle,betaLabel:"Beta",helperMessage:"Replace the widget in text fields with our new AI chat sidebar."}),n.createElement(l.r,{label:"Show on text selection",isSelected:!1!==(null===(i=null===(t=e.cheetahSettings)||void 0===t?void 0:t.status)||void 0===i?void 0:i.cheetahEnabled)&&!1!==(null===(h=null===(u=null===(d=e.cheetahSettings)||void 0===d?void 0:d.status)||void 0===u?void 0:u.entryPointsConfig)||void 0===h?void 0:h.inlineRewriteEnabled),disabled:!1===(null===(p=null===(g=e.cheetahSettings)||void 0===g?void 0:g.status)||void 0===p?void 0:p.cheetahEnabled),onChange:t=>e.cheetahToggleInlineRewrite(t)}),n.createElement(l.r,{label:"Show for quick replies",isSelected:!1!==(null===(f=null===(m=e.cheetahSettings)||void 0===m?void 0:m.status)||void 0===f?void 0:f.cheetahEnabled)&&!1!==(null===(w=null===(b=null===(v=e.cheetahSettings)||void 0===v?void 0:v.status)||void 0===b?void 0:b.entryPointsConfig)||void 0===w?void 0:w.inlineQuickReplyEnabled),disabled:!1===(null===(y=null===(S=e.cheetahSettings)||void 0===S?void 0:S.status)||void 0===y?void 0:y.cheetahEnabled),onChange:t=>e.cheetahToggleInlineQuickReply(t)}),e.showSerengetiFeatureToggle&&n.createElement(c.Z,{label:"Use organizational context",isSelected:e.serengetiEnabled,onChange:e.serengetiToggle,betaLabel:"Internal"}))}},64150:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(92379),r=i(56845),a=i(56209),s=i(8059);function o(e){return n.createElement(r.r,{label:"Show definitions and synonyms via double clicks (all sites)",isSelected:e.enabledDefs,onChange:t=>{const{toggleDefs:i}=e;i(t),s.J.definitionToggleClick(t?"on":"off"),(0,a.Tb)().toggleExtensionDefs(t)},isDisabled:e.disabled,"data-grammarly-part":"definitionAndSynonymsSwitcher"})}},87439:(e,t,i)=>{i.d(t,{m:()=>c});var n=i(92379),r=i(19294),a=i(45656),s=i(72178),o=i(17181),l=i(8059);class c extends n.Component{constructor(){super(...arguments),this.setDialect=e=>{const{changeStrongDialect:t,dialectWeak:i}=this.props;t(e);const n=e+"English";l.J.languageSettingUpdate(n,"user",i&&e===i)}}render(){const e=this.props.dialectStrong||this.props.dialectWeak||"american";return n.createElement(r.k,{align:"center",justify:"space-between"},n.createElement(a.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default"},"I write in"),n.createElement(o.w,{blocked:this.props.disabled},n.createElement(s.X,{dialect:e,dialects:this.props.dialects,onSetDialect:this.setDialect,dropdownOnTop:!!this.props.dropdownOnTop,lock:this.props.lock})))}}},91724:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(92379),r=i(19294),a=i(43150),s=i(45656),o=i(8059),l=i(51706);const c=({currentOpenShortcut:e,currentCloseShortcut:t,currentVBarsShortcut:i,onSetShortcut:c,showVBarsShortcut:d,isMac:u})=>{const h="keyboard-shortcut-setting-description";return n.createElement(r.k,{direction:"column"},n.createElement(a.X,{variant:"heading-xsmall",as:"h2",color:"base-default"},"Shortcuts"),n.createElement(s.x,{as:"p",variant:"text-xsmall",color:"base-subdued",id:h},"Use any keys in shortcuts, except for tab, enter, caps lock, home, end, page up, page down, delete, backspace, insert, and arrow keys."),n.createElement(r.k,{gap:1,direction:"column",color:"base-default"},n.createElement(l.Z,{label:"Open Grammarly",isMac:u,currentShortcut:e,onSetShortcut:e=>{c("openAssistant",e),o.J.keyboardShortcutShortcutKeysChanged("openAssistant")},ariaDescribedBy:h}),n.createElement(l.Z,{label:"Close Grammarly",isMac:u,currentShortcut:t,onSetShortcut:e=>{c("closeAssistant",e),o.J.keyboardShortcutShortcutKeysChanged("closeAssistant")},ariaDescribedBy:h}),d&&n.createElement(l.Z,{label:"Open sidecard",isMac:u,currentShortcut:i,onSetShortcut:e=>{c("openVBar",e),o.J.keyboardShortcutShortcutKeysChanged("openVBar")},ariaDescribedBy:h})))}},76043:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(92379),r=i(45656),a=i(56488),s=i(93463),o=i(45982);const l=e=>{const t="docs.google.com"===e.domain?"Google Docs":e.domain,{enabledInConfig:i,siteSwitcherChecked:l,favicon:c}=e,d=l.checked&&i,u=i?"Check for writing suggestions":"Checking is not supported";return n.createElement(s.Z,{label:`${u} on ${t}`,isSelected:d,isDisabled:!i,onChange:()=>{l.update(!d)},alignCenter:e.centeredToggle,"data-grammarly-part":"siteSwitcher"},n.createElement(r.x,{as:"span",variant:"text-small","data-test-attr":"siteControlsLabelText"},u," ",n.createElement("br",null),n.createElement(r.x,{as:"span",variant:"text-small",style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:250}},"on"," ",n.createElement(r.x,{as:"span",variant:"text-small",weight:"semibold"},c&&n.createElement(a.x,{className:o.favicon},n.createElement("img",{width:"16px",height:"16px",src:c,alt:""})),t))))}},59144:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(58303),r=i(90023),a=i(92379),s=i(44071),o=i(90572),l=i(14969),c=i(45656),d=i(48906),u=i(56209),h=i(66150),g=i(239),p=i(43882),m=i(7221),f=i(8059),v=i(56749);const b=({user:e,isAssistant:t,openSubscriptionDialog:i,hasInProductDiscountSpecialOffer:b,hasUphookHubTestTreatment:w,uphookConfiguration:S,trackUphookHubEvent:y})=>{const{registrationDate:k,anonymous:E,premium:_}=e,C=(0,h.p6)(k);if(E||_)return null;const A=(0,a.useMemo)((()=>(0,r.zG)(b,n.tS((e=>e?n.G("discountPro"):n.G("pro"))),n.wp((()=>n.G("pro"))))),[b]),I=()=>{y("show",S),(0,r.zG)(A,n.UI((e=>{(0,g.nE)(f.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar",upgradeHookVariant:e}),(0,u.Tb)().upgradeHooks.showUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar",e)})))};a.useEffect((()=>{(0,r.zG)(A,n.UI((()=>{if((0,m.G6)()){const e=(0,s.R)(document,"visibilitychange").pipe((0,o.h)((()=>"visible"===document.visibilityState))).subscribe((()=>{I()}));return()=>e.unsubscribe()}return I(),()=>{}})))}),[A]);const x=a.useCallback((()=>{w?S.pipe((0,o.h)(n.pC),(0,l.P)()).subscribe((e=>{i({overrideUrl:e.value.content.ctaUrl,utmCampaign:"extensionSettingsToolbar"})})):i({utmCampaign:"extensionSettingsToolbar"}),y("click",S),(0,r.zG)(A,n.UI((e=>{(0,g.Qi)(f.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar",upgradeHookVariant:e}),(0,u.Tb)().upgradeHooks.clickUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar",e)}))),(0,u.Tb)().userUpgradeClick("settingsToolbar")}),[A]),T=C?a.createElement(c.x,{as:"span",variant:"text-small","data-test-attr":"checked_since",color:"base-default"},"Grammarly has been correcting your text since ",C,"."):null;return a.createElement("div",{className:t?v.borderTop:void 0},a.createElement("div",{...(0,d.Sh)(v.content,t?void 0:v.borderBottom)},T,a.createElement(p.Y,{onClick:x,className:v.premiumButton,dataGrammarlyPart:"settings-upgrade-button",cta:w?(0,r.zG)(S.get(),n.UI((e=>e.content.ctaCopy)),n.fS((()=>"Get Pro"))):(0,r.zG)(b,n.tS((e=>e?n.G("Get 50% off Pro"):n.YP)),n.fS((()=>"Get Pro")))})))}},8059:(e,t,i)=>{i.d(t,{J:()=>r});var n=i(18506);const r=new Proxy({},{get:(e,t)=>(...e)=>(0,n.OB)().bgRpc.api.trackGnar(t,e)})},9175:(e,t,i)=>{i.d(t,{B:()=>r});var n=i(47230);const r=e=>"test"===(null==e?void 0:e.getTreatment(n.p.OAuth2Phase2Interactive))},11573:(e,t,i)=>{i.d(t,{Jt:()=>a,Ku:()=>l,Ne:()=>o,cs:()=>c,k3:()=>s,og:()=>r,rR:()=>d});var n=i(52698);function r(e,t,i){t?function(e,t){if(e){if(-1===t.indexOf(" "))return e.classList.add(t);{const i=t.split(" ");for(let t=0;t<i.length;t++)e.classList.add(i[t])}}}(e,i):function(e,t){if(e&&e.classList)e.classList.remove(t)}(e,i)}function a(e,t){let i=e.parentNode;for(;null!==i;){if(l(i,t))return i;i=i.parentNode}return!1}function s(e){let t=e.parentNode;for(;null!==t;){if(o(t))return t;t=t.parentNode}return!1}function o(e){return"true"===e.contentEditable||"plaintext-only"===e.contentEditable}function l(e,t){if(!e)return!1;const i=e.matches||e.msMatchesSelector||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;return!!i&&i.apply(e,[t])}function c(...e){return e.reduce(((e,t)=>e.concat((0,n.Kn)(t)?Object.keys(t).filter((e=>t[e])):t)),[]).filter((e=>Boolean(e))).join(" ")}function d(e=document){if(void 0===e.body.style.transform){if(void 0!==e.body.style.WebkitTransform)return"WebkitTransform";if(void 0!==e.body.style.MozTransform)return"MozTransform"}return"transform"}},10585:(e,t,i)=>{i.d(t,{T:()=>o,q:()=>s});var n=i(90023),r=i(58303),a=i(75435);const s=e=>(0,n.zG)(e,r.tS((e=>a.ab.findFirst(e.content,"nativeInlineCardContent",a.ab.TreeTraversal.PreOrder)))),o=(0,n.ls)(s,r.pC)},13155:(e,t,i)=>{i.d(t,{M:()=>r});var n=i(92379);class r extends n.Component{constructor(){super(...arguments),this.handleClick=e=>{e&&(e.isTrusted||this.props.skipTrustedCheck)&&(e.stopPropagation(),e.stopImmediatePropagation(),this.props.clickHandler(e))}}componentDidMount(){this.wrapperRef&&this.wrapperRef.addEventListener("click",this.handleClick)}componentWillUnmount(){this.wrapperRef&&this.wrapperRef.removeEventListener("click",this.handleClick)}render(){return n.createElement("div",{ref:e=>this.wrapperRef=e,style:this.props.style||{display:"initial"},className:this.props.className,"data-grammarly-part":this.props.dataGrammarlyPart},this.props.children)}}},3140:(e,t,i)=>{var n,r;i.d(t,{B:()=>n,I:()=>r}),function(e){let t;!function(e){e.disableOnTab="disableOnTab",e.reloadTab="reloadTab",e.showOnboardingDialog="showOnboardingDialog",e.hideGdocsSigninPopupMessage="hideGdocsSigninPopupMessage",e.sendCsLogsToPopup="sendCsLogsToPopup",e.downloadDebugReportsFromCS="downloadDebugReportsFromCS"}(t=e.Kind||(e.Kind={}))}(n||(n={})),function(e){let t;!function(e){e.sendCsLogs="sendCsLogs"}(t=e.Kind||(e.Kind={}))}(r||(r={}))},60774:(e,t,i)=>{if(i.d(t,{BM:()=>m,IG:()=>v,Re:()=>f,Tv:()=>p,VD:()=>b,YN:()=>y,_N:()=>w,a2:()=>S,qw:()=>g}),6168!=i.j)var n=i(64271);if(6168!=i.j)var r=i(44071);if(6168!=i.j)var a=i(29479);if(3075==i.j)var s=i(954);if(3075==i.j)var o=i(59179);if(3075==i.j)var l=i(90572);if(6168!=i.j)var c=i(92244);if(3075==i.j)var d=i(5681);if(3075==i.j)var u=i(23031);if(6168!=i.j)var h=i(15716);function g(e){return(0,n.T)((0,r.R)(e,"focus").pipe((0,a.h)(!0)),(0,r.R)(e,"blur").pipe((0,a.h)(!1)))}function p(e){return e.nodeType===Node.ELEMENT_NODE}function m(e){return e.nodeType===Node.TEXT_NODE}function f(e){return e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement}function v(e,t){return d.x.create(e,{childList:!0,subtree:!0,attributes:!1}).pipe((0,s.O)(null),(0,o.U)((e=>{const i=Object.entries(t).reduce(((e,[t,i])=>({...e,[t]:i()})),{});return Object.values(i).filter(u.fQ).length===Object.keys(i).length?i:null})),(0,l.h)((e=>!!e)))}var b;function w(e,t,i){return n((0,c.Me)(t));function n(t){const i=t.elementFromPoint(e.left,e.top);if(!i)return!1;const n=r(i);if(null!==n)return n;const a=t.elementsFromPoint(e.left,e.top);for(const e of a){if(e===i)continue;const t=r(e);if(null!==t)return t}return!1}function r(e){var r;return!(t!==e&&!t.contains(e))||((null==i?void 0:i(e))?null:!!(null===(r=e.shadowRoot)||void 0===r?void 0:r.elementsFromPoint)&&n(e.shadowRoot))}}function S(e){if(e.endsWith("px")){const t=e.slice(0,-2),i=Number(t);return(0,h.hj)(i)?i:null}return null}function y(e){var t;const i=(null!==(t=e.ownerDocument.defaultView)&&void 0!==t?t:self).getComputedStyle(e).zIndex,n="auto"!==i&&parseInt(i||"0",10)||null;return null!==n?n:e.parentNode&&e.parentNode.nodeType===Node.ELEMENT_NODE?y(e.parentNode):null}!function(e){e[e.Escape=27]="Escape",e[e.Return=13]="Return",e[e.Tab=9]="Tab",e[e.RightArrow=39]="RightArrow",e[e.UpArrow=38]="UpArrow",e[e.DownArrow=40]="DownArrow"}(b||(b={}))},60556:(e,t,i)=>{var n;i.d(t,{y:()=>n}),function(e){e.gdocs="gdocs",e.other="other"}(n||(n={}))},33457:(e,t,i)=>{i.d(t,{m:()=>r,u:()=>a});var n=i(92379);const r=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"none"},n.createElement("g",{clipPath:"url(#a)"},n.createElement("rect",{width:"29.714",height:"26.286",x:"2.286",y:"8",fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.25",rx:"3.333"}),n.createElement("path",{fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M2.286 11.333A3.333 3.333 0 0 1 5.619 8h23.048A3.333 3.333 0 0 1 32 11.333v2.953H2.286v-2.953Z"}),n.createElement("ellipse",{cx:"5.86",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("ellipse",{cx:"7.794",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("ellipse",{cx:"9.728",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("path",{stroke:"#1C1C1C",strokeWidth:"1.25",d:"M8.264 21.143h17.583M8.264 27.067h17.583"}),n.createElement("path",{fill:"#FFDC85",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M38.518 13.857c0 5.572-4.517 10.09-10.09 10.09-5.572 0-10.089-4.518-10.089-10.09s4.517-10.09 10.09-10.09c5.572 0 10.089 4.518 10.089 10.09Z"}),n.createElement("path",{fill:"#FCFCFC",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M28.182 7.076a.336.336 0 0 1 .582 0l6.014 10.415a.336.336 0 0 1-.291.505H22.46a.336.336 0 0 1-.291-.505l6.013-10.415Z"}),n.createElement("path",{stroke:"#1C1C1C",strokeWidth:"1.25",d:"M28.61 10.389v4.034M28.61 15.428v.968"})),n.createElement("defs",null,n.createElement("clipPath",{id:"a"},n.createElement("path",{fill:"#fff",d:"M0 0h40v40H0z"})))),a=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},n.createElement("g",{clipPath:"url(#a)"},n.createElement("rect",{width:"23.771",height:"21.029",x:"1.829",y:"6.4",fill:"#fff",stroke:"#1C1C1C",rx:"2.667"}),n.createElement("path",{fill:"#fff",stroke:"#1C1C1C",d:"M1.829 9.067A2.667 2.667 0 0 1 4.495 6.4h18.438A2.667 2.667 0 0 1 25.6 9.067v2.361H1.829V9.067Z"}),n.createElement("ellipse",{cx:"4.688",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("ellipse",{cx:"6.235",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("ellipse",{cx:"7.783",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("path",{stroke:"#1C1C1C",d:"M6.61 16.914h14.067M6.61 21.654h14.067"}),n.createElement("path",{fill:"#FFDC85",stroke:"#1C1C1C",d:"M30.814 11.086a8.071 8.071 0 1 1-16.143 0 8.071 8.071 0 0 1 16.143 0Z"}),n.createElement("path",{fill:"#FCFCFC",stroke:"#1C1C1C",d:"M22.546 5.66a.269.269 0 0 1 .465 0l4.811 8.333a.269.269 0 0 1-.233.403h-9.621a.269.269 0 0 1-.233-.403l4.81-8.332Z"}),n.createElement("path",{stroke:"#1C1C1C",d:"M22.888 8.311v3.228M22.888 12.343v.774"})),n.createElement("defs",null,n.createElement("clipPath",{id:"a"},n.createElement("path",{fill:"#fff",d:"M0 0h32v32H0z"}))))},95165:(e,t,i)=>{i.d(t,{K:()=>r});var n=i(92379);const r=n.memo((function(e){return n.createElement("svg",{className:e.className,width:e.width,height:e.height,viewBox:"0 0 34 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M20.6126 4.92236H4.92251C2.75616 4.92236 1 6.67852 1 8.84486V27.9672C1 30.1335 2.75616 31.8897 4.92251 31.8897H20.6126C22.779 31.8897 24.5351 30.1335 24.5351 27.9672V8.84486C24.5351 6.67852 22.779 4.92236 20.6126 4.92236Z",fill:"white",stroke:"#1C1C1C",strokeLinecap:"round"}),n.createElement("path",{d:"M5.90625 18.1616H12.7706",stroke:"#1C1C1C",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M5.90625 24.0454H19.6351",stroke:"#1C1C1C",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M32.8704 10.8248C32.8704 16.2173 28.4585 20.6126 23.0456 20.6126C21.0065 20.6126 19.1898 20.0216 17.6327 18.9505C15.0004 17.2146 13.2578 14.1859 13.2578 10.7878C13.2578 5.39529 17.6698 1 23.0827 1C28.4956 1 32.8704 5.3953 32.8704 10.8248Z",fill:"#FFDC85",stroke:"#1C1C1C",strokeMiterlimit:"10"}),n.createElement("path",{d:"M23.0625 5.16846V10.8071H27.2302",stroke:"#1C1C1C",strokeLinecap:"round"}))}))},76002:(e,t,i)=>{i.d(t,{X:()=>n});i(31491);const n=(...e)=>{}},26002:(e,t,i)=>{i.d(t,{E:()=>n});var n,r=i(44071),a=i(90572),s=i(72747),o=i(4256),l=i(78542),c=i(50469),d=i(18506);!function(e){const t=l.Y.create("Reports");function i(e){var t;const i=null===(t=self.document)||void 0===t?void 0:t.createElement("a");i.href="data:application/octet-stream,"+encodeURIComponent(function(e){const t=e=>{try{return JSON.stringify(e)}catch(t){return String(e)}};return[["Level","Logger","Timestamp","Message"].join("\t"),...e.map((e=>{const i=[e.level,e.loggerName,new Date(e.timestamp).toISOString(),e.message];return e.data&&i.push(t(e.data)),e.exception&&i.push(t(e.exception)),i.join("\t")}))].join("\n")}(e)),i.target="_blank",i.download="grammarly-logs.tsv",i.click()}async function n(e){if(t.debug("start download debug reports"),!(0,d.OB)().historyLogsService.isHistoryEnabled())return t.debug("debug reports feature is not enabled"),alert("Logging is not enabled");if(!self.confirm(c.o1))return;t.debug("confirm download debug reports");const n=[];e.sort((e=>e.envName===(0,d.OB)().context?1:-1));try{await(0,s.Fb)(o.E0,u())}catch(e){t.warn("cannot get latest app state",e)}for(const t of e){const e=await t.getLogs();n.push(...null!=e?e:[])}n.sort(((e,t)=>e.timestamp-t.timestamp)),i(n)}async function u(){t.info("latest experiments state",await(0,d.OB)().bgRpc.api.getExperimentTreatment()),t.info("latest storage state",await(0,d.OB)().browserApi.preferences.getAll()),t.info("browser info",(0,d.OB)().browserApi.getBrowserInfo())}e.download=n,e.initKeyboardShortcutHandler=function(e){return(0,r.R)(self,"keydown").pipe((0,a.h)((e=>"KeyS"===e.code&&e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)))).subscribe((()=>{n(e)}))},e.logLatestState=u}(n||(n={}))},7480:(e,t,i)=>{i.d(t,{Ng:()=>a,WY:()=>o,ZD:()=>s});var n=i(7221),r=i(81356);const a=e=>{const t=r.n.getType(e);return"registered"===t?"free":t},s=e=>{return{clientVersion:e.version,platformVersion:"",application:e.domain,browser:e.systemInfo.browser.name,os:(t=e.systemInfo.os,t.isWindows?"windows":t.isMac?"mac":t.isChromeOS?"chromeos":"other"),userType:e.userType,team:"browserextensions"};var t},o=e=>{const t=new URL((0,n.Um)().grammarlyEmployeesBugReportsUrl);return Object.entries(e).forEach((([e,i])=>{i&&t.searchParams.set(e,i)})),t.toString()}},86465:(e,t,i)=>{i.d(t,{GH:()=>l,Xv:()=>o,dU:()=>c,hG:()=>d,n1:()=>s});var n=i(72234),r=i(8261),a=i(20182);const s=2147483647;function o(e={enabled:!1},t){const i=t||(0,r.OB)().experimentClient;return e.enabled&&(null==i?void 0:i.isGateEnabled(a.K.SessionTimeout))}function l(e){try{return JSON.parse(e).refresh_token_expires_at}catch(e){return}}function c(e){if(!e)return!1;return e-Date.now()<=n.p7}function d(e){return e-Date.now()-n.p7}},56518:(e,t,i)=>{var n=i(45101),r=i(30997)(n);r.push([e.id,"._z3YOv-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._z3YOv-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),r.locals={textBox:"_z3YOv-textBox"},e.exports=r},18931:e=>{e.exports={ideateButton:"_ErYR",ideateButtonIcon:"i8HXG",spin:"CSZH1"}},97578:e=>{e.exports={heading:"RDHDg",labelsFont:"ChkL9"}},32635:e=>{e.exports={viewAnnouncer:"I0c5l"}},10498:e=>{e.exports={link:"QgFSd",externalLink:"oGmOe",icon:"i3roU",gmail:"h0anR",outlook:"NM8XU",gdocs:"Y9XfU",spin:"YUQEk"}},70881:e=>{e.exports={progressBarBg:"Hz_iW",progressBar:"JxiOG"}},8670:e=>{e.exports={singleCardAssistant:"XPx7S",singleCardAssistantNativeContentWithPadding:"He99k"}},66711:e=>{e.exports={getStartedChecklist:"QE3tb",logo:"DOz7G",title:"CzlXc",progressCaption:"TKilD"}},49898:e=>{e.exports={getStartedUseCases:"V1X0D",copyContainer:"AN8Cu",title:"jjHIP",subtitle:"gjGEx",ctaContainer:"s7nMi",ctaCaption:"BJWKo",ctaButtons:"SWGns",externalLink:"JLzQ9",icon:"DhhQ7",gmail:"hRR0U",outlook:"lnWHG",gdocs:"b0ty6",word:"eHkAg",slack:"OppdY",teams:"Hfv16",linkedIn:"hc5LW"}},99677:e=>{e.exports={cardList:"O6x_6",cardListFooterDynamic:"NzU4C",cardListFooterStatic:"kdk1x",cardListFooterAnimate:"CUEf1",upgradeHookWrapper:"fpqSf",assistant:"ziFUs",dragging:"dl2Z_",mainView:"OfKqp"}},87124:e=>{e.exports={emogenieViewOverlayHeader:"saNAB",emogenieViewOverlayHeaderBetaBadge:"J16CK"}},33384:e=>{e.exports={footerButton:"j5lp5",feedbackButton:"_i7kC"}},12945:e=>{e.exports={actions_hovered:"FONqd",header:"uDOFr",draggableWrapper:"rjQy5",draggable:"P3jaK",headerActions:"Xtr7I",headerActionBtnProofitIcon:"b5yo3",headerActionBtnGoalsIcon:"pl7ek",logoscore_fadein:"tUJui",fadein:"AQJV1",logoscore_fadeout:"chyj0",fadeout:"ooxFJ",logo_score:"RLHcp",spin:"g0xkj"}},23950:e=>{e.exports={insight:"vaGfd",insight__inline_icon:"M5fov",insight__inline_text:"NodQp"}},22939:e=>{e.exports={predictions:"zAvBV",predictions__header:"p82xz",predictions__card:"ZuLGb",counterContainer:"KwKbD",predictions__zero_text:"IVxiZ",predictions__off_brand:"HrjP2"}},69911:e=>{e.exports={relatedSuggestionsTitle:"AP_Yd"}},73541:e=>{e.exports={viewOverlay:"CpaDC",content:"BWu_L",footer:"Nfocm",viewOverlayGoBack:"EBOfD",defaultViewOverlayPanel:"TFghg",gradientViewOverlayPanel:"a2q6L",proofitViewOverlayPanel:"vCO8v",defaultViewOverlayHeader:"U8zS8",defaultViewOverlayContent:"Z9WSl",gradientViewOverlayContent:"sxmDB",proofitViewOverlayContent:"_nDhb",logo:"OtV3S",proofitViewOverlayHeader:"HuIOP",proofitViewOverlayHeaderBetaBadge:"PUb7a"}},40535:e=>{e.exports={viewOverlay:"snX4b",content:"fSzZu",footer:"Y8cpA",viewOverlayGoBack:"yEi_t",defaultViewOverlayPanel:"aPyGs",gradientViewOverlayPanel:"gbwcW",settingsViewOverlayPanel:"Rudrm",defaultViewOverlayHeader:"_tUap",defaultViewOverlayContent:"Cs_VJ",gradientViewOverlayContent:"c4WjP",settingsViewOverlayContent:"ZtK1f",logo:"_kPSX",settingsViewDoneButton:"xVshA"}},7150:e=>{e.exports={viewOverlay:"Gsb9P",content:"_HIip",footer:"EZP9j",viewOverlayGoBack:"oEefg",defaultViewOverlayPanel:"jAeU3",gradientViewOverlayPanel:"rIqVr",defaultViewOverlayHeader:"h1FQ0",defaultViewOverlayContent:"YsrUq",gradientViewOverlayContent:"Nc28X",logo:"cMPwC"}},84341:e=>{e.exports={compactSuccessLens:"lP637",compactSuccessLensContainer:"FK4Ma"}},76074:e=>{e.exports={priority:"Eg8pv",emoji:"Ls_xS",cardEmoji:"ZVWqH",emojiButtonWrapper:"cenoh",emojiContainer:"Bg2tI",emojiButtonShow:"C3ro0",emojiButtonHide:"nul4w"}},95686:e=>{e.exports={headerOrFooterWrapper:"Y2H0f"}},9130:e=>{e.exports={cardList:"gV0cS"}},12294:e=>{e.exports={premiumLens:"TFbap"}},97428:e=>{e.exports={successLens:"_NLHO"}},55016:e=>{e.exports={wrapper:"QzCRj"}},47133:e=>{e.exports={container:"qfD5D",baseGrid:"iPCw8",bottomLeft:"PuuHv",bottomRight:"r_Ycp",top:"qu1VK",notificationWrapper:"cSTPv"}},94396:e=>{e.exports={sidebarContainer:"OUOwE",sidebarContent:"etRrJ"}},56270:e=>{e.exports={learnMore:"Z_tYK",learnMoreTitle:"wCofj",learnMoreExample:"YSZy0",learnMoreExampleIconAndTitle:"W3Msk",learnMoreExampleIcon:"q0k69",learnMoreExampleCorrectIcon:"TsvDV",learnMoreExampleIncorrectIcon:"DBJgs",learnMoreExampleTitle:"_5iVIT",learnMoreExampleTextItalic:"o84Ep",learnMoreExampleTextMarginLeft:"cTK8V",spin:"DHpIM"}},73107:e=>{e.exports={container:"qAay9"}},50544:e=>{e.exports={singleCardAssistant:"bJPRn",singleCardAssistantHeader:"Zoc_S",singleCardAssistantHeaderDraggable:"ZX00_",singleCardAssistantContent:"p9dQN",singleCardAssistantContentWithPadding:"UAH4K",singleCardAssistantFooter:"VnTOq",singleCardAssistantFooterText:"BgeT4",singleCardAssistantFooterButtonIcon:"kBU3t",spin:"HCSMj"}},67728:e=>{e.exports={card:"SD4B_",cardInline:"lDTYf",cardInlineRegular:"I8fWz",cardInlineFixedWidth:"zFjOi",cardInlineFitContent:"SzLk5",cardAssistant:"SsdZ1",cardAssistantAllLens:"OYPRO",cardClickable:"FxoHS"}},46916:e=>{e.exports={emogenieReport:"IPEgR",emogenieReportHeader:"ugGrL",emogenieReportHeaderTitle:"x3FcP",emogenieReportItems:"SwRPf",emogenieReportToneSuggestionInfo:"vLVNY",emogenieReportToneSuggestionInfoEmojiAndTitle:"VinN1",emogenieReportToneSuggestionInfoEmoji:"gmfaf"}},282:e=>{e.exports={emogenieBrandToneInfoIcon:"pcprF",emogenieReportItem:"LXjD_",emogenieBrandToneInfoIconOn:"KIvz3",emogenieBrandToneInfoIconOff:"NDatF",emogenieReportItemEmotion:"AjVJZ",emogenieReportItemEmotionEmojiAndName:"cIE8j",emogenieReportItemEmotionEmoji:"oZZpB",emogenieReportItemEmotionName:"QWYxt",emogenieReportItemEmotionBadgeOrIntensity:"jw4RJ",emogenieReportItemEmotionIntensity:"Ixu7L",emogenieReportItemEmotionIntensityDot:"aFcXw",emogenieReportItemEmotionIntensityDotActive:"xUxza",emogenieReportItemEmotionActionsMenuButton:"q4wIy",emogenieReportItemEmotionActionsMenuIcon:"V5KFq",emogenieReportItemEmootionActionsMenuThumsUpIcon:"UAfpn",emogenieReportItemEmootionActionsMenuThumsDownIcon:"CoUgw",spin:"tmqUv"}},92248:e=>{e.exports={badge:"stkrr",badgePrimary:"XTtJC",badgeSuccess:"VlXa2",badgeGold:"TvgjE",badgeError:"elqes",badgeRounded:"rI61B",badgeRoundedSmall:"j0sDJ",badgeRoundedMedium:"mJWU1",badgeRoundedLarge:"VhQJY",badgeTitle:"yHBKc",badgeTitleBold:"CZLBe"}},47301:e=>{e.exports={settingsButtonMediumIcon:"jerdC",settingsButtonSmallIcon:"PlOGe",spin:"MH8w4"}},34801:e=>{e.exports={checkboxContainer:"Te37e",checkbox:"mFHkX",checkboxDS:"DdH2q",checkboxChecked:"JhHnz",checkboxCheckmark:"zShXt",spin:"tww6q"}},87035:e=>{e.exports={emoji:"goatt",emojiAlt:"cUc93"}},80144:e=>{e.exports={fontWrapper:"amkYk"}},22224:e=>{e.exports={popoverNotificationMessage:"p0k9e"}},5930:e=>{e.exports={radioGroup:"KAzfW",radioGroupOption:"WkjDU",radioGroupOptionSelected:"onilo"}},65262:e=>{e.exports={highlight:"gUhBO",light:"fX3Dk",dark:"w3PtR",highlightBackground:"wPV13",highlightUnderline:"W6AVK",highlightHbar:"e8Ruv",highlightInert:"NI5pb",highlightUnderlineAnimatedRegular:"fFbRx",highlightUnderlineShow:"JZtEl",highlightUnderlineAnimatedSlow:"M8fh8",highlightEnclosing:"oR786",highlightUnderlineOnly:"to5ul",highlightUnderlineStartOnly:"EWWPj",highlightHovered:"M3SCz",highlightNeedsAttention:"bPYnD",highlightBackgroundOnly:"RSI82",highlightStatic:"DCLaM",highlightFadeIn:"rz9vy",highlightUnderlineAndPersistentBackground:"MnC8p",highlightDarken:"cI0qZ",highlightNeedsAttentionDark:"B1_r3",highlightDisappear:"y0Pwo",highlightDarkenFadeOut:"YtD3q",highlightUnderlineFadeOut:"fQx8l",highlightFadeOut:"cprzT",highlightNeedsAttentionRegular:"Lj7mJ",highlightColorRed:"eephs",highlightDottedUnderlineAndBackground:"AfZZS",highlightColorBlue:"jlbiw",highlightColorGreen:"bZGGu",highlightColorLightGreen:"U9Jcr",highlightColorPurple:"dFzOQ",highlightColorGold:"g2PMM",highlightColorGray:"ythSG",highlightColorPlagiarism:"rt4yp",highligthColorWeHbar:"TiKPW",highlightDarkFadeOut:"vTpD2",highlightDarkFadeIn:"V27ON",highlightDarkenMore:"gC5dP",highlightDarkenMoreUndo:"tRCR8"}},53618:e=>{e.exports={button:"EYiE8","variant-primary":"z9uJO","variant-secondary":"q5Jrx","variant-tertiary":"lzg5M","variant-ghost":"a8sQl","variant-premium":"WLxWd","size-small":"N98GR","size-medium":"W801A","size-large":"pRgOD","size-xlarge":"UkrPO","width-full":"mw7mz",linkButton:"HQbMT",spin:"PaktZ"}},67247:e=>{e.exports={premiumButton:"QpA64"}},59294:e=>{e.exports={proofitRequestFormBtnLoadingSpinner:"IrY6A",spin:"m9t2y"}},93035:e=>{e.exports={proofitHowItWorksSteps:"Unehy",proofitHowItWorksStep:"zMEEz",proofitHowItWorksStepNumberContainer:"EfoqG",proofitHowItWorksStepNumber:"XIDZQ",proofitHowItWorksStepOne:"K5qs8",proofitHowItWorksStepOneNumberContainer:"e4ae6",proofitHowItWorksStepTwo:"P3h_J",proofitHowItWorksStepTwoNumberContainer:"YejA_",proofitHowItWorksStepThree:"FYGwC",proofitHowItWorksStepThreeNumberContainer:"YFsfV"}},26189:e=>{e.exports={proofitRequestForm:"QVI6h",proofitRequestFormImg:"wKuXo",proofitRequestFormTitle:"yNxb3",proofitRequestFormDescription:"vLSn1",proofitRequestFormCostAndTime:"b2RwJ",proofitRequestFormTime:"Bo3xu",proofitRequestFormCostAndTimeTitle:"Cu_3T",proofitRequestFormCostAndTimeSubtitle:"NFy21",proofitRequestFormRequestBtn:"beQX2",proofitRequestFormUnavailableMsg:"JDvub",proofitRequestFormFootnote:"S33xD",proofitRequestFormFootnoteFreeTrial:"SflIX",proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:"HUrVJ",proofitRequestFormPrivacyInfoTitle:"ymDqL",proofitRequestFormPrivacyInfoDescription:"ZqcFq",proofitRequestFormPrivacyInfoDescriptionItem:"iv8f1",proofitRequestFormPrivacyInfoDescriptionItemBulletPoint:"Duc32"}},77390:e=>{e.exports={proofitReviewForm:"SNt2d",proofitReviewFormTitle:"iMzY2",proofitReviewFormDescription:"jvfyf",proofitFeedbackForm:"eY729",proofitDoneButton:"CTbuu"}},16425:e=>{e.exports={scoreRing:"xlRHm",loading:"A_cJy",rotation:"srLo5",scoreText:"KIWW8"}},31429:e=>{e.exports={feedbackFormContainer:"kjElf",feedbackFormContainerBottomPadding:"bXqDs",feedbackFormContainerAlignCenter:"hkEx2",feedbackFormFields:"Ua5wJ",feedbackFormTitle:"GnQ_a",feedbackFormTextBoxTitle:"kWEW0",feedbackFormLogoLine:"osGQI",compact:"b7yYp",feedbackFormScore:"ZOSRK",feedbackFormTextBox:"l8New",feedbackFormShareDomainTitle:"Qbnj_",feedbackFormShareDomainCheckbox:"VBCx1",feedbackFormShareUserTextCheckbox:"abP8L",fedbackFormShareUserTextCheckboxLabel:"hxgnL",feedbackFormSuccessMessageTextContainer:"ARBzt",feedbackFormSuccessMessageIcon:"kJIzg",feedbackFormSuccessMessageTitle:"iXQnf",feedbackFormSuccessMessageSubtitle:"Ydufo",spin:"Vv6WG"}},16607:e=>{e.exports={feedbackFormOption:"sp8vS",feedbackFormOptionIcon:"eH6DL",feedbackFormOptionIconDisheartening:"DhaWh",feedbackFormOptionIconNeutral:"BS_8d",feedbackFormOptionIconSmiling:"dUZNd",spin:"uouSO"}},47159:e=>{e.exports={label:"cLK4q",selected:"hbRki",option:"UytwF",disabled:"mTk5j",lockIconWrapper:"o4NOU"}},86579:e=>{e.exports={option:"XNQPo"}},61386:e=>{e.exports={option:"dRYWx"}},34011:e=>{e.exports={american:"JRPow",australian:"FZNcB",british:"MzB3a",canadian:"_fn3J",indian:"eqgex"}},80120:e=>{e.exports={hover_blocker:"np9cY"}},86818:e=>{e.exports={settingsContent:"C3SN4",fullWidth:"dRfoN",heading:"_HqAa",allSettings:"pUfgB",separator:"vlSkx",section:"v01UR",settingsLink:"d_ohh",debugMenu:"iovEn",downloadBtn:"u6BF0",timer:"DQHsO",gOSMenu:"dhG16",menuItem:"COwmJ","gds-select-container":"Cmf7Q"}},45982:e=>{e.exports={windows:"ScRGR",setting_item:"byTue",fixing:"tGQgu",thin_text:"Zw2iF",footer:"VarAw",gr_popup_settings:"sCOqq",iOS:"xw90P",footer_btn:"dFcxY",short_border:"GPdi3",top:"a8_HB",content:"eJi6K",my_grammarly:"TPdm3",new_document:"b5rRu",unsupported_site:"FV6cP",unsupported_item:"kI6Es",unsupported_title:"TvJkj",domain:"mbOuw",domain_in_details:"HyZRA",unsupported_temporary:"aeiHl",unsupported_permanently:"e63AG",unsupported_grammarly:"SK755",diamond:"z0724",userPanel:"bG2GY",email:"U4qfE",link:"Vrj67",blue:"Dstaa",edc_stripe:"GEFvM",line:"_o71L",not_supported:"Z9hzt",site_switcher:"LXeMc",upgrade:"BAl_v",favicon:"L5Hrq",centered:"T0qTK",summary:"tuG8u",upgrade_title:"KRcNq",settingsContentWrapper:"OeKpx",settingsContent:"AwQr3",sessionTimeoutWrapper:"BErLl",sessionTimeoutDiv:"rekSD",sessionTimeoutTextAndIcon:"ihkdF",sessionTimeoutPopupIcon:"xYrMw",sesstionTimeoutText:"I7MlK",signinLink:"n7A2H",popupSettings:"wBa4V",withBackground:"JRZMC",llamaTitle:"WnzAW",llamaDescription:"dDIsV",cheetahLabelAndButton:"WwKRI",cheetahLabel:"aMCQq",cheetahManageButton:"hfCbo",hwrDescription:"KqA2M",nobr:"wae8U"}},56749:e=>{e.exports={content:"IJam9",borderTop:"oKEr5",borderBottom:"lZ1ZL",premiumButton:"bvxiF"}},29621:e=>{e.exports={fontsPreloader:"NRIwa",interThin:"yEioX",interThinItalic:"qcX4v",interExtraLight:"zVlKD",interExtraLightItalic:"G5uFu",interLight:"ss65s",interLightItalic:"BAp6C",interRegular:"TsKuT",interItalic:"zaGJf",interMedium:"m1asa",interMediumItalic:"OrxoJ",interSemiBold:"DZkXF",interSemiBoldItalic:"nIB5t",interBold:"fcnMV",interBoldItalic:"sxDQt",interExtraBold:"PWSxT",interExtraBoldItalic:"NWlff",interBlack:"CDNOZ",interBlackItalic:"ZeE9p"}}}]);