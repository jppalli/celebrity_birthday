/*! For license information please see 4316.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[4316],{72234:(e,t,n)=>{n.d(t,{cK:()=>a,p7:()=>o,pU:()=>s,pz:()=>l,wj:()=>c});var r=n(12518),i=n(64297);const a=1e3,o=60*(60*a),s=24*o,l=7*s;var c,d;(e=>{const t=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d*[Z]$/,n=/^(\d{4}-\d{2}-\d{2}).(\d{2}:\d{2}:\d{2}(?:.\d+)?)$/;function a(e){return e.getTime()}var o;e.create=function(e){return(0,i.kG)(t.test(e),"provided string should have timezone",e),new Date(e)},e.copy=function(e){return new Date(e)},e.now=()=>new Date,e.add=function(e,t){return new Date(e.getTime()+t.getTime())},e.subtract=function(e,t){return new Date(e.getTime()-t.getTime())},e.toSeconds=function(e){return Math.round(e.getTime()/1e3)},e.toTimestamp=a,e.shortTime=function(e){let t=e.getHours();const n=t>=12?"pm":"am";return t=t%12||12,`${`0${t}`.slice(-2)}:${`0${e.getMinutes()}`.slice(-2)} ${n}`},e.fullDate=function(e){return`${e.toLocaleString("en-us",{month:"long"})} ${e.getDate()}, ${e.getFullYear()}`},(o=e.Timestamp||(e.Timestamp={})).now=()=>a(e.now()),o.add=function(e,t){return e+t},o.subtract=function(e,t){return e-t},o.toSeconds=function(e){return Math.round(e/1e3)},o.toLocal=function(e){return new Date(e)},o.toISODate=function(t){return e.Timestamp.toLocal(t).toISOString()},e.daysAgo=function(t,n){const r=n*s;return e.Timestamp.subtract(e.toTimestamp(t),r)},e.monthsAgo=function(t,n){const r=e.copy(t);return r.setMonth(t.getMonth()-n),e.toTimestamp(r)},e.parseDate=function(i){let a=""+i;const o=a.match(n);if(o){const[,e,t]=o;a=`${e}T${t}Z`}if(o||a.match(t))return r.ij(new Error(`Failed to parse date from: ${i}`))(e.create(a));const s=new Date(a);return isNaN(s.getTime())?r.t$(new Error(`Failed to parse date from: ${i}`)):r.ij(new Error(`Failed to parse date from: ${i}`))(s)},e.Eq={equals:(e,t)=>e.getTime()===t.getTime()}})(c||(c={})),(e=>{function t(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()))}(e.Timestamp||(e.Timestamp={})).now=()=>e.toTimestamp(e.now()),e.toTimestamp=function(e){return e.getTime()},e.now=function(){return t(c.now())},e.fromLocal=t})(d||(d={}))},19371:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(92379),a=n(90023),o=n(13391),s=n(94032),l=n(47311),c=n(63532),d=n(85156),u=n(58303),p=n(84358),m=n(28627);!function(e){var t=e.Manager=function(e){var t=e.children,n=e.cardWidth,r=s.Dx(n).pipe(l.shareReplay({refCount:!0,bufferSize:1}));return m.P.useSingleton("CardWidth.Manager"),m.P.useSubscriptionTo(r),i.createElement(g.Provider,{value:r},t)},n=(e.DefaultManager=function(e){var r=e.children;return m.P.useSingleton("CardWidth.DefaultManager"),i.createElement(t,{cardWidth:n(h)},r)},e.withCardWidthEffect=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return e.pipe(c.b((function(e){return t(u.G(e))})),d.x(t.bind(null,u.YP)),l.shareReplay({refCount:!0,bufferSize:1}))}),r=e.defaultCardWidthSetter=function(e){f(document.documentElement,e)},h=e.defaultSizeObserver=o.h.create(400),g=e.Context=i.createContext(h),f=e.setRootCssVar=function(e,t){e.style.setProperty("--cardWidth",(0,a.zG)(t,u.UI(String),p.QP))}}(r||(r={}))},73799:(e,t,n)=>{n.d(t,{A:()=>u,a:()=>r});var r,i=n(99210),a=n(85184),o=n(32490),s=n(92379),l=n(21138),c=n(12518),d=n(17572);!function(e){!function(e){e.supportsSVGDominantBaseline="supportsSVGDominantBaseline",e.supportsSetGoalsLoader="supportsSetGoalsLoader",e.onlyTrustedEvents="onlyTrustedEvents"}(e.Flag||(e.Flag={}));e.Context=s.createContext(l.Y.invariantContent("PlatformEnvironment"));e.Mock=function e(){(0,i._)(this,e),(0,o._)(this,"has",(function(){return!1})),(0,o._)(this,"actions",{openUrl:function(){return c.F2(void 0)},openPopup:function(){return c.F2(void 0)}})}}(r||(r={}));var u=function(){function e(){(0,i._)(this,e),(0,o._)(this,"actions",{openUrl:function(e){return d.vM((function(){throw new Error("Not implemented")}))},openPopup:function(e){return d.vM((function(){throw new Error("Not implemented")}))}})}return(0,a._)(e,[{key:"has",value:function(e){throw new Error("Not implemented")}}]),e}()},66836:(e,t,n)=>{n.d(t,{$:()=>f});var r,i=n(32490),a=n(84910),o=n(78520),s=n(42927),l=n(92379),c=n(64297),d=n(24909),u=n(48906),p=n(94032),m=n(75068),h=n(98227),g=n(1755);function f(e){var t=e.wrapperClassName,n=e.variation,r=e.isIdle,i=(e.ref,e.label),c=(0,s._)(e,["wrapperClassName","variation","isIdle","ref","label"]);return l.createElement(d.F.span,{"data-role":"spinner",role:"status","aria-busy":!Boolean(r),"aria-live":Boolean(r)?"off":"polite","aria-label":null!=i?i:"Content is loading.",className:t},p.ab(n,(function(e){return l.createElement(f.Svg,(0,o._)((0,a._)({},c),{type:e,isIdle:r}))})))}(r=f||(f={})).getClassName=function(e){return function(t){switch(t){case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"yellowPremium":return e.yellowPremium;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,c.vE)(t)}}},r.Svg=function(e){var t=e.className,n=e.size,r=void 0===n?64:n,i=e.strokeWidth,d=void 0===i?2:i,p=e.type,m=e.name,h=e.isIdle,g=(0,s._)(e,["className","size","strokeWidth","type","name","isIdle"]),y=l.useRef(null),v=l.useRef(null);return l.useEffect((function(){return(0,c.kG)(null!==y.current,"groupEl should be already created"),v.current=y.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return v.current.cancel()}}),[]),l.useEffect((function(){(0,c.kG)(null!==v.current,"groupAnimation should be already created");var e=v.current;Boolean(e.play)&&(!0===h?e.pause():"running"!==e.playState&&e.play())})),l.createElement("svg",(0,a._)((0,o._)((0,a._)({"data-role":m},(0,u.Sh)(t)),{viewBox:"25 25 50 50",width:r,height:r,"aria-hidden":!0}),g),l.createElement("g",{transform:"translate(50 50)"},l.createElement("g",{ref:y},l.createElement("circle",(0,o._)((0,a._)({},(0,u.Sh)(E.path,!0===h&&x,f.getClassName(E)(p))),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:d,strokeMiterlimit:"10"})))))};var y=200,v=h.ux.keyframes({"0%":{strokeDasharray:"1px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(1)},"50%":{strokeDasharray:"89px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(-35)},"100%":{strokeDasharray:"89px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(-124)}}),x="spinnerIdle",I={animation:"".concat(v," 2s ease-in-out infinite"),strokeDasharray:"1px, ".concat(h.ux.px(y)),strokeDashoffset:h.ux.px(1),strokeLinecap:"round",$nest:(0,i._)({},"&.".concat(x),{animationIterationCount:0})},b={stroke:m.Il.CoreGreen50},S={stroke:m.Il.CoreBlue50},C={stroke:m.Il.CoreNeutral0},w={stroke:g.FW},A={stroke:m.Il.CoreCyan50},E=h.ux.stylesheet({path:[I],green:[b],blue:[S],white:[C],gray:[w],cyan:[A]})},90742:(e,t,n)=>{n.d(t,{n:()=>d});var r=n(99210),i=n(85184),a=n(19926),o=n(92440),s=n(23476),l=n(26446);var c,d,u=n(91267),p=n(12518),m=n(90023),h=n(2123);!function(e){var t=function(){function e(){(0,r._)(this,e)}return(0,i._)(e,[{key:"getRect",value:function(){return p.F2({rootClientRect:h.UL.empty,clientRects:[h.UL.empty]})}}]),e}();e.Mock=t}(c||(c={})),function(e){var t=e.relativeToViewport=function(e){var t,n,r=(n=e.clientRects,(0,a._)(n)||(0,o._)(n)||(0,l._)(n)||(0,s._)()),i=r[0],c=r.slice(1);return(0,m.zG)((t=h.UL).join.apply(t,[i].concat((0,u._)(c))),p.fS((function(){return h.UL.empty})))};e.relativeToRoot=function(e){return(0,h.SO)(t(e),e.rootClientRect)},e.relativeToRootFirst=function(e){return(0,h.SO)(e.clientRects[0],e.rootClientRect)},e.relativeAndAbs=function(e){var n=t(e);return{abs:n,relative:(0,h.SO)(n,e.rootClientRect)}}}(d||(d={}))},44970:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(99210),a=n(67225),o=n(98192),s=n(64297),l=n(29227);!function(e){!function(e){!function(e){e.create="create",e.update="update",e.remove="remove"}(e.ActionType||(e.ActionType={})),function(e){e.getEmpty=function(){return{created:new Map,updated:new Map,removed:new Map}}}(e.Result||(e.Result={}))}(e.Change||(e.Change={}));var t=function(e){(0,a._)(n,e);var t=(0,o._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return n}(s.sH);e.CollapsedMarkError=t,function(e){e.id="64656E616E69",e.generateActiveWordRandomId=function(){return(0,l.fg)(10)},e.generateSynonymOnboardingId=function(e){return e+"9f2d9601b324bb6c1e36737e59ed3d96"}}(e.SynonymMark||(e.SynonymMark={}))}(r||(r={}))},36554:(e,t,n)=>{n.d(t,{W:()=>O});var r=n(92379),i=n(84910),a=n(78520),o=n(42927),s=n(98227),l=s.ux.style({position:"absolute",width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0,0,0,0)",whiteSpace:"nowrap",border:0}),c=function(e){var t=e.children,n=(0,o._)(e,["children"]);return r.createElement("div",(0,a._)((0,i._)({},n),{className:l}),t)},d=n(41598),u=n(35917),p=n(48906),m=n(90132),h=n(36466);const g={position:"relative",$nest:{"&:not(:last-child)":{marginBottom:s.ux.rem(.5)}}},f={fontWeight:700,color:h.I.Text.Pro.Default},y={width:s.ux.percent(100),display:"flex",justifyContent:"space-between",alignItems:"center",$nest:{"&:hover":{cursor:"pointer"}}},v={transition:"transform .25s"},x={display:"flex",flexDirection:"column",marginLeft:s.ux.rem(1.875),maxWidth:s.ux.rem(15)},I=s.ux.prefixedStylesheet("accordion",{accordion:[{padding:0}],accordionItem:[g],title:[f],button:[y],arrow:[v],arrowRotated:[v,{transform:"rotate(180deg)"}],content:[x],hiddenContent:[{display:"none"}]}),b=e=>r.createElement("svg",{"aria-hidden":!0,className:e.className,width:"13",height:"8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m2.115.295-1.41 1.41 6 6 6-6-1.41-1.41-4.59 4.58-4.59-4.58z",fill:"#6D758D"})),S=({children:e,ariaLabelledBy:t,ariaLabel:n,className:a})=>r.createElement("div",(0,i._)({"aria-labelledby":t,"aria-label":n},(0,p.Sh)(I.accordion,a)),e),C=e=>{const{title:t,id:n,children:i,isExpanded:a,onClick:o}=e,s=`accordion-item-${n}`,l=`accordion-control-${n}`;return r.createElement("div",{className:I.accordionItem},r.createElement(m.zx,{id:l,"aria-controls":s,"aria-expanded":a,className:I.button,name:`accordion-button-${n}`,onClick:o},t,r.createElement("span",null,r.createElement(b,{className:a?I.arrowRotated:I.arrow}))),r.createElement("div",{id:s,"aria-hidden":!a,className:a?I.content:I.hiddenContent,"data-name":`accordion-content-${n}`},i))},w={marginTop:s.ux.rem(1.5)},A={color:h.I.Text.Pro.Default,marginLeft:s.ux.rem(.6)},E={fontSize:s.ux.rem(.9),lineHeight:s.ux.rem(1.25),color:h.I.Text.Pro.Default,maxWidth:s.ux.rem(15),margin:0},k=s.ux.prefixedStylesheet("checklist",{listItemTitleContainer:[{display:"flex",alignItems:"center"}],list:[w],listItemTitle:[A],listItemDescription:[E]}),_={display:"flex",justifyContent:"center",alignItems:"center",height:s.ux.px(20),width:s.ux.px(20),borderRadius:s.ux.percent(100),border:"1px solid",transition:"border-color .25s ease, background-color .25s ease"},T={borderColor:h.I.Border.Success.Default,backgroundColor:h.I.Background.Success.Default},M={borderColor:h.I.Border.Success.Default,backgroundColor:h.I.Background.Success.Subdued,$nest:{"> svg":{display:"none"}}},G={borderColor:h.I.Border.Base.Default,backgroundColor:h.I.Background.Neutral.Default},L=s.ux.prefixedStylesheet("completion_icon",{completed:[_,T],active:[_,M],notCompleted:[_,G]}),D=()=>r.createElement("div",{className:L.completed},r.createElement("svg",{"aria-hidden":!0,width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1 4.89 4.08 8 11 1",stroke:"#fff",strokeLinecap:"round"}))),N=e=>r.createElement("div",{className:e.isExpanded?L.active:L.notCompleted},r.createElement("svg",{"aria-hidden":!0,width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M1 4.89 4.08 8 11 1",stroke:"#fff",strokeLinecap:"round"}))),z=e=>e.completionState.isCompleted?r.createElement(D,null):r.createElement(N,{isExpanded:e.completionState.isExpanded}),{Button:P}=u.Z,F=({title:e,completionState:t})=>r.createElement("div",{className:k.listItemTitleContainer},r.createElement(z,{completionState:t}),r.createElement(P,{className:k.listItemTitle},e),r.createElement(c,null,t.isCompleted?"Completed":"Uncompleted")),O=e=>{const{allChecklistItems:t,completedItems:n,expandedItems:i,ariaLabelledBy:a,onExpandItem:o,getCTA:s}=e;return r.createElement(S,{className:k.list,ariaLabelledBy:a},t.map((({description:e,id:t,title:a})=>{const l={isCompleted:n.items.has(t),isExpanded:i.has(t)};return r.createElement(C,{key:t,id:t,title:r.createElement(F,{title:a,completionState:l}),isExpanded:l.isExpanded,onClick:()=>o(t)},r.createElement("p",{className:k.listItemDescription},e),r.createElement(d.L,{small:!0}),s(t))})))}},12589:(e,t,n)=>{n.d(t,{EQ:()=>u,Iy:()=>i,dC:()=>r});var r,i,a,o=n(32490),s=n(58303),l=n(90023),c=n(13391),d=n(47311);!function(e){e.SetGoals="SetGoals",e.Performance="Performance"}(r||(r={})),function(e){e.setGoals=e=>({type:r.SetGoals,source:e}),e.performance={type:r.Performance}}(i||(i={}));class u{show(e){return this.preload(e).pipe(d.switchMap((e=>this.showPreloaded(e))))}showPreloaded(e){return d.defer((()=>{const t=new d.BehaviorSubject("opened");return this.state.set(s.G(e({onClose:()=>{this.state.set(s.YP),t.next("closed"),t.complete()}}))),t}))}preload(e){const t=JSON.stringify(e);if(this._modalFactoryCache.has(t)){const e=this._modalFactoryCache.get(t);return d.of(e)}return d.defer((()=>this._modalViews.load(e))).pipe(d.tap((e=>{this._modalFactoryCache.set(t,e)})))}hideAll(){this.state.set(s.YP)}constructor(e){(0,o._)(this,"_modalViews",void 0),(0,o._)(this,"state",void 0),(0,o._)(this,"_modalFactoryCache",void 0),this._modalViews=e,this.state=c.h.create(s.YP),this._modalFactoryCache=new Map}}!function(e){e.Mock=class{show(e){return d.EMPTY}showPreloaded(e){return d.EMPTY}preload(e){return d.EMPTY}constructor(){(0,o._)(this,"state",c.h.create(s.YP)),(0,o._)(this,"hideAll",l.Q1)}}}(a||(a={}))},18777:(e,t,n)=>{n.d(t,{Q:()=>r});var r,i=n(58303),a=n(90023);!function(e){e.group=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:a})=>(void 0===e[n]&&(e[n]={group:t,category:n,categoryHuman:r,count:0,lensName:"",bundleInfo:i.YP}),e[n].count+=a,e)),{})).sort(((e,t)=>t.count-e.count))},e.groupByGroup=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:a,lensName:o="",bundleInfo:s=i.YP})=>(void 0===e[o]&&(e[o]={group:t,category:n,categoryHuman:r,count:0,lensName:o,bundleInfo:s}),e[o].count+=a,e)),{})).sort(((e,t)=>t.count-e.count))},e.groupByBundleInfo=function(e){return Object.values(e.reduce(((e,{group:t,category:n,categoryHuman:r,cost:o,lensName:s="",bundleInfo:l=i.YP})=>{const c=(0,a.zG)(l,i.fS((()=>r)));return void 0===e[c]&&(e[c]={group:t,category:n,categoryHuman:r,count:0,lensName:s,bundleInfo:l}),e[c].count+=o,e}),{})).sort(((e,t)=>t.count-e.count))}}(r||(r={}))},97244:(e,t,n)=>{n.d(t,{Ek:()=>f});var r,i,a=n(32490),o=n(21147),s=n(58303),l=n(90023),c=n(9141),d=n(64297),u=n(72111),p=n(12518),m=n(17572),h=n(49445),g=n(87295);!function(e){e.show={show:e=>`A(#${e.alternativeId})`},e.eq=o.MW({alternative:g.r3.eq,alternativeId:c.Eq,alertId:c.Eq})}(r||(r={}));class f{pushChanges(e){h.RI.isDelta(e)&&this._alternatives.forEach((t=>{(0,l.zG)(t.alternative.rebase(e.delta),s.g_(l.Q1,(e=>t.alternative=e)))}))}registerAlternative(e,t){const n=f.getAlternativeId(t),r={alternative:e,alternativeId:n,alertId:t};return this._alternatives.set(n,r),r}deregisterAlternative(e){return(0,l.zG)(this.getAlternative(e),p.tS((({alternative:e,alternativeId:t})=>m.vM((()=>((0,d.kG)(this._alternatives.delete(t),"alternative should exist before deletion"),e))))))}constructor(){(0,a._)(this,"_log",u.C8.Logging.getLogger("alternative_manager",u.zW.i.DEBUG)),(0,a._)(this,"_alternatives",new Map),(0,a._)(this,"getAlternative",(e=>{const t=this._alternatives.get(e);if(t)return p.F2(t);{const t=`Tried to retrieve non-registered alternative: ${e}`;return this._log.error(t),p.t$(new Error(t))}}))}}(0,a._)(f,"_alternativeCounter",0),(0,a._)(f,"getAlternativeId",(e=>`alt-${e}-${f._alternativeCounter++}`)),function(e){e.mock={registerAlternative:(e,t)=>({alternative:e,alternativeId:f.getAlternativeId(t),alertId:t}),getAlternative:()=>p.t$(new Error("Not implemented in mock")),deregisterAlternative:()=>p.F2(g.r3.create([]))}}(i||(i={}))},61230:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(48886),a=n(97225),o=n(90023),s=n(9141),l=n(84210),c=n(26308),d=n(7773),u=n(83233),p=n(81405),m=n(44204);!function(e){let t;!function(e){e.show=c.vh.getShow(s.di,u.h.show),e.eq=c.vh.getEq(u.h.Id.ord,u.h.ord),e.empty=()=>c.vh.empty();e.toRegistered=function(e){return c.vh.fromMutation((t=>{(0,o.zG)(e,c.vh.forEach(((e,n)=>u.h.isRegistered(e)&&t.set(n,a.t$(e))),((e,n,r)=>{u.h.isRegistered(e)?u.h.isRegistered(n)?t.set(r,a.Hk(e,n)):t.set(r,a.t$(e)):u.h.isRegistered(n)&&t.set(r,a.F2(n))}),((e,n)=>u.h.isRegistered(e)&&t.set(n,a.F2(e)))))}))},e.filter=function(e){return c.vh.filter(e,((t,n)=>e(t)&&e(n)),e)}}(t=e.Diff||(e.Diff={}));e.empty=p.v.iso.wrap(p.v.empty),e.eq=l.Eh(p.v.eqShow),e.show=p.v.eqShow;e.get=function(e){return(0,o.ls)(p.v.iso.unwrap,p.v.get(e))},e.reduce=function(e,t){return(0,o.ls)(p.v.iso.unwrap,p.v.reduce(e,t))},e.diff=function(e,t){return p.v.diff(p.v.iso.unwrap(e),p.v.iso.unwrap(t))},e.isEmpty=function(e){return 0===p.v.iso.unwrap(e).entries.size},e.find=function(e){return(0,o.ls)(p.v.iso.unwrap,p.v.find(e))},e.size=function(){return(0,o.ls)(p.v.iso.unwrap,p.v.size)},e.from=function(e){return(0,o.zG)(p.v.createDiff({added:e.reduce(((e,t)=>e.set(t.id,u.h.create(t))),new Map)}),d.T.recover(o.Q1),m.r.applyDiff,i.UI((0,o.ls)(d.T.recover(o.Q1),p.v.iso.wrap)))(p.v.empty)}}(r||(r={}))},81405:(e,t,n)=>{n.d(t,{v:()=>x});var r=n(84910),i=n(59833),a=n(58303),o=n(1906),s=n(97225),l=n(90023),c=n(9615),d=n(84210),u=n(64297),p=n(26308),m=n(17572),h=n(69781),g=n(12518),f=n(2245),y=n(21147);const v={equals:()=>!0};var x,I=n(83233);!function(e){e.iso=d.k4(),e.empty={entries:new Map,order:[],latestChangeDiff:p.vh.empty(),diffVersion:0};function t(e,t){return n=>n.order.reduce(((e,r)=>((0,u.kG)(n.entries.has(r),"got corrupted state"),t(e,n.entries.get(r)))),e)}e.get=function(e){return t=>a.ij(t.entries.get(e))},e.find=function(e){return t(a.YP,((t,n)=>(0,l.zG)(t,a.wp((()=>a.DT(e)(n))))))},e.reduce=t;e.size=e=>e.entries.size;function n({added:e=new Map,updated:t=new Map,removed:n=new Map}){const r=new Map,i=p.vh.fromMutation((i=>{n.forEach(((e,t)=>{i.set(t,s.t$(e))})),e.forEach(((e,t)=>{i.has(t)?r.set(t,`alert add overlaps with alert remove: toAdd(${I.h.show.show(e)} overlapWith(${s.ZN(I.h.show,I.h.show).show(i.get(t))}))`):i.set(t,s.F2(e))})),t.forEach((([e,t],n)=>{i.has(n)?r.set(n,`alert update overlaps with unexpected alert add/remove: toUpdate(${I.h.show.show(t)}) overlapWith(${s.ZN(I.h.show,I.h.show).show(i.get(n))}))`):i.set(n,s.Hk(e,t))}))}));return r.size>0?g.t$({recovered:i,rejected:r}):g.F2(i)}e.diff=function(e,t){return 0===e.diffVersion?m.MH(n({added:t.entries})):e.diffVersion+1===t.diffVersion?t.latestChangeDiff:h.yi(I.h.ord)(e.entries,t.entries)},e.applyDiff=function(e){return t=>{const n=h.QT(h.kH.createStrict(I.h.ordShow),t.entries,e);return(0,l.zG)(n,g.Pd((n=>{const r=p.vh.fromMutation((t=>{(0,l.zG)(e,p.vh.forEach(((e,r)=>!n.rejected.has(r)&&t.set(r,s.t$(e))),((e,r,i)=>!n.rejected.has(i)&&t.set(i,s.Hk(e,r))),((e,r)=>!n.rejected.has(r)&&t.set(r,s.F2(e)))))}));return{recovered:C(n.recovered,r,t.diffVersion),rejected:n.rejected}}),(n=>C(n,e,t.diffVersion))))}},e.applyDiffLoose=function(e){return t=>{const n=h.QT(h.kH.createLoose(I.h.ordShow),t.entries,e);return(0,l.zG)(n,g.Pd((n=>({recovered:C(n.recovered,e,t.diffVersion),rejected:n.rejected})),(n=>C(n,e,t.diffVersion))))}},e.createDiff=n,e.toJSON=function(e){return{entries:Array.from(e.entries),order:e.order,latestChangeDiff:p.vh.toJSON(e.latestChangeDiff),diffVersion:e.diffVersion}};var x=e.diffEqShow=(0,r._)({},p.vh.getEq(I.h.Id.ord,I.h.ord),p.vh.getShow(I.h.Id.show,I.h.show));const b=(0,r._)({},f.Eh(I.h.Id.ord,I.h.ord),f.ZN(I.h.Id.show,I.h.show)),S=(0,r._)({},i.Eh(I.h.Id.ord),i.ZN(I.h.Id.show));e.contentEqShow=(0,r._)({},y.MW({entries:b,order:S,latestChangeDiff:v,diffVersion:v}),o.aM({entries:b,order:S,latestChangeDiff:x,diffVersion:c.di})),e.eqShow=(0,r._)({},y.MW({entries:b,order:S,latestChangeDiff:x,diffVersion:c.Eq}),o.aM({entries:b,order:S,latestChangeDiff:x,diffVersion:c.di}));function C(e,t,n){return{entries:e,order:(0,l.zG)(e,f.VO(I.h.ord),i.UI((e=>e.id))),latestChangeDiff:t,diffVersion:n+1}}}(x||(x={}))},44204:(e,t,n)=>{n.d(t,{r:()=>r});var r,i=n(12518),a=n(90023),o=n(81405);!function(e){e.empty=o.v.empty;e.applyDiff=function(e){return(0,a.ls)(o.v.applyDiffLoose(e),i.Vn((e=>({recovered:e.recovered,rejected:e.rejected}))))},e.toCheckingResult=function(e){return o.v.iso.wrap(e)}}(r||(r={}))},60908:(e,t,n)=>{n.d(t,{w:()=>p});var r,i=n(2245),a=n(58303),o=n(61179),s=n(90023),l=n(31491),c=n(26308),d=n(71112),u=n(83233);!function(e){e.modelToCounters=function(e){return u.h.isRegistered(e)?e.counters:d.R.empty}}(r||(r={}));var p,m=n(5412);!function(e){e.monoid=i.uZ(m.R.Id.ord,m.R.Meta.group),e.eq=i.Eh(m.R.Id.ord,m.R.Meta.eq),e.isEmpty=i.xb,e.lookup=i.P5(m.R.Id.ord),e.applyDiff=e=>t=>r=>(0,s.zG)(t,c.vh.foldMap(p.monoid)(d(e),u(e),n(e)),(0,l.WA)(p.monoid.concat)(r),i.hX((0,o.ff)(m.R.Meta.isEmpty))),e.updatePercentiles=e=>t=>{let n=t;return e.forEach(((e,t)=>{n=(0,s.zG)(n,i.cq(m.R.Id.ord)(t,m.R.Meta.ratioToPercentile(e)),a.g_((()=>(0,s.zG)(n,i.ZQ(m.R.Id.ord)(t,m.R.Meta.fromPercentile(e)))),s.yR))})),n};const t=(0,s.ls)(r.modelToCounters,m.R.Meta.fromAlertCounters),n=e=>n=>h(e)(n,t),d=e=>n=>h(e)(n,(0,s.ls)(t,m.R.Meta.group.inverse)),u=e=>(t,r)=>p.monoid.concat(n(e)(r),d(e)(t)),h=e=>(t,n)=>(0,s.zG)(e,i.hX((e=>e(t.alert))),i.UI((()=>n(t))))}(p||(p={}))},48640:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(84910),a=n(78520),o=n(13391),s=n(47311),l=n(94032),c=n(91167),d=n(61230),u=n(60908);!function(e){var t=e.defaultState={alerts:d.p.empty,lenses:u.w.monoid.empty};e.get=(e,r,i)=>r.pipe(s.startWith(new Map),s.combineLatest(e.pipe(s.startWith(d.p.empty),s.scan(((e,t)=>n(t,i.lensFilters)(e)),t)),p)),e.getMock=(e,t)=>{const n=o.h.create(r.defaultState);return r.get(e,t,c.t.create(c.t.defaultLensFilters,c.t.defaultTextFilters)).subscribe(l.wW(n)),n};const n=(e,t)=>n=>{const r=d.p.Diff.toRegistered(d.p.diff(n.alerts,e));return{alerts:e,lenses:u.w.applyDiff(t)(r)(n.lenses)}},p=(e,t)=>(0,a._)((0,i._)({},t),{lenses:u.w.updatePercentiles(e)(t.lenses)})}(r||(r={}))},55247:(e,t,n)=>{n.d(t,{X:()=>r});var r,i=n(64297);!function(e){let t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12",e.Step13="step13",e.Step14="step14",e.Step15="step15",e.Step16="step16",e.DocumentTitle="documentTitle",e.Synfony="synfony",e.GrammarlyGOIdeationAssistant="grammarlyGOIdeationAssistant",e.GrammarlyGORewrite="grammarlyGORewrite"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){switch(e){case t.Step2:case t.Step3:case t.Step5:case t.Step6:case t.Step7:case t.Step12:case t.Step13:case t.Step16:return!1;case t.Step1:case t.Step4:case t.Step8:case t.Step9:case t.Step10:case t.Step11:case t.Step14:case t.Step15:case t.DocumentTitle:case t.Synfony:case t.GrammarlyGOIdeationAssistant:case t.GrammarlyGORewrite:return!0;default:return(0,i.vE)(e)}}}(r||(r={}))},82051:(e,t,n)=>{n.d(t,{Xr:()=>C,wb:()=>S});var r,i,a=n(32490),o=n(90023),s=n(21684),l=n(33632),c=n(64297),d=n(31491),u=n(29227),p=n(72111),m=n(58303),h=n(12518),g=n(17572),f=n(84358),y=n(49445),v=n(22561),x=n(47311);function I(e){return null===e||(0,u.ON)(e.charCodeAt(0))}class b{pushChanges(e){y.RI.isReset(e)?this._textLength=e.length:y.RI.isDelta(e)&&(this._verify&&(0,c.hu)(e.prevLen,this._textLength,"Incorrect textLength on insert."),this._textLength+=e.length)}get textLength(){return this._textLength}constructor(e=0,t=!1){(0,a._)(this,"_textLength",void 0),(0,a._)(this,"_verify",void 0),this._textLength=e,this._verify=t}}!function(e){e.create=e=>v.SV.compose({id:e})}(r||(r={})),function(e){class t{registerRange(e,t){return r.create(e)(t)}deregisterRange(e){return v.SV.empty}findClosestToPosition(e,t){return m.YP}findRanges(e){return[]}widen(e){return(0,o.zG)(e,(e=>v.SV.alterLeft(e,1)),h.tS((e=>v.SV.alterRight(e,1))),g.MH)}narrow(e){return(0,o.zG)(e,m.DT((e=>v.SV.size(e)>1)),m.UI((e=>(0,o.zG)(e,(e=>v.SV.alterLeft(e,-1)),h.tS((e=>v.SV.alterRight(e,-1))),g.MH))))}}e.RangeManagerMock=t;e.mock=new t}(i||(i={}));const S=(e,t)=>{let n=0;const r=new Map;if(y.RI.isFlush(e))return{affected:[],changed:[]};let i=t.length+1;return y.RI.isReset(e)?t.forEach((e=>{e.start=0,e.end=0,r.set(e.meta.id,e)})):e.delta.ops.forEach((e=>{if(l.s.isRetain(e))n+=e.retain;else if(l.s.isInsert(e)){const a=n,o=(0,s.e)(t,(e=>e.end<a)),l=e.insert,c="string"==typeof l?l.length:1;if(n+=c,m.pC(o)){const e="string"==typeof l?l.charAt(l.length-1):null,n="string"==typeof l?l.charAt(0):null;for(let i=o.value;i<t.length;++i){const o=t[i];o.start<a?o.end===a?I(n)||r.set(o.meta.id,o):(r.set(o.meta.id,o),o.end+=c):o.start===o.end&&o.end===a?I(n)||r.set(o.meta.id,o):(o.start!==a||I(e)||r.set(o.meta.id,o),o.start+=c,o.end+=c)}i>o.value&&(i=o.value)}}else if(l.s.isDelete(e)){const a=n,o=(0,s.e)(t,(e=>e.end<=a));if(m.pC(o)){const n=a+e.delete;for(let i=o.value;i<t.length;++i){const o=t[i];o.start,o.start<n?(r.set(o.meta.id,o),o.start<a?o.end=o.end-Math.min(e.delete,o.end-a):o.end<=n?(o.start=a,o.end=a):(o.start=a,o.end-=e.delete)):(o.start-=e.delete,o.end-=e.delete)}i>o.value&&(i=o.value)}}})),{changed:t.slice(i),affected:Array.from(r.values())}};class C{pushChanges(e){this._log.trace("PM Incoming: ",{changes:e,currentLen:this._lenCalc.textLength});try{this._lenCalc.pushChanges(e)}catch(e){if(this._strictMode)throw e;this._log.error("TextLengthCalc check failed",e)}const t=S(e,this._rangesArray);this._verifyState&&this._verifyIsSorted();const n={changed:t.changed,affected:t.affected.map((e=>this.getRange(e.meta.id)))};return this._enableMPTE&&n.affected.length>0?this.rangeChangedMPTE.next(n.affected):(n.changed.length>0||n.affected.length>0)&&this._rangeChanged.next(n),n}registerRange(e,t){if(this._ranges.has(e))throw new Error("Range already registered "+e);this._log.trace("Registered range: "+e);const n=r.create(e)(t);return this._validateRange(n),this._ranges.set(e,n),this._rangesArray.push(n),this._rangesArray.sort(v.SV.ord.compare),n}_validateRange(e){v.SV.isValid(this._lenCalc.textLength)(e)||this._log.warn("Trying to modify corrupted range start",{range:JSON.stringify(e),length:this._lenCalc.textLength})}getRange(e){const t=this._ranges.get(e);if(void 0===t)throw new Error("Range is not registered");return t}findRanges(e){return this._rangesArray.filter(e)}deregisterRange(e){this._log.trace("deregisterRange #"+e);const t=this.getRange(e);this._verifyState&&this._verifyIsSorted(),this._ranges.delete(e);try{return(0,o.zG)((0,s.e)(this._rangesArray,(e=>e.end<t.end)),m.fS((()=>this._rangesArray.length)),(n=>{let r=n;for(;r<this._rangesArray.length&&this._rangesArray[r].meta.id!==e;)r++;return(0,c.kG)(r<this._rangesArray.length&&this._rangesArray[r].meta.id===e,"Range should be present: "+e),this._rangesArray.splice(r,1),t}))}catch(t){throw this._log.error("Cannot deregister range "+e,this._rangesArray),t}}findById(e){return m.ij(this._ranges.get(e))}findByRange(e){const t=[];return(0,o.zG)((0,s.e)(this._rangesArray,(t=>t.end<e.end)),m.fS((()=>this._rangesArray.length)),(n=>{let r=n;for(;r<this._rangesArray.length&&this._rangesArray[r].end===e.end;)this._rangesArray[r].start===e.start&&t.push(this._rangesArray[r]),r++;return t}))}findIntersections(e){const t=[];return(0,o.zG)((0,s.e)(this._rangesArray,(t=>t.end<e.start)),m.fS((()=>this._rangesArray.length)),(n=>{let r=n;for(;r<this._rangesArray.length;){const n=this._rangesArray[r];n.end>e.start&&e.end>n.start&&t.push(this._rangesArray[r]),r++}return t}))}findClosestToPosition(e,t){const n=this._rangesArray.filter(t);return(0,o.zG)((0,s.e)(n,(t=>e>=t.end)),m.fS((()=>n.length)),(t=>{const r=m.ij(n[t]),i=m.ij(n[t-1]);return(0,o.zG)(r,m.UI((t=>(0,o.zG)(i,m.g_((()=>t),(n=>t.start-e<=e-n.end?t:n))))),f.vx(i))}))}getRegisteredRanges(){return this._rangesArray}getTextLength(){return this._lenCalc.textLength}_verifyIsSorted(){for(let e=1;e<this._rangesArray.length;++e)this._rangesArray[e-1].end>this._rangesArray[e].end&&(this._log.isEnabled(p.zW.i.DEBUG)?this._log.error("Houston, we have a problem: Array is not sorted anymore @ "+e,this._rangesArray):this._log.error("Houston, we have a problem: Array is not sorted anymore"),this._rangesArray.sort(v.SV.ord.compare))}toString(){return JSON.stringify(this,void 0,2)}toJSON(){return{textLength:this.getTextLength(),ranges:this._rangesArray}}constructor(e=0,t=!1,n=!1){(0,a._)(this,"_enableMPTE",void 0),(0,a._)(this,"_strictMode",void 0),(0,a._)(this,"_log",void 0),(0,a._)(this,"_verifyState",void 0),(0,a._)(this,"_lenCalc",void 0),(0,a._)(this,"_ranges",void 0),(0,a._)(this,"_rangesArray",void 0),(0,a._)(this,"_rangeChanged",void 0),(0,a._)(this,"rangeChanged",void 0),(0,a._)(this,"rangeChangedMPTE",void 0),(0,a._)(this,"widen",void 0),(0,a._)(this,"narrow",void 0),this._enableMPTE=t,this._strictMode=n,this._log=p.C8.Logging.getLogger("position_manager",p.zW.i.DEBUG),this._verifyState=this._log.isEnabled(p.zW.i.INFO),this._ranges=new Map,this._rangesArray=[],this._rangeChanged=new x.Subject,this.rangeChanged=this._rangeChanged,this.rangeChangedMPTE=new x.Subject,this.widen=e=>(this._validateRange(e),(0,o.zG)(e,(e=>v.SV.alterLeft(e,e.start<=0?0:1)),h.tS((e=>v.SV.alterRight(e,e.end>=this._lenCalc.textLength?0:1))),h.fS((t=>(this._log.error("TextRange mutation error",t),e))))),this.narrow=e=>(this._validateRange(e),(0,o.zG)(e,m.DT((e=>v.SV.size(e)>1)),m.UI((e=>(0,o.zG)(e,(e=>v.SV.alterLeft(e,e.meta.increasedLeft>0?-1:0)),h.tS((e=>v.SV.alterRight(e,e.meta.increasedRight>0?-1:0))),h.fS((t=>(this._log.error("TextRange mutation error",t),e)))))))),this._lenCalc=new b(e,this._verifyState),(0,d.iR)("positions",(()=>{this._log.info("PositionManager",this.toString()),this._verifyIsSorted()}))}}},48463:(e,t,n)=>{n.d(t,{E:()=>r});const r=(0,n(28820).createTypeStyle)()},90277:(e,t,n)=>{n.d(t,{sJ:()=>p});var r=n(58303),i=n(90023),a=n(54553),o=n(47311),s=n(21961),l=n(84825),c=n(57576),d=n(525),u=n(82589);function p(e){return(t,n,r,i,o,s)=>a.Z.composeKnot({content:a.Z.fromSideEffect((n=>{m(t)(n);const r=n.action.action;"item"===r.key&&e(r.action)}),g(n,o,s)),root:h(n,r,i)})}function m(e){return t=>{switch(t.action.action.action.kind){case u.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case u.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}}const h=(e,t,n)=>a.Z.fromSideEffect((e=>{t.next(e.element)}),o.combineLatestStatic([n,e.view("cardsHeight")]).pipe(o.map((([e,t])=>({disableUserActions:e,height:t}))),o.startWith({disableUserActions:!1,height:0}))),g=(e,t,n)=>{const a=e.view(d.v.Prism.items),p=e.pipe(o.map((e=>e.itemsOrd))),m=e.pipe(o.map((0,i.ls)(c.In.getActiveItem,r.UI(s.X.getId)),o.distinctUntilChanged())),h=e.view(t.getActiveAlertsCount).view((e=>0===e));return o.combineLatestStatic([a,m,h,p]).pipe(o.map((([e,a,o,s])=>{const c=(0,i.zG)(e.find((e=>e.positionState.watched)),r.UI((e=>e.value))),d=e.getAt(e.size-1);return e.filter((e=>e.positionState.visible||e.positionState.watched&&((e,t)=>!!(0,i.zG)(t,r.Gg((t=>t.id===e.id)))||(0,i.zG)(t,r.Gg((e=>e.positionState.isHeightValid))))(e,c))).map((e=>function(e){return(t,n,a,o)=>s=>{const c=(0,i.zG)(t,r.Gg((e=>e===s.id)));return{cell:{item:e.viewState(n,a)(s),root:{height:{value:s.positionState.height,watched:s.positionState.watched&&!e.isScheduledToDispose(s),isValid:s.positionState.isHeightValid},position:{top:s.positionState.absTop,animationInProgress:s.positionState.animationInProgress},layer:c||l.o.isAnimatable(s)&&s.visualState.incomplete&&!(0,i.zG)(s.visualState.from,r.Gg((e=>"focused"===e)))?u.H.Layer.front:u.H.Layer.back}},root:s.id,hashCode:s.hashCode.bind(s),equals:e=>s.equals(e.cell.item.view),compare:e=>o.compare(s,e.cell.item.view)}}}(t)(a,o,(0,i.zG)(d,r.Gg((t=>t.id===e.id))),s)(e)),n(s))})))}},96584:(e,t,n)=>{n.d(t,{A:()=>r});var r,i=n(84910),a=n(78520),o=n(92379),s=n(58303),l=n(24909),c=n(48906),d=n(31491),u=n(54553),p=n(98227),m=n(82589),h=n(41816),g=n(47311);!function(e){let t;function n(e){return u.UI.List.make(h.aW.getFoldableWithIndex(),p(e))}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=n,e.cardList=function(e){return u.UI.Knot.make(r,{content:n(e)})};var r=e.ScrollableBox=u.UI.Grid.make((({notify:e,view:n,slots:r})=>o.createElement(l.F.div,(0,a._)((0,i._)({},(0,c.Sh)(n("disableUserActions").pipe(g.map((0,d.RN)(y.disableUserActions,void 0))),y.scrollContent)),{"data-purpose":"scrollable-box",style:{height:n("height")},mount:n=>e({kind:t.onMount,element:s.ij(n)})()}),r.content)));function p(e){return u.UI.Knot.make(v,{cell:u.UI.Knot.make(m.H.Cell,{item:u.UI.Composite.make(f,e)})})}e.cell=p;var f=e.CardStyleProvider=u.UI.Grid.make((({slots:e})=>o.createElement(l.F.div,{className:y.cardWrapper},e.children))),v=e.IdProvider=u.UI.Grid.make((({slots:e,state:t})=>o.createElement(l.F.div,{"data-id":t},e.cell)))}(r||(r={}));const f={margin:`${p.ux.rem(.5)} 0`,background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:p.ux.rem(-.5),width:p.ux.rem(.5),height:p.ux.percent(100),background:"none",content:"''"}}},y=p.ux.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[f]})},33671:(e,t,n)=>{n.d(t,{Q:()=>le});var r=n(92379),i=n(24909),a=n(54553),o=n(47311),s=n(25),l=n(74775),c=n(84856),d=n(25188),u=n(84910),p=n(78520),m=n(58303),h=n(90023),g=n(31491),f=n(59179),y=n(69088),v=n(62552),x=n(8867);class I{constructor(e){this._keySelector=e}call(e,t){return t.subscribe(new b(e,this._keySelector))}}class b extends y.Lv{constructor(e,t){super(e),this.destination=e,this._keySelector=t,this.attemptedToUnsubscribe=!1,this.count=0,this._currentGroup=m.YP}_next(e){const t=this._keySelector(e);(0,h.zG)(this._currentGroup,m.g_((()=>this._createGroup(t,e)),(({key:n,group:r})=>{n!==t?(r.complete(),this._currentGroup=m.YP,this._createGroup(t,e)):r.closed||r.next(e)})))}_createGroup(e,t){const n=new v.X(t);this._currentGroup=m.G({key:e,group:n}),this.destination.next(this._createGroupedObservable(e,n))}_createGroupedObservable(e,t){const n=new x.y((e=>{this.count++;const n=t.subscribe(e);return()=>{n.unsubscribe(),0==--this.count&&this.attemptedToUnsubscribe&&this.unsubscribe()}}));return n.key=e,n}_error(e){(0,h.zG)(this._currentGroup,m.UI((({group:t})=>t.error(e)))),this._currentGroup=m.YP,this.destination.error(e)}_complete(){(0,h.zG)(this._currentGroup,m.UI((({group:e})=>e.complete()))),this._currentGroup=m.YP,this.destination.complete()}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}var S,C=n(20161),w=n(24666),A=n(84714),E=n(72111),k=n(75068),_=n(23006),T=n(98227),M=n(73141),G=n(21961),L=n(90658),D=n(91468),N=n(91045),z=n(91269),P=n(76520),F=n(12331),O=n(81100);!function(e){e.Mini=({card:e,actions:t})=>r.createElement(i.F.Fragment,null,e.pipe(f.U((e=>L.i.isToneAIItem(e)?r.createElement(O.Y.BundleMini,{card:e,actions:t}):L.i.isEthicalAIItem(e)?r.createElement(F.T.Mini,{card:e,actions:t,useBundleContainer:!0}):r.createElement(P.P.Bundle,{card:e,actions:t}))))),e.Full=({card:e,actions:n,renderCard:l})=>{const{isChecking:c,isCheckingGlobal:d,transform:u}=G.X.useCardStates(e),p=e=>(s("CardBundle").error("card type not supported:",e),null),m=e.pipe((e=>e.lift(new I((e=>e.activeAlert.id)))),C.w((e=>e.pipe(w.x(((e,t)=>e.activeAlertIndex===t.activeAlertIndex)),f.U((t=>({activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,h.zG)(e,w.x(((e,t)=>e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId)),o.shareReplay({bufferSize:1,refCount:!0}))}))))))),g=(e,t)=>{const a=t.alerts.length,o=1===a?se.bundleInnerContainer:2===a?se.bundleInnerContainer2Cards:se.bundleInnerContainerNCards;return r.createElement(i.F.div,{className:o},l?l({card:t,actions:n,isChecking:c,isCheckingGlobal:d,transform:e}):r.createElement(z.J,{card:t,actions:n,isChecking:c,transform:e,isCheckingGlobal:d}))};return r.createElement(i.F.Fragment,null,e.pipe(f.U((o=>L.i.isIndependentBundleItem(o)?g(u,o):r.createElement(a,{card:e,actions:n},r.createElement(t,{state:m,stateToClassMapper:(e,t)=>{if(!e)return{prev:(0,_.EJ)(""),next:(0,_.EJ)("")};if(e.activeAlertId===t.activeAlertId)return{prev:(0,_.EJ)(se.inBundleToUpdatedCardOld),next:(0,_.EJ)(se.inBundleToUpdatedCardNew)};if(e.activeAlertIndex===t.activeAlertIndex)return{prev:(0,_.EJ)(se.inBundleToUpdatedCardOld),next:(0,_.EJ)(se.inBundleToUpdatedCardNew)};return e.activeAlertIndex<t.activeAlertIndex?{prev:(0,_.EJ)(se.inBundleToNextCardOld),next:(0,_.EJ)(se.inBundleToNextCardNew)}:{prev:(0,_.EJ)(se.inBundleToPrevCardOld),next:(0,_.EJ)(se.inBundleToPrevCardNew)}}},(e=>r.createElement(i.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:h.Q1},(0,h.zG)(e.state.card,f.U((0,h.ls)(L.i.match({super:p,ethicalAI:p,takeaway:t=>g("prev"===e.type?A.of(t.transform):u,t),synfony:t=>g("prev"===e.type?A.of(t.transform):u,t),shortenIt:t=>g("prev"===e.type?A.of(t.transform):u,t),toneAI:t=>g("prev"===e.type?A.of(t.transform):u,t),suggestedSnippet:t=>g("prev"===e.type?A.of(t.transform):u,t),knowledgeHubSuggestedTerm:t=>g("prev"===e.type?A.of(t.transform):u,t),default:t=>g("prev"===e.type?A.of(t.transform):u,t)}),G.X.foldCard)))))))))))};class t extends _.l5{}const n=({alertCount:e})=>1===e?r.createElement(r.Fragment,null):2===e?r.createElement("div",{className:se.bundleFakeCard1}):r.createElement(r.Fragment,null,r.createElement("div",{className:se.bundleFakeCard1}),r.createElement("div",{className:se.bundleFakeCard2})),a=({children:e,card:t,actions:a})=>r.createElement(i.F.div,{className:se.bundleCardWrapper},r.createElement(N.PS,{card:t,actions:a}),r.createElement(i.F.div,{className:se.cardBundleContainer},e,(0,h.zG)((e=>(0,h.zG)(e,f.U((e=>m.G(e.alerts.length)))))(t),f.U(m.UI((e=>r.createElement(n,{key:e,alertCount:e})))),f.U(m.WG)))),s=(0,g.HP)(E.C8.Logging.getLogger)}(S||(S={}));const R=.25,$="0 1px 8px rgba(109, 117, 141, .18)",B=T.ux.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),U=T.ux.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),j=T.ux.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),W=T.ux.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),H=T.ux.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),Y={position:"relative",borderRadius:T.ux.rem(M.Jr),background:k.Il.CoreNeutral0,boxShadow:$,zIndex:2},V={marginTop:T.ux.rem(.75)},Q={marginTop:T.ux.rem(1.25)},q={position:"absolute",top:T.ux.px(-5),right:T.ux.rem(.5),left:T.ux.rem(.5),zIndex:-1,display:"block",height:T.ux.percent(100),borderRadius:T.ux.rem(M.Jr),backgroundColor:k.Il.CoreNeutral1,boxShadow:$,content:"' '"},J={position:"absolute",top:T.ux.px(-10),right:T.ux.rem(1),left:T.ux.rem(1),zIndex:-2,display:"block",height:T.ux.rem(2),borderRadius:T.ux.rem(M.Jr),backgroundColor:k.Il.CoreNeutral10,boxShadow:$,content:"' '"},X={borderRadius:T.ux.rem(.75),background:k.Il.CoreNeutral20,margin:`${T.ux.rem(-.25)} ${T.ux.rem(-.25)}`,padding:`${T.ux.rem(.25)} ${T.ux.rem(.25)}`,$nest:{[`& .${D.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${D.g.fullCardSelector}`]:{padding:`${T.ux.rem(.75)} ${T.ux.rem(.5)} ${T.ux.rem(.5)} ${T.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${T.ux.rem(-.5)})`}}},Z={position:"absolute",top:T.ux.rem(.8),right:T.ux.rem(1),margin:0},K={borderRadius:T.ux.rem(M.Jr),background:k.Il.CoreNeutral0,boxShadow:$},ee={display:"block",position:"absolute",top:0,$nest:{[`& .${D.g.bundleInnerContainerSelector}`]:{margin:0}}},te={animation:`${H} ${T.ux.seconds(R)} ease-out`},ne={animation:`${j} ${T.ux.seconds(R)} ease-out`},re={animation:`${U} ${T.ux.seconds(R)} ease-in`},ie={animation:`${W} ${T.ux.seconds(R)} ease-in`},ae={display:"none",animation:`${B} ${T.ux.seconds(R)} ease-in`},oe={animation:`${B} ${T.ux.seconds(R)} ease-in`},se=(0,p._)((0,u._)({},T.ux.stylesheet({bundleInnerContainer:[Y],bundleCardWrapper:[X],minimalBetaLabel:[Z],compactCardContainer:[K],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[ee],inBundleToPrevCardOld:[ee,te],inBundleToPrevCardNew:[ne],inBundleToNextCardOld:[ee,re],inBundleToNextCardNew:[ie],inBundleToUpdatedCardOld:[ae],inBundleToUpdatedCardNew:[oe]})),{bundleInnerContainer:T.ux.joinClasses([D.g.bundleInnerContainerSelector,T.ux.style(Y)]),bundleInnerContainer2Cards:T.ux.joinClasses([D.g.bundleInnerContainerSelector,T.ux.style(Y,V)]),bundleInnerContainerNCards:T.ux.joinClasses([D.g.bundleInnerContainerSelector,T.ux.style(Y,Q)]),bundleFakeCard1:T.ux.joinClasses([D.g.bundleFakeCard1Selector,T.ux.style(q)]),bundleFakeCard2:T.ux.joinClasses([D.g.bundleFakeCard2Selector,T.ux.style(J)])});var le;!function(e){e.Card=e=>a.UI.Node.make((({view:t})=>{const n=t("view");return r.createElement(i.F.Fragment,null,n.pipe(o.distinctUntilChanged(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),o.map((i=>r.createElement(c.p.Provider,{card:n,cardVisibleViewportHeight:t("visibleViewportHeight")},(a=>r.createElement(l.b.Card,{mount:a,miniCard:r.createElement(S.Mini,{card:n,actions:e}),fullCard:r.createElement(S.Full,{card:n,actions:e}),successCard:r.createElement(s.A.Success,{cardData:i,isLastCard:t("isLastCard"),actions:e}),feedbackForm:r.createElement(s.A.FeedbackForm,{cardData:i,actions:e}),mutedCard:r.createElement(s.A.MutedAlert,{cardData:i,actions:e}),actions:e,card:i,transitionClassMapper:d.a})))))))}))}(le||(le={}))},51170:(e,t,n)=>{n.d(t,{p:()=>r});var r,i=n(92379),a=n(90023),o=n(24909),s=n(54553),l=n(47311),c=n(25),d=n(74775),u=n(84856),p=n(14196);!function(e){e.Card=e=>s.UI.Node.make((({view:t})=>{const n=t("view");return i.createElement(o.F.Fragment,null,n.pipe(l.distinctUntilChanged(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),l.map((r=>i.createElement(u.p.Provider,{card:n,cardVisibleViewportHeight:t("visibleViewportHeight")},(a=>i.createElement(d.b.Card,{mount:a,miniCard:i.createElement(c.A.Mini,{card:n,actions:e}),fullCard:i.createElement(c.A.Full,{card:n,actions:e}),successCard:i.createElement(c.A.Success,{cardData:r,isLastCard:t("isLastCard"),actions:e}),feedbackForm:i.createElement(c.A.FeedbackForm,{cardData:r,actions:e}),actions:e,card:r,mutedCard:i.createElement(c.A.MutedAlert,{cardData:r,actions:e})})))))))})),e.DenaliCardWrapper=s.UI.Grid.make((({slots:e,view:t})=>i.createElement(o.F.div,{className:(0,a.zG)(t("layoutDensity"),l.map((e=>(0,p.f8)(e).container)))},e.children)))}(r||(r={}))},82589:(e,t,n)=>{n.d(t,{H:()=>g});var r=n(84910),i=n(78520),a=n(92379),o=n(2123),s=n(24909),l=n(48906),c=n(54553),d=n(98227),u=n(73141),p=n(47311),m=n(64570),h=n(28627);var g;!function(e){let t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={}));e.Cell=c.UI.Grid.make((({slots:e,state:c,notify:d})=>{const u=new p.ReplaySubject,g=c.pipe(p.withLatestFrom(u),p.switchMap((([e,t])=>e.position.animationInProgress?p.mergeStatic(p.fromEvent(t,"transitionend").pipe(p.filter((e=>e.target===t&&"transform"===e.propertyName)),p.mapTo(void 0)),p.of(void 0).pipe(p.delay(200))).pipe(p.first()):p.EMPTY)),p.tap(d({kind:n.completePositionAnimation}))),f=c.pipe(p.withLatestFrom(u),p.switchMap((([e,t])=>e.height.watched?m.YC(t).pipe(p.filter((t=>e.height.value!==t.height||!e.height.isValid||t.height>0))):p.EMPTY)),p.distinctUntilChanged(),p.tap((({height:e})=>d({kind:n.changePosition,height:e})())));h.P.useSubscriptionTo(p.mergeStatic(g,f));const y=c.pipe(p.map((e=>e.position.top)),p.map((e=>o.ux.translateY(e))),p.distinctUntilChanged()),x=c.pipe(p.map((e=>e.layer===t.front?1:0)),p.distinctUntilChanged()),I=c.pipe(p.map((({position:e})=>e)),p.distinctUntilChanged(((e,t)=>e.top===t.top&&e.animationInProgress===t.animationInProgress)),p.map((({animationInProgress:e})=>e?v.animate:void 0)),p.startWith(void 0));return a.createElement(s.F.div,(0,i._)((0,r._)({},(0,l.Sh)(v.item,I)),{style:{transform:y,zIndex:x},mount:e=>{null!==e&&u.next(e)}}),e.item)}))}(g||(g={}));const f={position:"absolute",boxSizing:"border-box",width:d.ux.percent(100),contain:"layout"},y={transition:`transform ${d.ux.seconds(u.v4/1e3)} linear`},v=d.ux.stylesheet({item:[f],animate:[y]})},10726:(e,t,n)=>{n.d(t,{k:()=>x});var r,i=n(84910),a=n(78520),o=n(90023),s=n(64297),l=n(13391),c=n(69465),d=n(72111),u=n(58303),p=n(84358),m=n(54553),h=n(2844);!function(e){e.unwrap=function(e){return h.Ue(u.fS((()=>e)),u.G)}}(r||(r={}));var g,f=n(94032),y=n(77063);!function(e){e.create=function(e,t,n,i,a){const o=r.unwrap(t.style),s=r.unwrap(t.audience),d=r.unwrap(c.R$.OutcomeContext.defaultAcademic),p=r.unwrap(t.domain),m=l.h.create(e),h=m.lens("style").lens(o),g=m.lens("domain").lens(p),v=m.lens("outcomeContext").lens(d).lens("type"),x=m.lens("outcomeContext").lens(d).lens("citation"),I=n.isStudentsOFE?g.view((e=>"academic"!==e)):l.h.create(!0),b=f.U_(I),S=y.J.Category.Id.create("Citations"),C=b.view((e=>e&&!a().has(S))),w={audience:{items:c.R$.audiences,current:m.lens("audience").lens(s),default:u.G(t.audience),isVisible:I},formality:{items:c.R$.formalityLevels,current:h,default:u.G(t.style),isVisible:I,shouldDisable:e=>g.view((t=>!c.R$.isStyleValidWithDomain(t,e)))},domain:{items:c.R$.domains,current:g,default:u.G(t.domain),isVisible:l.h.create(!0),shouldDisable:e=>h.view((t=>n.isFree?"general"!==e:!c.R$.isStyleValidWithDomain(e,t)))},intent:{items:c.R$.goals.filter((e=>"sell"!==e)),isVisible:I,current:m.lens("goals")},type:{items:c.R$.academicTypes,default:u.G("essay"),isVisible:b,current:v},format:{items:c.R$.citation,default:u.G("apa"),isVisible:C,current:x}};return{localContext:m,blocks:w,showSetGoalsLoader:l.h.create(!n.demoMode&&i)}}}(g||(g={}));var v=n(69247);function x(e,t,n,r,h,f,y,x,I=o.Q1,b=(()=>new Map)){const S=(0,o.zG)(e.defaultContext.get(),u.g_((()=>(d.C8.Logging.getLogger("createSetGoalsFlow").warn("Default context not yet set, using fallback",h),h)),o.yR)),C=g.create(e.context.get(),S,f,x,b),w=l.h.combine(C.showSetGoalsLoader,C.localContext,((e,t)=>({blocks:C.blocks,context:t,showOnLoad:e,features:f,source:r})));return m.Z.fromSideEffect((r=>{switch(r.kind){case v.R.ActionsKind.open:I(""),t.goalsPopupShow(r.source);break;case v.R.ActionsKind.upgrade:t.getPremiumButtonClick(),y();break;case v.R.ActionsKind.close:I(""),n.onClose();const o=(()=>p.FX("academic")(r.context.domain)&&f.isStudentsOFE)()&&u.Wi(r.context.outcomeContext)?(0,a._)((0,i._)({},r.context),{outcomeContext:u.G(c.R$.OutcomeContext.defaultAcademic)}):r.context;e.updateContext(o)&&t.goalsFormSuccess(o,S);break;case v.R.ActionsKind.reset:C.localContext.set(c.R$.unset),I("Goals have been reset.");break;case v.R.ActionsKind.showOnLoadChanged:C.showSetGoalsLoader.set(r.value);break;case v.R.ActionsKind.setGoal:I("");break;default:(0,s.vE)(r)}}),w)}},69247:(e,t,n)=>{n.d(t,{R:()=>be});var r=n(92379),i=n(54553),a=n(8323),o=n(84910),s=n(78520),l=n(58303),c=n(90023),d=n(36466),u=n(88813),p=n(24909),m=n(13391),h=n(48906),g=n(31491),f=n(73799),y=n(27640),v=n(79813),x=n(36119),I=n(35917),b=n(75068),S=n(91020),C=n(98227),w=n(49253),A=n(73141);const E=({upgradeAction:e,size:t,title:n,className:i,isEligibleForInProductDiscount:a})=>{const l=r.useContext(y.m.Context),c=Boolean(a)?l.getDiscountPro:l.getPro,d=Boolean(n)?n:c;return r.createElement(v.zx,(0,s._)((0,o._)({name:"upgrade"},(0,h.Sh)(i,"big"===t?R.baseBig:"link"===t?R.link:R.baseSmall)),{onClick:e}),"link"===t?r.createElement(S.JO.PaidLink,{width:14,className:R.linkIcon}):r.createElement(S.JO.Paid,{className:"big"===t?R.bigIcon:R.icon}),d)},k={display:"inline-flex",alignItems:"center",background:b.Il.CoreGreen60,borderRadius:C.ux.rem(A.fx),boxShadow:`0 2px 5px ${C.ux.color(w.UE).fade(.35).toRGBA().toString()}`,color:b.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:C.ux.rem(A.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:C.ux.color(b.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:C.ux.color(b.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},_={padding:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`,fontSize:C.ux.rem(.8125),lineHeight:C.ux.rem(3)},T={padding:`0 ${C.ux.rem(1)} 0 ${C.ux.rem(.5)}`,fontSize:C.ux.rem(.6875),lineHeight:C.ux.rem(2)},M={background:b.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:C.ux.color(b.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:C.ux.color(b.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},G={padding:`0 ${C.ux.rem(3)} 0 ${C.ux.rem(2)}`,fontSize:C.ux.rem(.8125),lineHeight:C.ux.rem(3)},L={padding:`0 ${C.ux.rem(2)} 0 ${C.ux.rem(.5)}`,fontSize:C.ux.rem(.6875),lineHeight:C.ux.rem(2)},D={fill:b.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:b.Il.CoreNeutral0}}},N={marginRight:C.ux.rem(.2)},z={display:"inline-flex",alignItems:"center",color:b.Il.CoreGreen60,fontSize:C.ux.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},P={color:b.Il.CoreGreen60},F={fill:b.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:b.Il.CoreGreen60}}},O={fill:b.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:b.Il.CoreGreen60}}},R=C.ux.stylesheet({base:[k],baseBig:[k,_],baseSmall:[k,T],baseUpHookRedesign:[k,M],baseBigUpHookRedesign:[_,M,G],baseSmallUpHookRedesign:[T,M,L],icon:[D],bigIcon:[D,N],link:[z],linkUpHookRedesign:[z,P],linkIconUpHookRedesign:[F],linkIcon:[O]});var $=n(94032),B=n(28627),U=n(47311),j=n(33267),W=n(12896);const H=.8125,Y=C.ux.rem(W.fe+W.xB),V={display:"flex",flexDirection:"column",maxHeight:"90vh",width:C.ux.rem(41.5),backgroundColor:d.I.Background.Base.Default,textAlign:"left"},Q={padding:`${C.ux.rem(1.125)} ${C.ux.rem(2)} ${C.ux.rem(1)}`,paddingBottom:C.ux.rem(1)},q={paddingBottom:0,backgroundColor:d.I.Background.Base.Default,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:`calc(100% - ${C.ux.rem(4)})`,height:C.ux.px(1),background:d.I.Border.Base.Subdued,content:"''"}}},J={display:"block",margin:`${C.ux.rem(H)} 0`,fontWeight:b.xv.SmallLightWeight,lineHeight:C.ux.rem(1.5)},X={minHeight:C.ux.rem(4)},Z={marginBottom:C.ux.rem(-.5),maxWidth:C.ux.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:{"& > .setGoalsToneButton":{margin:`0 0 ${C.ux.rem(.5)}`,marginLeft:C.ux.important(0),$nest:{"&:not(:last-child)":{marginRight:C.ux.rem(.5)}}}}},K={position:"absolute",marginTop:`calc(${C.ux.rem(H)} + ${C.ux.rem(2)})`},ee={margin:`0 0 ${C.ux.rem(1.5)} ${C.ux.rem(7)}`},te={margin:`0 0 ${C.ux.rem(1.5)} ${C.ux.rem(7)}`},ne={position:"absolute",top:C.ux.rem(2.5)},re={display:"flex",width:C.ux.percent(100),justifyContent:"space-between"},ie={fontWeight:300,fontSize:C.ux.rem(.8125)},ae={border:"none",margin:0,padding:0,$nest:{"&:not(:last-child)":{marginBottom:C.ux.rem(1.25),borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:d.I.Border.Base.Subdued}}},oe={float:"inline-start",fontWeight:700,minWidth:C.ux.rem(7),width:C.ux.rem(7),textTransform:"capitalize",lineHeight:C.ux.rem(2)},se={paddingInline:C.ux.rem(.5),lineHeight:C.ux.rem(2),display:"block",cursor:"pointer",fontSize:C.ux.rem(.8125),textTransform:"capitalize",alignItems:"center",borderWidth:1,borderStyle:"solid",borderColor:d.I.Border.Base.Subdued},le={$nest:{"&:first-of-type":{borderStartStartRadius:Y,borderEndStartRadius:Y},"&:last-of-type":{borderStartEndRadius:Y,borderEndEndRadius:Y},"&:not(:last-of-type)":{marginInlineEnd:-1}}},ce={display:"flex",gap:C.ux.rem(.5)},de={borderRadius:Y},ue={$nest:{"&:disabled + label":{cursor:"not-allowed",opacity:.4},"&:checked + label":{backgroundColor:d.I.Background.Brand.Default,color:d.I.Text.Base.Inverse,borderColor:d.I.Border.Brand.Default,zIndex:1},"&:not(:checked)&:not(:disabled):hover + label":{backgroundColor:u.NeutralGray10},"&:not(:checked)&:not(:disabled):active + label":{backgroundColor:u.NeutralGray20},"&:focus-visible + label":{outlineOffset:2,outlineWidth:2,outlineStyle:"solid",outlineColor:d.I.Border.Brand.Default,zIndex:2},'&[type="checkbox"]&:checked&:not(:disabled):hover + label':{backgroundColor:u.Green80,borderColor:u.Green80},'&[type="checkbox"]&:checked&:not(:disabled):active + label':{backgroundColor:u.Green90,borderColor:u.Green90}}},pe=C.ux.stylesheet({wrapper:[V],modalBody:[Q],modalHeader:[q],itemDescription:[J],modalFooter:[X],toneButtons:[Z],extraContent:[K],title:[ee],description:[te],image:[ne],footerWrapper:[re],checkboxText:[ie],fieldset:[ae],legend:[oe],fieldsetContentContainer:[{display:"flex",flexDirection:"column",alignItems:"flex-start"}],input:[ue],radioLabel:[se,le],radioGroup:[{display:"flex"}],checkboxGroup:[ce],checkboxLabel:[se,de]}),me=({name:e,items:t,sticky:n,extraContent:i,children:a,isVisible:l})=>r.createElement(p.F.Fragment,null,l.view((l=>l?r.createElement("fieldset",{className:pe.fieldset},r.createElement("legend",{className:pe.legend},e),i,r.createElement("span",{className:pe.fieldsetContentContainer},r.createElement("span",{className:n?pe.radioGroup:pe.checkboxGroup},t.map((t=>r.createElement(he,(0,s._)((0,o._)({},t),{itemKey:t.key,fieldsetName:e,type:n?"radio":"checkbox"}))))),r.createElement(I.Z.Small,{className:pe.itemDescription},a))):null)));function he({itemKey:e,type:t,active:n,children:i,disabled:a,description:o,fieldsetName:s,onClick:l}){const c=`goal-${s}-option-${e}`,d=`goal-${s}-option-${e}-description`,u=o!==i;return r.createElement(r.Fragment,null,r.createElement(p.F.input,{id:c,name:s,type:t,checked:n,"aria-describedby":u?d:void 0,onChange:l,disabled:a,className:C.ux.joinClasses(["gds-sr-only",pe.input])}),r.createElement("label",{htmlFor:c,className:"radio"===t?pe.radioLabel:pe.checkboxLabel},i),u&&r.createElement(j.u,{id:d},o))}const ge=({items:e,current:t,isVisible:n,shouldDisable:r,itemDescription:i,onGoalSet:a,itemTitle:o=c.yR})=>({sticky:!0,isVisible:n,items:e.map((e=>({key:e,active:t.view((t=>t===e)),onClick:()=>{t.set(e),a&&a()},disabled:r&&r(e),children:o(e),description:i(e)})))}),fe=({blocks:e,features:t,showOnLoad:n,close:i,upgrade:o,reset:s,showOnLoadChanged:l,setGoal:c})=>{const d=r.useContext(f.a.Context),u=$.Dx(t),p=$.Dx(e),m=$.Dx(n),h=$.Dx(i);return r.createElement(a.u_,{id:"setGoalsModal",className:pe.wrapper,focusTrapMode:"dynamic",initialFocus:B.P.FocusTrap.InitialFocus.none},r.createElement(a.u_.Header,{className:pe.modalHeader},r.createElement(ve,null)),r.createElement(a.u_.Body,{name:"goalsBody",className:pe.modalBody},r.createElement(ye,{features:u,upgradeAction:o,blocks:p,onGoalSet:c})),r.createElement(a.u_.Footer,{className:pe.modalFooter},r.createElement(xe,{supportsSetGoalsLoader:u.pipe(U.map((e=>!e.demoMode&&d.has(f.a.Flag.supportsSetGoalsLoader)))),onDone:h,reset:s,showOnLoad:m,showOnLoadChanged:l})))},ye=({blocks:e,features:t,upgradeAction:n,onGoalSet:i})=>{const a=r.useContext(y.m.Context).goals;return r.createElement(p.F.Fragment,null,U.combineLatestStatic(e,t).pipe(U.map((([{audience:e,formality:t,domain:d,intent:u,type:m,format:h},g])=>{const f=r.createElement(me,(0,s._)((0,o._)({name:"domain"},ge((0,s._)((0,o._)({},d),{onGoalSet:i,itemTitle:e=>"mail"===e?"email":e,itemDescription:e=>a.sections.domain[e]}))),{extraContent:r.createElement(p.F.div,{className:pe.extraContent},g.isFree?r.createElement(E,{size:"link",upgradeAction:n}):null)}),d.current.view((e=>g.isFree?a.sections.domain.free:Boolean(e)?a.sections.domain[e]:""))),y=r.createElement(me,(0,o._)({name:"intent"},(({items:e,isVisible:t,current:n},r,i,a)=>({isVisible:t,items:e.map((e=>({key:e,active:n.view((t=>(0,c.zG)(t,l.Gg((t=>t.has(e)))))),description:i(e),onClick:()=>{n.modify((t=>{const n=(0,c.zG)(t,l.g_((()=>new Set),(e=>new Set(e))));return n.has(e)?n.delete(e):n.add(e),l.G(n)})),a&&a()},children:r(e)})))}))(u,(e=>a.sections.intent.options[e]),(e=>a.sections.intent.options[e]),i)),a.sections.intent.experimental),v=r.createElement(me,(0,o._)({name:"audience"},ge((0,s._)((0,o._)({},e),{onGoalSet:i,itemDescription:t=>a.sections.audience[t]((0,c.zG)(e.default,l.Gg((e=>e===t))))}))),e.current.view((t=>Boolean(t)&&a.sections.audience[t]((0,c.zG)(e.default,l.Gg((e=>e===t))))))),x=r.createElement(me,(0,o._)({name:"formality"},ge((0,s._)((0,o._)({},t),{onGoalSet:i,itemDescription:e=>a.sections.formality[e]}))),t.current.view((e=>Boolean(e)?a.sections.formality[e]:""))),I=r.createElement(me,(0,o._)({name:"type"},ge((0,s._)((0,o._)({},m),{itemDescription:e=>a.sections.type.options[e]}))),m.current.view((e=>Boolean(e)?a.sections.type.options[e]:""))),b=r.createElement(me,(0,o._)({name:"format"},ge((0,s._)((0,o._)({},h),{itemTitle:a.sections.format.formatTitle,itemDescription:e=>a.sections.format.options[e]}))),h.current.view((e=>Boolean(e)?a.sections.format.options[e]:"")));return g.isStudentsOFE?r.createElement(r.Fragment,null,f,y,v,x,I,b):r.createElement(r.Fragment,null,v,x,f,y)}))))},ve=()=>{const e=r.useContext(y.m.Context).goals,t=r.useContext(a.u_.TitleIdContext);return r.createElement(r.Fragment,null,r.createElement(I.Z,{nodeType:"h2",styleType:I.Z.Type.H1,id:t,className:pe.title},e.title),r.createElement(Ie,null),r.createElement(a.u_.SpokenDescription,null,r.createElement(I.Z.Base,{className:pe.description},e.header)))},xe=({supportsSetGoalsLoader:e,showOnLoad:t,showOnLoadChanged:n,reset:i,onDone:a})=>{const o=r.useContext(y.m.Context),s=m.h.create(!1);return B.P.useSubscriptionTo(t.pipe(U.tap($.wW(s)))),B.P.useSubscriptionTo(s.pipe(U.tap(n))),r.createElement(p.F.div,(0,h.Sh)(e.pipe(U.map((0,g.RN)(pe.footerWrapper,null)))),e.pipe(U.map((0,g.RN)(r.createElement(x.X,{checked:s,name:"set-goals"},r.createElement(I.Z.Small,{className:pe.checkboxText},o.goals.footer.showModalOnStart)),null))),r.createElement(v.zx.Group,null,r.createElement(v.zx.Ghost,{name:"reset",onClick:i},o.goals.footer.reset),r.createElement(p.F.Fragment,null,a.pipe(U.map((e=>r.createElement(v.zx.Primary,{name:"closeSetContext",onClick:e},o.done)))))))},Ie=()=>r.createElement("svg",{"aria-hidden":!0,className:pe.image,width:"69",height:"80",viewBox:"0 0 69 80"},r.createElement("g",{fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:d.I.Background.Brand.Default}),r.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:u.Green10}),r.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),r.createElement("path",{stroke:d.I.Background.Brand.Default,strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),r.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:d.I.Background.Brand.Default}),r.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:d.I.Background.Base.Default,strokeWidth:"1.3"})));var be;!function(e){e.Modal=i.UI.Node.make((({state:e,view:n,notify:i})=>{B.P.useSubscriptionTo(n("source").pipe(U.first(),U.tap((e=>i({kind:t.open,source:e})()))));const o=e.pipe(U.map((e=>i({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad}))));return r.createElement(a.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:o},r.createElement(fe,{blocks:n("blocks"),features:n("features"),close:o,upgrade:i({kind:t.upgrade}),reset:i({kind:t.reset}),setGoal:i({kind:t.setGoal}),showOnLoad:n("showOnLoad"),showOnLoadChanged:e=>i({kind:t.showOnLoadChanged,value:e})()}))}));let t;!function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.setGoal="setGoal",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(be||(be={}))},38148:(e,t,n)=>{n.d(t,{JT:()=>g,hM:()=>f,wK:()=>h});var r=n(58303),i=n(97225),a=n(90023),o=n(64297),s=n(31491),l=n(54553),c=n(47311),d=n(60846);function u(e){return{title:e.title,firstLine:r.ij(e.firstLine)}}const p=(e,t)=>{const n=t.successLens;switch(e){case d.g.SuccessType.zero:return n.emptyText;case d.g.SuccessType.small:return n.smallText;case d.g.SuccessType.large:return n.largeText;case d.g.SuccessType.applied:return{title:n.fixedText.titles[(0,s.TN)(9)]};case d.g.SuccessType.premiumOnboardingStart:return n.premiumOnboardingStartText;case d.g.SuccessType.premiumOnboardingComplete:return n.premiumOnboardingCompleteText;default:return(0,o.vE)(e)}};function m(e){switch(e){case d.g.SuccessType.applied:case d.g.SuccessType.large:return"growComplete";case d.g.SuccessType.premiumOnboardingStart:return"premiumOnboardingStart";case d.g.SuccessType.premiumOnboardingComplete:return"premiumOnboardingComplete";default:return"growStart"}}function h(e,t){return()=>e.pipe(c.map((e=>{const n=p(e,t);return{kind:m(e),caption:r.G(u(n))}})))}function g(e,t){return()=>e.pipe(c.map((e=>{const n=p(e,t);return{kind:m(e),caption:r.G(u(n))}})))}function f(e){return l.Z.animatingFlow(e,(e=>(0,a.zG)(e,r.g_((()=>r.G(i.F2("fadein"))),(()=>r.G(i.Hk("fadeout","fadein")))))))}},63169:(e,t,n)=>{n.d(t,{q:()=>P});var r=n(92379),i=n(90023),a=n(24909),o=n(84358),s=n(54553),l=n(75068),c=n(77933),d=n(98227),u=n(47311),p=n(68823);const m=s.UI.Node.make((()=>r.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"})))))),h=s.UI.Node.make((()=>r.createElement("svg",{"aria-hidden":!0,width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"})))),g=s.UI.Node.make((()=>r.createElement("video",{className:y.premiumOnboardingStartVideo,autoPlay:!0,loop:!0,muted:!0,poster:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjY0IiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDI2NCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMTIuODA5IDgxLjcwNDVDMTEyLjgwOSA4OS4xMDY3IDEyOS40NDEgOTcuOTcxMiAxMjkuNDQxIDk3Ljk3MTJMMTI0LjE0MSAxMDkuMzk0IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTEzLjA4MyA4Mi44OTI1QzExMy45OTcgODIuNjE4MyAxMTQuNDU0IDgyLjA3IDExNC42MzYgODEuNjEzMUMxMTQuOTExIDgxLjA2NDggMTE0LjgxOSA4MC40MjUxIDExNC40NTQgNzkuOTY4MUwxMTAuOTgxIDc1Ljk0NzFMMTEwLjM0MSA4MS4yNDc1QzExMC4yNSA4MS43OTU4IDExMC41MjQgODIuNDM1NSAxMTEuMDcyIDgyLjcwOTdDMTExLjUyOSA4Mi45ODM5IDExMi4xNjkgODMuMTY2NiAxMTMuMDgzIDgyLjg5MjVaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMTguNjU4IDcyLjIwMDRDMTE3LjEwNCA3NS43NjQ1IDExNC44MTkgNzguNTk3NCAxMTIuMDc4IDc5LjQxOTlDMTA1LjU4OSA4MS40MzA0IDk0Ljg5NzMgNzIuNjU3MyA5Mi42MTI2IDY0Ljk4MDlDOTAuNDE5NCA1Ny42NzAxIDk0LjI1NzYgNTAuMDg1IDEwMS4yMDMgNDcuMzQzNUMxMDEuNTY4IDQ3LjE2MDcgMTAxLjkzNCA0Ny4wNjkzIDEwMi4zIDQ2Ljk3NzlDMTA5Ljg4NSA0NC42OTMzIDExOC4wMTggNDguOTg4NCAxMjAuMzAzIDU2LjU3MzRDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMjY1NiAxMTguNjU4IDcyLjIwMDRaIiBmaWxsPSIjMTVDMzlBIiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIG9wYWNpdHk9IjAuNSIgZD0iTTEwMS41NjggNzEuMDEyM0MxMDMuODUzIDY5LjgyNDMgMTAwLjE5OCA2MS40MTY4IDk2Ljk5OSA2My4wNjE3QzkzLjE2MDggNjUuMDcyMiA5OC4wOTU2IDcyLjg0IDEwMS41NjggNzEuMDEyM1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIG9wYWNpdHk9IjAuMjUiIGQ9Ik0xMjAuMjExIDU2LjY2NDdDMTIxLjU4MiA2MS4wNTEzIDEyMC43NTkgNjcuMzU2OSAxMTguNjU3IDcyLjIwMDNDMTEwLjYxNSA2My45NzU2IDEwMS4xMTEgNTIuMjc4MiAxMDEuMTExIDQ3Ljg5MTdDMTAxLjExMSA0Ny43MDg5IDEwMS4xMTEgNDcuNTI2MiAxMDEuMjAzIDQ3LjM0MzRDMTAxLjU2OCA0Ny4xNjA2IDEwMS45MzQgNDcuMDY5MiAxMDIuMjk5IDQ2Ljk3NzhDMTA5Ljg4NCA0NC42OTMyIDExNy45MjYgNDguOTg4MyAxMjAuMjExIDU2LjY2NDdaIiBmaWxsPSIjMUYyNDNDIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUxLjAwOCA3Mi42NTczQzE0NS43MDggODQuNTM3NSAxMjkuNDQxIDk3Ljk3MTIgMTI5LjQ0MSA5Ny45NzEyTDEzNC41NTkgMTA3LjExIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTUwLjkxNyA3My45MzY3QzE1MC4wMDMgNzMuNjYyNSAxNDkuNTQ2IDczLjExNDIgMTQ5LjM2MyA3Mi42NTczQzE0OS4wODkgNzIuMTA4OSAxNDkuMTggNzEuNDY5MiAxNDkuNTQ2IDcxLjAxMjNMMTUzLjAxOSA2Ni45OTEzTDE1My42NTggNzIuMjkxN0MxNTMuNzUgNzIuODQgMTUzLjQ3NiA3My40Nzk3IDE1Mi45MjcgNzMuNzUzOUMxNTIuNDcgNzQuMDI4IDE1MS44MzEgNzQuMTE5NCAxNTAuOTE3IDczLjkzNjdaIiBmaWxsPSIjODc4MEU0IiBzdHJva2U9IiMxQzI1M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNzEuMzg3IDU2LjAyNTFDMTY5LjEwMyA2My42MTAxIDE1OC41MDIgNzIuNDc0NiAxNTEuOTIyIDcwLjQ2NDFDMTQ1LjQzNCA2OC40NTM2IDE0MS40MTMgNTUuMjk0IDE0My42OTcgNDcuNzA5QzE0NS45ODIgNDAuMTI0IDE1NC4wMjQgMzUuNzM3NCAxNjEuNyAzOC4xMTM1QzE2OS4zNzcgNDAuMzA2NyAxNzMuNjcyIDQ4LjM0ODcgMTcxLjM4NyA1Ni4wMjUxWiIgZmlsbD0iIzg3ODBFNCIgc3Ryb2tlPSIjMUMyNTNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8cGF0aCBvcGFjaXR5PSIwLjQiIGQ9Ik0xNjcuOTE1IDUyLjkxOEMxNjMuODk0IDU0LjE5NzQgMTYxLjA2MSA0NC42MDE5IDE2NS4zNTYgNDQuMjM2M0MxNjkuMjg1IDQzLjg3MDggMTcwLjU2NSA1Mi4wOTU1IDE2Ny45MTUgNTIuOTE4WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggb3BhY2l0eT0iMC4yNSIgZD0iTTE2Mi43OTcgMzguOTM1OUMxNjIuNzk3IDQzLjMyMjUgMTUzLjM4NCA1NC45Mjg1IDE0NS4zNDIgNjMuMTUzMkMxNDMuMjQgNTguMzA5NyAxNDIuNTA5IDUyLjA5NTUgMTQzLjc4OSA0Ny43MDlDMTQ2LjA3MyA0MC4xMjQgMTU0LjExNSAzNS43Mzc0IDE2MS43OTIgMzguMTEzNUMxNjIuMDY2IDM4LjIwNDkgMTYyLjQzMSAzOC4yOTYyIDE2Mi43MDUgMzguMzg3NkMxNjIuNzA1IDM4LjU3MDQgMTYyLjc5NyAzOC43NTMyIDE2Mi43OTcgMzguOTM1OVoiIGZpbGw9IiMxRjI0M0MiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIGQ9Ik0xMjkuNDQxIDY2LjgwODdWMTEyLjEzNiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEyOS40NDEgNzQuNTc2NUMxMjguNDM2IDc0LjU3NjUgMTI3Ljc5NiA3NC4yMTEgMTI3LjQzMSA3My43NTQxQzEyNi45NzQgNzMuMjk3MSAxMjYuODgyIDcyLjU2NjEgMTI3LjE1NiA3Mi4wMTc3TDEyOS41MzIgNjYuNjI2TDEzMS45MDggNzIuMDE3N0MxMzIuMTgzIDcyLjU2NjEgMTMyLjA5MSA3My4yOTcxIDEzMS42MzQgNzMuNzU0MUMxMzEuMDg2IDc0LjIxMSAxMzAuNDQ2IDc0LjU3NjUgMTI5LjQ0MSA3NC41NzY1WiIgZmlsbD0iI0ZGQzk0MCIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTE0My41MTQgMjQuNDA1N0MxNDEuNDEzIDIzLjU4MzIgMTE3LjU2MSAyMy41ODMyIDExNS40NTkgMjQuNDA1N0MxMTMuMzU3IDI1LjIyODEgMTAyLjU3NCAzNS4zNzIgMTAyLjU3NCAzOS4zMDE2QzEwMi41NzQgNDUuOTcyNyAxMjUuNzg2IDcwLjY0NjkgMTI5LjUzMiA3MC42NDY5QzEzMy4yNzkgNzAuNjQ2OSAxNTYuNDkxIDQ1Ljk3MjcgMTU2LjQ5MSAzOS4zMDE2QzE1Ni40IDM1LjQ2MzQgMTQ1LjYxNiAyNS4yMjgxIDE0My41MTQgMjQuNDA1N1oiIGZpbGw9IiNGRkM5NDAiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTE0MS41MDQgMjYuMzI0OEMxMzkuMjE5IDI2LjIzMzQgMTM5LjIxOSAyOC44ODM2IDE0MC41OSAzMS4wNzY5QzE0Mi45NjYgMzUuMDA2NSAxNDYuMjU2IDM2LjY1MTQgMTQ3LjYyNyAzNi4xMDMxQzE1MS42NDggMzQuNjQwOSAxNDYuMzQ3IDI2LjQxNjIgMTQxLjUwNCAyNi4zMjQ4WiIgZmlsbD0id2hpdGUiIGZpbGwtb3BhY2l0eT0iMC44Ii8+CjxwYXRoIGQ9Ik0xNTYuNCAzOS4yMTAyTDE0MC44NjQgNDEuNjc3NkgxMTguMDE4TDEwMi40ODIgMzkuMjEwMiIgc3Ryb2tlPSIjMUYyNDNDIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz4KPHBhdGggZD0iTTEzNS4wMTUgMjQuMDQwMkMxMzcuNTc0IDI4Ljc5MjIgMTQwLjg2NCAzOS45NDEzIDE0MC44NjQgNDEuNjc3NkMxNDAuODY0IDQzLjQxNCAxMzUuODM4IDU5LjA0MDkgMTI5LjQ0MSA3MC42NDY5IiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTIzLjg2NiAyNC4wNDAyQzEyMS4zMDggMjguNzkyMiAxMTguMDE4IDM5Ljk0MTMgMTE4LjAxOCA0MS42Nzc2QzExOC4wMTggNDMuNDE0IDEyMy4wNDQgNTkuMDQwOSAxMjkuNDQxIDcwLjY0NjkiIHN0cm9rZT0iIzFGMjQzQyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+CjxwYXRoIG9wYWNpdHk9IjAuOCIgZD0iTTExNy41NjEgNTUuNzUxMUMxMTYuMTkgNTYuMDI1MyAxMTAuNjE1IDUwLjM1OTQgMTA4LjMzMSA0Ni4zMzg0QzEwNy4yMzQgNDQuNDE5MyAxMDguMjM5IDQzLjMyMjcgMTA5LjMzNiA0My4wNDg1QzExMi41MzQgNDIuMjI2IDExMy45MDUgNDQuMzI3OSAxMTYuMDA3IDQ3Ljg5MkMxMTcuOTI2IDUxLjA5MDUgMTE5LjIwNiA1NS4zODU2IDExNy41NjEgNTUuNzUxMVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuOCIvPgo8cGF0aCBkPSJNMTQxLjg2OSA5OS44OTA0QzE0My44OCA5MC4zODYzIDEyOS40NDEgOTcuNzg4NSAxMjkuNDQxIDk3Ljc4ODVDMTI5LjQ0MSA5Ny43ODg1IDE0MC4wNDIgMTA5LjAyOSAxNDEuODY5IDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8cGF0aCBkPSJNMTE3LjAxMyA5OS44OTA0QzExNS4wMDIgOTAuMzg2MyAxMjkuNDQxIDk3Ljc4ODUgMTI5LjQ0MSA5Ny43ODg1QzEyOS40NDEgOTcuNzg4NSAxMTguODQgMTA5LjAyOSAxMTcuMDEzIDk5Ljg5MDRaIiBzdHJva2U9IiMxRjI0M0MiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIvPgo8L3N2Zz4K"},r.createElement("source",{src:`${p.y}premiumOnboardingStart.mp4`})))),f=s.UI.Node.make((()=>r.createElement("svg",{"aria-hidden":!0,width:"130",height:"82",viewBox:"0 0 130 82",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{opacity:"0.25",d:"M82.084 40.757L72.7367 30.3437C72.1869 29.6495 71.4996 29.3718 70.6748 29.3718H46.8943C46.0695 29.3718 45.3822 29.6495 44.8324 30.3437L35.4851 40.757C34.5229 41.8677 34.5229 43.5338 35.4851 44.6446L57.3412 68.9421C57.7536 69.3586 58.3034 69.6363 58.8533 69.6363C59.4031 69.6363 59.953 69.3586 60.3653 68.9421L82.084 44.6446C83.1837 43.5338 83.1837 41.8677 82.084 40.757Z",fill:"#494393"}),r.createElement("path",{d:"M66.1044 65.0148L87.9605 40.7173C88.6478 39.8843 88.6478 38.6347 87.9605 37.8016L78.4758 27.3884C78.0634 26.9719 77.5136 26.6942 76.8263 26.6942H53.1832C52.6333 26.6942 51.946 26.9719 51.5336 27.3884L42.1864 37.8016C41.4991 38.6347 41.4991 39.8843 42.1864 40.7173L64.0425 65.0148C64.5923 65.7091 65.5546 65.7091 66.1044 65.0148Z",fill:"#FFDF80",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M88.5103 39.3289H41.6365",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M60.4684 26.6942L55.7947 38.4958C55.6573 39.0512 55.6573 39.6066 55.7947 40.0231L65.142 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M69.6783 26.6942L74.3519 38.4958C74.4894 39.0512 74.4894 39.6066 74.3519 40.0231L65.0046 65.5702",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("rect",{x:"77.5491",y:"1",width:"8",height:"8",rx:"2",transform:"rotate(14.9627 77.5491 1)",fill:"#F8C6DA",stroke:"#0E101A"}),r.createElement("rect",{x:"13",y:"53.5762",width:"8",height:"8",rx:"2",transform:"rotate(-36.5938 13 53.5762)",fill:"#B8B4EF",stroke:"#0E101A"}),r.createElement("circle",{cx:"96",cy:"73",r:"4",fill:"#87E8D1",stroke:"#0E101A"}),r.createElement("path",{d:"M37 66V72",stroke:"#0E101A"}),r.createElement("path",{d:"M37 76V82",stroke:"#0E101A"}),r.createElement("path",{d:"M45 74L39 74",stroke:"#0E101A"}),r.createElement("path",{d:"M35 74L29 74",stroke:"#0E101A"}),r.createElement("path",{d:"M37.5 10V14.125",stroke:"#0E101A"}),r.createElement("path",{d:"M37.5 16.875V21",stroke:"#0E101A"}),r.createElement("path",{d:"M43 15.5L38.875 15.5",stroke:"#0E101A"}),r.createElement("path",{d:"M36.125 15.5L32 15.5",stroke:"#0E101A"}),r.createElement("path",{d:"M103 21V27",stroke:"#0E101A"}),r.createElement("path",{d:"M103 31V37",stroke:"#0E101A"}),r.createElement("path",{d:"M111 29L105 29",stroke:"#0E101A"}),r.createElement("path",{d:"M101 29L95 29",stroke:"#0E101A"})))),y=d.ux.stylesheet({premiumOnboardingStartVideo:[{width:264,height:120}]}),v=s.UI.Node.make((({view:e})=>r.createElement("div",{"data-name":"success-lens-text",className:N.newSuccessText},r.createElement(c.H4,{key:"title"},e("title")),r.createElement("div",{className:N.newSuccessDescription},r.createElement(a.F.div,{className:N.newSuccessDescriptionText},(0,i.zG)(e("firstLine"),u.map(o.QP))))))),x=s.UI.Union.asOption(v),I=s.UI.Grid.make((({slots:e})=>r.createElement(a.F.div,{className:N.newSuccessContainer},e.image,e.caption))),b=s.UI.Knot.make(I,{image:m,caption:x}),S=s.UI.Knot.make(I,{image:h,caption:x}),C=s.UI.Knot.make(s.UI.Grid.make((({slots:e})=>r.createElement(a.F.div,{className:N.premiumOnboardingStartSuccessContainer},e.animation,e.caption))),{animation:g,caption:x}),w=s.UI.Knot.make(I,{image:f,caption:x}),A=s.UI.Union.make("kind",{growStart:b,growComplete:S,premiumOnboardingStart:C,premiumOnboardingComplete:w}),E=d.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),k=d.ux.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),_={animation:`${E} 300ms linear forwards`},T={position:"absolute",top:0,width:d.ux.percent(100),animation:`${k} 200ms linear forwards`},M={textAlign:"center",background:l.Il.CoreNeutral0,padding:d.ux.rem(.5)},G={width:d.ux.percent(100),marginTop:d.ux.rem(.5)},L={marginTop:d.ux.rem(.25)},D={fontSize:d.ux.rem(l.xv.NewSuccessDescriptionSize),color:l.Il.CoreNeutral50,letterSpacing:l.xv.NewSuccessDescriptionLetterSpacing,lineHeight:d.ux.rem(l.xv.NewSuccessDescriptionLineHeight),fontWeight:l.xv.NewSuccessDescriptionWeight},N=d.ux.stylesheet({success_fadein:[_],success_fadeout:[T],premiumOnboardingStartSuccessContainer:[M],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[G],newSuccessDescription:[L],newSuccessDescriptionText:[D]}),z=s.UI.Transition.make({fadein:N.success_fadein},{fadeout:N.success_fadeout}),P=s.UI.Animated.make(z,A)},98436:(e,t,n)=>{n.d(t,{r:()=>y});var r=n(92379),i=n(58303),a=n(90023),o=n(24909),s=n(54553),l=n(27640),c=n(91020),d=n(77933),u=n(98227),p=n(65676);const m=s.UI.Grid.make((({slots:e})=>r.createElement("div",{className:b.grid},r.createElement(o.F.div,{className:b.iconWrapper},e.icon),r.createElement(o.F.div,{className:b.titleWrapper},e.title),r.createElement(o.F.div,{className:b.bottomWrapper},e.bottom)))),h=s.UI.Node.make((()=>{const e=r.useContext(l.m.Context).successLens.paidView;return r.createElement(d.H4,null,e.title)})),g=s.UI.Node.make((()=>r.createElement(c.JO.GreenOk,{width:32}))),f=s.UI.Knot.make(m,{icon:g,title:h,bottom:s.UI.Union.make("kind",{[p.n.State.hidden]:s.UI.Node.empty,[p.n.State.expanded]:p.n.TogglableExpandedPanel})}),y=(0,a.zG)(s.UI.squash(f),s.UI.contramapState((e=>(0,a.zG)(e,i.g_((()=>({bottom:{kind:p.n.State.hidden}})),(e=>({bottom:{kind:p.n.State.expanded,showCloseButton:!1,alertsState:e}}))))))),v={marginTop:u.ux.rem(3.5)},x={marginTop:u.ux.rem(1.375)},I={marginTop:u.ux.rem(2.675)},b=u.ux.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[v],titleWrapper:[x],bottomWrapper:[I]})},64741:(e,t,n)=>{n.d(t,{d:()=>c});var r=n(58303),i=n(90023),a=n(64297),o=n(47311),s=n(23841),l=n(65676);function c(e){return(0,i.ls)(o.map((e=>{switch(e.key){case l.n.State.expanded:switch(e.action.kind){case"collapse":return r.G(l.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return r.YP;default:return(0,a.vE)(e.action)}case l.n.State.minimized:return"onClick"===e.action.action?r.G(l.n.State.expanded):(0,a.vE)(e.action.action);default:return(0,a.vE)(e)}})),s.oA,o.startWith(l.n.State.minimized),o.switchMap((t=>e.pipe(o.map(r.g_((()=>({kind:l.n.State.hidden})),(e=>{switch(t){case l.n.State.minimized:return{kind:l.n.State.minimized,alertsCount:e.count};case l.n.State.expanded:return{kind:l.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case l.n.State.hidden:return{kind:l.n.State.hidden};default:return(0,a.vE)(t)}})))))))}},65676:(e,t,n)=>{n.d(t,{n:()=>we});var r,i=n(54553),a=n(92379),o=n(58303),s=n(90023),l=n(64297),c=n(24909),d=n(27640),u=n(79813),p=n(32490),m=n(84910),h=n(78520),g=n(72117),f=n(36466),y=n(2123),v=n(48906),x=n(59179),I=n(94032),b=n(31403),S=n(954),C=n(73799),w=n(91020),A=n(66836),E=n(98227),k=n(59399),_=n(32719);!function(e){var t=function(e){return 0===e?"":e>=i?"".concat(Math.min(Math.trunc(e/i),9),"k+"):String(e)},n=10,r=100,i=1e3,o=function(e){var t=e.className,n=e.isChecking,r=e.type,i=e.animateFade,o=void 0===i||i,s=k.f.fadeOutState(n),l=s.state,d=s.complete,u="checking-complete";return a.createElement(c.F.div,(0,v.Sh)(Y.loader,t),o?l.pipe(x.U((function(e){return"end"===e?a.createElement("div",{key:"checking-complete",className:u}):a.createElement(A.$,{key:"spinner",variation:r,size:"100%",className:"fadeOut"===e?Y.fadeOut:void 0,onTransitionEnd:d})}))):n.pipe(x.U((function(e){return e?a.createElement(A.$,{variation:r,size:"100%"}):a.createElement("div",{className:u})}))))},s=function(e){var n=e.name,i=e.theme,o=void 0===i?{}:i,s=e.count,l=e.type,d=void 0===l?"white":l,u=e.suffix,p=void 0===u?"":u,g=a.useContext(C.a.Context);return a.createElement(c.F.div,(0,h._)((0,m._)({},(0,v.Sh)(Y.roundCounter,I.ab(d,A.$.getClassName(Y)),o.counterWrapper)),{"data-role":"counter"}),a.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 32",className:Y.circular},a.createElement("g",null,a.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),a.createElement("text",(0,m._)((0,h._)((0,m._)({x:"16",y:"17"},(0,y.h5)(g.has(C.a.Flag.supportsSVGDominantBaseline))),{fontSize:s>=r?14:18,"data-name":n}),(0,v.Sh)(F,o.counterContent)),t(s),p))))},l=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,o=e.count,s=e.type,l=void 0===s?"white":s,d=e.suffix,u=void 0===d?"":d,p=a.useContext(C.a.Context);return a.createElement(c.F.div,(0,h._)((0,m._)({},(0,v.Sh)(Y.ovalCounter,I.ab(l,A.$.getClassName(Y)),i.counterWrapper)),{"data-role":"counter"}),a.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 20",className:Y.circular},a.createElement("rect",{width:"32",height:"20",rx:"10"}),a.createElement("text",(0,m._)((0,h._)((0,m._)({x:"16",y:"10.5"},(0,y.h5)(p.has(C.a.Flag.supportsSVGDominantBaseline))),{fontSize:11,"data-name":n}),(0,v.Sh)(F,i.counterContent)),t(o),u)))},d=(e.Counter=function(e){var t=e.theme,n=void 0===t?{}:t,i=e.count,o=e.type,c=void 0===o?"white":o,d=i>=r?l:s;return a.createElement(d,{theme:(0,h._)((0,m._)({},n),{counterWrapper:(0,v.Sh)(n.counterWrapper,Y.flexCounter).className}),count:i,type:c})},e.OutcomeCounter=function(e){var i=e.name,o=e.theme,s=void 0===o?{}:o,l=e.count,d=e.type,u=void 0===d?"white":d,p=e.suffix,g=e.fontSize,f=void 0===g?function(e,t){return t||e>=r?10:12}(l,Boolean(p)):g,x=a.useContext(C.a.Context);return a.createElement(c.F.div,(0,h._)((0,m._)({},(0,v.Sh)(Y.outcomeCounter,I.ab(u,A.$.getClassName(Y)),s.counterWrapper)),{"data-role":"counter"}),a.createElement("svg",{"aria-hidden":!0,viewBox:"0 0 32 18",className:Y.circular},a.createElement("rect",(0,h._)((0,m._)({},function(e,t){return t||e>=r?{width:32}:e>=n?{x:4,width:24}:{x:7,width:18}}(l,Boolean(p))),{height:18,rx:9})),a.createElement("text",(0,m._)((0,h._)((0,m._)({x:"50%",y:"10px"},(0,y.h5)(x.has(C.a.Flag.supportsSVGDominantBaseline))),{fontSize:f,"data-name":i}),(0,v.Sh)(F,s.counterContent)),t(l),p)))});e.PlagiarismOutcomesMeter=function(e){var t=e.count,n=e.isChecking,r=e.className;return a.createElement("div",(0,v.Sh)(Y.plagiarismMeter,r),a.createElement(o,{isChecking:n,type:"cyan",animateFade:!1}),a.createElement(c.F.div,{className:Y.wrapper},t.pipe(b.a(n),x.U((function(e){var t=(0,g._)(e,2),n=t[0],r=t[1];return _.g.isMin(n)?a.createElement(w.JO.CheckmarkOutcomes,{className:Y.plagiarismOutcomeIcon,key:"icon",width:20}):!r&&a.createElement(d,{count:_.g.prism.reverseGet(n),type:"cyan",key:"value",suffix:a.createElement("tspan",{fontSize:11},"%")})})),S.O(null))))}}(r||(r={}));var T=1.25,M={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:E.ux.percent(100),height:E.ux.percent(100)},G={position:"absolute",width:E.ux.percent(150),height:E.ux.percent(150),transform:"translate(-17%, -17%)"},L={position:"relative",display:"inline-flex",alignItems:"center"},D={width:E.ux.percent(100),height:E.ux.percent(100)},N={minWidth:E.ux.rem(2),width:E.ux.percent(100),height:E.ux.rem(T)},z={maxWidth:E.ux.rem(2),height:E.ux.rem(T)},P="counterText",F=E.ux.joinClasses([P,E.ux.style({fontWeight:"bold",textAnchor:"middle",fill:f.I.Text.Base.Inverse})]),O={fill:"transparent",$nest:(0,p._)({},"& .".concat(P),{fill:f.I.Text.Base.Subdued})},R={fill:"#FFDF80",$nest:(0,p._)({},"& .".concat(P),{fill:"#8C5404"})},$={fill:f.I.Background.Plagiarism.Default,$nest:(0,p._)({},"& .".concat(P),{fill:f.I.Text.Base.Inverse})},B={width:E.ux.rem(1.5),height:E.ux.rem(1.5)},U={width:E.ux.rem(2),height:E.ux.rem(T)},j={margin:"".concat(E.ux.rem(-1)," 0")},W={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:f.I.Background.Plagiarism.Default}}},H={width:E.ux.rem(2),height:E.ux.rem(1.125),position:"relative"},Y=E.ux.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[M],loader:[G],wrapper:[L],roundCounter:[L,D],ovalCounter:[L,N],flexCounter:[L,z],gray:[],green:[],blue:[],white:[O],yellowPremium:[R],cyan:[$],meter:[L,B],plagiarismMeter:[L,U],plagiarismIcon:[j],plagiarismOutcomeIcon:[j,W],outcomeCounter:[L,{position:"absolute",left:0},H]}),V=n(77933),Q=n(47311),q=n(51378),J=n(75068),X=n(73141);const Z={position:"relative",borderRadius:E.ux.rem(X.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none",backgroundColor:J.Il.CoreNeutral0},K={padding:`${E.ux.rem(1)} ${E.ux.rem(2)}`},ee={position:"absolute",top:E.ux.rem(.75),left:E.ux.rem(.5)},te={display:"flex",boxSizing:"border-box",padding:E.ux.rem(.5),height:E.ux.rem(2.5),cursor:"pointer",justifyContent:"flex-start",alignItems:"center"},ne={marginLeft:E.ux.rem(.8),fontSize:E.ux.rem(.85),lineHeight:E.ux.rem(1)},re={display:"flex",width:E.ux.percent(100),alignItems:"center",justifyContent:"space-between"},ie={position:"absolute",top:E.ux.rem(.2),right:E.ux.rem(.3),cursor:"pointer"},ae={paddingRight:E.ux.rem(1),textAlign:"left",fontSize:E.ux.rem(.75),lineHeight:E.ux.rem(1.15)},oe={marginTop:E.ux.rem(.6),fontSize:E.ux.rem(.875),flexShrink:0},se={display:"flex",marginBottom:E.ux.rem(.6),justifyContent:"flex-end",flexShrink:0},le={marginRight:"auto",lineHeight:E.ux.rem(1.3125)},ce={marginTop:E.ux.rem(.21),minWidth:E.ux.rem(1.5),flexShrink:0},de={marginTop:E.ux.rem(1)},ue={display:"flex",justifyContent:"center",alignItems:"center",height:E.ux.rem(2),backgroundColor:J.Il.CoreGreen60,borderRadius:E.ux.rem(.25),fontSize:E.ux.rem(.875),fontWeight:700,color:J.Il.CoreNeutral0,lineHeight:E.ux.rem(2),padding:E.ux.rem(q.mh),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:E.ux.color(J.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:E.ux.color(J.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},pe=E.ux.stylesheet({wrapper:[Z],maximizedWrapper:[K],minimizedWrapper:[te],maximizedWrapperIcon:[ee],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[ne],minimizedContent:[re],maximizedCloseButtonContainer:[ie],maximizedHeader:[ae],alertCategoryContainer:[oe],alertCategory:[se],categoryHumanContainer:[le],alertCounterContainer:[ce],premiumButtonContainer:[de],premiumButton:[ue]}),me=(e,t)=>i.UI.Grid.make((({slots:n})=>a.createElement(c.F.div,(0,v.Sh)(pe.wrapper,e),a.createElement(w.JO.UpgradeHookPanel.TitleDiamond,{className:t}),n.body))),he=i.UI.Node.make((({notify:e})=>a.createElement(c.F.div,{className:pe.maximizedCloseButtonContainer},a.createElement(V.zx,{name:"close",onClick:e("onClick")},a.createElement(w.JO.Arrow,{width:11,direction:w.n4.up})))));var ge;!function(e){let t,n;!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(t=e.ActionsKind||(e.ActionsKind={})),function(e){e.isOnUpgrade=function(e){return"onUpgrade"===e.kind},e.isOnUpgradeButtonMount=function(e){return"onUpgradeButtonMount"===e.kind}}(n=e.Actions||(e.Actions={}))}(ge||(ge={}));const fe=i.UI.Node.make((({state:e,notify:t})=>{const n=a.useContext(d.m.Context);return a.createElement(a.Fragment,null,a.createElement("div",{className:pe.maximizedHeader},a.createElement(c.F.Fragment,null,e.pipe(Q.map((({count:e})=>e>0?e>1?a.createElement(a.Fragment,{key:"plural"},n.sidebar.content.premiumIssues.foundTitlePlural.description1," ",e," ",n.sidebar.content.premiumIssues.foundTitlePlural.description2):a.createElement(a.Fragment,{key:"singular"},n.sidebar.content.premiumIssues.foundTitleSingular.description1," ",e," ",n.sidebar.content.premiumIssues.foundTitleSingular.description2):null))))),a.createElement(c.F.div,{className:pe.alertCategoryContainer},e.pipe(Q.map((({alerts:e})=>e.map((e=>a.createElement("div",{key:e.category,className:pe.alertCategory},a.createElement("div",{className:pe.categoryHumanContainer},e.categoryHuman),a.createElement("div",{className:pe.alertCounterContainer},a.createElement(r.Counter,{count:e.count,type:"yellowPremium"}))))))))),a.createElement("div",{className:pe.premiumButtonContainer},a.createElement("div",{ref:e=>{t({type:"upgradeHookAction",kind:ge.ActionsKind.onUpgradeButtonMount,element:o.ij(e)})()}},a.createElement(u.zx,{name:"upgrade",className:pe.premiumButton,onClick:t({type:"upgradeHookAction",kind:ge.ActionsKind.onUpgrade})},a.createElement(w.JO.UpgradeHookPanel.ButtonDiamond,null),n.goPremium))))})),ye=i.UI.Composite.make(me(pe.maximizedWrapper,pe.maximizedWrapperIcon),i.UI.Group.make({closeButton:i.UI.Union.make("kind",{hidden:i.UI.Node.empty,visible:he}),content:fe})),ve=(0,s.zG)(i.UI.squash(ye),i.UI.mapAction((e=>{switch(e.key){case"content":switch(e.action.kind){case ge.ActionsKind.onUpgrade:return{kind:"upgrade"};case ge.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,l.vE)(e.action)}case"closeButton":return"onClick"===e.action.action?{kind:"collapse"}:(0,l.vE)(e.action.action);default:return(0,l.vE)(e)}})),i.UI.contramapState((e=>({closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}))));var xe=n(3611);const Ie=i.UI.Node.make((({state:e})=>{const t=a.useContext(d.m.Context);return a.createElement(c.F.div,{className:pe.minimizedContent},a.createElement("div",{className:pe.minimizedText},t.premiumSuggestions),e.pipe(Q.map((({alertsCount:e})=>e>0&&a.createElement(r.Counter,{type:"yellowPremium",key:"advancedCounter-counter",count:e})))))})),be=i.UI.Grid.make((({slots:e,notify:t})=>a.createElement(c.F.div,(0,m._)({role:"button",className:pe.shadowWrapper},xe.rl(t("onClick"))),e.body))),Se=i.UI.Knot.make(be,{body:i.UI.Composite.make(me(pe.minimizedWrapper),Ie)}),Ce=(0,s.zG)(i.UI.squash(Se),i.UI.contramapState((e=>({body:e}))));var we;!function(e){let t;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(t=e.State||(e.State={}));e.TogglableExpandedPanel=i.UI.Union.make("kind",{[t.hidden]:i.UI.Node.empty,[t.expanded]:ve}),e.TogglablePanel=i.UI.Union.make("kind",{[t.hidden]:i.UI.Node.empty,[t.minimized]:Ce,[t.expanded]:ve})}(we||(we={}))},3611:(e,t,n)=>{n.d(t,{UW:()=>p,h_:()=>h,hz:()=>m,rl:()=>g,yG:()=>u});var r=n(92379),i=n(95295),a=n(58303),o=n(90023),s=n(13391),l=n(24909),c=n(88216),d=n(29227);function u(e,t){return{dangerouslySetInnerHTML:{__html:(0,d.Nw)(e,t)}}}function p(e){return t=>{t.stopPropagation(),e&&e(t)}}const m=e=>()=>(e(),new Promise(o.Q1));var h;function g(e){return{onClick:e,onKeyDown:t=>{if([c.R8.ENTER_CODE,c.R8.SPACE_CODE].includes(t.keyCode))return t.preventDefault(),e(t)}}}!function(e){e.create=e=>{const t=s.h.create(a.YP);return{Destination:({className:n})=>r.createElement("div",{"data-name":e,className:n,ref:e=>t.set(a.ij(e))}),Source:({children:e,insertHereWhileNotReady:n})=>r.createElement(l.F.Fragment,null,t.view(a.g_((()=>!0===n?e:null),(t=>i.createPortal(e,t)))))}}}(h||(h={}))},83042:(e,t,n)=>{n.d(t,{mN:()=>v});var r,i,a=n(32490),o=n(59833),s=n(14944),l=n(90023),c=n(21684),d=n(13391),u=n(31491),p=n(58303),m=n(84358),h=n(88347),g=n(5412),f=n(47311),y=n(80388);!function(e){const t=e=>t=>(0,l.zG)(t,p.UI((0,l.ls)(o.DZ((t=>e.getAlertByMark(t))),o.DY(s.Uz((({alert:{lensType:e,lensPriority:t}})=>({type:e,priority:t})))(g.R.ord)))));e.fromMarksEvents=(e,n)=>({activeHighlights:(0,l.zG)(n.activeMarks,f.map(t(e))),hoveredHighlights:(0,l.zG)(n.hoveredMarks,f.map(t(e)))})}(r||(r={})),function(e){e.Mock=class{constructor(){(0,a._)(this,"alertHovered",new f.Subject),(0,a._)(this,"alertClicked",new f.Subject),(0,a._)(this,"highlightedAlert",d.h.create(p.YP))}}}(i||(i={}));class v{constructor(e,t,n,i,o,s){(0,a._)(this,"_ded",void 0),(0,a._)(this,"_markAlertMapper",void 0),(0,a._)(this,"_alertsReader",void 0),(0,a._)(this,"_activeAlertChanges",void 0),(0,a._)(this,"_alertFilter",void 0),(0,a._)(this,"_resolveClickedAlert",void 0),(0,a._)(this,"_impl",void 0),(0,a._)(this,"alertHovered",void 0),(0,a._)(this,"alertClicked",void 0),this._ded=e,this._markAlertMapper=t,this._alertsReader=n,this._activeAlertChanges=i,this._alertFilter=o,this._resolveClickedAlert=s,this._impl=new x(r.fromMarksEvents(this._markAlertMapper,this._ded),this._alertsReader,this._activeAlertChanges,this._alertFilter,this._resolveClickedAlert),this.alertHovered=this._impl.alertHovered,this.alertClicked=this._impl.alertClicked}}class x{constructor(e,t,n,r,i){(0,a._)(this,"_highlightEvents",void 0),(0,a._)(this,"_alertsReader",void 0),(0,a._)(this,"_activeAlertChanges",void 0),(0,a._)(this,"_alertFilter",void 0),(0,a._)(this,"_resolveClickedAlert",void 0),(0,a._)(this,"alertHovered",void 0),(0,a._)(this,"alertClicked",void 0),this._highlightEvents=e,this._alertsReader=t,this._activeAlertChanges=n,this._alertFilter=r,this._resolveClickedAlert=i,this.alertHovered=this._highlightEvents.hoveredHighlights.pipe(f.map(p.UI(o.UI((({alert:e})=>e)))),f.scan(((e,t)=>(0,l.zG)(t,p.tS((t=>(0,l.zG)(e,p.hX((e=>-1!==t.indexOf(e))),p.g_((()=>p.ij(t[0])),p.G)))))),p.YP),f.map(p.hX((e=>this._alertsReader.isInteractable(e.id)&&!y.$.isPlagiarism(e)))),f.distinctUntilChanged()),this.alertClicked=this._highlightEvents.activeHighlights.pipe(f.withLatestFrom(this._activeAlertChanges,this._alertFilter),f.scan(((e,[t,n,r])=>{const i=t=>(0,l.zG)(e,p.Gg((e=>e.alert.id===t.alert.id))),a=e=>(0,l.zG)(n,p.Gg((t=>t.alert.id===e.alert.id))),o=e=>r(e.alert);var s;return(0,l.zG)(t,p.tS((e=>(0,l.zG)(e,null!==(s=this._resolveClickedAlert)&&void 0!==s?s:(0,c.N6)([(0,u.W9)(i,a),a,(0,u.W9)(i,o),o,i]),p.g_((()=>p.ij(e[0])),p.G),p.UI((e=>(0,h.Vx)(e,{highlightIndex:e.alert.hasNestedHighlights?0:e.highlightIndex})))))))}),m.cS()),f.shareReplay({refCount:!0,bufferSize:1}))}}},91167:(e,t,n)=>{n.d(t,{t:()=>g});var r=n(84910),i=n(78520),a=n(61179),o=n(90023),s=n(31491),l=n(24666),c=n(59179),d=n(84358),u=n(17690),p=n(5412);const m=(0,s.W9)(u.bZ.isRegistered,(0,a.ff)(u.bZ.isMuted)),h=e=>t=>(0,s.W9)(m,e(t));var g;!function(e){e.create=function(e,t){const n=h((t=>e[t]));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:e=>h((e=>t[e]))(e),alertVisibleInSidebar:n,getLensesFilter:t=>e[t],alertCanBeDisplayed:m,alertIsBulkAcceptable:e=>(0,s.W9)(n(e),u.bZ.isBulkAcceptable)}};const t=e=>t=>e===t.lensId,n=()=>e=>(0,o.zG)(e.freePremium,d.FX("unlocked"));e.getAlertVisibleInTextFilter=function(e,t){return t.pipe(l.x(((e,t)=>e.currentLens.id===t.currentLens.id)),c.U((t=>({filter:(0,s.Kg)(e.alertVisibleInText(t.currentLens.id),u.bZ.isBulkApplied,(e=>u.bZ.isWithTeaser(e)&&p.R.isCheetah(t.currentLens.id))),lensId:t.currentLens.id}))))};var a=e.defaultLensFilters={[p.R.SpecialId.Clarity]:t(p.R.SpecialId.Clarity),[p.R.SpecialId.Correctness]:t(p.R.SpecialId.Correctness),[p.R.SpecialId.Delivery]:t(p.R.SpecialId.Delivery),[p.R.SpecialId.Engagement]:t(p.R.SpecialId.Engagement),[p.R.SpecialId.Vox]:t(p.R.SpecialId.Vox),[p.R.SpecialId.KnowledgeHub]:t(p.R.SpecialId.KnowledgeHub),[p.R.SpecialId.FreePremiumAlerts]:(0,s.Kg)(n(),t(p.R.SpecialId.Premium)),[p.R.SpecialId.Plagiarism]:t(p.R.SpecialId.Plagiarism),[p.R.SpecialId.DraftAI]:o.jv,[p.R.SpecialId.Cheetah]:o.jv,[p.R.SpecialId.Premium]:t(p.R.SpecialId.Premium),[p.R.SpecialId.AllAlerts]:u.bZ.belongsToAllAlerts,[p.R.SpecialId.Closed]:o.jv,[p.R.SpecialId.PredictionTakeaways]:u.bZ.belongsToPredictionTakeaways,[p.R.SpecialId.PredictionEmogenie]:u.bZ.belongsToPredictionEmogenie,[p.R.SpecialId.RealTimeProofit]:t(p.R.SpecialId.RealTimeProofit)};e.defaultTextFilters=(0,i._)((0,r._)({},a),{[p.R.SpecialId.Closed]:u.bZ.isInline,[p.R.SpecialId.FreePremiumAlerts]:(0,s.Kg)(n(),t(p.R.SpecialId.Premium)),[p.R.SpecialId.Premium]:g.defaultLensFilters[p.R.SpecialId.Premium]})}(g||(g={}))},60152:(e,t,n)=>{n.d(t,{F:()=>r});var r,i=n(32490),a=n(58303),o=n(90023),s=n(64297),l=n(31491),c=n(72111),d=n(99531),u=n(17690),p=n(61230),m=n(80388);!function(e){e.Impl=class{constructor(e,t,n,r){(0,i._)(this,"_checkingState",void 0),(0,i._)(this,"_positionManager",void 0),(0,i._)(this,"_alertsReader",void 0),(0,i._)(this,"_alertCanBeDisplayed",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"findClosestAlertHighlight",void 0),(0,i._)(this,"findNextAlertInText",void 0),(0,i._)(this,"findPremiumAlert",void 0),this._checkingState=e,this._positionManager=t,this._alertsReader=n,this._alertCanBeDisplayed=r,this._log=c.C8.Logging.getLogger("AlertSearchService"),this.findClosestAlertHighlight=(e,t)=>(0,o.zG)(this._positionManager.findClosestToPosition(e,(e=>d.P.is(e)&&d.x.isVisible(e)&&!d.x.isApplied(e)&&(0,o.zG)(this._alertsReader.getRegistered(e.meta.alertId),a.Gg((n=>this._alertCanBeDisplayed(n)&&t(n)&&n.getHighlightRanges().some((t=>t.meta.id===e.meta.id))))))),a.tS((e=>(0,o.zG)(this._alertsReader.getRegistered(e.meta.alertId),a.UI((t=>{const n={alert:m.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((t=>t.meta.id===e.meta.id))};return n.highlightIndex<0&&(this._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:n.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(this._positionManager.findRanges((e=>d.P.is(e)&&e.meta.alertId===t.id))),hasPendingRanges:t.hasNewRangesForUpdate}),n.highlightIndex=0),n})))))),this.findNextAlertInText=({alert:e,highlightIndex:t},n)=>{const r=e.getHighlightRanges();return(0,s.kG)(t<r.length,"AHI is out of highlightRanges length",`hr length: ${r.length}, ahi: ${t}`),this.findClosestAlertHighlight(r[t].end,n)},this.findPremiumAlert=()=>(0,o.zG)(this._checkingState.get(),p.p.find((0,o.ls)(u.bZ.fromAlertModel,(0,l.W9)(u.bZ.isRegistered,u.bZ.isPremium))),a.UI((e=>({alert:m.$.fromModel(e.alert),highlightIndex:0}))))}}}(r||(r={}))},44290:(e,t,n)=>{n.d(t,{Bd:()=>a,Oe:()=>r,rG:()=>i});var r,i,a,o=n(84910),s=n(78520),l=n(21147),c=n(17690);!function(e){e.eq=(0,l.Uz)((e=>e.alert))(c.h$.ordId),e.isPending=e=>null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate),e.isOneOf=(...e)=>t=>e.some((e=>e===t.state.current.visualState));var t=e.notAnyOf=(...e)=>t=>e.every((e=>e!==t.state.current.visualState));e.canBeChanged=e=>n=>Boolean(e)&&a.applied===n.state.current.visualState?e===a.disposed:c.bZ.State.isBulkApplied(n.alert.state)||t(a.applied,a.disposed)(n),e.isOrWillBe=e=>t=>null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e,e.willBe=e=>t=>null!==t.state.scheduled&&t.state.scheduled.visualState===e}(r||(r={})),function(e){e.updateRanges=function(e,t){return(0,s._)((0,o._)({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return(0,s._)((0,o._)({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return(0,s._)((0,o._)({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),(a||(a={})).isApplied=function(e){return e===a.applied}},93631:(e,t,n)=>{n.d(t,{v:()=>S});var r=n(32490),i=n(84910),a=n(78520),o=n(59833),s=n(12518),l=n(90023),c=n(21684),d=n(64297),u=n(31491),p=n(72111),m=n(58303),h=n(84358),g=n(44970),f=n(22561),y=n(99531),v=n(17690),x=n(91320),I=n(80388),b=n(44290);class S{get state(){return{current:this._currentState,scheduled:this._scheduledState}}get alert(){return this._alert()}scheduleApply(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,d.kG)(e!==b.Bd.initial,`Cannot schedule change ${this.id} from ${this._currentState.visualState} to initial state`),this._currentState.visualState!==b.Bd.initial||e!==b.Bd.disposed&&!b.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=b.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=b.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=b.rG.from(b.Bd.disposed),this._dispose()),this}scheduleUpdate(){this._throwWhenInFinaleState(),this._scheduledState=b.rG.updateRanges(this._scheduledState||this._currentState,!0)}scheduleForceUpdate(){this._throwWhenInFinaleState(),this._scheduledState=b.rG.forceUpdate(this._scheduledState||this._currentState,!0)}apply(){if(!b.Oe.isPending(this))return;this._throwWhenInFinaleState();const e=this._getTransition();(0,l.zG)(this.change(),m.hX((e=>e.rawMark.length>0)),m.UI((t=>{this._handleBasicEvent(t.rawMark),t.commit(),this._onTransitionEnd(e,this)})))}applyWith(e){const t=[this,...e];this._handleMultipleHighlights(t,(e=>e.change()))}markByIndex(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return m.YP}}get enclosingMark(){const e=Array.from(this._marksMap.values()).findIndex((0,l.ls)(m.tS((e=>m.Uo(e.range()))),m.hX(y.x.isEnclosingView),m.pC));return e>-1?this.markByIndex(e):m.YP}get mark(){return this.markByIndex(0)}_iterateOverMarkAlerts(e,t){e.forEach((({change:e,ma:n})=>{e.rawMark.forEach((e=>{"create"===e.action?n._setMarkAndCheckFinaleState(e.id,(0,l.zG)(t.created.get(e.id)||s.t$(new Error("Cannot get unknown mark")),m.Uo)):"remove"===e.action&&n._removeMark(e.id)})),e.commit(),n._disposeIfEmpty()}))}_handleMultipleHighlights(e,t){const n=e.map((e=>[e,t(e)])).filter((([e,t])=>(0,l.zG)(t,m.hX((t=>0!==t.rawMark.length||(C("markAlert").warn("rawAction must have rawMark array",{rawAction:t.action,state:(0,a._)((0,i._)({},e.toJSON()),{alert:void 0})}),!1))),m.pC))).map((([e,t])=>({ma:e,change:h.MH(t)})));if(0===n.length)return;const r=(0,c.VS)(n.map((e=>e.change.rawMark))),o=this._changeMarksInDEd(r);this._iterateOverMarkAlerts(n,o)}get _mark(){return this._markbyIndex(0)}_markbyIndex(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:m.YP}_setMarkAndCheckFinaleState(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)}_setMark(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)}_removeMark(e){this._marksMap.delete(e)}change(){(0,d.kG)(b.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id})));const e=this._commitTransition();return e.from.visualState!==e.to.visualState||e.to.forceUpdate||e.to.updateRanges?m.G(this._getRawActionForApply(e)):m.YP}_handleBasicEvent(e){const t=this._changeMarksInDEd(e);e.forEach((e=>{if(e.action===g.v.Change.ActionType.remove)this._removeMark(e.id);else{const n=(0,l.zG)(m.ij(this._marksMap.get(e.id)),m.tS(l.yR),m.wp((()=>(0,l.zG)((e.action===g.v.Change.ActionType.create?t.created.get(e.id):t.updated.get(e.id))||s.t$(new Error("Cannot get unknown mark")),m.Uo))));this._setMark(e.id,n)}})),this._disposeIfEmpty()}_getTransition(){return(0,d.kG)(b.Oe.isPending(this),"Next state should be scheduled to change it",(()=>JSON.stringify({currentState:this._currentState,aid:this.id}))),{from:this._currentState,to:this._scheduledState}}_commitTransition(){const e=this._getTransition();return this._currentState=(0,a._)((0,i._)({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e}_getRawActionForApply(e){if(e.from.visualState===b.Bd.initial)return(0,l.zG)(this._tryToUpdateRangesInAlert(e),m.UI((e=>e.commit()))),{action:"create",commit:l.Q1,rawMark:this._getHighlightRanges((t=>this._create((()=>t),e)(t.meta.id)))};switch(e.to.visualState){case b.Bd.disposed:const t=b.Bd.isApplied(e.from.visualState)||v.bZ.State.isRemoved(this.alert.state)&&I.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(l.Q1).length>0?this._getAppliedRanges(((e,t)=>({id:t().meta.id,range:t}))):this._getHighlightRanges((e=>({id:e.meta.id,range:()=>e}))),n=(0,l.zG)(this._tryToUpdateRangesInAlert(e),m.UI((({commit:e})=>e)),m.fS((()=>l.Q1)));return{action:"remove",commit:n,rawMark:t.map((e=>this._remove(e.range)(e.id)))};case b.Bd.applied:const r=this._getHighlightRanges((e=>this._remove((()=>e))(e.meta.id)));return{action:"replace",commit:(0,l.zG)(this._tryToUpdateRangesInAlert(e),m.UI((({commit:e})=>e)),m.fS((()=>l.Q1))),rawMark:[...r,...this._getAppliedRanges(((t,n)=>this._create(n,e)(n().meta.id)))]};default:const i=()=>v.bZ.State.isBulkApplied(this._alert("_getRawActionForApply").state)?this._getAppliedRanges(((e,t)=>t())):this._getHighlightRanges(l.yR);return(0,l.zG)(this._tryToUpdateRangesInAlert(e),m.UI((({commit:t,ranges:n})=>this._getReplaceAction(e,i(),n.removed,t))),m.fS((()=>({action:"update",commit:l.Q1,rawMark:i().map((t=>this._update((()=>t),e)(t.meta.id)))}))))}}_getReplaceAction(e,t,n,r){return{action:"replace",commit:r,rawMark:[...n.map((e=>this._remove((()=>e))(e.meta.id))),...t.map((t=>this._create((()=>t),e)(t.meta.id)))]}}_getAppliedRanges(e){return(0,l.zG)(this._alertRangeService.getAppliedRanges(this.id),s.g_((e=>(C("markAlert").error("cannot get applied ranges",{error:e.message,alert:I.$.snapshot(this._alert("_getAppliedRanges"))}),[])),o.Su(e)))}_getHighlightRanges(e){return(0,l.zG)(this._alertRangeService.getHighlightRanges(this.id),s.g_((t=>(C("markAlert").warn("cannot get highlight ranges via range service",{error:t,alert:this._alert("_getHighlightRanges")}),(0,l.zG)(this._alert("_getHighlightRanges_Fallback").getHighlightRanges(),o.UI(e)))),o.UI(e)))}_throwWhenNotAllowedState(e){const t=this._alert("_throwWhenNotAllowedState");(0,d.kG)(!!I.$.isApplicableAlert(t)||(!Boolean(e)||v.bZ.State.isBulkApplied(t.state)||!b.Bd.isApplied(e)),`Applied state isn't allowed for ${this.id}`)}_throwWhenInFinaleState(e){(0,d.kG)(Boolean(e)&&b.Oe.isOneOf(b.Bd.applied)(this)?e===b.Bd.disposed||v.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):b.Oe.notAnyOf(b.Bd.disposed)(this),`'${this._currentState.visualState}' MarkAlert '${this.id}' cannot be changed${Boolean(e)?` to '${e}' `:""}`)}toJSON(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,l.zG)(this._mark,m.UI((e=>e.id)),m.FS),range:(0,l.zG)(this._mark,m.UI((e=>e.range)),m.FS)},alert:this._alert("toJSON")}}equals(e){return b.Oe.eq.equals(this,e)}hashCode(){return(0,x.AC)(this.id)}constructor(e,t,n,i,a,o,c,d){(0,r._)(this,"_alert",void 0),(0,r._)(this,"_alertsService",void 0),(0,r._)(this,"_alertRangeService",void 0),(0,r._)(this,"_changeMarksInDEd",void 0),(0,r._)(this,"_create",void 0),(0,r._)(this,"_update",void 0),(0,r._)(this,"_remove",void 0),(0,r._)(this,"_onTransitionEnd",void 0),(0,r._)(this,"_currentState",void 0),(0,r._)(this,"_scheduledState",void 0),(0,r._)(this,"id",void 0),(0,r._)(this,"_marksMap",void 0),(0,r._)(this,"_alertRef",void 0),(0,r._)(this,"_shouldInitMark",void 0),(0,r._)(this,"_tryToUpdateRangesInAlert",void 0),(0,r._)(this,"_dispose",void 0),(0,r._)(this,"_disposeIfEmpty",void 0),this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=i,this._create=a,this._update=o,this._remove=c,this._onTransitionEnd=d,this._currentState=b.rG.from(b.Bd.initial),this._scheduledState=b.rG.from(b.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=e=>{if(!e.to.updateRanges||!(0,l.zG)(this._alertRangeService.hasNewRangesForUpdate(this.id),s.g_(l.jv,l.yR)))return m.YP;const t=(0,l.zG)(this._alertRangeService.applyPendingRangesUpdate(this.id),s.Vn((e=>C("markAlert").error("cannot apply pending ranges",e))),m.Uo,m.tS(l.yR),m.hX((({addedHighlightedRanges:e,removedHighlightedRanges:t})=>e.length>0||t.length>0)));return(0,l.zG)(t,m.UI((e=>({commit:()=>e.removedHighlightedRanges[1](),ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}))))},this._dispose=()=>{this._marksMap.clear(),s.wE.map(this._alertRef,(e=>e.dispose()))},this._disposeIfEmpty=()=>{0===this._marksMap.size&&this._dispose()},s.wE.mapLeft(this._alertRef,(e=>C("markAlert").warn("can not take alertRef",e)))}}!function(e){e.compareTo=e=>{const t=(0,u.WA)(f.SV.distanceFrom)(e);return(e,n)=>(0,u.qu)(Math.min(...e.alert.getHighlightRanges().map(t)),Math.min(...n.alert.getHighlightRanges().map(t)))}}(S||(S={}));const C=(0,u.HP)(p.C8.Logging.getLogger)},31842:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(12518),a=n(58303),o=n(90023),s=n(64297),l=n(72111),c=n(23778),d=n(23841),u=n(47311),p=n(94032),m=n(34837),h=n(88367);!function(e){let t;!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(t=e.Animation||(e.Animation={}));const n=l.C8.Logging.root.getLogger("AlignmentViewModel");function g(e,t){return(0,o.zG)(e,i.g_((({kind:e,reason:t})=>{switch(e){case"error":n.error("Cannot align card to mark",{reason:t});break;case"notFound":n.info("Item does not exist, alignment is canceled",{reason:t});break;default:(0,s.vE)(e)}return u.EMPTY}),(e=>u.of({mark:t,card:e}))))}e.alignMarkToItem=function(e,r){return({animation:i,suggestedPosition:s})=>({id:l,renderOptions:{features:f},activeHighlightIndex:y,activeAlert:v})=>(0,o.zG)(e.getMarkAlertPosition({alert:v,highlightIndex:y}),d.oA,u.map((e=>({mark:e,cardPosition:r.getCardSuggestedPositionInViewport(l,f.has(h.j.Features.showLabel),a.YP,"cardContentTop")}))),u.switchMap((({cardPosition:e,mark:t})=>g(e,t))),u.switchMap((({card:e,mark:t})=>r.setCardPosition(l,f.has(h.j.Features.showLabel),!1,m.r.FromWindowTop.ISO.modify(m.L.concatC(-e.contentOffset))(t)).pipe(u.distinctUntilChanged(),u.mapTo((0,o.zG)(s,a.hX((t=>r.willFitViewport(l,m.r.FromWindowTop.ISO.modify(m.L.concatC(-e.contentOffset))(t)))),a.fS((()=>m.r.FromWindowTop.ISO.modify(m.L.concatC(e.contentOffset))(e.top)))))))),u.switchMap((n=>e.moveAlertHighlightInViewport({alert:v,highlightIndex:y},n,i===t.ANIMATE_ALL?c.uq.fake:c.uq.none))),u.mapTo(p.PU),u.catchError((e=>(n.error("Cannot align mark to card",e),u.EMPTY))),u.share())},e.alignItemToMark=function(e,t){return({animation:i,fitCardIntoViewport:s})=>({id:l,renderOptions:{features:d},activeAlert:f,activeHighlightIndex:y})=>(0,o.zG)(e.getMarkAlertPosition({alert:f,highlightIndex:y}),u.switchMap(a.g_((()=>u.EMPTY),(e=>u.of(e)))),u.map((e=>({mark:e,cardPosition:t.getCardSuggestedPositionInViewport(l,d.has(h.j.Features.showLabel),a.G(e),"cardContentTop")}))),u.switchMap((({cardPosition:e,mark:t})=>g(e,t))),u.switchMap((({card:n,mark:a})=>u.mergeStatic(t.setCardPosition(l,d.has(h.j.Features.showLabel),i===r.Animation.ANIMATE_ALL,m.r.FromWindowTop.ISO.modify(m.L.concatC(-n.contentOffset))(a)),p.Ft(e.moveAlertHighlightInViewport({alert:f,highlightIndex:y},m.r.FromWindowTop.ISO.modify(m.L.concatC(n.contentOffset))(n.top),i===r.Animation.ANIMATE_ALL?c.uq.initial:c.uq.none))(s)))),u.mapTo(p.PU),u.catchError((e=>(n.error("Cannot align card to mark",e),u.EMPTY))),u.share())}}(r||(r={}))},68136:(e,t,n)=>{n.d(t,{eZ:()=>G,UC:()=>L});var r=n(32490),i=n(84910),a=n(78520),o=n(90023),s=n(94173),l=n(64297),c=n(31491),d=(n(72111),n(58303)),u=n(12518),p=n(17572),m=n(84358),h=n(88347),g=n(90742),f=n(17690),y=n(5412),v=n(47311),x=n(23841),I=n(94032),b=n(64570),S=n(31842),C=n(70394),w=n(34837),A=n(57576),E=n(70701),k=n(31882);var _,T,M;!function(e){var t=e.CARD_CONTENT_OFFSET_REM=3.4,n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=t+1;e.contentOffsetGetter=(e=t,r=n)=>(t,n)=>Math.round((t?r:e)*n)}(_||(_={})),function(e){e.cardPositionGetter=(e,t)=>(n,r)=>{const i=new E.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,o.zG)(e.view(A.nL.getLens).get(),u.Yo((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),u.tS((({items:e,id:t})=>(0,o.zG)(e.get(n),u.Yo((()=>({kind:"notFound",reason:`The item with id: ${n} does not exist in lens ${t}`}))),u.UI((({value:e})=>(0,o.zG)(r,d.g_((()=>(0,o.ls)(w.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop,i.converters.viewportToWindow)(e.positionState.absTop)),o.yR))))))))},e.cardPositionInViewportGetter=(e,t)=>(n,r)=>{const i=new E.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,o.zG)(e.view(A.nL.getLens).get(),u.Yo((()=>({kind:"error",reason:"Current lens is not WithItemsLensState"}))),u.tS((({items:e,id:t})=>(0,o.zG)(e.get(n),u.Yo((()=>({kind:"notFound",reason:`The item with id: ${n} does not exist in lens ${t}`}))),u.tS((({value:t})=>{return(0,o.zG)(r,d.UI(i.converters.windowToViewport),d.wp((()=>d.G((0,o.ls)(w.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop)(t.positionState.absTop)))),d.UI((a=t,s=((e,t)=>(0,o.zG)(t.get(e),d.UI((({index:e})=>({before:(0,o.zG)(t.getAt(e-1),d.UI((e=>e.positionState.height)),d.fS((()=>0))),after:(0,o.zG)(t.getAt(e+1),d.UI((e=>e.positionState.height)),d.fS((()=>0)))}))),d.fS((()=>({before:0,after:0})))))(n,e),l=i.viewport,e=>{const t=(0,k.v_)({cardTop:e,cardHeight:a.positionState.height,viewportHeight:l.height,padding:s});return w.L.FromViewportTop.ISO.modify(w.L.concatC(-t))(e)})),d.UI(i.converters.viewportToWindow),u.Yo((()=>({kind:"error",reason:"Cannot get card position in viewport"}))));var a,s,l}))))))}}(T||(T={})),function(e){const t=(e,t,n,r)=>{const i=r.viewport.get(),a=r.scrollTop.get(),s=w.L.converters(a,w.r.FromWindowTop.ISO.unwrap(i.top),r.paddingTop.get());return p.vM((()=>(0,o.zG)(A.nL.getLens(n),d.tS((t=>t.items.get(e))),d.UI((e=>w.L.AbsTop.ISO.wrap(e.value.positionState.absTop))),d.UI((e=>s.absTopToViewportTop(e))),d.g_((()=>{throw new l.ej("Cannot get offset for unknown card")}),(e=>{const n=s.windowToViewport(t);return w.L.FromViewportTop.ISO.unwrap(e)-w.L.FromViewportTop.ISO.unwrap(n)})))))};e.moveCardToPositionSyncGetter=(e,n)=>r=>(0,o.zG)(t(r.id,r.position,e.get(),n),u.tS((e=>n.moveCardsBy(e,"moveCardToPositionAnimated")))),e.moveCardToPositionAnimatedGetter=(e,n)=>r=>(0,o.zG)(t(r.id,r.position,e.get(),n),u.g_((e=>v.throwError(e)),(e=>n.moveCardsByAnimated(e,"moveCardToPositionAnimated"))))}(M||(M={}));var G,L,D,N,z=n(65557);class P extends l.sH{}!function(e){var t=e.cardSuggestedPositionGetter=(e,t)=>(n,r,i,a)=>{const s="cardTop"===a?0:t(r);return(0,o.zG)(e(n,(0,o.zG)(i,d.UI(w.r.FromWindowTop.ISO.modify(w.L.concatC(-s))))),u.UI((e=>({top:e,contentOffset:s}))))};e.getSuperScrollMapper=(e,n,r)=>{const i=M.moveCardToPositionAnimatedGetter(e,n),a=M.moveCardToPositionSyncGetter(e,n),s=_.contentOffsetGetter();return{setCardPosition:(e,t,n,o)=>{const l={top:o,contentOffset:s(t,r.get())};return(n?i({id:e,position:o}):v.of(a({id:e,position:o})).pipe(v.map(p.MH))).pipe(v.mapTo(l),v.startWith(l),v.distinctUntilChanged())},getCardSuggestedPosition:t(T.cardPositionGetter(e,n),(e=>s(e,r.get()))),getCardSuggestedPositionInViewport:t(T.cardPositionInViewportGetter(e,n),(e=>s(e,r.get()))),willFitViewport:(t,r)=>(0,o.zG)(e.get(),(e=>!!A.nL.hasItems(e)&&((e,t)=>(n,r)=>{const i=new E.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,o.zG)(e.currentLens.items,(e=>(0,o.zG)(e.get(n),d.UI((({value:e})=>0===(0,k.v_)({cardTop:i.converters.windowToViewport(r),cardHeight:e.positionState.height,viewportHeight:i.viewport.height,padding:{before:0,after:0}}))))),m.MH)})(e,n)(t,r))),isAboveViewportTop:(l=n,e=>w.r.FromWindowTop.ISO.modify(w.L.concatC(l.scrollTop.get()+l.paddingTop.get()))(e)<l.viewport.get().top)};var l}}(G||(G={})),function(e){e.getMapper=(e,t,n)=>({moveAlertHighlightInViewport:(t,n,r)=>e.ensureAlertHighlightInViewport(t,w.r.FromWindowTop.ISO.unwrap(n),r),getMarkAlertPosition:r=>(0,o.zG)(e.getMarkByAlert(r),u.Yo((()=>new P("getMarkByAlert returned O.none"))),u.tS((i=>(0,o.zG)(i.getRect(),u.UI(g.n.relativeToViewport),u.UI((e=>e.top)),u.vx((()=>(n.debug("Cached alert is missing, falling back to flush"),(n=>(t.flushChanges(),(0,o.zG)(e.getMarkByAlert(n),u.Yo((()=>new Error("getMarkByAlert returned O.none"))),u.tS((e=>(0,o.zG)(e.getRect(),u.UI(g.n.relativeToViewport),u.UI((e=>e.top))))))))(r)))),u.UI(w.r.FromWindowTop.ISO.wrap)))),u.Vn((e=>(e instanceof P||n.warn("Cannot getMarkAlertPosition",e),e))),d.Uo,(e=>v.of(e)))})}(L||(L={}));!function(e){e.Mock=class{constructor(){(0,r._)(this,"alignCardToMark",(()=>v.EMPTY)),(0,r._)(this,"alignCardTo",(()=>v.EMPTY)),(0,r._)(this,"alignMarkTo",(()=>v.EMPTY)),(0,r._)(this,"alignMarkToCard",(()=>v.EMPTY))}}}(D||(D={})),function(e){let t;!function(e){let t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={}));e.getRelativePosition=(e,n,r)=>n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}(t||(t={}));e.createAlignmentOnTypingEffect=(e,t,n,r,i,a=k.Bk)=>{const s=e.view(A.nL.mapper((({currentLens:e})=>(0,o.zG)(d.G(e),d.hX(a(i)))))).pipe(v.map(d.tS(r),d.hX(i.isValidToAlign)),x.cp((e=>n.pipe(v.switchMap(I.b2.rafScheduler),v.switchMap((()=>t.alignCardToMark(e,S.v.Animation.NO_ANIMATION,!1)))))));return{id:"alignmentOnTyping",when:y.R.isWithAlertsId,what:A.nL.Effect.Applicator.create(s.pipe(v.switchMapTo(v.NEVER)))}},e.createAlignOnDisjointedAreasEffect=(e,n,r,i)=>{const a=e.view((0,o.ls)(A.nL.getLens,d.hX((e=>d.Wi(A.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0)))),c=a.pipe(v.map(d.pC),v.distinctUntilChanged(),v.switchMap(I.Ft(r.changes.pipe(v.startWith(I.PU),v.switchMap(I.b2.rafScheduler),v.map((()=>d.G((e=>{const t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}})(r)))),v.map(d.hX((e=>e.top-e.bottom!=0)))))),v.withLatestFrom(a.pipe(v.map(d.UI((({items:e})=>e)))),m.vB(((r,a)=>(0,o.zG)(z.YA(e,i),d.UI((e=>({top:w.r.FromWindowTop.ISO.unwrap(e.top),bottom:w.r.FromWindowTop.ISO.unwrap(e.bottom)}))),d.tS((e=>(0,o.zG)(((e,n,r)=>{const i=(0,o.zG)(e.getAt(0),d.UI((e=>e.positionState.height)),d.fS((()=>0))),a=t.getRelativePosition(n,r,i);switch(a){case t.RelativePosition.above:return(0,o.zG)(e.getAt(0),d.UI((e=>({card:e,top:n.top}))));case t.RelativePosition.below:return(0,o.zG)(e.getAt(0),d.UI((e=>({card:e,top:n.bottom-e.positionState.height}))));case t.RelativePosition.intersects:return d.YP;default:return(0,l.vE)(a)}})(a,r,e),d.UI((({card:e,top:t})=>n.alignCardTo(e,w.r.FromWindowTop.ISO.wrap(t),S.v.Animation.NO_ANIMATION)))))),d.fS((()=>v.EMPTY)))))),v.switchMap(d.g_((()=>v.EMPTY),s.y)));return{id:"alignOnDisjointedAreas",when:y.R.isWithAlertsId,what:A.nL.Effect.Applicator.create(c.pipe(v.switchMapTo(v.NEVER)))}},e.createAlignOnResizeSideEffect=(e,t,n,r,i,a=I.b2.rafScheduler,s=k.Bk)=>{const l=e.view(A.nL.mapper((({currentLens:e,alertSource:t})=>d.G({currentLens:e,alertSource:t})))).view(d.hX((({currentLens:e})=>s(i)(e)))).view(d.tS((({currentLens:e,alertSource:t})=>(0,o.zG)(r(e),d.hX(i.isValidToAlign),d.UI((n=>({item:n,source:t,lensId:e.id}))))))),c=b.Qr.pipe(v.throttleTime(100),v.merge(n),v.withLatestFrom(l,((e,t)=>t)),v.switchMap(a),v.switchMap(d.g_((()=>v.EMPTY),(({item:e})=>t.alignCardToMark(e,S.v.Animation.NO_ANIMATION,!1)))));return{id:"alignOnResizeSideEffect",when:y.R.isWithAlertsId,what:A.nL.Effect.Applicator.create(c.pipe(v.switchMapTo(v.NEVER)))}};let n;!function(e){e.skip="skip"}(n=e.SkipAlertActionSource||(e.SkipAlertActionSource={}));e.createAlignmentSideEffect=(e,t,n=((e,t)=>t),i,a,o,s,l=I.b2.rafScheduler)=>{const c=r(e,t,n,i,a,o,s,l);return{id:"alignmentSideEffect",when:y.R.isWithAlertsId,what:A.nL.Effect.Applicator.create(c.pipe(v.switchMapTo(v.EMPTY)))}};var r=e._createAlignmentSource=(e,t,r=((e,t)=>t),l,u,p,g,y=I.b2.rafScheduler,x=k.Bk)=>{const b=(0,c.Kg)(C.lY.isAlertMinicardButtonClick,C.lY.isSwitchToClosestByViewport,C.lY.isAlertCardShow,C.eI.isCardExpand,C.lY.isBulkAcceptItemShow,C.lY.isBulkHighlight),E=v.mergeStatic(e.pipe(v.map(A.nL.mapper((({currentLens:e,alertSource:t})=>d.G({currentLens:e,alertSource:t})))),v.startWith(d.YP),v.map(d.UI((e=>e.currentLens.id))),v.pairwise(),v.filter((([e,t])=>(0,o.zG)(m.vB(((e,t)=>e!==t))(e,t),d.Gg(s.y)))),v.mapTo(d.YP)),e.pipe(v.map(A.nL.mapper((({currentLens:e,alertSource:t})=>d.G({currentLens:e,alertSource:t})))),v.filter(d.Gg((({currentLens:e})=>x(u)(e)))),v.map(d.tS((({currentLens:e,alertSource:t})=>(0,o.zG)(l(e),d.hX(u.isValidToAlign),d.UI((n=>({item:n,source:t,lensId:e.id}))))))))).pipe(v.distinctUntilChanged((0,o.ls)(m.vB(((e,t)=>e.lensId===t.lensId&&e.source===t.source&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),d.Gg(s.y)))),_=t.pipe(v.filter(b),v.map(d.G),v.startWith(d.YP),v.pairwise(),v.filter((0,o.ls)((0,o.og)(m.vB(((e,t)=>!C.lY.isAlertCardShow(t)||!C.lY.isAlertMinicardButtonClick(e)))),d.fS(o.jv))),v.map((([,e])=>(0,o.zG)(e,d.hX(C.lY.hasClickPoint)))),v.startWith(d.YP)).pipe(v.switchMap((e=>E.pipe(v.filter(d.Gg((e=>e.source===f.l$.sidebar))),v.map(d.tS((t=>d.G((0,a._)((0,i._)({},t),{clickPoint:(0,o.zG)(e,d.UI((0,h.ei)("clickPoint")))}))))))))),T=E.pipe(v.filter(d.Gg((e=>e.source!==f.l$.sidebar))),v.map((e=>(0,o.zG)(e,d.tS((e=>d.G((0,a._)((0,i._)({},e),{clickPoint:d.YP}))))))));return v.mergeStatic(_,T).pipe(v.startWith(d.YP),v.pairwise(),v.map((([e,t])=>(0,o.zG)(t,d.UI((n=>({lensId:n.lensId,card:n.item,source:n.source,animate:(0,o.zG)(e,m.wo((({lensId:e})=>e===n.lensId))),clickPoint:(0,o.zG)(t,d.tS((0,h.ei)("clickPoint")),d.UI((0,o.ls)((0,h.ei)("y"),w.r.FromWindowTop.ISO.wrap)))})))))),v.switchMap(d.g_((()=>v.EMPTY),y)),v.withLatestFrom(e),v.switchMap((([{card:e,source:t,animate:i,clickPoint:a,lensId:s},l])=>(0,o.zG)(r(e,t),(t=>A.nL.hasItems(l)&&l.currentLens.items.has(e.id)&&s===l.currentLens.id&&t!==n.skip?((e,t,n,r)=>{if(n===f.l$.text)return(0,o.zG)(e,g({animation:t?S.v.Animation.ANIMATE_ALL:S.v.Animation.NO_ANIMATION,fitCardIntoViewport:!0}));if(n===A.h8.forceText)return(0,o.zG)(e,g({animation:S.v.Animation.NO_ANIMATION,fitCardIntoViewport:!1}));{const i=n===f.l$.sidebar?t?S.v.Animation.ANIMATE_ALL:S.v.Animation.ANIMATE_MARK:S.v.Animation.NO_ANIMATION;return(0,o.zG)(e,p({animation:i,suggestedPosition:r}))}})(e,i,t,a):v.NEVER)))))}}(N||(N={}))},61736:(e,t,n)=>{n.d(t,{sU:()=>me,dv:()=>pe,Xx:()=>be});var r={};n.r(r),n.d(r,{handleGbPrompt:()=>q,sendToIdeasGallery:()=>Q,sendToSignIn:()=>V});var i=n(32490),a=n(84910),o=n(78520),s=n(59833),l=n(12518),c=n(21147),d=n(95922),u=n(90023),p=n(74822),m=n(64297),h=n(13391),g=n(31491),f=n(72111),y=n(7083),v=n(58303),x=n(84358),I=n(18117),b=n(50271);function S(e){return(0,u.ls)(v.G,e.of)}function C(e){return(0,u.a9)(e.of(v.YP))}function w(e){return function(t){return e.map(t,v.G)}}function A(e){var t=function(e){var t=C(e);return function(n,r){return e.chain(n,v.EQ((function(){return t()}),r))}}(e);return function(e){return function(n){return t(n,e)}}}function E(e){var t=function(e){return(0,I.ap)(e,v.G5)}(e),n=function(e){return(0,b.UI)(e,v.dO)}(e),r=A(e),i=function(e){var t=S(e);return function(n){return function(r){return e.chain(r,v.EQ(n,t))}}}(e),a=function(e){return function(t,n){return function(r){return e.chain(r,v.EQ(t,n))}}}(e),o=function(e){return function(t){return function(n){return e.chain(n,v.EQ(t,e.of))}}}(e),s=C(e);return{map:function(e,t){return(0,u.zG)(e,n(t))},ap:function(e,n){return(0,u.zG)(e,t(n))},of:S(e),chain:function(e,t){return(0,u.zG)(e,r(t))},alt:function(e,t){return(0,u.zG)(e,i(t))},fold:function(e,t,n){return(0,u.zG)(e,a(t,n))},getOrElse:function(e,t){return(0,u.zG)(e,o(t))},fromM:w(e),none:function(){return s()}}}var k,_,T=n(39953),M=Object.defineProperty,G=Object.getOwnPropertySymbols,L=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable,N=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(_=k||(k={})).URI="IOOption",_.ioOption=((e,t)=>{for(var n in t||(t={}))L.call(t,n)&&N(e,n,t[n]);if(G)for(var n of G(t))D.call(t,n)&&N(e,n,t[n]);return e})({URI:_.URI},E(d.io)),({map:_.map,chain:_.chain,ap:_.ap,alt:_.alt,apFirst:_.apFirst,apSecond:_.apSecond}=(0,T.iz)(_.ioOption)),_.of=_.ioOption.of,_.fold=(e,t)=>n=>_.ioOption.fold(n,e,t),_.fromM=_.ioOption.fromM;var z,P=n(88347),F=n(6655),O=n(73799),R=n(17690),$=n(5412),B=n(47311),U=n(23841),j=n(50887),W=n(41816);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,u.zG)(e.get(t),v.hX((e=>n(e.value))))},e.find=function(e,t){return e.find(t)}}(z||(z={}));var H=n(70394),Y=n(31842);const V=(e,t)=>(0,u.ls)(B.filter((e=>e.type===H.lY.Type.toSignIn)),B.map((()=>n=>(e.actions.openUrl(new y.Z(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n)))),Q=(e,t)=>(0,u.ls)(B.filter(H.lY.isOpenIdeasGallery),B.tap((()=>e.actions.openPopup(new y.Z(t.ideas.galleryURL)))),B.switchMapTo(B.EMPTY)),q=(e,t,n)=>r=>B.mergeStatic((0,u.zG)(r,B.filter(H.lY.isGbPromptShow),B.tap((e=>J(e,n))),B.switchMapTo(B.EMPTY)),(0,u.zG)(r,B.filter(H.lY.isGbPromptApply),B.tap((r=>X(e,t,r,n))),B.switchMapTo(B.EMPTY)),(0,u.zG)(r,B.filter(H.lY.isGbPromptCreateRule),B.tap((e=>Z(e,n))),B.switchMapTo(B.EMPTY)),(0,u.zG)(r,B.filter(H.lY.isGbPromptDismiss),B.tap((e=>K(e,n))),B.switchMapTo(B.EMPTY))),J=({patternName:e},t)=>t.onShow(e),X=(e,t,n,r)=>R.BY.isVox(n.gbPrompt)?ee(e,t,n,r):re(e,t,n,r),Z=(e,t)=>R.BY.isVox(e.gbPrompt)?oe(e,t):ce(),K=(e,t)=>R.BY.isVox(e.gbPrompt)?de(e,t):ue(e,t),ee=(e,t,n,r)=>"redirect"===n.gbPrompt.promptType?te(e,t,n,r):ne(),te=(e,t,{gbPrompt:{styleGuideId:n},source:r,target:i,patternName:a},o)=>{e.actions.openPopup(new y.Z(t.account.styleGuide).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",action:"createRule",source:r,target:i,styleGuideId:n})),o.onAccept(a)},ne=()=>{},re=(e,t,n,r)=>"redirect"===n.gbPrompt.promptType?ie(e,t,n,r):ae(n,r),ie=(e,t,{gbPrompt:n,patternName:r},i)=>{e.actions.openPopup(new y.Z(t.account.writingStyle).addParams({utm_medium:"internal",utm_source:"acHook",utm_campaign:"consistencySGprompt",categoryTitle:n.categoryTitle})),i.onAccept(r)},ae=({patternName:e},t)=>t.onAccept(e),oe=(e,t)=>"redirect"===e.gbPrompt.promptType?se():le(e,t),se=()=>{},le=({patternName:e},t)=>t.onAccept(e),ce=()=>{},de=({patternName:e,step:t},n)=>"initial"===t&&n.onDismiss(e),ue=({patternName:e,step:t},n)=>"initial"===t&&n.onDismiss(e);var pe,me,he=n(80388),ge=n(21961),fe=n(87517),ye=n(84825),ve=n(65810),xe=n(57576),Ie=n(525);!function(e){const t=(e,t,n,r)=>(0,u.zG)(r((t=>(t.lensId===e.id||$.R.isMainLens(e.id))&&!R.bZ.isPremium(t)),"middleOfTheViewport"),v.g_((()=>B.EMPTY),(r=>(0,u.zG)(n(e),v.hX((e=>e.activeAlert.id===r.alert.id)),v.g_((()=>B.of(r)),(e=>((e,n)=>(0,u.zG)(t,v.UI((t=>t.alignMarkToCard(e,Y.v.Animation.ANIMATE_ALL,v.YP).pipe(B.switchMapTo(B.EMPTY)))),v.fS((()=>B.of(n)))))((0,u.MZ)(e),r)))))));e.changeAlertEffect=(e,n,r,i,a,o,s,l)=>({id:"changeAlertEffect",when:$.R.isWithAlertsId,what:xe.nL.Effect.SwitchAlert.create(n.actionEvents.pipe(B.switchMap((n=>{const c=e.get();if(!xe.nL.hasCards(c))return B.throwError(new m.ej("Cannot update state without cards"));switch(n.type){case H.lY.Type.alertMinicardButtonClick:return(0,u.zG)(a.getRegistered(n.alertHighlight.alert.id),v.g_((()=>(l.error("somehow we got click on non registered alert",{alert:he.$.snapshot(n.alertHighlight.alert),alertInRepo:(0,u.zG)(a.getById(n.alertHighlight.alert.id),v.UI(he.$.fromModel),v.UI(he.$.snapshot)),state:xe.nL.snapshot(fe.Mq.snapshot,i)(c)}),B.EMPTY)),(()=>B.of(n.alertHighlight))));case H.lY.Type.cardMatchesNavigationButtonClick:const e=n.transitionTo;switch(e.kind){case"anotherAlert":return(0,u.zG)("right"===n.direction?r.nextAlert(e.card):(0,u.zG)(r.prevAlert(e.card),x.vx(r.anyRegisteredAlert(e.card))),v.g_((()=>B.EMPTY),(e=>B.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,u.zG)(a.getRegistered(e.card.activeAlert.id),v.g_((()=>B.EMPTY),(()=>B.of({alert:e.card.activeAlert,highlightIndex:e.highlightIndex}))));default:return(0,m.vE)(e)}case H.lY.Type.switchToClosestByViewport:return t(c.currentLens,o,i,s);default:return B.EMPTY}})),B.map((e=>({alertHighlight:e,alertSource:R.l$.sidebar,options:{order:"lensOrder"}})))))});e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r,i){const a=e.pipe(B.map(xe.nL.getActiveAlert(t)),B.distinctUntilChanged(v.Eh(c.f7(((e,t)=>he.$.eq.equals(e,t)&&e.patternName===t.patternName))).equals),B.map((0,u.ls)(v.UI((0,P.ei)("id")),v.tS(r.getValidForFeedback))),U.cp((e=>B.Observable.create((()=>((0,u.zG)(r.getValidForFeedback(e.id),x.bw((()=>(0,u.zG)(n.applyFeedback(e.id,{kind:F.PZ.LOOKED,subtype:F.e3.Sidebar},R.l$.sidebar),l.g_((e=>i.error("Failed to send LOOKED feedback",e)),u.Q1))))),()=>(0,u.zG)(r.getValidForFeedback(e.id),x.bw((()=>(0,u.zG)(n.applyFeedback(e.id,{kind:F.PZ.CLOSED,subtype:F.e3.Sidebar},R.l$.sidebar),l.g_((e=>i.error("Failed to send CLOSED feedback: ",e)),u.Q1)))))))))));return{id:"sendActiveAlertFeedbacksEffect",when:u.W8,what:xe.nL.Effect.Applicator.create(a.pipe(B.switchMapTo(B.NEVER)))}}}(pe||(pe={}));class be{_applyStartVSChange(e,t){return t.reduce(((e,[t,n])=>(0,u.zG)(z.update(e,t,(e=>this._checksFeedCapabilities.transitionTo(n)(e))),l.g_((()=>e),u.yR))),e)}_applyCompleteVSChange(e,t){return t.reduce(((e,[t,n])=>(0,u.zG)(e.items.get(t),v.UI((({value:e})=>e)),v.g_((()=>e),(r=>ye.o.isAnimatable(r)&&"removed"===r.visualState.transition.type?this._checksFeedCapabilities.removeItemById(t)(e):(0,u.zG)(z.update(e.items,t,(e=>ye.o.isAnimatable(e)&&e.visualState.transitionId===n?this._checksFeedCapabilities.completeTransition(n)(e):e)),l.g_((()=>e),(t=>Ie.v.Prism.items.set(t,e)))))))),e)}_handleSnippetsOpenExternalLink(){return this.actionEvents.pipe(B.filter(H.lY.isSnippetsOpenExternalLink)).subscribe((({externalLink:e})=>this._platformEnvironment.actions.openPopup(new y.Z(e))))}_updateToneAICard(e){return t=>(0,u.zG)(e,l.Zl((({newAlert:e,itemId:n})=>z.update(t.currentLens.items,n,this._checksFeedCapabilities.updateWithAlerts([e])))),l.g_((e=>(this._log.error("Error updating card with ToneAI alert.",e),t)),(e=>xe.nL.Prism.getLens().compose(Ie.v.Prism.items).set(e,t))))}_handleAlertFeedbacks(){return this.actionEvents.pipe(B.filter(H.lY.isAlertFeedbackAction)).subscribe((({alertId:e,feedbackType:t})=>this._sendFeedback(e,{kind:t})))}_applyTakeawayFeedbacks(){return this.actionEvents.pipe(B.filter(H.lY.isTakeawayDetectionFeedbackAction)).subscribe((({alertId:e,type:t})=>this._alertsService.changeTakeawayFeedback(e,t===H.lY.Type.takeawayCorrectlyDetected?R.TO.correctlyDetected:t===H.lY.Type.takeawayIncorrectlyDetected?R.TO.incorrectlyDetected:(0,m.vE)(t))))}_sendTakeawayFeedbacks(){return this.actionEvents.pipe(B.filter(H.lY.isTakeawayAction)).subscribe((e=>{switch(e.type){case H.lY.Type.takeawayCorrectlyDetected:return e.isLikelyToBeRead?this._sendFeedback(e.alertId,{kind:F.PZ.ACKNOWLEDGED,text:e.takeawayText}):this._sendFeedback(e.alertId,{kind:F.PZ.ACCEPTED,replacementText:e.takeawayText});case H.lY.Type.takeawayIncorrectlyDetected:return this._sendFeedback(e.alertId,{kind:F.PZ.IGNORE});case H.lY.Type.takeawayDismiss:return this._sendFeedback(e.alertId,{kind:F.PZ.IGNORE,pnameQualifier:e.isLikelyToBeRead?F.N_.likelyToBeReadTakeaway:F.N_.unlikelyToBeReadTakeaway});case H.lY.Type.takeawayResolve:return this._sendFeedback(e.alertId,{kind:F.PZ.ACKNOWLEDGED,pnameQualifier:e.isLikelyToBeRead?F.N_.likelyToBeReadTakeaway:F.N_.unlikelyToBeReadTakeaway});default:(0,m.vE)(e)}}))}_handleEssayDetectionSetAcademicDomainAndCitationStyle(){return this.actionEvents.pipe(B.filter(H.Wh.isSetAcademicDomainAndCitationStyleAction)).subscribe((({citationStyle:e})=>{this._setDocumentCitationStyle(e)}))}_handleAlertResolve(){return this.actionEvents.pipe(B.filter(H.lY.isAlertResolveAction)).subscribe((({alertId:e})=>this._sendFeedback(e,{kind:F.PZ.ACKNOWLEDGED})))}_handleIgnoreFormSubmit(){return this.actionEvents.pipe(B.filter(H.lY.isAlertIgnoreFeedbackFormSubmit)).subscribe((({alertId:e,reason:t})=>{this._sendFeedback(e,{kind:F.PZ.IGNORE,reason:t})}))}_handleApplyFormSubmit(){return this.actionEvents.pipe(B.filter(H.lY.isAlertApplyFeedbackFormSubmit)).subscribe((e=>{this._applyAlert((0,o._)((0,a._)({},e.alertApplyActionProps),{reason:e.reason})),e.alertApplyActionProps.actionsToDispatchAfterSurvey&&e.alertApplyActionProps.actionsToDispatchAfterSurvey.forEach((e=>this.actionEvents.next(e)))}))}_handleGbPromptDismiss(){return this.actionEvents.pipe(B.filter(H.lY.isGbPromptDismiss)).subscribe((e=>this._applyAlert((0,o._)((0,a._)({},e.alertApplyActionProps),{gbPrompt:{feedback:F.Kd.DISMISSED,source:e.source,target:e.target,description:e.description}}))))}_handleGbPromptApply(){return this.actionEvents.pipe(B.filter(H.lY.isGbPromptApply)).subscribe((e=>this._applyAlert((0,o._)((0,a._)({},e.alertApplyActionProps),{gbPrompt:{feedback:F.Kd.ACCEPTED,source:e.source,target:e.target,description:e.description}}))))}_handleCommitMuteCategories(e){return this.actionEvents.pipe(B.filter(H.lY.isMutedAlertCardDismissedAction)).subscribe((t=>(0,u.zG)(e.muteCategories([t.categoryId]),l.g_((e=>this._log.error("error calling categories model to commit muted category",e)),u.Q1))))}_handleSuggestionsManagementClick(e){return this.actionEvents.pipe(B.filter(H.lY.isMutedAlertSuggestionsManagementClick)).subscribe(e)}_applyAlert(e){return(0,u.zG)(this._alertsService.apply(e.alertId,{alternativeIndex:e.alternativeIndex,source:R.l$.sidebar,feedbackSubtype:F.e3.Sidebar,drilldownSuggestionIds:e.drilldownSuggestionIds,reason:e.reason,gbPrompt:e.gbPrompt}),l.g_((e=>this._log.error("error calling alert service to apply an alert",e)),u.Q1))}_handleDrilldown(){return this.actionEvents.pipe(B.filter(H.GM.isDrilldown)).subscribe((e=>this._sendFeedback(e.alertId,{kind:F.P2.DRILLDOWN,drilldownSuggestionIds:e.drilldownSuggestionIds,alternativeIndex:e.alternativeId})))}_dismissAlertsBatch(){return this.actionEvents.pipe(B.filter(H.FG.isDismissAlertsBatchAction)).subscribe((e=>(0,u.zG)(this._alertsService.dismissBatch(e.alerts,F.e3.Sidebar),l.g_((e=>this._log.error("error calling alert service to dismiss alerts batch",e)),u.Q1))))}_newFeatureSeen(){return this.actionEvents.pipe(B.filter(H.lY.isOnboardingClose)).subscribe((e=>(0,u.zG)(this._markOnboardingAsSeen(e.value))))}getApplicatorEffects(){return(0,u.zG)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._toneAIChangeToneAlternative,"toneAIChangeToneAlternative"],[this._synfonyDrilldown,"synfonyDrilldown"],[this._synfonyBack,"synfonyBack"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this._collapseChecklistItem,"collapseChecklistItem"],[this._shortenItDismissEdit,"shortenItDismissEdit"],[this.actionEvents.pipe(B.filter(H.lY.isNavigation),B.tap((e=>this._navigationEvents.next(e))),B.switchMapTo(B.EMPTY)),"navigationEvents"],...(0,u.zG)(this._sendToUrl,v.fS((0,u.a9)([]))),[this._showSurveyFormEffect,"showIgnoreFormEffect"],[this._showMutedAlertSuccessEffect,"showMutedAlertSuccessEffect"],[this._undoMutedAlertEffect,"undoMutedAlertEffect"]],s.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:$.R.isWithAlertsId,what:xe.nL.Effect.Applicator.create(e)}))))}dispose(){this._subs.dispose()}constructor(e,t,n,r,s,c,d,h,y,I,b,S,C=new O.A,w={bufferTransitions:!0,showGbPrompt:!1},A=u.Q1){(0,i._)(this,"_ops",void 0),(0,i._)(this,"_navigationEvents",void 0),(0,i._)(this,"_cardFactory",void 0),(0,i._)(this,"_alertsService",void 0),(0,i._)(this,"_alertsReader",void 0),(0,i._)(this,"_markOnboardingAsSeen",void 0),(0,i._)(this,"_markMuteQuotedAdviceAsDismissed",void 0),(0,i._)(this,"_sendToUrlExperiment",void 0),(0,i._)(this,"_getActiveItemWithAlert",void 0),(0,i._)(this,"_checksFeedCapabilities",void 0),(0,i._)(this,"_platformEnvironment",void 0),(0,i._)(this,"_settings",void 0),(0,i._)(this,"_setDocumentCitationStyle",void 0),(0,i._)(this,"_log",void 0),(0,i._)(this,"_subs",void 0),(0,i._)(this,"_flushCompleteTransition",void 0),(0,i._)(this,"_flushPositionAnimation",void 0),(0,i._)(this,"actionEvents",void 0),(0,i._)(this,"completePositionAnimation",void 0),(0,i._)(this,"changePosition",void 0),(0,i._)(this,"_transitionBuffer",void 0),(0,i._)(this,"_positionAnimationBuffer",void 0),(0,i._)(this,"_startTransitionStateChanges",void 0),(0,i._)(this,"_completeTransitionStateChanges",void 0),(0,i._)(this,"_changePositionEffect",void 0),(0,i._)(this,"_transitionEndStateChanges",void 0),(0,i._)(this,"_switchToNextChanges",void 0),(0,i._)(this,"_dismissMuteQuotedAdvice",void 0),(0,i._)(this,"_changeUserInput",void 0),(0,i._)(this,"_shortenItDismissEdit",void 0),(0,i._)(this,"_focusChecksFeedItem",void 0),(0,i._)(this,"_collapseChecklistItem",void 0),(0,i._)(this,"_toneAIChangeToneAlternative",void 0),(0,i._)(this,"_synfonyDrilldown",void 0),(0,i._)(this,"_synfonyBack",void 0),(0,i._)(this,"_sendToUrl",void 0),(0,i._)(this,"_sendFeedback",void 0),(0,i._)(this,"_showSurveyForm",void 0),(0,i._)(this,"_showSurveyFormEffect",void 0),(0,i._)(this,"_showMutedAlertSuccessEffect",void 0),(0,i._)(this,"_undoMutedAlertEffect",void 0),(0,i._)(this,"_handleAlertIgnore",void 0),(0,i._)(this,"_handleApplyAlerts",void 0),(0,i._)(this,"hovered",void 0),(0,i._)(this,"flushTransitionTo",void 0),(0,i._)(this,"flushPositionAnimation",void 0),this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._alertsReader=s,this._markOnboardingAsSeen=c,this._markMuteQuotedAdviceAsDismissed=d,this._sendToUrlExperiment=y,this._getActiveItemWithAlert=b,this._checksFeedCapabilities=S,this._platformEnvironment=C,this._settings=w,this._setDocumentCitationStyle=A,this._log=f.C8.Logging.getLogger("CardsViewModelImpl",f.zW.i.DEBUG),this._subs=new j.w.Keeper,this._flushCompleteTransition=new B.Subject,this._flushPositionAnimation=new B.Subject,this.actionEvents=new B.Subject,this.completePositionAnimation=new B.Subject,this.changePosition=new B.Subject,this._transitionBuffer=B.interval(100).pipe(B.startWith(0),B.merge(this._flushCompleteTransition)),this._positionAnimationBuffer=B.interval(100).pipe(B.startWith(0),B.merge(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(B.filter(H.eI.isStartTransitionTo),B.map((e=>t=>me.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,e.transition]]),t)))),this._completeTransitionStateChanges=this.actionEvents.pipe(B.filter(H.eI.isCompleteTransitionTo),this._settings.bufferTransitions?B.buffer(this._transitionBuffer):B.map((e=>[e])),B.filter(g.Dw),B.map((e=>t=>{const n=t.currentLens,r=this._applyCompleteVSChange(n,e.map((e=>[e.id,e.transitionId])));return this._log.isEnabled(f.zW.i.TRACE)&&this._log.trace("batch transition complete",{events:e,diff:W.aW.diff(n.items,r.items)}),xe.nL.Prism.getLens().set(r,t)}))),this._changePositionEffect=this.changePosition.pipe(B.map((({id:e,height:t})=>n=>{const r=(0,u.zG)(z.update(n.currentLens.items,e,(e=>this._checksFeedCapabilities.changePosition(ve.s.PositionState.changeHeight(e.positionState,t))(e))),l.g_((()=>n.currentLens.items),u.yR));return me.itemsLens.set(r,n)}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(B.buffer(this._positionAnimationBuffer),B.filter(g.Dw),B.map((e=>t=>{const n=t.currentLens.items,r=e.map((e=>[e,!1])).reduce(((e,[t,n])=>(0,u.zG)(z.update(e,t,(e=>this._checksFeedCapabilities.changePosition(ve.s.PositionState.changeAnimationInProgress(e.positionState,n))(e))),l.g_((()=>e),u.yR))),n);return me.itemsLens.set(r,t)}))),this._switchToNextChanges=this.actionEvents.pipe(B.filter((e=>e.type===H.lY.Type.switchToNext)),B.map((()=>e=>e.patch({currentLens:(0,u.zG)(xe.nL.hasItems(e)?this._checksFeedCapabilities.findNextAlert(e.currentLens):v.YP,v.g_((()=>(0,u.zG)(xe.nL.getActiveAlert(this._getActiveItemWithAlert)(e),v.g_((()=>{throw new m.ej("Can not switch from non-existing card")}),(t=>this._checksFeedCapabilities.release(t)(e.currentLens))))),(t=>xe.nL.hasItems(e)?this._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:R.l$.sidebar})))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(B.filter(H.lY.isDismissMuteQuotedAdvice),B.tap(this._markMuteQuotedAdviceAsDismissed),B.map((()=>e=>{const t=e.currentLens.items.filter((0,u.ls)(this._checksFeedCapabilities.hasActiveAlert,v.UI((e=>e.alert)),v.Gg(he.$.isInQuotes))).keys().map((e=>[e,!1])).reduce(((e,[t])=>(0,u.zG)(z.update(e,t,this._cardFactory.hideMuteQuotedAdvice),l.g_((()=>e),u.yR))),e.currentLens.items);return me.itemsLens.set(t,e)}))),this._changeUserInput=this.actionEvents.pipe(B.filter(H.lY.isChangeUserInput),B.tap((({alertId:e,userInput:t})=>{this._alertsService.changeGapValue(e,t)})),B.map((({cardId:e,userInput:t})=>n=>{const r=(0,u.zG)(n.currentLens.items.update(e,this._checksFeedCapabilities.updateUserInput(Boolean(t)?v.G(t):v.YP)),l.g_((()=>n.currentLens.items),u.yR));return me.itemsLens.set(r,n)}))),this._shortenItDismissEdit=this.actionEvents.pipe(B.filter(H.ut.isDismissEdit),B.map((({alertId:e,group:t,itemId:n})=>r=>(0,u.zG)(this._alertsService.dismissShortenItTransformGroup(e,t),l.UI((e=>({newAlert:e,itemId:n}))),l.Zl((({newAlert:e,itemId:t})=>z.update(r.currentLens.items,t,this._checksFeedCapabilities.updateWithAlerts([e])))),l.g_((e=>(this._log.error("Error updating card/alert with dismissed transform groups.",e),r)),(e=>me.itemsLens.set(e,r))))))),this._focusChecksFeedItem=this.actionEvents.pipe(B.filter(H.lY.isMiniItemClick),B.map((e=>t=>t.patch({currentLens:(0,u.zG)(t.currentLens.items.find((t=>t.id===e.id)),v.g_((()=>(this._log.error("Can not switch from non-existing item"),t.currentLens)),(()=>(0,u.MZ)((0,u.zG)(t.currentLens,this._checksFeedCapabilities.selectItemById(e.id)))))),switchOrder:"lensOrder",alertSource:R.l$.sidebar})))),this._collapseChecklistItem=this.actionEvents.pipe(B.filter(H.lY.isChecklistItemCollapseButtonClick),B.map((()=>e=>e.patch({currentLens:xe.nL.hasItems(e)?this._checksFeedCapabilities.unselectItem()(e.currentLens):e.currentLens,switchOrder:"lensOrder",alertSource:R.l$.sidebar})))),this._toneAIChangeToneAlternative=this.actionEvents.pipe(B.filter(H.lY.isToneAIChangeToneAlternativeAction),B.map((({itemId:e,alertId:t,selectedToneAlternativeIdx:n})=>(0,u.zG)(this._alertsService.changeToneAIToneAlternative(t,n),l.UI((t=>({newAlert:t,itemId:e})))))),B.map((e=>this._updateToneAICard(e)))),this._synfonyDrilldown=this.actionEvents.pipe(B.filter(H.GM.isDrilldown),B.map((({cardId:e,wordIndex:t})=>n=>(0,u.zG)(z.update(n.currentLens.items,e,(e=>{const n=e;return ge.X.changeSynfonySelection((0,u.zG)(n.synfonySelection,v.fS((()=>[])),(e=>v.G(e.concat([t])))))(n)})),l.g_((()=>n),(e=>xe.nL.Prism.getLens().compose(Ie.v.Prism.items).set(e,n))))))),this._synfonyBack=this.actionEvents.pipe(B.filter(H.GM.isBack),B.map((({cardId:e})=>t=>(0,u.zG)(z.update(t.currentLens.items,e,(e=>{const t=e;return ge.X.changeSynfonySelection((0,u.zG)(t.synfonySelection,v.UI((e=>e.slice(0,-1)))))(t)})),l.g_((()=>t),(e=>xe.nL.Prism.getLens().compose(Ie.v.Prism.items).set(e,t))))))),this._sendToUrl=(0,u.zG)(this._sendToUrlExperiment,v.UI((e=>Object.entries(e).filter((([e])=>"handleGbPrompt"!==e||this._settings.showGbPrompt)).map((([e,t])=>[t(this.actionEvents),e]))))),this._sendFeedback=(e,t)=>(0,u.zG)(e,v.DT(this._alertsReader.isValidForFeedback),x.bw((()=>(0,u.zG)(this._alertsService.applyFeedback(e,(0,o._)((0,a._)({},t),{subtype:F.e3.Sidebar}),R.l$.sidebar),l.g_((e=>this._log.error("error calling alert service to send a feedback",e)),u.Q1))))),this._showSurveyForm=new p.x,this._showSurveyFormEffect=(0,u.zG)(this._showSurveyForm,B.map((e=>t=>me.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,"survey"===e.formType?(0,a._)({type:"feedback_form",formType:"survey",clockwise:!0,survey:e.survey},e.submitActionType===H.lY.Type.alertApplyFormSubmit?{submitActionType:H.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e.alertApplyActionProps}:{submitActionType:H.lY.Type.alertIgnoreFormSubmit}):{type:"feedback_form",formType:"gbPrompt",clockwise:!0,gbPrompt:e.gbPrompt,alertApplyActionProps:e.alertApplyActionProps}]]),t)))),this._showMutedAlertSuccessEffect=this.actionEvents.pipe(B.filter(H.lY.isMuteCategoryAction),B.map((e=>t=>me.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"muted",clockwise:!0}]]),t)))),this._undoMutedAlertEffect=this.actionEvents.pipe(B.filter(H.lY.isUndoMuteCategoryAction),B.map((e=>t=>me.itemsLens.set(this._applyStartVSChange(t.currentLens.items,[[e.id,{type:"focused",clockwise:!0}]]),t)))),this._handleAlertIgnore=(0,u.ls)(Se((({alertId:e,drilldownSuggestionIds:t})=>()=>this._sendFeedback(e,{kind:F.PZ.IGNORE,drilldownSuggestionIds:t})),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(B.filter(H.lY.isAlertIgnoreAction)).subscribe((t=>e(t)())))),this._handleApplyAlerts=(0,u.ls)(Se((e=>()=>this._applyAlert(e)),(e=>()=>this._showSurveyForm.next(e)),this._settings.showGbPrompt),(e=>this.actionEvents.pipe(B.filter(H.lY.isAlertApplyAction)).subscribe((t=>e(t)())))),this.hovered=this.actionEvents.pipe(B.filter(H.lY.isHoverAction),B.tap((()=>this._ops.flush())),B.scan(((e,t)=>"hover"===t.kind?v.G(t.id):(0,u.zG)(e,v.hX((e=>e!==t.id)))),v.YP),B.share()),this.flushTransitionTo=()=>this._flushCompleteTransition.next(),this.flushPositionAnimation=()=>this._flushPositionAnimation.next(),this._subs.push(this._handleAlertFeedbacks(),this._applyTakeawayFeedbacks(),this._sendTakeawayFeedbacks(),this._handleIgnoreFormSubmit(),this._handleApplyFormSubmit(),this._handleGbPromptDismiss(),this._handleGbPromptApply(),this._handleAlertIgnore(I),this._handleAlertResolve(),this._handleApplyAlerts(I),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleDrilldown(),this._handleSnippetsOpenExternalLink(),this._handleEssayDetectionSetAcademicDomainAndCitationStyle()),(0,u.zG)(h,x.bw((({model:e,openSuggestionsManagement:t})=>this._subs.push(this._handleCommitMuteCategories(e),this._handleSuggestionsManagementClick(t)))))}}!function(e){e.itemsLens=xe.nL.Prism.getLens().compose(Ie.v.Prism.items);e.Mock=class{constructor(){(0,i._)(this,"animate",h.h.create(!0)),(0,i._)(this,"clockwise",h.h.create(!0)),(0,i._)(this,"toggleAnimations",(()=>this.animate.modify((e=>!e)))),(0,i._)(this,"completePositionAnimation",new B.Subject),(0,i._)(this,"actionEvents",new B.Subject),(0,i._)(this,"flushTransitionTo",u.Q1),(0,i._)(this,"sideEffect",{id:"cardsViewModelMock",when:$.R.isWithAlertsId,what:xe.nL.Effect.Applicator.create(B.EMPTY)}),(0,i._)(this,"changePosition",new B.Subject),(0,i._)(this,"dispose",u.Q1)}};e.Experiments=r}(me||(me={}));const Se=(e,t,n)=>r=>i=>(0,u.zG)(Ce(i,n),d.of,k.chain((e=>(0,u.zG)(r,d.UI((t=>t?v.YP:v.G(e)))))),k.fold((()=>e(i)),(e=>t(e)))),Ce=(e,t)=>H.lY.isAlertApplyAction(e)?we(e,t):Ae(e),we=(e,t)=>(0,u.zG)(e.eligibleForGbPrompt,v.hX((0,u.a9)(t)),v.UI((t=>({id:e.id,formType:"gbPrompt",alertApplyActionProps:e,gbPrompt:t}))),x.vx((0,u.zG)(e.eligibleForSurvey,v.UI((t=>({id:e.id,formType:"survey",submitActionType:H.lY.Type.alertApplyFormSubmit,alertApplyActionProps:e,survey:t})))))),Ae=e=>(0,u.zG)(e.eligibleForSurvey,v.UI((t=>({id:e.id,formType:"survey",submitActionType:H.lY.Type.alertIgnoreFormSubmit,survey:t}))))},67145:(e,t,n)=>{n.d(t,{$y:()=>j});var r,i=n(84910),a=n(78520),o=n(59833),s=n(12518),l=n(53186),c=n(58303),d=n(90023),u=n(33632),p=n(87295),m=n(17690),h=n(64297),g=n(32490),f=n(17572),y=n(6655),v=n(2190);function x(e,{text:t,ops:n}){n.reduce(((t,n,r)=>p.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):p.JU.isInsertGap(n)?(e.insertGap("",n,r),t):p.JU.isInsert(n)?t:p.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):p.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,h.vE)(n)),t)}function I(e){return 0===e.replace(/ /g,"").length}function b(e,t){(0,d.zG)(e,o.Z$,c.g_((()=>{I(t.text)||e.push(t)}),(n=>{n.type===t.type?n.text+=t.text:e.push(t)})))}function S(e){return!0===e.italic?!0===e.bold?"boldItalic":"italic":!0===e.bold?"bold":void 0}function C(e){const{substitutions:t,longestSubstitution:n,inserts:i}=e.reduce(((e,[t,n])=>{const r=t.map((e=>e.text)).join("");return e.substitutions.push(r),e.inserts.push(n),r.length>e.longestSubstitution.length&&(e.longestSubstitution=r),e}),{substitutions:[],inserts:[],longestSubstitution:""}),a=(0,d.zG)(t,l.UI((e=>n.split(e).join(""))));return(0,d.zG)(o.yL(i,a,((e,t)=>(t&&e.push({type:v.GP.Text,text:t,shouldBeCollapsed:!1}),e))),l.nI,s.Yo((()=>new Error("Substitution processing error"))),s.UI((e=>({type:r.Type.Substitution,remove:[{type:v.GP.Delete,text:n,shouldBeCollapsed:!1}],inserts:e}))))}function w(e){return(0,d.zG)(f.vM((()=>(0,d.zG)(e,l.UI((t=>{const n=[[],[]];return x({insertString(e){b(n[1],{type:v.GP.Insert,text:"\n"===e?"¶ ":e,shouldBeCollapsed:!1})},insertGap(){throw new M("Substitution transform contains gap insert",e)},remove(e){b(n[0],{type:v.GP.Delete,text:e,shouldBeCollapsed:!1})},retain(e,{type:t,attributes:r}){if(!p.JU.isOptionalType(t)||0!==n[0].length){const t={type:v.GP.Text,text:e,style:S(r),shouldBeCollapsed:!1};n[0].push(t),n[1].push(t)}}},t),(0,h.kG)(n[0].length>0,"Substituted part is empty"),(0,h.kG)(n[1].length>0,"Inserts are empty"),n}))))),s.tS(C),s.Vn(M.fromError(e)))}function A(e){if(!("list"in e))return c.YP;switch(e.list){case"bullet":case"dashed":case"ordered":return c.G({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return c.YP}}!function(e){let t;!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.Drilldown=4]="Drilldown",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.ShortenIt=7]="ShortenIt",e[e.ToneAI=8]="ToneAI",e[e.Citation=9]="Citation",e[e.WritingExpert=10]="WritingExpert"}(t=e.Type||(e.Type={})),(t=e.Type||(e.Type={})).parse=function(e,n){const r=e[0];if(r.isFullSentence)return t.FullSentence;if(c.pC(n.drilldown))return t.Drilldown;if(r.isCitation)return t.Citation;if(r.isShortenIt)return t.ShortenIt;if(r.isToneAI)return t.ToneAI;if(r.isWritingExpert)return t.WritingExpert;switch(r.type){case p.r3.Type.Insert:return t.Insert;case p.r3.Type.Remove:return e.length>1?t.RemoveOr:t.Remove;case p.r3.Type.Substitution:return r.ops.find(p.JU.isInsertGap)?t.OneGap:t.Substitution;default:return(0,h.vE)(r.type)}},e.create=function(e){return t=>{const n=r.Type.parse(t,e);switch(n){case r.Type.Remove:return function(e,t){return(0,d.zG)(f.vM((()=>(0,d.zG)(e,l.UI((n=>{const r=[];return x({insertString(t,{type:n}){if(n===p.JU.Type.Main)throw new M("Remove transform contains main insert",e)},insertGap(){throw new M("Remove transform contains gap insert",e)},retain(e,{type:t,attributes:n}){p.JU.isOptionalType(t)||b(r,{type:v.GP.Text,text:e,style:S(n),shouldBeCollapsed:!1})},remove(e,{type:n}){b(r,{type:n!==p.JU.Type.Main||I(e)&&t?v.GP.Text:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},n),r})),o.xH))),s.tS((0,d.ls)(s.DT((e=>e.length>0),(()=>new M("Remove transform contains no data",e))),s.UI((e=>({type:r.Type.Remove,remove:e}))))))}(t,e.ignoreWhitespaceRemoves);case r.Type.RemoveOr:return function(e,t){return(0,d.zG)(f.vM((()=>(0,d.zG)(e,l.UI((n=>{const r=[];return x({insertString(t,{type:n}){if(n===p.JU.Type.Main)throw new M("Multi-remove transform contains main insert",e)},insertGap(){throw new M("Multi-remove transform contains gap insert",e)},retain(e,{type:t,attributes:n}){p.JU.isOptionalType(t)||b(r,{type:v.GP.Text,text:e,style:S(n),shouldBeCollapsed:!1})},remove(e,{type:n}){b(r,{type:n!==p.JU.Type.Main||I(e)&&t?v.GP.Text:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},n),r}))))),s.tS((0,d.ls)(s.DT((e=>e.length>=2&&e.every((e=>e.length>=2))),(()=>new M("Incomplete multi-remove",e))),s.UI((e=>({type:r.Type.RemoveOr,removes:e}))))))}(t,e.ignoreWhitespaceRemoves);case r.Type.Insert:return function(e){return(0,d.zG)(f.vM((()=>(0,d.zG)(e,l.UI((t=>{const n=[];return x({insertString(e,{type:t}){b(n,{type:p.JU.isOptionalType(t)?v.GP.Text:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new M("Insert transform contains gap insert",e)},retain(e,{type:t,attributes:r}){(!p.JU.isOptionalType(t)||n.length>0)&&b(n,{type:v.GP.Text,text:e,style:S(r),shouldBeCollapsed:!1})},remove(t,{type:n}){if(n===p.JU.Type.Main)throw new M("Insert transform contains main delete",e)}},t),n}))))),s.tS((0,d.ls)(l.nI,s.Yo((()=>new M("Incomplete insert",e))),s.UI((e=>({type:r.Type.Insert,inserts:e}))))))}(t);case r.Type.Substitution:return w(t);case r.Type.Drilldown:return function(e,t){return(0,d.zG)(w(e),s.tS((n=>(0,d.zG)(f.vM((()=>{(0,h.kG)(t.length>0,"Drilldown transform - empty drilldown tree");return{inserts:(0,d.zG)(t,l.UI(e)),remove:n.remove,type:r.Type.Drilldown};function e([t,r]){return(0,h.kG)(void 0!==n.inserts[t],"Drilldown transform - alternative insert not found"),{alternativeId:t,label:n.inserts[t],subLabels:r.map(e)}}})),s.Vn(M.fromError(e))))))}(t,(0,d.zG)(e.drilldown,c.fS((()=>y.H5.empty))));case r.Type.FullSentence:return function(e){return(0,d.zG)(e,s.DT((e=>1===e.length),(()=>new M("Expected full-sentence transform to have 1 alternative",e))),s.UI((0,d.ls)(l.YM,(t=>{let n={blockStart:0,ops:[],kind:v._k.PlainText};return x({insertString(e,t){const r=e.split("\n");if(1===r.length)n.ops.push({type:v.GP.Insert,text:e,shouldBeCollapsed:!1});else{const e=(0,d.zG)(t.attributes,A,c.g_((()=>d.Q1),(({kind:e,indent:t})=>()=>{n.ops.splice(n.blockStart,1,{type:v.GP.List,kind:e,indent:t}),n={kind:v._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}})));for(let t=0,i=r.length-1;t<=i;t++){const a=r[t];a&&n.ops.push({type:v.GP.Insert,text:a,shouldBeCollapsed:!1}),t<i&&(e(),n.blockStart=n.ops.length,n.ops.push({type:v.GP.Insert,text:"\n",shouldBeCollapsed:!1}))}}},insertGap(){throw new M("Full sentence transform contains gap insert",e)},retain(e,t){n.ops.push({type:v.GP.Text,text:e,shouldBeCollapsed:E(t.type,e)})},remove(e,t){n.ops.push({type:v.GP.Delete,text:e,shouldBeCollapsed:E(t.type,e)})}},t),n}))),s.tS((0,d.ls)(c.DT((e=>e.ops.length>0)),s.Yo((()=>new M("Got empty full sentence transform",e))),s.UI((({ops:e,kind:t})=>({type:r.Type.FullSentence,ops:e,kind:t}))))))}(t);case r.Type.OneGap:return function(e){return(0,d.zG)(f.vM((()=>((0,h.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,d.zG)(e,l.YM,(e=>{const t=[],n=[];let r=!1;return x({insertString(e,{type:i}){b(r?n:t,{type:p.JU.isOptionalType(i)?v.GP.Text:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){(0,h.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain(e,{type:i}){const a=r?n:t;(!p.JU.isOptionalType(i)||a.length>0)&&b(a,{type:v.GP.Text,text:e,shouldBeCollapsed:!1})},remove:d.Q1},e),(0,h.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,h.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))))),s.Pd(M.fromError(e),(({left:e,right:t})=>({type:r.Type.OneGap,left:e,right:t}))))}(t);case r.Type.ShortenIt:return function(e){return(0,d.zG)(e,s.DT((e=>1===e.length),(()=>new M("Expected shorten-it transform to have 1 alternative",e))),s.tS(l.fw(s.wE)(k)),s.UI(l.YM),s.UI((e=>({type:r.Type.ShortenIt,ops:e}))))}(t);case r.Type.ToneAI:return function(e){return(0,d.zG)(f.vM((()=>(0,d.zG)(e,l.UI((t=>{const n=[];return x({insertString(e){b(n,{type:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new M("ToneAI transform should not include gap insert",e)},retain(e){b(n,{type:v.GP.Text,text:e,shouldBeCollapsed:!1})},remove(e){b(n,{type:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},t),n}))))),s.tS((0,d.ls)(l.nI,s.Yo((()=>new M("Incomplete ToneAI transform",e))),s.UI((e=>({type:r.Type.ToneAI,transformParts:e}))))))}(t);case r.Type.Citation:return function(e){return(0,d.zG)(e,s.DT((e=>1===e.length),(()=>new M("Expected citation transform to have 1 alternative",e))),s.UI(l.YM),s.tS(s.DT((e=>e.isCitation),(()=>new M("Expected citation to have isCitation set to true",e)))),s.tS(_),s.UI((e=>({ops:e,type:r.Type.Citation}))))}(t);case r.Type.WritingExpert:return function(e){return(0,d.zG)(e,s.DT((e=>1===e.length),(()=>new M("Expected citation transform to have 1 alternative",e))),s.UI(l.YM),s.tS(s.DT((e=>e.isWritingExpert),(()=>new M("Expected citation to have isWritingExpert set to true",e)))),s.tS(T),s.UI((e=>({ops:e,type:r.Type.WritingExpert}))))}(t);default:return(0,h.vE)(n)}}}}(r||(r={}));const E=(e,t)=>e===p.JU.Type.Optional&&t.length>3;function k(e){const t=[];return x({insertString(e,{group:n}){t.push({type:v.GP.Insert,text:e,group:n,shouldBeCollapsed:!1})},insertGap(){throw new M("ShortenIt transform contains gap insert",[e])},retain(e,{group:n}){t.push({type:v.GP.Text,text:e,group:n,shouldBeCollapsed:!1})},remove(e,{group:n}){t.push({type:v.GP.Delete,text:e,shouldBeCollapsed:!0,group:n})}},e),(0,d.zG)(t,s.DT((e=>e.length>0),(()=>new M("Got empty ShortenIt transform",[e]))))}function _(e){const t=[];return x({insertString(e){t.push({type:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap(){throw new M("Citation transform contains gap insert",[e])},retain(e,{attributes:n}){t.push({type:v.GP.Text,text:e,style:S(n),shouldBeCollapsed:!1})},remove(e){t.push({type:v.GP.Delete,text:e,shouldBeCollapsed:!1})}},e),(0,d.zG)(t,s.DT((e=>e.length>0),(()=>new M("Got empty Citation transform",[e]))))}function T(e){const t=[];return x({insertString:e=>{t.push({type:v.GP.Insert,text:e,shouldBeCollapsed:!1})},insertGap:()=>{throw new M("Citation transform contains gap insert",[e])},retain:(e,{attributes:n})=>{t.push({type:v.GP.Text,text:e,style:S(n),shouldBeCollapsed:!1})},remove:d.Q1},e),(0,d.zG)(t,s.DT((e=>e.length>0),(()=>new M("Got empty Citation transform",[e]))))}class M extends h.sH{static fromError(e){return t=>{const n=new M(t.message,e);return n.stack=t.stack,n}}toString(){return`Hydration error: ${this.message}\n  ops: ${this.alternatives.map((e=>e.ops.map(p.JU.anonymize)))}`}constructor(e,t){super(e),(0,g._)(this,"alternatives",void 0),this.alternatives=t}}var G=n(31491),L=n(72111);const D=(e,t)=>{switch(e.kind){case"replacement":return function(e,t){(0,h.kG)((0,G.Dw)(e),"transforms should have at least one element");const[n]=e;return N(n)>-1?v.nV.create(z(n),e.map(P),t,!0):v.zE.create(e,t)}(e.content.map((e=>[{type:v.GP.Insert,text:e,shouldBeCollapsed:!1}])),t);case"transform":return function(e,t){(0,h.kG)((0,G.Dw)(e),"transforms should have at least one element");const[n]=e;return N(n)>-1?v.nV.create(z(n),e.map(P),t):function(e){return 2===e.length&&O(e)}(e)?v.fi.create(e[0],e[1],t):O(e)?v.zE.create(e,t):v.n6.create(e,t)}(e.content.map(B),t);default:return(0,h.vE)(e.kind)}};function N(e){return e.findIndex((e=>"arrow"===e.type))}function z(e){return e.slice(0,N(e))}function P(e){return e.slice(N(e)+1)}function F(e){return e.every((e=>"delete"!==e.type))}function O(e){return e.every(F)}function R(e,t){return{re:new RegExp(`^(${e})([\\s\\S]*)$`),createResult:t}}const $=[R("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:v.GP.Delete,text:e[2],shouldBeCollapsed:!1}))),R("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(e=>({type:v.GP.Insert,text:e[2],shouldBeCollapsed:!1}))),R("(→)",(e=>({type:v.GP.Arrow}))),R("([^<>→]+)",(e=>({type:v.GP.Text,text:e[1],shouldBeCollapsed:!1})))];function B(e){function t(e){for(const t of $){const n=e.match(t.re);if(null!==n)return[t.createResult(n),n[n.length-1]]}}function n(t){let n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>","→"].map((e=>t.indexOf(e)));if(n.findIndex((e=>0===e))>0)throw new Error(`Couldn't parse transform: ${e}`);if(n=n.filter((e=>e>0)),(0,G.Dw)(n)){const e=Math.min(...n);return[{type:v.GP.Text,text:t.substring(0,e),shouldBeCollapsed:!1},t.substring(e)]}return[{type:v.GP.Text,text:t,shouldBeCollapsed:!1},""]}const r=[];let i,a=e,o=!1,s=0;for(;(0,G.Dw)(a);){const e=t(a);void 0===e&&(o=!0);const[l,c]=e||n(a);i&&i.type===v.GP.Text&&l.type===v.GP.Text?i.text+=l.text:(i&&i.type===v.GP.Delete&&l.type===v.GP.Insert&&(r.push({type:v.GP.Arrow}),s++),r.push(l)),l.type===v.GP.Arrow&&s++,i=r[r.length-1],a=c}return(o||!(0,G.Dw)(r)||s>1)&&L.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:s}),r}const U={ignoreWhitespaceRemoves:!0},j=(0,d.ls)((function(e,t=U){return n=>(0,d.zG)(n.alternatives,W(e,{isFullSentence:m.eT.isFullSentence(n.cardType),isShortenIt:m.eT.isShortenIt(n.cardType),isToneAI:m.eT.isToneAI(n.cardType),isCitation:m.eT.isCitation(n.cardType),isWritingExpert:m.eT.isWritingExpert(n.cardType)}),s.tS(r.create((0,a._)((0,i._)({},t),{drilldown:n.drilldown}))))}),(e=>t=>(0,d.zG)(t.content,s.g_((e=>s.F2(D(e,t.todo))),(0,d.ls)(e,s.Pd((e=>({kind:"default",error:e})),(e=>function(e,t){switch(e.type){case r.Type.Drilldown:return v.ey.create(e.remove,e.inserts,t);case r.Type.Substitution:return v.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?v.fi.create(e.inserts[0],e.inserts[1],t):v.zE.create(e.inserts,t);case r.Type.Remove:return v.n6.create([e.remove],t);case r.Type.RemoveOr:return v.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case v._k.WithFormatting:return v.i3.createWithFormatting(e.ops,t);case v._k.PlainText:return v.i3.createPlainText(e.ops,t);default:return(0,h.vE)(e)}}(e,t);case r.Type.Citation:return function(e,t){return{type:v.b$.Type.Citation,tooltipText:t,labels:e.ops}}(e,t);case r.Type.OneGap:return v.G7.create(e,t);case r.Type.ShortenIt:return function(e,t){return{type:v.b$.Type.ShortenIt,tooltipText:t,labels:e.ops}}(e,t);case r.Type.ToneAI:return function(e,t){return{type:v.b$.Type.ToneAI,tooltipText:t,labels:e.transformParts}}(e,t);case r.Type.WritingExpert:return function(e,t){return{type:v.b$.Type.WritingExpert,tooltipText:t,labels:e.ops}}(e,t);default:return(0,h.vE)(e)}}(e,t.todo))))))));function W(e,t){const n=(e=>(0,d.ls)(e,(e=>e.delta.reduce(((e,t)=>u.s.isInsertString(t)?e+t.insert:e),""))))(e);return(0,d.ls)(function(e,{isFullSentence:t,isShortenIt:n,isToneAI:r,isCitation:i,isWritingExpert:a}){return s=>(0,d.zG)(s,o.DZ((o=>(0,d.zG)(o.type,c.UI((s=>{if(p.r3.hasOptionalContext(o.ops)){const[l,...c]=o.ops,d=p.JU.length(l);return{text:e(d,o.lengthAffected-d),ops:c,type:s,isFullSentence:t,isShortenIt:n,isToneAI:r,isCitation:i,isWritingExpert:a}}return{text:e(0,o.lengthAffected),ops:o.ops,type:s,isFullSentence:t,isShortenIt:n,isToneAI:r,isCitation:i,isWritingExpert:a}}))))),l.nI)}(n,t),s.Yo((()=>new Error("Alternative array is empty"))))}},2190:(e,t,n)=>{n.d(t,{G7:()=>m,GP:()=>r,_k:()=>u,b$:()=>i,ey:()=>c,fi:()=>l,fz:()=>s,i3:()=>p,n6:()=>o,nV:()=>d,zE:()=>a});var r,i,a,o,s,l,c,d,u,p,m,h=n(84910),g=n(78520),f=n(21147),y=n(90023),v=n(9141),x=n(31491);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(r||(r={})),function(e){let t;!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap",e[e.Drilldown=7]="Drilldown",e[e.ShortenIt=8]="ShortenIt",e[e.ToneAI=9]="ToneAI",e[e.Citation=10]="Citation",e[e.WritingExpert=11]="WritingExpert"}(t=e.Type||(e.Type={}));e.eq=f.f7(((e,t)=>e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels)));let n;!function(e){e.eq=f.Uz((e=>JSON.stringify(e.labels)))(v.Eq)}(n=e.ShortenIt||(e.ShortenIt={}));e.isFullSentence=e=>e.type===i.Type.FullSentence,e.isOneGap=e=>e.type===i.Type.OneGap,e.isShortenIt=e=>e.type===i.Type.ShortenIt,e.isToneAI=e=>e.type===i.Type.ToneAI,e.isRegular=e=>(0,y.ff)((0,x.Kg)(i.isFullSentence,i.isOneGap,i.isShortenIt,i.isToneAI))(e)}(i||(i={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.InsertList})}(a||(a={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteList})}(o||(o={})),function(e){e.create=(e,t)=>({labels:e,tooltipText:t,type:i.Type.DeleteOr})}(s||(s={})),function(e){e.create=(e,t,n)=>({type:i.Type.InsertOr,labels:[e,t],tooltipText:n})}(l||(l={})),function(e){e.create=function(e,t,n){return{type:i.Type.Drilldown,original:e,labels:t,tooltipText:n}};e.getSelectedItems=(e,t)=>{if(!t||0===t.length)return{activeLabels:e.labels,original:e.original};const n=t.slice(1).reduce(((e,t)=>e.subLabels[t]),e.labels[t[0]]);return{activeLabels:n.subLabels,original:n.label}}}(c||(c={})),function(e){function t(e,t){return[...e,...t].map((e=>e.text.length)).reduce(x.Sm,0)>30}e.create=function(e,n,r,a){return{type:i.Type.Arrow,original:e,labels:n,tooltipText:r,onlyReplacements:!0===a||t(e,n[0])}}}(d||(d={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(u||(u={})),function(e){e.createPlainText=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:u.PlainText}},e.createWithFormatting=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:u.WithFormatting}}}(p||(p={})),function(e){e.create=function(e,t){return{type:i.Type.OneGap,labels:{left:e.left.map((e=>(0,g._)((0,h._)({},e),{type:r.Text}))),right:e.right.map((e=>(0,g._)((0,h._)({},e),{type:r.Text})))},tooltipText:t}}}(m||(m={}))},21961:(e,t,n)=>{n.d(t,{X:()=>C});var r=n(32490),i=n(84910),a=n(78520),o=n(12518),s=n(21147),l=n(24332),c=n(58303),d=n(14944),u=n(90023),p=n(64297),m=n(31491),h=n(72111),g=n(17690),f=n(47311),y=n(91320),v=n(2190),x=n(80388),I=n(87368),b=n(90658),S=n(88367);class C{get activeAlertRemoved(){return b.i.activeAlertRemoved(this)}get scheduledToDispose(){return b.i.willBeDisposed(this,this.removedAlertsIds)}hashCode(){return C.hashCode(this)}equals(e){return C.eq.equals(this,e)}toJSON(){return(0,a._)((0,i._)({},this),{renderOptions:S.j.toJSON(this.renderOptions)})}constructor(e,t,n,i,a,o,s,l,d,p,m,h,g,f,y,v){(0,r._)(this,"id",void 0),(0,r._)(this,"alerts",void 0),(0,r._)(this,"activeAlertIndex",void 0),(0,r._)(this,"activeHighlightIndex",void 0),(0,r._)(this,"positionState",void 0),(0,r._)(this,"visualState",void 0),(0,r._)(this,"meta",void 0),(0,r._)(this,"lensId",void 0),(0,r._)(this,"renderOptions",void 0),(0,r._)(this,"muteCategory",void 0),(0,r._)(this,"order",void 0),(0,r._)(this,"initialAlertId",void 0),(0,r._)(this,"removedAlertsIds",void 0),(0,r._)(this,"cachedTransform",void 0),(0,r._)(this,"userInput",void 0),(0,r._)(this,"synfonySelection",void 0),(0,r._)(this,"kind",void 0),(0,r._)(this,"activeAlert",void 0),(0,r._)(this,"transform",void 0),this.id=e,this.alerts=t,this.activeAlertIndex=n,this.activeHighlightIndex=i,this.positionState=a,this.visualState=o,this.meta=s,this.lensId=l,this.renderOptions=d,this.muteCategory=p,this.order=m,this.initialAlertId=h,this.removedAlertsIds=g,this.cachedTransform=f,this.userInput=y,this.synfonySelection=v,this.kind=C.Kind,this.activeAlert=b.i.getActiveAlert(this),this.transform=(0,u.zG)(this.cachedTransform,c.UI((e=>e.labels)))}}!function(e){e.Kind="AlertCard",e.isPriority=e=>x.$.isPriority(e.activeAlert),e.updateAlerts=(e,t,n,r)=>i=>new C(i.id,e,n,r,i.positionState,i.visualState,i.meta,i.lensId,i.renderOptions,i.muteCategory,i.order,i.initialAlertId,t,i.cachedTransform,i.userInput,i.synfonySelection),e.updateUserInput=e=>t=>new C(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,e,t.synfonySelection),e.changeVisualState=e=>t=>new C(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,e,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changePosition=e=>t=>new C(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,e,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changeMeta=e=>t=>new C(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,e,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection),e.changeTransform=e=>t=>new C(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,e,t.userInput,t.synfonySelection),e.changeSynfonySelection=e=>t=>new C(t.id,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,e),e.canHydrate=e=>!(e.meta.checking!==I.n.CheckingState.Idle||b.i.activeAlertRemoved(e));let t,n;function r(e){return e.activeAlert.type===x.$.Type.writingExpertVbar||e.activeAlert.type===x.$.Type.writingExpertWithTeaser}e.getId=function(e){return e.id},function(e){e.getRemoveAlerts=(e,t)=>(n,r)=>i=>{const a=new Set(n.map((e=>e.id)));return b.i.hasAnyOfAlerts(a)(i)?e.remove(i,[i.activeAlert],(0,u.zG)(r,c.UI((e=>t.compare(i,e)>0)),c.fS(u.W8))):i};e.getChangePosition=function(e){return{changePosition:t=>n=>e.changePosition(n,t)}},e.getAnimatable=function(e){return{completeTransition:t=>n=>e.completeTransition(n,t),transitionTo:t=>n=>e.transitionTo(n,t),changeVisualState:t=>n=>e.changeVisualState(n,t)}},e.getRemove=function(e){return{remove:(t,n)=>r=>t(r)?e.remove(r,[r.activeAlert],n(r)):r}},e.getUpdateWithAlert=function(e){return{updateWithAlerts:t=>n=>e.updateWith(n,t)}},e.getSelect=function(e){return{select:(t,n)=>r=>e.selectFirstAlert(r,t,n),selectByAlert:(t,n,r)=>i=>e.select(i,n,t,r),unselect:(t,n)=>r=>e.unselect(r,t,n)}},e.getCloneable=function(){return{clone:e=>new C(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}}}(t=e.Capabilities||(e.Capabilities={})),function(e){e.default="default",e.super="super",e.takeaway="takeaway"}(n=e.Type||(e.Type={})),(0,p.L0)(null),e.isSuperView=function(e){return e.activeAlert.type===x.$.Type.super},e.isTakeawayView=function(e){return e.activeAlert.type===x.$.Type.takeaway},e.isSynfonyView=function(e){return e.activeAlert.alertType===g.bZ.Type.Synfony},e.isShortenItView=function(e){return e.activeAlert.type===x.$.Type.shortenIt},e.isToneAIView=function(e){return e.activeAlert.type===x.$.Type.toneAI},e.isEthicalAIView=function(e){return e.activeAlert.type===x.$.Type.ethicalAI},e.isSuggestedSnippetView=function(e){return e.activeAlert.type===x.$.Type.suggestedSnippet},e.isKnowledgeHubSuggestedTermView=function(e){return e.activeAlert.type===x.$.Type.knowledgeHubSuggestedTerm},e.isDefaultView=function(e){return e.activeAlert.type===x.$.Type.default||r(e)},e.isWritingExpertView=r,e.match=function(e){return t=>{switch(t.activeAlert.type){case x.$.Type.super:return o.F2(e.super(t));case x.$.Type.takeaway:return o.F2(e.takeaway(t));case x.$.Type.synfony:return o.F2(e.synfony(t));case x.$.Type.shortenIt:return o.F2(e.shortenIt(t));case x.$.Type.toneAI:return o.F2(e.toneAI(t));case x.$.Type.ethicalAI:return o.F2(e.ethicalAI(t));case x.$.Type.suggestedSnippet:return o.F2(e.suggestedSnippet(t));case x.$.Type.knowledgeHubSuggestedTerm:return o.F2(e.knowledgeHubSuggestedTerm(t));case x.$.Type.default:case x.$.Type.writingExpertVbar:case x.$.Type.writingExpertWithTeaser:return o.F2(e.default(t));case x.$.Type.plagiarism:case x.$.Type.premium:return o.t$(new Error(`Cannot match a card type with alert: [${JSON.stringify({lensId:t.activeAlert.lensId,lensType:t.activeAlert.lensType},null,2)}]`));default:return(0,p.L0)(t.activeAlert)}}};e.eq=b.i.eq,e.hashCode=e=>(0,y.NO)({itemHashCode:b.i.hashCode(e),synfonySelection:(0,u.zG)(e.synfonySelection,c.fS((()=>[])),(e=>e.join(",")))});const i=d.iP();e.ord=(0,l.g_)(i)([(0,u.zG)(d.Mh,d.Uz((e=>e.order))),(0,u.zG)(d.r9,d.Uz((e=>e.initialAlertId)))]);let a;function S(e){return e.activeAlert.gbPrompt}e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,u.zG)(e.from,c.Gg((t=>"expanded"===t&&"rendered"===e.transition.type)))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=s.f7(((e,t)=>e.type===t.type&&e.clockwise===t.clockwise))}(a=e.Transition||(e.Transition={})),e.hasTransform=function(e){return c.pC(e.transform)},e.hasFullSentenceTransform=function(e){return(g.eT.isFullSentence(e.activeAlert.extraProperties.cardType)||g.eT.isWritingExpert(e.activeAlert.extraProperties.cardType))&&(0,u.zG)(e.transform,c.Gg(v.b$.isFullSentence))},e.hasWritingExpertTransform=function(e){return g.eT.isWritingExpert(e.activeAlert.extraProperties.cardType)},e.hasOneGapTransform=function(e){return(0,u.zG)(e.transform,c.Gg(v.b$.isOneGap))},e.hasSynfonyTransform=function(e){return g.eT.isSynfony(e.activeAlert.extraProperties.cardType)},e.hasCitationTransform=function(e){return g.eT.isCitation(e.activeAlert.extraProperties.cardType)},e.isCitationDetectionCard=function(e){return g.eT.isCitationDetection(e.activeAlert.extraProperties.cardType)},e.isTakeaway=function(e){return x.$.isTakeaway(e.activeAlert)},e.isSimple=function(e){return g.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.isEligibleForAcceptSurvey=function(e){return e.activeAlert.acceptSurvey},e.isEligibleForGbPrompt=S,e.hasGbPrompt=function(e){return(0,u.zG)(S(e),c.Gg(Boolean))},e.hasBackgroundGbPrompt=function(e){return(0,u.zG)(S(e),c.Gg((({promptType:e})=>"background"===e)))},e.hasRedirectGbPrompt=function(e){return(0,u.zG)(S(e),c.Gg((({promptType:e})=>"redirect"===e)))},e.miniTitle=function(e,t){return x.$.isTakeaway(e.activeAlert)&&c.Wi(e.activeAlert.takeawayFeedback)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle};e.useCardStates=e=>({isChecking:e.pipe(f.map((e=>e.meta.checking===I.n.CheckingState.Checking)),f.distinctUntilChanged(),f.shareReplay({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(f.map((e=>e.meta.checking===I.n.CheckingState.Full)),f.distinctUntilChanged(),f.shareReplay({bufferSize:1,refCount:!0})),transform:e.pipe(f.map((({transform:e})=>e)),f.filter(c.pC),f.skipBy(c.Eh(v.b$.eq)))}),e.foldCard=o.fS((e=>(w("CardComponent").error("Got an unexpected card type",e),null)));const w=(0,m.HP)(h.C8.Logging.getLogger)}(C||(C={}))},87368:(e,t,n)=>{n.d(t,{n:()=>r});var r,i=n(32490),a=n(32719),o=n(91320);!function(e){let t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));class n{equals(e){return this.hashCode()===e.hashCode()}hashCode(){return(0,o.NO)({percentile:a.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((e=>e.meta.id)).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})}constructor(e,t,n,r,a){(0,i._)(this,"percentile",void 0),(0,i._)(this,"explanation",void 0),(0,i._)(this,"checking",void 0),(0,i._)(this,"ranges",void 0),(0,i._)(this,"showMuteQuotedAdvice",void 0),this.percentile=e,this.explanation=t,this.checking=n,this.ranges=r,this.showMuteQuotedAdvice=a}}e.Impl=n;e.empty=(e="",r=a.g.MIN,i=t.Idle,o=[])=>new n(r,e,i,o,!1),e.create=({explanation:e="",percentile:r=a.g.MIN,checking:i=t.Idle,ranges:o=[]})=>new n(r,e,i,o,!1)}(r||(r={}))},17560:(e,t,n)=>{n.d(t,{R:()=>r});var r,i=n(84910),a=n(78520),o=n(58303),s=n(14944),l=n(90023),c=n(9141),d=n(64297),u=n(17690),p=n(80388),m=n(21961),h=n(87368),g=n(87517),f=n(90658),y=n(84825);!function(e){e.Kind="AlertsBundle";e.getId=function(e){return e.id},e.bundleTitle=function(e){return e.bundleInfo.title};e.ord=(0,l.zG)(s.Mh,s.Uz((0,l.ls)((e=>e.activeAlert.bundleInfo),o.g_((()=>Number.MAX_SAFE_INTEGER),(e=>e.rank)))));var t=e.isExtendableWithAlerts=e=>{switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":case"muted":return!1;default:return(0,d.vE)(e.visualState.transition.type)}},n=(e.getAlertOutcomeBundle=e=>(0,l.zG)(e.bundleInfo,o.g_((()=>({id:"other",title:"Other"})),(e=>({id:e.title.toLowerCase().split(" ").join("_"),title:e.title})))),e.eq={equals:(e,t)=>f.i.eq.equals(e,t)&&o.Eh(c.Eq).equals(e.lensId,t.lensId)});let v;!function(e){const t=e=>(t,a)=>(0,i._)({id:t,kind:r.Kind,bundleInfo:e,activeAlert:f.i.getAlertByIndex(a.activeAlertIndex,a.alerts),transform:(0,l.zG)(a.cachedTransform,o.UI((e=>e.labels))),equals(e){return n.equals(this,e)},hashCode(){return f.i.hashCode(this)}},a);e.create=function(e,n,i,a){const s=k.getAnimatable(e).changeVisualState,c=e=>g.Mq.getCreate(t(e),n,s,a,i),m=x(i);return{create:e=>(t,n,r,a,s,l,d)=>c(s)(t,n,r,a,g.Mq.getApplicableCardMeta(n[r],l,i),e,o.G(l),d),createAdded:e=>(t,n,r,a)=>{const s=y.o.VisualState.initial({type:"added",clockwise:!0},!0);return c(n)(t,r,0,0,g.Mq.getApplicableCardMeta(r[0],s,i),e,o.G(s),a)},createFocused:e=>(t,n,r,a,s)=>{const l=y.o.VisualState.initial({type:"focused",clockwise:!0},!0);return c(n)(t,r,a,0,g.Mq.getApplicableCardMeta(r[a],l,i),e,o.G(l),s)},createRendered:e=>(t,n,r,a)=>{const s=y.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return c(n)(t,r,0,0,g.Mq.getApplicableCardMeta(r[0],s,i),e,o.G(s),a)},updateWith:(t,n)=>i=>{(0,d.kG)(t.every((e=>u.bZ.isRegistered(e))),"cannot add non registered alerts");const a=new Set(t.map((e=>e.id))),o=new Set(i.removedAlertsIds);a.forEach((e=>{o.delete(e)}));const s=i.alerts.filter((e=>!a.has(e.id))).concat(t.map(p.$.fromModel)).sort(n.compare);return(0,l.zG)(i,m(s,o,f.i.getIndexByAlert(i.activeAlert.id,s)),r.getCardHydrator(e))}}}}(v=e.ItemFactory||(e.ItemFactory={}));const x=e=>(t,n,r)=>o=>{const s=f.i.getAlertByIndex(r,t),l=p.$.isApplicableAlert(s)?g.Mq.getApplicableCardMeta(s,o.visualState,e):h.n.empty(void 0);return(0,a._)((0,i._)({},o),{alerts:t,activeAlert:s,meta:l,removedAlertsIds:n,activeAlertIndex:r})};var I=e.changePosition=e=>t=>(0,a._)((0,i._)({},t),{positionState:e}),b=e.updateVisualState=e=>t=>(0,a._)((0,i._)({},t),{visualState:e}),S=e.getCardHydrator=e=>g.Mq.getCardHydrator((e=>e.cachedTransform),m.X.canHydrate,w,e),C=e.changeUserInput=e=>t=>(0,a._)((0,i._)({},t),{userInput:e});const w=e=>t=>(0,a._)((0,i._)({},t),{cachedTransform:e,transform:(0,l.zG)(e,o.UI((e=>e.labels)))}),A=e=>t=>(0,a._)((0,i._)({},t),{meta:e});e.unselect=g.Mq.getUnselectItem(b,I);var E=e.getSelectByAlert=(e,t,n)=>g.Mq.getSelectByAlert(x(t),C,b,I,A,n,e,t);e.getSelect=(e,t,n)=>g.Mq.getSelectFirstAlert(E(e,t,n));let k;!function(e){function n(e){const t=g.Mq.getChangeVisualState(b,S(e));return{completeTransition:e=>n=>t(y.o.VisualState.complete(n.visualState,e))(n),transitionTo:g.Mq.getTransitionTo(t,I),changeVisualState:t}}e.getAnimatable=n;var r=e.getRemove=(e,t)=>g.Mq.getRemove(x(e),n(t).transitionTo);e.getUpdatableWithAlertsCapability=(e,r)=>i=>(0,l.ls)(e.updateWith(i,u.h$.ord),(e=>t(e)?e:n(r).transitionTo({type:"added",clockwise:!0})(e))),e.getRemoveAlertsCapability=(e,t,n,i)=>(a,s)=>{const c=E(e,t,S(n)),d=g.Mq.getSelectNextAlert(g.Mq.getCardSelections(e),c);return e=>{const c=new Set(a.map((e=>e.id)));if(!f.i.hasAnyOfAlerts(c)(e))return e;const u=r(t,n)(a,(0,l.zG)(s,o.UI((t=>i.compare(e,t)>0)),o.fS(l.W8)))(e);return(0,l.zG)(s,o.Gg((t=>t.id===e.id)))?d(i)(u):u}}}(k=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},64996:(e,t,n)=>{n.d(t,{Dv:()=>A,Py:()=>L,VC:()=>E,sR:()=>D,u0:()=>k,vM:()=>G});var r=n(32490),i=n(84910),a=n(78520),o=n(12518),s=n(24332),l=n(90023),c=n(21684),d=n(64297),u=n(13391),p=n(31491),m=n(72111),h=n(58303),g=n(84358),f=n(88347),y=n(17690),v=n(5412),x=n(47311),I=n(50887),b=n(94032),S=n(57576),C=n(525),w=n(73926);const A=(e,t,n,r=(()=>h.YP))=>i=>{if(!e(i))return t(i);const{currentLens:a}=i;return a.kind===S._L.abstract?h.YP:(0,l.zG)(h.DT(S.nL.hasItems)(i),h.tS((e=>n.findNextAlert(e.currentLens))),h.wp((()=>r(i))),h.UI(w.l.toLensAlert))},E=(e,t,n,r,i=C.v.WithSuccess.State.isInGlobalSuccess(r),a=(()=>!0))=>o=>{const{currentLens:s}=o;return s.kind===S._L.abstract?h.YP:s.kind===S._L.persistent?(0,l.zG)(h.DT(S.nL.hasItems)(o),h.tS((e=>r.getActiveAlert(e.currentLens))),h.g_((()=>S.nL.hasItems(o)?r.findNextAlert(o.currentLens):h.YP),(t=>e.findNextAlertInTextByLens(t,(0,l.MZ)(o.currentLens)))),h.wp((()=>a()&&(i(o)||v.R.isOutcomeId(o.currentLens.id)&&e.hasZeroFreeAlerts(n))?e.findPremiumAlert():h.YP)),h.UI(w.l.toLensAlert)):(0,l.zG)((i=>{const a=h.DT(S.nL.hasItems)(i);return(0,l.zG)(a,h.tS((e=>r.findNextAlert(e.currentLens))),h.UI(w.l.toLensAlert),h.wp((()=>(0,l.zG)(a,h.tS((e=>r.getActiveAlert(e.currentLens))),h.g_((()=>t(y.bZ.isRegisteredApplicableAlert,"cursor")),(t=>e.findNextAlertInText(t,y.bZ.isApplicableAlert))),h.UI((({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:n.get()})))))))})(o),h.wp((()=>(0,l.zG)(e.findPremiumAlert(),h.UI(w.l.toLensAlert)))))};function k(e,t){return(n,r)=>t.findClosestAlertHighlight(e(r),n)}const _=e=>e.pipe(x.pairwise(),x.first((([e,t])=>"idle"!==e&&"idle"===t)),x.map((()=>{}))),T=e=>e.pipe(x.startWith("idle"),x.pairwise(),x.first((([e,t])=>"idle"===t)),x.filter((([e])=>"full"===e)),x.map((()=>{}))),M=(e,t)=>{const n=_(e);return t.bigPaste.pipe(x.switchMap((()=>n)),x.map((()=>{})),x.shareReplay({bufferSize:1,refCount:!0}))};class G{dispose(){this._subs.dispose()}constructor(e,t){(0,r._)(this,"_subs",new I.w.Keeper),(0,r._)(this,"firstOpeningOfDocumentWithAlerts",u.h.create(!1));const n=_(e),i=(e=>(0,l.zG)(e,x.filter((e=>S.nL.hasCards(e)&&h.pC(S.In.getActiveItem(e.currentLens)))),x.map((()=>{}))))(t);this._subs.push((0,l.zG)(t,x.first((e=>S.nL.hasCards(e))),x.switchMap((()=>(0,l.zG)(x.mergeStatic(i,n),x.map(l.jv),x.startWith(!0)))),x.tap(b.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}}var L,D;!function(e){const t=(0,p.HP)(m.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,n,r,i,a)=>{const o=_(n),s=T(n),c=M(n,i);return(0,l.zG)(x.mergeStatic(o,s,c),x.withLatestFrom(e,a,r),x.filter((([e,t,n,r])=>r&&!n&&S.nL.hasCards(t)&&h.Wi(S.In.getActiveItem(t.currentLens)))),x.map((()=>S.nL.Effect.FocusBehavior.focusFirst)),x.tap((e=>t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,t)=>{const n=(0,l.zG)(e,x.map((e=>t=>n=>{switch(t.kind){case S.nL.Effect.FocusBehaviorType.noFocus:return n;case S.nL.Effect.FocusBehaviorType.unFocus:return S.nL.Prism.getLensWithItems().modify(e.unselectItem(),n);case S.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.zG)(e.findFirstAlert(n.currentLens),h.g_((()=>n),(t=>S.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case S.nL.Effect.FocusBehaviorType.focusNext:return(0,l.zG)(e.findNextAlert(n.currentLens),h.g_((()=>n),(t=>S.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n))));case S.nL.Effect.FocusBehaviorType.focusAlert:return S.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),n);default:(0,d.vE)(t)}})(t)));return{id:"autoFocusEffect",when:v.R.isWithAlertsId,what:S.nL.Effect.ItemsApplicator.create(n)}};var n=e.whenFirstOpeningDocumentWithAlerts=e=>()=>e.firstOpeningOfDocumentWithAlerts.get(),r=e.whenShouldVerifyCurrentLens=(e,n)=>r=>{const i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!S.nL.hasItems(r)||!n.shouldVerify(r.currentLens))&&((0,l.zG)(S.nL.getActiveAlert(e)(r),h.hX(y.bZ.isInDuplicatedState),h.g_((()=>t(i).debug("Current alert removed, should verify current lens...")),(e=>t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())))),!0)},c=e.whenNoActiveCard=e=>e.currentLens.items.size>0&&h.Wi(S.In.getActiveItem(e.currentLens)),f=e.behaviorToEffect=e=>n=>r=>(0,l.zG)(n(r)?e(r):h.YP,g.bw((e=>t("AutoFocus.stateValidator").debug(`'behavior triggered: ${e.kind}`))));e.getDefaultBehavior=(e,t)=>(0,l.zG)([(0,l.zG)(r(e,t),f((()=>h.G(S.nL.Effect.FocusBehavior.focusNext))))],(0,s.g_)((0,s._e)(h.gW())())),e.getAlwaysFocusBehavior=(e,t)=>(0,l.zG)([(0,l.zG)((0,p.Kg)(c,r(e,t)),f((()=>h.G(S.nL.Effect.FocusBehavior.focusNext))))],(0,s.g_)((0,s._e)(h.gW())())),e.getFocusFromCacheBehavior=(e,t,i,a,o,d)=>(0,l.zG)([(0,l.zG)(r(a,o),f((()=>h.G(S.nL.Effect.FocusBehavior.focusNext)))),(0,l.zG)((0,p.W9)((()=>t.get()),(0,p.W9)((0,p.W9)((0,p.W9)(n(i),(()=>e)),c),(0,l.zG)(d,h.UI((e=>(0,l.ff)(e.willShowBulkAccept))),h.fS((()=>l.W8))))),f((()=>h.G(S.nL.Effect.FocusBehavior.focusFirst))))],(0,s.g_)((0,s._e)(h.gW())()));e.getFirstApiAlignmentOverride=function(){const e=u.h.create(!0);return(t,n)=>{let r=n;return e.get()&&n===y.l$.api&&(r=y.l$.text),e.set(!1),r}};e.getShouldAutoFocus=(e,t,n)=>r=>e.get()&&(0,l.zG)(r,S.nL.getActiveAlert(n),h.tS((({id:e})=>t.getById(e))),h.hX((0,p.Kg)((e=>"APPLIED"===e.state.type&&"ByCard"===e.state.method),y.bZ.isDuplicated,y.bZ.isCapiDone)),h.pC),e.getStateTransformer=(e,n,r,s,c,u,p)=>({state:m,metadata:g})=>{const f=t("AutoFocus.stateTransformer");if(!S.nL.hasCards(m)||!S.nL.hasItems(m))return f.trace("state has no items, returning original state"),o.t$({state:m,metadata:g});const y=e(m);if(f.trace("effect: ",{state:m,metadata:g,effect:y}),h.Wi(y))return f.trace("no effect selected, returning original state"),o.t$({state:m,metadata:g});if(u(y.value),y.value.kind===S.nL.Effect.FocusBehaviorType.unFocus||y.value.kind===S.nL.Effect.FocusBehaviorType.noFocus)return o.t$({state:S.nL.Prism.getLensWithItems().modify(s.unselectItem(),m),metadata:g});const v=c(m);return f.trace("shouldAutoFocus",{alertSource:m.alertSource,shouldAutoFocus:v}),(0,l.zG)(y,h.tS((e=>{switch(e.kind){case S.nL.Effect.FocusBehaviorType.noFocus:case S.nL.Effect.FocusBehaviorType.unFocus:return h.YP;case S.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.zG)(s.findFirstAlert(m.currentLens),h.UI((e=>(0,a._)((0,i._)({},e),{lensId:m.currentLens.id}))));case S.nL.Effect.FocusBehaviorType.focusNext:return n(m);case S.nL.Effect.FocusBehaviorType.focusAlert:return h.G((0,a._)((0,i._)({},e.alertHighlight),{lensId:m.currentLens.id}));default:(0,d.vE)(e)}})),h.UI((e=>((0,d.kG)(h.pC(r.getRegistered(e.alert.id)),"lens alert should be in registered state",(()=>e.alert.toString())),e))),h.g_((()=>(f.trace("no alert selected, returning original state"),m.currentLens.kind===S._L.active?o.F2(o.F2({lensId:p.get(),alertSource:m.alertSource,options:{order:m.switchOrder,toFocus:S.nL.Effect.FocusBehavior.noFocus}})):o.t$({state:m,metadata:g}))),(({alert:e,highlightIndex:t,lensId:n})=>{if(f.trace("selected alert to focus",e),m.currentLens.meta.filter(e)){if(v){const n={alert:e,highlightIndex:t};return(0,l.zG)(m.currentLens.items.find(s.hasAlert(e.id)),h.g_((()=>(f.trace("shouldAutoFocus: true, no such item in a lens for given alert",e.id),o.t$({state:m,metadata:g}))),(()=>(f.trace("shouldAutoFocus: true, selecting alert"),o.t$({state:S.nL.Prism.getLensWithItems().modify(s.selectItemByAlert(n),m),metadata:{sourceId:"LSM.updateActiveState"}})))))}return f.trace("shouldAutoFocus: false"),o.t$({state:m,metadata:g})}return f.trace("alert is not from current lens, recreating lens view"),o.F2(v?o.t$({alertHighlight:{alert:e,highlightIndex:t},alertSource:m.alertSource,options:{lensId:n,order:m.switchOrder,toFocus:S.nL.Effect.FocusBehavior.focusFirst}}):o.F2({lensId:n,alertSource:m.alertSource,options:{order:m.switchOrder,toFocus:S.nL.Effect.FocusBehavior.noFocus}}))})))}}(L||(L={})),function(e){const t=e=>t=>n=>{switch(t.kind){case S.nL.Effect.FocusBehaviorType.noFocus:return n;case S.nL.Effect.FocusBehaviorType.unFocus:return S.nL.Prism.getLensWithItems().modify(e.unselectItem(),n);case S.nL.Effect.FocusBehaviorType.focusFirst:return(0,l.zG)(n.currentLens.items.find((0,l.ff)(e.isScheduledToDispose)),h.UI((0,f.ei)("value")),h.g_((0,l.a9)(n),(t=>S.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),n))));case S.nL.Effect.FocusBehaviorType.focusNext:return(0,l.zG)(n.currentLens.cardIndex,h.tS((t=>(0,l.zG)((0,c.uU)(n.currentLens.items.values(),t,h.DT((0,l.ff)(e.isScheduledToDispose))),h.UI((0,f.ei)("value"))))),h.g_((0,l.a9)(n),(t=>S.nL.Prism.getLensWithItems().modify(e.selectItemById(t.id),n))));case S.nL.Effect.FocusBehaviorType.focusAlert:return S.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),n);default:(0,d.vE)(t)}},n=(0,p.HP)(m.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=(e,t,r,i)=>{const a=_(t),o=T(t),s=M(t,i);return(0,l.zG)(x.mergeStatic(a,o,s),x.switchMap(b.b2.rafScheduler),x.switchMap(b.b2.rafScheduler),x.withLatestFrom(e,r),x.filter((([e,t,n])=>n&&S.nL.hasCards(t)&&h.Wi(S.In.getActiveItem(t.currentLens)))),x.map((()=>S.nL.Effect.FocusBehavior.focusFirst)),x.tap((e=>n("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e))))},e.getSideEffect=(e,n)=>{const r=(0,l.zG)(e,x.map(t(n)));return{id:"sduiAutoFocusEffect",when:v.R.isWithAlertsId,what:S.nL.Effect.ItemsApplicator.create(r)}},e.getShouldAutoFocus=(e,t,n)=>r=>e.get()&&(0,l.zG)(r,S.nL.getActiveAlert(n),h.tS((({id:e})=>t.getById(e))),h.hX((0,p.Kg)((e=>!("REMOVED"===e.state.type&&"textChange"===e.state.reason)),y.bZ.isDuplicated,y.bZ.isCapiDone)),h.pC),e.getStateTransformer=(e,r,s,c,d,u)=>({state:p,metadata:g})=>{const f=n("AutoFocus.stateTransformer",m.zW.i.TRACE);if(!S.nL.hasCards(p)||!S.nL.hasItems(p))return f.trace("state has no items, returning original state"),o.t$({state:p,metadata:g});const y=e(p);if(h.Wi(y))return f.trace("no effect selected, returning original state"),o.t$({state:p,metadata:g});if(f.trace("effect: ",{state:p,metadata:g,effect:y}),d(y.value),y.value.kind===S.nL.Effect.FocusBehaviorType.unFocus||y.value.kind===S.nL.Effect.FocusBehaviorType.noFocus)return o.t$({state:S.nL.Prism.getLensWithItems().modify(s.unselectItem(),p),metadata:g});const v=c(p);return f.trace("shouldAutoFocus",{alertSource:p.alertSource,shouldAutoFocus:v}),(0,l.zG)(y,h.UI((e=>({effect:e,applicator:t(s)}))),h.g_((()=>(f.trace("no effect selected, returning original state"),p.currentLens.kind===S._L.active?o.F2(o.F2({lensId:u.get(),alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:S.nL.Effect.FocusBehavior.noFocus}})):o.t$({state:p,metadata:g}))),(({effect:e,applicator:t})=>{f.trace(`effect selected: ${e.kind}`);const n=t(e)(p);return v?(f.trace("shouldAutoFocus: true, selecting an item in the lens"),o.t$({state:n,metadata:{sourceId:"LSM.updateActiveState"}})):(f.trace("current lens is empty"),e.kind===S.nL.Effect.FocusBehaviorType.focusNext?(f.trace("no items to select in the current lens, trying to switch"),(0,l.zG)(p,r,h.g_((()=>(f.trace("next alert not found in other lenses, reset cardIndex"),o.t$({state:p.patch({currentLens:(0,a._)((0,i._)({},p.currentLens),{cardIndex:h.YP})}),metadata:{sourceId:"LSM.updateActiveState"}}))),(({lensId:e})=>(f.trace(`found next alert in lens: ${e}. Switching the lens`),o.F2(o.F2({lensId:e,alertSource:p.alertSource,options:{order:p.switchOrder,toFocus:S.nL.Effect.FocusBehavior.noFocus}}))))))):(f.trace("shouldAutoFocus: false"),o.t$({state:p,metadata:g})))})))}}(D||(D={}))},87517:(e,t,n)=>{n.d(t,{IG:()=>r,Ls:()=>A,Mq:()=>_});var r,i=n(84910),a=n(78520),o=n(12518),s=n(90023),l=n(21684),c=n(64297),d=n(13391),u=n(72111),p=n(58303),m=n(84358),h=n(22561),g=n(17690),f=n(5412),y=n(32719),v=n(80388),x=n(21961),I=n(87368),b=n(84825),S=n(90658),C=n(65810),w=n(88367);function A(e,t,n,r,o,s=x.X.canHydrate){const l=_.getCardSelections(t),d=_.getCardHydrator((e=>e.cachedTransform),s,x.X.changeTransform,e),u=_.getChangeVisualState(x.X.changeVisualState,d),m=_.getSelectByAlert(x.X.updateAlerts,x.X.updateUserInput,u,x.X.changePosition,x.X.changeMeta,d,t,n),h=_.getUnselectItem(u,x.X.changePosition),f=_.getTransitionTo(u,x.X.changePosition),y=_.getRemove(x.X.updateAlerts,f);const S=_.getCreate(k,o,u,r,n);const C=_.getSelectFirstAlert(m);return(0,a._)((0,i._)({shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:S,createFromAlert:e=>t=>S(t.id,[t],0,0,I.n.empty(g.bZ.isApplicableAlert(t)?t.explanation:void 0),e,p.YP),createFocused:function(e){const t=b.o.VisualState.initial({type:"focused",clockwise:!0},!0);return(r,i,a)=>S(r,[i],0,a,_.getApplicableCardMeta(i,t,n),e,p.G(t))},createRendered:function(e){const t=b.o.VisualState.initial({type:"rendered",clockwise:!0},!1);return(r,i)=>S(r,[i],0,0,_.getApplicableCardMeta(i,t,n),e,p.G(t))},createAdded:function(e){const t=b.o.VisualState.initial({type:"added",clockwise:!0},!0);return(r,i)=>S(r,[i],0,0,_.getApplicableCardMeta(i,t,n),e,p.G(t))}},l),{select:(e,t,n,r)=>m(t,n,r)(e),selectFirstAlert:(e,t,n)=>C(t,n)(e),selectNextAlert:(e,t)=>_.getSelectNextAlert(l,m)(t)(e),unselect:(e,t,n)=>h(t,n)(e),remove:(e,t,n)=>y(t,n)(e),updateWith(e,t){(0,c.kG)(1===t.length,"AlertCard can only handle update with a single alert");const r=t[0];(0,c.kG)(void 0!==e.alerts.find((e=>e.id===r.id)),"can not receive updates for unknown alert",(()=>r.toString()));const i=function(e,t){const r=_.getApplicableCardMeta(t,e.visualState,n);return new x.X(e.id,e.alerts.map((e=>e.id===t.id?v.$.fromModel(t):e)),e.activeAlertIndex,_.getAHI(e,r),e.positionState,e.visualState,r,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection)}(e,r);switch(r.state.type){case g.bZ.State.Type.REGISTERED:{const e="focused"===i.visualState.transition.type||"expanded"===i.visualState.transition.type?d(i):i;return"success"===i.visualState.transition.type||"presuccess"===i.visualState.transition.type?f({type:"focused",clockwise:i.visualState.transition.clockwise})(e):e}case g.bZ.State.Type.REMOVED:return"focused"!==i.visualState.transition.type&&"expanded"!==i.visualState.transition.type||!i.alerts.every((e=>g.bZ.isCapiDone(e)&&e.allowUpdate&&g.bZ.isRated(i.activeAlert)))?y(t,!0)(i):f({type:"presuccess",clockwise:i.visualState.transition.clockwise})(i);case g.bZ.State.Type.APPLIED:case g.bZ.State.Type.BEING_APPLIED:return y(t,!0)(i);default:return(0,c.vE)(r.state)}},changePosition:(e,t)=>x.X.changePosition(t)(e),changeVisualState:(e,t)=>u(t)(e),transitionTo:(e,t)=>f(t)(e),completeTransition:(e,t)=>u(b.o.VisualState.complete(e.visualState,t))(e),hideMuteQuotedAdvice:e=>new x.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new I.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput,e.synfonySelection),updateUserInput:(e,t)=>x.X.updateUserInput(t)(e),updateSynfonySelection:(e,t)=>x.X.changeSynfonySelection(t)(e)})}function E(e){return g.bZ.isOneGap(e)&&""!==e.gapValue?p.G(e.gapValue):p.YP}!function(e){let t;e.toCardRenderOptions=function(e,n,r){const i=new Set;return(f.R.isMainLens(n)||e.features.has(t.showCardLabelInOutcomes)&&n!==f.R.SpecialId.Plagiarism)&&i.add(w.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&i.add(w.j.Features.enableMuteQuotedAdvice),e.features.has(t.showAnonymousUserFooters)&&i.add(w.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(w.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&i.add(w.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&i.add(w.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&i.add(w.j.Features.showPersistentPremiumCardLabels),e.features.has(t.showPremiumOnboarding)&&i.add(w.j.Features.showPremiumOnboarding),e.features.has(t.a11yContrast)&&i.add(w.j.Features.a11yContrast),e.features.has(t.showYellowFooterForTrialUsers)&&i.add(w.j.Features.showYellowFooterForTrialUsers),e.features.has(t.sduiContainerStyle)&&i.add(w.j.Features.sduiContainerStyle),e.features.has(t.showOnboardingTourA11yUpdates)&&i.add(w.j.Features.showOnboardingTourA11yUpdates),{features:i,layoutDensity:e.cardLayoutDensityMode,isNew:r,cardVisualMode:e.cardVisualMode,isPremiumOnboarding:e.isPremiumOnboarding}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showPremiumOnboarding="showPremiumOnboarding",e.a11yContrast="a11yContrast",e.showYellowFooterForTrialUsers="showYellowFooterForTrialUsers",e.sduiContainerStyle="sduiContainerStyle",e.showOnboardingTourA11yUpdates="showOnboardingTourA11yUpdates"}(t=e.Features||(e.Features={}));e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:w.j.Density.cozy,shouldAnimateAlertApply:g.bZ.isAccepted,cardVisualMode:d.h.create(w.j.CardVisualMode.RegularLightMode)}}(r||(r={}));const k=(e,t)=>new x.X(e,t.alerts,t.activeAlertIndex,t.activeHighlightIndex,t.positionState,t.visualState,t.meta,t.lensId,t.renderOptions,t.muteCategory,t.order,t.initialAlertId,t.removedAlertsIds,t.cachedTransform,t.userInput,t.synfonySelection);var _;!function(e){function t(e,t,n){let i;i=g.bZ.getCheckingState(e)===g.bZ.CheckingState.CHECKING?"focused"===t.transition.type||"expanded"===t.transition.type?I.n.CheckingState.Checking:I.n.CheckingState.Full:I.n.CheckingState.Idle;const a=n.features.has(r.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new I.n.Impl(y.g.fromRatio(e.progress),e.explanation,i,e.getHighlightRanges(),a)}e.getApplicableCardMeta=t;e.getRemove=(e,t)=>(n,r=!0)=>i=>{const a=new Set(n.map((e=>e.id))),o=new Set(i.removedAlertsIds);a.has(i.activeAlert.id)&&o.add(i.activeAlert.id);const{remainingAlerts:l,activeAlertIndex:c}=i.alerts.reduce(((e,t,n)=>!a.has(t.id)||b.o.isFocused(i)&&t.id===i.activeAlert.id?{remainingAlerts:e.remainingAlerts.concat([t]),activeAlertIndex:e.activeAlertIndex}:{remainingAlerts:e.remainingAlerts,activeAlertIndex:e.activeAlertIndex+(n<i.activeAlertIndex||n===i.activeAlertIndex&&n===i.alerts.length-1&&n>0?-1:0)}),{remainingAlerts:[],activeAlertIndex:i.activeAlertIndex}),d=(0,s.zG)(i,S.i.willBeDisposed(i,a)?e(i.alerts,a,i.activeAlertIndex,i.activeHighlightIndex):e(l,o,c,0));return S.i.willBeDisposed(d,d.removedAlertsIds)?t({type:"removed",clockwise:r})(d):d},e.getTransitionTo=(e,t)=>n=>r=>{const i=b.o.VisualState.to(r.visualState,n);return(0,s.zG)(r,e(i),(e=>n.type===r.visualState.transition.type||"expanded"!==n.type&&"focused"!==n.type?e:t(C.s.PositionState.invalidateHeight(r.positionState))(e)))};const n=e=>t=>{const n=t.alerts;return p.ij(n.slice(t.activeAlertIndex+1).find(e))};var i=e.getPrevAlert=e=>t=>{const n=t.alerts;return p.ij(n.slice(0,t.activeAlertIndex).reverse().find(e))},a=e.getAnyRegisteredAlert=e=>t=>{const n=t.alerts;return(0,s.zG)(n.filter((t=>e.isRegistered(t.id))),(e=>e[e.length-1]),p.ij)},d=(e.getCardSelections=e=>{const t=(e=>t=>e.isRegistered(t.id))(e);return{nextAlert:n(t),prevAlert:i(t),anyRegisteredAlert:a(e)}},e.getSelectByAlert=(e,n,r,i,a,o,l,u)=>({alert:h,highlightIndex:f},y,v)=>x=>{(0,c.kG)(!x.removedAlertsIds.has(h.id),"Cannot select removed alert");const b=l.getById(h.id);(0,c.kG)(p.pC(b),"Cannot select not registered alert");const C=m.MH(b),w=x.alerts.filter((e=>!x.removedAlertsIds.has(e.id))),A=E(C),k=S.i.getIndexByAlert(h.id,w),_=d(r,i)(y,v);return(0,s.zG)(x,_,e(w,x.removedAlertsIds,k,f),n(A),(e=>{return a((n=e.visualState,g.bZ.isApplicableAlert(C)?t(C,n,u):I.n.empty(void 0)))(e);var n}),o)},e.getSelectItem=(e,t)=>(n,r)=>i=>{const a=(0,s.zG)(n,p.UI((e=>r.compare(i,e)>0)),p.fS(s.W8)),o=(0,s.zG)(n,p.Gg((e=>e.id===i.id))),l=o?i.positionState:C.s.PositionState.invalidateHeight(i.positionState),c=o&&x.X.isCardOpen(i.visualState)?"expanded":"focused",d=(0,s.zG)(n,p.g_((()=>b.o.VisualState.initial({type:c,clockwise:a})),(e=>b.o.VisualState.to(i.visualState,{type:c,clockwise:a}))));return(0,s.zG)(i,t(l),e(d))});e.getSelectNextAlert=(e,t)=>n=>r=>S.i.activeAlertRemoved(r)&&!S.i.willBeDisposed(r,r.removedAlertsIds)?(0,s.zG)(e.nextAlert(r),m.vx(e.prevAlert(r)),p.UI((e=>t({alert:e,highlightIndex:0},p.YP,n)(r))),p.fS((()=>r))):r,e.getSelectFirstAlert=e=>(t,n)=>r=>{const i=r.alerts.filter((e=>!r.removedAlertsIds.has(e.id)));(0,c.kG)(i.length>0,"Selectable card must have at least one not removed alert");const a=i[0];return e({alert:a,highlightIndex:0},t,n)(r)},e.getUnselectItem=(e,t)=>(n,r)=>i=>{const a=(0,s.zG)(n,p.UI((e=>r.compare(i,e)>0)),p.fS(s.W8)),o=(0,s.zG)(n,p.Gg((e=>e.id===i.id))),l=o?i.positionState:C.s.PositionState.invalidateHeight(i.positionState);return(0,s.zG)(i,t(l),S.i.willBeDisposed(i,i.removedAlertsIds)||b.o.isHidden(i)?s.yR:e(b.o.VisualState.to(i.visualState,{type:"rendered",clockwise:a})))},e.getCardHydrator=(e,t,n,r)=>i=>{const a=i.activeAlert.type===v.$.Type.super||i.activeAlert.type===v.$.Type.plagiarism||i.activeAlert.type===v.$.Type.premium||i.activeAlert.type===v.$.Type.takeaway||g.eT.isSimple(i.activeAlert.extraProperties.cardType)?p.YP:function(e,t,n){const i=u.C8.Logging.getLogger("CardFactory");return(0,s.zG)(t,p.hX((t=>!n||(0,s.zG)(e,p.Gg((e=>t.id===e.id&&t.rev===e.revision))))),p.wp((()=>(0,s.zG)(e,p.tS((e=>(0,s.zG)(r(e),o.g_((n=>{switch(n.kind){case"default":i.error("Could not hydrate transform",n.error,{alertId:e.id});break;case"mpteError":i.warn("Could not hydrate transform",n.error,{alertId:e.id});break;default:(0,c.vE)(n)}return t}),(t=>p.G({id:e.id,rev:e.revision,labels:t}))))))))))}(i.activeAlert.getTransform(),e(i),t(i));return n(a)(i)},e.getChangeVisualState=(e,t)=>n=>r=>{const i=e(n)(r);return"focused"===n.transition.type||"expanded"===n.transition.type?t(i):i},e.getCreate=(e,t,n,i,a)=>(o,l,d,u,m,h,f,y=g.h$.ord)=>{const x=S.i.getAlertByIndex(d,l),w=E(x),A=[...l].sort(y.compare),k=A.map(v.$.fromModel),_=k[0];(0,c.kG)(Boolean(_),"The card must contain at least 1 alert");const T=(0,s.zG)(t,p.tS((e=>e.getAlertMuteCategory(l[0].id)))),M=e(o,{alerts:k,alertModels:A,activeAlertIndex:S.i.getIndexByAlert(x.id,k),activeHighlightIndex:u,positionState:C.s.PositionState.empty,visualState:b.o.VisualState.initial({type:"rendered",clockwise:!0}),meta:new I.n.Impl(m.percentile,m.explanation,m.checking,m.ranges,a.features.has(r.Features.enableMuteQuotedAdvice)&&v.$.isInQuotes(_)),lensId:p.G(h),renderOptions:r.toCardRenderOptions(a,h,i(_)),muteCategory:T,order:_.getHighlightRanges()[0].end,initialAlertId:_.id,removedAlertsIds:new Set,cachedTransform:p.YP,userInput:w,synfonySelection:p.YP});return(0,s.zG)(f,p.g_((()=>M),(e=>n(e)(M))))};e.getAHI=function(e,t){if((0,c.kG)(t.ranges.length>0,`Incorrect card meta: rangeIds empty. Card ID ${e.id}, activeAlert: ${e.activeAlert.toString()}`),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;{const n=e.meta.ranges[e.activeHighlightIndex];return(0,c.kG)(void 0!==n,"AHI not found in rangeIds"),(0,s.zG)(p.G(t.ranges.findIndex((e=>e.meta.id===n.meta.id))),p.hX((e=>-1!==e)),p.wp((()=>(0,l.OI)(t.ranges,n,h.SV.ordEnd))),p.fS((()=>t.ranges.length-1)))}};e.snapshot=e=>({cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,s.zG)(Boolean(e.alerts)?e.alerts.map((e=>e.id)):e.alerts),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex})}(_||(_={}))},74075:(e,t,n)=>{n.d(t,{R7:()=>m,XU:()=>h});var r=n(58303),i=n(90023),a=n(5412),o=n(94032),s=n(47311),l=n(70394),c=n(84825),d=n(57576),u=n(31882);const p={cardsBeyondViewport:5,cardsAroundActive:100},m=(e,t,n,i,m=p,h=o.b2.rafScheduler)=>{const g=e=>!e.positionState.visible&&c.o.isAnimatable(e)&&e.visualState.incomplete?(i.next({type:l.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),n.completeTransition(e.visualState.transitionId)(e)):e,f=e.pipe(s.map(d.nL.mapper((({currentLens:e,alertSource:t})=>r.G({currentLens:e,alertSource:t}))))),y=(0,u.nM)(n)(f,t.viewport,t.scrollTop,t.paddingTop,h).pipe(s.map((({viewport:e,scrollTop:t,paddingTop:n})=>({viewport:e,scrollTop:t,paddingTop:n,completeTransition:g}))),s.map((0,u.GC)({cardsBeyondViewport:m.cardsBeyondViewport,cardsAroundActive:m.cardsAroundActive,changePosition:n})));return{id:"manageCardsVisibility",when:a.R.isWithAlertsId,what:d.nL.Effect.Applicator.create(y)}},h=(e,t,n)=>{const l=(0,i.zG)(e,s.map(d.nL.mapper((({currentLens:e,alertSource:t})=>r.G({currentLens:e,alertSource:t})))),(0,u.SW)(n),s.switchMap(o.b2.rafScheduler),s.filter((e=>0!==e)),s.tap((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:a.R.isWithAlertsId,what:d.nL.Effect.Applicator.create(s.mergeStatic(s.mergeStatic(l).pipe(s.switchMapTo(s.NEVER))))}}},65557:(e,t,n)=>{n.d(t,{YA:()=>u,i$:()=>d});var r=n(90023),i=n(58303),a=n(94032),o=n(47311),s=n(57576),l=n(34837),c=n(70701);const d=e=>a.Hl(e.scrollTop.pipe(o.skip(1)),100,!0).pipe(o.startWith(!1),o.shareReplay({bufferSize:1,refCount:!0})),u=(e,t)=>{const n=new c.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,r.zG)(e.view(s.nL.getLens).get(),i.tS((({items:e,cardsHeight:t})=>(0,r.zG)(e.getAt(0),i.UI((e=>{const i=(0,r.ls)(l.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:i,bottom:l.r.FromWindowTop.ISO.modify(l.L.concatC(t))(i)}}))))))}},14677:(e,t,n)=>{n.d(t,{o:()=>u});var r=n(32490),i=n(12518),a=n(90023),o=n(13391),s=n(72111),l=n(47311),c=n(59399),d=n(34837);class u{constructor(e){(0,r._)(this,"_validateOffset",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"scrollTop",void 0),(0,r._)(this,"paddingTop",void 0),(0,r._)(this,"viewport",void 0),(0,r._)(this,"scrollOffset",void 0),(0,r._)(this,"moveCardsBy",void 0),(0,r._)(this,"moveCardsByAnimated",void 0),this._validateOffset=e,this._log=s.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=o.h.create(0),this.paddingTop=o.h.create(0),this.viewport=o.h.create({top:d.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new l.Subject,this.moveCardsBy=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),this.scrollOffset.next(e),i.F2(void 0)),this.moveCardsByAnimated=(e,t)=>(this._log.debug(`Cards list moved by ${e}, from: ${t}`),l.Observable.create((t=>(0,a.zG)(this._validateOffset(e,this),i.g_((e=>(t.thrownError(e),a.Q1)),(()=>{const n=2*this.viewport.get().height,r=Math.abs(e)>n?(e>0?1:-1)*n:e,i=e-r,a=c.f.createAnimationObservable(0,r,200).pipe(l.pairwise(),l.map((([e,t])=>t-e)),l.startWith(i),l.tap((e=>this.scrollOffset.next(e)))).subscribe({error:e=>t.error(e),complete:()=>t.complete()});return()=>a.unsubscribe()}))))))}}},34837:(e,t,n)=>{n.d(t,{L:()=>i,r:()=>r});var r,i,a=n(21147),o=n(76399),s=n(84210);!function(e){let t;!function(e){e.ISO=(0,s.k4)()}(t=e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){let t,n,r;!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(a.lr).equals}(t=e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(n=e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(r=e.CardTop||(e.CardTop={}));var i=e.concatC=e=>t=>e+t;const l=e=>new o.aD(e);e.converters=function(e,t,n){const r=l(i(n)).get,a=l(i(-e)).get;return{windowToViewport:l(i(-t)).get,viewportToWindow:l(i(t)).get,cardTopToViewport:a,viewportToCardTop:l(i(e)).get,absTopToViewportTop:e=>a(r(e)),absTopToCardTop:r}}}(i||(i={}))},70701:(e,t,n)=>{n.d(t,{Db:()=>i});var r,i,a,o=n(32490),s=n(21147),l=n(34837);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){e.Impl=class{constructor(e,t,n){(0,o._)(this,"scrollTop",void 0),(0,o._)(this,"viewport",void 0),(0,o._)(this,"converters",void 0),this.scrollTop=e,this.viewport=t,this.converters=l.L.converters(e,l.r.FromWindowTop.ISO.unwrap(t.top),n)}}}(i||(i={})),function(e){const t=(0,s.MW)({top:s.lr,height:s.lr});e.eqDimensionsTuple=(0,s.IP)(t,t)}(a||(a={}))},31882:(e,t,n)=>{n.d(t,{Bk:()=>y,GC:()=>w,SW:()=>b,Sd:()=>S,nM:()=>C,v_:()=>x});var r=n(18117),i=n(21147),a=n(3190),o=n(90023),s=n(21684),l=n(84358),c=n(58303),d=n(41816),u=n(47311),p=n(94032),m=n(65810),h=n(57576),g=n(525),f=n(34837);const y=e=>t=>t.isCardsHeightValid&&(0,o.zG)(h.In.getActiveItem(t),l.wo((t=>!e.isScheduledToDispose(t)))),v=e=>t=>t.isCardsHeightValid&&(0,o.zG)(h.In.getActiveItem(t),l.wo((t=>!e.isScheduledToDispose(t))));function x({cardTop:e,cardHeight:t,viewportHeight:n,padding:r}){const i=f.L.FromViewportTop.ISO.unwrap(e),a=i+t;return t>n?i:i<0?t+r.before<n?i-r.before:i:a>n?t+r.after<n?a-n+r.after:a-n:i<r.before?t+r.after+r.before<n?i-r.before:t+r.after<n?i-r.after:r.before:n-a<r.after&&t+r.after<n?r.after-(n-a):0}const I=(e,t,n,r)=>({from:Math.max(0,d.aW.lowerBound(e,(e=>e.positionState.absTop+e.positionState.height<n))-r),to:Math.min(e.size,d.aW.lowerBound(e,(e=>e.positionState.absTop<n+t.height))+r)}),b=e=>t=>t.pipe(S(e),u.map(c.UI((e=>e.currentLens))),u.pairwise(),u.filter((([e,t])=>(0,o.zG)((0,o.bc)(e,t),(0,o.og)(l.vB(((e,t)=>e.id===t.id&&(0,o.zG)((0,o.bc)(h.In.getActiveItem(e),e.cardIndex,h.In.getActiveItem(t),t.cardIndex),(0,o.og)(r.gz(c.Kw)),c.UI((([e,t,n,r])=>e.id===n.id&&t!==r)),c.fS((()=>!1)))))),c.fS((()=>!1))))),u.map((0,o.ls)(a.Pd(c.tS(h.In.getActiveItem),c.tS(h.In.getActiveItem)),(0,o.og)(l.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),c.fS((()=>0))))),S=e=>t=>t.pipe(u.map(c.hX((({currentLens:t})=>v(e)(t))))),C=e=>(t,n,r,a,l)=>{const d=(e=>c.Eh(i.f7(((t,n)=>{const r=h.In.getActiveItem(t),i=h.In.getActiveItem(n);return c.Eh(e.visualStateEq).equals(r,i)&&t.items.size===n.items.size&&(0,s.Hx)(t.items.keys(),n.items.keys(),((e,t)=>e===t))}))))(e);return t.pipe(u.map(c.UI((e=>e.currentLens.id))),u.distinctUntilChanged(i.w4.equals),u.map(c.pC),u.switchMap(p.Ft(u.combineLatestStatic(n,r,a,S(e)(t).pipe(u.map(c.UI((e=>e.currentLens))),u.distinctUntilChanged(d.equals),u.switchMap(l))))),u.filter((([t,n,r,i])=>(0,o.zG)(i,c.Gg(v(e))))),u.map((([e,t,n])=>({viewport:e,scrollTop:t,paddingTop:n}))))},w=({cardsBeyondViewport:e,cardsAroundActive:t,changePosition:n})=>({viewport:r,scrollTop:i,paddingTop:a,completeTransition:s})=>d=>{const u=d.currentLens,p=((e,t,n,r)=>e.size<2||Math.floor(t.height/Math.min(l.MH(e.getAt(0)).positionState.height,l.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:I(e,t,n,r))(u.items,r,i-a,e);let f=!1;const y=u.items.map(((e,r,i)=>{const a=(0,o.ls)((l=n,d=e.positionState.watched||(e=>p.from<=e&&p.to>e||(0,o.zG)(u.cardIndex,c.Gg((n=>e>=n-t&&e<=n+t))))(i),e=>e.positionState.visible!==d?l.changePosition(m.s.PositionState.changeVisible(e.positionState,d))(e):e),(e=>t=>!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(m.s.PositionState.changeAnimationInProgress(t.positionState,!1))(t):t)(n),s)(e);var l,d;return a!==e?(f=!0,a):e}));return f?h.nL.Prism.getLens().compose(g.v.Prism.items).set(y,d):d}},84825:(e,t,n)=>{n.d(t,{o:()=>r});var r,i=n(84910),a=n(78520),o=n(65810),s=n(26352);!function(e){var t=s.u;e.Transition=t;var n=s.t;e.VisualState=n;e.eq={equals:(e,t)=>!r(e)||r(t)&&n.eq.equals(e.visualState,t.visualState)};function r(e){return"visualState"in e}e.isAnimatable=r;e.isFocused=e=>{switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}};var l=e.isInTransition=e=>e.visualState.incomplete;e.isRemoved=e=>"removed"===e.visualState.transition.type,e.isAnimatingAdded=e=>"added"===e.visualState.transition.type&&l(e),e.isAnimatingRemoval=e=>"removed"===e.visualState.transition.type&&l(e),e.isHidden=e=>"hidden"===e.visualState.transition.type;let c;!function(e){e.getPojoUpdates=()=>(0,a._)((0,i._)({},o.s.Capabilities.getPojoUpdates()),{setVisualState:e=>t=>(0,a._)((0,i._)({},t),{visualState:e})})}(c=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},65810:(e,t,n)=>{n.d(t,{s:()=>r});var r,i=n(84910),a=n(78520),o=n(21147),s=n(43640);!function(e){var t=s.Z;e.PositionState=t;e.eqById=o.f7(((e,t)=>e.id===t.id)),e.getEqById=()=>o.f7(((e,t)=>e.id===t.id)),e.positionStateEq={equals:(e,n)=>t.eq.equals(e.positionState,n.positionState)},e.verticalPositionEq={equals:(e,n)=>t.verticalEq.equals(e.positionState,n.positionState)};let n;!function(e){e.getPojoCloneable=()=>({clone:e=>(0,i._)({},e)}),e.getPojoUpdates=()=>({setPosition:e=>t=>(0,a._)((0,i._)({},t),{positionState:e})})}(n=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},88367:(e,t,n)=>{n.d(t,{j:()=>r});var r,i=n(84910),a=n(78520),o=n(95922),s=n(58303),l=n(64297),c=n(13391),d=n(84714);!function(e){let t;let n;!function(e){e.RegularLightMode="regularLightMode",e.ContrastLightMode="contrastLightMode"}(t=e.CardVisualMode||(e.CardVisualMode={})),(t=e.CardVisualMode||(e.CardVisualMode={})).match=({onRegular:e,onContrast:n})=>r=>{switch(r){case t.RegularLightMode:return e();case t.ContrastLightMode:return n();default:return(0,l.vE)(r)}},e.toJSON=function(e){return(0,a._)((0,i._)({},e),{isNew:e.isNew._value})},function(e){e.cozy="cozy",e.compact="compact",e.minimal="minimal"}(n=e.Density||(e.Density={}));e.defaultOptions={features:new Set,layoutDensity:n.cozy,isNew:d.of(s.YP),cardVisualMode:c.h.create(t.RegularLightMode)};let r;!function(e){function t(e,t,r){return i=>{switch(i){case n.cozy:return e();case n.compact:return t();case n.minimal:return r();default:return(0,l.vE)(i)}}}e.match=function(e,n,r){return t(o.of(e),o.of(n),o.of(r))},e.matchL=t,e.matchOrDefault=function(e){return(t,n)=>r=>r===e?t():n()}}(n=e.Density||(e.Density={})),function(e){e.showLabel="showLabel",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPremiumOnboarding="showPremiumOnboarding",e.a11yContrast="a11yContrast",e.showYellowFooterForTrialUsers="showYellowFooterForTrialUsers",e.sduiContainerStyle="sduiContainerStyle",e.showOnboardingTourA11yUpdates="showOnboardingTourA11yUpdates"}(r=e.Features||(e.Features={}))}(r||(r={}))},4483:(e,t,n)=>{n.d(t,{B:()=>r});var r,i=n(12518),a=n(58303);!function(e){var t=e.NAME_LENGTH_LIMIT=30,n=e.CONTENT_LENGTH_LIMIT=1e3;e.validate=(e,r,o)=>{const s=((e,n)=>0===e.trim().length?a.G(n.nameEmpty):e.length>t?a.G(n.nameTooLong):a.YP)(e,o),l=((e,t)=>0===e.trim().length?a.G(t.textEmpty):e.length>n?a.G(t.textTooLong):a.YP)(r,o);return a.Wi(s)&&a.Wi(l)?i.F2(void 0):i.t$({nameError:s,contentError:l})}}(r||(r={}))},99817:(e,t,n)=>{n.d(t,{v:()=>r});var r,i=n(84910),a=n(78520),o=n(18117),s=n(59833),l=n(12518),c=n(21147),d=n(24332),u=n(14944),p=n(61179),m=n(86399),h=n(90023),g=n(21684),f=n(64297),y=n(2844),v=n(31491),x=n(26308),I=n(58303),b=n(84358),S=n(88347),C=n(17690),w=n(5412),A=n(61230),E=n(91320),k=n(84825),_=n(65810),T=n(57576);!function(e){e.filterAlertInLens=(e,t)=>s.hX((n=>C.bZ.isNotRemoved(n)||I.pC(e.items.find((e=>t.hasAlert(n.id)(e)))))),e.findItemWithAlertInLens=(e,t)=>(0,h.ls)(I.DT(C.bZ.isNotRemoved),I.tS((n=>e.items.find((e=>t.hasAlert(n.id)(e)&&!t.isScheduledToDispose(e))))),I.UI((e=>e.value))),e.createWithInitialAlerts=(e,t,n,r,o)=>(s,l,c,d)=>{const u=(0,h.zG)(d,I.g_((()=>h.yR),(e=>o.selectItemByAlert(e)))),p=e.create(s,l),m=c.filter(n.alertVisibleInSidebar(s)),g=t(s);if(T.vj.hasItems(p)){const e=A.p.empty,t=A.p.from(m),n=A.p.diff(e,t);return(0,h.zG)(p,g(n,r),o.changeItemsVisualState(k.o.VisualState.initial({type:"rendered",clockwise:!0},!1)),u,(e=>(0,a._)((0,i._)({},e),{animation:T.wj.skip})))}return p},e.createWithExternalItems=(e,t)=>(n,r,o,s,l)=>{const c=e.create(n,r);return(0,h.zG)(l,I.hX((e=>T.vj.hasItems(e)&&T.vj.hasItems(c))),I.UI((e=>t.changeItemsVisualState(k.o.VisualState.initial({type:"rendered",clockwise:!0},!1))((0,a._)((0,i._)({},c),{items:e.items.filter((0,p.ff)(t.isScheduledToDispose))})))),I.fS((()=>c)))};let t,n,r;!function(e){e.setVisibleItems=e=>t=>(0,a._)((0,i._)({},t),{cardIndex:(0,h.zG)(T.In.getActiveItem(t),I.tS((t=>(0,h.zG)(e.get(t.id),I.UI((e=>e.index)))))),items:e});e.hideItem=function(e,t){return k.o.isAnimatable(e)&&"removed"!==e.visualState.transition.type&&"hidden"!==e.visualState.transition.type?t.transitionTo({type:"hidden",clockwise:!1})(e):e};var t=e.calculateCardsHeight=e=>(0,h.zG)(e.getAt(e.size-1),I.UI((e=>e.positionState.absTop+e.positionState.height)),I.fS((()=>0)));e.getItemsPositionsUpdateTransformer=e=>({state:t,metadata:n})=>{if(!T.nL.hasCards(t))return l.t$({state:t,metadata:n});const i=T.nL.Prism.getLens();return l.t$({state:i.modify(r(e),t),metadata:n})},e.getSingleItemFeedPositionsUpdateTransformer=e=>({state:t,metadata:n})=>{if(!T.nL.hasCards(t))return l.t$({state:t,metadata:n});const r=T.nL.Prism.getLens();return l.t$({state:r.modify((t=>{const n=t.items.map(((n,r,o)=>{const s=b.FX(o)(t.cardIndex)?{absTop:n.positionState.absTop,height:n.positionState.height,animationInProgress:t.animation(n,o),visible:!0,isHeightValid:!0,watched:!0,inert:n.positionState.inert}:(0,a._)((0,i._)({},n.positionState),{visible:!1,isHeightValid:!0});return _.s.PositionState.eq.equals(n.positionState,s)?n:e.changePosition(s)(n)}));return(0,a._)((0,i._)({},t),{items:n,isCardsHeightValid:!0})}),t),metadata:n})},e.getRemoveDisposedItemsTransformer=e=>({state:t,metadata:n})=>{if(!T.nL.hasCards(t))return l.t$({state:t,metadata:n});const r=T.nL.Prism.getLens();return l.t$({state:r.modify((t=>{const n=T.In.getActiveItem(t),r=t.items.filter((t=>!e.isScheduledToDispose(t)||(0,v.Kg)((0,p.ff)(k.o.isAnimatable),k.o.isAnimatingRemoval)(t)||(0,h.zG)(n,I.Gg((e=>e.id===t.id))))),o=(0,h.zG)(t,T.In.getActiveItemIndex(r));return(0,a._)((0,i._)({},t),{items:r,cardIndex:o})}),t),metadata:n})};const n=e=>t=>(0,h.zG)(t.items.find((e=>t=>n=>n.positionState.watched&&!e.isHidden(n)&&(0,h.zG)(t,b.wo((e=>e.id!==n.id))))(e)(T.In.getActiveItem(t))),I.UI((({value:t,index:n})=>({index:n,value:(0,h.zG)(t,I.DT((t=>t.positionState.isHeightValid&&!e.isScheduledToDispose(t))))}))));var r=e.updateItemsPositions=e=>r=>{const o=T.In.getActiveItem(r),s=n(e)(r),l=(0,h.zG)(s,I.tS((0,S.ei)("value")),I.UI((e=>e.positionState.height)));let c=0;const d=(0,h.zG)(o,b.wo((e=>e.positionState.isHeightValid))),u=(0,h.zG)(s,I.UI((0,S.ei)("index")),I.fS((()=>{return e=r.cardIndex,(0,h.zG)(e,I.UI((e=>0===e?1:0)),I.fS((()=>0)));var e}))),p=r.items.map(((t,n,i)=>{const a=b.FX(i)(r.cardIndex),o=a||i===u,s=e.isScheduledToDispose(t)||(a?t.positionState.isHeightValid:I.pC(l)),p=e.isScheduledToDispose(t)?e.useReferenceHeightOnRemove(t)?(0,h.zG)(l,I.fS((()=>t.positionState.height))):0:a?t.positionState.height:(0,h.zG)(l,I.fS((()=>t.positionState.height))),m={absTop:a||d?c:t.positionState.absTop,height:p,animationInProgress:r.animation(t,i),visible:t.positionState.visible,isHeightValid:s,watched:o,inert:t.positionState.inert};return e.shouldAnimatePositionChange(m,a)(t)||(m.animationInProgress=!1),c+=p,_.s.PositionState.eq.equals(t.positionState,m)?t:e.changePosition(m)(t)})),m=t(p),g=(0,h.zG)(o,b.wo((e=>e.positionState.isHeightValid)))&&(0,h.zG)(p.getAt(u),b.wo((e=>e.positionState.isHeightValid)));return(0,a._)((0,i._)({},r),{items:p,cardsHeight:m,isCardsHeightValid:g})}}(t=e.Items||(e.Items={})),function(e){e.apply=(e,t,n,r)=>i=>(0,h.zG)(e,x.vh.reduce(i,((e,{alert:t})=>r([t])(e)),((e,t,{alert:r})=>n([r])(e)),((e,{alert:n})=>t([n])(e)))),e.applyWithFilter=(e,t)=>(n,r,i,a)=>{const o=(0,h.ls)(s.uK(e),(e=>(0,h.ls)(a(e.left),i(e.right))));return t(n,(t=>r(t.filter(e))),o,a)}}(n=e.ApplyDiff||(e.ApplyDiff={})),function(e){e.items=y.Ue((e=>e.items),((e,n)=>t.setVisibleItems(e)(n))),e.getFeedItems=()=>y.Ue((e=>e.items),((e,n)=>t.setVisibleItems(e)(n)))}(r=e.Prism||(e.Prism={}));e.getEq=e=>c.f7(((t,n)=>{if(t.kind===T._L.abstract||n.kind===T._L.abstract)return t.id===n.id;{const r=t,i=n;return t.id===n.id&&I.Eh(e).equals(T.In.getActiveItem(r),T.In.getActiveItem(i))&&r.meta.equals(n.meta)&&r.items.equals(i.items)}})),e.lensHash={hashCode:e=>{if(e.kind===T._L.abstract)return(0,E.AC)(e.id);{const n=e;let r=7;return r=31*r+(0,E.AC)(e.id),r=31*r+(t=T.In.getActiveItem(n),(0,h.zG)(t,I.g_((()=>2433880),(e=>null==e?9735524:e.hashCode()<<2)))),31*r+e.meta.count}var t}};let M;!function(e){e.getAlertReleaser=e=>({release:t=>n=>{const r=n.items.map(e.removeAlertFromItem([t],n)),o=(0,h.zG)(n.cardIndex,I.tS((t=>(0,h.zG)(r.findRightFrom(e.isScheduledToDispose,t),I.UI((e=>e.index))))),I.pC)?T.wj.skip:T.wj.force;return(0,a._)((0,i._)({},n),{animation:o,items:r})}}),e.getUnselectable=(e,t)=>({unselectItem:()=>n=>{const r=(0,h.zG)(n,e,I.hX((0,p.ff)(t.isScheduledToDispose)),I.UI((e=>n.items.add((0,h.zG)(e,t.unselect(I.YP,n.itemsOrd))))),I.fS((()=>n.items)));return(0,a._)((0,i._)({},n),{items:r,animation:T.wj.force,cardIndex:I.YP})}}),e.getHasChecksFeed=()=>({willShowChecksFeed:e=>e.type!==T.Nm.advanced});const t=e=>(0,h.zG)(u.Mh,u.Uz((t=>(0,h.zG)(e.items.get(t.id),I.UI((0,S.ei)("index")),I.fS((()=>-1))))));e.getSelectableByAlert=(e,n)=>({selectItemByAlert:r=>o=>{if(!n.willShowChecksFeed(o))return o;const s=e(o),l=o.items.find(n.isSelectableByAlert(r));(0,f.kG)(I.pC(l),"Can not find card for provided alert. Unknown card or it is already disposed.",(()=>r.alert.toString()));const{value:c,index:m}=b.MH(l),g=(0,d.ur)(u.iP())([o.itemsOrd,t(o)]),y=(0,h.zG)(s,I.hX((0,p.ff)(n.isScheduledToDispose)),I.UI((e=>o.items.add((0,h.zG)(e,n.unselect(I.G(c),o.itemsOrd))))),I.fS((()=>o.items))).add((0,h.zG)(c,n.selectByAlert(s,r,g)));return(0,a._)((0,i._)({},o),{items:y,animation:T.wj.force,cardIndex:I.G(m)})}}),e.getSelectableById=(e,n)=>({selectItemById:r=>o=>{const s=e(o),l=o.items.get(r),{value:c,index:m}=b.MH(l),g=(0,d.ur)(u.iP())([o.itemsOrd,t(o)]),f=(0,h.zG)(s,I.hX((0,p.ff)(n.isScheduledToDispose)),I.UI((e=>o.items.add((0,h.zG)(e,n.unselect(I.G(c),g))))),I.fS((()=>o.items))).add((0,h.zG)(c,n.select(s,g)));return(0,a._)((0,i._)({},o),{items:f,animation:T.wj.force,cardIndex:I.G(m)})}}),e.getItemReleaser=()=>({removeItemById:e=>t=>r(t.items.remove(e))(t)});function n(e,t,n){return r=>(0,h.zG)(I.of(r),I.hX((e=>!n.isScheduledToDispose(e)&&t(e))),I.tS(n.hasActiveAlert),I.hX((t=>e.isRegistered(t.alert.id))))}e.getMetaUpdatable=function(){return{updateMeta:e=>t=>(0,a._)((0,i._)({},t),{meta:w.R.WithAlerts.setMeta(e)(t.meta)})}},e.getAnimatable=function(e,t){return{changeItemsVisualState:e=>n=>t.willShowChecksFeed(n)?(0,a._)((0,i._)({},n),{items:n.items.map(t.changeVisualState(e))}):n,finishApplyAnimation:n=>r=>{(0,f.kG)(n.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");const o=r.id,s=e=>{const r=e.items.map(t.removeAlertFromItem(n,e));return(0,a._)((0,i._)({},e),{items:r})};if(w.R.isOutcomeId(o))return s(r);switch(o){case w.R.SpecialId.AllAlerts:case w.R.SpecialId.PredictionTakeaways:case w.R.SpecialId.PredictionEmogenie:case w.R.SpecialId.RealTimeProofit:case w.R.SpecialId.FreePremiumAlerts:return s(r);case w.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case w.R.SpecialId.Plagiarism:return(0,f.kG)(n.every(C.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),s(r);default:return(0,f.vE)(o)}}}},e.getVerifiable=function(e){return{shouldVerify:t=>(0,h.zG)(T.In.getActiveItem(t),I.Gg((t=>e.isScheduledToDispose(t))))||I.Wi(t.items.find((t=>!e.isScheduledToDispose(t))))}},e.getHasSelectableAlert=n,e.getHasAlerts=function(e,t,r,i){const a=e=>n(t,r(e),i),s=e=>e.id===w.R.SpecialId.Premium||e.id===w.R.SpecialId.Plagiarism?e.meta.count:(0,h.zG)(T.In.getActiveItem(e),I.tS(i.hasActiveAlert),I.UI((e=>e.alert)),I.Gg(C.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count;return{getVisibleAlertsCount:s,getActiveAlertsCount:s,getActiveAlert:e=>(0,h.zG)(T.In.getActiveItem(e),I.tS(i.hasActiveAlert)),findFirstAlert:e=>(0,h.zG)(e.items.values(),m.f2(a(e))),findNextAlert:t=>((0,f.kG)(I.pC(T.In.getActiveItem(t))===I.pC(t.cardIndex),"Lens is in wrong state: cardIndex must reference existing card"),(0,h.zG)((0,o.gz)(I.Kw)(T.In.getActiveItem(t),t.cardIndex),I.tS((([n,r])=>(0,h.zG)(e.nextAlert(n),I.wp((()=>e.prevAlert(n))),I.UI((e=>({alert:e,highlightIndex:0}))),I.wp((()=>(0,h.zG)((0,g.uU)(t.items.values(),r,a(t)),I.UI((e=>e.value)))))))),b.vx((0,h.zG)(t.items.values(),m.f2(a(t))))))}};var r=e.setVisibleItems=e=>t=>(0,a._)((0,i._)({},t),{cardIndex:(0,h.zG)(T.In.getActiveItem(t),I.tS((t=>(0,h.zG)(e.get(t.id),I.UI((e=>e.index)))))),items:e})}(M=e.Capabilities||(e.Capabilities={}))}(r||(r={}))},525:(e,t,n)=>{n.d(t,{v:()=>D});var r,i,a=n(99817),o=n(90023),s=n(5412),l=n(91320),c=n(57576);(r||(r={})).create=()=>({id:s.R.SpecialId.Cheetah,type:c.Nm.cheetah,kind:c._L.abstract,meta:s.R.createStaticLens({id:s.R.SpecialId.Cheetah,title:"Grammarly Ideate"},s.R.Meta.group.empty,o.jv),hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}}),function(e){let t;e.create=function(e,n){return Boolean(t)||(t={id:s.R.SpecialId.Closed,kind:c._L.abstract,type:c.Nm.closed,meta:s.R.createStaticLens({id:s.R.SpecialId.Closed,title:"Closed"},s.R.Meta.group.empty,e),hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(n).equals(this,e)}}),t}}(i||(i={}));var d,u,p,m=n(84910),h=n(78520),g=n(58303);u=d||(d={}),p=u.create=()=>({id:s.R.SpecialId.DraftAI,type:c.Nm.draftAI,kind:c._L.abstract,meta:s.R.createStaticLens({id:s.R.SpecialId.DraftAI,title:"Draft AI"},s.R.Meta.group.empty,o.jv),transitionSource:g.YP,hashCode(){return(0,l.AC)(this.id)},equals(e){return this.id===e.id}}),u.createFromTransitionSource=e=>(0,h._)((0,m._)({},p()),{transitionSource:g.G(e)});var f,y,v=n(12518),x=n(61179),I=n(9615),b=n(21684),S=n(64297),C=n(84358),w=n(17690),A=n(41816),E=n(80388);!function(e){function t(e){return A.vM("cardId",e)}e.create=function(e,t,n){(0,S.kG)(e.id===s.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",e.id);const r=A.aW.empty((e=>e.id),n.compare),i=g.YP;return{id:s.R.SpecialId.Plagiarism,kind:c._L.persistent,type:c.Nm.plagiarism,meta:e,cardIndex:i,items:r,itemsOrd:n,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.updateCardsWithLensMeta=function(e){return t=>t.id===s.R.SpecialId.Plagiarism?(0,h._)((0,m._)({},t),{items:t.items.map((t=>E.$.isPlagiarism(t.activeAlert)?e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(E.$.isPlagiarism)):t))}):t};var n=e.add=e=>n=>r=>{const i=t(n),a=Array.from(i.entries()).reduce(((t,[n,r])=>(0,o.zG)(t.update(n,(t=>e.addPlagiarismAlerts(t,r))),v.g_((()=>t.add(e.createAdded(n,r))),o.yR))),r.items),s=(0,o.zG)(c.In.getActiveItem(r),g.UI((({id:e})=>C.MH(a.get(e)).index))),l=g.Eh(I.Eq).equals(s,r.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,m._)({},r),{cardIndex:s,items:a,animation:l})},r=e.remove=e=>n=>r=>{const i=t(n),a=c.In.getActiveItem(r),s=Array.from(i.entries()).reduce(((t,[n,i])=>(0,o.zG)(t.update(n,(t=>{const n=(0,o.zG)(e.remove(t,i,(0,o.zG)(a,g.UI((e=>r.itemsOrd.compare(t,e)>0)),g.fS(o.W8))),(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(E.$.isPlagiarism))));return(0,o.zG)(a,g.Gg((e=>e.id===n.id)))?e.selectNextAlert(n,r.itemsOrd):n})),v.g_((()=>t),o.yR))),r.items);return(0,h._)((0,m._)({},r),{items:s,animation:c.wj.force})},i=e.update=e=>t=>n=>l(e)(t.filter((0,x.ff)(e.shouldAnimateAlertApply)))(n),l=e.updateWithAlerts=e=>n=>i=>{const[a,s]=(0,b.uK)(n,w.bZ.isRegistered),l=t(a),d=Array.from(l.entries()).reduce(((t,[n,r])=>(0,o.zG)(t.update(n,(t=>e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(E.$.isPlagiarism)))),v.g_((()=>t.add(e.createAdded(n,r))),o.yR))),r(e)(s)(i).items),u=(0,o.zG)(c.In.getActiveItem(i),g.UI((({id:e})=>(0,o.zG)(d.get(e),g.UI((({index:e})=>e)),g.fS((()=>0))))));return(0,h._)((0,m._)({},i),{cardIndex:u,items:d,animation:c.wj.proceed})};e.getAlertsHandler=function(e){return t=>a.v.ApplyDiff.apply(t,n(e),i(e),r(e))}}(f||(f={})),function(e){e.create=function(e,t,n){const r=A.aW.empty((e=>e.id),n.compare);return{id:s.R.SpecialId.Premium,kind:c._L.active,type:c.Nm.advanced,meta:e,items:r,itemsOrd:n,cardIndex:g.YP,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(t).equals(this,e)}}},e.getAlertsHandler=function(e,i){return o=>a.v.ApplyDiff.apply(o,t(e),r(e,i),n(i))};var t=e.add=e=>t=>n=>{const r=t.map(e.createFromAlert(n.id)),i=n.items.add(r),a=c.In.getActiveItemIndex(i)(n);return(0,h._)((0,m._)({},n),{cardIndex:a,items:i,animation:c.wj.proceed})},n=e.remove=e=>t=>n=>{const r=new Set(t.map((e=>e.id))),i=n.items.filter((0,o.ls)(e.hasActiveAlert,g.UI((e=>e.alert)),g.Gg((e=>r.has(e.id))))).reduce(((e,t)=>e.remove(t.id)),n.items),a=c.In.getActiveItemIndex(i)(n);return(0,h._)((0,m._)({},n),{cardIndex:a,items:i})},r=e.update=(e,r)=>i=>a=>{const[s,l]=(0,b.uK)(i,w.bZ.isRegistered);return(0,o.zG)(a,n(r)(l),t(e)(s))}}(y||(y={}));var k,_=n(18117),T=n(59833),M=n(31491),G=n(17560);!function(e){const t=w.h$.ord;function n(e){return e.id}function r(e){const t=e.map((e=>[G.R.getAlertOutcomeBundle(e),e]));return A.vM((([e,t])=>n(e)),t)}e.getCardId=n,e.initCardsHash=function(e,n,i,a,s){(0,S.kG)((0,o.zG)(i,C.wo((({alertIndex:e})=>void 0!==n[e]))),"Can not find alert for provided alertIndex");const l=r(n),c=(0,o.zG)(i,g.UI((({alertIndex:e})=>((0,S.kG)(void 0!==n[e],"Can not find alert for provided alertIndex"),n[e]))));let d=g.YP;const u=A.aW.empty(G.R.getId,s.compare),p=Array.from(l.entries()).reduce(((n,[r,i])=>{const s=i.map((([e,t])=>t)),l=i[0][0];return(0,o.zG)(c,g.UI((e=>s.indexOf(e))),g.hX((e=>e>-1)),g.g_((()=>n.add(a.createRendered(e)(r,l,s,t))),(i=>{const o=a.createFocused(e)(r,l,s,i,t);return d=g.G(r),n.add(o)})))}),u),m=(0,o.zG)(d,g.tS((e=>(0,o.zG)(p.get(e),g.UI((e=>e.index))))));return{cardIndex:m,cards:p}},e.create=function(e,t,n,r){const i=A.aW.empty(G.R.getId,r.compare),o=g.YP;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,meta:t,cardIndex:o,items:i,itemsOrd:r,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(n).equals(this,e)}}};var i=e.add=(e,n)=>i=>a=>{if(0===i.length)return a;const s=r(i),l=Array.from(s.entries()).reduce(((r,[i,s])=>{const l=s.map((([e,t])=>t)),c=s[0][0];return(0,o.zG)(r.update(i,(e=>n.updateWithAlerts(l)(e))),v.g_((()=>r.add(e.createAdded(a.id)(i,c,l,t))),o.yR))}),a.items),d=(0,o.zG)(a,c.In.getActiveItemIndex(l)),u=g.Eh(I.Eq).equals(d,a.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,m._)({},a),{cardIndex:d,items:l,animation:u})},s=e.remove=e=>t=>n=>{const i=r(t),a=Array.from(i.entries()).reduce(((t,[r,i])=>(0,o.zG)(t.update(r,(t=>e.removeAlertFromItem(i.map((([e,t])=>t)),n)(t))),v.g_((()=>t),o.yR))),n.items),s=(0,o.zG)(n,c.In.getActiveItemIndex(a));return(0,h._)((0,m._)({},n),{cardIndex:s,items:a,animation:c.wj.force})},l=e.update=(e,t,n)=>r=>i=>d(e,n)(r.filter((0,M.ff)(t.shouldAnimateAlertApply)))(i),d=e.updateWithAlerts=(e,n)=>i=>l=>{if(0===i.length)return l;const{left:d,right:u}=(0,o.zG)(i,a.v.filterAlertInLens(l,n),T.uK(w.bZ.isRegistered)),p=r(u),g=Array.from(p.entries()).reduce(((r,[i,a])=>{const s=a.map((([e,t])=>t)),c=a[0][0];return(0,o.zG)(r.update(i,(e=>n.updateWithAlerts(s)(e))),v.g_((()=>r.add(e.createAdded(l.id)(i,c,s,t))),o.yR))}),s(n)(d)(l).items),f=(0,o.zG)(l,c.In.getActiveItemIndex(g));return(0,h._)((0,m._)({},l),{cardIndex:f,items:g,animation:c.wj.proceed})};e.getAlertsHandler=function(e,t,n){return(r,c)=>d=>{const u=a.v.ApplyDiff.applyWithFilter(c,a.v.ApplyDiff.apply);return(0,o.zG)(d,u(r,i(e,n),l(e,t,n),s(n)))}},e.getHasAlerts=function(e,t,n,r){const i=a.v.Capabilities.getHasAlerts(e,t,n,r),s=e=>a.v.Capabilities.getHasSelectableAlert(t,n(e),r);return(0,h._)((0,m._)({},i),{findNextAlert:t=>(0,o.zG)((0,_.gz)(g.Kw)(c.In.getActiveItem(t),t.cardIndex),g.tS((([n,r])=>(0,o.zG)(e.nextAlert(n),g.wp((()=>e.prevAlert(n))),g.wp((()=>(0,o.zG)((0,b.Bs)(t.items.values(),r+1,s(t)),g.wp((()=>(0,b.Bs)(t.items.values(),0,s(t)))),g.tS((e=>(0,o.zG)(t.items.getAt(e.index),g.UI((e=>e.alerts[0]))))))))))),g.UI((e=>({alert:e,highlightIndex:0}))))})}}(k||(k={}));var L,D,N=n(21147),z=n(21961);!function(e){let t;function n(e,t){return`${e.id}_${t.id}`}e.isInSuccess=function(e,t=o.W8){return n=>0===n.meta.count&&(0===n.items.filter(t).size||g.Wi(n.items.filter(t).find((t=>!e.isScheduledToDispose(t)))))},function(e){function t(e){return t=>c.nL.hasSuccess(t)&&c.nL.hasItems(t)&&L.isInSuccess(e)(t.currentLens)}e.isInSuccess=t;e.isInGlobalSuccess=e=>n=>c.nL.is(s.R.SpecialId.AllAlerts)(n)&&t(e)(n)}(t=e.State||(e.State={})),e.getCardId=n,e.create=function(e,t,n,r){const i=A.aW.empty(z.X.getId,r.compare),o=g.YP;return{id:e,type:c.Nm.lensview,kind:c._L.persistent,meta:t,cardIndex:o,items:i,itemsOrd:r,animation:c.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode(){return a.v.lensHash.hashCode(this)},equals(e){return a.v.getEq(n).equals(this,e)}}};var r=e.add=(e,t,r)=>i=>o=>{const s=i.map((i=>{const s=t.createAdded(o.id)(n(o.meta,i),i);return e(o,i)?s:a.v.Items.hideItem(s,r)})),l=o.items.add(s),d=c.In.getActiveItemIndex(l)(o),u=g.Eh(N.lr).equals(d,o.cardIndex)?c.wj.force:c.wj.skip;return(0,h._)((0,m._)({},o),{cardIndex:d,items:l,animation:u})},i=e.remove=e=>t=>n=>{const r=new Set(t.map((e=>e.id))),i=n.items.map(e.remove((0,o.ls)(e.hasActiveAlert,g.UI((e=>e.alert)),g.g_(o.jv,(e=>r.has(e.id)))),(e=>(0,o.zG)(c.In.getActiveItem(n),g.UI((t=>n.itemsOrd.compare(e,t)>0)),g.fS(o.W8))))),a=(0,o.zG)(n.cardIndex,g.tS((t=>(0,o.zG)(i.findRightFrom((t=>e.isScheduledToDispose(t)),t),g.UI((e=>e.index))))),g.pC)?c.wj.skip:c.wj.force,s=(0,o.zG)(n,c.In.getActiveItemIndex(i));return(0,h._)((0,m._)({},n),{cardIndex:s,items:i,animation:a})},l=e.update=(e,t,n)=>r=>i=>d(t,e,n)(r.filter((0,M.ff)(t.shouldAnimateAlertApply)))(i),d=e.updateWithAlerts=(e,t,r)=>i=>s=>{if(0===i.length)return s;const l=(0,o.zG)(i,a.v.filterAlertInLens(s,r),T.UI((e=>[n(s.meta,e),e])),T.u4(s.items,((n,[i,l])=>(0,o.zG)(n.update(i,r.updateWithAlerts([l])),v.g_((()=>{const o=e.createAdded(s.id)(i,l);return n.add(t(s,l)?o:a.v.Items.hideItem(o,r))}),o.yR))))),d=c.In.getActiveItemIndex(l)(s);return(0,h._)((0,m._)({},s),{cardIndex:d,items:l,animation:c.wj.proceed})};e.getAlertHandler=function(e,t,n=o.W8){return(s,c)=>{const d=a.v.ApplyDiff.applyWithFilter(c,a.v.ApplyDiff.apply);return a=>(0,o.zG)(a,d(s,r(n,e,t),l(n,e,t),i(t)))}}}(L||(L={})),function(e){var t=a.v.Prism;e.Prism=t;var n=a.v.Items;e.Items=n;var o=a.v.Capabilities;e.Capabilities=o;var s=a.v.ApplyDiff;e.ApplyDiff=s;e.filterAlertInLens=a.v.filterAlertInLens,e.findItemWithAlertInLens=a.v.findItemWithAlertInLens,e.lensHash=a.v.lensHash,e.getEq=a.v.getEq;var l=i;e.Closed=l;var c=d;e.DraftAI=c;var u=f;e.Plagiarism=u;var p=y;e.Premium=p;var m=k;e.WithBundles=m;var h=L;e.WithSuccess=h;var g=r;e.Cheetah=g}(D||(D={}))},73926:(e,t,n)=>{n.d(t,{l:()=>b});var r=n(32490),i=n(95295),a=n(12518),o=n(21147),s=n(95922),l=n(58303),c=n(90023),d=n(9141),u=n(64297),p=n(31491),m=n(72111),h=n(5412),g=n(47311),f=n(94032),y=n(80388),v=n(84825),x=n(57576),I=n(54632);class b{dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}_effectToApplicator(e){switch(e.type){case x.nL.Effect.Type.Applicator:case x.nL.Effect.Type.ItemsApplicator:return e.source;case x.nL.Effect.Type.SwitchLens:return e.source.pipe(g.tap((e=>this._switchLensActions.next(e))),g.switchMapTo(g.NEVER));case x.nL.Effect.Type.SwitchAlert:return e.source.pipe(g.tap((e=>this._switchAlertActions.next(e))),g.switchMapTo(g.NEVER));default:return(0,u.vE)(e)}}_checkState(e){try{if(x.nL.hasCards(e)){const t=e.currentLens.items.filter((0,p.W9)(v.o.isAnimatable,v.o.isFocused));(0,u.kG)(t.size<=1,"cannot have more than one focused card",(()=>JSON.stringify(t)))}}catch(e){return a.t$(e)}return a.F2(void 0)}constructor(e,t,n,u,p,v,b){(0,r._)(this,"_state",void 0),(0,r._)(this,"_stateProvider",void 0),(0,r._)(this,"_alertsReader",void 0),(0,r._)(this,"_alertsService",void 0),(0,r._)(this,"_stateSideEffects",void 0),(0,r._)(this,"_getActiveAlert",void 0),(0,r._)(this,"_stateTransformer",void 0),(0,r._)(this,"focusLens",void 0),(0,r._)(this,"focusAlert",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"_ts",void 0),(0,r._)(this,"_switchLensActions",void 0),(0,r._)(this,"_switchAlertActions",void 0),(0,r._)(this,"_addMetadata",void 0),(0,r._)(this,"_focusLensEffect",void 0),(0,r._)(this,"_focusAlertEffect",void 0),(0,r._)(this,"_subs",void 0),(0,r._)(this,"_effects",void 0),this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=u,this._stateSideEffects=p,this._getActiveAlert=v,this._stateTransformer=b,this.focusLens=(e,t,n={toFocus:x.Zz.defaultOptions.focusBehavior})=>{this._log.debug("focusLens "+e),this._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=(e,t,n)=>{this._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=m.C8.Logging.getLogger("FocusedLensManagerImpl"),this._ts=m.C8.TimeSeries.rootFemetrics.getMetric("lens_state.manager"),this._switchLensActions=new g.Subject,this._switchAlertActions=new g.Subject,this._addMetadata=e=>t=>t.pipe(g.map((t=>({source:t,metadata:e})))),this._focusLensEffect=({lensId:e,alertSource:t,options:{toFocus:n=x.Zz.defaultOptions.focusBehavior,order:r}})=>{if(this._log.debug("_focusLensEffect ",{alertSource:t,lensId:e}),h.R.isClosedId(e))return(0,c.zG)(g.of(x.nL.Effect.Applicator.Source.override((0,I.T)())),this._addMetadata({sourceId:"LSM.focusLensEffect"}));if(h.R.isDraftAIId(e)||h.R.isCheetah(e)){const t=h.R.isCheetah(e)?(0,I.yC)():(0,I.zc)();return(0,c.zG)(g.of(x.nL.Effect.Applicator.Source.override(t)),this._addMetadata({sourceId:"LSM.focusLensEffect"}))}const i=this._state.get(),a=i.patch({switchOrder:Boolean(r)?r:i.switchOrder,alertSource:t});return(0,c.zG)(this._stateProvider.getLensEventsByLensId(a,e,{focusBehavior:n}),this._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=({alertHighlight:e,alertSource:t,options:n})=>{this._log.isEnabled(m.zW.i.TRACE)&&this._log.trace(`focusAlert(${e.alert})`);const r=this._state.get(),i=r.patch({switchOrder:Boolean(n.order)?n.order:r.switchOrder,alertSource:t});return(0,c.zG)(this._stateProvider.getLensEventsByAlert(i,function(e,t,n){if(e===h.R.SpecialId.PredictionTakeaways||e===h.R.SpecialId.PredictionEmogenie||e===h.R.SpecialId.RealTimeProofit||e===h.R.SpecialId.FreePremiumAlerts)return e;if(void 0!==n)return n;if(e===h.R.SpecialId.Closed||e===h.R.SpecialId.AllAlerts)return h.R.SpecialId.AllAlerts;return t}(r.currentLens.id,e.alert.lensId,n.lensId),e),this._addMetadata({sourceId:"LSM.focusAlertEffect"}))};const S=this._state.get(),C=this._stateTransformer,w=new g.BehaviorSubject(S);this._effects=g.mergeStatic(...this._stateSideEffects.map((({when:e,what:t,id:n})=>this._state.view("currentLens","id").view(e).pipe(g.switchMap(f.Ft((0,c.zG)(this._effectToApplicator(t),this._addMetadata({sourceId:n}))))))),g.mergeStatic(this._switchAlertActions.pipe(g.map(this._focusAlertEffect)),this._switchLensActions.pipe(g.map(this._focusLensEffect))).pipe(g.switchAll()));const A=this._ts.getTimer("batched.long_state_change"),E=o.MW({activeAlert:l.Eh(y.$.eq),lensId:d.Eq});this._subs=[this._effects.pipe(g.catchError(((e,t)=>(this._log.error("Got error from effects: ",e),t))),g.withLatestFrom(w,(({source:e,metadata:t},n)=>({state:e(n),metadata:t}))),g.catchError(((e,t)=>(this._log.error("Got error while applying new state: ",e),t))),g.tap((e=>{this._log.isEnabled(m.zW.i.TRACE)&&this._log.trace("lens state before state transformer: ",e)})),g.map(C),g.catchError(((e,t)=>(this._log.error("Got error while transforming state: ",e),t)))).subscribe((e=>(0,c.zG)(e,a.g_((({state:e,metadata:t})=>{this._log.isEnabled(m.zW.i.TRACE)&&this._log.trace(`lens state from: ${t.sourceId}`,e),(0,c.zG)(this._checkState(e),a.g_((t=>this._log.error("incorrect state transition detected",{error:t,state:e})),(()=>w.next(e))))}),a.g_((e=>this._switchAlertActions.next(e)),(e=>this._switchLensActions.next(e))))))),(0,c.zG)(w,g.map((e=>({activeAlert:x.nL.getActiveAlert(this._getActiveAlert)(e),lensId:e.currentLens.id}))),g.tap((e=>this._log.trace("active alert: ",e.activeAlert))),g.distinctUntilChanged(E.equals),g.switchMap((({activeAlert:e,lensId:t})=>(0,c.zG)(e,f.aI((e=>(0,c.zG)(this._alertsService.takeReference(e,`activeCard_${t}`),a.Vn((e=>this._log.error("can not take alertRef",e))),a.g_(s.of(c.Q1),(e=>e.dispose))))))))).subscribe(),w.subscribe((e=>{const t=performance.now();i.unstable_batchedUpdates((()=>{this._state.set(e)}));const n=performance.now()-t;n>16&&A.recordTime(n)}))],x.nL.hasCards(S)&&(0,c.zG)(x.nL.getActiveAlertHighlight(this._getActiveAlert)(S),l.hX((e=>this._alertsReader.isRegistered(e.alert.id))),l.g_((()=>this._switchLensActions.next({lensId:S.currentLens.id,alertSource:S.alertSource,options:{order:S.switchOrder,toFocus:x.nL.Effect.FocusBehavior.noFocus}})),(e=>this._switchAlertActions.next({alertHighlight:e,alertSource:S.alertSource,options:{lensId:S.currentLens.id,order:S.switchOrder}}))))}}(0,r._)(b,"toLensAlert",(({alert:e,highlightIndex:t})=>({alert:e,highlightIndex:t,lensId:e.lensId})))},54632:(e,t,n)=>{n.d(t,{T:()=>b,oq:()=>w,yC:()=>C,zc:()=>S});var r=n(32490),i=n(21147),a=n(61179),o=n(90023),s=n(64297),l=n(31491),c=n(26308),d=n(72111),u=n(58303),p=n(84358),m=n(17690),h=n(5412),g=n(61230),f=n(60908),y=n(47311),v=n(57576),x=n(525);const I=(0,a.ff)(m.bZ.isMuted),b=()=>v.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:x.v.Closed.create(o.jv,i.f7(o.jv))}),S=()=>v.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:x.v.DraftAI.create()}),C=()=>v.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:x.v.Cheetah.create()});class w{static _mapByActiveLensId(e,t,n,r){if(h.R.isOutcomeId(e))return r();switch(e){case h.R.SpecialId.Plagiarism:return t();case h.R.SpecialId.Premium:return n();case h.R.SpecialId.AllAlerts:case h.R.SpecialId.PredictionTakeaways:case h.R.SpecialId.PredictionEmogenie:case h.R.SpecialId.RealTimeProofit:case h.R.SpecialId.FreePremiumAlerts:return r();default:return(0,s.vE)(e)}}_conditionedApplicator(e,t){return n=>r=>e(r,n)?t(n)(r):r}static _filterALEvents(e,t){return n=>y.of((0,o.zG)(n,g.p.Diff.filter((t=>e(t.alert))),(e=>(t.isEnabled(d.zW.i.TRACE)&&t.trace("diff after filter",e),e)))).pipe(y.filter((0,a.ff)(c.vh.isEmpty)))}emptyState(e=h.R.SpecialId.AllAlerts){return v.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:u.YP,previousState:u.YP,alertSource:m.l$.api}),alertSource:m.l$.api,switchOrder:"lensOrder"})}getLensEventsByLensId(e,t,n={}){const r=this._getActiveLensMeta(t),i=this._lensAlerts(r),a=this._createState(e,u.YP,r,t,i),s=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,a):u.YP;e.currentLens.id===t&&v.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==i.length&&this._log.warn("Lens contains inconsistent number of alerts",r.id);const l=v.nL.hasItems(a)?(0,o.zG)(s,u.g_((()=>a),(n=>this._createState(e,u.G(n),r,t,i)))):a;return this._generateEventsFromState(l,this._alertsHandlerFactory(t))}getLensEventsByAlert(e,t,n){(0,s.kG)(u.pC(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);const r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&v.nL.hasItems(e)?v.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(n),e):this._createState(e,u.G(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))}findNextAlertInTextByLens(e,t){return this._alertSearchService.findNextAlertInText(e,(0,l.W9)(this._alertsFilterService.alertVisibleInText(t.id),(t=>t.id!==e.alert.id),(0,o.ls)(x.v.findItemWithAlertInLens(t,this._capabilities),u.pC)))}findPremiumAlert(){return this._lensPreviewVM.getLens(h.R.SpecialId.Premium).get().count>0?this._alertSearchService.findPremiumAlert():u.YP}hasZeroFreeAlerts(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount}_getMetaChangesObservable(e){return v.nL.hasItems(e)&&e.currentLens.kind===v._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):v.nL.hasItems(e)&&e.currentLens.type===v.Nm.lensview?this._lenses.pipe(y.distinctUntilChanged(f.w.eq.equals),y.map((0,o.ls)(f.w.lookup(e.currentLens.id),u.UI(this._updateMetaSource(e.currentLens.id)),u.fS((()=>v.nL.Effect.Applicator.Source.identity))))):v.nL.Effect.Applicator.Source.empty}_generateEventsFromState(e,t){return y.mergeStatic(this._checkingState.pipe(y.pairwise(),y.map((([e,t])=>g.p.diff(e,t))),y.tap((e=>{this._log.isEnabled(d.zW.i.TRACE)&&this._log.trace("new alerts diff",e)})),y.switchMap(w._filterALEvents(e.currentLens.meta.filter,this._log)),y.map(this._conditionedApplicator(((e,t)=>{const n=this._alertsFilterService.getLensesFilter(e.currentLens.id),r=(0,o.zG)(t,g.p.Diff.filter((0,a.ff)((({alert:e})=>n(e)))));return c.vh.isEmpty(r)}),this._transformAlertsDiffToApplicator(t)))),this._getMetaChangesObservable(e)).pipe(y.startWith(v.nL.Effect.Applicator.Source.override(e)))}_getActiveLensMeta(e){const t=w._mapByActiveLensId(e,(()=>this._lensPreviewVM.getLens(h.R.SpecialId.Plagiarism).get()),(()=>this._lensPreviewVM.getLens(h.R.SpecialId.Premium).get()),(()=>this._lensPreviewVM.getLens(e).get()));return(0,s.kG)(void 0!==t,`unknown lensId:${e}`),t}_createState(e,t,n,r,i){(0,s.kG)(p.wo((({alert:e})=>u.pC(this._alertsReader.getInteractable(e.id))))(t),"we can create state only with alert in registered state",(()=>(0,o.zG)(t,u.g_((()=>"null"),(e=>e.toString())))));const a=e.alertSource,l=e.switchOrder,c=this._createLens({lensId:r,initialLens:n,visibleAlerts:i,alertHighlight:t,alertSource:a,previousState:u.G(e.currentLens)});return v.nL.create({currentLens:c,alertSource:a,switchOrder:l})}_createLens(e){return this._lensFactory(e.lensId,e.initialLens,e.visibleAlerts,this._focusFirstFilter(e),e.previousState)}_getAlertToFocus(e,t){switch(e.kind){case v.nL.Effect.FocusBehaviorType.noFocus:case v.nL.Effect.FocusBehaviorType.unFocus:return u.YP;case v.nL.Effect.FocusBehaviorType.focusFirst:return v.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):u.YP;case v.nL.Effect.FocusBehaviorType.focusNext:return v.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):u.YP;case v.nL.Effect.FocusBehaviorType.focusAlert:return u.G(e.alertHighlight);default:(0,s.vE)(e)}}constructor(e,t,n,i,a,s,l,c,u,p=v.nL.FocusFirstFilter.defaultFilter){(0,r._)(this,"_checkingState",void 0),(0,r._)(this,"_alertsReader",void 0),(0,r._)(this,"_lenses",void 0),(0,r._)(this,"_alertSearchService",void 0),(0,r._)(this,"_lensPreviewVM",void 0),(0,r._)(this,"_lensFactory",void 0),(0,r._)(this,"_alertsHandlerFactory",void 0),(0,r._)(this,"_capabilities",void 0),(0,r._)(this,"_alertsFilterService",void 0),(0,r._)(this,"_focusFirstFilter",void 0),(0,r._)(this,"_transformAlertsDiffToApplicator",void 0),(0,r._)(this,"_log",void 0),(0,r._)(this,"findClosestAlertHighlight",void 0),(0,r._)(this,"findNextAlertInText",void 0),(0,r._)(this,"_updateMetaSource",void 0),(0,r._)(this,"_lensAlerts",void 0),this._checkingState=e,this._alertsReader=t,this._lenses=n,this._alertSearchService=i,this._lensPreviewVM=a,this._lensFactory=s,this._alertsHandlerFactory=l,this._capabilities=c,this._alertsFilterService=u,this._focusFirstFilter=p,this._transformAlertsDiffToApplicator=e=>t=>n=>v.nL.hasItems(n)?n.patch({currentLens:e(t,I)(n.currentLens)}):n,this._log=d.C8.Logging.getLogger("FocusedLensManagerImpl"),this.findClosestAlertHighlight=this._alertSearchService.findClosestAlertHighlight,this.findNextAlertInText=this._alertSearchService.findNextAlertInText,this._updateMetaSource=e=>t=>n=>e===n.currentLens.id&&v.nL.hasItems(n)?v.nL.Prism.getLensWithItems().modify(this._capabilities.updateMeta(t),n):n,this._lensAlerts=e=>{const t=this._alertsFilterService.alertVisibleInSidebar(e.id);return(0,o.zG)(this._checkingState.get(),g.p.reduce([],((e,{alert:n})=>t(n)?[...e,n]:e)),(e=>e.sort(m.h$.ord.compare)))}}}},91689:(e,t,n)=>{n.d(t,{ad:()=>u,gi:()=>p,is:()=>c,kn:()=>d});var r,i=n(32490),a=n(64297),o=n(5412),s=n(57576),l=n(525);!function(e){e.compose=function(e){return t=>s.CX.compose(e.map((e=>e(t))))},e.map=function(e,t){return n=>t(e(n))}}(r||(r={}));const c=(e,t)=>n=>{if(o.R.isOutcomeId(n))return l.v.WithSuccess.getAlertHandler(e,t);switch(n){case o.R.SpecialId.Premium:return l.v.Premium.getAlertsHandler(e,t);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return l.v.WithSuccess.getAlertHandler(e,t);default:return(0,a.vE)(n)}},d=(e,t,n,r,i)=>a=>n(a)?l.v.WithBundles.getAlertsHandler(e,t,i):r(a);class u{create(e,t){return this._lensPredicate(t)?l.v.WithBundles.create(e,t,this._itemEq,this._itemOrd):this._inner.create(e,t)}constructor(e,t,n,r){(0,i._)(this,"_lensPredicate",void 0),(0,i._)(this,"_inner",void 0),(0,i._)(this,"_itemEq",void 0),(0,i._)(this,"_itemOrd",void 0),this._lensPredicate=e,this._inner=t,this._itemEq=n,this._itemOrd=r}}class p{create(e,t){const n=()=>l.v.WithSuccess.create(e,t,this._itemEq,this._itemOrd);if(o.R.isOutcomeId(e))return n();switch(e){case o.R.SpecialId.Premium:return l.v.Premium.create(t,this._itemEq,this._itemOrd);case o.R.SpecialId.AllAlerts:case o.R.SpecialId.PredictionTakeaways:case o.R.SpecialId.PredictionEmogenie:case o.R.SpecialId.RealTimeProofit:case o.R.SpecialId.FreePremiumAlerts:return n();default:return(0,a.vE)(e)}}constructor(e,t){(0,i._)(this,"_itemEq",void 0),(0,i._)(this,"_itemOrd",void 0),this._itemEq=e,this._itemOrd=t}}},58690:(e,t,n)=>{n.d(t,{EQ:()=>b,ay:()=>x,$A:()=>I});var r,i=n(32490),a=n(3190),o=n(90023),s=n(64297),l=n(12518),c=n(17572),d=n(58303),u=n(84358),p=n(17690),m=n(5412),h=n(47311),g=n(94032),f=n(23841),y=n(59833),v=n(21147);!function(e){var t=e.eq=(0,v.MW)({alert:(0,v.Uz)((e=>e.id))(v.w4),highlightIndex:v.w4});e.getEq=()=>t,e.getHighlightRange=e=>y.P5(e.highlightIndex)(e.alert.getHighlightRanges())}(r||(r={}));var x,I,b,S=n(57576),C=n(99817);!function(e){let t;!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(t=e.Type||(e.Type={}))}(x||(x={})),function(e){e.Mock=class{ensureAlertHighlightInViewport(){throw new Error("Method not implemented.")}getMarkByAlert(e){throw new Error("Method not implemented.")}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}getAlertByMark(e){throw new Error("Method not implemented.")}constructor(){(0,i._)(this,"events",new h.Subject),(0,i._)(this,"focusAlertHighlight",(()=>l.t$(new Error("Method not implemented.")))),(0,i._)(this,"highlightAlertHighlight",(()=>l.t$(new Error("Method not implemented.")))),(0,i._)(this,"moveCursorToHighlight",o.Q1)}},e.getHighlightIndex=function(e,t){return(0,o.zG)(t,l.Vn((()=>new Error("Mark is collapsed"))),l.tS((t=>c.vM((()=>{const n=e.getHighlightRanges(),r=n.length>1?n.findIndex((e=>e.start===t.start&&e.end===t.end)):0;return(0,s.kG)(-1!==r,"Could not find highlight index by Range for provided Alert",(()=>JSON.stringify({alertRanges:n,targetRange:t}))),r})))))}}(I||(I={})),function(e){var t=e.getHighlightSubscription=(e,t,n)=>e.pipe(h.distinctUntilChanged(d.Eh(p.h$.ord).equals),h.switchMap((e=>(0,o.zG)(e,d.g_((()=>h.EMPTY),(e=>h.Observable.create((()=>(n.debug(`highlight mark: ${e.id}`),(0,o.zG)(t.highlightAlertHighlight(e),l.g_((t=>(n.error("Cannot highlight mark",t,{alertId:e.id}),o.Q1)),(t=>()=>{n.debug(`unhighlight mark: ${e.id}`),t.dispose()})))))))))))),n=(e.getHoverAlertHightlightSource=(e,t,n,r)=>(0,o.zG)(r,h.debounceTime(100),h.map((0,o.ls)(d.tS((r=>{const i=e.get();return S.nL.hasCards(i)?i.currentLens.items.find((e=>(0,o.zG)(t.hasActiveAlert(e),d.UI((e=>e.alert)),d.Gg((t=>e.id===r&&n.isRegistered(t.id)))))):d.YP})),d.tS((({value:e})=>t.hasActiveAlert(e))),d.UI((e=>e.alert)))),h.distinctUntilChanged(d.Eh(p.h$.ord).equals),h.map(d.UI((t=>({alert:t,highlightIndex:0,source:e.get().alertSource})))),h.startWith(d.YP)),e.highlightMarkByHighlightedCard=(e,n,r,i,a,s)=>{const l=t(e.hovered.pipe(h.debounceTime(100),h.map((0,o.ls)(d.tS((e=>{const t=n.get();return S.nL.hasCards(t)?t.currentLens.items.find((t=>(0,o.zG)(a.hasActiveAlert(t),d.UI((e=>e.alert)),d.Gg((n=>t.id===e&&i.isRegistered(n.id)))))):d.YP})),d.tS((({value:e})=>a.hasActiveAlert(e))),d.UI((e=>e.alert))))),r,s);return{id:"highlightMarkByHighlightedAlert",when:m.R.isWithAlertsId,what:S.nL.Effect.Applicator.create(l.pipe(h.switchMapTo(h.NEVER)))}},e.getAlertHighlightSource=e=>t=>(0,o.zG)(t,h.distinctUntilChanged(d.Eh(p.h$.ord).equals),h.map(d.UI((t=>({alert:t,source:e,highlightIndex:0})))),h.startWith(d.YP)),e.getActiveHighlightSource=(e,t,n)=>e.view(S.nL.mapper((({currentLens:e,alertSource:t})=>(0,o.zG)(n(e),d.UI((e=>({alert:e.activeAlert,source:t,highlightIndex:e.activeHighlightIndex}))))))).pipe(h.switchMap(g.b2.rafScheduler),h.skipBy(d.Eh(r.getEq())),h.map(d.hX((e=>d.pC(t.getRegistered(e.alert.id)))))));e.focusMarkByActiveAlert=(e,t,r,i,a,s=h.of(!0))=>{const c=(0,o.zG)(n(e,r,i),h.tap(u.bw((e=>a.trace("new alert highlight: ",e)))),h.withLatestFrom(s),h.switchMap((([e,n])=>(0,o.zG)(e,d.g_((()=>(a.debug("Nothing to focus"),h.EMPTY)),(e=>h.Observable.create((()=>(a.debug(`Focus mark: ${e.alert.id} | ${e.highlightIndex}, shouldMoveCursor: ${n}`),e.source===p.l$.sidebar&&n&&t.moveCursorToHighlight(e,"start"),(0,o.zG)(t.focusAlertHighlight(e),l.g_((t=>(a.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),o.Q1)),(t=>()=>{a.debug(`Unfocus mark: ${e.alert.id} | ${e.highlightIndex}'`),t.dispose()}))))))))))));return{id:"focusMarkByActiveAlert",when:m.R.isWithAlertsId,what:S.nL.Effect.Applicator.create(c.pipe(h.switchMapTo(h.NEVER)))}},e.focusAlertByClickedMark=(e,t,n)=>({id:"focusAlertByActiveMark",when:S.nL.Effect.When.isSidebarOpen,what:S.nL.Effect.SwitchAlert.create(e.pipe(h.skip(1),f.oA,h.withLatestFrom(t.pipe(h.filter(S.nL.hasCards))),h.filter((([e,t])=>p.bZ.State.isRegistered(e.alert.state)&&(0,o.zG)(e.alert,C.v.findItemWithAlertInLens(t.currentLens,n),d.pC))),h.map(a.li),h.map((({alert:e,highlightIndex:t})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:p.l$.text,options:{order:"textOrder"}})))))});e.createOnAlertApplySideEffect=function(e,t){const n=e.pipe(h.map((e=>n=>e.type===x.Type.AppliedAlertAnimationFinished&&n.currentLens.meta.filter(e.alert)&&p.bZ.isApplicableAlert(e.alert)&&S.nL.hasItems(n)?n.patch({currentLens:t.finishApplyAnimation([e.alert])(n.currentLens),alertSource:e.alert.state.source}):n)));return{id:"onAlertApply",when:S.nL.Effect.When.isSidebarOpen,what:S.nL.Effect.Applicator.create(n)}}}(b||(b={}))},89490:(e,t,n)=>{n.d(t,{O:()=>x,x:()=>v});var r=n(14944),i=n(31491),a=n(29227),o=n(5412),s=n(32719);function l(e){return`${e} ${(0,a._6)(e,"alert","alerts")}`}const c=e=>(t,n,r,i)=>t?l(n.count):e(n,r,i),d=(e,t)=>(n,r,i)=>{const a=n.count;return a>0?l(a):i&v.IsDocumentEmpty?e:t},u={description:"Improves spelling, grammar, and punctuation.",stateMessage:c(d("No alerts","Looking good"))},p={description:"Helps make your writing easier to understand.",stateMessage:c(((e,t,n)=>{const a=(0,i.WA)(r.lt(s.g.ord))(t);if(n&v.IsDocumentEmpty)return"So far so good";if(e.count>0){if(s.g.isMin(t))return l(e.count);if(a(s.g.fromNumber(20)))return"Unclear";if(a(s.g.fromNumber(70)))return"A bit unclear";if(a(s.g.fromNumber(85)))return"Mostly clear";if(a(s.g.fromNumber(95)))return"Clear"}return"Very clear"}))},m={description:"Helps make your writing more interesting and effective.",stateMessage:c(((e,t,n)=>{const a=n&v.IsFreeUser,o=s.g.isMin(t),c=(0,i.WA)(r.lt(s.g.ord))(t);if(n&v.IsDocumentEmpty||a&&o)return"Nothing yet";if(a||e.count>0){if(o)return l(e.count);if(c(s.g.fromNumber(20)))return"Bland";if(c(s.g.fromNumber(80)))return"A bit bland";if(c(s.g.fromNumber(95)))return"Engaging"}return"Very engaging"}))},h={description:"Helps you make the right impression on your reader.",stateMessage:c(((e,t,n)=>{const a=n&v.IsFreeUser,o=s.g.isMin(t),c=(0,i.WA)(r.lt(s.g.ord))(t);if(n&v.IsDocumentEmpty||a&&o)return"Nothing yet";if(a||e.count>0){if(o)return l(e.count);if(c(s.g.fromNumber(20)))return"Serious issues";if(c(s.g.fromNumber(40)))return"Very off";if(c(s.g.fromNumber(95)))return"Slightly off"}return"Just right"}))},g={description:"Your organization’s writing guidelines.",stateMessage:c(d("Nothing yet","All good"))},f={description:"Details on terms",stateMessage:c(d("Nothing yet","All good"))},y={[o.R.SpecialId.Correctness]:u,[o.R.SpecialId.Clarity]:p,[o.R.SpecialId.Engagement]:m,[o.R.SpecialId.Delivery]:h,[o.R.SpecialId.Vox]:g,[o.R.SpecialId.KnowledgeHub]:f,[o.R.SpecialId.Plagiarism]:{description:"Checks for similarities to published writing.",stateMessage:c(((e,t,n)=>n&v.IsLensVisited&&!(n&v.IsDocumentEmpty)?n&v.IsLensActive?s.g.isMin(t)?"100% original":`${t}% unoriginal`:"Recheck":"Not checked yet"))},[o.R.SpecialId.Premium]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,n)=>n&v.IsDocumentEmpty?"Advanced checks":`${e.count} more ${(0,a._6)(e.count,"alert","alerts")}`))},[o.R.SpecialId.FreePremiumAlerts]:{description:"Offers more suggestions on how to improve your writing.",stateMessage:c(((e,t,n)=>n&v.IsDocumentEmpty?"Advanced checks":`${e.count} more ${(0,a._6)(e.count,"alert","alerts")}`))}};var v;function x(e){return y[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(v||(v={}))},60846:(e,t,n)=>{n.d(t,{g:()=>r});var r,i=n(32490),a=n(13391);!function(e){let t,n,r;!function(e){e.More="More"}(t=e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(n=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied",e.premiumOnboardingStart="premiumOnboardingStart",e.premiumOnboardingComplete="premiumOnboardingComplete"}(r=e.SuccessType||(e.SuccessType={}));e.Mock=class{reviewMutedSuggestions(){throw new Error("Method not implemented.")}dispose(){throw new Error("Method not implemented.")}constructor(){(0,i._)(this,"textAmount",a.h.create(n.zero)),(0,i._)(this,"successState",a.h.create({type:r.zero,showBirthday:!1})),(0,i._)(this,"mutedSuggestionsCount",a.h.create(0))}}}(r||(r={}))},46516:(e,t,n)=>{n.d(t,{$4:()=>P,AP:()=>l,Dn:()=>o,IY:()=>E,bb:()=>F,rD:()=>S});var r=n(98227),i=n(73141),a=n(91468);const o="linear",s=r.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),l=r.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),c=r.ux.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),d=r.ux.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),u=r.ux.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),p=r.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),m=r.ux.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),h=r.ux.keyframes({"0%, 100%":{opacity:0}}),g=r.ux.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),f=r.ux.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),y=r.ux.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),v=r.ux.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),x=r.ux.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),I=r.ux.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),b={position:"relative",margin:`${r.ux.rem(.5)} ${r.ux.rem(2)} ${r.ux.rem(.5)} 0`,userSelect:"none"},S={position:"absolute",width:r.ux.percent(100),pointerEvents:"none"},C={opacity:0,animation:`${s} ${r.ux.seconds(i.v4/4/1e3)} ${o} ${r.ux.seconds(i.v4/1e3)} forwards`},w={transformOrigin:"top",animation:`${l} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},A={transformOrigin:"bottom",animation:`${c} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},E={transformOrigin:"top",willChange:"contents"},k={animation:`${d} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},_={animation:`${u} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},T={animation:`${p} ${r.ux.seconds(i.v4/1e3)} ${o} reverse forwards`},M={animation:`${p} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},G={animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},L={animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${o} reverse forwards`},D={transformOrigin:"top",animation:`${g} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`,willChange:"contents",$nest:{[`& .${a.g.successWrapperSelector} > *`]:{animation:`${f} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`}}},N={position:"absolute",width:r.ux.percent(100),transformOrigin:"top",animation:`${y} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`,pointerEvents:"none",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${v} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${o} none`},[`& .${a.g.fullCardSelector}`]:{transform:`translateY(${r.ux.rem(-1)})`}}},z={transformOrigin:"top",animation:`${x} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`,willChange:"contents",$nest:{[`& .${a.g.fullCardSelector} > :not(.${a.g.alignButtonHiddenSelector})`]:{animation:`${I} ${r.ux.seconds(i.v4/1e3)} ${o} forwards`},[`& .${a.g.fullCardSelector} > .${a.g.alignButtonHiddenSelector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${o} none`}}},P=r.ux.stylesheet({wrapper:[b],animationWrapper:[{position:"relative"}],shade:[S],focused2renderedMain:[C],focused2renderedShade:[S,w],focused2renderedShadeClockwise:[S,A],rendered2focusedMainBase:[E],rendered2focusedMain:[E,k],rendered2focusedMainClockwise:[E,_],addedMain:[T],rendered2removedShade:[S,M],openedMain:[G],closedMain:[L],focused2successMain:[D],focused2successShade:[N],success2FocusedMain:[z]}),F=new Map([[l,P.focused2renderedShade],[c,P.focused2renderedShadeClockwise],[p,P.rendered2removedShade],[y,P.focused2successShade]])},23502:(e,t,n)=>{n.d(t,{S:()=>w,c:()=>A});var r=n(98227),i=n(73141),a=n(46516),o=n(91468);const s=r.ux.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),l=r.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),c=r.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),d=r.ux.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),u=r.ux.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),p=r.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),m=r.ux.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),h=r.ux.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),g=r.ux.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),f=r.ux.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),y=r.ux.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),v={opacity:0,animation:`${s} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},x={transformOrigin:"top",animation:`${a.AP} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${d} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},I={transformOrigin:"top",animation:`${u} ${r.ux.seconds(i.v4/1500)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${l} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${c} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${d} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},b={animation:`${p} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${g} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},S={animation:`${f} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleInnerContainerSelector}`]:{animation:`${m} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`,$nest:{[`& .${o.g.bundleFakeCard1Selector}`]:{animation:`${h} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},[`& .${o.g.bundleFakeCard2Selector}`]:{animation:`${g} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`}}}}},C={animation:`${y} ${r.ux.seconds(i.v4/1e3)} ${a.Dn} forwards`},w=r.ux.stylesheet({focused2renderedBundleMain:[v],focused2renderedBundleShade:[a.rD,x],focused2renderedBundleShadeClockwise:[a.rD,I],rendered2focusedBundleMain:[a.IY,b],rendered2focusedBundleMainClockwise:[a.IY,S],rendered2focusedBundleShade:[a.rD,C]}),A=new Map([[a.AP,w.focused2renderedBundleShade],[u,w.focused2renderedBundleShadeClockwise],[y,w.rendered2focusedBundleShade]])},84856:(e,t,n)=>{n.d(t,{N:()=>p,p:()=>r});var r,i=n(92379),a=n(58303),o=n(90023),s=n(9615),l=n(23345),c=n(47311),d=n(28627),u=n(23841);function p(e=12){const{ref:t,onMount:n}=d.P.useElWatcher(),{cardHeight:u,cardVisibleViewportHeight:p}=i.useContext(r.Context),m=i.useContext(l.u.Context);return{onMount:n,maxHeight:i.useRef(t.pipe(c.switchMap(a.g_((0,o.a9)(c.of(a.YP)),(e=>u.pipe(c.take(1),c.withLatestFrom(p),c.map((([t,n])=>(0,o.zG)(n,a.UI((n=>e.offsetHeight+Math.max(0,n-t)))))))))),c.startWith(a.YP),c.withLatestFrom(m.pipe(c.startWith(void 0),c.map(a.ij))),c.map((([t,n])=>(0,o.zG)(t,a.wp((()=>(0,o.zG)(n,a.UI((t=>e*t)))))))),c.distinctUntilChanged(a.Eh(s.Eq).equals))).current,ref:t}}!function(e){var t=e.Context=i.createContext({cardHeight:c.EMPTY,cardVisibleViewportHeight:c.of(a.YP)});e.Provider=e=>{const{ref:n,onMount:r}=d.P.useElWatcher(),o=i.useRef({cardHeight:e.card.pipe(c.switchMapTo(n.pipe(u.oA,c.map((e=>e.offsetHeight)))),c.distinctUntilChanged(),c.shareReplay({bufferSize:1,refCount:!0})),cardVisibleViewportHeight:e.cardVisibleViewportHeight.pipe(c.distinctUntilChanged(a.Eh(s.Eq).equals),c.shareReplay({bufferSize:1,refCount:!0}))});return i.createElement(t.Provider,{value:o.current},e.children(r))}}(r||(r={}))},74775:(e,t,n)=>{n.d(t,{b:()=>ve});var r=n(32490),i=n(92379),a=n(58303),o=n(90023),s=n(24909),l=n(13391),c=n(17485),d=n(70394),u=n(46516),p=n(23502),m=n(25188);const h=({children:e,mount:t})=>i.createElement(s.F.div,{"data-role":"animation-wrapper",className:u.$4.animationWrapper,mount:t},e),g=e=>(0,o.zG)(a.ij(e.activeAlert),a.g_((()=>e.id),(e=>e.id)));class f extends i.Component{_stateToElement(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;case"removed":return this.props.removedCard;case"muted":return this.props.mutedCard;default:return null}}componentWillUnmount(){const{card:e,actions:t}=this.props;t.next({type:d.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})}render(){const{actions:e,card:t,transitionClassMapper:n}=this.props;if(!t.visualState.incomplete)return i.createElement(h,{mount:this.props.mount},i.createElement(s.F.div,{key:t.visualState.transition.type},this._stateToElement(t.visualState.transition.type)));const r=n||m.SA,{main:f,shade:y}=r(t.visualState),v=l.h.create(void 0===y?a.YP:(0,o.zG)(t.visualState.from,a.UI((e=>({state:e,className:y})))));return!Boolean(f)&&a.Wi(v.get())&&requestAnimationFrame((()=>e.next({type:d.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}))),i.createElement(c.f.Context.Provider,{value:this._elementState},i.createElement(h,{mount:this.props.mount},v.view((0,o.ls)(a.UI((({state:n,className:r})=>i.createElement(s.F.div,{className:r,key:"shade"+n+g(t),onAnimationEnd:n=>{p.c.get(n.animationName)!==r&&u.bb.get(n.animationName)!==r||(e.next({type:d.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),requestAnimationFrame((()=>v.set(a.YP))))}},this._stateToElement(n)))),a.FS)),i.createElement(s.F.div,{className:f,key:"expanded"===t.visualState.transition.type?"focused":t.visualState.transition.type,onAnimationEnd:()=>e.next({type:d.eI.Kind.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===t.visualState.transition.type&&e.next({type:d.eI.Kind.startTransitionTo,id:t.id,transition:{type:"success",clockwise:t.visualState.transition.clockwise}})}},this._stateToElement(t.visualState.transition.type))))}constructor(...e){super(...e),(0,r._)(this,"_elementState",c.f.emptyWithName("card"))}}var y=n(84910),v=n(48906),x=n(75068),I=n(91020),b=n(77933),S=n(98227),C=n(49253),w=n(73141);class A extends i.Component{componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:n,children:r,counter:a,className:o,hideActivateButton:l,hideDot:c}=this.props;return i.createElement(s.F.div,(0,y._)({"data-aid":t,mount:e=>this._ref.current=e,onClick:t=>{const r=e();n.next({type:d.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:r},clickPoint:{x:t.clientX,y:t.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,v.Sh)(o,O.wrapper,null!=c&&c?null:O.miniCard)),i.createElement(b.XY,(0,v.Sh)(O.contentWrapper,null!=c&&c?O.contentWrapperWithoutDot:O.contentWrapperWithDot),r),i.createElement("div",{className:O.iconContainer},a&&i.createElement(s.F.div,{className:k},a),null!=l&&l?null:i.createElement("div",{className:T},i.createElement(I.JO.Arrow,{className:O.activeTopIcon}),i.createElement(I.JO.Arrow,{className:O.activeBottomIcon}))))}constructor(...e){super(...e),(0,r._)(this,"_ref",i.createRef()),(0,r._)(this,"_createCardToggler",(e=>()=>this.props.actions.next({type:d.lY.Type.hover,kind:e,id:this.props.cardId})))}}const E="baseMiniCounterContainer",k=S.ux.joinClasses([E,S.ux.style({position:"absolute",height:S.ux.percent(100),top:0,right:0,zIndex:w.VN,margin:"auto 0",background:x.Il.CoreNeutral0,opacity:1})]),_="baseMiniActivateBtnSelector",T=S.ux.joinClasses([_,S.ux.style({position:"absolute",top:0,right:0,height:S.ux.percent(100),zIndex:w.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:x.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),M={position:"relative",display:"flex",overflow:"hidden",borderRadius:S.ux.rem(w.fx),background:x.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:x.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:S.ux.seconds(.2)},[`&:hover .${_}`]:{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},G={overflow:"hidden",color:C.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:S.ux.rem(1.5)},L={margin:`0 ${S.ux.rem(3)} 0 ${S.ux.rem(2)}`},D={paddingLeft:S.ux.rem(.5)},N={position:"absolute",top:0,right:S.ux.rem(.5),bottom:0,display:"flex"},z={display:"flex",margin:`${S.ux.rem(.1)} 0 ${S.ux.rem(-1.25)}`,transform:"rotate(180deg)"},P={$nest:{"&:before":{position:"absolute",width:S.ux.px(10),height:S.ux.px(10),borderRadius:S.ux.percent(50),content:"''",transform:"scale(.5)"}}},F={$nest:{"&:before":{margin:`auto 0 auto ${S.ux.rem(.75)}`}}},O=S.ux.stylesheet({wrapper:[M],contentWrapper:[G],contentWrapperWithDot:[L],contentWrapperWithoutDot:[D],iconContainer:[N],activeTopIcon:[z],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[P],miniCard:[P,F]});var R=n(79239),$=n(42877);class B extends i.Component{componentDidUpdate(){var e,t;Boolean(this.props.inert)?null===(e=this._ref.current)||void 0===e||e.setAttribute("inert","true"):null===(t=this._ref.current)||void 0===t||t.removeAttribute("inert")}componentWillUnmount(){this._createCardToggler("unhover")()}render(){const{getActiveAlert:e,cardId:t,actions:n,children:r,counter:a,className:o,hideActivateButton:l,hideDot:c,sduiStyle:u}=this.props;return i.createElement(s.F.div,(0,y._)({"data-aid":t,tabIndex:0,role:"button","aria-disabled":!1,mount:e=>this._ref.current=e,onClick:t=>{const r=e();n.next({type:d.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:r},clickPoint:{x:t.clientX,y:t.clientY}})},onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.target.click(),e.preventDefault())},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,v.Sh)(o,null!=u&&u?te.sduiWrapper:te.wrapper,null!=c&&c?null:te.miniCard)),i.createElement(b.XY,(0,v.Sh)(te.contentWrapper,null!=c&&c?te.contentWrapperWithoutDot:te.contentWrapperWithDot),r),i.createElement("div",{className:te.iconContainer},a&&i.createElement(s.F.div,{className:j},a),null!=l&&l?null:i.createElement("div",{className:H},i.createElement(I.JO.Arrow,{className:te.activeTopIcon}),i.createElement(I.JO.Arrow,{className:te.activeBottomIcon}))))}constructor(...e){super(...e),(0,r._)(this,"_ref",i.createRef()),(0,r._)(this,"_createCardToggler",(e=>()=>this.props.actions.next({type:d.lY.Type.hover,kind:e,id:this.props.cardId})))}}const U="baseMiniCounterContainer",j=S.ux.joinClasses([U,S.ux.style({position:"absolute",height:S.ux.percent(100),top:0,right:0,zIndex:w.VN,margin:"auto 0",background:x.Il.CoreNeutral0,opacity:1})]),W="baseMiniActivateBtnSelector",H=S.ux.joinClasses([W,S.ux.style({position:"absolute",top:0,right:0,height:S.ux.percent(100),zIndex:w.VN,display:"flex",flexDirection:"column",margin:"auto 0",opacity:0,justifyContent:"center"})]),Y={position:"relative",display:"flex",overflow:"hidden",borderRadius:S.ux.rem(R.fx),background:x.Il.CoreNeutral0,boxShadow:$.S.z100,cursor:"pointer",alignItems:"center",$nest:{"&:hover":{background:x.Il.CoreNeutral10,transitionDuration:S.ux.seconds(.2)},"&:focus":{background:x.Il.CoreNeutral10,boxShadow:`${$.S.z100}, 0 0 0 2px rgb(99 142 235)`,outline:"none"},"&:hover .baseMiniActivateBtnSelector":{opacity:1},"&:hover .baseMiniCounterContainer":{opacity:0}}},V={boxShadow:$.s.llamaShadowToken},Q={overflow:"hidden",color:C.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:S.ux.rem(1.5)},q={margin:`0 ${S.ux.rem(3)} 0 ${S.ux.rem(2)}`},J={paddingLeft:S.ux.rem(.5)},X={position:"absolute",top:0,right:S.ux.rem(.5),bottom:0,display:"flex"},Z={display:"flex",margin:`${S.ux.rem(.1)} 0 ${S.ux.rem(-1.25)}`,transform:"rotate(180deg)"},K={$nest:{"&:before":{position:"absolute",width:S.ux.px(10),height:S.ux.px(10),borderRadius:S.ux.percent(50),content:"''",transform:"scale(.5)"}}},ee={$nest:{"&:before":{margin:`auto 0 auto ${S.ux.rem(.75)}`}}},te=S.ux.stylesheet({wrapper:[Y],sduiWrapper:[Y,V],contentWrapper:[Q],contentWrapperWithDot:[q],contentWrapperWithoutDot:[J],iconContainer:[X],activeTopIcon:[Z],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[K],miniCard:[K,ee]});var ne,re=n(78520),ie=n(31491),ae=n(27640),oe=n(79813),se=n(47311),le=n(91468);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(ne||(ne={}));const ce=({actions:e,isLastCard:t})=>{const n=i.useContext(ae.m.Context).successLens.fixedText.titles,r=l.h.create(ne.stage0),a=()=>e.next({type:d.lY.Type.switchToNext});return i.createElement(s.F.div,{className:ye.successWrapper},i.createElement(b.P1,{className:ye.successText,onAnimationEnd:()=>{r.set(ne.stage1)}},n[(0,ie.TN)(n.length)]),i.createElement(s.F.span,null,r.view((e=>e>=ne.stage1&&i.createElement("span",{onAnimationEnd:()=>r.set(ne.stage2)},i.createElement(I.JO.CheckmarkAnimated,{className:ye.successCheckMark}))))),i.createElement(s.F.span,{className:ye.successBtnHolder},t.pipe(se.combineLatest(r,((e,t)=>t<ne.stage2?null:e?i.createElement(oe.zx.Caps,{className:ye.doneBtn,name:"done",key:"done-btn",onClick:a},"Done"):i.createElement(oe.zx.Caps,{className:ye.successBtn,name:"next",key:"next-card",onClick:a},"Next"))))))},de=S.ux.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),ue={fontWeight:"bold",lineHeight:S.ux.rem(2),animation:`${de} ${S.ux.seconds(.2)} linear forwards`},pe={position:"relative",borderRadius:S.ux.rem(w.Jr),background:x.Il.CoreNeutral0,boxShadow:`0 ${S.ux.rem(.625)} ${S.ux.rem(w.mJ)} 0 rgba(198, 203, 222, .45)`},me={display:"flex",padding:`${S.ux.rem(1.5)} ${S.ux.rem(2)}`,alignItems:"center"},he={marginLeft:S.ux.rem(1),minWidth:0,minHeight:0,width:S.ux.rem(1.325),height:S.ux.rem(1.325),animation:`${de} ${S.ux.seconds(.2)} linear forwards`},ge={float:"right",width:S.ux.rem(4),textAlign:"center",animation:`${de} ${S.ux.seconds(.2)} linear forwards`},fe={backgroundColor:x.Il.CoreGreen50,color:x.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:C.mb}}},ye=(0,re._)((0,y._)({},S.ux.stylesheet({successText:[ue],successCheckMark:[he],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[ge],doneBtn:[ge,fe]})),{fullCard:S.ux.joinClasses([le.g.fullCardSelector,S.ux.style(pe)]),successWrapper:S.ux.joinClasses([le.g.successWrapperSelector,S.ux.style(pe,me)])});var ve;!function(e){e.Mini=A,e.MiniContrast=B,e.Card=f,e.Success=ce}(ve||(ve={}))},91468:(e,t,n)=>{n.d(t,{g:()=>I,m:()=>b});var r=n(84910),i=n(78520),a=n(75068),o=n(98227),s=n(49253),l=n(73141);const c={position:"relative",borderRadius:o.ux.rem(l.Jr),background:a.Il.CoreNeutral0,boxShadow:`0 ${o.ux.rem(.625)} ${o.ux.rem(l.mJ)} 0 rgba(198, 203, 222, .45)`},d={$nest:{"&:before":{position:"absolute",width:o.ux.px(10),height:o.ux.px(10),borderRadius:o.ux.percent(50),content:"''",transform:"scale(.5)"}}},u={$nest:{"&:before":{backgroundColor:s.kl}}},p={$nest:{"&:before":{backgroundColor:s.AX}}},m={$nest:{"&:before":{backgroundColor:a.Il.CoreRed50}}},h={$nest:{"&:before":{backgroundColor:a.Il.CoreBlue50}}},g={$nest:{"&:before":{backgroundColor:a.Il.CoreGreen50}}},f={$nest:{"&:before":{backgroundColor:a.Il.CorePurple50}}},y={$nest:{"&:before":{backgroundColor:a.Il.CoreNeutral50}}},v={$nest:{"&:before":{backgroundColor:a.Il.CoreNeutral50}}},x={$nest:{"&:before":{backgroundColor:a.Il.CoreGreen60}}},I={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},b=(0,i._)((0,r._)({},o.ux.stylesheet({dot:[d],dotAdvanced:[p],dotCritical:[u],dotCorrectness:[m],dotClarity:[h],dotEngagement:[g],dotDelivery:[f],dotVox:[y],knowledgeHub:[v],dotWritingExpert:[x]})),{fullCard:o.ux.joinClasses([I.fullCardSelector,o.ux.style(c)])})},25188:(e,t,n)=>{n.d(t,{CE:()=>r,SA:()=>d,a:()=>u});var r,i=n(58303),a=n(90023),o=n(31491),s=n(72111),l=n(46516),c=n(23502);function d({from:e,transition:t,incomplete:n}){if(!n)return{};const r=p("transitionClassMapper");return(0,a.zG)(e,i.UI((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?l.$4.rendered2focusedMainClockwise:l.$4.rendered2focusedMain};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:l.$4.focused2renderedMain,shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(r.error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),i.fS((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}})))}function u({from:e,transition:t,incomplete:n}){return n?(0,a.zG)(e,i.UI((e=>{switch(e){case"added":case"rendered":switch(t.type){case"added":return p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain};case"focused":return{main:t.clockwise?c.S.rendered2focusedBundleMainClockwise:c.S.rendered2focusedBundleMain,shade:c.S.rendered2focusedBundleShade};case"removed":return{shade:l.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(t.type){case"rendered":return{main:c.S.focused2renderedBundleMain,shade:t.clockwise?c.S.focused2renderedBundleShadeClockwise:c.S.focused2renderedBundleShade};case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};default:return{}}case"success":switch(t.type){case"removed":return{main:"",shade:t.clockwise?l.$4.focused2renderedShadeClockwise:l.$4.focused2renderedShade};case"focused":return{main:l.$4.success2FocusedMain};default:return{}}case"presuccess":return"success"===t.type?{main:l.$4.focused2successMain,shade:l.$4.focused2successShade}:{};case"removed":return"added"===t.type?(p("bundleTransitionClassMapper").error(`Impossible transition: ${e} -> ${t.type}`),{main:l.$4.addedMain}):{};default:return{}}})),i.fS((()=>{switch(t.type){case"added":return{main:l.$4.addedMain};case"focused":return{main:l.$4.openedMain};default:return{}}}))):{}}!function(e){e.toOption=function(e){return t=>{const{main:n,shade:r}=e(t);return{main:i.ij(n),shade:i.ij(r)}}}}(r||(r={}));const p=(0,o.HP)(s.C8.Logging.getLogger)},81636:(e,t,n)=>{n.d(t,{$x:()=>C,Im:()=>w,a0:()=>r,oL:()=>z});var r,i=n(84910),a=n(92379),o=n(90023),s=n(48906),l=n(58303),c=n(84358),d=n(27640),u=n(79813),p=n(24045),m=n(91020),h=n(59640),g=n(77933),f=n(5412),y=n(17690),v=n(80388),x=n(88367),I=n(91468),b=n(52382),S=n(80249);!function(e){e.none="none",e.persistent="persistent",e.new="new"}(r||(r={}));const C=({className:e,vox:t,isMinimalCard:n})=>{const{vox:{styleGuide:r}}=a.useContext(d.m.Context);return a.createElement("div",(0,s.Sh)(e,S.h.voxTitle,n?S.h.minimalTitle:void 0),a.createElement("span",null,t.companyName," ",r))},w=({logoUrl:e,className:t})=>a.createElement("img",(0,i._)({alt:"company logo","aria-hidden":!0,src:e},(0,s.Sh)(t,S.h.voxLogo))),A=({title:e,layoutDensity:t})=>a.createElement(g.XY,{className:(0,o.zG)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>S.h.minimalTitle),(()=>S.h.toneTitle)))},a.createElement(p.dy,{emojiClassName:S.h.toneLogo},e));function E(e){return b.y.getDotStyle(e)}function k(e){return f.R.outcomeTypeMatch({correctness:a.createElement(m.JO.Correctness,{className:S.h.cardLogo}),clarity:a.createElement(m.JO.ClarityOutcome,{className:S.h.cardLogo}),premium:a.createElement(m.JO.Star,{className:S.h.cardLogo}),engagement:a.createElement(m.JO.EngagementOutcome,{className:S.h.cardLogo}),delivery:a.createElement(m.JO.DeliveryOutcome,{className:S.h.cardLogo}),vox:null,knowledgeHub:null})(e.lensType)}function _({activeAlert:e}){const t=a.useContext(d.m.Context);return a.createElement(g.XY,{className:S.h.minimalTitle},(0,o.zG)(e.result,l.hX((e=>e.length>0)),l.fS((()=>t.card.writingExpert.title))))}function T(e,t,n,r,d,u){const{extraProperties:h}=e;return v.$.isTakeaway(e)?function(e,t,n){return{style:"",description:a.createElement("div",{className:(0,o.zG)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>S.h.minimalTitle),(()=>{})))},c.FX(y.TO.correctlyDetected)(e.takeawayFeedback)&&e.takeawayIsLikelyToBeRead?a.createElement(m.JO.ValidationOk,(0,i._)({width:16},(0,s.Sh)(S.h.cardLogo,S.h.takeawayIcon))):a.createElement(m.JO.Megaphone,(0,i._)({width:16},(0,s.Sh)(S.h.cardLogo,S.h.takeawayIcon))),t===x.j.Density.minimal?n:e.lensName)}}(e,n,u):v.$.isShortenIt(e)?M(e,n,d,u):v.$.isToneAI(e)?function(e){return{style:E(e),description:a.createElement(g.XY,{className:S.h.minimalTitle},e.title)}}(e):v.$.isEthicalAI(e)?function(e){return{style:"",description:a.createElement("div",null,void 0!==e.emojiID?a.createElement(p.In,{id:e.emojiID,className:S.h.toneLogo}):a.createElement(m.JO.EthicalAI.Heart,(0,s.Sh)(S.h.cardLogo)),a.createElement(g.x4,{className:S.h.ethicalAILabel},e.miniCardTitle))}}(e):v.$.isSuggestedSnippet(e)?function(e){return{style:E(e),description:a.createElement(g.XY,{className:S.h.minimalTitle},e.title)}}(e):v.$.isKnowledgeHubSuggestedTerm(e)?function(e){return{style:E(e),description:a.createElement(g.XY,{className:S.h.minimalTitle},e.miniCardTitle)}}(e):v.$.isWritingExpert(e)?function(e){return{style:E(e),description:a.createElement(_,{activeAlert:e})}}(e):l.pC(h.tone)?function(e,t){return{style:E(e),description:a.createElement(A,{title:e.title,layoutDensity:t})}}(e,n):t?l.pC(h.vox)?function(e,t){return{style:I.m.dotVox,description:a.createElement(a.Fragment,null,(0,o.zG)(e.logoUrl,l.g_((()=>null),(e=>a.createElement(w,{logoUrl:e,className:S.h.cardLogo})))),a.createElement(C,{vox:e,isMinimalCard:t===x.j.Density.minimal}))}}(h.vox.value,n):v.$.isFree(e)?M(e,n,d,u):function(e,t,n,r){return{style:(0,o.zG)(r,x.j.CardVisualMode.match({onRegular:()=>E(e),onContrast:()=>""})),description:a.createElement(a.Fragment,null,(0,o.zG)(r,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>k(e)})),a.createElement("div",(0,s.Sh)(S.h.dualItemLabel,(0,o.zG)(n,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>S.h.minimalTitle),(()=>{})))),a.createElement("span",{className:S.h.dualItemLabel},e.lensName,a.createElement(D,{highlightStyle:t}))))}}(e,r,n,d):null}function M(e,t,n,r){return(0,o.zG)(t,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>function(e,t,n){return{style:(0,o.zG)(t,x.j.CardVisualMode.match({onRegular:()=>E(e),onContrast:()=>""})),description:Boolean(n)?n:a.createElement(a.Fragment,null,(0,o.zG)(t,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>k(e)})),a.createElement(g.XY,{className:S.h.minimalTitle},e.miniCardTitle))}}(e,n,r)),(()=>function(e,t){return{style:(0,o.zG)(t,x.j.CardVisualMode.match({onRegular:()=>E(e),onContrast:()=>""})),description:a.createElement(a.Fragment,null,(0,o.zG)(t,x.j.CardVisualMode.match({onRegular:()=>null,onContrast:()=>k(e)})),e.lensName)}}(e,n))))}const G=({label:e})=>a.createElement("span",{className:S.h.fluencyLabel},e,a.createElement(u.RZ,{iconWidth:10,buttonClass:S.h.fluencyInfo,iconClass:S.h.fluencyInfo,title:a.useContext(d.m.Context).card.fluency.tooltip})),L=({style:e,description:t})=>a.createElement("span",(0,s.Sh)(S.h.lens,S.h.dot,e),t),D=({highlightStyle:e})=>{const t=a.useContext(d.m.Context);if(e===r.none)return null;const n=e===r.new?a.createElement("div",{className:S.h.newPremiumLabel},t.premiumAlertLabel.new,a.createElement(m.JO.Paid,{className:S.h.newPremiumLabelIcon,width:12})):a.createElement(m.JO.Paid,{className:S.h.premiumPersistentTooltipIcon,width:10});return a.createElement(h.u,{align:"topCenter",title:t.premiumAlertLabel.tooltip.includedWithPaid},n)},N=({style:e,description:t,extraStyle:n})=>a.createElement("span",(0,s.Sh)(n,S.h.lensMinimal,S.h.lens,S.h.dot,e),t),z=e=>(0,o.zG)(T(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.cardVisualMode,e.children),l.ij,l.UI((t=>a.createElement("div",{className:e.className},(0,o.zG)(e.activeAlert.extraProperties.fluencyMessage,l.g_((()=>(0,o.zG)(e.layoutDensity,x.j.Density.matchOrDefault(x.j.Density.minimal)((()=>a.createElement(N,t)),(()=>a.createElement(L,t))))),(n=>(0,o.zG)(e.layoutDensity,x.j.Density.match(a.createElement(a.Fragment,null,a.createElement(L,t),a.createElement(G,{label:n})),a.createElement(L,t),a.createElement(N,{style:t.style,extraStyle:S.h.minimalTitle,description:e.activeAlert.miniCardTitle}))))))))),l.g_((()=>a.createElement("div",{"data-purpose":"label-placeholder"})),(t=>a.createElement(P,null,t,e.badge)))),P=({children:e})=>a.createElement("div",{role:"definition",className:S.h.labelContainer},e)},52382:(e,t,n)=>{n.d(t,{y:()=>l});var r=n(5412),i=n(3611),a=n(80388),o=n(91468);const s=["b","i","br","ul","li"];var l;!function(e){e.renderToHtml=function(e,t){const n=t?{allowedTags:s.concat(["a"]),linkRegExp:t}:{allowedTags:s};return i.yG(e,n)};e.getDotStyle=e=>a.$.isWritingExpert(e)?o.m.dotWritingExpert:r.R.outcomeTypeMatch({correctness:o.m.dotCorrectness,clarity:o.m.dotClarity,premium:o.m.dotAdvanced,engagement:o.m.dotEngagement,delivery:o.m.dotDelivery,vox:o.m.dotVox,knowledgeHub:o.m.knowledgeHub})(e.lensType)}(l||(l={}))},42877:(e,t,n)=>{n.d(t,{S:()=>r,s:()=>i});const r={z100:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 1px 8px rgba(0, 0, 0, .15)",z300:"0px 0px 0px 1px rgba(0, 0, 0, .05), 0px 4px 20px rgba(0, 0, 0, .15)"},i={llamaShadowToken:"0px 2px 8px 0px #1A213433, 0px 0px 0.5px 0px #000000B2"}},14323:(e,t,n)=>{n.d(t,{G3:()=>m,Vh:()=>p});var r=n(92379),i=n(6655),a=n(27640),o=n(79813),s=n(91020),l=n(3611),c=n(21961),d=n(70394),u=n(80249);const p=({card:{activeAlert:e,id:t,visualState:n},actions:p,mode:m,className:g,disabled:f})=>{const y=r.useContext(a.m.Context),v="mini"===m?h(n,y):"";return r.createElement(o.zx.Tertiary,{key:"toggle-more",name:h(n,y),title:v,"aria-label":v,className:g,disabled:f,onClick:l.hz((()=>{const r=c.X.isCardOpen(n);p.next({type:d.eI.Kind.startTransitionTo,id:t,transition:{type:r?"focused":"expanded",clockwise:!0}}),r||p.next({type:d.lY.Type.alertFeedback,alertId:e.id,feedbackType:i.PZ.EXPANDED})}))},c.X.isCardOpen(n)?r.createElement(s.JO.Arrow,{key:"more",className:u.h.lessIcon}):r.createElement(s.JO.QuestionMark,{key:"expand"}),"default"===m&&h(n,y))},m=({visualState:e,children:t,className:n})=>r.createElement("div",{className:(c.X.isCardOpen(e)?u.h.more:u.h.moreHidden)+" "+n},t);function h(e,t){const n=t.card;return c.X.isCardOpen(e)?n.less:n.more}},80249:(e,t,n)=>{n.d(t,{h:()=>S});var r=n(75068),i=n(98227),a=n(73141);const o={$nest:{"&:before":{position:"absolute",width:i.ux.px(10),height:i.ux.px(10),borderRadius:i.ux.percent(50),content:"''",transform:"scale(.5)"}}},s={opacity:1,transition:"opacity .3s"},l={color:r.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:r.xv.SubheadingLetterSpacing,fontSize:i.ux.rem(r.xv.SubheadingSize),lineHeight:i.ux.rem(r.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:i.ux.rem(.25)}}},c={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:i.ux.px(2),left:i.ux.rem(-1.1),margin:"auto 0"}}},d={$nest:{"&:before":{top:0,bottom:0,left:i.ux.rem(-1.1),margin:`${i.ux.rem(.25)} 0 auto 0`}}},u={margin:`0 ${i.ux.rem(.4)} 0 ${i.ux.rem(.2)}`,width:i.ux.rem(.85),height:i.ux.rem(.85),objectFit:"contain"},p={position:"absolute",top:0,bottom:0,left:i.ux.rem(-1),margin:"auto",transform:"translateX(-50%)"},m={minWidth:"initial",minHeight:"initial",padding:`${i.ux.rem(.3)} ${i.ux.rem(.25)}`,cursor:"pointer",borderRadius:i.ux.percent(100),marginLeft:i.ux.rem(.5),$nest:{"&:hover":{background:r.Il.CoreNeutral10}}},h={display:"flex",alignItems:"center",padding:`0 ${i.ux.rem(.25)}`,borderRadius:i.ux.rem(a.fx),cursor:"pointer",background:r.Il.CoreYellow20,color:r.Il.CoreYellow80,marginLeft:i.ux.rem(.5),$nest:{"&:hover":{background:r.Il.CoreYellow10}}},g={minWidth:"initial",minHeight:"initial",fill:r.Il.CoreYellow80,marginLeft:i.ux.rem(.3)},f={display:"flex",alignItems:"flex-start",top:i.ux.rem(.125),minWidth:"initial",minHeight:"initial",background:r.Il.CoreNeutral0},y={color:r.Il.CoreNeutral90,textTransform:"none",letterSpacing:r.xv.SmallLetterSpacing,fontWeight:r.xv.SmallWeight,fontSize:i.ux.rem(r.xv.SmallSize),lineHeight:i.ux.rem(r.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},v={color:r.Il.CoreNeutral50,textTransform:"none"},x={width:i.ux.rem(1),height:i.ux.rem(1)},I={display:"inline-flex",padding:`0 ${i.ux.rem(.25)}`,borderRadius:i.ux.rem(a.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},b={display:"inline-flex",marginLeft:i.ux.rem(.1),minWidth:0,minHeight:0},S=i.ux.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[s],moreHidden:[s,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[l],labelContainer:[{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"start"}],lens:[l,c],lensMinimal:[d],voxLogo:[u],cardLogo:[p],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[m],newPremiumLabel:[h],newPremiumLabelIcon:[g],takeawayIcon:[f],minimalTitle:[y],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[v],toneLogo:[p,x],fluencyLabel:[l,I],fluencyInfo:[b],dot:[o],ethicalAILabel:[{textTransform:"none"}]})},86845:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(84910),i=n(78520),a=n(92379),o=n(58303),s=n(24909),l=n(48906),c=n(59179),d=n(94032),u=n(28627),p=n(27640),m=n(98227),h=n(25188),g=n(91468);const f=e=>{const{shade:t}=(0,h.SA)(e.visualState),n=a.useContext(p.m.Context),{rect:m,onMount:g}=u.P.useRectWatcher(),f=m.pipe(c.U(o.Gg((e=>e.height>0))));a.useEffect((()=>{Boolean(t)||e.onFocus()}),[]);const y=e.theme||{};return a.createElement(s.F.div,{className:y.container},e.header,a.createElement(s.F.div,{className:y.innerContainer},a.createElement(s.F.div,(0,i._)((0,r._)({},(0,l.Sh)(E.wrapper,y.wrapper)),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),a.createElement(s.F.div,(0,l.Sh)(E.grid,y.content),a.createElement(s.F.div,(0,r._)({role:"region","aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${n.card.description}: ${e}`)))},(0,l.Sh)(E.mainContent,y.contentBody)),e.body),Boolean(e.footer)?a.createElement(s.F.div,{role:"complementary",mount:g,"aria-hidden":d.U_(f),"aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${n.card.more}: ${e}`))),className:E.footerContent},e.footer):null,Boolean(e.subActions)||Boolean(e.navigation)||Boolean(e.mainActions)?a.createElement(s.F.nav,{"aria-label":d.Dx(e.ariaLabel).pipe(c.U((e=>`${n.card.cardActions}: ${e}`))),className:E.actions},e.subActions,a.createElement("div",{className:E.spacerOne}),e.navigation,a.createElement("div",{className:E.spacerFloat}),e.mainActions):null)),e.extra))},y="& > * + *",v=.75,x={position:"relative"},I={padding:`${m.ux.rem(1)} ${m.ux.rem(.5)} ${m.ux.rem(v)} ${m.ux.rem(1)}`},b={padding:`0 ${m.ux.rem(.5)} 0 ${m.ux.rem(1)}`,$nest:{[y]:{marginTop:m.ux.rem(v)}}},S={padding:`0 ${m.ux.rem(.5)} 0 ${m.ux.rem(1)}`,$nest:{[y]:{marginTop:m.ux.rem(v)}}},C={display:"flex",marginLeft:m.ux.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},w={width:m.ux.rem(1),flexShrink:1},A={$nest:{[y]:{marginTop:m.ux.rem(v)}}},E=(0,i._)((0,r._)({},m.ux.stylesheet({mainContent:[b],footerContent:[S],actions:[C],spacerOne:[w],spacerFloat:[{flex:1}],grid:[A]})),{fullCard:m.ux.joinClasses([g.g.fullCardSelector,m.ux.style(x)]),wrapper:m.ux.joinClasses([g.g.fullCardSelector,m.ux.style(x,I)])})},91045:(e,t,n)=>{n.d(t,{PS:()=>Lt,mQ:()=>Mt,o:()=>_t,jt:()=>Tt,Kg:()=>ct,dk:()=>at,lJ:()=>yt,hl:()=>At,__:()=>wt,M9:()=>Dt,ko:()=>ot,hT:()=>It,q4:()=>vt,Dx:()=>bt,jg:()=>St,Ot:()=>Ct,Nm:()=>ft,VM:()=>Ht,eb:()=>Yt,k_:()=>Mn,m_:()=>Et,Bn:()=>Gn,IH:()=>qt,ce:()=>Wt});var r=n(84910),i=n(78520),a=n(92379),o=n(59833),s=n(90023),l=n(40902),c=n(54463),d=n(48906),u=n(24909),p=n(13391),m=n(31491),h=n(29227),g=n(72111),f=n(58303),y=n(84358),v=n(6655),x=n(6122),I=n(75068),b=n(73799),S=n(27640),C=n(60792),w=n(79813),A=n(84714),E=n(94032),k=n(59179),_=n(84308),T=n(954),M=n(20161),G=n(47311),L=n(98227),D=n(1755),N=n(79239),z=n(32719);function P(e){var t=e.value,n=e.initValue,i=void 0===n?z.g.MIN:n,o=e.wrapperClass,s=e.progressClass,l=e.borderClass,c=e.isLoading,p=void 0===c?A.of(!1):c,m=F(t,i);return a.createElement(u.F.div,(0,r._)({role:"progressbar","aria-label":"Progress","aria-valuenow":E.Dx(t).pipe(k.U(z.g.iso.unwrap))},(0,d.Sh)(Y.wrapper,o)),a.createElement(O,{width:m,progressClass:s,borderClass:l,isLoading:p}))}function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.g.MIN,n=p.h.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return n.set(!0)}))})),_.a(E.Dx(e),n,(function(e,n){return n?e:t}))}function O(e){var t=e.width,n=e.progressClass,o=e.isLoading,s=e.borderClass,l=t.pipe(k.U((function(e){return"".concat(e,"%")}))),c=t.pipe(k.U(z.g.prism.reverseGet),k.U((function(e){return e>0?"".concat(e+.75,"%"):0})),T.O(0)),p=o.pipe(M.w((function(e){return e?l:"0"}))),h=t.pipe(k.U(z.g.isMin),G.shareReplay({bufferSize:1,refCount:!0}));return a.createElement(a.Fragment,null,a.createElement(u.F.div,(0,i._)((0,r._)({},(0,d.Sh)(Y.borderContainer,h.pipe(k.U((0,m.RN)(Y.borderContainerZeroWidth,Y.borderContainerWithMinWidth))),s)),{style:{width:c}})),a.createElement(u.F.div,(0,i._)((0,r._)({},(0,d.Sh)(Boolean(n)?n:Y.defaultProgress,Y.progressBar,h.pipe(k.U((0,m.RN)(Y.progressBarZeroWidth,Y.progressBarWithMinWidth))))),{style:{width:l}})),a.createElement(u.F.div,{className:Y.loading,style:{width:p}}))}var R=L.ux.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),$={position:"relative",width:L.ux.percent(100),height:L.ux.rem(.25),borderRadius:L.ux.rem(N.Jr),backgroundColor:D.xO},B={position:"relative",top:0,height:L.ux.percent(100),borderRadius:L.ux.rem(N.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},U={minWidth:L.ux.px(4)},j={position:"absolute",backgroundColor:I.Il.CoreNeutral0},W={minWidth:L.ux.px(6)},H={position:"absolute",minWidth:0,backgroundImage:D.b6,backgroundSize:"20px 20px",transition:"none",animation:"".concat(R," 1s linear infinite")},Y=L.ux.stylesheet({wrapper:[$,$],progressBar:[B],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[U],borderContainer:[B,j],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[W],loading:[B,H],defaultProgress:[{backgroundImage:"linear-gradient(to right, #6391ff 0%, #2a42ef 100%)"}]}),V=n(91020),Q=n(86724),q=n(80100),J=n(99210),X=n(85184),Z=n(32490),K=n(67225),ee=n(98192),te=n(36466),ne=n(2123),re=n(64297),ie=2*Math.PI*32,ae=36,oe="#f1f2fa",se="#fff",le=function(e,t,n){return e<t?t:e>n?n:e},ce=function(e){switch(e){case me.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:oe,outline:se};case me.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:oe,outline:se};case me.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:oe,outline:se};case me.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:oe,outline:se};case me.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:oe,outline:se};case me.ColorType.logan:return{type:"plain",value:"#a6adc9",background:oe,outline:se};case me.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case me.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case me.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case me.ColorType.green:return{type:"plain",value:te.I.Background.Brand.Default,background:te.I.Background.Brand.Subdued};case me.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case me.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case me.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case me.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,re.vE)(e)}},de=function(e){switch(e){case me.FontSize.normal:return 32;case me.FontSize.small:return 24;default:return(0,re.vE)(e)}},ue=function(e){switch(e){case me.IconSize.pdf:case me.IconSize.normal:case me.IconSize.outcome:return 5;case me.IconSize.small:return 3;case me.IconSize.extraSmall:return 10;default:return(0,re.vE)(e)}},pe=function(e){switch(e){case me.IconSize.pdf:return 110;case me.IconSize.normal:return 52;case me.IconSize.outcome:return 32;case me.IconSize.small:return 24;case me.IconSize.extraSmall:return 16;default:return(0,re.vE)(e)}},me=function(e){(0,K._)(n,e);var t=(0,ee._)(n);function n(){var e;return(0,J._)(this,n),e=t.apply(this,arguments),(0,Z._)((0,q._)(e),"_gradientId",void 0),e}return(0,X._)(n,[{key:"render",value:function(){var e,t,o,s,l,c=this.props,u=c.percentage,p=c.aimValue,m=void 0===p?100:p,h=c.colorType,g=void 0===h?n.ColorType.logan:h,f=c.fontSize,y=void 0===f?n.FontSize.normal:f,v=c.iconSize,x=void 0===v?n.IconSize.normal:v,I=c.description,S=c.theme,C=void 0===S?ye:S,w=[a.createElement("circle",{key:"circle",id:"circle",cx:ae,cy:ae,r:32,fill:"none"})],A=de(y),E=ue(x),k=le(u,0,100),_=le(m,k,100),T=k*ie/100,M=_*ie/100,G=360*E/ie,L=k?ie-T-2*E:ie,D=ce(g);if("plain"===D.type)e=D.value,t=e,o=D.outline,s=D.background,l=void 0===D.backgroundOpacity?1:D.backgroundOpacity;else{var N=D.value;this._gradientId=Boolean(this._gradientId)?this._gradientId:"pb-gradient-".concat(n._nextGradientId++),w.push(a.createElement("linearGradient",(0,r._)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},N.coordinates),a.createElement("stop",{stopColor:N.start,offset:"0%"}),a.createElement("stop",{stopColor:N.end,offset:"100%"}))),e="url(#".concat(this._gradientId,")"),t="#2b2d38",o=D.outline,s=D.background,l=void 0===D.backgroundOpacity?1:D.backgroundOpacity}return a.createElement(b.a.Context.Consumer,null,(function(n){return a.createElement(V.a1,(0,i._)((0,r._)({},(0,d.Sh)(ye.iconWrapper,C.radialProgressBar)),{width:pe(x),viewBox:"0 0 ".concat(72," ").concat(72)}),a.createElement("defs",null,w),a.createElement("g",null,a.createElement("use",{className:ye.valueCircle,stroke:k>=94&&Boolean(o)?o:s,strokeOpacity:l,strokeWidth:E,strokeDasharray:ie,strokeDashoffset:ie-M,transform:"rotate(-90 ".concat(ae," ").concat(ae,")"),strokeLinecap:"round",xlinkHref:"#circle"}),Boolean(o)?a.createElement("use",{className:ye.valueCircle,stroke:o,strokeWidth:E,strokeDasharray:ie,strokeDashoffset:L,transform:"rotate(".concat(-90-G," ").concat(ae," ").concat(ae,")"),strokeLinecap:"round",xlinkHref:"#circle"}):null,a.createElement("use",{className:ye.valueCircle,stroke:e,strokeDasharray:ie,strokeDashoffset:ie-T,strokeLinecap:"round",transform:"rotate(-90 ".concat(ae," ").concat(ae,")"),strokeWidth:E,xlinkHref:"#circle"}),a.createElement("text",(0,r._)({className:C.radialProgressText,y:"38",x:"36",fill:t,fontSize:A,fontStyle:"normal",textAnchor:"middle"},(0,ne.h5)(n.has(b.a.Flag.supportsSVGDominantBaseline))),k),Boolean(I)?a.createElement("text",{className:C.radialProgressDescription,fill:t,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},I):null))}))}}]),n}(a.Component);(0,Z._)(me,"_nextGradientId",0),function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(me||(me={}));var he={width:L.ux.percent(100),height:L.ux.percent(100),fontWeight:"bold",fill:I.Il.CoreNeutral90},ge={fontSize:L.ux.rem(2),fill:I.Il.CoreNeutral90},fe={fontWeight:"normal",fontSize:L.ux.px(11),fill:D.UE},ye=L.ux.stylesheet({radialProgressBar:[he],radialProgressText:[ge],radialProgressDescription:[fe],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]}),ve=n(66836),xe=n(66918),Ie=n(59640),be=n(77933),Se=n(17690),Ce=n(73141),we=n(28627),Ae=n(23841),Ee=n(3611),ke=n(80388),_e=n(21961),Te=n(17560),Me=n(70394),Ge=n(90658),Le=n(88367),De=n(55247),Ne=n(82174),ze=n(91468),Pe=n(81636),Fe=n(52382),Oe=n(14323),Re=n(86845),$e=n(7496),Be=n(35917),Ue=n(90127);const je=({examples:e,layoutDensity:t})=>a.createElement(Be.Z,{nodeType:"table",styleType:Be.Z.Type.Base,className:et.wrapper},e.map(((e,n)=>a.createElement("tbody",{key:n,className:et.group},e.map((({text:e,title:n,color:i,hasItalic:o},l)=>a.createElement("tr",{key:l,className:(0,s.zG)(t,Le.j.Density.matchL((()=>et.item),(()=>et.itemCompact),(()=>et.itemMinimal)))},(0,s.zG)(n,f.UI((e=>a.createElement("td",{className:Ue.J.colorMatch(i)(et)},(e=>e.split("/").reduce(((e,t,n)=>(0!==n&&e.push(a.createElement("br",{key:n})),e.push(t),e)),[]))(e)))),f.WG),a.createElement("td",(0,r._)({colSpan:f.Wi(n)?2:void 0,className:o?et.content:et.contentItalic},Ee.yG(e)))))))))),We={$nest:{"&:not(:last-child):after":{display:"block",height:L.ux.rem(1.75),content:"''"}}},He={$nest:{"&:not(:last-child)":{borderBottom:`${L.ux.rem(.5)} solid transparent`}}},Ye={display:"flex",flexDirection:"column",lineHeight:L.ux.rem(1.3125)},Ve={padding:0,verticalAlign:"top",lineHeight:L.ux.rem(1.25)},Qe={paddingRight:L.ux.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},qe={color:I.Il.CoreNeutral50,fontFeatureSettings:`${Ce.g_}, ${Ce.xL}`},Je={color:I.Il.CoreRed50},Xe={color:I.Il.CoreGreen70},Ze={color:I.Il.CoreNeutral90},Ke={color:I.Il.CoreNeutral90},et=L.ux.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[We],item:[He],itemCompact:[He,{display:"flex",flexDirection:"column"}],itemMinimal:[He,Ye],baseBlock:[Ve],title:[Ve,Qe],content:[Ve,qe],contentItalic:[Ve,qe,{fontStyle:"italic"}],red:[Ve,Qe,Je],green:[Ve,Qe,Xe],yellow:[Ve,Qe,Ze],fallback:[Ve,Qe,Ke]});var tt=n(99747),nt=n(14196);const rt=(0,m.HP)(g.C8.Logging.getLogger);var it;!function(e){var t=e.actionRegex=/^#([\w\d_-]+)$/;e.parse=e=>(0,s.zG)(f.ij(e.match(t)),f.tS((e=>{switch(e[1]){case"set-goals":return f.G(Me.lY.Type.openSetGoals);case"ideas-gallery":return f.G(Me.lY.Type.openIdeasGallery);default:return f.YP}})))}(it||(it={}));const at=({description:e,actions:t,layoutDensity:n,className:i})=>{const o=a.useContext(S.m.Context),l=a.useContext(xe.G.Context),{ref:c,onMount:u}=we.P.useElWatcher();we.P.useSubscriptionTo(c.pipe(Ae.oA,G.switchMap((e=>Array.from(e.getElementsByTagName("a")).reduce(((e,n)=>{const r=G.fromEvent(n,"click").pipe(G.tap((e=>e.preventDefault())));return(0,s.zG)(f.ij(n.getAttribute("href")),f.tS(it.parse),f.g_((()=>(rt("Description").error("Invalid action",n),e.pipe(G.merge(r)))),(i=>G.mergeStatic(e,i in o.card.actionDescription&&i!==Me.lY.Type.openIdeasGallery?l.getTooltipObservable(n,o.card.actionDescription[i],"auto",f.YP):G.EMPTY,r.pipe(G.mapTo({type:i}),G.tap((e=>t.next((0,s.MZ)(e)))))))))}),G.EMPTY)))));const p=(0,s.zG)(n,Le.j.Density.matchOrDefault(Le.j.Density.minimal)((()=>Dn.minimalDescription),(()=>Dn.description)));return a.createElement(be.XY,(0,r._)({mount:u},(0,d.Sh)(p,i),Fe.y.renderToHtml(e,it.actionRegex)))},ot=({card:e,isChecking:t})=>Se.bZ.isRated(e.activeAlert)?a.createElement(P,{value:_e.X.isCardPresuccess(e.visualState)?z.g.MAX:e.meta.percentile,initValue:_e.X.isCardPresuccess(e.visualState)?e.meta.percentile:z.g.MIN,isLoading:t}):null,st=({card:e})=>{const t=F(_e.X.isCardPresuccess(e.visualState)?z.g.MAX:e.meta.percentile,_e.X.isCardPresuccess(e.visualState)?e.meta.percentile:z.g.MIN);return a.createElement(u.F.Fragment,null,t.pipe(G.map(z.g.prism.reverseGet),G.map((e=>a.createElement(me,{percentage:e,colorType:me.ColorType.neoBlue,iconSize:me.IconSize.extraSmall,theme:{radialProgressBar:Dn.circleProgress,radialProgressText:Dn.circleText}})))))},lt=({card:e,feedbackActions:t,onClick:n,disabled:r})=>{const i=a.useContext(S.m.Context);return a.createElement(w.zx.Tertiary,{name:"ignore",title:i.dismiss,"aria-label":i.dismiss,onClick:Ee.hz((()=>{t.next({type:Me.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:_e.X.isEligibleForDismissSurvey(e),drilldownSuggestionIds:Ge.i.isSynfonyItem(e)?(0,s.zG)(e.synfonySelection,f.fS((()=>[]))):void 0}),n&&n()})),disabled:r},a.createElement(l.J,{icon:c.o,accessibilityLabel:"Dismiss",variant:"inherit"}))},ct=({card:e,feedbackActions:t,disabled:n,onClickDismissButton:r,alwaysShowWrongAndOffensiveButtons:i})=>a.createElement(a.Fragment,null,a.createElement(lt,{card:e,feedbackActions:t,onClick:r,disabled:n}),a.createElement(ht,{id:e.id,activeAlert:e.activeAlert,onMute:(0,s.zG)(e.muteCategory,f.UI((n=>Ee.hz((()=>t.next({type:Me.lY.Type.muteAlertCategory,categoryId:n.id,id:e.id,viewType:e.activeAlert.type})))))),onWrong:Ee.hz(Ee.hz((()=>t.next({type:Me.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:v.PZ.WRONG_SUGGESTION})))),onOffensive:Ee.hz(Ee.hz((()=>t.next({type:Me.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:v.PZ.OFFENSIVE_CONTENT})))),onVisibilityChange:e=>t.next({type:Me.lY.Type.moreActionsButtonToggle,mode:e?"open":"closed"}),alwaysShowWrongAndOffensiveButtons:i})),dt=()=>{const e=a.useContext(S.m.Context);return a.createElement(a.Fragment,null,a.createElement(V.JO.Mute,null),e.card.mute)},ut=()=>{const e=a.useContext(S.m.Context);return a.createElement(a.Fragment,null,a.createElement(V.JO.Report,null),e.card.wrong)},pt=()=>{const e=a.useContext(S.m.Context);return a.createElement(a.Fragment,null,a.createElement(V.JO.Report,null),e.card.offensive)},mt=e=>(0,s.zG)(e.extraProperties.vox,y.dH((()=>null),a.createElement(pt,null))),ht=({id:e,activeAlert:t,onMute:n,onWrong:r,onOffensive:i,alwaysShowWrongAndOffensiveButtons:l=!1})=>{const c=a.useContext(S.m.Context),d=f.pC(t.getTransform()),u=f.pC(n),p=d||l,m={turnoff:(0,s.zG)(n,f.fS((()=>s.Q1))),incorrect:r,offensive:i};return(0,s.zG)(u||p,f.DT(s.yR),f.UI((()=>a.createElement(x.v.Dropdown,{id:e,placement:"bottom end",label:a.createElement(V.T1.MoreVertical,null),"aria-label":c.card.moreActions,onAction:e=>m[e](),items:(0,s.zG)([(0,s.zG)(n,f.UI((()=>[a.createElement(x.v.Item,{key:"turnoff",textValue:"turnoff"},a.createElement(dt,null))])),f.UI((e=>({key:"turnoff",children:e})))),(0,s.zG)(d||l,f.DT(s.yR),f.UI((()=>{const e=[a.createElement(x.v.Item,{key:"incorrect",textValue:"incorrect"},a.createElement(ut,null))],n=mt(t);return n&&e.push(a.createElement(x.v.Item,{key:"offensive",textValue:"offensive"},n)),e})),f.UI((e=>({key:"wrongAndOffensive",children:e}))))],o.DZ(s.yR))},(e=>a.createElement(x.v.Section,{key:e.key},e.children))))),y.QP)},gt=({card:e,onClick:t,mode:n="default"})=>{const o=a.useContext(S.m.Context),s=a.useContext(b.a.Context),l=a.useCallback((e=>{s.has(b.a.Flag.onlyTrustedEvents)&&!e.isTrusted||t()}),[]),c=e.renderOptions.features.has(Le.j.Features.showAnonymousUserFooters)?{disabled:!0,title:o.card.disabledForAnonymous}:{title:"mini"===n?o.card.addToDict:""};return e.activeAlert.extraProperties.hasAddToDictionary?a.createElement(w.zx.Tertiary,(0,i._)((0,r._)({},c),{name:"add-to-dict",onClick:l}),a.createElement(V.JO.Dict,null),o.card.addToDict):null},ft=({title:e,checkingInProgress:t,checkingMessage:n,applyMessage:o,onClick:s,disabled:l,className:c,spinnerClassName:p,messageClassName:g})=>a.createElement(w.zx.Primary,(0,i._)((0,r._)({key:"update-all",name:"update-all",title:e},(0,d.Sh)(t.pipe(G.map((0,m.RN)($e.V.updateAllBtnLoading,$e.V.updateAllBtn))),c)),{disabled:t.view((e=>e||!0===l)),children:a.createElement(u.F.Fragment,null,t.pipe(G.map((0,m.RN)(a.createElement(a.Fragment,{key:"update-all-checking"},a.createElement("span",{className:g},(0,h.kC)(n)),a.createElement(ve.$,{size:18,strokeWidth:2,wrapperClassName:(0,d.Sh)($e.V.updateBtnSpinner,p).className,variation:"white"})),a.createElement(a.Fragment,{key:"update-all-checked"},(0,h.kC)(o)))))),onClick:Ee.hz(s)})),yt=({card:e})=>(0,s.zG)(kt(e.activeAlert,e.renderOptions.layoutDensity),f.UI((t=>a.createElement(Oe.G3,{key:"card-actions-details",visualState:e.visualState,className:Dn.more},t))),f.WG),vt=({card:e,actions:t})=>Et(e.activeAlert,e.renderOptions.layoutDensity)?a.createElement(Oe.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):Ge.i.isDefaultItem(e)?a.createElement(gt,{key:"card-actions-button",card:e,mode:"default",onClick:Ee.hz((()=>t.next({type:Me.lY.Type.alertFeedback,alertId:e.activeAlert.id,feedbackType:v.PZ.ADD_TO_DICTIONARY})))}):null,xt=e=>{const t=e.showDemoDocOnboardingA11yUpdates?{title:"Review suggestions",message:"Grammarly checks for mistakes and suggests ways to improve your text."}:{message:"Click a suggestion to accept it."};return a.createElement(Ne.TG,{alignment:"bottom",eventType:"onclick",stepId:De.X.StepId.Step4,title:t.title,message:t.message,dotPosition:{kind:"findFirstButton",position:Ne.E2.rightTop},themes:{containerWrapperClassName:Dn.onboardingNotification}},e.children)},It=({onClick:e,rl:t,layoutDensity:n,a11yContrast:r,showDemoDocOnboardingA11yUpdates:i})=>a.createElement(xt,{showDemoDocOnboardingA11yUpdates:i},a.createElement(tt.zO,{replacementsLabels:t,onClick:e,layoutDensity:n,a11yContrast:r})),bt=({text:e})=>a.createElement(be.P1,(0,r._)({className:Dn.title},Fe.y.renderToHtml(e))),St=({text:e})=>a.createElement(be.P1,(0,r._)({className:Dn.titleMinimal},Fe.y.renderToHtml(e))),Ct=({alert:e})=>a.createElement(be.H4,(0,r._)({className:Dn.title},Fe.y.renderToHtml(e.title))),wt=({alert:e,options:t,children:n,className:o,badge:s})=>{const l=a.useContext(S.m.Context);return a.createElement(u.F.Fragment,null,t.cardVisualMode.pipe(G.map((c=>a.createElement(Pe.oL,(0,i._)((0,r._)({activeAlert:e,cardVisualMode:c,showCardLabel:t.features.has(Le.j.Features.showLabel),premiumAlertLabelHighlight:t.features.has(Le.j.Features.showNewPremiumCardLabels)?Pe.a0.new:t.features.has(Le.j.Features.showPersistentPremiumCardLabels)?Pe.a0.persistent:Pe.a0.none,layoutDensity:t.layoutDensity},(0,d.Sh)(Dn.label,o)),{badge:e.extraProperties.isBeta?a.createElement(C.C.Regular,{a11yContrast:t.features.has(Le.j.Features.a11yContrast)},l.beta):s}),n)))))},At=({text:e,layoutDensity:t})=>a.createElement("div",{className:Dn.highlightedTextBox},a.createElement(be.XY,{className:(0,s.zG)(t,Le.j.Density.matchOrDefault(Le.j.Density.minimal)((()=>Dn.minimalHighlightedTextInnerBox),(()=>Dn.highlightedTextInnerBox)))},e));function Et(e,t){return!e.extraProperties.hasAddToDictionary&&(!(!f.pC(e.examples)&&!f.pC(e.details))||!(t!==Le.j.Density.minimal||!f.pC(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation))}const kt=(e,t)=>{if(!Et(e,t))return y.cS();const n=(0,s.zG)(t,Le.j.Density.matchOrDefault(Le.j.Density.minimal)((()=>Dn.minimalDescription),(()=>Dn.description)));return f.G(a.createElement(a.Fragment,null,(0,s.zG)(t,Le.j.Density.matchOrDefault(Le.j.Density.minimal)((()=>f.Wi(e.details)?a.createElement(be.XY,(0,r._)({className:n},Fe.y.renderToHtml(e.explanation,it.actionRegex))):null),(()=>null))),(0,s.zG)(e.details,f.UI((e=>a.createElement(be.XY,(0,r._)({className:n},Fe.y.renderToHtml(e))))),f.WG),(0,s.zG)(e.examples,f.UI((e=>a.createElement(je,{layoutDensity:t,examples:e}))),f.WG)))},_t=({isChecking:e})=>a.createElement(u.F.Fragment,null,e.pipe(G.map((e=>a.createElement(ve.$,{className:e?Dn.spinner:Dn.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2}))))),Tt=e=>{const[t,n]=a.useState(!0);return t?a.createElement(Nt,{type:e.type,actions:e.actions,onClose:()=>n(!1)}):null},Mt=({card:e,actions:t})=>{if(Ge.i.isEthicalAIItem(e)||Ge.i.isSuggestedSnippetItem(e)||Ge.i.isKnowledgeHubSuggestedTermItem(e))return null;if(!(0,s.zG)(e.activeAlert.isFree)&&e.renderOptions.features.has(Le.j.Features.showYellowFooterForTrialUsers))return a.createElement($t,null);if((0,s.zG)(e.activeAlert.extraProperties.freePremium,y.FX("unlocked")))return a.createElement(Ot,null);if((0,s.zG)(e.activeAlert.extraProperties.premiumYellowFooterVariant,f.pC))return(0,s.zG)(e.activeAlert.extraProperties.premiumYellowFooterVariant,f.g_((()=>null),(e=>a.createElement(Rt,{variant:e}))));if(!ke.$.isFree(e.activeAlert)&&e.renderOptions.features.has(Le.j.Features.showPremiumOnboarding))return a.createElement(Bt,null);if(!ke.$.isFree(e.activeAlert)&&e.renderOptions.features.has(Le.j.Features.showPremiumTrialFooters))return a.createElement(Ft,{actions:t});if(e.renderOptions.features.has(Le.j.Features.showAnonymousUserFooters))return a.createElement(Pt,{actions:t,card:e});const n=e.renderOptions.isPremiumOnboarding||p.h.create(!1);return a.createElement(u.F.Fragment,null,n.view((n=>!ke.$.isFree(e.activeAlert)&&Boolean(n)?a.createElement(Bt,null):(0,s.zG)(e.renderOptions.layoutDensity,Le.j.Density.matchOrDefault(Le.j.Density.cozy)((()=>a.createElement(zt,{card:e,actions:t})),(()=>(0,s.zG)(e.activeAlert.extraProperties.fluencyMessage,f.g_((()=>a.createElement(zt,{card:e,actions:t})),(e=>a.createElement(Ut,{fluencyLabel:e}))))))))))};function Gt(e,t,n){n.next({type:Me.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}const Lt=({card:e,actions:t})=>{const n=a.useContext(S.m.Context).card.matchesNavigation;return a.createElement(u.F.Fragment,null,(0,s.zG)(e,G.map((e=>a.createElement("div",{key:e.activeAlert.id,className:Dn.bundleNavWrapper},a.createElement(be.XY,{className:Dn.bundleTitle},Te.R.bundleTitle(e)),a.createElement("div",{className:Dn.bundleNavMatchesRow},a.createElement(w.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:Dn.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:()=>Gt("left",e,t)},a.createElement(V.JO.Arrow,{className:Dn.bundleNavLeftButtonIcon})),a.createElement(be.ck,{className:Dn.bundleNavCount},n.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),a.createElement(w.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:Dn.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:()=>Gt("right",e,t)},a.createElement(V.JO.Arrow,{className:Dn.bundleNavRightButtonIcon}))))))))},Dt=({card:e,actions:t,isChecking:n})=>a.createElement(a.Fragment,null,(0,s.zG)(e.renderOptions.layoutDensity,Le.j.Density.matchOrDefault(Le.j.Density.minimal)((()=>Se.bZ.isRated(e.activeAlert)?a.createElement(a.Fragment,null,a.createElement(st,{card:e}),a.createElement(St,{text:e.activeAlert.miniCardTitle})):a.createElement(wt,{alert:e.activeAlert,options:e.renderOptions},a.createElement(St,{text:e.activeAlert.miniCardTitle}))),(()=>a.createElement(a.Fragment,null,a.createElement(wt,{alert:e.activeAlert,options:e.renderOptions}),a.createElement(bt,{text:e.activeAlert.title}),a.createElement(ot,{card:e,isChecking:n}))))),a.createElement(at,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),Nt=e=>{const t=a.useContext(S.m.Context),{title:n,content:r}=t.card.onboarding[e.type];return a.useLayoutEffect((()=>()=>e.actions.next({type:Me.lY.Type.onboardingClose,value:e.type}))),a.createElement(Q.DI.AdHoc,{key:"new-notification",title:a.createElement(a.Fragment,null,n,a.createElement(C.C.Regular,{className:Dn.newLabel},t.new)),className:Dn.newCheckNotification,onClose:e.onClose},r)},zt=({actions:e,card:t})=>{const n=a.useContext(S.m.Context);return we.P.useEffectOnDidMount((()=>{t.meta.showMuteQuotedAdvice&&e.next({type:Me.lY.Type.muteQuotedAdviceShow})})),t.meta.showMuteQuotedAdvice?a.createElement(jt.Base,{className:dn},a.createElement("span",null,n.card.muteCitedText(a.createElement("button",{"data-name":"open-preferences-link",onClick:()=>e.next({type:Me.lY.Type.openPreferences})},n.documentSettings.editorSettings))),a.createElement(w.zx,{name:"dismiss-mute-quoted-advice",onClick:()=>e.next({type:Me.lY.Type.dismissMuteQuotedAdvice})},a.createElement(V.JO.Close,null))):null},Pt=({actions:e,card:t})=>{const n=a.useContext(S.m.Context),r=t.activeAlert.extraProperties.hasAddToDictionary?n.anonymousUserAddToDictionarySignInPrompt:n.anonymousUserGenericSignInPrompt;return a.createElement(jt.Base,{className:Dn.anonymousUserNotice},r((()=>{e.next({type:Me.lY.Type.toSignIn})})))},Ft=({actions:e})=>a.createElement(jt.Small,{className:pn},a.createElement(V.JO.PaidLink,{className:Dn.iconWrapper,width:12}),a.useContext(S.m.Context).premiumFreeTrial((()=>{e.next({type:Me.lY.Type.premiumTrialFooterCtaClick})}))),Ot=()=>{const{beforeIcon:e,afterIcon:t}=a.useContext(S.m.Context).freePremiumAlertFooter;return a.createElement(jt.Small,{className:gn},e,a.createElement(V.JO.PaidLink,{width:12}),t)},Rt=({variant:e})=>{const t=a.useContext(S.m.Context).premiumFooter;return a.createElement(jt.Small,{className:fn},a.createElement(V.JO.PaidLink,{width:12}),t[e])},$t=()=>{const{freeTrialAlertFooter:e}=a.useContext(S.m.Context);return a.createElement(jt.Small,{className:gn},a.createElement(V.JO.PaidLink,{width:12}),e)},Bt=()=>{const{premiumOnboardingFooter:e}=a.useContext(S.m.Context);return a.createElement(jt.Small,{className:hn},a.createElement(V.JO.PaidLink,{width:12}),e)},Ut=({fluencyLabel:e})=>{const t=a.useContext(S.m.Context).card.fluency;return a.createElement(be.x4,{className:Dn.fluencyNotice},e,a.createElement(Ie.u,{title:t.tooltip},a.createElement(V.JO.Info,{width:10,className:Dn.fluencyInfo})))};var jt;!function(e){function t(e){return({children:t,className:n})=>a.createElement(e,(0,d.Sh)(Dn.cardFooter,n),t)}e.Small=t(be.x4),e.Base=t(be.XY)}(jt||(jt={}));function Wt(e){const{transformHidden:t,isMouseInside:n,transformHiddenObservable:r}=we.P.useMemoOnDidMount((()=>{const t=p.h.create(!1),n=new G.Subject,r=G.mergeStatic(G.combineLatestStatic([n,e]).pipe(G.map((([e,t])=>e&&t)),G.filter((e=>!0===e)),G.tap((()=>t.set(!0)))),e.pipe(G.skip(1),G.filter((e=>!e)),G.tap((()=>t.set(!1)))));return{transformHidden:t,isMouseInside:n,transformHiddenObservable:r}}));return we.P.useSubscriptionTo(r),{transformHidden:t,isMouseInside:n}}const Ht=({card:e,actions:t,isChecking:n,isCheckingGlobal:i,cardTheme:o,cardBody:s,cardFooter:l,mainActions:c,subActions:d,cardExtra:u})=>{var p,h,g,f;const{transformHidden:y,isMouseInside:v}=Wt(n);return a.createElement(Re.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:Me.lY.Type.alertCardShow,cardType:Me.lY.getCardType(e),alertId:e.activeAlert.id})},onMouseOver:()=>{t.next({type:Me.lY.Type.hover,kind:"hover",id:e.id}),v.next(!0)},onMouseOut:()=>{t.next({type:Me.lY.Type.hover,kind:"unhover",id:e.id}),v.next(!1)},theme:(0,r._)({content:i.pipe(G.map((0,m.RN)(Dn.loadingWrapperInvisible,Dn.loadingWrapper)))},(0,nt.Gh)(e.renderOptions),o),extra:a.createElement(a.Fragment,null,a.createElement(_t,{isChecking:i}),null===(p=u)||void 0===p?void 0:p()),body:s(y),mainActions:null===(h=c)||void 0===h?void 0:h(),footer:null===(g=l)||void 0===g?void 0:g(y),subActions:null===(f=d)||void 0===f?void 0:f()})},Yt=({card:e,actions:t,isChecking:n,body:r,footer:i,alwaysShowWrongAndOffensiveButtons:o})=>a.createElement(Re.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:Me.lY.Type.alertCardShow,cardType:Me.lY.getCardType(e),alertId:e.activeAlert.id})},theme:(0,nt.Gh)(e.renderOptions),body:null!=r?r:a.createElement(Dt,{card:e,actions:t,isChecking:n}),mainActions:a.createElement(ct,{card:e,feedbackActions:t,alwaysShowWrongAndOffensiveButtons:o}),footer:null!=i?i:a.createElement(yt,{card:e}),subActions:a.createElement(vt,{card:e,actions:t}),extra:a.createElement(Mt,{card:e,actions:t})}),Vt={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",display:"inline",textDecoration:"none",$nest:{"&:link, &:visited":{color:I.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:`${Ce.g_}, ${Ce.xL}`},"& ul":{margin:`${L.ux.rem(.75)} 0 0`,padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:L.ux.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:L.ux.rem(.5)}}},Qt={lineHeight:L.ux.rem(1.3125),$nest:{"& a":{display:"initial"}}},qt={$nest:{"& i":{color:I.Il.CoreNeutral50},"& > * + *":{marginTop:L.ux.rem(.75)}}},Jt={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:I.Il.CoreRed50}}},Xt={marginTop:L.ux.important(0),lineHeight:L.ux.rem(1.125)},Zt={fontSize:L.ux.rem(I.xv.SubheadingSize),lineHeight:L.ux.rem(I.xv.SubheadingLineHeight)},Kt={width:L.ux.rem(2),height:L.ux.rem(2)},en={position:"absolute",top:`calc(50% - ${L.ux.rem(1)})`,left:`calc(50% - ${L.ux.rem(1)})`,width:L.ux.rem(2),height:L.ux.rem(2),transition:"opacity .2s"},tn={marginLeft:L.ux.rem(.5),backgroundColor:I.Il.CoreGreen50,color:I.Il.CoreNeutral0,fontWeight:600},nn={position:"absolute",marginTop:L.ux.rem(-8.5),marginLeft:L.ux.rem(-2),$nest:{"&:after":{position:"absolute",bottom:L.ux.rem(-.525),left:L.ux.rem(.7),borderTop:`${L.ux.rem(.625)} solid ${I.Il.BackgroundNotification}`,borderRight:`${L.ux.rem(.5)} solid transparent`,borderLeft:`${L.ux.rem(.5)} solid transparent`,content:"' '"}}},rn={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},an={position:"absolute",top:L.ux.rem(.75),left:L.ux.rem(.4)},on={color:I.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:I.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:I.Il.CoreBlue50},"&:hover":{borderBottom:`1px solid ${I.Il.CoreBlue40}`,color:I.Il.CoreBlue40}}}}},sn={display:"flex",borderRadius:`${Ce.LB} ${Ce.LB} ${L.ux.rem(Ce.Jr)} ${L.ux.rem(Ce.Jr)}`,color:I.Il.CoreNeutral50,padding:`${L.ux.rem(.5)} ${L.ux.rem(.75)} ${L.ux.rem(.5)} ${L.ux.rem(1)}`,fontSize:L.ux.rem(.6875),lineHeight:L.ux.rem(1.125)},ln={padding:`0 ${L.ux.rem(.6)}`,minWidth:L.ux.rem(.625),minHeight:L.ux.rem(.625)},cn="muteQuotedAdvice",dn=L.ux.joinClasses([cn,L.ux.style({$nest:{"& button":{border:0,textDecoration:"underline",textUnderlineOffset:2,color:I.Il.CoreBlue50,background:"none",padding:0,$nest:{"&:link, &:visited":{color:I.Il.CoreBlue50},"&:hover":{color:I.Il.CoreBlue40}}},"& i:hover":{strokeWidth:L.ux.px(2)}}})]),un="premiumFreeTrial",pn=L.ux.joinClasses([un,L.ux.style({$nest:{"& svg":{fill:I.Il.CoreYellow80},"& a":{fontWeight:800,color:I.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:I.Il.CoreYellow80},"&:hover":{borderBottom:`1px solid ${I.Il.CoreYellow60}`,color:I.Il.CoreYellow60}}}}})]),mn="premiumAlertFooter",hn=L.ux.joinClasses([mn,L.ux.style({justifyContent:"center"})]),gn=L.ux.joinClasses([mn,L.ux.style({justifyContent:"start",padding:L.ux.important(`${L.ux.rem(.5)} ${L.ux.rem(1)}`)})]),fn=L.ux.joinClasses([mn,L.ux.style({justifyContent:"start",padding:L.ux.important(`${L.ux.rem(.5)} ${L.ux.rem(1)} ${L.ux.rem(.5)} ${L.ux.rem(1.75)}`)})]),yn={display:"block",boxSizing:"border-box",padding:`${L.ux.rem(1)} ${L.ux.rem(1)} ${L.ux.rem(1)} ${L.ux.rem(1.5)}`,width:L.ux.percent(100),borderRadius:`${Ce.LB} ${Ce.LB} ${L.ux.rem(Ce.Jr)} ${L.ux.rem(Ce.Jr)}`,$nest:{"& a":{cursor:"pointer",transition:"color .2s"},"&.muteQuotedAdvice":{display:"flex",padding:`${L.ux.rem(1)} ${L.ux.rem(1)} ${L.ux.rem(1)} ${L.ux.rem(2)}`,background:I.Il.CoreNeutral10,color:I.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},"&.premiumFreeTrial":{padding:`${L.ux.rem(1)} ${L.ux.rem(1)} ${L.ux.rem(1)} ${L.ux.rem(2)}`,position:"relative",background:I.Il.CoreYellow20,color:I.Il.CoreNeutral90},"&.premiumAlertFooter":{display:"flex",alignItems:"center",padding:L.ux.rem(.5),background:I.Il.CoreYellow20,color:I.Il.CoreYellow80,$nest:{"& svg":{margin:`0 ${L.ux.rem(.25)}`,fill:I.Il.CoreYellow80}}}}},vn={position:"absolute",top:L.ux.rem(.8),left:L.ux.rem(.5),minWidth:L.ux.rem(1),minHeight:L.ux.rem(1)},xn={fontWeight:"bold",fontSize:L.ux.rem(.875),lineHeight:L.ux.rem(1.125),flex:2},In={padding:`${L.ux.rem(.625)} 0 ${L.ux.rem(.1875)} ${L.ux.rem(.5)}`,marginBottom:L.ux.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},bn={fontSize:L.ux.rem(.75),lineHeight:L.ux.rem(1.125),color:I.Il.CoreNeutral90},Sn={display:"flex",justifyContent:"flex-end",alignItems:"center",height:L.ux.rem(1.5),$nest:{"& > * + *":{marginLeft:L.ux.rem(.25)},"& > *":{borderRadius:L.ux.rem(Ce.fx)}}},Cn={height:L.ux.rem(2),minHeight:L.ux.rem(2),width:L.ux.rem(2),fill:I.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:I.Il.CoreBlue50},"&[data-disabled='true']":{fill:I.Il.CoreNeutral30}}},wn={borderRadius:L.ux.rem(.75),background:I.Il.CoreNeutral20,margin:`${L.ux.rem(-.25)} ${L.ux.rem(-.25)}`,padding:`${L.ux.rem(.25)} ${L.ux.rem(.25)}`,$nest:{[`& .${ze.g.cozyCardContainerSelector}`]:{margin:0,boxShadow:"none"},[`& .${ze.g.fullCardSelector}`]:{padding:`${L.ux.rem(.75)} ${L.ux.rem(.5)} ${L.ux.rem(.5)} ${L.ux.rem(1)}`},"& [data-role=dropdown-list]":{transform:`translateY(${L.ux.rem(-.5)})`}}},An={paddingTop:L.ux.rem(.25),paddingBottom:L.ux.rem(.5),paddingLeft:L.ux.rem(.5),paddingRight:L.ux.rem(.5),fontWeight:"bold",fontSize:L.ux.rem(.875),lineHeight:L.ux.rem(1.125)};function En(e,t){return{display:["block","-webkit-box"],maxHeight:L.ux.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}const kn=(0,i._)((0,r._)({},En(1.5,3)),{lineHeight:L.ux.rem(1.5)}),_n=(0,i._)((0,r._)({},En(1.3125,3)),{lineHeight:L.ux.rem(1.3125)}),Tn={padding:L.ux.rem(.5),borderRadius:L.ux.rem(Ce.fx),background:I.Il.CoreNeutral10,color:I.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${Ce.g_}, ${Ce.xL}`},Mn=.25,Gn={opacity:0,pointerEvents:"none"},Ln={transition:`opacity ${L.ux.seconds(Mn)}`},Dn=L.ux.stylesheet({loadingWrapper:[Ln],loadingWrapperInvisible:[Ln,Gn],description:[Vt],minimalDescription:[Vt,Qt],more:[qt],onboardingNotification:[{display:"block"}],title:[Jt],titleMinimal:[Jt,Xt],label:[Zt],dropdownContainer:[Kt],spinner:[en],spinnerInvisible:[en,{opacity:0,pointerEvents:"none"}],newLabel:[tn],newCheckNotification:[nn],baseNotice:[rn],iconWrapper:[an],anonymousUserNotice:[rn,on],fluencyNotice:[rn,sn],fluencyInfo:[ln],cardFooter:[yn],circleProgress:[vn],circleText:[{display:"none"}],bundleTitle:[xn],bundleNavWrapper:[In],bundleNavCount:[bn],bundleNavMatchesRow:[Sn],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[Cn],bundleNavLeftButtonIcon:[Cn,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[Cn,{transform:"rotate(270deg)"}],cardWrapper:[wn],cardWrapperTitle:[An],highlightedTextBox:[Tn],highlightedTextInnerBox:[kn],minimalHighlightedTextInnerBox:[_n]})},91269:(e,t,n)=>{n.d(t,{J:()=>Ot});var r,i=n(84910),a=n(78520),o=n(92379),s=n(90023),l=n(64297),c=n(13391),d=n(24909),u=n(31491),p=n(72111),m=n(58303),h=n(84358),g=n(79599),f=n(91020),y=n(79813),v=n(75068),x=n(27640),I=n(23006),b=n(60792),S=n(36119),C=n(77933),w=n(98227),A=n(94032),E=n(47311),k=n(3611),_=n(28627),T=n(21961),M=n(70394),G=n(90658),L=n(88367),D=n(12331),N=n(86845),z=n(91045),P=n(14196);!function(e){e.Full=({card:e,actions:t,isChecking:n})=>o.createElement(N.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:M.lY.Type.alertCardShow,cardType:M.lY.getCardType(e),alertId:e.activeAlert.id})},theme:(0,P.Gh)(e.renderOptions),body:o.createElement(z.M9,{card:e,actions:t,isChecking:n}),mainActions:o.createElement(z.Kg,{card:e,feedbackActions:t}),footer:o.createElement(z.lJ,{card:e}),subActions:o.createElement(y.zx.Primary,{href:e.activeAlert.knowledgeHubTermCreationUrl,target:"_blank",rel:"noopener noreferrer",onClick:()=>t.next({type:M.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},o.createElement(f.JO.New,null),"Add term"),extra:o.createElement(z.mQ,{card:e,actions:t})})}(r||(r={}));var F=n(88347),O=n(54553),R=n(17690),$=n(2190),B=n(48906),U=n(68823),j=function(e){var t=e.theme,n=void 0===t?{}:t;return o.createElement(d.F.div,(0,B.Sh)(H.container,n.container),o.createElement(d.F.div,(0,B.Sh)(H.swoosh,n.animation)))},W=w.ux.keyframes({to:{backgroundPosition:"0 100%"}}),H=w.ux.prefixedStylesheet("ai-animation-v2",{container:[{position:"relative",width:w.ux.rem(2),height:w.ux.rem(2),display:"inline-block"}],swoosh:[{position:"absolute",left:0,right:0,top:0,bottom:0,animationName:W,animationTimingFunction:"steps(".concat(119,", start)"),animationFillMode:"forwards",animationDuration:w.ux.seconds(2),animationIterationCount:"infinite",background:"transparent url('".concat(U.y,"swoosh.png') 0 0 no-repeat"),backgroundSize:w.ux.percent(100)}]}),Y=n(14323);const V=({card:e,actions:t,disabled:n})=>(0,z.m_)(e.activeAlert,e.renderOptions.layoutDensity)?o.createElement(Y.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e,disabled:n}):null,Q=O.UI.Grid.make((({slots:e,state:t,notify:n})=>o.createElement(d.F.Fragment,null,t.pipe(E.map((t=>o.createElement(z.VM,{card:t,actions:{next:e=>n(e)(),error:s.Q1,complete:s.Q1},isChecking:E.of(!1),isCheckingGlobal:E.of(!1),cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,e.body)),cardTheme:{contentBody:q.contentBody}}))))))),q=w.ux.stylesheet({contentBody:[{paddingLeft:0}]}),J=O.UI.Knot.make(Q,{body:O.UI.Node.make((()=>{const e=o.useContext(x.m.Context);return o.createElement("div",{className:K.container},o.createElement(j,{theme:{container:K.animation}}),o.createElement(C.XY,{className:K.label},e.card.shortenIt.loadingLabel))}))}),X={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:w.ux.rem(.25)},Z={paddingLeft:w.ux.rem(.5)},K=w.ux.stylesheet({container:[X],animation:[{transform:"scale(.7)"}],label:[Z]}),ee=(e,t)=>O.Z.composeKnot({body:O.Z.emptyFlow,root:O.Z.fromSideEffect((e=>{t.next(e)}),e)}),te=O.UI.Knot.make(Q,{body:O.UI.Node.make((()=>{const e=o.useContext(x.m.Context);return o.createElement("div",{className:ie.container},o.createElement(f.JO.ValidationOk,null),o.createElement(C.XY,{className:ie.label},e.card.shortenIt.notFoundLabel))}))}),ne={display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:w.ux.rem(.25)},re={paddingLeft:w.ux.rem(.5)},ie=w.ux.stylesheet({container:[ne],label:[re]}),ae=(e,t)=>O.Z.composeKnot({body:O.Z.emptyFlow,root:O.Z.fromSideEffect((e=>{t.next(e)}),e)});var oe=n(42927),se=n(2123),le=n(73141),ce=n(23841),de=n(64570),ue=n(59833),pe=n(3262),me=n(43916),he=n(48463);const ge=O.UI.Node.make((({state:e})=>o.createElement(d.F.Fragment,null,e.pipe(E.map((({collapsed:e,text:t})=>e?o.createElement("span",{className:Fe.shortenItCollapsedDelete},o.createElement(f.JO.EllipsisSmall,{width:13,className:Fe.shortenItCollapsedIcon})):o.createElement("span",{className:Fe.shortenItDelete},t))))))),fe=/^\W/,ye=O.UI.Node.make((({state:e})=>o.createElement(d.F.span,{className:e.pipe(E.map((e=>fe.test(e.text)?Fe.shortenItInsertPunctuation:Fe.shortenItInsert)))},e.pipe(E.map((e=>e.text)))))),ve=O.UI.Node.make((({state:e})=>o.createElement(d.F.span,null,e.pipe(E.map((e=>e.text)))))),xe=O.UI.Union.make("kind",{insert:ye,delete:ge,text:ve}),Ie=O.UI.Grid.make((({slots:e,state:t,notify:n})=>{const r=o.useContext(x.m.Context).card.shortenIt.collapsedButtonTooltip;return o.createElement(d.F.Fragment,null,t.pipe(E.map((({isReviewableGroup:t,isInReview:i,group:a})=>(0,s.zG)(a,m.hX((()=>t)),m.g_((()=>o.createElement(d.F.Fragment,null,e.parts)),(t=>i?o.createElement(d.F.span,{ref:e=>{e&&(0,s.zG)(m.ij(e.offsetParent),m.UI((e=>e.getBoundingClientRect())),h.bw((r=>{const i=e.getBoundingClientRect();n({kind:"editGroupExpanded",group:t,offsetRect:{width:i.width,height:i.height,top:i.top-r.top,left:i.left-r.left},offsetParentSize:{width:r.width,height:r.height}})()})))},className:Fe.shortenItEditGroupExpanded},e.parts):o.createElement(y.zx,{name:"shorten-it-review-change",className:Fe.shortenItEditGroupButton,animationMode:pe.m.FromClickPoint,title:r,"aria-label":r,tag:me.X.div,onClick:n({kind:"reviewEdit",group:t})},o.createElement(d.F.Fragment,null,e.parts)))))))))})),be=O.UI.Knot.make(Ie,{parts:O.UI.List.make(ue.IX,xe)}),Se=O.UI.List.make(ue.IX,be),Ce=O.UI.Grid.make((({slots:e,state:t})=>o.createElement(C.XY,{className:t.pipe(E.map((e=>(0,s.zG)(e,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>Fe.minimalShortenItBackground),(()=>Fe.shortenItBackground))))))},e.labels))),we=O.UI.Knot.make(Ce,{labels:Se}),Ae="cards-replacements_labels-",Ee={shortenItBackground:`${Ae}shortenItBackground`,minimalShortenItBackground:`${Ae}minimalShortenItBackground`,shortenItDelete:`${Ae}shortenItDelete`,shortenItInsert:`${Ae}shortenItInsert`,shortenItInsertPunctuation:`${Ae}shortenItInsertPunctuation`,shortenItEditGroupButton:`${Ae}shortenItEditGroupButton`,shortenItEditGroupExpanded:`${Ae}shortenItEditGroupExpanded`,shortenItCollapsedDelete:`${Ae}shortenItCollapsedDelete`,shortenItCollapsedDeleteButton:`${Ae}shortenItCollapsedDeleteButton`,shortenItCollapsedIcon:`${Ae}shortenItCollapsedIcon`},ke={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${w.ux.rem(1)} 0`,color:v.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontFeatureSettings:`${le.g_}, ${le.xL}`},_e={color:v.Il.CoreRed50,textDecoration:"line-through",fontWeight:400},Te={color:v.Il.CoreBlue60,fontWeight:600},Me={transitionProperty:"background-color",transitionDuration:".2s",padding:`0 0 ${w.ux.rem(.2)} 0`,display:"inline",whiteSpace:"unset",verticalAlign:"unset",borderWidth:"1px",borderStyle:"solid",borderRadius:w.ux.rem(le.fx)},Ge=(0,a._)((0,i._)({},Me),{backgroundColor:v.Il.CoreNeutral1,borderColor:v.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:v.Il.CoreBlue10,borderColor:v.Il.CoreBlue10}}}),Le=(0,a._)((0,i._)({},Me),{backgroundColor:v.Il.CoreBlue10,borderColor:v.Il.CoreBlue10,position:"relative"}),De={display:"inline-block",width:w.ux.rem(1),lineHeight:w.ux.rem(.625),height:w.ux.rem(.625),margin:`0 ${w.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:w.ux.rem(le.mA)},Ne=(0,i._)({},De),ze=(0,a._)((0,i._)({},De),{backgroundColor:v.Il.CoreNeutral20,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:v.Il.CoreBlue10}}}),Pe={minWidth:"unset",minHeight:"unset",paddingBottom:w.ux.rem(.125),fill:v.Il.CoreBlue60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:v.Il.CoreNeutral50}}},Fe={shortenItBackground:w.ux.joinClasses([Ee.shortenItBackground,w.ux.style(ke),he.E.style(ke)]),minimalShortenItBackground:w.ux.joinClasses([Ee.minimalShortenItBackground,w.ux.style(ke,{lineHeight:w.ux.rem(1.3125)}),he.E.style(ke,{lineHeight:w.ux.rem(1.3125)})]),shortenItDelete:w.ux.joinClasses([Ee.shortenItDelete,w.ux.style(_e),he.E.style(_e)]),shortenItInsert:w.ux.joinClasses([Ee.shortenItInsert,w.ux.style(Te),he.E.style(Te)]),shortenItInsertPunctuation:w.ux.joinClasses([Ee.shortenItInsertPunctuation,w.ux.style(Te),he.E.style(Te)]),shortenItEditGroupButton:w.ux.joinClasses([Ee.shortenItEditGroupButton,w.ux.style(Ge),he.E.style(Ge)]),shortenItEditGroupExpanded:w.ux.joinClasses([Ee.shortenItEditGroupExpanded,w.ux.style(Le),he.E.style(Le)]),shortenItCollapsedDelete:w.ux.joinClasses([Ee.shortenItCollapsedDelete,w.ux.style(Ne),he.E.style(Ne)]),shortenItCollapsedDeleteButton:w.ux.joinClasses([Ee.shortenItCollapsedDeleteButton,w.ux.style(ze),he.E.style(ze)]),shortenItCollapsedIcon:w.ux.joinClasses([Ee.shortenItCollapsedIcon,w.ux.style(Pe),he.E.style(Pe)])};w.ux.cssRule(`.${Ee.shortenItDelete} + .${Ee.shortenItInsert}`,{marginLeft:w.ux.rem(.25)});const Oe=O.UI.Grid.make((({state:e,view:t,notify:n,slots:r})=>{const l=o.useContext(x.m.Context),p=(0,a._)((0,i._)({},A.UF()),{next:e=>n(e)()}),m=_.P.useMemoOnDidMount((()=>c.h.create(!1)));return _.P.useSubscriptionTo(t("transformHidden").pipe(E.tap(A.wW(m)))),o.createElement(d.F.Fragment,null,e.pipe(E.map((({item:e})=>o.createElement(N.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:n({type:M.lY.Type.alertCardShow,cardType:M.lY.getCardType(e),alertId:e.activeAlert.id}),onMouseOut:n({type:M.lY.Type.hover,kind:"unhover",id:e.id}),onMouseOver:n({type:M.lY.Type.hover,kind:"hover",id:e.id}),theme:(0,i._)({content:t("isCheckingGlobal").pipe(E.map((0,u.RN)(Qe.loadingWrapperInvisible,Qe.loadingWrapper)))},(0,P.Gh)(e.renderOptions)),mainActions:o.createElement(z.Kg,{card:e,feedbackActions:p}),subActions:o.createElement(V,{card:e,actions:p}),body:o.createElement(o.Fragment,null,o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions,badge:o.createElement(b.C.Regular,null,l.beta)}),(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>null),(()=>o.createElement(z.dk,{description:e.meta.explanation,actions:{next:e=>n(e)(),error:s.Q1,complete:s.Q1},layoutDensity:e.renderOptions.layoutDensity})))),o.createElement(d.F.div,{className:t("transformHidden").pipe(E.map((0,u.RN)(Qe.transformHidden,void 0)))},r.transform)),footer:o.createElement(o.Fragment,null,o.createElement(z.lJ,{card:e}),o.createElement(d.F.div,{className:Qe.footerBtns},o.createElement(z.Nm,{className:Qe.applyButton,spinnerClassName:Qe.applyButtonSpinner,messageClassName:Qe.applyButtonMessage,applyMessage:e.activeAlert.todoAction,checkingMessage:l.card.shortenIt.acceptButtonCheckingLabel,checkingInProgress:m,onClick:k.hz(n({type:M.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:T.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:T.X.isEligibleForGbPrompt(e),cardType:M.lY.getCardType(e)}))}))),extra:o.createElement(z.o,{isChecking:t("isCheckingGlobal")})})))))})),Re=O.UI.Grid.make((({slots:e,state:t,notify:n})=>{const r=o.useContext(x.m.Context).card.shortenIt,{ref:c,onMount:u}=_.P.useElWatcher(),p=ce.oA(t).pipe(E.map((e=>e.group)),E.distinctUntilChanged(),E.switchMap((e=>c.pipe(ce.cp((t=>de.YC(t).pipe(E.map((()=>({width:t.clientWidth,height:t.clientHeight}))),E.startWith({width:t.clientWidth,height:t.clientHeight}),E.distinctUntilChanged(se.xu.eq.equals),E.tap((t=>n((0,a._)((0,i._)({kind:"editPopupSize"},t),{group:e}))())))))))));return _.P.useSubscriptionTo(p),o.createElement(d.F.div,{className:Qe.editPopupContainer},e.replacementLabels,t.pipe(E.map(m.g_(s.gn,(e=>{var{group:t}=e,i=(0,oe._)(e,["group"]);return o.createElement(d.F.div,{className:Qe.editPopup,style:"withPosition"===i.kind?{transform:`translate(${i.left}px, ${i.top}px)`,visibility:"visible",opacity:1}:"withoutPosition"===i.kind?{visibility:"hidden",opacity:0}:(0,l.vE)(i),mount:u},o.createElement(y.zx.Primary,{name:"shorten-it-keep-change",onClick:n({kind:"keepEdit",group:t})},r.editPopupKeepButtonLabel),o.createElement(y.zx.Tertiary,{name:"shorten-it-dismiss-change",onClick:n({kind:"dismissEdit",group:t})},r.editPopupDismissButtonLabel))})))))})),$e=O.UI.Knot.make(Re,{replacementLabels:we}),Be=O.UI.Knot.make(Oe,{transform:$e}),Ue={padding:`0 ${w.ux.rem(1)}`},je={display:"flex",flexDirection:"row",padding:w.ux.rem(.25),position:"absolute",backgroundColor:v.Il.CoreNeutral0,boxShadow:"0px 0px 0.5px rgba(0, 0, 0, 0.7), 0px 2px 8px rgba(26, 33, 52, 0.2)",borderRadius:w.ux.rem(le.fx),zIndex:1,top:0,left:0,transition:"visibility 0.15s linear, opacity 0.15s linear"},We={$nest:{"&[data-disabled='true']":{backgroundColor:v.Il.CoreNeutral10,color:v.Il.CoreNeutral40}}},He={$nest:{"& circle":{stroke:v.Il.CoreNeutral40}}},Ye={paddingRight:w.ux.rem(.25)},Ve={transition:`opacity ${w.ux.seconds(z.k_)}`},Qe=w.ux.stylesheet({loadingWrapper:[Ve],loadingWrapperInvisible:[Ve,{opacity:0,pointerEvents:"none"}],footerBtns:[{display:"flex"}],expandEditsBtn:[Ue],editPopupContainer:[{position:"relative"}],editPopup:[je],applyButton:[We],applyButtonSpinner:[He],applyButtonMessage:[Ye],transformHidden:[{pointerEvents:"none",opacity:.5}]});var qe=n(24332),Je=n(9141);const Xe=(e,t,n)=>O.Z.composeKnot({root:O.Z.fromSideEffect(s.Q1,e.pipe(E.map((e=>e.renderOptions.layoutDensity)))),labels:r=>E.mergeStatic(r.pipe(E.withLatestFrom(e),E.tap((([e,r])=>{const o=e.action.action;switch(o.kind){case"reviewEdit":t.set(m.G({groupId:o.group,expandedEdit:m.YP,popupSize:m.YP,popupPosition:m.YP})),n.next({type:M.lY.Type.shortenItReviewEdit,alertId:r.activeAlert.id,itemId:r.id,group:o.group});break;case"editGroupExpanded":t.set((0,s.zG)(t.get(),m.hX((e=>e.groupId===o.group)),m.g_((()=>m.G({groupId:o.group,popupSize:m.YP,popupPosition:m.YP,expandedEdit:m.G({offsetRect:o.offsetRect,offsetParentSize:o.offsetParentSize})})),(e=>m.G((0,a._)((0,i._)({},e),{expandedEdit:m.G({offsetRect:o.offsetRect,offsetParentSize:o.offsetParentSize})}))))));break;default:(0,l.vE)(o)}})),E.switchMap((()=>E.NEVER))),E.sequenceS({item:e,editsInReview:t}).pipe(E.map((({item:e,editsInReview:t})=>(0,s.zG)(e.transform,m.hX($.b$.isShortenIt),m.UI((0,F.ei)("labels")),m.UI((t=>(0,s.zG)(t,ue.DZ((t=>(0,s.zG)(t.group,m.g_(s.jv,(t=>e.activeAlert.dismissedTransformGroups.has(t))))?t.type===$.GP.Delete?m.G((0,a._)((0,i._)({},t),{type:$.GP.Text})):t.type===$.GP.Insert?m.YP:m.G(t):m.G(t)))))),m.g_((()=>[]),(0,s.ls)(ue.u4([],((e,n)=>{var r;const i=n.type===$.GP.Delete?{kind:n.type,text:n.text,collapsed:(0,s.zG)(n.group,m.g_((()=>null!==(r=n.shouldBeCollapsed)&&void 0!==r&&r),(e=>!(0,s.zG)(t,m.Gg((t=>t.groupId===e)))))),group:n.group}:n.type===$.GP.Insert||n.type===$.GP.Text?{kind:n.type,text:n.text,group:n.group}:(0,l.vE)(n);return e.length>0&&m.Eh(Je.Eq).equals(e[e.length-1].group,n.group)&&m.pC(n.group)?e.slice(0,-1).concat({group:n.group,parts:e[e.length-1].parts.concat(i)}):e.concat({group:n.group,parts:[i]})})),ue.UI((e=>({root:{isReviewableGroup:e.parts.length>1||1===e.parts.length&&e.parts[0].kind!==$.GP.Text,isInReview:(0,s.zG)(e.group,m.g_(s.jv,(e=>(0,s.zG)(t,m.Gg((t=>t.groupId===e)))))),group:(0,s.zG)(e.parts.map((e=>e.group)),(0,qe.g_)(m.gW()))},parts:e.parts}))))))))))}),Ze=(e,t,n,r,i,a)=>O.Z.composeKnot({root:r=>E.mergeStatic(r.pipe(E.tap((e=>{e.type===M.lY.Type.hover&&a.next("hover"===e.kind),n.next(e)})),E.switchMap((()=>E.NEVER))),E.sequenceS({item:e,isCheckingGlobal:t,transformHidden:i})),transform:O.Z.composeKnot({root:Ke(e,r,n),replacementLabels:Xe(e,r,n)})});const Ke=(e,t,n)=>r=>E.mergeStatic(r.pipe(E.withLatestFrom(e),E.tap((([e,r])=>{"editPopupSize"===e.kind?t.set((0,s.zG)(t.get(),m.hX((t=>t.groupId===e.group)),m.g_((()=>m.G({groupId:e.group,expandedEdit:m.YP,popupPosition:m.YP,popupSize:m.G({width:e.width,height:e.height})})),(t=>m.G((0,a._)((0,i._)({},t),{popupSize:m.G({width:e.width,height:e.height})})))))):function(e,t,n,r){switch(n.set((0,s.zG)(n.get(),m.hX((e=>e.groupId!==t.group)))),t.kind){case"dismissEdit":r.next({type:M.lY.Type.shortenItDismissEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group}),e.activeAlert.transformGroups.size===new Set(e.activeAlert.dismissedTransformGroups).add(t.group).size&&r.next({type:M.lY.Type.alertIgnore,alertId:e.activeAlert.id,id:e.id,eligibleForSurvey:T.X.isEligibleForDismissSurvey(e)});break;case"keepEdit":r.next({type:M.lY.Type.shortenItKeepEdit,alertId:e.activeAlert.id,itemId:e.id,group:t.group});break;default:(0,l.vE)(t.kind)}}(r,e,t,n)})),E.switchMap((()=>E.NEVER))),t.view(m.tS((e=>(0,s.zG)(e.expandedEdit,m.UI((t=>(0,s.zG)(e.popupSize,m.g_((()=>({kind:"withoutPosition",group:e.groupId})),(n=>(0,i._)({kind:"withPosition",group:e.groupId},function(e,t,n=-10){const r=t.offsetRect.top+t.offsetRect.height,i=t.offsetRect.left+n;if(i+e.width>t.offsetParentSize.width)return{top:r,left:t.offsetParentSize.width-e.width};return{top:r,left:i}}(n,t))))))))))));const et={loading:J,summary:Be,notFound:te},tt=O.UI.Union.make("kind",et),nt=e=>e.pipe(E.map((e=>{const t=e.activeAlert.summaryState,n=m.g_(s.jv,$.b$.isShortenIt)(e.transform);switch(t){case R.vQ.SummaryState.notFound:return{kind:"notFound"};case R.vQ.SummaryState.notRequested:return{kind:"loading"};case R.vQ.SummaryState.requestSent:return n?{kind:"summary"}:{kind:"loading"};case R.vQ.SummaryState.invalidated:case R.vQ.SummaryState.received:return{kind:"summary"};default:(0,l.vE)(t)}})));var rt;!function(e){e.Full=e=>{const t=_.P.useAtomOf(e.card),{isChecking:n,isCheckingGlobal:r}=function(e,t,n){const r=_.P.useAtomOf({isWaiting:e.activeAlert.summaryState===R.vQ.SummaryState.requestSent||e.activeAlert.summaryState===R.vQ.SummaryState.invalidated,cardIsOpen:"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type});return _.P.useMemoOnDidMount((()=>({isChecking:E.combineLatestStatic([t,r]).pipe(E.map((([e,t])=>e||t.isWaiting&&t.cardIsOpen)),E.distinctUntilChanged()),isCheckingGlobal:E.combineLatestStatic([n,r]).pipe(E.map((([e,t])=>e||t.isWaiting&&!t.cardIsOpen)),E.distinctUntilChanged())})))}(e.card,e.isChecking,e.isCheckingGlobal),{transformHidden:i,isMouseInside:a}=(0,z.ce)(n),l=_.P.useMemoOnDidMount((()=>c.h.create(m.YP))),d=_.P.useMemoOnDidMount((()=>t.pipe(E.map((0,s.ls)((0,F.ei)("transform"),m.hX($.b$.isShortenIt))),E.skipBy(m.Eh($.b$.ShortenIt.eq)),E.map((()=>m.YP)),E.tap(A.wW(l)))));return _.P.useSubscriptionTo(d),o.createElement(o.Fragment,null,O.UI.mount(tt,((e,t,n,r,i,a)=>O.Z.composeUnion({loading:ee(e,n),notFound:ae(e,n),summary:Ze(e,t,n,r,i,a)},(()=>nt(e))))(t,r,e.actions,l,i,a)))}}(rt||(rt={}));var it=n(92392),at=n(40902),ot=n(54463);const st=({card:e,actions:t})=>{const n=o.useContext(x.m.Context),r=m.Wi(e.activeAlert.takeawayFeedback)?n.card.takeaway.defaultTitle:e.activeAlert.title,i=m.ij(e.activeAlert.highlightTexts[0]),a=(0,s.zG)(e.activeAlert,m.DT((e=>!e.takeawayIsLikelyToBeRead&&h.FX(R.TO.correctlyDetected)(e.takeawayFeedback))),m.UI((()=>e.meta.explanation)));return o.createElement(o.Fragment,null,(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions},o.createElement(z.jg,{text:T.X.miniTitle(e,n)}))),(()=>o.createElement(o.Fragment,null,o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(z.Dx,{text:r}))))),(0,s.zG)(i,m.g_(s.gn,(t=>o.createElement(z.hl,{text:t,layoutDensity:e.renderOptions.layoutDensity})))),(0,s.zG)(a,m.g_(s.gn,(n=>o.createElement(z.dk,{description:n,actions:t,layoutDensity:e.renderOptions.layoutDensity})))))};var lt;const ct=({card:e,feedbackActions:t})=>o.createElement(o.Fragment,null,o.createElement(y.zx.Ghost,{name:"takeaway-like",onClick:k.hz((()=>t.next({type:M.lY.Type.takeawayCorrectlyDetected,id:e.id,alertId:e.activeAlert.id,takeawayText:null!==(lt=e.activeAlert.highlightTexts[0])&&void 0!==lt?lt:"",isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(f.JO.YesCircle,null)," Yes"),o.createElement(y.zx.Ghost,{name:"takeaway-dislike",onClick:k.hz((()=>t.next({type:M.lY.Type.takeawayIncorrectlyDetected,id:e.id,alertId:e.activeAlert.id})))},o.createElement(f.JO.NoCircle,null)," No")),dt=({card:e,feedbackActions:t})=>{const n=o.useContext(x.m.Context);return o.createElement(o.Fragment,null,o.createElement(y.zx.Tertiary,{name:"resolve",title:n.resolve,"aria-label":n.resolveLabel,onClick:k.hz((()=>t.next({type:M.lY.Type.takeawayResolve,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(f.JO.YesCircle,null)),o.createElement(y.zx.Tertiary,{name:"ignore",title:n.dismiss,"aria-label":n.dismiss,onClick:k.hz((()=>t.next({type:M.lY.Type.takeawayDismiss,id:e.id,alertId:e.activeAlert.id,isLikelyToBeRead:e.activeAlert.takeawayIsLikelyToBeRead})))},o.createElement(at.J,{icon:ot.o,accessibilityLabel:"Dismiss",variant:"inherit"})))};function ut(e){return!m.Wi(e.takeawayFeedback)&&!(!m.pC(e.examples)&&!m.pC(e.details))}var pt;!function(e){e.Full=({card:e,actions:t})=>{return o.createElement(N.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>t.next({type:M.lY.Type.alertCardShow,cardType:M.lY.getCardType(e),alertId:e.activeAlert.id}),theme:(n=e.renderOptions,(0,a._)((0,i._)({},(0,P.f8)(n.layoutDensity)),{wrapper:(0,s.zG)(n.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>ht.minimalCardWrapper),(()=>{})))})),body:o.createElement(st,{card:e,actions:t}),mainActions:m.Wi(e.activeAlert.takeawayFeedback)?o.createElement(ct,{card:e,feedbackActions:t}):o.createElement(dt,{card:e,feedbackActions:t}),footer:ut(e.activeAlert)?o.createElement(z.lJ,{card:e}):null,subActions:ut(e.activeAlert)?o.createElement(Y.Vh,{key:"card-actions-button",mode:"default",actions:t,card:e}):null});var n}}(pt||(pt={}));const mt={padding:`${w.ux.rem(.75)} ${w.ux.rem(.5)} ${w.ux.rem(.5)} ${w.ux.rem(1)}`},ht=w.ux.stylesheet({minimalCardWrapper:[mt]});var gt=n(81100),ft=n(99747),yt=n(79239);const vt=e=>w.ux.style({textDecoration:"line-through",color:e,fontWeight:"bold"}),xt=e=>w.ux.style({fontWeight:"bold",padding:`${w.ux.rem(.0625)} ${w.ux.rem(.21875)} ${w.ux.rem(.0625)} ${w.ux.rem(.21875)}`,border:`1px solid ${e}`,borderRadius:w.ux.rem(.125),color:e}),It=w.ux.style({fontSize:w.ux.rem(.875),letterSpacing:"0px",lineHeight:w.ux.rem(1.3125),padding:`${w.ux.rem(.15625)} 0`}),bt=w.ux.style({fontWeight:"bold",padding:`${w.ux.rem(.0625)} ${w.ux.rem(.21875)} ${w.ux.rem(.0625)} ${w.ux.rem(.21875)}`,borderRadius:w.ux.rem(.125),color:yt.Qi,background:yt.T1}),St=w.ux.style({fontStyle:"italic"}),Ct=[bt,It],wt=/[\d\w&]/,At=e=>1===e.length&&!wt.test(e),Et=(e,t,n)=>(r,i,a)=>{const o=a[i-1];switch(r.type){case"insert":return e(r,i,o);case"delete":return t(r,i,o);case"text":return n(r,i,o);default:throw new Error("Unexpected citation alert transform part:"+JSON.stringify(r))}},kt=(e,t)=>{var n;return"text"===(null===(n=t)||void 0===n?void 0:n.type)?null:o.createElement("span",{key:"s"+e,className:It}," ")},_t=e=>o.createElement(o.Fragment,null,e.replacement.labels.map(e.isCitationGap?Et(((e,t,n)=>o.createElement(o.Fragment,{key:t},kt(t,n),o.createElement("span",(0,a._)((0,i._)({},(0,B.Sh)(...Ct)),{key:t}),e.text))),((e,t)=>o.createElement(o.Fragment,{key:t})),((e,t)=>o.createElement("span",{key:t,className:It},e.text))):Et(((e,t,n)=>{return o.createElement(o.Fragment,{key:t},kt(t,n),o.createElement("span",(0,i._)({key:t},(0,B.Sh)(...(r=e.text,[At(r)?xt(yt.Wi):(a=yt.Wi,w.ux.style({color:a,fontWeight:"bold"})),It,St]))),e.text));var r,a}),((e,t,n)=>{return o.createElement(o.Fragment,{key:t},kt(t,n),o.createElement("span",(0,i._)({key:t},(0,B.Sh)(...(r=e.text,At(r)?[xt(yt._b),(a=yt._b,w.ux.style({backgroundImage:`linear-gradient(to top left,\n        rgba(0,0,0,0) 0%,\n        rgba(0,0,0,0) calc(50% - 0.5px),\n        ${a} 50%,\n        rgba(0,0,0,0) calc(50% + 0.5px),\n        rgba(0,0,0,0) 100%)`})),It,St]:[vt(yt._b),It,St]))),e.text));var r,a}),((t,n)=>o.createElement("span",(0,i._)({key:n},(0,B.Sh)(It,("italic"===t.style||!e.isCitationItalicization)&&St)),t.text))))),Tt=({transformHidden:e})=>{const t=o.useContext(x.m.Context);return o.createElement(C.Xk,{"aria-hidden":A.U_(e),className:e.pipe(E.map((0,u.RN)(Wt.transformHint,Wt.transformHintInvisible)))},t.card.updatingSuggestion)},Mt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const i=o.useContext(x.m.Context);return o.createElement(Ft,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,s.a9)(o.createElement(z.M9,{card:e,actions:t,isChecking:n})),cardFooter:n=>o.createElement(o.Fragment,null,o.createElement(z.lJ,{card:e}),o.createElement("div",{className:Wt.fullSentenceCardFooterBtns},o.createElement(z.Nm,{title:i.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:M.lY.Type.alertApply,id:e.id,eligibleForSurvey:T.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:T.X.isEligibleForGbPrompt(e),alertId:e.activeAlert.id,alternativeIndex:0,cardType:M.lY.getCardType(e)})}))})))})},Gt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:i})=>{const a=o.useContext(x.m.Context),l=c.h.create(!0);return _.P.useSubscriptionTo((0,s.zG)(l,E.skip(1),E.tap((e=>t.next({type:M.lY.Type.fullSentenceHighlightChangesToggle,showChanges:e}))))),o.createElement(Ft,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Rt,{isNew:e.renderOptions.isNew,actions:t}),(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>null),(()=>o.createElement(z.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})))),o.createElement(I.T9,{classes:{rendered:Wt.replacement,removing:Wt.replacementHidden},timeout:250,content:l.pipe(E.combineLatest(i,((t,n)=>(0,s.zG)(n,m.g_((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:e.id}),null)),(n=>o.createElement(ft.n4,{replacements:n,showDiff:t,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(L.j.Features.a11yContrast)})))))))}),o.createElement(z.ko,{card:e,isChecking:n}))),cardFooter:n=>o.createElement(o.Fragment,null,o.createElement(z.lJ,{card:e}),o.createElement(d.F.div,{className:Wt.fullSentenceCardFooterBtns},o.createElement(z.Nm,{title:i.pipe(E.map(m.g_((()=>""),(e=>a.card.todoAction(e.tooltipText))))),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:M.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:T.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:T.X.isEligibleForGbPrompt(e),cardType:M.lY.getCardType(e)})}))}),o.createElement(S.X,{className:Wt.fullSentenceCardCheckbox,checked:l,name:"set-goals"},a.card.showChangesToggle)))})},Lt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:i})=>{const a=o.useContext(x.m.Context),l=(0,s.zG)(e.activeAlert.extraProperties.citationGap,h.FX(!0)),c=(0,s.zG)(e.activeAlert.extraProperties.citationItalicization,h.FX(!0));return o.createElement(Ft,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Rt,{isNew:e.renderOptions.isNew,actions:t}),(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>null),(()=>o.createElement(z.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity,className:Ht.description})))),o.createElement(I.T9,{classes:{rendered:Wt.replacement,removing:Wt.replacementHidden},timeout:250,content:i.pipe(E.map((e=>o.createElement(_t,{replacement:e.value,isCitationGap:l,isCitationItalicization:c}))))}),o.createElement(z.ko,{card:e,isChecking:n}))),cardFooter:n=>o.createElement(o.Fragment,null,o.createElement(z.lJ,{card:e}),o.createElement(d.F.div,{className:Wt.fullSentenceCardFooterBtns},!l&&o.createElement(z.Nm,{title:a.card.todoAction(e.activeAlert.todoAction),applyMessage:"Reformat",checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:M.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:T.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:T.X.isEligibleForGbPrompt(e),cardType:M.lY.getCardType(e)})}))})))})},Dt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:i})=>{const a=(0,s.zG)(e.userInput,m.fS((0,s.a9)("")));return o.createElement(Ft,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>o.createElement(o.Fragment,{key:"content"},o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Rt,{isNew:e.renderOptions.isNew,actions:t}),o.createElement(d.F.div,{className:r.pipe(E.map((0,u.RN)(Wt.transformContainerInvisible,Wt.transformContainer)))},o.createElement(I.T9,{classes:{rendered:Wt.replacement,removing:Wt.replacementHidden},timeout:250,content:i.pipe(E.map(m.g_((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>o.createElement(ft.$s,{key:"label",gapValue:a,replacements:n,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(L.j.Features.a11yContrast),onFocus:()=>t.next({type:M.lY.Type.focusUserInput,id:e.id,kind:"focus"}),onChange:n=>t.next({type:M.lY.Type.changeUserInput,alertId:e.activeAlert.id,cardId:e.id,userInput:n}),onApply:k.hz((()=>t.next({type:M.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:0,id:e.id,eligibleForSurvey:T.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:T.X.isEligibleForGbPrompt(e),cardType:M.lY.getCardType(e)})))})))))})),o.createElement(Tt,{transformHidden:r}),o.createElement(z.ko,{card:e,isChecking:n}),(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>null),(()=>o.createElement(z.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(z.lJ,{card:e}))})},Nt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{(0,l.kG)(m.pC(e.activeAlert.extraProperties.citationDetection),"Should contain citation detection");const i=o.useContext(x.m.Context),a=c.h.create(h.MH(e.activeAlert.extraProperties.citationDetection));return o.createElement(Ft,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:(0,s.a9)(o.createElement(d.F.Fragment,null,o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(Rt,{isNew:e.renderOptions.isNew,actions:t}),o.createElement(z.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),o.createElement("div",{className:(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.cozy)((()=>Yt.dropdownContainer),(()=>Yt.minimalDropdownContainer)))},o.createElement(g.L,{name:"citationStyle",label:o.createElement(d.F.div,null,a.pipe(E.map((e=>o.createElement("span",{className:Yt.dropdownLabel,key:e},i.citation.essayDetectionCard.dropdownOptions[e],o.createElement(f.JO.TriangleArrow,{className:Yt.arrowIcon}))))))},Object.entries(i.citation.essayDetectionCard.dropdownOptions).map((([t,n])=>o.createElement(y.zx.Flat,{key:t,name:t,onClick:()=>a.set(t),textPosition:"right"},o.createElement(d.F.Fragment,null,a.pipe(E.map((e=>t===e?o.createElement(f.JO.DocumentSettings.Selected,null):o.createElement("div",{className:Yt.placeholder}))))),n,void 0!==i.citation.essayDetectionCard.examples[t]&&(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.cozy)((()=>o.createElement("span",{className:Yt.example},i.citation.essayDetectionCard.examples[t])),(()=>null)))))))),o.createElement(z.ko,{card:e,isChecking:n}))),cardFooter:n=>o.createElement(o.Fragment,null,o.createElement(z.lJ,{card:e}),o.createElement(d.F.div,{className:Wt.fullSentenceCardFooterBtns},o.createElement(z.Nm,{title:i.card.todoAction(e.activeAlert.todoAction),applyMessage:"Set style",checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:k.hz((()=>{t.next({type:M.Wh.Kind.setAcademicDomainAndCitationStyle,citationStyle:a.get(),id:e.id}),t.next({type:M.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})}))})))})},zt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:i})=>{const a=o.useContext(x.m.Context);return o.createElement(Ft,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>o.createElement(o.Fragment,null,o.createElement(d.F.Fragment,null,o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions,badge:o.createElement(b.C.Regular,{a11yContrast:e.renderOptions.features.has(L.j.Features.a11yContrast)},a.beta)})),o.createElement(d.F.div,{className:r.pipe(E.map((0,u.RN)(Wt.transformContainerInvisible,Wt.transformContainer)))},o.createElement(I.T9,{classes:{rendered:Wt.replacement,removing:Wt.replacementHidden},timeout:250,content:i.pipe(E.map(m.g_((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>{const r=(0,s.zG)(e.synfonySelection,m.fS((()=>[])));return o.createElement(ft.Px,{replacements:n,onClick:n=>k.hz((()=>{t.next({type:M.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,cardType:M.lY.getCardType(e),id:e.id,eligibleForSurvey:T.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:T.X.isEligibleForGbPrompt(e),drilldownSuggestionIds:r})})),onDive:(n,i)=>t.next({type:M.GM.Kind.drilldown,alertId:e.activeAlert.id,wordIndex:n,cardId:e.id,alternativeId:i,drilldownSuggestionIds:r}),onBack:()=>t.next({type:M.GM.Kind.back,cardId:e.id}),selection:r,layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(L.j.Features.a11yContrast)})}))))})),o.createElement(Tt,{transformHidden:r}),o.createElement(z.ko,{card:e,isChecking:n}),(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>null),(()=>o.createElement(z.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(z.lJ,{card:e}))})},Pt=({card:e,actions:t,isChecking:n,isCheckingGlobal:r,transform:i})=>o.createElement(Ft,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:r=>o.createElement(o.Fragment,null,o.createElement(z.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(d.F.div,{className:r.pipe(E.map((0,u.RN)(Wt.transformContainerInvisible,Wt.transformContainer)))},o.createElement(I.T9,{classes:{rendered:Wt.replacement,removing:Wt.replacementHidden},timeout:250,content:i.pipe(E.map(m.g_((()=>(p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:e.id}),null)),(n=>o.createElement(z.hT,{rl:n,onClick:n=>k.hz((()=>{t.next({type:M.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n,id:e.id,eligibleForSurvey:T.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:T.X.isEligibleForGbPrompt(e),cardType:M.lY.getCardType(e)})})),layoutDensity:e.renderOptions.layoutDensity,a11yContrast:e.renderOptions.features.has(L.j.Features.a11yContrast),showDemoDocOnboardingA11yUpdates:e.renderOptions.features.has(L.j.Features.showOnboardingTourA11yUpdates)})))))})),o.createElement(Tt,{transformHidden:r}),o.createElement(z.ko,{card:e,isChecking:n}),(0,s.zG)(e.renderOptions.layoutDensity,L.j.Density.matchOrDefault(L.j.Density.minimal)((()=>null),(()=>o.createElement(z.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}))))),cardFooter:(0,s.a9)(o.createElement(z.lJ,{card:e}))}),Ft=e=>{var t,n,r;return o.createElement(z.VM,(0,a._)((0,i._)({},e),{cardExtra:null!==(t=e.cardExtra)&&void 0!==t?t:(0,s.a9)(o.createElement(z.mQ,{card:e.card,actions:e.actions})),mainActions:null!==(n=e.mainActions)&&void 0!==n?n:(0,s.a9)(o.createElement(z.Kg,{card:e.card,feedbackActions:e.actions})),subActions:null!==(r=e.subActions)&&void 0!==r?r:(0,s.a9)(o.createElement(z.q4,{card:e.card,actions:e.actions}))}))},Ot=({card:e,actions:t,isChecking:n,isCheckingGlobal:i,transform:a})=>G.i.isTakeawayItem(e)?o.createElement(pt.Full,{card:e,actions:t}):G.i.isShortenItItem(e)?o.createElement(rt.Full,{card:e,actions:t,isChecking:n,isCheckingGlobal:i}):G.i.isToneAIItem(e)?o.createElement(gt.Y.Full,{card:e,actions:t,isChecking:n,isCheckingGlobal:i}):G.i.isEthicalAIItem(e)?o.createElement(D.T.Full,{card:e,actions:t,isChecking:n}):G.i.isSuggestedSnippetItem(e)?o.createElement(it.w.Full,{card:e,actions:t,isChecking:n}):G.i.isKnowledgeHubSuggestedTermItem(e)?o.createElement(r.Full,{card:e,actions:t,isChecking:n}):T.X.isCitationDetectionCard(e)?o.createElement(Nt,{card:e,actions:t,isChecking:n,isCheckingGlobal:i}):T.X.hasTransform(e)?T.X.hasFullSentenceTransform(e)||T.X.hasWritingExpertTransform(e)?o.createElement(Gt,{card:e,actions:t,isChecking:n,isCheckingGlobal:i,transform:a}):T.X.hasCitationTransform(e)?o.createElement(Lt,{card:e,actions:t,isChecking:n,isCheckingGlobal:i,transform:a}):T.X.hasOneGapTransform(e)?o.createElement(Dt,{card:e,actions:t,isChecking:n,isCheckingGlobal:i,transform:a}):T.X.hasSynfonyTransform(e)?o.createElement(zt,{card:e,actions:t,isChecking:n,isCheckingGlobal:i,transform:a}):o.createElement(Pt,{card:e,actions:t,isChecking:n,isCheckingGlobal:i,transform:a}):T.X.isSimple(e)?o.createElement(Mt,{card:e,actions:t,isChecking:n,isCheckingGlobal:i}):o.createElement(z.eb,{card:e,actions:t,isChecking:n}),Rt=e=>o.createElement(d.F.Fragment,null,e.isNew.pipe(E.map(m.g_(s.gn,(t=>o.createElement(z.jt,{type:t,actions:e.actions,key:"new-notification"})))),E.startWith(null))),$t={transition:`opacity ${w.ux.seconds(z.k_)}`,transitionDelay:w.ux.seconds(z.k_)},Bt={position:"absolute",top:w.ux.rem(2),color:v.Il.CoreNeutral40,lineHeight:w.ux.rem(2),transition:`opacity ${w.ux.seconds(z.k_)}`,transitionDelay:w.ux.seconds(z.k_)},Ut={transition:`opacity ${w.ux.seconds(z.k_)}`},jt={fontSize:w.ux.rem(v.xv.BodySize),lineHeight:w.ux.rem(2.0625)},Wt=(0,i._)({},w.ux.stylesheet({invisible:[z.Bn],transformContainer:[$t],transformContainerInvisible:[$t,z.Bn,{transitionDelay:"initial"}],transformHint:[Bt],transformHintInvisible:[Bt,z.Bn,{transitionDelay:"initial"}],replacement:[Ut],replacementHidden:[Ut,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[jt]})),Ht=w.ux.prefixedStylesheet("withCitation",{description:[{$nest:{"& a":{backgroundImage:`repeating-linear-gradient(90deg, ${v.Il.CoreBlue50}, ${v.Il.CoreBlue50} 1px, transparent 1px, transparent 2px, ${v.Il.CoreBlue50} 2px)`,backgroundSize:"100% 1px",backgroundPosition:"0 100%",backgroundRepeat:"no-repeat",borderBottom:"none",paddingBottom:w.ux.px(1)}}}]}),Yt=w.ux.prefixedStylesheet("withCitationDetection",{dropdownLabel:[{color:v.Il.CoreBlue50,fontSize:w.ux.rem(.875),fontWeight:700,lineHeight:w.ux.rem(1.3125),cursor:"pointer"}],dropdownContainer:[{width:w.ux.rem(18.75)}],minimalDropdownContainer:[{width:w.ux.rem(10)}],arrowIcon:[{transform:"rotate(180deg)",position:"absolute",marginLeft:w.ux.rem(-.5625),top:w.ux.rem(-.34375),$nest:{"*":{fill:v.Il.CoreBlue50}}}],placeholder:[{width:w.ux.rem(2),margin:`0 ${w.ux.rem(.25)} 0 0`}],example:[{display:"inline-block",marginLeft:"auto",marginRight:0,color:v.Il.CoreNeutral50,fontStyle:"italic",fontSize:w.ux.rem(.75),lineHeight:w.ux.rem(2)}]})},76520:(e,t,n)=>{n.d(t,{P:()=>F});var r=n(84910),i=n(78520),a=n(92379),o=n(58303),s=n(90023),l=n(48906),c=n(24909),d=n(59179),u=n(27640),p=n(60792),m=n(77933),h=n(17560),g=n(88367),f=n(74775),y=n(52382),v=n(92792),x=n(13391),I=n(84358),b=n(24045),S=n(91020),C=n(5412),w=n(3611),A=n(21961),E=n(90658),k=n(81636);function _(e,t){return C.R.outcomeTypeMatch({correctness:a.createElement(S.JO.Correctness,{className:t}),clarity:a.createElement(S.JO.ClarityOutcome,{className:t}),premium:a.createElement(S.JO.Star,{className:t}),engagement:a.createElement(S.JO.EngagementOutcome,{className:t}),delivery:a.createElement(S.JO.DeliveryOutcome,{className:t}),vox:null,knowledgeHub:null})(e)}const T=({text:e,className:t})=>a.createElement("div",(0,r._)({className:t},w.yG(e,{allowedTags:["i","b"]}))),M=(e,t,n)=>{const c=A.X.miniTitle(e,t),d=(0,s.zG)(e.activeAlert.extraProperties.vox,o.UI((e=>(({vox:e,theme:t={}})=>({icon:(0,s.zG)(e.logoUrl,o.UI((e=>a.createElement(k.Im,(0,i._)((0,r._)({},(0,l.Sh)(t.logo)),{logoUrl:e}))))),action:a.createElement(k.$x,(0,i._)((0,r._)({vox:e},(0,l.Sh)(t.label)),{isMinimalCard:!1}))}))({vox:e,theme:{logo:n.voxLogo,label:n.voxLabel}})))),u=(0,s.zG)(((e,t)=>(0,s.zG)(e.activeAlert.extraProperties.tone,o.UI((({emojiId:e})=>({action:t.replace(b.Vg,""),emojiId:e})))))(e,c),o.UI((({action:e,emojiId:t})=>({icon:o.G(a.createElement(b.In,{id:t,className:(0,l.Sh)(n.emojiLogo).className})),action:a.createElement(T,{text:e,className:n.wrapper})})))),p=({className:e})=>a.createElement(S.JO.PaidLink,{width:14,className:e});return(0,s.zG)(d,I.vx(u),o.fS((()=>{return{icon:(t=e.activeAlert,(0,s.zG)(t.freePremium,o.Gg((e=>"unlocked"===e)))?o.G(a.createElement(p,{className:(0,l.Sh)(n.freePremiumIcon).className})):E.i.isTakeawayItem(e)?o.G(a.createElement(S.JO.Megaphone,{width:16,className:n.takeawayLogo})):o.YP),action:a.createElement(T,{text:c,className:n.wrapper})};var t})))},G=(e,t,n)=>{const{action:r,icon:i}=M(e,t,n);return{actionComponent:r,iconComponent:(0,s.zG)(i,o.g_((()=>e.renderOptions.cardVisualMode.view(g.j.CardVisualMode.match({onRegular:()=>o.YP,onContrast:()=>o.ij(_(e.activeAlert.lensType,n.lensLogo))}))),(e=>x.h.create(o.G(e)))))}},L=e=>e?f.b.MiniContrast:f.b.Mini,D=e=>[y.y.getDotStyle(e),v.FW.cta],N=()=>{const e=a.useContext(u.m.Context);return a.createElement(p.C.Regular,{className:v.FW.newLabel},e.new)},z=e=>e.hasOwnProperty("features")&&e.features.has(g.j.Features.a11yContrast),P=e=>e.hasOwnProperty("features")&&e.features.has(g.j.Features.sduiContainerStyle);var F;!function(e){e.Bundle=({card:e,actions:t})=>{const[n]=D(e.activeAlert),o=(0,s.zG)(e.renderOptions,z,L);return a.createElement(o,(0,i._)((0,r._)({},(0,l.Sh)(v.l$.wrapper,v.l$.bundleContainer,v.l$.dot,n)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,counter:a.createElement(m.CL,{className:v.l$.alertsCounter},e.alerts.length),sduiStyle:P(e.renderOptions)}),a.createElement(c.F.div,(0,l.Sh)(v.l$.miniContainer),a.createElement("div",{className:v.l$.highlightedText},h.R.bundleTitle(e))))},e.Standard=({card:e,actions:t})=>{const n=a.useContext(u.m.Context),[p,m]=D(e.activeAlert),h=(0,s.zG)(e.renderOptions,z,L),{actionComponent:g,iconComponent:f}=G(e,n,{wrapper:(0,l.Sh)(m,v.FW.ctaText).className,voxLogo:(0,l.Sh)(v.FW.cardLogo,v.l$.cardLogo).className,voxLabel:v.FW.cta,emojiLogo:(0,l.Sh)(v.FW.cardLogo,v.l$.cardLogo).className,lensLogo:(0,l.Sh)(v.FW.cardLogo,v.l$.cardLogo,v.FW.lensIcon).className,takeawayLogo:v.nu.takeawayIconStandard,freePremiumIcon:(0,l.Sh)(v.FW.diamondIcon,v.FW.cardLogo,v.l$.cardLogo).className});return a.createElement(h,(0,i._)((0,r._)({},(0,l.Sh)(v.l$.wrapper,f.view((e=>o.pC(e)?v.l$.invisibleDot:v.l$.dot)),p)),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:P(e.renderOptions)}),a.createElement(c.F.div,(0,l.Sh)(v.l$.miniContainer),(0,s.zG)(f.view(o.WG)),a.createElement("div",{className:v.l$.highlightedText},e.activeAlert.highlightTexts[0]),a.createElement("div",{className:v.l$.middleDot},"·"),g,(0,s.zG)(e.renderOptions.isNew,d.U((e=>o.pC(e)?a.createElement(N,{key:"new-label"}):null)))))},e.TwoLined=({card:e,actions:t})=>{const n=a.useContext(u.m.Context),[d,p]=D(e.activeAlert),m=(0,s.zG)(e.renderOptions,z,L),{actionComponent:h,iconComponent:g}=G(e,n,{wrapper:(0,l.Sh)(p,v.FW.ctaText,v.nu.ctaText,v.nu.subTitle).className,voxLogo:(0,l.Sh)(v.FW.cardLogo,v.nu.cardLogo).className,voxLabel:(0,l.Sh)(v.FW.cta,v.nu.subTitle).className,emojiLogo:(0,l.Sh)(v.FW.cardLogo,v.nu.cardLogo).className,lensLogo:(0,l.Sh)(v.FW.cardLogo,v.nu.lensIcon,v.FW.lensIcon).className,takeawayLogo:v.nu.takeawayIconMini,freePremiumIcon:(0,l.Sh)(v.FW.diamondIcon,v.FW.cardLogo,v.nu.cardLogo).className});return a.createElement(m,(0,i._)((0,r._)({},(0,l.Sh)(v.nu.wrapper,g.view((e=>o.pC(e)?v.nu.invisibleDot:v.nu.dot)),d)),{actions:t,cardId:e.id,getActiveAlert:()=>e.activeAlert,inert:e.positionState.inert,sduiStyle:P(e.renderOptions)}),a.createElement(c.F.div,(0,l.Sh)(v.nu.miniContainer),h,(0,s.zG)(g.view(o.WG)),a.createElement("div",{className:v.Es},e.activeAlert.highlightTexts[0])))}}(F||(F={}))},92792:(e,t,n)=>{n.d(t,{Es:()=>p,FW:()=>z,l$:()=>_,nu:()=>x});var r=n(84910),i=n(78520),a=n(75068),o=n(98227),s=n(49253),l=n(73141);const c="0 1px 8px rgba(109, 117, 141, .18)",d={$nest:{"&:before":{top:o.ux.rem(.85),left:0}}},u="miniTwoLinedHighlightedText",p=o.ux.joinClasses([u,o.ux.style({overflow:"hidden",marginTop:o.ux.rem(-.25),color:a.Il.CoreNeutral90,textOverflow:"ellipsis"})]),m={height:o.ux.rem(3.25),borderRadius:o.ux.rem(l.Jr),boxShadow:c,$nest:{"&:hover":{boxShadow:c},"&:hover .miniTwoLinedHighlightedText":{borderColor:"transparent"}}},h={top:o.ux.rem(.7)},g={top:o.ux.rem(.1)},f={fontWeight:o.ux.important(400),fontSize:o.ux.rem(.75)},y={position:"absolute",left:o.ux.rem(.5),minWidth:"initial",minHeight:"initial",background:a.Il.CoreNeutral0},v=(0,i._)((0,r._)({},y),{top:o.ux.rem(.6)}),x=o.ux.stylesheet({dot:[d],invisibleDot:[d,{$nest:{"&:before":{visibility:"hidden"}}}],wrapper:[m],miniContainer:[{flexDirection:"column"}],cardLogo:[h],lensIcon:[g],subTitle:[f],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],takeawayIconMini:[v],takeawayIconStandard:[y]}),I={height:o.ux.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},b={$nest:{"&:before":{top:o.ux.px(1),bottom:0,left:0}}},S={$nest:{"&:before":{top:o.ux.px(1),bottom:0,left:0,visibility:"hidden"}}},C={height:o.ux.important(o.ux.rem(2.5)),borderRadius:o.ux.rem(l.Jr)},w={color:a.Il.CoreNeutral50,display:"flex",width:o.ux.rem(2),height:o.ux.percent(100),justifyContent:"center",alignItems:"center"},A={overflow:"hidden",color:a.Il.CoreNeutral90,textOverflow:"ellipsis"},E={display:"inline-block",padding:`0 ${o.ux.rem(.5)}`},k={top:0,bottom:0,left:o.ux.rem(.5),margin:"auto"},_=o.ux.stylesheet({wrapper:[I],dot:[b],invisibleDot:[b,S],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[C],alertsCounter:[w],highlightedText:[A],middleDot:[E],cardLogo:[k]}),T={color:a.Il.CoreNeutral50,fontWeight:300},M={position:"absolute",left:o.ux.rem(.5),width:o.ux.rem(1),height:o.ux.rem(1),background:s.Zn},G={left:o.ux.rem(0)},L={marginLeft:o.ux.rem(.5)},D={marginLeft:o.ux.rem(-.5)},N={minHeight:"auto",left:o.ux.rem(.4)},z=o.ux.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[T],cardLogo:[M],lensIcon:[D],outcomesCardLogo:[M,G],newLabel:[L],diamondIcon:[N]})},99747:(e,t,n)=>{n.d(t,{Px:()=>Je,n4:()=>qe,$s:()=>Ze,zO:()=>tt,RF:()=>it});var r=n(84910),i=n(78520),a=n(92379),o=n(58303),s=n(90023),l=n(64297),c=n(48906),d=n(13391),u=n(24909),p=n(31491),m=n(29227),h=n(88347),g=n(27640),f=n(79813),y=n(3262),v=n(43916),x=n(91020),I=n(15602),b=n(77933),S=n(55247),C=n(47311),w=n(2190),A=n(88367),E=n(84856),k=n(82174),_=n(36466),T=n(88813),M=n(29093),G=n(75068),L=n(98227),D=n(48463),N=n(73141);const z=e=>({$nest:{[`&[data-indent="${e}"]`]:{marginLeft:L.ux.rem(.5*e)}}}),P=(e,t,n,r)=>({$nest:{[`&[data-indent="${t}"]`]:{counterIncrement:`card-list${t}`,counterReset:r,$nest:{"&:before":{content:`'${e}' '\\A\\00a0' counter(card-list${t}, ${n}) '. '`}}}}}),F=e=>[P(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),P(e,5,"lower-roman","card-list6 card-list7 card-list8"),P(e,6,"decimal","card-list7 card-list8"),P(e,7,"lower-alpha","card-list8"),P(e,8,"lower-roman","none")],O="cards-replacements_labels-",R={list:`${O}list`,item:`${O}item`,diff:`${O}diff`,columnList:`${O}columnList`,itemInsert:`${O}itemInsert`,deleteAll:`${O}deleteAll`,crossed:`${O}crossed`,deleteQuote:`${O}deleteQuote`,deletePunctuation:`${O}deletePunctuation`,deleteDoubleComma:`${O}deleteDoubleComma`,deleteApostrophe:`${O}deleteApostrophe`,deleteLetter:`${O}deleteLetter`,deletePunctuationBeforeLetter:`${O}deletePunctuationBeforeLetter`,itemOriginal:`${O}itemOriginal`,itemOriginalStrikeThrough:`${O}itemOriginalStrikeThrough`,itemOriginalContent:`${O}itemOriginalContent`,spacesOnlyContent:`${O}spacesOnlyContent`,removeOrContainer:`${O}removeOrContainer`,itemContext:`${O}itemContext`,itemContextShifted:`${O}itemContextShifted`,or:`${O}or`,arrowInsertsList:`${O}arrowInsertsList`,cozyArrowInsertsList:`${O}cozyArrowInsertsList`,inlineHeader:`${O}inlineHeader`,fullSentenceBackground:`${O}fullSentenceBackground`,minimalFullSentenceBackground:`${O}minimalFullSentenceBackground`,fullSentenceDelete:`${O}fullSentenceDelete`,fullSentenceDeleteCollapsed:`${O}fullSentenceDeleteCollapsed`,fullSentenceHidden:`${O}fullSentenceHidden`,fullSentenceListItem:`${O}fullSentenceListItem`,fullSentenceBulletListItem:`${O}fullSentenceBulletListItem`,fullSentenceDashedListItem:`${O}fullSentenceDashedListItem`,fullSentenceOrderedListItem:`${O}fullSentenceOrderedListItem`,fullSentenceOrderedListItemWithFormatting:O+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:O+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:O+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:`${O}fullSentenceInsert`,fullSentenceInsertPunctuation:`${O}fullSentenceInsertPunctuation`,toneAIInsert:`${O}toneAIInsert`,itemRemove:`${O}itemRemove`,oneGapInsert:`${O}oneGapInsert`,oneGapInput:`${O}oneGapInput`,drilldownInsertGroup:`${O}drilldownInsertGroup`,drilldownArrowButton:`${O}drilldownArrowButton`,drilldownIcon:`${O}drilldownIcon`,drilldownOriginalRow:`${O}drilldownOriginalRow`,drilldownBackButton:`${O}drilldownBackButton`,collapsibleDelete:`${O}collapsibleDelete`,collapsibleInsert:`${O}collapsibleInsert`,collapsiblePartContent:`${O}collapsiblePartContent`},$={position:"relative",overflow:"hidden",margin:`0 ${L.ux.rem(.5)} ${L.ux.rem(.5)} 0`,padding:`${L.ux.rem(.25)} ${L.ux.rem(.5)}`,borderRadius:L.ux.rem(N.fx),color:G.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:L.ux.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},B={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:L.ux.rem(.3125),width:"1px",height:"120%",background:G.Il.CoreNeutral0,content:"''",opacity:.8}}},U={position:"relative",marginRight:L.ux.rem(.5),whiteSpace:"nowrap"},j=e=>({overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:`${L.ux.rem(1)} 0`,padding:e?0:L.ux.rem(.5),maxHeight:L.ux.rem(12),borderRadius:L.ux.rem(N.fx),background:e?G.Il.CoreNeutral0:G.Il.CoreNeutral10,color:G.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:`${N.g_}, ${N.xL}`}),W={position:"relative",marginRight:L.ux.rem(.5),maxWidth:`calc(100% - ${L.ux.rem(.5)})`,overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:L.ux.rem(.5),color:G.Il.CoreNeutral50,content:"'→'",verticalAlign:"middle"}}},H={textDecoration:"line-through",color:G.Il.CoreRed40,textDecorationLine:"line-through"},Y=[z(0),z(1),z(2),z(3),z(4),z(5),z(6),z(7),z(8)],V={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:`${N.g_}, ${N.xL}`},Q=e=>({display:"inline-block",background:e?_.I.Background.Brand.Default:G.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:e?T.Blue80:G.Il.CoreGreen50},"&[data-disabled='true']":{background:e?_.I.Background.Brand.Default:G.Il.CoreGreen40,opacity:.4}}}),q={$nest:{"&:after":{transform:"rotate(-25deg)"}}},J={paddingRight:L.ux.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},X=e=>({color:e?_.I.Background.Brand.Default:G.Il.CoreGreen60,fontWeight:600}),Z={paddingRight:L.ux.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},K={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},ee={display:"flex",flexBasis:"100%"},te={margin:`0 ${L.ux.rem(.5)} ${L.ux.rem(.5)} 2px`,color:G.Il.CoreNeutral60},ne={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},re={marginBottom:L.ux.rem(.25),color:G.Il.CoreNeutral60,fontWeight:400,fontSize:L.ux.rem(.8),lineHeight:L.ux.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},ie={color:_.I.Background.Critical.Default,textDecoration:"line-through",fontWeight:600},ae=(0,i._)((0,r._)({},ie),{textDecoration:"none"}),oe={fontWeight:"bold",color:G.Il.CorePurple50},se={background:_.I.Background.Critical.Default,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:T.Red80}}},le={$nest:{"&:before":{content:"'¶\\A\\00a0-\\00a0'"}}},ce={$nest:{"&:before":{content:"'¶\\A\\00a0\\2022\\00a0'"}}},de={width:"100%",marginTop:L.ux.rem(.5),marginBottom:L.ux.rem(.25),boxSizing:"border-box",$nest:{"&[data-disabled='true']":{background:G.Il.CoreNeutral40}}},ue={marginTop:L.ux.rem(.5),lineHeight:`calc(${L.ux.rem(2)} - ${L.ux.px(2)})`,padding:`0 ${L.ux.rem(.5)}`,border:L.ux.important(`${L.ux.px(1)} solid ${G.Il.CoreNeutral50}`),color:G.Il.CoreNeutral90,boxSizing:"border-box",$nest:{"&:placeholder-shown":{borderColor:L.ux.important(G.Il.CoreNeutral20)}}},pe=D.E.style($,Q(!1)),me={margin:`0 ${L.ux.rem(.5)} ${L.ux.rem(.5)} 0`,$nest:{[`& .${R.itemInsert}`]:{transitionProperty:"background",margin:0},[`& > .${R.itemInsert}:first-child:not(:last-child)`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${R.drilldownArrowButton}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}},he={boxShadow:"inset 1px 0px 0px rgba(255, 255, 255, 0.3)",paddingLeft:L.ux.rem(.1875),paddingRight:L.ux.rem(.3125)},ge={width:L.ux.rem(1),height:L.ux.rem(1),minWidth:L.ux.rem(1),minHeight:L.ux.rem(1),verticalAlign:"top",marginTop:L.ux.rem(.25),$nest:{"& > svg":{transform:"scale(0.75)"},"& > svg *":{fill:L.ux.important("white")}}},fe={width:L.ux.percent(100),marginBottom:L.ux.rem(.5),display:"flex",$nest:{"& > *":{marginRight:L.ux.rem(.5)}}},ye={background:G.Il.CoreNeutral10,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:G.Il.CoreNeutral10}}},ve={display:"inline-block",width:L.ux.rem(1),lineHeight:L.ux.rem(.625),height:L.ux.rem(.625),margin:`0 ${L.ux.rem(.25)}`,verticalAlign:"middle",cursor:"pointer",overflowWrap:"normal",textAlign:"center",borderRadius:L.ux.rem(N.mA)},xe={lineHeight:L.ux.rem(.2),verticalAlign:"super",marginLeft:"1px"},Ie=(0,i._)((0,r._)({},ve),{backgroundColor:G.Il.CoreRed10}),be=(0,i._)((0,r._)({},ve),{backgroundColor:G.Il.CoreGreen10}),Se={list:L.ux.joinClasses([R.list,L.ux.style(V),D.E.style(V)]),item:L.ux.joinClasses([R.item,L.ux.style($),D.E.style($)]),itemInsert:L.ux.joinClasses([R.itemInsert,L.ux.style($,Q(!1)),pe]),deleteAll:L.ux.joinClasses([R.deleteAll,L.ux.style({textDecoration:"line-through"}),D.E.style({textDecoration:"line-through"})]),crossed:L.ux.joinClasses([R.crossed,L.ux.style(B)]),deleteQuote:L.ux.joinClasses([R.deleteQuote,L.ux.style(B,q),D.E.style(B,q)]),deletePunctuation:L.ux.joinClasses([R.deletePunctuation,L.ux.style(B,J),D.E.style(B,J)]),deleteDoubleComma:L.ux.joinClasses([R.deleteDoubleComma,L.ux.style({textDecoration:"line-through"}),D.E.style({textDecoration:"line-through"})]),deleteApostrophe:L.ux.joinClasses([R.deleteApostrophe,L.ux.style(B,Z),D.E.style(B,Z)]),deleteLetter:L.ux.joinClasses([R.deleteLetter,L.ux.style(K),D.E.style(K)]),deletePunctuationBeforeLetter:L.ux.joinClasses([R.deletePunctuationBeforeLetter,L.ux.style({textDecoration:"line-through"}),D.E.style({textDecoration:"line-through"})]),itemOriginal:L.ux.joinClasses([R.itemOriginal,L.ux.style(W),D.E.style(W)]),itemOriginalStrikeThrough:L.ux.joinClasses([R.itemOriginalStrikeThrough,L.ux.style(H),D.E.style(H)]),itemOriginalContent:L.ux.joinClasses([R.itemOriginalContent,L.ux.style({color:G.Il.CoreNeutral90}),D.E.style({color:G.Il.CoreNeutral90})]),spacesOnlyContent:L.ux.joinClasses([R.spacesOnlyContent,L.ux.style({whiteSpace:"pre"})]),removeOrContainer:L.ux.joinClasses([R.removeOrContainer,L.ux.style(ee),D.E.style(ee)]),itemContext:L.ux.joinClasses([R.itemContext,L.ux.style(U)]),itemContextShifted:L.ux.joinClasses([R.itemContextShifted,L.ux.style(U,{marginRight:"2px"}),D.E.style(U,{marginRight:"2px"})]),or:L.ux.joinClasses([R.or,L.ux.style(te),D.E.style(te)]),arrowInsertsList:L.ux.joinClasses([R.arrowInsertsList,L.ux.style(ne),D.E.style(ne)]),columnList:L.ux.joinClasses([R.columnList,L.ux.style(ne,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),D.E.style(ne)]),cozyArrowInsertsList:L.ux.joinClasses([R.arrowInsertsList,L.ux.style(ne,{flex:2,flexBasis:"0%"}),D.E.style(ne)]),inlineHeader:L.ux.joinClasses([R.inlineHeader,L.ux.style(re),D.E.style(re)]),toneAIInsert:L.ux.joinClasses([R.toneAIInsert,L.ux.style(oe),D.E.style(oe)]),fullSentenceBackground:L.ux.joinClasses([R.fullSentenceBackground,L.ux.style(j(!1)),D.E.style(j(!1))]),minimalFullSentenceBackground:L.ux.joinClasses([R.minimalFullSentenceBackground,L.ux.style(j(!1),{lineHeight:L.ux.rem(1.3125)}),D.E.style(j(!1),{lineHeight:L.ux.rem(1.3125)})]),fullSentenceDelete:L.ux.joinClasses([R.fullSentenceDelete,L.ux.style(ie),D.E.style(ie)]),fullSentenceDeleteCollapsed:L.ux.joinClasses([R.fullSentenceDeleteCollapsed,L.ux.style(ae),D.E.style(ae)]),fullSentenceHidden:L.ux.joinClasses([R.fullSentenceHidden,L.ux.style({display:"none"})]),fullSentenceListItem:L.ux.joinClasses([R.fullSentenceListItem,L.ux.style(...Y),D.E.style(...Y)]),fullSentenceBulletListItem:L.ux.joinClasses([R.fullSentenceBulletListItem,L.ux.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),D.E.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:L.ux.joinClasses([R.fullSentenceDashedListItem,L.ux.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),D.E.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:L.ux.joinClasses([R.fullSentenceOrderedListItem,L.ux.style(...F(""),...Y),D.E.style(...F(""),...Y)]),fullSentenceOrderedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceOrderedListItemWithFormatting,L.ux.style(...F("¶"),...Y,X(!1)),D.E.style(...F("¶"),...Y,X(!1))]),fullSentenceBulletListItemWithFormatting:L.ux.joinClasses([R.fullSentenceBulletListItemWithFormatting,L.ux.style(...Y,ce,X(!1)),D.E.style(...Y,ce)]),fullSentenceDashedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceDashedListItemWithFormatting,L.ux.style(...Y,le,X(!1)),D.E.style(...Y,le)]),fullSentenceInsert:L.ux.joinClasses([R.fullSentenceInsert,L.ux.style(X(!1))]),fullSentenceInsertPunctuation:L.ux.joinClasses([R.fullSentenceInsertPunctuation,L.ux.style(X(!1))]),diff:L.ux.joinClasses([R.diff,L.ux.style({fontWeight:"bolder"}),D.E.style({fontWeight:"bolder"})]),itemRemove:L.ux.joinClasses([R.itemRemove,L.ux.style($,se)]),oneGapInsert:L.ux.joinClasses([R.oneGapInsert,L.ux.style($,Q(!1),de),pe]),oneGapInput:L.ux.joinClasses([R.oneGapInput,L.ux.style(ue)]),drilldownInsertGroup:L.ux.joinClasses([R.drilldownInsertGroup,L.ux.style(me)]),drilldownArrowButton:L.ux.joinClasses([R.drilldownArrowButton,L.ux.style(he)]),drilldownIcon:L.ux.joinClasses([R.drilldownIcon,L.ux.style(ge)]),drilldownOriginalRow:L.ux.joinClasses([R.drilldownOriginalRow,L.ux.style(fe)]),drilldownBackButton:L.ux.joinClasses([R.drilldownBackButton,L.ux.style(ye)]),collapsibleDelete:L.ux.joinClasses([R.collapsibleDelete,L.ux.style(Ie)]),collapsibleInsert:L.ux.joinClasses([R.collapsibleInsert,L.ux.style(be)]),collapsiblePartContent:L.ux.joinClasses([R.collapsiblePartContent,L.ux.style(xe)])};L.ux.cssRule(`.${R.fullSentenceDelete} + .${R.fullSentenceInsert}`,{marginLeft:L.ux.rem(.25)});const Ce=(0,i._)((0,r._)({},Se),{itemInsert:L.ux.joinClasses([R.itemInsert,L.ux.style($,Q(!0)),pe,M.T$]),oneGapInsert:L.ux.joinClasses([R.oneGapInsert,pe,L.ux.style($,Q(!0),de),M.T$]),fullSentenceOrderedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceOrderedListItemWithFormatting,D.E.style(...F("¶"),...Y,X(!1)),L.ux.style(...F("¶"),...Y,X(!0))]),fullSentenceBulletListItemWithFormatting:L.ux.joinClasses([R.fullSentenceBulletListItemWithFormatting,L.ux.style(...Y,ce,X(!0)),D.E.style(...Y,ce)]),fullSentenceDashedListItemWithFormatting:L.ux.joinClasses([R.fullSentenceDashedListItemWithFormatting,L.ux.style(...Y,le,X(!0)),D.E.style(...Y,le)]),fullSentenceInsert:L.ux.joinClasses([R.fullSentenceInsert,L.ux.style(X(!0))]),fullSentenceInsertPunctuation:L.ux.joinClasses([R.fullSentenceInsertPunctuation,L.ux.style(X(!0))]),fullSentenceBackground:L.ux.joinClasses([R.fullSentenceBackground,L.ux.style(j(!0)),D.E.style(j(!1))]),minimalFullSentenceBackground:L.ux.joinClasses([R.minimalFullSentenceBackground,L.ux.style(j(!0),{lineHeight:L.ux.rem(1.3125)}),D.E.style(j(!0),{lineHeight:L.ux.rem(1.3125)})])});var we;function Ae(e){const t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'”“.,;:!?\\\/…\-—()]+$/)}function Ee(e,t){if(e===t)return;const n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}const i=r<n?r:n,a=function(e,t,n){let r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i);let o=function(e,t,n,r,i){let a=0;for(;e[n-a-1]===t[r-a-1]&&i-a>=0;)a+=1;return a}(e,t,n,r,i);return a+o>n&&(o-=a+o-n),a+o>r&&(o-=a+o-r),{from:a,to:n-o,oldFragment:e.substr(a,n-o-a),newFragment:t.substr(a,r-o-a)}}!function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["'”’]/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'”][.,;]/)}(t)?e.deleteQuote:Ae(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:Boolean(function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t))?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(we||(we={}));const ke=e=>e?Ce:Se,_e=({theme:e,children:t})=>a.createElement(b.Xk,{className:e.list},t),Te=({transform:e,title:t,disabled:n,boldifier:r=ze,classes:i,onClick:o})=>a.createElement(f.zx,{animationMode:y.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:v.X.div,onClick:o,title:t,disabled:n,className:i.itemInsert},e.map(((e,t)=>a.createElement(a.Fragment,{key:t},r(e,i.diff))))),Me=({transform:e,theme:t,showOnboarding:n,onClick:i,onExpand:o})=>{const s=a.useContext(g.m.Context),l=e.label.map(((e,t)=>a.createElement(a.Fragment,{key:t},e.text))),d=a.createElement(f.zx,(0,r._)({animationMode:y.m.FromClickPoint,name:"expand-insert",onClick:o,title:s.synfony.drilldownTooltip(l)},(0,c.Sh)(t.itemInsert,t.drilldownArrowButton)),a.createElement(x.JO.Arrow,{direction:x.n4.right,className:t.drilldownIcon}));return a.createElement("div",{className:t.drilldownInsertGroup},a.createElement(f.zx,{animationMode:y.m.FromClickPoint,name:"apply-insert",role:"insertion",tag:v.X.div,onClick:i,title:s.synfony.applyTooltip,className:t.itemInsert},l),Boolean(e.subLabels.length)&&(n?a.createElement(Xe,null,d):d))},Ge=({transform:e,title:t,theme:n,onClick:r})=>a.createElement(f.zx,{animationMode:y.m.FromClickPoint,name:"apply-remove",role:"deletion",tag:v.X.div,onClick:r,title:t,className:n.itemRemove},e.map(((e,t)=>a.createElement(Fe,{key:t,element:e,theme:n})))),Le=({transform:e,title:t,theme:n,onClick:r,children:i})=>a.createElement("div",{className:n.removeOrContainer},e.map(((i,o)=>"text"===i.type?a.createElement("span",{key:o,className:o===e.length-1?n.itemContextShifted:n.itemContext},i.text):a.createElement(f.zx,{key:o,animationMode:y.m.FromClickPoint,name:"apply-remove-or",role:"deletion",tag:v.X.div,onClick:r,title:t,className:n.itemRemove},a.createElement(Fe,{element:i,theme:n})))),i),De=e=>a.createElement("span",{className:e.classes.or},a.useContext(g.m.Context).card.or),Ne=({transform:e,replacements:t,boldifier:n=ze,theme:r,strikeThrough:i=!0})=>{var o;const l=e.every((e=>null===e.text.match(/\n/))),d=Ee(e.map((e=>e.text)).join(""),1===t.length?t[0].map((e=>e.text)).join(""):""),u=(0,s.zG)(null===(o=d)||void 0===o?void 0:o.oldFragment,(e=>Boolean(e)&&(0,m.tj)(e))),p=l&&u;return a.createElement("div",(0,c.Sh)(r.itemOriginal,i&&r.itemOriginalStrikeThrough),a.createElement("span",(0,c.Sh)(r.itemOriginalContent,p&&r.spacesOnlyContent),e.map(((e,t)=>a.createElement(a.Fragment,{key:t},n(e,r.diff))))))},ze=(0,h.ei)("text"),Pe=({text:e,type:t},n)=>"text"===t?e:a.createElement("span",{className:n},e),Fe=({element:e,strikeClass:t,theme:n})=>"delete"===e.type?a.createElement("span",(0,c.Sh)(we.getClass(n,e.text),t),e.text):a.createElement(a.Fragment,null,e.text);function Oe({labels:e,original:t,onlyReplacements:n},r,i,o,s){const l=1===t.length,[c]=l?[t[0].text,e[0][0].text].map((e=>(t,n)=>r=>a.createElement(Qe,{index:n,oldText:t,newText:r.text,theme:e}))(o)):[Pe,Pe];return a.createElement(_e,{theme:o},!n&&a.createElement(Ne,{transform:t,theme:o,replacements:e}),a.createElement("div",{className:i===A.j.Density.cozy?o.cozyArrowInsertsList:e.length>2?o.columnList:o.arrowInsertsList},e.map(((e,t)=>a.createElement(Te,{key:t,title:r,onClick:s(t),transform:e,boldifier:c,classes:o})))))}const Re=/^\W/,$e=(e,t)=>{switch(e.type){case w.GP.Delete:return t.fullSentenceDelete;case w.GP.Insert:return Re.test(e.text)?t.fullSentenceInsertPunctuation:t.fullSentenceInsert;case w.GP.Text:case w.GP.List:return"";default:return(0,l.vE)(e)}},Be=(e,t)=>{switch(e.type){case w.GP.Delete:return t.fullSentenceHidden;case w.GP.List:case w.GP.Text:case w.GP.Insert:return"";default:return(0,l.vE)(e)}},Ue=(e,t)=>{switch(e.type){case w.GP.Delete:return t.fullSentenceHidden;case w.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?t.fullSentenceDashedListItemWithFormatting:t.fullSentenceOrderedListItemWithFormatting;case w.GP.Insert:case w.GP.Text:return"";default:return(0,l.vE)(e)}},je=(e,t)=>{switch(e.type){case w.GP.Delete:return t.fullSentenceHidden;case w.GP.List:return"bullet"===e.kind?t.fullSentenceBulletListItem:"dashed"===e.kind?t.fullSentenceDashedListItem:t.fullSentenceOrderedListItem;case w.GP.Insert:case w.GP.Text:return"";default:return(0,l.vE)(e)}},We=({p:e,theme:t})=>{const n=d.h.create(e.shouldBeCollapsed);return a.createElement(u.F.Fragment,null,n.view((0,p.RN)(a.createElement("span",{className:e.type===w.GP.Delete?t.collapsibleDelete:t.collapsibleInsert,onClick:()=>n.set(!1),role:"button",tabIndex:0},a.createElement("span",{className:t.collapsiblePartContent},"…")),a.createElement(a.Fragment,null,e.text))))},He=(e,t,n)=>{if(!e.shouldBeCollapsed)return e.text;switch(e.type){case w.GP.Insert:case w.GP.Delete:return t?a.createElement(We,{p:e,theme:n}):e.text;case w.GP.Text:return a.createElement("span",null," … ");default:(0,l.vE)(e)}},Ye=e=>{const t=(0,s.zG)(e.showDiff,(0,p.RN)($e,Be),(t=>t(e.transformPart,e.theme)));return a.createElement("span",{className:t},He(e.transformPart,e.showDiff,e.theme))},Ve=e=>{const t=(0,s.zG)(e.showDiff,(0,p.RN)(Ue,je),(t=>t(e.transformPart,e.theme)));return e.transformPart.type===w.GP.List?a.createElement("span",{className:t,"data-indent":e.transformPart.indent}):a.createElement("span",{className:t},He(e.transformPart,e.showDiff,e.theme))},Qe=({index:e=0,oldText:t,theme:n,newText:r})=>{const i=function(e,t){if(e.length<=4)return null;const n=Ee(e,t);if(void 0===n)return null;const{from:r,to:i,oldFragment:a,newFragment:o}=n,s=1===o.length&&r>0&&e[r-1]===o,l=1===a.length&&0===o.length&&t[r-1]===a;let c=r,d=o;return(s||l)&&(c=r-1),s&&(d=o+o),l&&(d=a),d.length>3?null:[e.substring(0,c),d,e.substring(i)]}(t,r),o=!!i&&(0,m.tj)(i[1]);return a.createElement(a.Fragment,null,i?[i[0],a.createElement("span",{key:e,className:o?n.spacesOnlyContent:n.diff},i[1]),i[2]]:r)},qe=e=>{const{onMount:t,maxHeight:n}=(0,E.N)(),r=ke(e.a11yContrast);return a.createElement(b.XY,{mount:t,style:{maxHeight:n.pipe(C.map(o.fS(s.r5)))},tabIndex:0,className:(0,s.zG)(e.layoutDensity,A.j.Density.matchOrDefault(A.j.Density.minimal)((()=>r.minimalFullSentenceBackground),(()=>r.fullSentenceBackground)))},e.replacements.kind===w._k.WithFormatting?e.replacements.labels.map(((t,n)=>a.createElement(Ve,{showDiff:e.showDiff,transformPart:t,key:n,theme:r}))):e.replacements.labels.map(((t,n)=>a.createElement(Ye,{showDiff:e.showDiff,transformPart:t,key:n,theme:r}))))},Je=({replacements:e,layoutDensity:t,a11yContrast:n,selection:r,onClick:i,onDive:o,onBack:s})=>{const l=a.useContext(g.m.Context),{activeLabels:c,original:d}=w.ey.getSelectedItems(e,r),u=ke(n);return a.createElement(_e,{theme:u},a.createElement("div",{className:u.drilldownOriginalRow},r.length>0&&a.createElement(f.zx.Ghost,{name:"go-back",title:l.synfony.back,onClick:s,className:u.drilldownBackButton},a.createElement(x.JO.Arrow,{direction:x.n4.left})),a.createElement(Ne,{transform:d,theme:u,replacements:[],strikeThrough:!Boolean(r)||0===r.length})),a.createElement("div",{className:t===A.j.Density.cozy?u.cozyArrowInsertsList:u.arrowInsertsList},c.map(((e,t)=>a.createElement(Me,{key:t,transform:e,showOnboarding:2===t,theme:u,onClick:i(e.alternativeId),onExpand:()=>o(t,e.alternativeId)})))))},Xe=e=>{const t=a.useContext(g.m.Context);return a.createElement(k.TG,{alignment:"topLeft",eventType:"onclick",stepId:S.X.StepId.Synfony,message:t.synfony.onboardingTooltip,dotPosition:{kind:"dotAtPosition",position:k.E2.rightCenter}},e.children)},Ze=e=>{const t=a.useContext(g.m.Context).card,n=""===e.gapValue,r=ke(e.a11yContrast);return a.createElement(a.Fragment,null,a.createElement(I.B2,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:t=>e.onChange(t.target.value),onKeyPress:e=>{"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:r.oneGapInput}),a.createElement(Te,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:Pe,onClick:e.onApply,classes:{itemInsert:r.oneGapInsert,inlineHeader:r.inlineHeader,diff:r.diff},disabled:n,transform:Ke(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Ke=(e,t,n)=>[...e,{type:w.GP.Insert,text:et(e)+(t||"…")+et(n),shouldBeCollapsed:!1},...n],et=e=>e.length?" ":"",tt=({replacementsLabels:e,layoutDensity:t,a11yContrast:n,onClick:r})=>{const i=a.useContext(g.m.Context).card.todoAction(e.tooltipText),o=ke(n);switch(e.type){case w.b$.Type.InsertList:return a.createElement(_e,{theme:o},e.labels.map(((e,t)=>a.createElement(Te,{key:t,title:i,onClick:r(t),transform:e,classes:o}))));case w.b$.Type.DeleteList:return a.createElement(_e,{theme:o},e.labels.map(((e,t)=>a.createElement(Ge,{key:t,title:i,onClick:r(t),transform:e,theme:o}))));case w.b$.Type.Arrow:return Oe(e,i,t,o,r);case w.b$.Type.InsertOr:return a.createElement(_e,{theme:o},a.createElement(Te,{transform:e.labels[0],title:i,onClick:r(0),boldifier:Pe,classes:o}),a.createElement(De,{classes:o}),a.createElement(Te,{transform:e.labels[1],title:i,onClick:r(1),boldifier:Pe,classes:o}));case w.b$.Type.DeleteOr:return a.createElement(_e,{theme:o},e.labels.map(((t,n)=>a.createElement(Le,{key:n,title:i,onClick:r(n),theme:o,transform:t},n===e.labels.length-2&&a.createElement(De,{classes:o})))));case w.b$.Type.Citation:case w.b$.Type.FullSentence:case w.b$.Type.OneGap:case w.b$.Type.Drilldown:case w.b$.Type.ShortenIt:case w.b$.Type.ToneAI:case w.b$.Type.WritingExpert:return null;default:return(0,l.vE)(e)}},nt=({label:e,a11yContrast:t})=>{const n=e.findIndex((e=>e.type===w.GP.Delete));let o=e.reduce(((e,t)=>e=e.concat(t.text.split(" ").map((e=>({word:e,isDelete:t.type===w.GP.Delete,shouldHighlight:!1}))))),[]).filter((e=>""!==e.word));return o=0===n?o.filter((e=>!e.isDelete)).map(((e,t)=>{let n=!1;return t-2<0&&(n=!0),(0,i._)((0,r._)({},e),{shouldHighlight:n})})):n===e.length-1?o.filter((e=>!e.isDelete)).map(((e,t,n)=>{let a=!1;return t+2>=n.length&&(a=!0),(0,i._)((0,r._)({},e),{shouldHighlight:a})})):o.map(((e,t,n)=>{let a=!1;return(void 0!==n[t+1]&&n[t+1].isDelete||void 0!==n[t-1]&&n[t-1].isDelete)&&(a=!0),(0,i._)((0,r._)({},e),{shouldHighlight:a})})).filter((e=>!e.isDelete)),a.createElement(a.Fragment,null,o.map(((e,n,r)=>a.createElement("span",{key:`${e.word}-${n}`,className:e.shouldHighlight?ke(t).toneAIInsert:void 0},e.word,void 0===r[n+1]||Ae(r[n+1].word)?"":" "))))},rt=({label:e,a11yContrast:t})=>a.createElement(a.Fragment,null,e.filter((e=>e.type!==w.GP.Delete)).map((e=>a.createElement("span",{key:e.text,className:e.type===w.GP.Insert?ke(t).toneAIInsert:void 0},e.text)))),it=({label:e,className:t,a11yContrast:n})=>{let r;return r=!e.some((e=>e.type===w.GP.Insert))?a.createElement(nt,{label:e,a11yContrast:n}):a.createElement(rt,{label:e,a11yContrast:n}),a.createElement("div",{className:t},r)}},14196:(e,t,n)=>{n.d(t,{Gh:()=>m,f8:()=>p});var r=n(84910),i=n(78520),a=n(90023),o=n(75068),s=n(98227),l=n(73141),c=n(88367),d=n(91468),u=n(42877);const p=e=>({container:(0,a.zG)(e,c.j.Density.matchOrDefault(c.j.Density.cozy)((()=>x.cozyCardContainer),(()=>x.compactCardContainer)))}),m=e=>(0,i._)((0,r._)({},e.hasOwnProperty("features")&&e.features.has(c.j.Features.a11yContrast)?(e=>({container:(0,a.zG)(e.layoutDensity,c.j.Density.matchOrDefault(c.j.Density.cozy)((()=>e.features.has(c.j.Features.sduiContainerStyle)?x.cozyCardContainerContrastSdui:x.cozyCardContainerContrast),(()=>x.compactCardContainer)))}))(e):p(e.layoutDensity)),{wrapper:(0,a.zG)(e.layoutDensity,c.j.Density.matchOrDefault(c.j.Density.minimal)((()=>x.minimalCardWrapper),(()=>{})))}),h={padding:`${s.ux.rem(.75)} ${s.ux.rem(.5)} ${s.ux.rem(.5)} ${s.ux.rem(1)}`},g={margin:`${s.ux.rem(1)} 0 ${s.ux.rem(1.5)}`,borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0,boxShadow:`0 ${s.ux.rem(.625)} ${s.ux.rem(l.mJ)} 0 rgba(198, 203, 222, .45)`},f={margin:`${s.ux.rem(1)} 0 ${s.ux.rem(1.5)}`,borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0,boxShadow:u.S.z300},y={boxShadow:u.s.llamaShadowToken},v={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:s.ux.rem(l.Jr),background:o.Il.CoreNeutral0},x=(0,i._)((0,r._)({},s.ux.stylesheet({minimalCardWrapper:[h],compactCardContainer:[v]})),{cozyCardContainer:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(g)]),cozyCardContainerContrast:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(f)]),cozyCardContainerContrastSdui:s.ux.joinClasses([d.g.cozyCardContainerSelector,s.ux.style(f),s.ux.style(y)])})},12331:(e,t,n)=>{n.d(t,{T:()=>r});var r,i=n(84910),a=n(78520),o=n(92379),s=n(48906),l=n(24909),c=n(13391),d=n(63532),u=n(29227),p=n(75068),m=n(27640),h=n(79813),g=n(24045),f=n(91020),y=n(98227),v=n(73141),x=n(28627),I=n(70394),b=n(74775),S=n(91045);!function(e){e.Mini=({card:e,actions:t,twoLined:n,useBundleContainer:r})=>o.createElement(b.b.Mini,(0,a._)((0,i._)({},(0,s.Sh)(!0===n?_.twoLinedWrapper:_.standardWrapper,!0===r?_.bundleContainer:null)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],inert:e.positionState.inert,hideDot:!0}),o.createElement(l.F.div,{className:_.content},void 0!==e.activeAlert.emojiID?o.createElement(g.In,{id:e.activeAlert.emojiID,className:_.icon}):o.createElement(f.JO.EthicalAI.Heart,{className:_.icon}),o.createElement("div",{className:_.highlightedText},e.activeAlert.miniCardTitle))),e.Full=({card:e,actions:t,isChecking:n})=>{const r=o.useContext(m.m.Context),i=c.h.create(!1);return x.P.useSubscriptionTo(n.pipe(d.b((e=>i.set(e))))),o.createElement(S.eb,{card:e,actions:t,isChecking:n,body:o.createElement(o.Fragment,null,o.createElement(S.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(S.Dx,{text:e.activeAlert.title}),void 0!==e.activeAlert.bannerColors?o.createElement("div",null,e.activeAlert.bannerColors.map((e=>o.createElement("div",{className:D.bannerStripe,style:{backgroundColor:e}})))):null,o.createElement(S.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity})),footer:o.createElement(o.Fragment,null,o.createElement(S.lJ,{card:e}),o.createElement(h.zx.Primary,{key:"ethical-ai-external-link",name:"ethical-ai-external-link",href:e.activeAlert.externalLink,target:"_blank",rel:"noopener noreferrer",title:r.card.todoAction(e.activeAlert.todoAction),onClick:()=>{t.next({type:I.lY.Type.ethicalAIOpenExternalLink,alertId:e.activeAlert.id,itemId:e.id,externalLink:e.activeAlert.externalLink}),e.activeAlert.shouldDismissAfterOpeningLink&&t.next({type:I.lY.Type.alertResolve,id:e.id,alertId:e.activeAlert.id})},className:D.externalLinkButton},o.createElement("div",{className:D.externalLinkButtonContent},(0,u.kC)(e.activeAlert.todoAction),o.createElement(f.JO.EthicalAI.ExternalLink,{className:D.externalLinkButtonContentIcon})))),alwaysShowWrongAndOffensiveButtons:e.activeAlert.isFlaggable})}}(r||(r={}));const C={height:y.ux.rem(3.25),borderRadius:y.ux.rem(v.Jr),boxShadow:"0 1px 8px rgba(109, 117, 141, .18)"},w={height:y.ux.rem(3)},A={height:y.ux.important(y.ux.rem(2.5)),borderRadius:y.ux.rem(v.Jr)},E={width:y.ux.rem(1),height:y.ux.rem(1),marginRight:y.ux.rem(.5)},k={overflow:"hidden",color:p.Il.CoreNeutral90,textOverflow:"ellipsis"},_=y.ux.stylesheet({twoLinedWrapper:[C],standardWrapper:[w],bundleContainer:[A],content:[{display:"flex",alignItems:"center"}],icon:[E],highlightedText:[k]}),T={width:y.ux.percent(100),$nest:{a:{color:p.Il.CoreNeutral0,textDecoration:"none"}}},M={width:y.ux.percent(100),position:"relative",textAlign:"center"},G={position:"absolute",top:y.ux.rem(.25),right:y.ux.rem(.25)},L={width:y.ux.percent(100),height:y.ux.rem(.5)},D=y.ux.stylesheet({externalLinkButton:[T],externalLinkButtonContent:[M],externalLinkButtonContentIcon:[G],bannerStripe:[L]})},25:(e,t,n)=>{n.d(t,{A:()=>Me});var r=n(92379),i=n(90023),a=n(24909),o=n(47311),s=n(21961),l=n(90658),c=n(88367),d=n(74775),u=n(84910),p=n(78520),m=n(58303),h=n(64297),g=n(13391),f=n(31491),y=n(72111),v=n(4331),x=n(35917),I=n(27640),b=n(79813),S=n(91020),C=n(15602),w=n(77933),A=n(17690),E=n(3611),k=n(80388),_=n(70394),T=n(86845),M=n(75068),G=n(98227);const L=G.ux.style({margin:`${G.ux.rem(1)} 0`}),D=(G.ux.style({marginLeft:G.ux.rem(.5),lineHeight:G.ux.rem(1.3125),fontSize:G.ux.rem(.875),color:M.Il.CoreNeutral90}),G.ux.style({marginLeft:G.ux.rem(1)})),N={color:M.Il.CoreRed60,fontSize:G.ux.rem(.75),lineHeight:G.ux.rem(1.125)},z=G.ux.style(N),P=G.ux.style(N,{visibility:"hidden"}),F=G.ux.style({padding:0}),O=G.ux.style({paddingTop:G.ux.rem(1),paddingLeft:G.ux.rem(1),paddingRight:G.ux.rem(1),display:"flex"}),R=G.ux.style({minWidth:G.ux.rem(1)}),$=G.ux.style({paddingTop:G.ux.rem(.25),paddingLeft:G.ux.rem(.5)}),B=G.ux.style({paddingLeft:G.ux.rem(.5),paddingRight:G.ux.rem(1),marginTop:G.ux.rem(.5)}),U=G.ux.style({display:"flex",alignItems:"center",gap:G.ux.rem(.75),marginTop:G.ux.rem(1)}),j=G.ux.style({flexGrow:1}),W=G.ux.style({marginTop:G.ux.rem(1.5)}),H=G.ux.style({fontWeight:"bold",paddingBottom:G.ux.rem(.25)}),Y=G.ux.style({height:G.ux.rem(2.5),paddingLeft:G.ux.rem(.5)}),V=G.ux.style({height:G.ux.rem(6),paddingLeft:G.ux.rem(.5)}),Q=G.ux.style({paddingTop:G.ux.rem(1.5),color:M.Il.CoreNeutral50}),q=G.ux.style({display:"flex",flexDirection:"row",columnGap:G.ux.rem(.5),alignItems:"center",paddingLeft:G.ux.rem(.5),paddingRight:G.ux.rem(1),paddingBottom:G.ux.rem(.5)}),J=G.ux.style({flex:3,textAlign:"center"}),X=G.ux.style({color:M.Il.CoreNeutral50,border:`1px solid ${M.Il.CoreNeutral20}`,borderRadius:G.ux.rem(.25)});var Z=n(14196);const K=({card:e,actions:t})=>(0,i.zG)(e.visualState.transition,m.DT((e=>"feedback_form"===e.type)),m.g_((()=>(y.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",e),null)),(n=>"survey"===n.formType?r.createElement(ee,{card:e,data:n,actions:t}):r.createElement(te,{card:e,data:n,actions:t})))),ee=({card:e,data:t,actions:n})=>{const i=r.useContext(I.m.Context).card.feedbackForm,o=g.h.create(void 0),s=g.h.create(!1),l=r=>n.next((0,u._)({alertId:e.activeAlert.id,reason:r},t.submitActionType===_.lY.Type.alertApplyFormSubmit?{type:_.lY.Type.alertApplyFormSubmit,alertApplyActionProps:t.alertApplyActionProps}:{type:_.lY.Type.alertIgnoreFormSubmit})),c=`survey-title-${e.id}`;return r.createElement(T.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>n.next({type:_.lY.Type.alertIgnoreFeedbackFormShow,alertId:e.activeAlert.id}),theme:(0,Z.Gh)(e.renderOptions),visualState:e.visualState,body:r.createElement(r.Fragment,null,r.createElement(w.H4,{id:c,className:L},t.survey.question||i.dismissReason),r.createElement(v.V.Group,{id:`survey-${e.id}`,selectedItemIndex:o,"aria-labelledby":c,items:t.survey.options.map((e=>e.text)),onChange:()=>s.set(!1)})),mainActions:r.createElement(r.Fragment,null),footer:r.createElement(r.Fragment,null,r.createElement(a.F.div,{"aria-hidden":s,className:s.view((0,f.RN)(z,P))},i.error),r.createElement("div",null,r.createElement(b.zx.Primary,{name:"submitCardFeedbackForm",onClick:()=>{const e=o.get();return void 0===e?s.set(!0):E.hz((()=>l(t.survey.options[e].key)))()}},i.submit),r.createElement(b.zx.Ghost,{className:D,name:"skipCardFeedbackForm",onClick:E.hz((()=>l("skipped")))},i.skip))),subActions:r.createElement(r.Fragment,null)})},te=({card:e,data:t,actions:n})=>{const i=ie(e,t),a="background"===t.gbPrompt.promptType&&A.BY.isVox(t.gbPrompt),[o,s]=r.useState("initial"),[l,c]=r.useState(i.source),[d,m]=r.useState(i.target),[g,f]=r.useState(""),y=!("createRule"!==o||l&&d),v=r=>{const i={alertId:e.activeAlert.id,alertApplyActionProps:t.alertApplyActionProps,gbPrompt:t.gbPrompt,patternName:e.activeAlert.patternName,source:l,target:d,description:g};switch(r){case _.lY.Type.gbPromptDismiss:n.next((0,p._)((0,u._)({},i),{type:r,step:o}));break;case _.lY.Type.gbPromptApply:case _.lY.Type.gbPromptCreateRule:n.next((0,p._)((0,u._)({},i),{type:r}));break;default:(0,h.vE)(r)}},I="initial"===o?t.gbPrompt.description:r.createElement(r.Fragment,null,r.createElement("div",{className:U},r.createElement("div",{className:j},r.createElement(x.Z.Base,{className:H},"Original"),r.createElement(C.B2,{name:"gbprompt-source",className:Y,value:l,onChange:e=>c(e.target.value)})),r.createElement(x.Z.Paper,{className:Q},"→"),r.createElement("div",{className:j},r.createElement(x.Z.Base,{className:H},"Change to"),r.createElement(C.B2,{name:"gbprompt-target",className:Y,value:d,onChange:e=>m(e.target.value)}))),r.createElement("div",{className:W},r.createElement(x.Z.Base,{className:H},"Explanation"),r.createElement(C.E_,{className:V,value:g,onChange:e=>f(e.target.value),placeholder:"Add it here...",blockExtension:!0})));return r.createElement(T.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>n.next({type:_.lY.Type.gbPromptShow,patternName:e.activeAlert.patternName}),theme:(0,p._)((0,u._)({},(0,Z.Gh)(e.renderOptions)),{wrapper:F}),visualState:e.visualState,header:r.createElement("div",{className:O},r.createElement(S.JO.StyleGuide,null),r.createElement(w.H4,{className:$},t.gbPrompt.title)),body:r.createElement("div",{className:B},I),mainActions:r.createElement(r.Fragment,null),footer:r.createElement("div",{className:q},r.createElement(ne,{step:o,disabled:y,onClick:()=>{"initial"===o&&a?(s("createRule"),v(_.lY.Type.gbPromptCreateRule)):v(_.lY.Type.gbPromptApply)}}),r.createElement(re,{step:o,onClick:()=>v(_.lY.Type.gbPromptDismiss)})),subActions:r.createElement(r.Fragment,null)})},ne=({step:e,disabled:t,onClick:n})=>{const i=r.useContext(I.m.Context).card.gbPrompt;return"initial"===e?r.createElement(b.zx.Primary,{name:"submitGbPromptFeedbackForm",className:J,disabled:t,onClick:E.hz(n)},r.createElement(S.JO.StyleGuideWhite,{width:18,className:R}),i.addRule):r.createElement(b.zx.Primary,{name:"submitGbPromptFeedbackForm",className:J,disabled:t,onClick:E.hz(n)},i.saveRule)},re=({step:e,onClick:t})=>{const n=r.useContext(I.m.Context).card.gbPrompt;return"initial"===e?r.createElement(b.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:X,onClick:E.hz(t)},n.dismiss):r.createElement(b.zx.Flat,{name:"dismissGbPromptFeedbackForm",className:X,onClick:E.hz(t)},n.cancelSavingRule)},ie=(e,t)=>{const n=e.activeAlert,r=t.alertApplyActionProps.alternativeIndex;return k.$.isSuper(n)?A.BY.isVox(t.gbPrompt)?ae(n,r):oe(n,r):{source:"",target:""}},ae=(e,t)=>{const n=e.labels;return{source:n.filter(((e,n)=>n!==t)).map(se)[0],target:se(n[t])}},oe=(e,t)=>({source:"",target:e.labels[t].label}),se=({replacementTexts:e})=>[...e].sort()[0];var le=n(91269),ce=n(76520),de=n(28627),ue=n(91045);const pe=G.ux.style({marginRight:G.ux.rem(-.5),marginTop:G.ux.rem(.5)}),me=G.ux.style({padding:`0 ${G.ux.rem(1.625)} !important`,marginRight:G.ux.rem(.125)}),he=G.ux.style({marginRight:0}),ge=({card:e,actions:t,showLabel:n=!0})=>{const a=r.useRef(g.h.create(!1));de.P.useEffectOnWillUnmount((()=>{a.current.get()||(0,i.zG)(e.muteCategory,m.UI((n=>t.next({type:_.lY.Type.mutedAlertSuccessDismissed,id:e.id,categoryId:n.id}))))}));const o=r.useContext(I.m.Context).card.mutedAlertCard;return r.createElement(T.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:_.lY.Type.mutedAlertSuccessShow}),theme:(0,Z.Gh)(e.renderOptions),visualState:e.visualState,body:r.createElement(r.Fragment,null,n?r.createElement(ue.__,{alert:e.activeAlert,options:e.renderOptions}):null,r.createElement(w.XY,null,o.description((0,i.zG)(e.muteCategory,m.g_((()=>""),(e=>e.description)))))),mainActions:r.createElement(r.Fragment,null),footer:r.createElement("div",{className:pe},r.createElement(b.zx.Primary,{name:"gotIt",className:me,onClick:()=>E.hz((()=>t.next({type:_.lY.Type.switchToNext})))()},o.successButtonLabel),r.createElement(b.zx.Ghost,{name:"turnBackOn",onClick:E.hz((()=>{a.current.set(!0),(0,i.zG)(e.muteCategory,m.UI((n=>t.next({type:_.lY.Type.undoMuteAlertCategory,categoryId:n.id,viewType:e.activeAlert.type,id:e.id}))))}))},o.undoButtonLabel,r.createElement(S.JO.Undo,{color:M.Il.CoreBlue50,className:he}))),subActions:r.createElement(b.zx.Tertiary,{name:"manageOptionalSuggestions",onClick:()=>t.next({type:_.lY.Type.mutedAlertSuggestionManagementClick})},o.settingsLabel,r.createElement(S.JO.OuterLink,null))})};var fe=n(12331),ye=n(92392),ve=n(14323),xe=n(48906);const Ie=({onLeftClick:e,onRightClick:t,currentMatch:n,totalMatch:i,replaceOneMatch:a=!0,disableOnEnd:o=!0,style:s})=>{const l=r.useContext(I.m.Context).card.matchesNavigation;return 0===i?null:1===i&&a?r.createElement("div",(0,xe.Sh)(Ce.matchesRow,!!Boolean(s.matchesRow)&&s.matchesRow),r.createElement(w.ck,(0,xe.Sh)(Ce.matchesCount,!!Boolean(s.matchesCount)&&s.matchesCount),l.numberOfMatches(i))):r.createElement("div",(0,xe.Sh)(Ce.matchesRow,!!Boolean(s.matchesRow)&&s.matchesRow),r.createElement(b.zx.Ghost,{disabled:o&&0===n,name:"left",title:l.prev,"aria-label":l.prev,onClick:e},r.createElement(S.JO.Arrow,(0,xe.Sh)(Ce.leftButtonIcon,!!Boolean(s.leftButtonIcon)&&s.leftButtonIcon))),r.createElement(w.ck,(0,xe.Sh)(Ce.matchesCount,!!Boolean(s.matchesCount)&&s.matchesCount),l.currentMatchPosition(n+1,i)),r.createElement(b.zx.Ghost,{disabled:o&&n===i-1,name:"right",title:l.next,"aria-label":l.next,onClick:t},r.createElement(S.JO.Arrow,(0,xe.Sh)(Ce.rightButtonIcon,!!Boolean(s.rightButtonIcon)&&s.rightButtonIcon))))},be={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:G.ux.rem(.25)}}},Se={textTransform:"uppercase",letterSpacing:G.ux.px(.8),lineHeight:G.ux.rem(2)},Ce=G.ux.stylesheet({matchesRow:[be],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[Se]});function we(e,t,n){const{activeAlert:r,activeHighlightIndex:i}=t,a=r.getHighlightRanges(),o=(i+("left"===e?a.length-1:1))%a.length;n.next({type:_.lY.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:o},direction:e})}const Ae=({card:e,actions:t,selectedLabelIndex:n,isChecking:i})=>{const a=r.useContext(I.m.Context),l=g.h.create(!1);return de.P.useSubscriptionTo(i.pipe(o.tap((e=>l.set(e))))),r.createElement(ue.Nm,{applyMessage:e.activeAlert.todoAction,checkingMessage:a.card.checking,title:a.card.todoAction(e.activeAlert.todoAction),checkingInProgress:l,onClick:()=>{t.next({type:_.lY.Type.alertApply,alertId:e.activeAlert.id,alternativeIndex:n.get(),id:e.id,eligibleForSurvey:s.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:s.X.isEligibleForGbPrompt(e),cardType:_.lY.getCardType(e)})}})},Ee=({card:e,actions:t})=>r.createElement(Ie,{onLeftClick:()=>we("left",e,t),onRightClick:()=>we("right",e,t),currentMatch:e.activeHighlightIndex,totalMatch:e.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}});var ke=n(7496);const _e=({activeAlert:e,selectedLabelIndex:t,actions:n})=>{const i=r.useContext(I.m.Context);return r.createElement("div",{className:ke.V.optionsContainer},e.labels.map(((a,o)=>r.createElement(r.Fragment,{key:`option-${o}`},r.createElement(v.V.Item,{id:`${e.id}-${o}`,className:ke.V.optionLabel,onChange:()=>{t.set(o),n.next({type:_.lY.Type.alternativeReplacementRadioButtonClick,index:o})},checked:t.view((e=>e===o))},a.label),r.createElement(w.x4,{className:ke.V.optionExample},a.replacementTexts.join("; ")),r.createElement(w.x4,{className:ke.V.optionSecondaryAttribute},i.card.matchesNavigation.numberOfMatches(a.matches))))))},Te=({card:e,actions:t,isChecking:n,isCheckingGlobal:i})=>{const a=g.h.create(0);return r.createElement(T.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,visualState:e.visualState,onFocus:()=>{t.next({type:_.lY.Type.alertCardShow,cardType:_.lY.getCardType(e),alertId:e.activeAlert.id})},theme:(0,u._)({wrapper:(s=e.renderOptions,s.hasOwnProperty("features")&&s.features.has(c.j.Features.sduiContainerStyle)?ke.V.sduiSuperWrapper:ke.V.superWrapper),content:i.pipe(o.map((0,f.RN)(ke.V.loadingWrapperInvisible,ke.V.loadingWrapper)))},(0,Z.f8)(e.renderOptions.layoutDensity)),extra:r.createElement(ue.o,{isChecking:i}),body:r.createElement(r.Fragment,null,r.createElement(ue.__,{alert:e.activeAlert,options:e.renderOptions}),r.createElement(ue.Ot,{alert:e.activeAlert}),r.createElement(ue.ko,{card:e,isChecking:n}),r.createElement(ue.dk,{description:e.meta.explanation,actions:t,layoutDensity:e.renderOptions.layoutDensity}),r.createElement(_e,{activeAlert:e.activeAlert,selectedLabelIndex:a,actions:t})),mainActions:r.createElement(ue.Kg,{card:e,feedbackActions:t}),footer:r.createElement(r.Fragment,null,r.createElement(ue.lJ,{card:e}),r.createElement(Ae,{selectedLabelIndex:a,card:e,actions:t,isChecking:n})),navigation:r.createElement(Ee,{card:e,actions:t}),subActions:r.createElement(ve.Vh,{actions:t,card:e,mode:"mini"})});var s};var Me;!function(e){e.Full=({card:e,actions:t})=>{const{isChecking:n,isCheckingGlobal:l,transform:c}=s.X.useCardStates(e),d=e=>r.createElement(le.J,{card:e,actions:t,isChecking:n,transform:c,isCheckingGlobal:l});return r.createElement(a.F.Fragment,null,e.pipe(o.distinctUntilChanged(((e,t)=>e.hashCode()===t.hashCode())),o.map((0,i.ls)(s.X.match({super:e=>r.createElement(Te,{card:e,actions:t,isChecking:n,isCheckingGlobal:l}),takeaway:d,synfony:d,shortenIt:d,toneAI:d,ethicalAI:d,suggestedSnippet:d,knowledgeHubSuggestedTerm:d,default:d}),s.X.foldCard))))},e.Mini=({card:e,actions:i})=>r.createElement(a.F.Fragment,null,e.pipe(o.map((e=>c.j.Density.matchL((()=>r.createElement(t,{card:e,actions:i})),(()=>r.createElement(n,{card:e,actions:i})),(()=>r.createElement(n,{card:e,actions:i})))(e.renderOptions.layoutDensity)))));var t=e.MiniSingleLined=({card:e,actions:t})=>{function n(e){return r.createElement(ce.P.Standard,{card:e,actions:t})}return(0,i.zG)(e,s.X.match({super:n,takeaway:n,synfony:n,shortenIt:n,toneAI:n,ethicalAI:function(e){return r.createElement(fe.T.Mini,{card:e,actions:t})},suggestedSnippet:n,knowledgeHubSuggestedTerm:n,default:n}),s.X.foldCard)},n=e.MiniTwoLined=({card:e,actions:t})=>{function n(e){return r.createElement(ce.P.TwoLined,{card:e,actions:t})}return(0,i.zG)(e,s.X.match({super:n,takeaway:n,synfony:n,shortenIt:n,toneAI:n,ethicalAI:function(e){return r.createElement(fe.T.Mini,{card:e,actions:t,twoLined:!0})},suggestedSnippet:n,knowledgeHubSuggestedTerm:n,default:n}),s.X.foldCard)};e.Success=({cardData:e,actions:t,isLastCard:n})=>{function a(){return r.createElement(d.b.Success,{actions:t,isLastCard:n})}return(0,i.zG)(e,l.i.match({takeaway:a,default:a,synfony:a,super:a,shortenIt:a,toneAI:a,ethicalAI:a,suggestedSnippet:function(e){return r.createElement(ye.w.Success,{card:e,actions:t})},knowledgeHubSuggestedTerm:a}),s.X.foldCard)},e.FeedbackForm=({cardData:e,actions:t})=>{function n(e){return r.createElement(K,{card:e,actions:t})}return(0,i.zG)(e,l.i.match({takeaway:n,default:n,synfony:n,super:n,shortenIt:n,toneAI:n,ethicalAI:n,suggestedSnippet:n,knowledgeHubSuggestedTerm:n}),s.X.foldCard)},e.MutedAlert=({cardData:e,actions:t})=>{function n(e){return r.createElement(ge,{card:e,actions:t})}return(0,i.zG)(e,l.i.match({takeaway:n,default:n,synfony:n,super:n,shortenIt:n,toneAI:n,ethicalAI:n,suggestedSnippet:n,knowledgeHubSuggestedTerm:n}),s.X.foldCard)}}(Me||(Me={}))},92392:(e,t,n)=>{n.d(t,{w:()=>r});var r,i=n(84910),a=n(78520),o=n(92379),s=n(12518),l=n(58303),c=n(90023),d=n(13391),u=n(75068),p=n(27640),m=n(79813),h=n(91020),g=n(15602),f=n(77933),y=n(98227),v=n(73141),x=n(3611),I=n(28627),b=n(70394),S=n(4483),C=n(14323),w=n(86845),A=n(91045),E=n(14196);!function(e){e.Full=({card:e,actions:n,isChecking:r})=>{const i=o.useContext(p.m.Context),[a,u]=o.useState(""),[m,h]=o.useState(e.activeAlert.snippetText),[y,v]=o.useState(""),[I,w]=o.useState(""),E=(0,c.zG)(e.activeAlert.snippetsTrigger,l.g_((()=>"\\"),c.yR));return o.createElement(A.eb,{card:e,actions:n,isChecking:r,body:o.createElement("div",null,o.createElement(A.__,{alert:e.activeAlert,options:e.renderOptions}),o.createElement(f.XY,{className:P.subheader},i.card.suggestedSnippet.subheader),o.createElement("div",{className:P.inputContainer},o.createElement(g.B2,{name:"snippet-name",placeholder:i.card.suggestedSnippet.namePlaceholder,value:a,onChange:e=>u(e.target.value),className:P.snippetName}),y.length>0&&o.createElement(f.x4,{className:P.inputError},y)),o.createElement("div",{className:P.inputContainer},o.createElement(g.E_,{blockExtension:!0,name:"snippet-content",placeholder:i.card.suggestedSnippet.textPlaceholder,value:m,onChange:e=>h(e.target.value),className:P.snippetText}),I.length>0&&o.createElement(f.x4,{className:P.inputError},I)),o.createElement(f.x4,{className:P.explanation},i.card.suggestedSnippet.explanation(o.createElement(t,{trigger:E}))),o.createElement(A.Nm,{title:i.card.todoAction(e.activeAlert.todoAction),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:d.h.create(!1),onClick:x.hz((()=>{(0,c.zG)(S.B.validate(a,m,i.card.suggestedSnippet.validationMessages),s.g_((({nameError:e,contentError:t})=>{(0,c.zG)(e,l.g_((()=>v("")),v)),(0,c.zG)(t,l.g_((()=>w("")),w))}),(()=>{n.next({type:b.lY.Type.createSnippet,id:e.id,alertId:e.activeAlert.id,snippetName:a,snippetText:m}),v(""),w("")})))}))})),footer:o.createElement(C.G3,{key:"card-actions-details",visualState:e.visualState,className:P.more},o.createElement(f.XY,null,i.card.suggestedSnippet.details(o.createElement(o.Fragment,null,E))))})};const t=({trigger:e})=>o.createElement("span",{className:P.snippetsTrigger},e);e.Success=({card:e,actions:t})=>{const n=o.useContext(p.m.Context);return I.P.useEffectOnWillUnmount((()=>{t.next({type:b.lY.Type.suggestedSnippetSuccessDismissed,id:e.id,alertId:e.activeAlert.id})})),o.createElement(w.Z,{ariaLabel:`${e.activeAlert.highlightTexts[0]} - ${e.activeAlert.miniCardTitle}`,onFocus:()=>t.next({type:b.lY.Type.mutedAlertSuccessShow}),theme:(0,E.Gh)(e.renderOptions),visualState:e.visualState,body:o.createElement("div",{className:P.successHeader},o.createElement(h.JO.ValidationOk,{className:P.successIcon}),o.createElement(f.x4,null,n.card.suggestedSnippet.successStateTitle)),mainActions:o.createElement(o.Fragment,null),footer:o.createElement(o.Fragment,null),subActions:o.createElement("div",{className:P.successAction},o.createElement(m.zx.Tertiary,{name:"openSnippetsLibrary",onClick:()=>t.next({type:b.lY.Type.snippetsOpenExternalLink,externalLink:e.activeAlert.libLink,alertId:e.activeAlert.id,itemId:e.id})},n.card.suggestedSnippet.libraryLinkCaption,o.createElement(h.JO.OuterLink,null)),o.createElement(m.zx.Ghost,{name:"done",onClick:()=>x.hz((()=>t.next({type:b.lY.Type.switchToNext})))()},n.done))})}}(r||(r={}));const k={paddingTop:y.ux.rem(.75),paddingBottom:y.ux.rem(.5),letterSpacing:u.xv.SubheadingLetterSpacing,fontSize:y.ux.rem(u.xv.SubheadingSize),lineHeight:y.ux.rem(u.xv.SubheadingLineHeight),color:u.xv.SubheadingColor,textTransform:"uppercase"},_={fontFamily:"inherit",boxSizing:"border-box",padding:`${y.ux.rem(.5)}`,fontSize:y.ux.rem(.875)},T=(0,a._)((0,i._)({},_),{height:y.ux.rem(2.5)}),M=(0,a._)((0,i._)({},_),{height:y.ux.rem(8)}),G={marginBottom:y.ux.rem(.5)},L={color:u.Il.CoreRed50},D={display:"block",color:u.Il.CoreNeutral50,marginBottom:y.ux.rem(.75)},N={position:"absolute",left:y.ux.rem(.5),width:y.ux.rem(1),height:y.ux.rem(1),minWidth:y.ux.rem(1),minHeight:y.ux.rem(1)},z={display:"inline-block",width:y.ux.rem(1),height:y.ux.rem(1),backgroundColor:u.Il.CoreBlue1,borderRadius:y.ux.rem(v.fx),textAlign:"center"},P=y.ux.stylesheet({subheader:[k],snippetName:[T],snippetText:[M],explanation:[D],successIcon:[N],successHeader:[{display:"flex",alignItems:"center"}],successAction:[{display:"flex",justifyContent:"space-between",width:"100%"}],inputContainer:[G],inputError:[L],more:[A.IH],snippetsTrigger:[z]})},7496:(e,t,n)=>{n.d(t,{V:()=>w});var r=n(51378),i=n(79239),a=n(75068),o=n(98227),s=n(73141),l=n(42877),c=n(84910);const d=(e,t,n,r,i,s)=>(0,c._)({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:o.ux.rem(2),borderRadius:i,backgroundColor:a.Il.CoreNeutral0,boxShadow:r,content:"' '"},Boolean(s)&&"bottom"!==s?{top:n}:{bottom:n}),u=`0 ${o.ux.rem(.25)} ${o.ux.rem(1.625)} 0 rgba(198, 203, 222, .25)`,p={marginRight:o.ux.rem(1),flexShrink:0,maxWidth:o.ux.percent(100)},m={padding:`0 ${o.ux.rem(1)}`},h={padding:`0 ${o.ux.rem(1.9)} 0 ${o.ux.rem(1)}`},g={position:"absolute",top:o.ux.rem(.27),right:o.ux.rem(.5)},f={display:"grid",width:o.ux.percent(100),gridTemplateColumns:"fit-content(60%) auto min-content",columnGap:o.ux.rem(.5),alignItems:"center"},y={minWidth:o.ux.rem(7)},v={marginLeft:o.ux.rem(.5)},x={color:a.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:o.ux.rem(1.5)},I={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic",paddingRight:o.ux.rem(r.F2)},b={$nest:{"&:before":d(o.ux.rem(.5),-10,o.ux.rem(-.5),u,o.ux.rem(s.Jr)),"&:after":d(o.ux.rem(1),-20,o.ux.rem(-1),u,o.ux.rem(s.Jr))}},S={boxShadow:l.s.llamaShadowToken,borderRadius:o.ux.rem(i.Jr)},C={transition:"opacity .2s"},w=o.ux.prefixedStylesheet("super",{updateAllBtnCommon:[p],updateAllBtn:[p,m],updateAllBtnLoading:[p,h],updateBtnSpinner:[g],optionsContainer:[f],optionLabel:[y],optionRadio:[v],optionSecondaryAttribute:[x],optionExample:[x,I],superWrapper:[b],sduiSuperWrapper:[S],loadingWrapper:[C],loadingWrapperInvisible:[C,{opacity:0,pointerEvents:"none"}]})},81100:(e,t,n)=>{n.d(t,{Y:()=>ve});var r=n(84910),i=n(78520),a=n(92379),o=n(58303),s=n(90023),l=n(48906),c=n(24909),d=n(59179),u=n(84714),p=n(75068),m=n(27640),h=n(23006),g=n(24045),f=n(77933),y=n(98227),v=n(28627),x=n(3611),I=n(2190),b=n(21961),S=n(17560),C=n(70394),w=n(88367),A=n(74775),E=n(91045),k=n(92792),_=n(99747),T=n(74822),M=n(64271),G=n(29479),L=n(954),D=n(10883),N=n(90572),z=n(23841),P=n(24666),F=n(63532),O=n(8867),R=n(84308);const $=({toneAlternatives:e,onSelectToneAlternative:t})=>{const n=new T.x,p=new T.x,m=new T.x,h=new T.x,f=new T.x,x=new T.x,{ref:I,onMount:b}=v.P.useElWatcher(),S=M.T(f.pipe(G.h(!0)),m.pipe(G.h(!1)),h.pipe(G.h(!1))).pipe(L.O(!1)),C=M.T(f,p).pipe(D.M(S),N.h((([e,t])=>t)),d.U((([e,t])=>e)),D.M(I),d.U((([e,t])=>(0,s.zG)(t,o.UI((e=>e.getBoundingClientRect())),o.YO("sliderClientRect"),o.Qt("containerMouseEventVal",o.G(e))))),z.oA,d.U((({containerMouseEventVal:e,sliderClientRect:t})=>{const n=t.x,r=t.x+t.width;let i=0;return i=e.clientX<=n?0:e.clientX>=r?100:(e.clientX-n)/(r-n)*100,i}))),w=M.T(C.pipe(P.x()),S.pipe(P.x(),N.h((e=>!e)),D.M(C),d.U((([e,t])=>t)),d.U((e=>e>=50?100:0))),n.pipe(N.h((e=>"ArrowRight"===e.key||"ArrowLeft"===e.key)),F.b((e=>{e.preventDefault(),e.stopPropagation()})),d.U((e=>e.key)),N.h((e=>"ArrowRight"===e||"ArrowLeft"===e)),d.U((e=>"ArrowRight"===e?100:0))),x.pipe(d.U((e=>1===e?100:0)))).pipe(L.O(100)),A=w.pipe(P.x(),d.U((e=>e>=50?1:0))),E=e instanceof O.y?e:u.of(e),k=R.a([A,E]).pipe(d.U((([e,t])=>t[e])));return v.P.useSubscriptionTo(A.pipe(P.x(),F.b(t))),a.createElement(c.F.div,{className:ye.outerContainer,onKeyDown:e=>n.next(e)},a.createElement(c.F.div,{className:ye.label},k.pipe(d.U((e=>e.name)))),a.createElement(c.F.div,{className:ye.container,onMouseMove:e=>p.next(e),onMouseUp:e=>m.next(e),onMouseLeave:e=>h.next(e)},a.createElement(c.F.div,(0,i._)((0,r._)({},(0,l.Sh)(ye.slider,S.pipe(d.U((e=>e?ye.sliderDragging:null))))),{mount:b}),a.createElement(c.F.div,(0,i._)((0,r._)({},(0,l.Sh)(ye.sliderInner,S.pipe(d.U((e=>e?ye.sliderInnerDragging:null))))),{style:{width:w.pipe(d.U(y.ux.percent))}}),a.createElement(c.F.div,(0,i._)((0,r._)({},(0,l.Sh)(ye.knob,S.pipe(d.U((e=>e?ye.knobDragging:null))))),{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),f.next(e)},tabIndex:0}),k.pipe(d.U((e=>a.createElement(g.In,{id:e.emojiID,className:ye.knobEmoji})))))),R.a([A,S]).pipe(d.U((([e,t])=>a.createElement(a.Fragment,null,a.createElement("div",(0,l.Sh)(ye.sliderDivisionPoint,ye.sliderDivisionPointLeft)),0===e||t?null:a.createElement(c.F.div,(0,i._)((0,r._)({},(0,l.Sh)(ye.sliderDivisionPointHoverArea,ye.sliderDivisionPointHoverAreaLeft)),{onClick:()=>x.next(0)})),a.createElement("div",(0,l.Sh)(ye.sliderDivisionPoint,ye.sliderDivisionPointRight)),1===e||t?null:a.createElement(c.F.div,(0,i._)((0,r._)({},(0,l.Sh)(ye.sliderDivisionPointHoverArea,ye.sliderDivisionPointHoverAreaRight)),{onClick:()=>x.next(1)})))))))))},B="toneSliderOuterContainer",U="toneSliderLabel",j="toneSliderContainer",W="toneSlider",H="toneSliderDragging",Y="toneSliderSliderDivisionPoint",V="toneSliderDivisionPointLeft",Q="toneSliderDivisionPointRight",q="toneSliderDivisionPointHoverArea",J="toneSliderDivisionPointHoverAreaLeft",X="toneSliderDivisionPointHoverAreaRight",Z="toneSliderInner",K="toneSliderInnerDragging",ee="toneSliderKnob",te="toneSliderKnobDragging",ne="toneSliderKnobEmoji",re={fontWeight:700,fontSize:y.ux.rem(.875),lineHeight:y.ux.rem(1),width:y.ux.rem(7.5)},ie={width:y.ux.rem(5.375),height:y.ux.rem(1.75),display:"flex",flexDirection:"column",justifyContent:"center"},ae={position:"relative",width:y.ux.percent(100),backgroundColor:p.Il.CoreNeutral40,height:y.ux.rem(.125),borderRadius:y.ux.rem(.375),transition:"all 0.15s ease-in-out",$nest:{"&:hover":{height:y.ux.rem(.5)},[`&:hover .${Y}`]:{visibility:"visible"}}},oe={height:y.ux.rem(.5),$nest:{[`& .${Y}`]:{visibility:"visible"}}},se={position:"absolute",width:y.ux.rem(.25),height:y.ux.rem(.25),backgroundColor:p.Il.CoreNeutral0,top:y.ux.rem(.125),bottom:y.ux.rem(.125),borderRadius:y.ux.percent(100),visibility:"hidden"},le={left:y.ux.rem(.125)},ce={right:y.ux.rem(.125)},de={background:p.Il.CoreNeutral90,opacity:0,width:y.ux.rem(1.5),height:y.ux.rem(1.5),position:"absolute",borderRadius:y.ux.percent(100),cursor:"pointer",top:y.ux.rem(-.5),zIndex:1,transition:"all 0.15s ease-in-out",$nest:{"&:hover":{opacity:.1}}},ue={left:y.ux.rem(-.5)},pe={right:y.ux.rem(-.5)},me={position:"relative",display:"flex",alignItems:"center",backgroundColor:p.Il.CorePurple40,height:y.ux.percent(100),borderRadius:y.ux.rem(.375),transition:"all 0.15s ease-in-out"},he={position:"absolute",right:y.ux.rem(-.875),display:"flex",justifyContent:"center",alignItems:"center",width:y.ux.rem(1.75),height:y.ux.rem(1.75),backgroundColor:p.Il.CoreNeutral0,boxShadow:"0px 0px 1px rgba(109, 117, 141, 0.8), 0px 1px 8px rgba(109, 117, 141, 0.28)",borderRadius:y.ux.rem(1.875),cursor:"ew-resize",transition:"all 0.15s ease-in-out",zIndex:1,$nest:{"&:hover":{width:y.ux.rem(2),height:y.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"}}},ge={width:y.ux.rem(2),height:y.ux.rem(2),boxShadow:"0px 0px 1.14286px rgba(109, 117, 141, 0.8), 0px 4px 12px rgba(109, 117, 141, 0.3)"},fe={width:y.ux.rem(.9375),height:y.ux.rem(.9375),pointerEvents:"none"},ye={outerContainer:y.ux.joinClasses([B,y.ux.style({display:"flex",alignItems:"center"})]),label:y.ux.joinClasses([U,y.ux.style(re)]),container:y.ux.joinClasses([j,y.ux.style(ie)]),slider:y.ux.joinClasses([W,y.ux.style(ae)]),sliderDragging:y.ux.joinClasses([H,y.ux.style(oe)]),sliderDivisionPoint:y.ux.joinClasses([Y,y.ux.style(se)]),sliderDivisionPointLeft:y.ux.joinClasses([V,y.ux.style(le)]),sliderDivisionPointRight:y.ux.joinClasses([Q,y.ux.style(ce)]),sliderDivisionPointHoverArea:y.ux.joinClasses([q,y.ux.style(de)]),sliderDivisionPointHoverAreaLeft:y.ux.joinClasses([J,y.ux.style(ue)]),sliderDivisionPointHoverAreaRight:y.ux.joinClasses([X,y.ux.style(pe)]),sliderInner:y.ux.joinClasses([Z,y.ux.style(me)]),sliderInnerDragging:y.ux.joinClasses([K,y.ux.style({transition:"none"})]),knob:y.ux.joinClasses([ee,y.ux.style(he)]),knobDragging:y.ux.joinClasses([te,y.ux.style(ge)]),knobEmoji:y.ux.joinClasses([ne,y.ux.style(fe)])};var ve;!function(e){e.BundleMini=({card:e,actions:t})=>a.createElement(A.b.Mini,(0,i._)((0,r._)({},(0,l.Sh)(k.l$.wrapper,k.l$.bundleContainer)),{actions:t,cardId:e.id,getActiveAlert:()=>e.alerts[0],counter:a.createElement(f.CL,{className:k.l$.alertsCounter},e.alerts.length),inert:e.positionState.inert,hideDot:!0}),a.createElement(c.F.div,{className:Ie.content},a.createElement(g.In,{id:e.activeAlert.toneAlternatives[e.activeAlert.selectedToneAlternativeIdx].emojiID,className:Ie.emoji}),a.createElement("div",{className:k.l$.highlightedText},S.R.bundleTitle(e)))),e.Full=({card:e,actions:t,isChecking:n,isCheckingGlobal:r})=>{const i=a.useContext(m.m.Context),l=v.P.useAtomOf(e.activeAlert.toneAlternatives),p=a.useCallback((n=>{"focused"!==e.visualState.transition.type&&"expanded"!==e.visualState.transition.type||t.next({type:C.lY.Type.toneAIChangeToneAlternative,alertId:e.activeAlert.id,itemId:e.id,selectedToneAlternativeIdx:n})}),[t,e.visualState.transition.type,e.activeAlert.id,e.id]);return(0,s.zG)(e.transform,o.hX(I.b$.isToneAI),o.g_((()=>null),(o=>a.createElement(E.VM,{card:e,actions:t,isChecking:n,isCheckingGlobal:r,cardBody:n=>a.createElement(a.Fragment,null,a.createElement(E.__,{alert:e.activeAlert,options:e.renderOptions}),a.createElement(c.F.Fragment,null,l.pipe(d.U((e=>a.createElement($,{toneAlternatives:e,onSelectToneAlternative:p}))))),0===e.activeAlert.selectedToneAlternativeIdx?a.createElement("div",{className:Ce.replacementContainer},e.activeAlert.highlightTexts[0]):a.createElement(h.T9,{classes:{rendered:Ce.replacement,removing:Ce.replacementHidden},timeout:250,content:u.of(a.createElement(_.RF,{label:o.labels[e.activeAlert.selectedToneAlternativeIdx-1],className:Ce.replacementContainer,a11yContrast:e.renderOptions.features.has(w.j.Features.a11yContrast)}))}),0!==e.activeAlert.selectedToneAlternativeIdx?a.createElement(E.Nm,{title:i.card.todoAction(o.tooltipText),applyMessage:e.activeAlert.todoAction,checkingMessage:e.activeAlert.todoAction,checkingInProgress:n,onClick:x.hz((()=>t.next({type:C.lY.Type.alertApply,alertId:e.activeAlert.id,id:e.id,alternativeIndex:e.activeAlert.selectedToneAlternativeIdx-1,cardType:C.lY.getCardType(e),eligibleForSurvey:b.X.isEligibleForAcceptSurvey(e),eligibleForGbPrompt:b.X.isEligibleForGbPrompt(e)})))}):null),mainActions:(0,s.a9)(a.createElement(E.Kg,{card:e,feedbackActions:t})),subActions:(0,s.a9)(a.createElement(E.q4,{card:e,actions:t})),cardFooter:(0,s.a9)(a.createElement(E.lJ,{card:e}))}))))}}(ve||(ve={}));const xe={width:y.ux.rem(1),height:y.ux.rem(1),marginRight:y.ux.rem(.5)},Ie=y.ux.stylesheet({content:[{display:"flex",alignItems:"center"}],emoji:[xe]}),be={transition:`opacity ${y.ux.seconds(E.k_)}`},Se={width:y.ux.percent(100),background:p.Il.CoreNeutral10,borderRadius:y.ux.px(4),fontSize:y.ux.rem(.875),lineHeight:y.ux.rem(1.5),fontFeatureSettings:"'ss03' on",padding:y.ux.px(8),marginTop:y.ux.px(12),boxSizing:"border-box"},Ce=y.ux.stylesheet({replacement:[be],replacementHidden:[be,{opacity:0}],replacementContainer:[Se]})},94635:(e,t,n)=>{n.d(t,{d:()=>y});var r=n(32490),i=n(84910),a=n(78520),o=n(92379),s=n(58303),l=n(2123),c=n(24909),d=n(13391),u=n(72111),p=n(47311),m=n(50887),h=n(64570),g=n(94032),f=n(34837);class y extends o.Component{componentDidMount(){!0===this.props.isMaster&&this._setMaster()}componentDidUpdate(e){const t=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:t}),!0===this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",t),this.forceUpdate((()=>{this._setMaster(),this._log.trace("view force update complete",t)}))):(this._log.trace("set master view",t),this._setMaster()):(this._log.trace("release master view",t),this._clearSubs())}componentWillUnmount(){this._clearSubs()}render(){const{className:e,children:t,height:n}=this.props;return o.createElement(c.F.div,{"data-purpose":"card-list-connector",style:n.pipe(p.map((e=>({height:e})))),className:e},t)}_setMaster(){this._setSubs()}_setSubs(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())}_clearSubs(){this._subs.dispose()}constructor(...e){super(...e),(0,r._)(this,"_log",u.C8.Logging.getLogger("CardsListConnectorView",u.zW.i.DEBUG)),(0,r._)(this,"_subs",new m.w.Keeper)}}!function(e){let t;!function(e){e.create=()=>d.h.create({scrollProvider:s.YP,scrollConsumer:s.YP,viewport:s.YP,title:s.YP})}(t=e.Elements||(e.Elements={}));e.boundedScrollListener=(e,t)=>p.mergeStatic(p.defer((()=>p.of(e.paddingTop.set(0)))),t.view("viewport").pipe(p.switchMap(s.g_((()=>p.EMPTY),(e=>h.YC(e).pipe(p.map((t=>(0,a._)((0,i._)({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),p.tap((t=>e.viewport.set({top:f.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(p.switchMap(s.g_((()=>p.EMPTY),(t=>p.fromEvent(t,"scroll").pipe(p.map((()=>t.scrollTop)),p.startWith(t.scrollTop),p.tap((t=>e.scrollTop.set(t))),p.mapTo(g.PU)))))),t.view("title").pipe(p.switchMap(s.g_((()=>p.of(l.UL.empty)),(e=>h.YC(e)))),p.map((e=>e.height)),p.shareReplay({bufferSize:1,refCount:!0}),p.tap((t=>e.paddingTop.set(t)))),t.view("scrollConsumer").pipe(p.switchMap(s.g_((()=>p.EMPTY),(t=>e.scrollOffset.pipe(p.tap((e=>{t.scrollTop+=e})))))))).pipe(p.mapTo(void 0)),e.superScrollListener=(e,t)=>{const n=t.view("title").pipe(p.switchMap(s.g_((()=>p.of(l.UL.empty)),(e=>h.YC(e)))),p.map((e=>e.height)),p.shareReplay({bufferSize:1,refCount:!0}));return p.mergeStatic(p.defer((()=>p.of(e.paddingTop.set(0)))),t.view("viewport").pipe(p.switchMap(s.g_((()=>p.EMPTY),(e=>h.YC(e).pipe(p.map((t=>(0,a._)((0,i._)({},t),{top:e.offsetTop,height:e.offsetHeight}))))))),p.tap((t=>e.viewport.set({top:f.r.FromWindowTop.ISO.wrap(t.top),height:t.height})))),t.view("scrollProvider").pipe(p.switchMap(s.g_((()=>p.EMPTY),(t=>p.fromEvent(t,"scroll").pipe(p.map((()=>t.scrollTop)),p.startWith(t.scrollTop),p.tap((t=>e.scrollTop.set(t))),p.mapTo(g.PU)))))),t.view("scrollConsumer").pipe(p.switchMap(s.g_((()=>p.EMPTY),(t=>e.scrollOffset.pipe(p.scan(((e,t)=>e-t),0),p.tap((e=>{t.style.transform=`translateY(${e}px)`})))))),p.combineLatest(n),p.tap((([t,n])=>e.paddingTop.set(t+n))))).pipe(p.mapTo(void 0))}}(y||(y={}))},82174:(e,t,n)=>{n.d(t,{E2:()=>ve,TG:()=>xe});var r,i,a=n(32490),o=n(84910),s=n(78520),l=n(42927),c=n(92379),d=n(90023),u=n(94173),p=n(2123),m=n(64297),h=n(24909),g=n(48906),f=n(13391),y=n(58303),v=n(84358),x=n(23345),I=n(55263),b=n(47311),S=n(94032),C=n(23841),w=n(36344),A=n(72111),E=n(84714);!function(e){e.mock=()=>({isStepEnabled:d.jv,subscribeForStep:()=>{throw new Error("Not implemented")},getStepCompletionCallback:(0,d.a9)(d.Q1),changeState:d.Q1,relaunchAllSteps:d.Q1,getFirstTargetRect:()=>E.of(y.YP),isLastStep:d.jv,completionTrigger:f.h.create(!1)})}(r||(r={})),function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Popover="popover",e.Passed="passed"}(i||(i={}));class k{isStepEnabled(e){return void 0!==this._steps[e]}relaunchAllSteps(){A.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")}setState(e,t){this.subscribeForStep(e).state.set(t)}subscribeForStep(e){const t=f.h.create(i.Hidden);return Boolean(this._steps[e])?this._steps[e]:this._steps[e]={id:e,state:t,dotShown:d.Q1,dotClicked:()=>t.set(i.Popup),popupClosed:()=>t.set(i.Passed),popupIgnored:()=>t.set(i.Hidden),actionTaken:()=>t.set(i.Passed)}}getStepCompletionCallback(e){throw new Error("Method not implemented.")}changeState(e){}constructor(){(0,a._)(this,"completionTrigger",f.h.create(!1)),(0,a._)(this,"_steps",{}),(0,a._)(this,"getFirstTargetRect",(()=>w.E))}}var _=n(51378),T=n(12896),M=n(75068),G=n(98227),L=n(49253),D=n(73141);const N=M.Il.BackgroundTooltip,z=M.Il.CoreNeutral90,P=M.Il.CoreNeutral40,F=G.ux.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:`0 0 0 ${G.ux.rem(1)} rgba(95, 139, 250, 0)`},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),O={width:G.ux.rem(1),height:G.ux.rem(1),borderRadius:G.ux.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:`${F} 2s infinite`,$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},R=G.ux.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),$={width:G.ux.rem(1),height:G.ux.rem(1),borderRadius:G.ux.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:G.ux.rem(1),height:G.ux.rem(1),borderRadius:G.ux.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:`${R} 2s infinite`,willChange:"transform"},"&:hover:before":{animation:"none"}}},B={margin:`${G.ux.rem(-1.5)} 0 0 ${G.ux.rem(-1.5)}`,padding:G.ux.rem(1),borderRadius:G.ux.percent(50),cursor:"pointer",pointerEvents:"all"},U={margin:`0 0 ${G.ux.rem(.5)}`,color:M.Il.CoreNeutral0,fontWeight:"bold"},j={color:M.Il.CoreNeutral0,lineHeight:G.ux.rem(1.25)},W={display:"flex",padding:`${G.ux.rem(1)} ${G.ux.rem(1.5)} ${G.ux.rem(1.25)} ${G.ux.rem(2)}`,width:G.ux.rem(20),borderRadius:G.ux.rem(D.fx),background:N,color:M.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},H={display:"inline-block",marginRight:G.ux.rem(_.x)},Y={marginRight:G.ux.rem(2),width:G.ux.rem(2),flexShrink:0,alignSelf:"center"},V={position:"absolute",top:0,right:0},Q={stroke:L.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:M.Il.CoreNeutral0,fill:M.Il.CoreNeutral0}}},q={position:"absolute",top:G.ux.percent(50),left:G.ux.percent(50),zIndex:D.I3},J={position:"relative",zIndex:D.VN},X={zIndex:D.w$},Z={position:"absolute",zIndex:D.w$},K=G.ux.prefixedStylesheet("onboarding",{pulse:[O],pulseWrapper:[B],header:[U],description:[j],stepWrapper:[W],content:[H],alertIcon:[Y],closeIconWrapper:[V],closeIcon:[Q],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[q],containerDiv:[{}],editor:[J],onboardingPopup:[X],notificationContainer:[Z],pulseOptimized:[$]}),ee={display:"flex",flexDirection:"column",width:G.ux.percent(100)},te=(0,s._)((0,o._)({},V),{top:G.ux.rem(.5),right:G.ux.rem(.5)}),ne=(0,s._)((0,o._)({},Q),{$nest:(0,s._)((0,o._)({},Q.$nest),{svg:{height:G.ux.rem(1),width:G.ux.rem(1)}})}),re=(0,s._)((0,o._)({},W),{background:z,color:M.Il.CoreNeutral0,borderRadius:G.ux.rem(T.ze),padding:G.ux.rem(1)}),ie={width:G.ux.percent(100),backgroundColor:"#2DC9B6",color:z,fontWeight:"bold",borderRadius:G.ux.rem(T.xB),marginTop:G.ux.rem(1),padding:G.ux.rem(.5)},ae=(0,s._)((0,o._)({},j),{color:P}),oe=G.ux.prefixedStylesheet("a11y-onboarding",{contentWrapper:[ee],closeIconWrapper:[te],closeIcon:[ne],stepWrapper:[re],completeButton:[ie],description:[ae]});var se=n(79813),le=n(91020),ce=n(57520),de=n(77933),ue=n(35917);const pe=e=>c.createElement(se.zx,{className:oe.completeButton,onClick:e.onClick},e.text),me=({alignment:e,rect:t,onClose:n,className:r,children:i,icon:a,pinTargetRect:l,hideCloseButton:u,onMount:p})=>c.createElement(ce.t.ByRelativeRect,(0,s._)((0,o._)({rect:t,className:K.notificationContainer},ce.t.Alignment.toSelector(e)),{pinTargetRect:l,withPin:!0}),c.createElement(h.F.div,(0,s._)((0,o._)({},(0,g.Sh)(K.stepWrapper,r)),{mount:p}),(0,d.zG)(a,y.g_((()=>c.createElement(le.JO.Grammarly,{className:K.alertIcon})),(e=>c.createElement(e,{className:K.alertIcon})))),i,!(null!=u&&u)&&c.createElement(se.zx,{name:"onboard-close",className:K.closeIconWrapper,onClick:()=>n&&n()},c.createElement(le.JO.Close,{className:K.closeIcon,width:12})))),he=({alignment:e,rect:t,onClose:n,className:r,children:i,pinTargetRect:a,hideCloseButton:l,onMount:d})=>c.createElement(ce.t.ByRelativeRect,(0,s._)((0,o._)({rect:t,className:K.notificationContainer},ce.t.Alignment.toSelector(e)),{pinTargetRect:a,withPin:!0}),c.createElement(h.F.div,(0,s._)((0,o._)({},(0,g.Sh)(oe.stepWrapper,r)),{mount:d}),i,!(null!=l&&l)&&c.createElement(se.zx,{name:"onboard-close",className:oe.closeIconWrapper,onClick:()=>{var e;return null===(e=n)||void 0===e?void 0:e()}},c.createElement(le.JO.Close,{className:oe.closeIcon,width:12,color:M.Il.CoreNeutral40})))),ge=e=>{var{title:t,description:n}=e,r=(0,l._)(e,["title","description"]);return c.createElement(me,r,c.createElement("span",{className:K.content},Boolean(t)?c.createElement(de.P1,{className:K.header},t):null,c.createElement(de.XY,{className:K.description},n)))},fe=e=>{var{title:t,description:n,isLastStep:r,onComplete:i}=e,a=(0,l._)(e,["title","description","isLastStep","onComplete"]);return c.createElement(he,a,c.createElement("div",{className:oe.contentWrapper},c.createElement("div",{className:K.content},Boolean(t)?c.createElement(ue.Z.Base,{className:K.header},t):null,c.createElement(ue.Z.Base,{className:oe.description},n)),c.createElement(pe,{text:r?"Done":"Next",onClick:i})))},ye=({className:e,onClick:t,customStyle:n})=>c.createElement(h.F.div,(0,s._)((0,o._)({},(0,g.Sh)(K.pulseWrapper,e)),{style:n,onClick:()=>t&&t()}),c.createElement("div",{className:K.pulseOptimized}));var ve;function xe(e){const t=c.useContext(xe.Context),{stepId:n,onboardingViewModel:r}=e,i=(0,l._)(e,["stepId","onboardingViewModel"]),a=r||t,u=Ie(n,a),p=c.useContext(I.l.Context).pipe(b.map((e=>e.rect)));return(0,d.zG)(u,y.g_((()=>c.Children.only(e.children)),(e=>{var t,r;return c.createElement(be,(0,s._)((0,o._)({},i),{onboardingStep:e,viewportRect:p,isLastStep:null===(t=(r=a).isLastStep)||void 0===t?void 0:t.call(r,n)}))})))}!function(e){e.leftTop="leftTop",e.leftCenter="leftCenter",e.leftBottom="leftBottom",e.center="center",e.rightTop="rightTop",e.rightCenter="rightCenter",e.rightBottom="rightBottom"}(ve||(ve={}));const Ie=(e,t)=>((0,m.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?y.G(t.subscribeForStep(e)):y.YP);class be extends c.Component{componentWillUnmount(){const e=this.props.onboardingStep;"popup"!==e.state.get()&&"popover"!==e.state.get()||e.popupIgnored(),this._subs.forEach((e=>e.unsubscribe()))}componentDidMount(){const e=this.props.dotPosition;var t;e?this._subs.push(b.mergeStatic(this.context,this.props.onboardingStep.state.pipe(b.filter((e=>"dot"===e||"popup"===e||"popover"===e)))).pipe(b.delay(500),b.withLatestFrom(this._wrapperElement,this._containerElement),b.switchMap((([t,n,r])=>(0,d.zG)((0,d.bc)(n,r),(0,d.og)(v.vB(((t,n)=>{switch(e.kind){case"findFirstButton":return S.Dx(e.buttonOrder).pipe(b.switchMap((r=>b.of(void 0).pipe(b.delay(500),b.map((()=>{const[i,a]=we(t,n,e.position,r,e.selector);return this._exactTargetRect.set(a),i})),C.oA))));case"dotAtPosition":return b.of(Se(e.position));default:return(0,m.vE)(e)}}))),y.g_((()=>b.EMPTY),u.y))))).subscribe((e=>{this._spotStyle.set(e),this._visibilityState.set(!0)})),b.combineLatestStatic([null!==(t=this.props.dismissalTrigger)&&void 0!==t?t:b.EMPTY,this.props.onboardingStep.state]).pipe(b.filter((([e,t])=>e&&("dot"===t||"popup"===t||"popover"===t))),b.take(1)).subscribe((()=>{this.props.onboardingStep.actionTaken()}))):this._visibilityState.set(!0)}render(){const e=this.props.onboardingStep;return c.createElement(h.F.div,(0,s._)((0,o._)({key:"onboarding-wrapper"},(0,g.Sh)(K.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName)),{mount:e=>this._wrapperElement.set(y.ij(e))}),c.createElement("div",(0,s._)((0,o._)({key:"container",ref:e=>this._containerElement.set(y.ij(e))},(0,g.Sh)(K.containerDiv,this.props.themes&&this.props.themes.containerClassName)),{onClickCapture:this._onEventActionTaken(e,"onclick"===this.props.eventType),onMouseEnter:t=>"onhover"===this.props.eventType&&this._onEventActionTaken(e,!1)(t)}),this.props.children),f.h.combine(e.state,this._visibilityState,((t,n)=>{if(!n)return null;switch(t){case i.Dot:const t=this.props.themes&&this.props.themes.spotClassName;return this.props.onboardingStep.dotShown(),c.createElement(ye,(0,s._)((0,o._)({customStyle:this._spotStyle,key:"spot"},(0,g.Sh)(K.onboardingSpot,t)),{onClick:()=>e.dotClicked()}));case i.Popup:return c.createElement(ge,{key:"step",title:this.props.title,alignment:this.props.alignment,rect:this._containerElement.view(y.g_((()=>p.UL.empty),p.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,icon:y.ij(this.props.icon),onClose:()=>e.popupClosed(),pinTargetRect:this._exactTargetRect.view(v.Fc)});case i.Popover:return c.createElement(fe,{key:"step",title:this.props.title,isLastStep:Boolean(this.props.isLastStep),alignment:this.props.alignment,rect:this._containerElement.view(y.g_((()=>p.UL.empty),p.UL.fromEl)),className:this.props.themes&&this.props.themes.notificationClassName,description:this.props.message,onClose:()=>e.popupClosed(),onComplete:()=>e.actionTaken(),pinTargetRect:this._exactTargetRect.view(v.Fc)});default:return null}})))}constructor(...e){super(...e),(0,a._)(this,"context",void 0),(0,a._)(this,"_subs",[]),(0,a._)(this,"_wrapperElement",f.h.create(y.YP)),(0,a._)(this,"_containerElement",f.h.create(y.YP)),(0,a._)(this,"_exactTargetRect",f.h.create(y.YP)),(0,a._)(this,"_visibilityState",f.h.create(!1)),(0,a._)(this,"_spotStyle",f.h.create({})),(0,a._)(this,"_onEventActionTaken",((e,t=!0)=>n=>{const r=e.state.get();if("popup"===r||"popover"===r||t&&"dot"===r){var i;const r=n.target;if((0,p.pK)(r))return;const a=t||(0,p.q_)(r,K.containerDiv);if("findFirstButton"===(null===(i=this.props.dotPosition)||void 0===i?void 0:i.kind)&&!(0,p.q2)(r,"role","button"))return;a&&e.actionTaken()}else"dot"===r&&(n.preventDefault(),n.stopPropagation())}))}}(0,a._)(be,"contextType",x.u.Context),(0,a._)(be,"defaultProps",{alignment:"left"});const Se=e=>{switch(e){case ve.leftTop:return{top:0,left:0};case ve.leftCenter:return{top:"50%",left:0};case ve.leftBottom:return{top:"100%",left:0};case ve.rightTop:return{top:0,left:"100%"};case ve.rightCenter:return{top:"50%",left:"100%"};case ve.rightBottom:return{top:"100%",left:"100%"};case ve.center:return{top:"50%",left:"50%"};default:return(0,m.vE)(e)}},Ce=(e,t,n)=>{switch(n){case ve.rightTop:return{top:e.top-t.top,left:e.left-t.left+e.width};case ve.center:return{top:e.top-t.top+e.height/2,left:e.left-t.left+e.width/2};default:return(0,m.vE)(n)}},we=(e,t,n,r,i)=>{const a=t.querySelectorAll(null!=i?i:'[role="button"], [role="insertion"], [role="deletion"], button'),o=a.length>0&&(void 0===r?a[a.length-1]:a[r]);if(Boolean(o)){const t=p.UL.fromEl((0,d.MZ)(o)),r=p.UL.fromEl(e);return[y.G(Ce(t,r,n)),y.G(t)]}return Boolean(i)?[y.YP,y.YP]:[y.G({top:"50%",left:"50%"}),y.YP]};!function(e){var t=e.Context=c.createContext(null);e.ContextMock=({children:e})=>c.createElement(t.Provider,{value:new k,children:e})}(xe||(xe={}))},69781:(e,t,n)=>{n.d(t,{kH:()=>p,uz:()=>g,QT:()=>u,yi:()=>d});var r=n(2245),i=n(90023),a=n(26308),o=n(84358),s=n(12518),l=n(97225);var c=n(58303);function d(e){return(t,n)=>a.vh.fromMutation((r=>(t.forEach(((t,i)=>{if(n.has(i)){const a=n.get(i);e.equals(t,a)||r.set(i,(0,l.Hk)(t,a))}else r.set(i,(0,l.t$)(t))})),n.forEach(((n,i)=>{if(t.has(i)){const a=t.get(i);e.equals(a,n)||r.set(i,(0,l.Hk)(a,n))}else r.set(i,(0,l.F2)(n))})),r)))}const u=h(i.yR);h((function(e){return(0,l.WP)(e)?(0,l.Hk)(e.right,e.left):(0,s.LF)(e)}));var p,m;function h(e){return(t,n,r)=>{const o=new Map(n),d=new Map;return(0,a.k4)().unwrap(r).forEach(((n,r)=>{(0,i.zG)(n,e,t((0,c.ij)(o.get(r))),(0,l.Pd)((e=>d.set(r,e)),(0,c.g_)((()=>{o.delete(r)}),(e=>o.set(r,e)))))})),d.size>0?(0,s.t$)({recovered:o,rejected:d}):(0,s.F2)(o)}}function g(e){return(t,n)=>{const a=[],s=new Map(t);return n.forEach(((t,n)=>{(0,i.zG)(r.FP(e)(n,s),(0,o.ew)((()=>a.push(n))))})),a}}(m=p||(p={})).createStrict=function(e){return t=>(0,l.g_)((n=>(0,c.Wi)(t)?(0,l.t$)(`can not remove non existent entry: left(${e.show(n)})`):e.equals(t.value,n)?(0,l.F2)(c.YP):(0,l.t$)(`can not remove non equal entry: target(${e.show(t.value)}) left(${e.show(n)})`)),(n=>(0,c.pC)(t)?(0,l.t$)(`can not add existent entry: target(${e.show(t.value)}) right(${e.show(n)})`):(0,l.F2)((0,c.G)(n))),((n,r)=>e.equals(n,r)?(0,l.t$)(`can not apply update with equals parts: left(${e.show(n)}) right(${e.show(r)})`):(0,c.Wi)(t)?(0,l.t$)(`can not update non existent entry: left(${e.show(n)}) right(${e.show(r)})`):e.equals(t.value,n)?(0,l.F2)((0,c.G)(r)):(0,l.t$)(`can not apply update on non equal entry: target(${e.show(t.value)}) left(${e.show(n)}) right(${e.show(r)})`)))},m.createLoose=function(e){return t=>(0,l.g_)((n=>(0,c.Wi)(t)?(0,l.t$)(`can not remove non existent entry: left(${e.show(n)})`):e.equals(t.value,n)?(0,l.F2)(c.YP):(0,l.Hk)(`removed non equal entry: target(${e.show(t.value)}) left(${e.show(n)})`,c.YP)),(n=>(0,c.pC)(t)?(0,l.Hk)(`existent entry was overwritten: target(${e.show(t.value)}) right(${e.show(n)})`,(0,c.G)(n)):(0,l.F2)((0,c.G)(n))),((n,r)=>{const a=e.equals(n,r)?(0,c.G)("unexpected equal parts in provided update"):c.YP;return(0,c.Wi)(t)?(0,l.Hk)((0,i.zG)(a,(0,c.UI)((e=>e+", ")),(0,c.fS)((()=>"")))+`update applied on non existent entry: left(${e.show(n)}) right(${e.show(r)})`,(0,c.G)(r)):e.equals(t.value,n)?(0,i.zG)(a,(0,c.UI)((t=>t+`: left(${e.show(n)}) right(${e.show(r)})`)),(0,c.g_)((()=>(0,l.F2)((0,c.G)(r))),(e=>(0,l.Hk)(e,(0,c.G)(r))))):(0,l.Hk)((0,i.zG)(a,(0,c.UI)((e=>e+", ")),(0,c.fS)((()=>"")))+`update applied on non equal entry: target(${e.show(t.value)}) left(${e.show(n)}) right(${e.show(r)})`,(0,c.G)(r))}))}},28082:(e,t,n)=>{n.d(t,{Z:()=>M,UI:()=>j});var r,i=n(46504),a=n(38569),o=n(58303),s=n(48886),l=n(38538),c=n(97225),d=n(90023),u=n(84714),p=n(64271),m=n(91089),h=n(84308),g=n(36344),f=n(8867),y=n(63532),v=n(20161),x=n(90572),I=n(59179),b=n(90517),S=n(3199),C=n(29479),w=n(29416),A=n(954),E=n(18827),k=n(14969),_=n(28404),T=n(93790);!function(e){e.split=function(e){const t=(0,d.zG)(e,_._(1),T.x());return{animation:(0,d.zG)(t,x.h((e=>"root"===e.action.key)),I.U((e=>({key:e.key,action:e.action.action})))),action:(0,d.zG)(t,x.h((e=>"children"===e.action.key)),I.U((e=>({key:e.key,action:e.action.action}))))}}}(r||(r={}));var M,G=n(69671),L=n(32073),D=n(74822),N=n(89457);function z(e){return t=>new f.y((n=>{const r=(0,N.n)()(t),i=[],a=new L.w0;for(let t=0;t<e.length;++t){const e=new D.x;i.push(e),a.add(r.subscribe(e))}return a.add(e(...i).subscribe(n)),a.add(r.connect()),a}))}!function(e){e.emptyFlow=(0,d.a9)((0,u.of)(void 0));function t(e){return s.UI(e)}function n(e){return s.I_(e)}function _(e,t){return s.VF((n=>(0,d.zG)(n,z(((n,r)=>(0,d.zG)(t(r),v.w((t=>{const[[r,o]]=Object.entries(t);return(0,d.zG)(n,x.h((e=>e.key===o)),I.U((e=>e.action)),e[o],I.U((e=>(0,a._)((0,i._)({},e),{[r]:o}))))}))))))))}function T(e,t){return n=>(0,d.zG)(e,x.h((e=>e.key===t&&e.action.animationType===n)),I.U((e=>e.action)),A.O({kind:"init"}),v.w((e=>"end"===e.kind?(0,u.of)(e):(0,d.zG)((0,u.of)({kind:"end",animationType:n}),E.g("start"===e.kind?N:D)))),k.P())}e.fromSideEffect=function(e,t){return n=>{return(0,p.T)(n.pipe(y.b(e),v.w((()=>m.C))),(r=t)instanceof f.y?r:(0,u.of)(r));var r}},e.patchState=t,e.extendActions=n,e.patch=function(e,r){return(0,d.ls)(n(e),t(r))},e.replaceActions=function(e){return s.I_((0,d.ls)(e,v.w((()=>m.C))))},e.composeKnot=function(e){return s.VF((t=>(0,h.a)(Object.keys(e).map((n=>e[n](t.pipe(x.h((e=>e.key===n)),I.U((e=>e.action)))).pipe(I.U((e=>({[n]:e}))))))).pipe(I.U((e=>e.reduce(((e,t)=>(0,i._)({},e,t))))))))},e.composeUnion=_,e.composeOption=function(e,t){return _({None:()=>(0,u.of)(null),Some:M.composeKnot({value:e})},s.VF((e=>(0,d.zG)(e,x.h((e=>"Some"===e.key)),I.U((e=>e.action.action)),t))))},e.composeList=function(e,t,n){return s.VF((r=>(0,d.zG)(r,z(((r,i)=>(0,d.zG)(t(i),v.w((t=>e.traverseWithIndex(G.P)(t,((e,t)=>n(t)((0,d.zG)(r,x.h((t=>t.key===e)),I.U((e=>e.action))))))))))))))},e.animatingFlow=function(e,t){return n=>{const{action:s,animation:u}=r.split(n);let m=0;return(0,d.zG)(s,x.h((e=>e.key===String(m))),b.j("action"),e,S.R(function(e,t){return(n,r)=>{const i=t(),a=o.ij(n[i]),s=(0,d.zG)(a,o.UI((e=>e.children))),l=e(s,r);if(o.Wi(l))return{[i]:{root:o.YP,children:r}};{const e={[i+1]:{root:c.EK(l.value),children:r}},t=c.IS(l.value);return o.pC(t)&&o.pC(s)&&(e[i]={root:t,children:s.value}),e}}}(t,(()=>m)),{}),y.b((e=>m=Number(Object.keys(e).pop()))),v.w(function(e,t){return n=>{const r=String(t()-1),s=String(t()),c=(0,d.zG)(o.ij(n[r]),o.tS((e=>e.root)),o.UI(T(e,r)),o.g_((()=>g.E),d.yR),C.h(l.EG(r))),u=(0,d.zG)(n[s].root,o.UI(T(e,s)),o.g_((()=>g.E),d.yR),C.h((e=>{const t=(0,i._)({},e);return t[s]=(0,a._)((0,i._)({},t[s]),{root:o.YP}),t})));return(0,d.zG)((0,p.T)(c,u),S.R(((e,t)=>t(e)),n),w.b(L),A.O(n))}}(u,(()=>m))))}};const L=100,D=500,N=10*D}(M||(M={}));var P=n(92379),F=n(24666),O=n(24909);const R="root";var $=n(21147),B=n(62552);function U(e){return(0,d.ls)(F.x(),S.R(((t,n)=>e.reduceWithIndex(n,new Map,((e,n,r)=>{const i=t.get(e);return void 0!==i?(n.set(e,i),i.next(r)):n.set(e,new B.X(r)),n}))),new Map),F.x((t=(0,$.f7)((()=>!0)),{equals:(e,n)=>{if(e===n)return!0;if(e.size===n.size){const i=e.keys();let a;for(var r;null===(r=(a=i.next()).done)||void 0===r||!r;)if(!n.has(a.value)||!t.equals(e.get(a.value),n.get(a.value)))return!1;return!0}return!1}}).equals));var t}var j,W=n(21101),H=n(69088);class Y{call(e,t){return t.subscribe(new V(e,this._keySelector))}constructor(e){(0,W._)(this,"_keySelector",void 0),this._keySelector=e}}class V extends H.Lv{_next(e){const t=this._keySelector(e);(0,d.zG)(this._currentGroup,o.g_((()=>this._createGroup(t,e)),(({key:n,group:r})=>{n!==t?(r.complete(),this._currentGroup=o.YP,this._createGroup(t,e)):r.closed||r.next(e)})))}_createGroup(e,t){const n=new B.X(t);this._currentGroup=o.G({key:e,group:n}),this.destination.next(this._createGroupedObservable(e,n))}_createGroupedObservable(e,t){const n=new f.y((e=>{this.count++;const n=t.subscribe(e);return()=>{n.unsubscribe(),0==--this.count&&this.attemptedToUnsubscribe&&this.unsubscribe()}}));return n.key=e,n}_error(e){(0,d.zG)(this._currentGroup,o.UI((({group:t})=>t.error(e)))),this._currentGroup=o.YP,this.destination.error(e)}_complete(){(0,d.zG)(this._currentGroup,o.UI((({group:e})=>e.complete()))),this._currentGroup=o.YP,this.destination.complete()}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}constructor(e,t){super(e),(0,W._)(this,"destination",void 0),(0,W._)(this,"_keySelector",void 0),(0,W._)(this,"attemptedToUnsubscribe",void 0),(0,W._)(this,"count",void 0),(0,W._)(this,"_currentGroup",void 0),this.destination=e,this._keySelector=t,this.attemptedToUnsubscribe=!1,this.count=0,this._currentGroup=o.YP}}function Q(e,t){return(0,d.zG)(t,j.mapAction((t=>({key:e,action:t}))),s.UI((t=>null===t?t:P.cloneElement(t,{key:e}))))}function q(e,t,n){if(X(e)&&t.length>0)return{grid:e.grid,child:q(e.child,t,n)};if(J(e)&&t.length>0){const[r,...o]=t;return{grid:e.grid,children:(0,a._)((0,i._)({},e.children),{[r]:q(e.children[r],o,n)})}}if(Z(e)&&t.length>0)return{foldable:e.foldable,of:q(e.of,t,n)};if(K(e)&&t.length>0){const[r,...o]=t;return{tag:e.tag,members:(0,a._)((0,i._)({},e.members),{[r]:q(e.members[r],o,n)})}}return n(e)}function J(e){return"children"in e}function X(e){return"child"in e}function Z(e){return"foldable"in e}function K(e){return"members"in e}function ee(e){return P.createElement(O.F.Fragment,{children:e})}!function(e){let t,n,r,i,a,c,u,p,m;function h(e){return X(e)?t=>{var n;const r=new Proxy({},{get:()=>h(e.child)({children:null,notify:t.notify,state:null!==(n=t.state)&&void 0!==n?n:g.E})});return e.grid({children:r,state:g.E,notify:d.Q1})}:J(e)?t=>(0,d.zG)(t.state,U(l.IM),I.U((n=>{const r=(0,d.zG)(e.children,l.Su(((e,r)=>Q(e,h(r))({children:null,notify:t.notify,state:n.get(e)||g.E}))));return e.grid({children:r,state:n.get(R)||g.E,notify:e=>t.notify({key:R,action:e})})})),ee):Z(e)?t=>(0,d.zG)(t.state,U(e.foldable),S.R(((n,r)=>{const i=new Map;return r.forEach(((r,a)=>{const o=n.get(a);if(void 0!==o)i.set(a,o);else{const n=Q(a,h(e.of));i.set(a,n({children:null,notify:t.notify,state:r}))}})),i}),new Map),I.U((e=>{const t=new Array;return e.forEach((e=>t.push(e))),t})),ee):K(e)?t=>{return(0,d.zG)(t.state,(n=e.tag,e=>e.pipe((e=>e.lift(new Y((e=>e[n])))))),I.U((n=>Q(n.key,h(e.members[n.key]))({children:null,notify:t.notify,state:n}))),ee);var n}:e}function f(e,t,n){return J(e)?{grid:f(e.grid,t,n),children:e.children}:Z(e)?{foldable:e.foldable,of:f(e.of,t,n)}:r=>e({children:r.children,notify:(0,d.zG)(r.notify,s.I_(n)),state:(0,d.zG)(r.state,I.U(t))})}!function(e){e.empty=()=>null;e.make=function(e){return j.Grid.make(e)}}(t=e.Node||(e.Node={})),function(e){e.make=function(e){return({children:t,state:n,notify:r})=>P.createElement(e,{slots:t,state:n,notify:e=>()=>r(e),view:(...e)=>(0,d.zG)(n,b.j(...e),F.x())})}}(n=e.Grid||(e.Grid={})),function(e){e.make=function(e,t){return{grid:e,child:t}}}(r=e.Composite||(e.Composite={})),function(e){e.make=function(e,t){return{grid:e,children:t}}}(i=e.Knot||(e.Knot={})),function(e){e.make=function(e){return{grid:e=>ee((0,d.zG)(e.children,l.KM(((e,t)=>t)),(e=>P.createElement(P.Fragment,{},e)))),children:e}}}(a=e.Group||(e.Group={})),function(e){e.make=function(e,t){return{foldable:e,of:t}}}(c=e.List||(e.List={})),function(e){e.make=function(e,t){return{tag:e,members:t}},e.asOption=function(e){return{tag:"_tag",members:{Some:j.Group.make({value:e}),None:j.Node.empty}}}}(u=e.Union||(e.Union={})),function(e){e.make=function(e,t){return n=>P.createElement(O.F.div,{"data-purpose":"animation-wrapper",children:n.children.children,className:(0,d.zG)(n.state,I.U((0,d.ls)(o.UI((n=>Boolean(e[n])?e[n]:t[n])),o.FS)),F.x()),onAnimationStart:(0,d.zG)(n.state,I.U(o.g_((()=>d.Q1),(e=>()=>n.notify({kind:"start",animationType:e}))))),onAnimationEnd:(0,d.zG)(n.state,I.U(o.g_((()=>d.Q1),(e=>()=>n.notify({kind:"end",animationType:e})))))})}}(p=e.Transition||(e.Transition={})),function(e){e.make=function(e,t){return j.List.make(l.IM,j.Knot.make(e,{children:t}))}}(m=e.Animated||(e.Animated={})),e.mount=function(e,t){const n=new D.x;return h(e)({children:null,notify:e=>n.next(e),state:(0,d.zG)(t(n),_._(1),T.x())})},e.patch=function(...e){return t=>n=>q(n,e,t)},e.mapAction=function(e){return t=>f(t,d.yR,e)},e.contramapState=function(e){return t=>f(t,e,d.yR)},e.squash=h,e.promap=f}(j||(j={}))},15648:(e,t,n)=>{n.d(t,{A:()=>dt});var r=n(90023),i=n(59833),a=n(11633),o=n(72111),s=n(58303),l=n(53186),c=n(73823),d=n(12518);const u=(0,r.ls)(s.ij,(0,s.tS)(l.nI));var p,m,h,g,f=n(2084),y=n(61625),v=n(45178),x=n(95869),I=n(93380),b=n(21147),S=n(38538),C=n(31851),w=Object.defineProperty,A=Object.defineProperties,E=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable,M=(e,t,n)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;((m=p||(p={})).Range||(m.Range={})).isEmpty=function(e){return e.e-e.s==0},h=m.Edit||(m.Edit={}),(g=h.Type||(h.Type={})).MAIN="main",g.IMPORTANT="important",(h.TypeExt||(h.TypeExt={})).OPTIONAL_CONTEXT="optional_context",(e=>{function t(e){return(0,r.zG)(e.ops,s.DT((e=>-1===e.findIndex(t))),s.g_((()=>{return d.t$({ops:(n=e.ops,n.reduce(((e,n,r)=>{if(t(n,r)){const t=n.attributes,{type:r}=t,a=((e,t)=>{var n={};for(var r in e)_.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&k)for(var r of k(e))t.indexOf(r)<0&&T.call(e,r)&&(n[r]=e[r]);return n})(t,["type"]);e.push((i=((e,t)=>{for(var n in t||(t={}))_.call(t,n)&&M(e,n,t[n]);if(k)for(var n of k(t))T.call(t,n)&&M(e,n,t[n]);return e})({},n),A(i,E({attributes:a}))))}else e.push(n);var i;return e}),[]))});var n}),(e=>d.F2({ops:e}))));function t(e,t){return t>0&&x.s.isRetain(e)&&void 0!==e.attributes&&"optional_context"===e.attributes.type}}e.unsafeFromDelta=function(e){return(0,r.zG)(e,t,d.g_(r.yR,r.yR))},e.fromDelta=t})(m.AbsAlternative||(m.AbsAlternative={}));var G,L,D,N,z=n(7415),P=Object.defineProperty,F=Object.defineProperties,O=Object.getOwnPropertyDescriptors,R=Object.getOwnPropertySymbols,$=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,U=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,j=(e,t)=>{for(var n in t||(t={}))$.call(t,n)&&U(e,n,t[n]);if(R)for(var n of R(t))B.call(t,n)&&U(e,n,t[n]);return e},W=(e,t)=>F(e,O(t));(e=>{(e=>{e.Important="important",e.Main="main",e.Optional="optional"})(e.Type||(e.Type={})),(e.TypeExt||(e.TypeExt={})).OptionalContext="optional_context";const t=e=>"object"==typeof e&&null!==e;e.eqAttributes=S.Eh(b.f7(((n,r)=>t(n)&&t(r)?e.eqAttributes.equals(n,r):b.w4.equals(n,r)))),e.eq=b.MW({type:b.w4,group:s.Eh(b.yv),insert:b.yv,delete:b.lr,retain:b.lr,attributes:e.eqAttributes}),e.isInsert=e=>"insert"in e,e.isInsertString=t=>(0,e.isInsert)(t)&&n(t.insert),e.isInsertGap=t=>(0,e.isInsert)(t)&&i(t.insert),e.isDelete=e=>"delete"in e,e.isRetain=e=>"retain"in e,e.isOptionalContextRetain=t=>"retain"in t&&e.isOptionalContextType(t.type);const n=e=>"string"==typeof e,i=e=>"object"==typeof e&&null!==e&&"gap"in e;e.isMain=e=>"main"===e.type,e.isOptionalType=e=>"optional"===e,e.isOptionalContextType=e=>"optional_context"===e,e.isSignificant=function(e){switch(e.type){case"main":case"important":return!0;case"optional":return!1;default:return(0,v.vE)(e.type)}},e.fromRawAbsAlternative=function(e){if(function(e){const t=e[0];return Boolean(t)&&"retain"in t&&Boolean(t.attributes)&&"optional_context"===t.attributes.type}(e.ops)){const[t,...n]=e.ops;return[{retain:t.retain,type:"optional_context",group:s.YP},...n.map(o)]}return e.ops.map(o)},e.length=I.i.Op.length,e.anonymize=t=>(0,e.isInsert)(t)?W(j({},t),{insert:"string"==typeof t.insert?`<${(0,e.length)(t)}>`:"<embed>"}):t;e.Iterator=class{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){Boolean(t)||(t=1/0);const n=this.ops[this.index];if(Boolean(n)){const r=n.type,i=this.offset,a=(0,e.length)(n);return t>=a-i?(t=a-i,this.index+=1,this.offset=0):this.offset+=t,e.isDelete(n)?{delete:t,type:r,group:n.group}:e.isRetain(n)?{retain:t,type:r,group:n.group,attributes:!e.isOptionalContextType(r)&&n.attributes}:e.isInsertString(n)?{insert:n.insert.substr(i,t),type:r,group:n.group,attributes:n.attributes}:n}return{retain:1/0,type:"optional",group:s.YP,attributes:{}}}peekLength(){return Boolean(this.ops[this.index])?(0,e.length)(this.ops[this.index])-this.offset:1/0}peekType(){return Boolean(this.ops[this.index])?e.isDelete(this.ops[this.index])?"delete":e.isRetain(this.ops[this.index])?"retain":"insert":"retain"}};const a=(0,r.ls)(s.ij,s.UI(S.EG("type")),s.UI(S.EG("group")),s.fS((()=>({})))),o=e=>{const t=function(e){if(null!=(null==e?void 0:e.type))switch(e.type){case"main":return"main";case"important":return"important";default:return(0,v.vE)(e.type)}return"optional"}(e.attributes),n=(i=e.attributes,(0,r.zG)(s.ij(i),s.tS((e=>s.ij(e.group)))));var i;return"insert"in e?{insert:e.insert,type:t,group:n,attributes:a(e.attributes)}:"delete"in e?{delete:e.delete,type:t,group:n}:{retain:e.retain,type:t,group:n,attributes:a(e.attributes)}}})(G||(G={})),(D=L||(L={})).fromAlternative=({alternative:e,fullText:t})=>(0,r.zG)(e.delta.invert(t),N.fromRawDelta),D.fromAlternativeBoldified=({alternative:e,fullText:t})=>{const n=(0,r.zG)(e.delta.map(x.s.match((e=>(0,r.zG)(e,s.DT(x.s.isInsertString),s.tS((e=>(0,r.zG)(s.ij(e.attributes),s.UI((t=>({attributes:t,retain:e.insert.length})))))),s.hX((({attributes:e})=>Boolean(e.bold))),s.UI((({retain:e})=>({retain:e,attributes:{bold:!1}}))))),(e=>s.YP),(e=>s.G({retain:e.retain})))),i.oA,(e=>new I.i(e)),(e=>t.compose(e)));return(0,D.fromAlternative)({alternative:e,fullText:n})},D.fromAlternativeListified=({alternative:e,fullText:t})=>(0,r.zG)((0,D.fromAlternative)({alternative:e,fullText:t}),(e=>(0,r.zG)(e.delta.ops,i.qr((e=>x.s.isInsertString(e)&&"\n"===e.insert&&Boolean(!e.attributes||!Boolean(e.attributes.list)))),s.UI((t=>{const n=e.delta.ops,r=n[t];return new I.i([...n.slice(0,t),W(j({},r),{attributes:W(j({},r.attributes),{list:!1})}),...n.slice(t+1)])})),s.fS((()=>e.delta)))),N.fromRawDelta),(e=>{let t;function n(e){return t=>G.isInsertGap(t)?W(j({},t),{insert:e}):t}function a(e){return new m(e)}var u;e.hasOptionalContext=function(e){return Boolean(e[0])&&G.isOptionalContextRetain(e[0])},(e=>{e.Insert="insert",e.Remove="remove",e.Substitution="substitution"})(t=e.Type||(e.Type={})),(e=>{function t(e){return"main"===e.type?s.G(G.isInsert(e)?"insert":"remove"):s.YP}e.eq=b.yv,e.fromOperation=t,e.semigroup={concat(e,t){switch(e){case"insert":return"remove"===t?"substitution":t;case"remove":return"insert"===t?"substitution":t;case"substitution":return"substitution";default:return(0,v.vE)(e)}}},e.monoid=s.uZ(e.semigroup),e.parse=(0,i.Lx)(e.monoid)(t)})(t=e.Type||(e.Type={})),e.eq=b.MW({lengthAffected:b.lr,type:s.Eh(t.eq),ops:(0,i.Eh)(G.eq)}),e.fromRawDelta=(0,r.ls)(p.AbsAlternative.unsafeFromDelta,G.fromRawAbsAlternative,a),e.fillGaps=(t,r)=>e.hasOptionalContext(t.ops)?a([t.ops[0],...t.ops.slice(1).map(n(r))]):a(t.ops.map(n(r))),e.dismissTransformGroups=function(t,n){const o=i.DZ((e=>(0,r.zG)(e.group,s.hX((e=>n.has(e))),s.g_((()=>s.G(e)),(()=>function(e){return G.isDelete(e)?s.G({type:e.type,group:e.group,retain:e.delete,attributes:{}}):G.isInsert(e)?s.YP:s.G(e)}(e))))));if(e.hasOptionalContext(t.ops)){const[e,...n]=t.ops;return a([e,...(0,r.zG)(n,o)])}return a((0,r.zG)(t.ops,o))},e.getTransformGroups=function(e){const t=new Set;return e.ops.forEach((e=>(0,r.zG)(e.group,f.bw((e=>t.add(e)))))),t},e.getDeleteOpsGroupsList=function(e){return(0,r.zG)(e.ops.filter(G.isDelete),i.UI((e=>e.group)),i.oA)},e.create=a,e.validate=(0,r.ls)((e=>e.ops),d.DT((0,z.sq)(G.isOptionalContextRetain),(e=>"Optional_context operations exist not only at the beginning or at the end of Delta"))),(u=e.Group||(e.Group={})).fromSerialized=function(t){return{context:t.context,alternatives:(0,r.zG)(t.alternatives,l.UI((e=>e.ops)),l.UI(e.create))}},u.fromSubalerts=(e,t)=>({context:e,alternatives:l.UI((0,r.ls)(G.fromRawAbsAlternative,a))(t)}),u.fromRawTransform=function(e){return{context:l.of(e.context),alternatives:l.UI((0,r.ls)(G.fromRawAbsAlternative,a))(e.alternatives)}},u.rebase=e=>t=>({context:(0,r.zG)(t.context,l.UI((t=>({s:e.transformPosition(t.s,!0),e:e.transformPosition(t.e,!0)})))),alternatives:(0,r.zG)(t.alternatives,l.UI((t=>(0,r.zG)(t.rebase(e),s.g_((()=>t),r.yR)))))}),u.copy=e=>({context:l.JG(e.context),alternatives:l.JG(e.alternatives)});class m{constructor(e){this.ops=e,this.type=t.parse(this.ops),this.lengthAffected=x.s.calcAffectedLength(this)}rebase(e){const t=e.ops[0];if(!Boolean(t)||x.s.isRetain(t)&&(void 0===t.attributes||0===Object.keys(t.attributes).length)&&I.i.Op.length(t)>this.lengthAffected)return s.G(this);const n=this.ops.length>=2&&x.s.isDelete(this.ops[this.ops.length-2])&&x.s.isInsert(this.ops[this.ops.length-1]);return!Boolean(t)||n&&x.s.isRetain(t)&&(void 0===t.attributes||0===Object.keys(t.attributes).length)&&I.i.Op.length(t)===this.lengthAffected?s.G(this):this._internalRebase(e)}_internalRebase(t){const n=I.i.Op.iterator(t.ops),i=new G.Iterator(this.ops);let a=s.G(new m([])),o=!1;for(;i.hasNext();)if("insert"===n.peekType()){if(o&&(0,r.zG)(a,f.wo((e=>"main"===e.ops[e.ops.length-1].type))))return s.YP;{const e=I.i.Op.length(n.next()),t=(0,r.zG)(a,s.UI((e=>e.ops[e.ops.length-1])),f.MH);if(o&&f.wo((e=>e.lengthAffected>0))(a)){const n={retain:e,type:t.type,group:t.group,attributes:"attributes"in t&&!G.isOptionalContextType(t.type)?t.attributes:{}};a=m._pushOp(a,n)}else a=m._pushOp(a,{retain:e,type:"optional",group:s.YP,attributes:{}})}}else if("insert"===i.peekType()){const e=i.next();if("main"===e.type&&"delete"===n.peekType()&&n.offset>0)return s.YP;a=m._pushOp(a,e)}else{const e=Math.min(n.peekLength(),i.peekLength()),t=n.next(e),r=i.next(e);x.s.isDelete(t)||(o=i.offset>0,a=m._pushOp(a,G.isDelete(r)?r:G.isOptionalContextType(r.type)?{retain:e,type:"optional_context",group:s.YP}:{retain:e,type:r.type,group:r.group,attributes:r.attributes}))}return(0,r.zG)(a,s.UI((t=>(t.type=e.Type.parse(this.ops),t))))}static _pushOp(e,t){return(0,r.zG)(e,s.tS((e=>(0,r.zG)(c.vM((()=>e._push(t))),d.Vn((e=>(o.C8.Logging.getLogger("Alternative").error("Alternative push error",e),e))),s.Uo))))}_push(e){const t=this.ops.length,n=this.ops[t-1];if(Boolean(n)){if(G.isOptionalContextRetain(e))return G.isOptionalContextRetain(n)?n.retain+=e.retain:G.isRetain(n)&&t<=2?2===t?((0,v.kG)(G.isOptionalContextRetain(this.ops[0]),"OptionalContext is expected in the beginning of alternative but not found",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.ops[0].retain+=e.retain):(this.ops[t]=n,this.ops[t-1]=e):(0,v.kG)(G.isOptionalContextRetain(n)||G.isRetain(n)&&1===t,"Attempted to push optional_context in the middle of alternative ops",JSON.stringify({ops:this.ops,newOp:e,index:t})),this.lengthAffected+=e.retain,this;if(G.isDelete(e)&&G.isDelete(n))return e.type===n.type?n.delete+=e.delete:this.ops.push(e),this.lengthAffected+=e.delete,this;if(G.isInsert(e)&&G.isInsert(n))return e.type===n.type&&"string"==typeof e.insert&&"string"==typeof n.insert&&G.eqAttributes.equals(e.attributes,n.attributes)?n.insert+=e.insert:this.ops.push(e),this;if(G.isRetain(e)&&G.isRetain(n))return e.type===n.type?n.retain+=e.retain:this.ops.push(e),this.lengthAffected+=e.retain,this;this.ops.push(e)}else this.ops=[e];return G.isInsert(e)||(this.lengthAffected+=G.length(e)),this}get delta(){return x.s.normalizeDelta(new I.i(this))}toJSON(){return{ops:this.ops}}}e.compose=(e,t)=>{const n={composedDelta:new I.i,currentFullText:t,reversedAlternatives:[]},a=e.reduce(((e,[t,n],i)=>((0,r.zG)(t.rebase(e.composedDelta),s.g_((()=>{e.reversedAlternatives.push(d.t$({error:new Error("Could not rebase alternative to composed delta"),delta:t.delta,alternativeIndex:i}))}),(t=>{const a=n({alternative:t,fullText:e.currentFullText});e.composedDelta=e.composedDelta.compose(t.delta),e.currentFullText=e.currentFullText.compose(t.delta),function(e,t){e.forEach(((n,i)=>(0,r.zG)(n,d.g_(r.Q1,(n=>{e[i]=(0,r.zG)(n.reversedAlternative.rebase(t.delta),d.Yo((()=>({error:new Error("Could not rebase reversed alternative to some alternative"),delta:n.reversedAlternative.delta,alternativeIndex:n.alternativeIndex}))),d.UI((e=>W(j({},n),{reversedAlternative:e}))))})))))}(e.reversedAlternatives,t),e.reversedAlternatives.push(d.F2({reversedAlternative:a,alternativeIndex:i}))}))),e)),n),o=(0,r.zG)(a.reversedAlternatives,i.oh,C.T.fromSeparatedArray);return W(j({},a),{reversedAlternatives:o})},e.withoutOptionalOps=function(t){return e.create(t.filter((e=>!G.isOptionalType(e.type))))}})(N||(N={}));var H=Object.defineProperty,Y=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable,q=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,J=(e,t)=>{for(var n in t||(t={}))V.call(t,n)&&q(e,n,t[n]);if(Y)for(var n of Y(t))Q.call(t,n)&&q(e,n,t[n]);return e};Math.pow(2,32);var X,Z,K,ee,te,ne,re,ie,ae,oe;Z=X||(X={}),(K=Z.SessionMode||(Z.SessionMode={})).READ_ONLY="READ_ONLY",K.AI_STUDIO_PREVIEW="AI_STUDIO_PREVIEW",(ee=Z.ScoresStatus||(Z.ScoresStatus={})).OK="OK",ee.TOO_SMALL="TOO_SMALL",ee.SENSITIVE="SENSITIVE",ee.ERROR="ERROR",(e=>{const t={Clarity:0,Correctness:0,Engagement:0,Tone:0,"Style guide":0,GeneralScore:0};e.normalize=e=>J(J({},t),e)})(Z.OutcomeScores||(Z.OutcomeScores={})),(Z.AttentionHeatmap||(Z.AttentionHeatmap={})).hasAttentionInfo=function(e){return"attentionScore"in e&&"showAttentionCard"in e},te=Z.Survey||(Z.Survey={}),ne=te.Data||(te.Data={}),re=ne.BaseSurvey||(ne.BaseSurvey={}),(ie=re.Placement||(re.Placement={})).gmail="gmail",ie.gdocs="gdocs",ie.vbar="vbar",ie.ggo="ggo",ie.writing_expert_accept_card="writing_expert_accept_card",ie.writing_expert_dismiss_card="writing_expert_dismiss_card",ie.writing_expert_widget="writing_expert_widget",ie.ai_studio_feed="ai_studio_feed",(ae=ne.ScoreSurvey||(ne.ScoreSurvey={})).type="score",(ae.Score||(ae.Score={})).declined="declined",(oe=ne.OpenAnswerScoreSurvey||(ne.OpenAnswerScoreSurvey={})).type="open_answer_score",oe.scoreStage="score",oe.submitStage="submit";var se,le,ce,de,ue,pe,me,he,ge,fe,ye,ve,xe,Ie,be,Se,Ce,we,Ae,Ee=n(66861),ke=Object.defineProperty,_e=Object.defineProperties,Te=Object.getOwnPropertyDescriptors,Me=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,De=(e,t,n)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ne=(e,t)=>{for(var n in t||(t={}))Ge.call(t,n)&&De(e,n,t[n]);if(Me)for(var n of Me(t))Le.call(t,n)&&De(e,n,t[n]);return e},ze=(e,t)=>_e(e,Te(t)),Pe=(e,t)=>{var n={};for(var r in e)Ge.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&Me)for(var r of Me(e))t.indexOf(r)<0&&Le.call(e,r)&&(n[r]=e[r]);return n};(le=se||(se={})).RelatedMaterial=a.dt({iconUrl:a.OT(a.Z_),title:a.OT(a.Z_),link:a.OT(a.Z_)}),le.RelatedMaterials=a.Bk(le.RelatedMaterial),le.CommunicationMethod=a.dt({iconUrl:a.OT(a.Z_),title:a.OT(a.Z_),link:a.OT(a.Z_)}),le.PointPerson=a.dt({firstName:a.OT(a.Z_),lastName:a.OT(a.Z_),displayName:a.OT(a.Z_),jobTitle:a.OT(a.G0([a.Z_,a.S1])),avatarUrl:a.OT(a.G0([a.Z_,a.S1])),communicationMethods:a.Bk(le.CommunicationMethod)}),le.PointPeople=a.Bk(le.PointPerson),le.Aliases=a.Bk(a.dt({name:a.OT(a.Z_)})),(de=ce||(ce={})).empty=[],de.isLeaf=function(e){return 0===e.length},de.Tree=a.sH("Tree",(()=>a.IX(a.bc([a.pk,de.Tree])))),pe=ue||(ue={}),(me=pe.DomainCategory||(pe.DomainCategory={})).sales_crm="sales_crm",me.sales_engagement="sales_engagement",me.sales_enablement="sales_enablement",me.marketing_email_automation="marketing_email_automation",me.marketing_content="marketing_content",me.customer_service="customer_service",me.customer_surveys_surveys="customer_surveys_surveys",me.recruiting="recruiting",me.training_learning="training_learning",me.project_management="project_management",me.legal="legal",me.contractors="contractors",me.human_resources="human_resources",me.email="email",me.business_chat="business_chat",((ge=he||(he={})).SpecialCategory||(ge.SpecialCategory={})).InQuotes="InQuotes",(fe=ge.ScopeType||(ge.ScopeType={})).GLOBAL="GLOBAL",fe.SESSION="SESSION",fe.DOCUMENT="DOCUMENT",(ye=ge.MutedByType||(ge.MutedByType={})).MUTED_BY_USER="MUTED_BY_USER",ye.NOT_ELIGIBLE_FOR_INLINE="NOT_ELIGIBLE_FOR_INLINE",ye.NOT_MUTED="NOT_MUTED",xe=ve||(ve={}),(Ie=xe.SuggestionRejectionReason||(xe.SuggestionRejectionReason={})).NOT_RELEVANT="NOT_RELEVANT",Ie.WRONG_TONE="WRONG_TONE",Ie.INCORRECT="INCORRECT",Ie.WRONG_GRAMMAR="WRONG_GRAMMAR",Ie.OFFENSIVE="OFFENSIVE",Ie.OTHER="OTHER",(be||(be={})).mock={bundle:"Test bundle",bundleRank:10,group:"Test Group",rank:1,outcome:"Correctness"},(e=>{function t(e){return t=>({s:e.s+t.s,e:e.s+t.e,type:t.type})}function n(e,t=!1){return 0===e.s?r.MZ:n=>(0,r.MZ)({ops:[{retain:e.s,attributes:t?void 0:{type:p.Edit.TypeExt.OPTIONAL_CONTEXT}},...n.ops]})}e.prependContextToHighlight=t,e.prependContext=n,e.toAbs=function(e){return we.create({highlights:e.highlights.map(t(e.context)),alternatives:(0,r.zG)(e,s.DT((e=>void 0!==e.alternatives&&e.alternatives.length>0)),s.UI((e=>ze(Ne({},e),{alternatives:l.UI(n(e.context))(e.alternatives)}))),s.UI(N.Group.fromRawTransform))})}})(Se||(Se={})),(e=>{let t;let n;var i;(t=e.Id||(e.Id={})).create=e=>e.toString(),(i=n=e.Range||(e.Range={})).rebase=function(e,t){const n=t.transformPosition(e.begin,!0),r=t.transformPosition(e.end,!0),i=(new I.i).insert(e.text).compose(t.slice(e.begin)).reduce(((e,t)=>x.s.isInsert(t)?`${e}${t.insert}`:e),"").slice(0,r-n);return ze(Ne({},e),{begin:n,end:r,text:i})},i.isSquashed=function(e){return e.begin>=e.end},i.fromAttentionHeatmapMessage=function(e){return ze(Ne({},e),{id:t.create(e.id)})},e.fromAttentionHeatmapMessage=function(e){return ze(Ne({},e),{add:e.add.map(n.fromAttentionHeatmapMessage),update:e.update.map(n.fromAttentionHeatmapMessage),remove:e.remove.map(t.create),attentionScore:(0,r.zG)(e,s.DT(X.AttentionHeatmap.hasAttentionInfo),s.UI((0,Ee.ei)("attentionScore"))),showAttentionCard:(0,r.zG)(e,s.DT(X.AttentionHeatmap.hasAttentionInfo),s.UI((0,Ee.ei)("showAttentionCard")))})}})(Ce||(Ce={})),(e=>{e.create=e=>e,e.isSquashed=function(e){return e.highlights.some(p.Range.isEmpty)},e.isValidAfterTransform=function(e,n){const r=t(e),i=t(n);return Boolean((0,z.Hx)(r.highlights,i.highlights,((e,t)=>e.e-e.s==t.e-t.s)))&&(0,z.Hx)(r.alternatives,i.alternatives,((e,t)=>(0,z.Hx)(e.ops.filter((0,y.ff)(x.s.isRetain)),t.ops.filter((0,y.ff)(x.s.isRetain)),x.s.isEqual((()=>!0)))))},e.rebase=function(t,n){return(0,e.create)({highlights:t.highlights.map((e=>({s:n.transformPosition(e.s,!0),e:n.transformPosition(e.e,!0),type:e.type}))),alternatives:(0,r.zG)(t.alternatives,s.UI(N.Group.rebase(n)))})};const t=e=>({highlights:e.highlights,alternatives:(0,r.zG)(e.alternatives,s.g_((()=>[]),(e=>e.alternatives.map((e=>e.delta)))))})})(we||(we={})),(e=>{var t,n,a;function m(e){return void 0===e.drilldownTree&&void 0===e.knowledgeHubSuggestCorrectionUrl&&void 0===e.knowledgeHubRelatedMaterials&&void 0===e.knowledgeHubPointPeople&&void 0===e.knowledgeHubAliases?e:ze(Ne({},e),{drilldownTree:void 0===e.drilldownTree?void 0:(0,r.zG)(e.drilldownTree,(e=>"object"==typeof e?e:JSON.parse(e)),ce.Tree.decode,c.MH),knowledgeHubRelatedMaterials:(0,r.zG)(e.knowledgeHubRelatedMaterials,s.ij,s.tS((e=>(0,r.zG)(d.Rx(e,d.KC),d.tS((0,r.ls)(se.RelatedMaterials.decode,d.Vn(d.KC))),d.g_((e=>(o.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubRelatedMaterials",e),s.YP)),s.G)))),s.FS),knowledgeHubPointPeople:(0,r.zG)(e.knowledgeHubPointPeople,s.ij,s.tS((e=>(0,r.zG)(d.Rx(e,d.KC),d.tS((0,r.ls)(se.PointPeople.decode,d.Vn(d.KC))),d.g_((e=>(o.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubPointPeople",e),s.YP)),s.G)))),s.FS),knowledgeHubAliases:(0,r.zG)(e.knowledgeHubAliases,s.ij,s.tS((e=>(0,r.zG)(d.Rx(e,d.KC),d.tS((0,r.ls)(se.Aliases.decode,d.Vn(d.KC))),d.g_((e=>(o.C8.Logging.getLogger("coreclients.capi.data").error("Error decoding knowledgeHubAliases",e),s.YP)),s.G)))),s.FS)})}function h(e,t){(0,r.zG)(e.ops,i.Ew((e=>x.s.isInsert(e)&&(0,r.zG)(x.s.getAttr(e,"type"),s.Gg((e=>e===p.Edit.Type.MAIN)))&&"string"==typeof e.insert)),s.UI((({insert:e})=>t(e))))}function g(e){return t=>"InQuotes"===t&&"true"===e.extra_properties.in_quotes}function y(e){return!S(e)&&!C(e)}function b(e){return void 0!==e.begin&&void 0!==e.end&&void 0!==e.highlightBegin&&void 0!==e.highlightEnd}function S(e){return void 0!==e.cardLayout&&void 0!==e.transformJson}function C(e){return"labels"in e&&"subalerts"in e}function w(e,t,n,r){return y(e)?t(e):S(e)?n(e):r(e)}(e.Id||(e.Id={})).create=e=>e.toString(),(t=e.Impact||(e.Impact={})).Critical="critical",t.Advanced="advanced",(n=e.View||(e.View={})).all="all",n.priority="priority",(a=e.Inline||(e.Inline={})).inline="inline",a.not_inline="not_inline",e.parseExtraProperties=m,e.fromAlertMessage=function(t){return Object.assign({},t,Ne({id:e.Id.create(t.id),cost:Boolean(t.cost)?t.cost:1,extra_properties:m(t.extra_properties)},t.transformJson?{transformJson:Se.toAbs(t.transformJson),highlightText:[t.highlightText]}:(0,r.zG)(u(t.subalerts),s.g_((()=>({highlightText:[t.highlightText]})),(e=>(0,r.zG)(function(e,t){return(0,r.zG)(t,s.g_((()=>d.t$(new Error("Got corrupted superalert — the labels are missing"))),(t=>function(e,t){if(e.length<2)return d.t$(new Error("There should be more than one subalert, got "+e.length));const n=t.map((e=>({matches:0,replacements:new Set,label:e}))),i=n.reduce(((e,t)=>(e[t.label]=t,e)),{}),a=u(e[0].transformJson.alternatives);if(n.length>0&&Boolean(s.Wi(a))||!Boolean((0,r.zG)(a,f.wo((e=>n.length===e.length)))))return d.t$(new Error("Alternatives array length must match labels array length"));let o=(0,r.zG)(a,s.UI(l.Su(((t,r)=>(h(r,(e=>n[t].replacements.add(e))),Se.prependContext(e[0].transformJson.context)(r))))),s.UI((t=>(i[e[0].label].matches+=1,[l.of(e[0].transformJson.context),t]))));const c=e[0].transformJson.highlights.map(Se.prependContextToHighlight(e[0].transformJson.context)),m=[e[0].highlightText];for(let t=1;t<e.length;t++){const a=e[t];if(n.length>0){if(void 0===a.transformJson.alternatives)return d.t$(new Error(`The alternatives are missing from subalert, expected length: ${n.length}`));if(a.transformJson.alternatives.length!==n.length)return d.t$(new Error(`Subalert has incorrect alternatives length: expected ${n.length}, got ${a.transformJson.alternatives.length}`))}o=(0,r.zG)(o,s.UI((([e,t])=>{i[a.label].matches+=1,e.push(a.transformJson.context);for(let e=0;e<t.length;e++){const i=a.transformJson.alternatives[e];h(i,(t=>n[e].replacements.add(t))),t[e]=(0,r.zG)(new I.i(t[e]),(e=>e.compose(e.transform(new I.i(Se.prependContext(a.transformJson.context,!0)(i)),!0))),p.AbsAlternative.unsafeFromDelta)}return[e,t]}))),c.push(...a.transformJson.highlights.map(Se.prependContextToHighlight(a.transformJson.context))),m.push(a.highlightText)}return d.F2({subalerts:we.create({alternatives:(0,r.zG)(o,s.UI((([e,t])=>N.Group.fromSubalerts(e,t)))),highlights:c}),labels:n.map((e=>{var t=e,{replacements:n}=t,r=Pe(t,["replacements"]);return ze(Ne({},r),{replacementTexts:Array.from(n)})})),highlightText:m})}(e,t))))}(e,s.ij(t.labels)),d.fS((e=>(o.C8.Logging.getLogger("coreclients.capi.data").error("Error repacking superalert",e),{highlightText:[]})))))))))},e.isFullSentence=function(e){return"true"===e.full_sentence_rewrite||"true"===e.full_sentence_fluency_rewrite},e.belongsToAnySpecialCategory=function(e){const t=g(e);return-1!==Object.values(he.SpecialCategory).findIndex(t)},e.belongsToSpecialCategory=g,e.withPosition=y,e.hasPosition=b,e.withTransformJson=S,e.withAlternatives=function(e){return S(e)&&s.pC(e.transformJson.alternatives)},e.withSubalerts=C,e.match=w,e.matchBy=function(e,t,n){return r=>w(r,e,t,n)},(e=>{function t(e){return e.end-e.begin}function n(e){return e.highlightEnd-e.highlightBegin}e.shift=function(e,t){return{begin:e.begin+t,end:e.end+t,highlightBegin:e.highlightBegin+t,highlightEnd:e.highlightEnd+t}},e.rebase=function(e,t){return{begin:t.transformPosition(e.begin,!0),end:t.transformPosition(e.end,!0),highlightBegin:t.transformPosition(e.highlightBegin,!0),highlightEnd:t.transformPosition(e.highlightEnd,!0)}},e.getReplacementLength=t,e.getHighlightLength=n,e.isSquashed=function(e){return 0===t(e)||0===n(e)},e.hasEqualLength=function(e,r){return t(e)===t(r)&&n(e)===n(r)}})(e.Position||(e.Position={})),e.isPlagiarism=function(e){return void 0!==e.cardLayout&&"Originality"===e.cardLayout.outcome},e.isOneGap=function(e){return void 0!==e.extra_properties&&"gap_transform"in e.extra_properties},e.isTakeaway=function(e){return void 0!==e.extra_properties&&"takeawayScore"in e.extra_properties},e.hasDrilldownTree=function(e){return void 0!==e.extra_properties&&"drilldownTree"in e.extra_properties},e.isShortenIt=function(e){return void 0!==e.extra_properties&&"shorten_it"in e.extra_properties},e.isToneAI=function(e){return void 0!==e.extra_properties&&"tone_slider"in e.extra_properties},e.isEthicalAI=function(e){return void 0!==e.extra_properties&&"ethical_ai_external_link"in e.extra_properties},e.isCitationDetection=function(e){return void 0!==e.extra_properties&&"citation_detection"in e.extra_properties},e.isSuggestedSnippet=function(e){return void 0!==e.extra_properties&&"suggested_snippet_text"in e.extra_properties&&"suggested_snippet_lib_link"in e.extra_properties},e.isKnowledgeHubSuggestedTerm=function(e){return"KnowledgeHub/SuggestedTerm/SuggestedTerm"===e.pname},e.isHidden=function(e){return!0===e.hidden},e.isRawAlert=function(e){if(!Boolean(e))return!1;const t=e;return Number.isInteger(t.rev)&&w(t,(e=>Number.isInteger(e.begin)&&Number.isInteger(e.end)&&Number.isInteger(e.highlightBegin)&&Number.isInteger(e.highlightEnd)),(e=>e.transformJson.highlights.length>0),(e=>e.labels.length>0))},e.mock={id:e.Id.create(""),rev:0,pname:"Spelling/BritishVsAmerican/BrInstOfAm/BrInstOfAm",group:"ContextualSpelling",point:"BrInstOfAm",category:"BritishVsAmerican",categoryHuman:"British vs American",hidden:!1,text:"centralise",todo:"correct",minicardTitle:"correct",title:"Inconsistent spelling",cost:1,transforms:["<span class='gr_grammar_del'>centralise</span>→<span class='gr_grammar_ins'>centralize</span>"],details:"<p>One of&nbsp;the most obvious differences between American and British English is&nbsp;the spelling of&nbsp;certain words such as&nbsp;<b>color/colour, learned/learnt,</b> and <b>toward/towards</b>. Typically, the spelling of&nbsp;words like these only varies by&nbsp;one or&nbsp;two letters. In&nbsp;the interest of&nbsp;consistency and clarity, you should use the spelling that will be&nbsp;more familiar to&nbsp;your intended audience.\n",explanation:"<p>The word <b>centralise</b> is&nbsp;a&nbsp;British English spelling. In&nbsp;the interest of&nbsp;consistency, consider replacing it&nbsp;with the American English spelling.\n",examples:'<p><span class="grey">British: I&nbsp;wish you success in&nbsp;all your endeavours.</span><br/><span class="grey">American: I&nbsp;wish you success in&nbsp;all your endeavors.</span><br/><p><span class="grey">British: Sweet yoghurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><span class="grey">American: Sweet yogurts contain a&nbsp;lot of&nbsp;sugar.</span><br/><p><span class="grey">British: Serena moved towards the blinking light.</span><br/><span class="grey">American: Serena moved toward the blinking light.</span><br/>',free:!0,impact:"critical",highlightBegin:5092,highlightEnd:5102,highlightText:[""],begin:5092,end:5102,replacements:["centralize"],extra_properties:{priority:"2"},cardLayout:{bundle:"Fix spelling and grammar",bundleRank:10,group:"Spelling",rank:10,outcome:"Correctness"},transformJson:we.create({highlights:[{s:5092,e:5102}],alternatives:s.YP}),view:"all",inline:"inline"},e.mockPlagiarism={id:e.Id.create(""),rev:0,transforms:[],title:"Citation audit",cost:1,details:"",explanation:"",examples:"",free:!1,impact:"advanced",hidden:!1,todo:"",minicardTitle:"",cardLayout:{bundle:"Plagiarism",bundleRank:10,group:"Unoriginal content",rank:0,outcome:"Originality"},category:"Plagiarism",categoryHuman:"Unoriginal content",begin:156,end:697,text:"",group:"Plagiarism",pname:"Plagiarism/Plagiarism/UnoriginalContent",point:"UnoriginalContent",highlightBegin:156,highlightEnd:697,highlightText:[""],replacements:[],extra_properties:{},transformJson:we.create({highlights:[{s:1,e:40}],alternatives:s.YP}),view:"all",inline:"not_inline"},e.mockWithSubalerts={id:e.Id.create(""),point:"Capitalization",title:"Inconsistent capitalization",details:"<p>For certain words, capitalization preferences can vary between style guides. <i>Internet</i> was once routinely capitalized, for example. However, in recent years many style guides have begun advising writers to lowercase the word: <i>internet</i>. Whether you choose to capitalize a particular term or not, it’s best to choose one style and use it consistently throughout the same document.\n",explanation:"<p>You wrote <b>Country</b> once and <b>country</b> twice. Both spellings are acceptable, but it’s best not to switch back and forth. Choose whether or not to capitalize this word throughout your text.\n",examples:'<p><span class="grey">Inconsistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>internet</b>. Education has changed because of the <b>internet</b>, too.</span><br/><span class="grey">Consistent: Office life was different before the <b>Internet</b>. Education has changed because of the <b>Internet</b>, too.</span><br/>',todo:"capitalize consistently",minicardTitle:"capitalize consistently",free:!1,hidden:!1,labels:[{label:"Country",matches:1,replacementTexts:["Country"]},{label:"country",matches:2,replacementTexts:["country"]}],highlightText:["Country","country"],cost:1,subalerts:we.create({highlights:[{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],alternatives:s.G(N.Group.fromSubalerts([{s:144,e:162},{s:755,e:778},{s:1458,e:1481}],[p.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:p.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:p.Edit.Type.MAIN}},{insert:"Country",attributes:{type:p.Edit.Type.MAIN}}]}),p.AbsAlternative.unsafeFromDelta({ops:[{retain:144,attributes:{type:p.Edit.TypeExt.OPTIONAL_CONTEXT}},{delete:7,attributes:{type:p.Edit.Type.MAIN}},{insert:"country",attributes:{type:p.Edit.Type.MAIN}}]})]))}),category:"Inconsistency",text:"",group:"Style",pname:"Style/Inconsistency/Capitalization/Capitalization",rev:0,replacements:[],impact:"advanced",extra_properties:{priority:"4"},cardLayout:{bundle:"Keep your style consistent",bundleRank:10,group:"Consistency",rank:160,outcome:"Correctness"},categoryHuman:"Text Inconsistencies",updatable:!0,view:"all",inline:"not_inline"},e.clearUserTextFields=function(e){const t=e,{text:n,replacements:r,highlightText:i,transformJson:a,transforms:o,details:s,explanation:l,examples:c}=t;return Pe(t,["text","replacements","highlightText","transformJson","transforms","details","explanation","examples"])},e.unsafeGetPosition=function(e){return(0,v.kG)(b(e),"raw alert should have a position"),e},e.unsafeGetTransformJson=function(e){return(0,v.kG)(S(e),"raw alert should have transformJson"),e}})(Ae||(Ae={}));var Fe;(Fe||(Fe={})).willRemoveAlert=function(e){return"IGNORE"===e||"OFFENSIVE_CONTENT"===e||"WRONG_SUGGESTION"===e||"ADD_TO_DICTIONARY"===e||"LIKE"===e||"DISLIKE"===e||"ACKNOWLEDGED"===e||"HIDE"===e};var Oe,Re,$e;(Oe||(Oe={})).generatePoints=function(e,t,n){const r=(e,t)=>Math.max(Math.trunc(e/t),(0,y.TN)(e));return(0,z.j6)(r(e,2),(e=>(0,z.j6)(r(t,3),(t=>({value:Math.random()*n,alertIds:[],footprint:`${100*e+t}`})))))},(($e=Re||(Re={})).Id||($e.Id={})).create=e=>e.toString();var Be,Ue,je;(Be||(Be={})).is=e=>t=>t.check===e,(je=Ue||(Ue={})).is=function(...e){return t=>e.some((e=>e===t.kind))},je.isUserFeedbackWithGeneralScore=function(e){var t;return Boolean(null==(t=e.outcomeScores)?void 0:t.GeneralScore)},je.isUserFeedbackWithScoreStatus=function(e){return Boolean(e.scoreStatus)};var We=n(17690),He=n(83233),Ye=n(61230),Ve=n(50887),Qe=n(78129),qe=n(59179),Je=n(90572),Xe=n(26308),Ze=n(92253),Ke=n(40255),et=n(13728),tt=n(70544),nt=n(7123);function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){if(e){if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}var dt=function(){function e(t,n,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new nt.J,c=this;it(this,e),ot(this,"_getByRawAlertId",void 0),ot(this,"popoverManager",void 0),ot(this,"state",void 0),ot(this,"_sduiManager",void 0),ot(this,"_subs",void 0),ot(this,"_log",void 0),ot(this,"alertIdResolver",void 0),ot(this,"findFirstCardWithContent",void 0),ot(this,"onSessionStarted",void 0),ot(this,"onFirstCheckingFinished",void 0),ot(this,"notifyAlertsChanged",void 0),ot(this,"loadItems",void 0),ot(this,"_toRemovedAlertIdsByClient",void 0),this._getByRawAlertId=a,this.popoverManager=l,this._subs=new Ve.w.Keeper,this._log=o.C8.Logging.getLogger("SDUIManager",o.zW.i.TRACE,o.zW.T.Manager.getColor()),this.findFirstCardWithContent=function(e){return c._sduiManager.findFirstCardWithContent(e)},this.onSessionStarted=function(){return c._sduiManager.onSessionStarted()},this.onFirstCheckingFinished=function(){return c._sduiManager.onFirstCheckingFinished()},this.notifyAlertsChanged=function(){return c._sduiManager.notifyAlertsChanged()},this.loadItems=function(e){return c._sduiManager.loadItems(e)},this._toRemovedAlertIdsByClient=function(e){var t=function(e,t,n){return(0,y.Kg)(We.bZ.isRemovedByTextChange,We.bZ.isDuplicated)(t.alert)?(0,r.zG)(n,s.ij,s.tS((function(e){return e.alert.rawId})),s.wp((function(){return t.alert.rawId})),s.g_((function(){return e}),(function(n){var r,i=We.bZ.isRemovedByTextChange(t.alert)?Ke.i5.TextChange:Ke.i5.RemoveDuplicate;return c._log.debug("[Optimistic update] alert ".concat(We.bZ.State.Type.REMOVED," by ").concat(i," ").concat(He.h.show.show(t))),e.set(i,lt(null!==(r=e.get(i))&&void 0!==r?r:[]).concat([et.j.AlertId.from(n)]))}))):e};return e.pipe(Qe.G(),qe.U((0,r.og)(Ye.p.diff)),qe.U((function(e){return Xe.vh.reduce(new Map,(function(e,n){return t(e,n)}),(function(e,n,r){return t(e,r,n)}),r.yR)(e)})),Je.h((function(e){return(0,r.zG)(Array.from(e.values()),i.xH,(0,y.ff)(i.xb))})))};var d=n.pipe(Je.h(tt.e.isSduiEvent),qe.U(Ke.al.fromSource(Ke.i5.CAPI))),u=(0,r.ls)(Ae.Id.create,this._getByRawAlertId,s.UI((function(e){return et.j.AlertId.from(e.id)})));this._sduiManager=new Ze.G(d,u,l),this.alertIdResolver=u,this.state=this._sduiManager.state,this._subs.push(t.subscribe((function(e){return c._sduiManager.notifyAlertsChanged()})),this._toRemovedAlertIdsByClient(t).subscribe((function(e){return e.forEach((function(e,t){return c.pushRemovedAlerts([e,t])}))})),n.pipe(Je.h(Ue.is("session_started")),Je.h((function(e){return e.isNewSession}))).subscribe((function(e){return c._sduiManager.onSessionStarted()})),n.pipe(Je.h(Ue.is("finish")),Je.h((function(e){return 0===e.revision}))).subscribe((function(e){return c._sduiManager.onFirstCheckingFinished()})))}var t,n,a;return t=e,(n=[{key:"onAlertsRefEmpty",get:function(){return this._sduiManager.onAlertsRefEmpty}},{key:"pushRemovedRoot",value:function(e){this._sduiManager.pushRemovedRoot(e)}},{key:"pushRemovedAlerts",value:function(e){var t=st(e,2),n=t[0],r=t[1];this._sduiManager.pushRemovedAlerts([n,r])}},{key:"pushRemovedDenaliAlerts",value:function(e){var t=st(e,2),n=t[0],r=t[1];this._sduiManager.pushRemovedAlerts([n.map(et.j.AlertId.from),r])}},{key:"pushSwitchView",value:function(e){this._sduiManager.pushSwitchView(e)}},{key:"resolveStrongAlertRefAlerts",value:function(e){return this._sduiManager.resolveStrongAlertRefAlerts(e)}},{key:"flush",value:function(){this._sduiManager.flush()}},{key:"dispose",value:function(){this._subs.dispose(),this._sduiManager.dispose()}}])&&at(t.prototype,n),a&&at(t,a),e}()},54490:(e,t,n)=>{n.d(t,{_:()=>j});var r=n(24332),i=n(90023),a=n(13391),o=n(74822),s=n(55341),l=n(62552),c=n(50887),d=n(64271),u=n(59179),p=n(23841),m=n(13712),h=n(10883),g=n(90572),f=n(954),y=n(78129),v=n(90517),x=n(26308),I=n(31851),b=n(61625),S=n(45178),C=n(97225),w=n(48886),A=n(14944),E=n(58303),k=n(2084),_=n(12518),T=n(73823),M=n(58623),G=n(72111),L=n(13728),D=n(85150),N=n(2868),z=n(29677),P=n(75435);function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){R(e,t,n[t])}))}return e}function B(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),R(this,"onFeedRemove",new o.x),R(this,"onFeedEmpty",new o.x),R(this,"_header",new s.t(1)),R(this,"_footer",new s.t(1)),R(this,"_feeds",new Map),R(this,"_currentCards",a.h.create(N.l.empty)),R(this,"_feed",new l.X(void 0)),R(this,"_feedStack",new l.X([])),R(this,"_cardIdToFocus",new o.x),R(this,"_subs",new c.w.Keeper),R(this,"_log",G.C8.Logging.getLogger("SDUIFeedManager",G.zW.i.TRACE,G.zW.T.Manager.getColor())),R(this,"_forceFeedInternalInfo",new o.x),R(this,"_getFeedContent",(0,i.ls)(this._getFeed,_.UI((function(e){return e.content})),T.MH)),R(this,"_changeFeed",(function(e){n._feed.next(e),(0,i.zG)(e.cards,N.l.applyDiff,w.UI(I.T.recover((function(e){return n._log.error("conflicts on diff apply",e)}))),(function(t){var r=n._currentCards.get(),i=t(r);if(r.entries.size>0&&0===i.entries.size){var a=n._feeds.get(e.feedId);void 0!==a&&n.onFeedEmpty.next(a)}n._currentCards.modify(t)}))}));var r=d.T(this._feedStack.pipe(u.U((function(e){return E.ij(e[e.length-1])})),p.oA,u.U((function(e){return n._getFeedInternalInfo(e.feedId,e.focusedCardId)}))),this._forceFeedInternalInfo),b=d.T(this._feedStack.pipe(m.g("length"),u.U((function(e){return E.ij(e[e.length-1])})),p.oA,u.U((function(e){return n._getFeedInternalInfo(e.feedId,e.focusedCardId)}))),this._forceFeedInternalInfo),S=this._cardIdToFocus.pipe(h.M(this._feedStack.pipe(u.U((function(e){var t;return null===(t=e[e.length-1])||void 0===t?void 0:t.focusedCardId})))),g.h((function(e){var t=U(e,2);return t[0]!==t[1]})),u.U((function(e){return U(e,1)[0]})),h.M(this.feed),u.U((function(e){var t=U(e,2),r=t[0],i=t[1];return n._getFeedInternalInfo(i.feedId,L.j.Item.Id.from(r))}))),C=t.pipe(f.O(D.a.empty),y.G(),u.U((function(e){var t=U(e,2),n=t[0],r=t[1];return D.a.diff(n,r)})),u.U((function(e){return n._processSDUIItems(e)})),h.M(r),u.U((function(e){var t=U(e,2),n=t[0],r=t[1],a=r.feedOrd,o=r.feedFilter;return{feedId:r.feedId,cards:(0,i.zG)(n,x.vh.filter(o,(function(e,t){return o(t)}),o)),feedOrd:a,itemIdToSelect:E.YP}}))),A=d.T(b,S).pipe(h.M(t,this._currentCards),u.U((function(e){var t=U(e,3),n=t[0],r=n.feedOrd,a=n.feedFilter,o=n.feedId,s=n.itemIdToSelect,l=t[1],c=t[2],d=(0,i.zG)(l,N.l.iso.unwrap,(function(e){return(0,i.zG)(e.entries,M.hX(a))}));return{feedId:o,cards:N.l.diffFromEntries(c.entries,d),feedOrd:r,itemIdToSelect:s}})));this._subs.push(d.T(C,A).subscribe(this._changeFeed)),this._subs.push(b.pipe(v.j("header")).subscribe((function(e){return n._header.next(e)}))),this._subs.push(b.pipe(v.j("footer")).subscribe((function(e){return n._footer.next(e)})))}var t,n,P;return t=e,n=[{key:"header",get:function(){return this._header.asObservable()}},{key:"footer",get:function(){return this._footer.asObservable()}},{key:"feed",get:function(){return this._feed.pipe(g.h(b.$K))}},{key:"currentFeed",get:function(){return E.ij(this._feed.getValue())}},{key:"_getFeed",value:function(e){var t=this._feeds.get(e);return void 0===t?_.t$("Cannot switch to feed. Feed with id '".concat(e,"' not found.")):_.F2(t)}},{key:"_getFeedInternalInfo",value:function(e,t){var n=this._getFeedContent(e);return{feedId:e,feedFilter:function(e){var t=W(e.content);return!E.Wi(t)&&n.filtering.reduce((function(e,n){return!1===e?e:(0,i.zG)(t,E.tS((function(e){return E.ij(e[n.property])})),E.g_((function(){return n.condition===z.j2.NotEqualTo}),(function(e){return n.condition===z.j2.EqualTo?e===n.value:e!==n.value})))}),!0)},feedOrd:(0,r.g_)(A.iP())(n.ordering.map((function(e){return(0,i.zG)(A.Mh,A.Uz((0,i.ls)(W,E.tS((function(t){return E.ij(t[e.orderBy])})),E.g_((function(){return Number.MAX_VALUE}),(function(t){return e.direction===z.di.Asc?t:-1*t})))))}))),itemIdToSelect:E.G(t),header:n.header,footer:E.ij(n.footer)}}},{key:"pushFeed",value:function(e,t){var n=this;return(0,i.zG)(this._getFeed(e),_.UI((function(){var r=n._feedStack.getValue();return r=r.concat({feedId:e,focusedCardId:t?L.j.Item.Id.from(t):void 0}),n._feedStack.next(r),null})))}},{key:"popFeed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.YP,t=this,n=this._feedStack.getValue();if(n.length>1)return n=n.slice(0,n.length-1),void this._feedStack.next(n);(0,i.zG)(e,E.g_((function(){return t._log.warn("Invoked `popFeed()` when there are less than 2 feeds in the feed stack, this is a no-op. No fallback feed provided.")}),(function(e){t.pushFeed(L.j.Item.Id.from(e.feedId),e.cardId),t._log.debug("Invoked 'popFeed()' when there are less than 2 feeds in the feed stack. Switching to the provided fallback feed. ".concat(JSON.stringify(e)))})))}},{key:"focusCard",value:function(e){var t=this;return(0,i.zG)(this.currentFeed,_.Yo((function(){return"Cannot focus card when there is no active feed."})),_.UI((function(){return t._cardIdToFocus.next(e),null})))}},{key:"notifyCardFocused",value:function(e){var t=this._feedStack.getValue(),n=t[t.length-1];(0,S.kG)(void 0!==n,"notifyCardFocused: Feed stack cannot be empty."),t=t.slice(0,t.length-1).concat(B($({},n),{focusedCardId:e})),this._feedStack.next(t)}},{key:"_processSDUIItems",value:function(e){var t=this;return x.vh.fromMutation((function(n){(0,i.zG)(e,x.vh.forEach((function(e){void 0!==t._feeds.get(e.id)?(t._feeds.delete(e.id),(0,i.zG)(t.currentFeed,E.hX((function(t){return t.feedId.toString()===e.id.toString()})),k.bw((function(){return t.onFeedRemove.next(e)})))):n.set(e.id,C.t$(e))}),(function(e,r){if("assistantFeed"===r.content.type){var a=r.content;void 0!==t._feeds.get(e.id)?(t._feeds.set(e.id,B($({},r),{content:a})),(0,i.zG)(t.currentFeed,E.hX((function(t){return t.feedId===e.id})),E.UI((function(e){t._header.next(a.header),t._footer.next(E.ij(a.footer))})))):t._log.warn("Feed with id '".concat(e.id,"' not found for update"))}else n.set(e.id,C.Hk(e,r))}),(function(e){if("assistantFeed"===e.content.type){var r=e.content;t._feeds.set(e.id,B($({},e),{content:r}))}else n.set(e.id,C.F2(e))})))}))}},{key:"dispose",value:function(){this._subs.dispose()}}],n&&O(t.prototype,n),P&&O(t,P),e}();function W(e){var t=!0,n=!1,r=void 0;try{for(var i,a=P.ab.traverse(e)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=i.value;if("longFormCard"===o.type)return E.G(o.feedProperties);if("assistantCard"===o.type&&o.properties)return E.G(o.properties)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return E.YP}},85262:(e,t,n)=>{n.d(t,{p:()=>ae});var r=n(92379),i=n(86399),a=n(90023),o=n(24909),s=n(24666),l=n(59179),c=n(74822),d=n(63532),u=n(54553),p=n(70394),m=n(679),h=n(16465),g=n(94032),f=n(36466),y=n(12896),v=n(11017),x=n(28627),I=n(98227),b=n(47311),S=n(58303),C=n(17485),w=n(46516);const A=u.UI.Grid.make((({slots:e})=>r.createElement(C.f.Context.Provider,{value:C.f.emptyWithName("card")},r.createElement(o.F.div,{"data-role":"animation-wrapper",className:w.$4.animationWrapper},e.animatedItemBaseChild))));var E,k,_,T,M=n(23502);!function(e){e.make=function(e){return u.UI.Union.asOption(u.UI.Knot.make(t,{shadeItem:e}))};const t=u.UI.Grid.make((({slots:e,state:t,notify:n})=>r.createElement(o.F.Fragment,null,t.pipe(b.map((({item:i,key:a,className:s})=>r.createElement(o.F.div,{className:s,key:"shade"+t+a,onAnimationEnd:e=>{M.c.get(e.animationName)!==s&&w.bb.get(e.animationName)!==s||n({type:p.eI.Kind.completeTransitionTo,id:i.id,transitionId:i.visualState.transitionId})()}},e.shadeItem)))))))}(E||(E={})),function(e){e.make=function(e){return u.UI.Composite.make(A,u.UI.Knot.make(t,{shade:E.make(e),item:e}))};const t=u.UI.Grid.make((({state:e,slots:t,notify:n})=>r.createElement(o.F.Fragment,null,e.pipe(b.map((({item:e,className:i,hasAnimation:a})=>(a||requestAnimationFrame(n({type:p.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId})),r.createElement(o.F.Fragment,null,t.shade,r.createElement(o.F.div,{className:S.FS(i),key:"expanded"===e.visualState.transition.type?"focused":e.visualState.transition.type,onAnimationEnd:n({type:p.eI.Kind.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),onTransitionEnd:()=>{"presuccess"===e.visualState.transition.type&&n({type:p.eI.Kind.startTransitionTo,id:e.id,transition:{type:"success",clockwise:e.visualState.transition.clockwise}})()}},t.item)))))))))}(k||(k={})),function(e){e.make=function(e){return u.UI.Composite.make(A,u.UI.Knot.make(t,{staticItemChild:e}))};const t=u.UI.Grid.make((({state:e,slots:t})=>r.createElement(o.F.Fragment,null,e.pipe(b.map((e=>r.createElement(o.F.div,{key:e},t.staticItemChild)))))))}(_||(_={})),function(e){e.make=function(e){return u.UI.Knot.make(t,{animatedItem:u.UI.Union.make("animatedItemKind",{static:_.make(e),animating:k.make(e)})})};const t=u.UI.Grid.make((({state:e,slots:t})=>r.createElement(o.F.Fragment,null,e.pipe(b.distinctUntilChanged(((e,t)=>e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type)),b.map((()=>r.createElement(o.F.Fragment,null,t.animatedItem)))))))}(T||(T={}));var G=n(45178);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function N(e,t,n,r){if(n.some((function(e){return"positionedClick"===e.type}))){var i=n[0];switch(i.source){case"collapsedCard":return 1===t.alerts.length?{type:p.lY.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:t.alerts[0]},clickPoint:i.sourcePosition}:{type:p.lY.Type.miniItemClick,id:t.id};case"list":return{type:p.lY.Type.listItemClick,clickPoint:i.sourcePosition};default:return{type:p.lY.Type.miniItemClick,id:t.id}}}else if(n.some((function(e){return"hoverStateChanged"===e.type}))){var a=n[0];return{type:p.lY.Type.hover,id:t.id,kind:a.hovered?"hover":"unhover"}}return{type:p.lY.Type.sduiCardAction,sourceId:e,cardId:t.id,actions:n,scope:r}}var z=function(e){var t=e.inert,n=D(e,["inert"]),i=r.useRef(null);return x.P.useSubscriptionTo(t.pipe(d.b((function(e){var t,n;return e?null===(t=i.current)||void 0===t?void 0:t.setAttribute("inert","true"):null===(n=i.current)||void 0===n?void 0:n.removeAttribute("inert")})))),r.createElement(o.F.div,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){L(e,t,n[t])}))}return e}({mount:i},n))},P=u.UI.Grid.make((function(e){var t=e.view,n=e.slots;return r.createElement(z,{className:g.mk(t("hovered"))(W.listWrapperFocused,W.listWrapper),inert:t("inert")},n.card)})),F=u.UI.Grid.make((function(e){var t=e.view,n=e.slots;return r.createElement(z,{className:W.listWrapperFocused,inert:t("inert")},n.card)})),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.k,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.P;return u.UI.Node.make((function(i){var c=i.view,d=i.notify,u=c("view").pipe(s.x((function(e,t){return e.equals(t)}))),p=[];return r.createElement(o.F.Fragment,null,u.pipe(l.U((function(i){return r.createElement(n,{key:i.id,sduiRootId:i.id,content:i.cardDSL.value,designSystem:t,notify:function(e,t,n){return d(N(e,i,t,n))()},transitions:p,prevContent:i.prevCardDSL,onAnimationEnd:a.Q1,onMount:a.Q1,longFormCardState:{viewKind:e}})}))))}))},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;return u.UI.Knot.make(P,{card:O("collapsed",e,t)})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;return u.UI.Knot.make(F,{card:O("focused",e,t)})},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;return u.UI.Union.make("kind",{collapsed:R(e,t),focused:$(e,t),hidden:u.UI.Node.empty})},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;return T.make(B(e,t))},j={background:f.I.Background.Base.Default,borderRadius:I.ux.rem(y.xB)},W=I.ux.stylesheet({listWrapper:[j,{border:"0.5px solid ".concat(f.I.Border.Base.Default)}],listWrapperFocused:[j,v.q_]});function H(e){switch(e){case"focused":case"expanded":case"success":case"presuccess":case"feedback_form":return"focused";case"added":case"rendered":return"collapsed";case"hidden":case"removed":case"muted":return"hidden";default:return(0,G.vE)(e)}}var Y,V=n(84308),Q=n(90517),q=n(90572),J=n(954),X=n(25188),Z=n(23841);function K(e,t,n,r){return u.Z.composeUnion({Some:u.Z.composeKnot({value:u.Z.composeKnot({root:()=>e.pipe(b.map((e=>(0,a.zG)(ee(r)(e),S.UI((t=>({item:e,key:n(e),className:t})))))),Z.oA),shadeItem:t})}),None:()=>b.of(S.YP)},(t=>b.mergeStatic(e.pipe(b.map(ee(r))),t.pipe(b.filter((e=>"root"===e.action.action.key&&e.action.action.action.type===p.eI.Kind.completeTransitionTo)),b.switchMap(g.b2.rafScheduler),b.mapTo(S.YP)))))}function ee(e){return t=>(0,a.zG)(t.visualState.from,S.tS((()=>e(t.visualState).shade)))}function te(e,t,n,r,i){return u.Z.composeKnot({root:()=>e.pipe(b.map((e=>{const{main:t,shade:n}=i(e.visualState);return{item:e,className:t,hasAnimation:S.pC(t)||S.pC(n)}}))),shade:K(e,n,r,i),item:t})}function ne(e,t){return u.Z.composeKnot({root:()=>e.pipe(l.U((e=>e.visualState.transition.type))),staticItemChild:t})}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){e.flow=function(e,t,n,r=(e=>e.id),i=X.CE.toOption(X.SA)){return u.Z.composeKnot({root:()=>e,animatedItem:u.Z.composeUnion({static:ne(e,t),animating:te(e,t,n,r,i)},(()=>e.pipe(b.map((e=>({animatedItemKind:e.visualState.incomplete?"animating":"static"}))))))})},e.extend=function(e){return u.Z.extendActions(b.tap((t=>{const n=t.action;if("animating"===n.key)if("root"===n.action.key)e(n.action.action);else if("shade"===n.action.key){const t=n.action.action.action.action;"root"===t.key&&e(t.action)}})))}}(Y||(Y={}));var ae,oe=function(e){return function(t){var n=function(n){return V.a([n.pipe(Q.j("action"),d.b((function(t){return e.next(t)})),q.h((function(e){return"hover"===e.type})),l.U((function(e){return"hover"===e.kind})),J.O(!1)),t]).pipe(l.U((function(e){var t=ie(e,2),n=t[0],r=t[1];return{root:{inert:r.positionState.inert,hovered:n},card:{kind:"alertRefSDUI",view:r}}})))},r={collapsed:n,focused:n,hidden:u.Z.emptyFlow},i=u.Z.composeUnion(r,(function(){return t.pipe(l.U((function(e){return{kind:H(e.visualState.transition.type)}})))})),o=u.Z.composeUnion(r,(function(){return t.pipe(l.U((function(e){return{kind:(0,a.zG)(e.visualState.from,S.g_((function(){return"collapsed"}),H))}})))}));return Y.flow(t,i,o)}};!function(e){e.ListCard=O,e.AnimatedListCard=U,e.animatedListCardFlowFactory=oe,e.CollapsedCardWrapper=P,e.FocusedCardWrapper=F,e.SingleCard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;return u.UI.Node.make((function(n){var c=n.view,d=n.notify,u=c("view");return r.createElement(o.F.Fragment,null,u.pipe(s.x((function(e,t){return e.equals(t)})),l.U((function(n){return r.createElement(t,{key:n.id,sduiRootId:n.id,content:n.cardDSL.value,designSystem:e,notify:function(e,t,r){return d({type:p.lY.Type.sduiCardAction,sourceId:e,cardId:n.id,actions:t,scope:r})()},transitions:i.Sb(n.transitions),prevContent:n.prevCardDSL,onAnimationEnd:d({type:p.eI.Kind.completeTransitionTo,id:n.id,transitionId:n.visualState.transitionId}),onMount:a.Q1})}))))}))},e.SquashedListCard=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.P;return u.UI.Node.make((function(n){var r=n.view,i=n.notify,o=r("view").pipe(s.x((function(e,t){return e.equals(t)}))),l=new c.x;return x.P.useSubscriptionTo(l.pipe(d.b((function(e){return i(e)()})))),u.UI.mount(U(e,t),(0,a.zG)(oe(l)(o),Y.extend((function(e){return l.next(e)}))))}))}}(ae||(ae={}))},44046:(e,t,n)=>{n.d(t,{p:()=>u});var r=n(90023),i=n(58303),a=n(2084),o=n(54553),s=n(57576),l=n(525),c=n(84714),d=n(59179);function u(e,t){return o.Z.composeKnot({content:o.Z.fromSideEffect(r.Q1,m(e,t)),root:p()})}var p=function(){return function(){return c.of({})}};function m(e,t){var n=e.view(t.getActiveAlertsCount).view((function(e){return 0===e})),o=e.view(l.v.Prism.getFeedItems());return e.pipe(d.U(s.In.getActiveItem),d.U((function(e){if(i.Wi(e))return{root:"empty",card:{kind:"empty"}};var s=a.MH(e),l=o.get(),c=(0,r.zG)(l.getAt(l.size-1),i.Gg((function(e){return e.id===s.id})));return{root:s.id,card:t.viewState(n.get(),c)(s)}})))}},15074:(e,t,n)=>{n.d(t,{c:()=>r});var r,i=n(92379),a=n(24909),o=n(58303),s=n(54553);!function(e){var t,n=function(e){return s.UI.Knot.make(l,{card:e})};!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.assistant=function(e){return s.UI.Knot.make(r,{content:n(e)})};var r=e.AssistantBox=s.UI.Grid.make((function(e){var n=e.notify,r=e.slots;return i.createElement(a.F.div,{id:"assistant-feed-wrapper",mount:function(e){return n({kind:t.onMount,element:o.ij(e)})()}},r.content)}));e.card=n;var l=e.IdProvider=s.UI.Grid.make((function(e){var t=e.slots,n=e.state;return i.createElement(a.F.div,{"data-id":n},t.card)}))}(r||(r={}))},67311:(e,t,n)=>{n.d(t,{N:()=>r});var r,i=n(86399),a=n(90023),o=n(59179),s=n(23841),l=n(10883),c=n(90572),d=n(58303),u=n(57576),p=n(74925);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){!function(e){!function(e){e.fromSduiCardActions=(0,a.ls)(o.U((function(e){var t=(0,a.zG)(e.actions,i.hX(p.zx.Action.isTransitionAction));return e.actions.find((function(e){return"prevCard"===e.type}))?d.G({kind:"prevClicked",transitions:t}):e.actions.find((function(e){return"nextCard"===e.type}))?d.G({kind:"nextClicked",transitions:t}):d.YP})),s.oA)}(e.Events||(e.Events={}));e.sideEffect=function(e,t,n){return{id:"SingleCardAssistant.prevNextNavigation",when:u.nL.Effect.When.isSidebarOpen,what:u.nL.Effect.ItemsApplicator.create((0,a.zG)(e,l.M(t.pipe(c.h(u.nL.hasCards))),o.U((function(e){var t=h(e,2),n=t[0],r=t[1];return(0,a.zG)(r.currentLens.cardIndex,d.tS((function(e){return r.currentLens.items.getAt("nextClicked"===n.kind?e+1:e-1)})))})),s.oA,o.U((function(e){return function(t){return u.nL.Prism.getLensWithItems().modify(n.selectItemById(e.id),t)}}))))}}}(e.PrevNextNavigation||(e.PrevNextNavigation={}))}(r||(r={}))},12995:(e,t,n)=>{n.d(t,{i:()=>r});var r,i=n(90023),a=n(58303),o=n(2084),s=n(61625),l=n(12518),c=n(72111),d=n(57576),u=n(39491),p=n(75435),m=n(29677);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}function y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}!function(e){var t=(0,s.HP)(c.C8.Logging.getLogger);!function(e){e.create=function(e){var n=t("SingleCardAssistant.Transformers.disablePrevNextButtons");return function(t){var r=t.state,s=t.metadata;if(!d.nL.hasItems(r))return n.trace("state has no feed items, returning original state"),l.t$({state:r,metadata:s});var c=r;return(0,i.zG)(c.currentLens.cardIndex,a.tS((function(e){return(0,i.zG)(d.In.getActiveItem(r.currentLens),a.UI((function(t){return(0,i.bc)(t,e)})))})),a.UI((function(t){var n=v(t,2),i=n[0],s=n[1];return d.nL.Prism.getLensWithItems().modify((function(t){if(!u.e.isSDUIItem(i)||!a.pC(i.cardDSL))return t;var n=e.clone(i),l=o.MH(n.cardDSL),c=!1,d=p.ab.map(l,(function(e){if("button"===e.type&&e.name.value===m.MU.ButtonPrev){var t=0===s?m.BN.Disabled:m.BN.Enabled;return c=c||t!==e.state,y(f({},e),{state:t})}if("button"===e.type&&e.name.value===m.MU.ButtonNext){var n=s===r.currentLens.items.size-1?m.BN.Disabled:m.BN.Enabled;return c=c||n!==e.state,y(f({},e),{state:n})}return e}));return a.pC(d)&&c?(n=Object.assign(n,{cardDSL:d}),y(f({},t),{items:t.items.add(n)})):t}),c)})),a.fS((function(){return r})),(function(e){return l.t$({state:e,metadata:s})}))}}}(e.DisablePrevNextButtons||(e.DisablePrevNextButtons={}))}(r||(r={}))},93259:(e,t,n)=>{n.d(t,{Q:()=>r});var r,i=n(92379),a=n(54553);!function(e){e.Empty=a.UI.Node.make((function(){return i.createElement("div",null)}))}(r||(r={}))},3058:(e,t,n)=>{n.d(t,{P:()=>r});var r,i=n(86399),a=n(90023),o=n(59179),s=n(65810),l=n(84825),c=n(61625),d=n(26308),u=n(45178),p=n(58303),m=n(21147),h=n(12518),g=n(59833),f=n(29677),y=n(80388),v=n(17690),x=n(5412),I=n(88367),b=n(91320),S=n(43640),C=n(39491),w=n(87368),A=n(57576),E=n(41816),k=n(26352);function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}function M(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}!function(e){var t,n=function(e){return"".concat(e.id)};e.isAlertRefSDUIItem=function(e){return e.kind===_},function(e){var t=function(e){return"strongAlertRef"===e.type};e.isBulkAcceptSDUI=function(e){return(0,a.zG)(e.cardDSL,p.Gg((0,c.W9)(t,(function(e){var t;return(null===(t=e.name)||void 0===t?void 0:t.value)===f.MU.StrongAlertRefBulkAccept}))))},e.isBulkDismissSDUI=function(e){return(0,a.zG)(e.cardDSL,p.Gg((0,c.W9)(t,(function(e){var t;return(null===(t=e.name)||void 0===t?void 0:t.value)===f.MU.StrongAlertRefBulkDismiss}))))},e.isLongFormCardSDUI=(0,a.ls)((function(e){return e.cardDSL}),p.Gg((function(e){return"longFormCard"===e.type})))}(t=e.Item||(e.Item={})),function(e){e.BulkDismiss="bulk_dismiss",e.BulkAccept="bulk_accept"}(e.Features||(e.Features={}));var r,_=e.Kind="AlertRefSDUIItem",G=m.f7((function(e,t){return e.hashCode()===t.hashCode()&&S.Z.eq.equals(e.positionState,t.positionState)&&k.t.eq.equals(e.visualState,t.visualState)&&i.Eh(y.$.eq).equals(e.alerts,t.alerts)&&e.activeAlertIndex===t.activeAlertIndex})),L=e.idEq={equals:function(e,t){return m.yv.equals(e,t)}},D=e.eq={equals:function(e,t){return L.equals(e.id,t.id)&&G.equals(e,t)&&C.e.eq.equals(e,t)}};e.getId=n,function(e){e.createItem=function(e,t,n){return{id:e,kind:_,alerts:n,activeAlertIndex:0,cardDSL:p.G(t),prevCardDSL:p.YP,transitions:[],positionState:s.s.PositionState.empty,visualState:l.o.VisualState.initial({type:"added",clockwise:!0},!0),renderOptions:I.j.defaultOptions,equals:function(e){return D.equals(this,e)},hashCode:function(){var e=this;return(0,b.NO)({id:e.id,alertsCount:e.alerts.length,transitions:(0,b.AC)(e.transitions.map((function(e){return e.toName})).join("")),activeAlertIndex:e.activeAlertIndex})}}},e.setActiveAlertId=function(e){return function(t){return(0,a.zG)(t.alerts,i.cx((function(t){return t.id===e})),p.UI((function(e){return M(T({},t),{activeAlertIndex:e})})))}},e.setActiveHighlightIndex=function(e){return function(t){return(0,a.zG)(t,p.DT(G),p.wp((function(){return L(t)})),p.UI((function(t){return M(T({},t),{activeHighlightIndex:e})})))}};var n=l.o.Capabilities.getPojoUpdates(),o=e.pojoSDUI=C.e.Capabilities.getPojoUpdates(),d=s.s.Capabilities.getPojoUpdates(),m=e.changePosition=d.setPosition,h=e.updateSDUIState=o.setSDUIState,f=e.sduiSelect=C.e.Capabilities.getSelect(h),x=function(e){return function(t){return(0,a.zG)(e,p.Gg((function(e){return t.id===e.id})))?t:m(s.s.PositionState.invalidateHeight(t.positionState))(t)}},S=function(e,t){return(0,a.ls)(f(e,t),E.transitionTo({type:"focused",clockwise:!1}),x(e))},A=(e.select={selectByAlert:function(e,t,n){return S(e,n)},select:S,unselect:function(e){return(0,a.ls)(E.transitionTo({type:"rendered",clockwise:!1}),x(e))}},e.hasAlerts={hasActiveAlert:function(e){return(0,a.zG)(e,p.DT((0,c.ff)(t.isBulkDismissSDUI)),p.tS((function(e){return p.ij(e.alerts[e.activeAlertIndex])})),p.UI((function(t){return{alert:t,highlightIndex:G(e)?e.activeHighlightIndex:0}})))},hasAlert:function(e){return function(t){return void 0!==t.alerts.find((function(t){return t.id===e}))}},isSelectableByAlert:function(e){return function(t){return 1===t.alerts.length&&t.alerts[0].id===e.alert.id}}},C.e.Capabilities.getCompleteTransition(h)),E=e.animatable={completeTransition:function(e){return function(t){return(0,a.zG)(t,n.setVisualState(l.o.VisualState.complete(t.visualState,e)),A)}},transitionTo:function(e){return function(t){var r=l.o.VisualState.to(t.visualState,e);return n.setVisualState(r)(t)}},changeVisualState:n.setVisualState},k=e.remove={remove:function(e,t){return function(n){return e(n)?E.transitionTo({type:"removed",clockwise:t(n)})(n):n}}};e.removeAlert={removeAlertFromItem:function(e){return function(t){var n=new Set(e.map((function(e){return e.id}))),r=t.alerts.filter((function(e){return!n.has(e.id)}));return(0,a.zG)(M(T({},t),{alerts:r}),(function(e){return 0===e.alerts.length?E.transitionTo({type:"removed",clockwise:!1})(e):e}))}}},e.updateWithAlert={updateWithAlerts:function(e){return function(t){var n=new Set(t.alerts.map((function(e){return e.id}))),r=new Set(e.map((function(e){return e.id}))),i=(0,a.zG)(e,g.uK((function(e){return n.has(e.id)}))),o=i.left,s=i.right,l=function(e,t){switch(e.state.type){case v.bZ.State.Type.REGISTERED:return t;case v.bZ.State.Type.REMOVED:return"focused"===t.visualState.transition.type&&0===t.alerts.length?k.remove(a.W8,a.W8)(t):t;case v.bZ.State.Type.APPLIED:case v.bZ.State.Type.BEING_APPLIED:return k.remove(a.W8,a.W8)(t);default:return(0,u.vE)(e.state)}},c=t,d=!0,p=!1,m=void 0;try{for(var h,f=s[Symbol.iterator]();!(d=(h=f.next()).done);d=!0){c=l(h.value,c)}}catch(e){p=!0,m=e}finally{try{d||null==f.return||f.return()}finally{if(p)throw m}}return M(T({},c),{alerts:c.alerts.filter((function(e){return r.has(e.id)})).concat(o.map(y.$.fromModel))})}}},e.disposable={isScheduledToDispose:function(e){return"removed"===e.visualState.transition.type}};function G(e){return"activeAlert"in e&&"activeHighlightIndex"in e}function L(e){return(0,a.zG)(r.hasAlerts.hasActiveAlert(e),p.UI((function(t){return M(T({},e),{activeAlert:t.alert,activeHighlightIndex:t.highlightIndex,meta:w.n.empty(void 0)})})))}e.isAlertItem=G,e.toAlertItem=L}(r=e.Capabilities||(e.Capabilities={})),function(e){var t=function(e,t,n){return function(i){var a=r.createItem(e,t,n.map(y.$.fromModel)),o=i.items.add(a),s=A.In.getActiveItemIndex(o)(i);return M(T({},i),{items:o,cardIndex:s})}};e.createSDUIFeedSideEffect=function(e,s,l,c){return{id:"sduiFeedEffect",when:x.R.isWithAlertsId,what:A.nL.Effect.ItemsApplicator.create(s.pipe(o.U((function(o){var s=o.cards,u=o.feedOrd,m=o.itemIdToSelect;return function(o){var g=(0,a.zG)(s,d.vh.filter((function(e){return o.currentLens.items.has(n(e))}),a.W8,a.W8),d.vh.reduce(o.currentLens,(function(t,r){return function(e,t){return function(n){var r=n.items.keys().indexOf(e),i=n.items.remove(e),o=(0,a.zG)(n.cardIndex,p.UI((function(e){return e>r?e-1:e})),p.tS(p.DT((function(e){return p.pC(i.getAt(e))}))),p.g_((function(){return(0,a.zG)(t.findNextAlert(n),p.UI((function(e){return t.selectItemByAlert(e)(n)})),p.tS(p.DT((function(e){return(0,a.zG)(e.cardIndex,p.g_((function(){return!0}),(function(e){return p.pC(i.getAt(e))})))}))),p.fS((function(){return M(T({},n),{cardIndex:p.YP})})))}),(function(e){return M(T({},n),{cardIndex:p.G(e)})})));return M(T({},o),{items:i})}}(n(r),e)(t)}),(function(e,o,s){return(0,a.zG)(s.alertIds,i.fw(p.Kw)((function(e){return(0,a.zG)(c.getById("".concat(e)))})),p.g_((function(){return e}),(function(i){return function(e,n,i){return function(o){var s=(0,a.zG)(o.items.update(e,(0,a.ls)(r.updateWithAlert.updateWithAlerts(i),r.pojoSDUI.setDSL(p.G(n)))),h.fS((function(){return t(e,n,i)(o).items})));return M(T({},o),{items:s})}}(n(s),s.content,i)(e)})))}),(function(e,r){return(0,a.zG)(r.alertIds,i.fw(p.Kw)((function(e){return(0,a.zG)(c.getById("".concat(e)))})),p.g_((function(){return e}),(function(i){return t(n(r),r.content,i)(e)})))}))),f=l(u),y=g.items.reduce((function(e,t){return e.add(t)}),E.aW.empty((function(e){return e.id}),f.compare)),v=M(T({},g),{items:y,itemsOrd:f}),x=(0,a.zG)(m,p.tS((function(e){var t=y.find((function(t){return t.id===e}));return p.pC(t)?p.G(e):(0,a.zG)(y.getAt(0),p.UI((function(e){return e.id})))})),p.g_((function(){return v}),(function(t){return e.selectItemById(t)(v)})));return o.patch({currentLens:x,switchOrder:"lensOrder"})}}))))}}}(e.SideEffects||(e.SideEffects={}))}(r||(r={}))},39491:(e,t,n)=>{n.d(t,{e:()=>a});var r,i,a,o=n(86399),s=n(90023),l=n(34349),c=n(36661),d=n(14944),u=n(58303),p=n(21147),m=n(79484),h=n(29677),g=n(45178);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){f(e,t,n[t])}))}return e}function v(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}!function(e){e.getSduiSingleCardTransitions=function(e,t,n){var r=(0,s.zG)(e,u.g_((function(){return-1}),(function(e){return n.compare(e,t)})));switch(r){case-1:return[i.Actions.slideContentLeft,i.Actions.slideTitleLeft];case 1:case 0:return[i.Actions.slideContentRight,i.Actions.slideTitleRight];default:(0,g.vE)(r)}}}(r||(r={})),function(e){!function(e){e.slideContentLeft={type:"transition",fromName:"content",toName:"content",animateFrom:h.c1.SlideLeft,animateTo:h.c1.SlideLeft},e.slideTitleLeft={type:"transition",fromName:"title",toName:"title",animateFrom:h.c1.SlideLeft,animateTo:h.c1.SlideLeft},e.slideContentRight={type:"transition",fromName:"content",toName:"content",animateFrom:h.c1.SlideRight,animateTo:h.c1.SlideRight},e.slideTitleRight={type:"transition",fromName:"title",toName:"title",animateFrom:h.c1.SlideRight,animateTo:h.c1.SlideRight}}(e.Actions||(e.Actions={}))}(i||(i={})),function(e){var t=function(e){return"cardDSL"in e&&"prevCardDSL"in e&&"transitions"in e};e.isSDUIItem=t;var n=c.n(l.z2)(m.VYI),i=c.n(l.z2)(m.aUM);e.eq=p.f7((function(e,r){return t(e)&&t(r)&&u.Eh(n).equals(e.cardDSL,r.cardDSL)&&u.Eh(n).equals(e.prevCardDSL,r.prevCardDSL)&&o.Eh(i).equals(e.transitions,r.transitions)})),e.getOrd=(0,s.ls)(u.pR,d.Uz((function(e){return e.cardDSL})));!function(e){e.getPojoUpdates=function(){return{setSDUIState:function(e,t,n){return function(r){return v(y({},r),{cardDSL:e,prevCardDSL:t,transitions:n})}},setDSL:function(e){return function(t){return v(y({},t),{cardDSL:e,transitions:[]})}}}},e.getSelect=function(e){return function(n,i){return function(a){return(0,s.zG)(n,u.hX(t),u.hX((function(e){return u.pC(a.cardDSL)||u.pC(e.cardDSL)})),u.UI((function(t){return e(a.cardDSL,t.cardDSL,r.getSduiSingleCardTransitions(u.G(t),a,i))(a)})),u.fS((function(){return a})))}}},e.getCompleteTransition=function(e){return function(n){return t(n)?e(n.cardDSL,u.YP,[])(n):n}}}(e.Capabilities||(e.Capabilities={}))}(a||(a={}))},45806:(e,t,n)=>{n.d(t,{q:()=>U});var r=n(90023),i=n(45178),a=n(58303),o=n(2084),s=n(12518),l=n(59833),c=n(86399),d=n(72111),u=n(73799),p=n(17690),m=n(5412),h=n(70394),g=n(1067),f=n(57576),y=n(525),v=n(50887),x=n(74822),I=n(24666),b=n(59179),S=n(94032),C=n(90572),w=n(47311),A=n(36344),E=n(65810),k=n(13728),_=n(80388),T=n(39491),M=n(3058),G=n(51867),L=n(13391);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}var B,U=function(){function e(t,n,i,o,s,l,p,m){var h,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new u.A,y=this;N(this,e),P(this,"_checksFeedCapabilities",void 0),P(this,"_lensState",void 0),P(this,"_alertReader",void 0),P(this,"_capiClient",void 0),P(this,"_platformEnvironment",void 0),P(this,"_sduiViewModel",void 0),P(this,"sduiActionEvents",void 0),P(this,"_sduiAlertIdResolver",void 0),P(this,"_log",void 0),P(this,"_subs",void 0),P(this,"actionEvents",void 0),P(this,"_focusedItem",void 0),P(this,"_mapToDenaliAlerts",void 0),this._checksFeedCapabilities=n,this._lensState=i,this._alertReader=l,this._capiClient=p,this._platformEnvironment=g,this._log=d.C8.Logging.getLogger("SDUICardsViewModelImpl",d.zW.i.DEBUG),this._subs=new v.w.Keeper,this.actionEvents=new x.x,this._focusedItem=this._lensState.view((function(e){return f.nL.hasItems(e)?(0,r.zG)(e.currentLens.cardIndex,a.tS((function(t){return e.currentLens.items.getAt(t)}))):a.YP})),this._mapToDenaliAlerts=function(e){return(0,r.zG)(e,c.fw(a.Kw)((function(e){return y._alertReader.getById(y._mapToDenaliAlertId(e))})),a.hX(c.Od))},this._sduiAlertIdResolver=(0,G.X)(o.alertIdResolver,this._log);var C=L.h.create(a.YP);this._sduiViewModel=new G.x(t,o,s,p,C,g),this.sduiActionEvents=this._sduiViewModel.sduiActionEvents,(h=this._subs).push.apply(h,R(this._integrateCardsViewModel(m)).concat([(0,r.zG)(this._focusedItem,I.x((function(e,t){return a.Eh(E.s.eqById).equals(e,t)})),b.U(a.tS(a.DT(T.e.isSDUIItem))),b.U(a.UI((function(e){return k.j.Item.Id.from(e.id)})))).subscribe(S.wW(C)),this._sduiViewModel]))}var t,n,A;return t=e,n=[{key:"_integrateCardsViewModel",value:function(e){return[this.actionEvents.subscribe(e.actionEvents),e.actionEvents.pipe(C.h(g.t.isSduiCardAction)).subscribe(this.sduiActionEvents)]}},{key:"_sduiActionsHandler",value:function(){var e=this;return this.sduiActionEvents.pipe(w.skipBy(g.t.eq),b.U((function(t){var n=t.cardId,l=t.actions,d=t.scope;return function(t){return e._log.info("sdui card action:",{cardId:n,actions:l}),(0,r.zG)(l,c.u4(t,(function(t,l){switch(l.type){case"notify":case"nextCard":case"prevCard":case"openSettings":case"openToneDetector":case"openFeedback":case"upgradeToPremium":case"openLearnMore":case"transition":case"openCreateSnippetModal":case"nativeOpenAssistant":case"showHighlights":case"hideHighlights":case"selectAlternative":case"openLink":case"copyToClipboard":case"pushAssistantFeed":case"popAssistantFeed":case"focusAssistantCard":case"switchView":case"newRevision":case"stopApplyingAlerts":case"closePopover":case"interactPopover":case"openGrammarlyGo":case"enablePlagiarismCheck":case"disablePlagiarismCheck":case"enableWritingExpertCheck":case"disableWritingExpertCheck":case"openPerformanceScore":case"nativeOpenUserSatisfactionFeedback":case"enableAudienceAdaptCheck":case"disableAudienceAdaptCheck":case"enableAiStudioCheck":case"disableAiStudioCheck":return t;case"removeRoot":return(0,r.zG)(t.currentLens.items.get(n),a.UI((function(e){return e.value})),a.UI(e._checksFeedCapabilities.remove(r.W8,r.W8)),a.UI((function(e){return f.nL.Prism.getLens().compose(y.v.Prism.items).set(t.currentLens.items.modifyWith([[e.id,e]],(function(){return e})),t)})),a.fS((0,r.a9)(t)));case"applyAlerts":return(0,r.zG)(t.currentLens.items.get(n),a.UI((function(e){return e.value})),s.Yo((function(){return new Error("unknown cardId: ".concat(n))})),s.Pd((function(t){return e._log.error("error in processing applyAlerts action",t)}),(function(t){(0,r.zG)(e._sduiAlertIdResolver(d.alertRefs),o.bw((function(n){requestAnimationFrame((function(){(0,r.zG)(n,e._mapToDenaliAlerts,a.UI(c.UI((function(n){return e.actionEvents.next({type:h.lY.Type.alertApply,id:t.id,eligibleForSurvey:n.acceptSurvey,eligibleForGbPrompt:n.gbPrompt,alertId:n.id,alternativeIndex:l.alternativeIndex,cardType:h.lY.getCardType({activeAlert:_.$.fromModel(n)})})}))))}))})))})),(function(){return t.patch({alertSource:p.l$.sidebar})}));case"closeCard":return t.patch({currentLens:f.nL.hasItems(t)?e._checksFeedCapabilities.unselectItem()(t.currentLens):t.currentLens,switchOrder:"lensOrder",alertSource:p.l$.sidebar});case"removeAlerts":return(0,r.zG)(e._sduiAlertIdResolver(d.alertRefs),o.bw((function(t){requestAnimationFrame((function(){(0,r.zG)(t,e._mapToDenaliAlerts,a.UI(c.UI((function(t){return e.actionEvents.next({type:h.lY.Type.alertIgnore,id:n,alertId:t.id,eligibleForSurvey:t.dismissSurvey})}))))}))}))),t.patch({alertSource:p.l$.sidebar});case"highlightAlert":return(0,r.zG)(e._sduiAlertIdResolver(d.alertRefs),a.tS(e._mapToDenaliAlerts),a.UI((function(e){if(!f.nL.hasItems(t))return t;var n=function(e,t){return function(n){return(0,r.zG)(n.items.update(e,(function(e){return(0,r.zG)(e,a.DT(M.P.isAlertRefSDUIItem),a.tS(M.P.Capabilities.setActiveAlertId(t)),a.tS(M.P.Capabilities.setActiveHighlightIndex(l.highlightIndex)),a.fS((0,r.a9)(e)))})),s.g_((function(){return n}),(function(e){return F(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P(e,t,n[t])}))}return e}({},n),{items:e})})))}},i=e[0];return(0,r.zG)(f.In.getActiveItem(t.currentLens),a.UI((function(e){return f.nL.Prism.getLensWithItems().modify(n(e.id,i.id),t)})),a.UI((function(e){return e.patch({alertSource:p.l$.sidebar})})),a.fS((0,r.a9)(t)))})),a.fS((0,r.a9)(t)));default:(0,i.L0)(l)}})))}})))}},{key:"getApplicatorEffects",value:function(){return(0,r.zG)([[this._sduiActionsHandler(),"sduiActions"]],l.UI((function(e){var t=O(e,2),n=t[0],r=t[1];return{id:"cardsViewModel.effects.".concat(r),when:m.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(n)}})))}},{key:"onAssistantClose",value:function(){this._sduiViewModel.onAssistantClose()}},{key:"dispose",value:function(){this._subs.dispose()}},{key:"_mapToDenaliAlertId",value:function(e){return"".concat(e)}}],n&&z(t.prototype,n),A&&z(t,A),e}();!function(e){e.itemsLens=f.nL.Prism.getLens().compose(y.v.Prism.items),e.createLegacy=function(e,t,n,i,l,c,d){var p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new u.A,m={enablePlagiarismSearch:function(){return Promise.resolve(s.F2(void 0))},disablePlagiarismSearch:function(){return Promise.resolve(s.F2(void 0))},enableWritingExpert:function(){return Promise.resolve(s.F2(void 0))},disableWritingExpert:function(){return Promise.resolve(s.F2(void 0))},requestWritingExpert:function(){return function(){return Promise.resolve(s.F2(void 0))}}};return(0,r.zG)(o.gz(e,i,l),a.g_((function(){return new B.Mock}),(function(e){var r=O(e,3),i=r[0],a=r[1],o=r[2];return new U(i,t,n,a,o,c,m,d,p)})))};e.Mock=function e(){N(this,e),P(this,"actionEvents",new x.x),P(this,"sduiActionEvents",new x.x),P(this,"sideEffect",{id:"cardsViewModelMock",when:m.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(A.E)}),P(this,"getApplicatorEffects",(function(){return[{id:"cardsViewModelMock",when:m.R.isWithAlertsId,what:f.nL.Effect.Applicator.create(A.E)}]})),P(this,"onAssistantClose",r.Q1),P(this,"dispose",r.Q1)}}(B||(B={}))}}]);