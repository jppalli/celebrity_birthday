(self.webpackChunk=self.webpackChunk||[]).push([[9513],{39871:(e,t,n)=>{n.d(t,{Q:()=>c,f:()=>l});var o=n(84951),i=n(25569);if(5526!=n.j)var s=n(61339);var a=n(99902);function r(){document.body.dataset.grAaaNotchConnectionId||(document.body.dataset.grAaaNotchConnectionId=`${Date.now()}-${Math.random()}`);const e=document.body.dataset.grAaaNotchConnectionId;return{toServer:`gr-fieldIntegration-to-aaaNotch-to-server-${e}`,toClient:`gr-fieldIntegration-to-aaaNotch-to-client-${e}`}}const c=e=>{const t=r();return new a.S((0,i.NH)(new o.E(self.document,t.toServer,t.toClient)),{setCheckingStatus:(t,n)=>{e.setCheckingStatus(n)},setTextFieldContent:(t,n)=>{e.setTextFieldContent(n)},setSelectedTextFromIntegration:(t,n)=>{e.setSelectedTextFromIntegration(n)}})},l=()=>{const e=r();return new s.X(new o.E(self.document,e.toClient,e.toServer))}},57076:(e,t,n)=>{n.r(t),n.d(t,{initAssistant:()=>me});var o,i=n(13391),s=n(8261);!function(e){e.toClient="cs-to-side-panel-to-client",e.toServer="cs-to-side-panel-to-server"}(o||(o={}));var a=n(61339),r=n(8061);class c extends a.X{constructor(e){super(new r.d(e,o.toClient,o.toServer))}}var l=n(78542);function d(e){return e.nodeType===Node.ELEMENT_NODE}const _=["SCRIPT","STYLE","NOSCRIPT"],u=["style","role","title"];function h(e){return!_.includes(e.nodeName)}function g(e){return function(e){return e instanceof HTMLElement}(e)&&(e.checkVisibility()||function(e){return"contents"===self.getComputedStyle(e).display}(e))}function p(e={}){const{tag:t="div",role:n=null,text:o,title:i=null,attributes:s,children:a=[]}=e,r={tag:t,role:n,text:o,title:i,attributes:s,children:a},c=Object.entries(r).filter((([,e])=>Boolean(e)));return Object.fromEntries(c)}const m=new Set(["a","article","aside","button","details","dialog","figcaption","figure","footer","form","header","label","main","mark","nav","section","summary","time"]);function b(e,t={includeAttributes:!1}){const{includeAttributes:n}=t;if(!h(e)||"BODY"!==e.nodeName&&!g(e))return null;let o=p({tag:e.nodeName.toLocaleLowerCase(),role:d(e)?e.getAttribute("role"):null,title:d(e)?e.getAttribute("title"):null});if(n&&d(e)){const t=function(e){return Array.from(e.attributes).filter((e=>!u.includes(e.name)))}(e),n={};t.forEach((e=>{n[e.name]=e.value})),o={...o,attributes:n}}"TEXTAREA"===e.nodeName&&(o={...o,text:e.value});const{children:i,textCount:s,elementCount:a}=function(e,t){var n,o;let i=0,s=0;const a=[];for(const r of e.childNodes)if(r.nodeType===Node.TEXT_NODE)(null===(n=r.textContent)||void 0===n?void 0:n.trim())&&(a.push(p({tag:r.nodeName.toLocaleLowerCase(),text:null===(o=r.textContent)||void 0===o?void 0:o.trim()})),i+=1);else if(h(r)){const e=b(r,t);e&&(a.push(e),s+=1)}return{children:a,textCount:i,elementCount:s}}(e,t),r=m.has(o.tag),c="role"in o&&null!==o.role;return r||c||0!==s||1!==a?o.text||0!==i.length?{...o,children:i}:null:i[0]}class C{extractContext(e){const{logger:t=l.Y.create("assistant.context.extractor")}=e,n=function(e,t={}){const{includeAttributes:n=!1,logger:o}=t,i=performance.now(),s=b(e,{includeAttributes:n}),a=performance.now()-i;null==o||o.debug("converted JSON representation",s);const r=JSON.stringify(s);return null==o||o.debug("converted DOM to JSON",{content:r,size:(new TextEncoder).encode(r).length,duration:a}),{content:s,isCompressed:!1}}(e.document.body,{logger:t});return{kind:"default",origin:e.document.location.origin,title:e.document.title,root:n.content}}}class w{constructor(e){this._logger=l.Y.create("contextExtractorService"),this._textFieldContent=e.textFieldContent,this._document=e.document}getContext(e){let t="";this._textFieldContent&&(t=this._textFieldContent.get(),this._logger.debug(`Current text field text has ${t}`));const n=new C;this._logger.debug(`Extractor is instance of ${n.constructor.name}`);const o=n.extractContext({document:this._document});return this._logger.debug("Context extracted",o),{...o,textFieldContent:t}}}var f;!function(e){e.toClient="side-panel-to-cs-to-client",e.toServer="side-panel-to-cs-to-server"}(f||(f={}));var y=n(99902),v=n(45860),S=n(25569);class x{constructor(e){this._extractorService=e,this.publicApi={...(0,v.Z)({getContext:()=>this._extractorService.getContext("default"),ping:()=>!0})}}}var k=n(59366),T=n(3140),E=n(64225),A=n(83089),D=(n(82004),n(39871)),I=n(94032);function F(e){const t=i.h.create(void 0),n=i.h.create(void 0),o=function(e,t){(0,s.OB)().browserApi.sessionStorage.get(["isSidePanelOpen","alwaysOnAssistant"]).then((({isSidePanelOpen:n,alwaysOnAssistant:o})=>{void 0===e.get()&&e.set(!n),void 0===t.get()&&t.set(null==o?void 0:o.notchPosition)}));const n=(0,s.OB)().browserApi.sessionStorage.onChange((n=>{var o;e.set(!n.isSidePanelOpen),t.set(null===(o=n.alwaysOnAssistant)||void 0===o?void 0:o.notchPosition)}));return{dispose:()=>{n()}}}(t,n),a=i.h.combine(t,n,((e,t)=>{if(e)return{notchPosition:t}})).subscribe(I.wW(e));return{dispose:()=>{a.unsubscribe(),o.dispose()}}}var O=n(26760),R=n(92379),L=n(80471),N=n(28896),P=n(39903),G=n(72848),M=n(53533),B=n(56209);class U{constructor(){this._felog=(0,B.Tb)()}assistantNotchInitialized(e){this._felog.sendFemetricsRate("assistantNotchInitialized",{domain:e})}assistantNotchShown(e){this._felog.sendFemetricsRate("assistantNotchShown",{domain:e})}assistantNotchCollapsed(e){this._felog.sendFemetricsRate("assistantNotchCollapsed",{domain:e})}assistantNotchClicked(){this._felog.alwaysAvailableAssistant.openSidePanel("always_on_notch","clicked")}}var H=n(30337);class V{assistantNotchShown(e,t){H.J.alwaysOnAssistantNotchPeek(t,e)}assistantNotchCollapsed(e){H.J.alwaysOnAssistantNotchPreviewCollapsed(e)}assistantNotchDeactivatedAssistant(e){H.J.alwaysOnAssistantNotchDeactivatedAssistant(e)}assistantNotchDeactivatedTextChecking(e,t,n){H.J.alwaysOnAssistantNotchDeactivatedTextChecking(t,e,n)}}class z{constructor(){this._feMetricsTrackingService=new U,this._gnarTrackingService=new V,this._commonLabels={assistantSessionId:"",domain:""}}assistantNotchInitialized(){const e=(0,M.Cg)();this._feMetricsTrackingService.assistantNotchInitialized(e)}assistantNotchShown(){const e=(0,G.Z)(),t=(0,M.Cg)();this._commonLabels={assistantSessionId:e,domain:t},this._feMetricsTrackingService.assistantNotchShown(t),this._gnarTrackingService.assistantNotchShown(e,t)}assistantNotchPeekingCollapsed(){this._feMetricsTrackingService.assistantNotchCollapsed(this._commonLabels.domain),this._gnarTrackingService.assistantNotchCollapsed(this._commonLabels.assistantSessionId)}assistantNotchClicked(){return this._feMetricsTrackingService.assistantNotchClicked(),this._commonLabels.assistantSessionId}assistantNotchDeactivated(){this._gnarTrackingService.assistantNotchDeactivatedAssistant(this._commonLabels.assistantSessionId)}assistantNotchDeactivatedTextChecking(e){this._gnarTrackingService.assistantNotchDeactivatedTextChecking(this._commonLabels.assistantSessionId,this._commonLabels.domain,e)}dispose(){}}var j,K=n(24909),W=n(30101),Y=n(40902),q=n(36401),$=n(48906),X=n(21228),J=n(84021),Q=n(49231),Z=n(31409),ee=n(23031),te=n(57810);function ne(e){const{rootElement:t=null,onDisableTextCheckingForThisSiteSession:n=ee.EI,onDisableTextCheckingForThisSiteIndefinitely:o=ee.EI,onDisableNotchEverywhere:i=ee.EI}=e,[s,a]=R.useState(!1),r=R.useRef(null);return R.useEffect((()=>(r.current=setTimeout((()=>{a(!0)}),0),()=>{r.current&&clearTimeout(r.current)})),[]),R.createElement(Q.v,{...(0,$.Sh)(te.settingsMenu,s&&te.settingsMenuVisible),activator:R.createElement(Z.h,{accessibilityLabel:"Manage",icon:J.ew,variant:"tertiary",size:"small",className:te.settingsButton,"data-testid":"assistant-notch-settings-button",tooltipContentProps:{root:t}})},R.createElement(Q.v.Section,{label:"Turn off Grammarly for this site"},R.createElement(Q.v.Item,{key:"textChecking-session",onClick:n},"Until my next visit"),R.createElement(Q.v.Item,{key:"textChecking-indefinitely",onClick:o},"From now on")),R.createElement(Q.v.Separator,{role:"separator"}),R.createElement(Q.v.Section,{label:"Hide Grammarly Tab"},R.createElement(Q.v.Item,{key:"everywhere",onClick:i},"Hide Everywhere")))}!function(e){e.hidden="hidden",e.peeking="peeking",e.shown="shown"}(j||(j={}));var oe=n(4256);const ie=({notchRef:e,isDragging:t,notchPosition:n})=>{const o=R.useRef(),i=R.useRef(),s=R.useRef(),[a,r]=R.useState(100);function c(){e.current&&(o.current=e.current.getBoundingClientRect())}return R.useEffect((()=>(self.addEventListener("resize",c),()=>self.removeEventListener("resize",c))),[]),R.useLayoutEffect((()=>{c()}),[e.current,n]),R.useEffect((()=>{const e=e=>{s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{r(100)}),oe.m9(5)),i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame((()=>{if(o.current){const t=function(e,t){const n=Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),o=Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom));return Math.hypot(n,o)}(o.current,{x:e.clientX,y:e.clientY});if(t>400)return void r(100);r(50*(t/400)+50)}}))};return t?document.addEventListener("mouseup",c,{once:!0,capture:!0}):document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e),i.current&&cancelAnimationFrame(i.current),s.current&&clearTimeout(s.current)}}),[t]),{hiddenPercent:a}};var se=n(45079);const ae=({onClick:e,trackingService:t,onDragEnd:n,onDisableTextCheckingForThisSiteSession:o,onDisableTextCheckingForThisSiteIndefinitely:i,onDisableNotchEverywhere:s,notchPosition:a})=>{const[r,c]=R.useState(!1),l=R.useRef(null),[d,_]=R.useState(j.peeking),u=R.useRef(null),h=R.useRef(null);R.useLayoutEffect((()=>{l.current&&a&&(l.current.style.setProperty("top",a.top),l.current.style.setProperty("bottom",a.bottom))}),[a]);const g=()=>{c(!0);const n=t.assistantNotchClicked();e(n)},{isDragging:p}=(({elementRef:e,positionElementRef:t,onDragEnd:n,onClick:o})=>{const[i,s]=R.useState(!1);return R.useEffect((()=>{var i;let a=0,r=0,c=0,l=!0;const d=i=>{if(0===i.button){if(r=i.clientY,l=!0,e.current){const{top:t}=e.current.getBoundingClientRect();a=i.clientY-t}self.addEventListener("mousemove",_),self.addEventListener("mouseup",(()=>{var i;if(s(!1),self.removeEventListener("mousemove",_),l)o();else{const o=null!==(i=null==t?void 0:t.current)&&void 0!==i?i:e.current;if(!o)return;const s=o.style.getPropertyValue("top"),a=o.style.getPropertyValue("bottom");null==n||n({top:s,bottom:a})}}),{once:!0,capture:!0})}},_=n=>{Math.abs(n.clientY-r)>5&&(s(!0),l=!1),l||(c=requestAnimationFrame((()=>{var o;const i=null!==(o=null==t?void 0:t.current)&&void 0!==o?o:e.current;if(!i)return;const s=n.clientY-a,r=self.innerHeight-i.clientHeight,c=Math.min(Math.max(0,s),r),l=c/self.innerHeight*100;if(l<=50)i.style.setProperty("top",`calc(${l}%)`),i.style.setProperty("bottom","unset");else{const e=(self.innerHeight-c-i.clientHeight)/self.innerHeight*100;i.style.setProperty("bottom",`calc(${e}%)`),i.style.setProperty("top","unset")}})))};return null===(i=e.current)||void 0===i||i.addEventListener("mousedown",d),()=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("mousedown",d),c&&cancelAnimationFrame(c)}}),[o,n,e,t]),{isDragging:i}})({elementRef:h,positionElementRef:l,onClick:g,onDragEnd:n}),{hiddenPercent:m}=ie({notchRef:l,isDragging:p,notchPosition:a}),b={"--hidden-percent":`${m}%`},C=function(e,t,n){if(n)return j.shown;if(e===j.peeking&&100===t)return j.hidden;return e}(d,m,p);return R.createElement("div",{"data-testid":"assistant-notch-container",ref:l,...(0,$.Sh)(se.notchContainer),style:C===j.shown?{}:b,onMouseEnter:()=>{u.current&&clearTimeout(u.current),_(j.shown),t.assistantNotchShown(),c(!1)},onMouseLeave:()=>{u.current=self.setTimeout((()=>{_(j.peeking),r||t.assistantNotchPeekingCollapsed()}),200)}},R.createElement("div",{...(0,$.Sh)(se.notch,se[C]),"data-testid":"assistant-notch",ref:h},R.createElement("button",{onKeyDown:e=>{"Enter"===e.key&&g()},className:se.notchButton,"data-testid":"assistant-notch-button","aria-label":"Start a chat with Grammarly AI"},R.createElement(Y.J,{accessibilityLabel:"",icon:q.H,size:"small"}),R.createElement(X.L,null))),C===j.shown&&R.createElement(ne,{rootElement:l.current,onDisableTextCheckingForThisSiteSession:()=>{_(j.peeking),o()},onDisableTextCheckingForThisSiteIndefinitely:()=>{_(j.peeking),i()},onDisableNotchEverywhere:()=>{_(j.peeking),s()}}))};const re=({onClick:e,notchViewState:t,...n})=>R.createElement(W.L,{chunkNameList:["designSystem","AAA-initAssistant"]},R.createElement(K.F.Fragment,null,R.createElement("div",{"aria-label":"grammarly-global-assistant-notch",role:"group",tabIndex:-1}),t.view((t=>t&&R.createElement(ae,{...n,onClick:e,notchPosition:t.notchPosition}))))),ce="grammarly-assistant-notch-view";var le=n(64271),de=n(44071),_e=n(90572),ue=n(18827),he=n(59179),ge=n(24666);class pe{constructor(e,t){this._selectedTextFromIntegration=t,this.selectedText=i.h.create(""),this.subs=[],this.subs.push(le.T(this._selectedTextFromIntegration.view(),de.R(self,"mouseup",{capture:!0}).pipe(_e.h((e=>{const t=e.target;return!t||!("tagName"in t)||t.tagName!==ce.toUpperCase()}))),de.R(self,"keyup",{capture:!0})).pipe(ue.g(0),he.U((()=>{var e;return this._selectedTextFromIntegration.get().trim()||(null===(e=self.getSelection())||void 0===e?void 0:e.toString().trim())||""})),ge.x()).subscribe((t=>{this.selectedText.set(t),e.onSelectionChanged(t)})))}dispose(){this.subs.forEach((e=>e.unsubscribe()))}}function me(){const e=[],t=new k.n((0,s.OB)().browserApi.message),n=new z;e.push(n),n.assistantNotchInitialized();const o=i.h.create(""),a=i.h.create("");e.push(((e,t)=>{const n=new w({document,textFieldContent:t}),o=new x(n);return new y.S((0,S.NH)(new r.d(e,f.toServer,f.toClient)),o.publicApi)})(t,a));const l=new c(t),d=new pe(l.api,o.view());e.push(d),e.push((0,D.Q)({setCheckingStatus:e=>{null===e&&o.set("")},setTextFieldContent:e=>{a.set(e)},setSelectedTextFromIntegration:e=>{o.set(e)}}));const _=i.h.create(void 0);e.push(F(_));const u=new E.h((0,s.OB)().browserApi.preferences),h=(0,A.q)(u);e.push(u);const g=((e,t,n,o,i,s=new z)=>L.V.get({monitorAs:"assistant-notch"}).inject(N.EM.fromDocument(self.document,ce,{role:"presentation"}),N.zs.appendChild(document.documentElement),P.G7.showWhenLoaded(R.createElement(re,{onClick:t,trackingService:s,notchViewState:e,onDragEnd:O.s,onDisableTextCheckingForThisSiteSession:n,onDisableTextCheckingForThisSiteIndefinitely:o,onDisableNotchEverywhere:i}))))(_,(e=>{(0,O.d)(e,d.selectedText.get())}),(()=>{(0,s.OB)().bgRpc.api.sendToFocusTab({kind:T.B.Kind.disableOnTab}),p(),n.assistantNotchDeactivatedTextChecking("session")}),(()=>{(0,s.OB)().bgRpc.api.disableOnFocusTab(document.location.origin),n.assistantNotchDeactivatedTextChecking("indefinitely")}),(()=>{h.quickSettings.toggleAlwaysAvailableAssistant(!1),n.assistantNotchDeactivated()}),n),p=()=>{g.dispose(),e.forEach((e=>e.dispose()))};return{dispose:p}}},26760:(e,t,n)=>{n.d(t,{d:()=>r,s:()=>c});var o=n(8261),i=n(56209),s=n(18506);const a=new Proxy({},{get:(e,t)=>(...e)=>(0,s.OB)().bgRpc.api.trackGnar(t,e)});async function r(e,t,n="chat",s="always_on_notch"){let r="clicked";try{await(0,o.OB)().browserApi.sessionStorage.set({alwaysOnAssistantOnOpenData:{assistantSessionId:e,selectedText:t,agentId:n}}),await(0,o.OB)().bgRpc.api.openSidePanel(),r="success"}catch(e){r="failure"}return(0,i.Tb)().alwaysAvailableAssistant.openSidePanel(s,r),a.alwaysOnAssistantSidePanelOpen(e,s),"success"===r}function c(e){(0,o.OB)().browserApi.sessionStorage.set({alwaysOnAssistant:{notchPosition:e}})}},21228:(e,t,n)=>{n.d(t,{L:()=>i});var o=n(92379);const i=()=>o.createElement("input",{"aria-hidden":"true",tabIndex:-1,style:{position:"absolute",inset:0,opacity:0,cursor:"inherit"}})},96414:(e,t,n)=>{n.d(t,{Hq:()=>i,Vt:()=>o,wE:()=>s});const o="vBarCard",i="grammarly-extension-vBar-card",s="vBarCardPositionReference"},49079:(e,t,n)=>{n.d(t,{Y:()=>i,c:()=>o});const o={accessibilityOnboardingAlertsCount:0,userAcceptedCount:0,lastUserAcceptedAt:""},i={enabled:!0,hotkey:"Tab",snoozedUntil:null}},83763:(e,t,n)=>{n.d(t,{Nl:()=>o});const o="gr-oauth-key"},30101:(e,t,n)=>{n.d(t,{L:()=>r,n:()=>a});var o=n(92379),i=n(78542),s=n(18506);const a=(e,t=(0,s.OB)().browserApi.getUrl)=>t(`src/css/${e}.styles.css`),r=e=>{const t=o.useMemo((()=>i.Y.create("RenderWithStyles")),[]),n="chunkName"in e?[e.chunkName]:e.chunkNameList,s=o.useMemo((()=>n.map((t=>a(t,e.getUrl)))),[...n]),[r,c]=o.useState(0),[l,d]=o.useState(!1);return o.useEffect((()=>{r===s.length&&d(!0)}),[r]),o.createElement(o.Fragment,null,s.map((e=>o.createElement("link",{rel:"stylesheet",type:"text/css",href:e,key:e,onLoad:()=>(e=>{null==t||t.debug(`Style link was loaded [href: ${e}]`),c((e=>e+1))})(e),onError:n=>((e,n)=>{null==t||t.error(`Couldn't load style link [href: ${n}]`,e),c((e=>e+1))})(n,e)}))),l&&e.children)}},96077:(e,t,n)=>{n.d(t,{H:()=>o});var o,i=n(98227),s=n(13391);!function(e){const t=s.h.create(""),n=new Proxy({textContent:""},{get:(e,n)=>"textContent"===n?t.get():Reflect.get(e,n),set:(e,n,o)=>"textContent"===n&&"string"==typeof o?(t.set(o),!0):Reflect.set(e,n,o)});e.init=function(){i.ux.setStylesTarget(n)},e.styles=t.view()}(o||(o={}))},90447:(e,t,n)=>{n.d(t,{YS:()=>w,mE:()=>b,nS:()=>o,o6:()=>u});var o,i=n(92379),s=n(32073),a=n(13391),r=n(48906),c=n(41580),l=n(78542),d=n(96077),_=n(39903);!function(e){e.Context=i.createContext(null)}(o||(o={}));const u=16;function h(e,t){e&&e instanceof HTMLElement?e.style.setProperty("--rem",`${t}`):l.Y.create("ShadowRootInjector").warn("setRootCssVar: host is not an HTMLElement. This should not happen. Please report this issue.")}class g{constructor(){this._denaliStyleSheet=new CSSStyleSheet,this._globalStyleSheet=new CSSStyleSheet,this._globalStyleSheetLoaded=a.h.create(null),this._subscription=new s.w0}inject(e,t){const n=this._globalStyleSheetInitialized();n||this._initGlobalStyleSheet();const s=e.attachShadow({mode:"open"});s.adoptedStyleSheets=[this._denaliStyleSheet,this._globalStyleSheet],h(s.host,u);const a=(0,_.X3)(s,i.createElement(o.Context.Provider,{value:s},i.createElement(t,{viewLoaded:this._globalStyleSheetLoaded.view((e=>({...e,constructableStyleSheetInitialized:n})))})));return()=>{a(),this._subscription.unsubscribe()}}_globalStyleSheetInitialized(){return this._globalStyleSheet.cssRules.length>0}async _initGlobalStyleSheet(){try{if(!self.GR_INLINE_STYLES)throw new Error("No inline styles");await Promise.all([this._denaliStyleSheet.replace(d.H.styles.get()),this._globalStyleSheet.replace(self.GR_INLINE_STYLES)]),this._globalStyleSheetLoaded.set({stylesInjectionStrategy:"constructableStyleSheet"}),this._subscription.add(d.H.styles.subscribe((e=>this._denaliStyleSheet.replaceSync(e))))}catch(e){this._globalStyleSheetLoaded.set({error:`${e}`,stylesInjectionStrategy:"constructableStyleSheet"})}}}const p=(0,r.xb)(c.b);class m{inject(e,t){const n=a.h.create(null),s=e.attachShadow({mode:"open"});return h(s.host,u),(0,_.X3)(s,i.createElement(i.Fragment,null,i.createElement(p,null,d.H.styles),i.createElement(c.b,null,self.GR_INLINE_STYLES),i.createElement(o.Context.Provider,{value:s},i.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"styleElement"})))}}class b{inject(e,t){const n=a.h.create(null),s=e.attachShadow({mode:"open"});return(0,_.X3)(s,i.createElement(i.Fragment,null,i.createElement(o.Context.Provider,{value:s},i.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"noStyles"})))}}let C=null;function w(e=!1){return e&&function(){if(null===C)try{const e=new CSSStyleSheet;C=!!e&&!!e.replace&&!!e.replaceSync&&"adoptedStyleSheets"in Document.prototype}catch(e){C=!1}return!0===C}()?new g:new m}},39903:(e,t,n)=>{n.d(t,{G7:()=>m,X3:()=>g});var o=n(92379),i=n(95295),s=n(84714),a=n(2613),r=n(14969),c=n(29479),l=n(954),d=n(24666),_=n(59179),u=n(24909);function h(e){return!!e&&!e.error}function g(e,t,n){return(0,i.render)(t,e,n),()=>(0,i.unmountComponentAtNode)(e)}const p=({view:e,placeholder:t,viewLoaded:n,minDuration:i,forcePlaceholder:d})=>{const _=h(n.get())&&!d?(0,s.of)(e):n.pipe((0,a.e)(i),(0,r.P)(h),(0,c.h)(e),(0,l.O)(t));return o.createElement(u.F.Fragment,null,_)};var m;!function(e){e.showWhenLoaded=function(e){return function({viewLoaded:t}){return o.createElement(u.F.Fragment,null,t.pipe((0,d.x)(),(0,_.U)((t=>h(t)?e:null))))}},e.withPlaceholder=function(e,t,n,i){return function({viewLoaded:s}){return o.createElement(p,{view:e,placeholder:t,minDuration:n||0,viewLoaded:s,forcePlaceholder:i||!1})}}}(m||(m={}))},28896:(e,t,n)=>{n.d(t,{EM:()=>o,_R:()=>p,aP:()=>m,zs:()=>i});var o,i,s=n(92379),a=n(32073),r=n(13391),c=n(96414),l=n(20182),d=n(18506),_=n(96077),u=n(39903),h=n(77671);class g{constructor(e,t,n,o){var i,s,a;this._options=o,this._root=null,this._unmount=null,this._root=e(),t(this._root),this._unmount=n(this._root),(null===(i=this._options)||void 0===i?void 0:i.allowPrint)||this._root.classList.add(h.gr_no_print),(null===(s=this._options)||void 0===s?void 0:s.eventPropagationHandler)&&(this._disposeEventPropagationHandler=null===(a=this._options)||void 0===a?void 0:a.eventPropagationHandler(this._root)),this._preventEventPropagation()}_preventEventPropagation(){const e=["keydown","keyup","keypress","mouseup","mousedown","pointerdown","click"];(0,d.OB)().experimentClient.isGateEnabled(l.K.CentralizeStopEventPropagation)&&e.forEach((e=>{var t;null===(t=this._root)||void 0===t||t.addEventListener(e,(e=>{e.stopPropagation()}))}))}dispose(){this._disposeEventPropagationHandler&&(this._disposeEventPropagationHandler(),this._disposeEventPropagationHandler=void 0),this._unmount&&(this._unmount(),this._unmount=null),this._root&&(this._root.parentNode?this._root.parentNode.removeChild(this._root):this._root.remove(),this._root=null)}}class p extends g{constructor(e,t,n,o){super(e,t,(e=>{var t,o;const i=new a.w0,c=e.ownerDocument,l=c.head,d="grammarly-extension-styles",h="grammarly-extension-denali-styles";let g=Array.from(null!==(t=l.getElementsByTagName("style"))&&void 0!==t?t:[]).find((e=>e.id===d)),p=Array.from(null!==(o=l.getElementsByTagName("style"))&&void 0!==o?o:[]).find((e=>e.id===h));g||(g=c.createElement("style"),g.id=d,g.innerHTML=self.GR_INLINE_STYLES||"",l.prepend(g)),p||(p=c.createElement("style"),p.id=h,g.insertAdjacentElement("beforebegin",p)),p.innerHTML=_.H.styles.get(),i.add(_.H.styles.subscribe((e=>{p&&(p.innerHTML=e)})));const m=r.h.create(null),b=(0,u.X3)(e,s.createElement(n,{viewLoaded:m}),(()=>m.set({shadowDOM:!1})));return()=>{i.unsubscribe(),b()}}),o)}}class m extends g{constructor(e,t,n,o,i){super((()=>{const t=e();return t.setAttribute(m.SHADOW_DOM_ROOT_ATTRIBUTE,"true"),t.tagName.toLocaleLowerCase()===c.Hq.toLocaleLowerCase()&&(null==i?void 0:i.vBarsCustomAttributes)&&Object.entries(i.vBarsCustomAttributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}),t,(e=>o.get().inject(e,(e=>s.createElement(n,{viewLoaded:e.viewLoaded.view((e=>e?{...e,shadowDOM:!0}:null))})))),i)}}m.SHADOW_DOM_ROOT_ATTRIBUTE="data-grammarly-shadow-root",function(e){e.defaultName="grammarly-extension",e.fromDocument=function(t,n=e.defaultName,o={}){return{doc:t,name:n,attributes:o}}}(o||(o={})),function(e){e.appendChild=function(e){return{parent:e}},e.isCustom=function(e){return e instanceof Function}}(i||(i={}))},80471:(e,t,n)=>{n.d(t,{V:()=>l});var o=n(23031),i=n(92379),s=n(14969),a=n(56209);class r{constructor(e,t){this._injector=e,this._injectionName=t}inject(e,t,n,o){const s=performance.now(),l=r._firstRender,d=r._somePreviousRenderCompleted;return r._firstRender=!1,this._injector(e,t,(({viewLoaded:e})=>i.createElement(c,{view:n,viewLoaded:e,onComplete:e=>{const t=performance.now();(0,a.Tb)().performance.viewInjection({timeToRender:Math.trunc(t-s),startTime:Math.trunc(s),endTime:Math.trunc(t),injectionName:this._injectionName,firstRender:l,somePreviousRenderCompleted:d,error:e.error||null,shadowDOM:!!e.shadowDOM,stylesInjectionStrategy:e.stylesInjectionStrategy||null,constructableStyleSheetInitialized:!!e.constructableStyleSheetInitialized}),r._somePreviousRenderCompleted=!0}})),o)}}r._firstRender=!0,r._somePreviousRenderCompleted=!1;const c=({viewLoaded:e,view:t,onComplete:n})=>(i.useEffect((()=>{const t=e.pipe((0,s.P)(o.fQ)).subscribe(n);return()=>null==t?void 0:t.unsubscribe()}),[]),i.createElement(t,{viewLoaded:e}));var l,d=n(90447),_=n(28896);function u(e){const t=e.doc.createElement(e.name);return e.attributes&&Object.entries(e.attributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}!function(e){const t=(0,o.Vo)(d.YS);e.get=function(e){return{inject:(n,i,s,a)=>{const c=(null==e?void 0:e.monitorAs)||n.name||"unknown";return new r((null==e?void 0:e.noShadowDOM)?(e,t,n,o)=>new _._R((()=>u(e)),_.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,o):(l=(null==e?void 0:e.noStyles)?(0,o.Vo)((()=>new d.mE)):t,(e,t,n,o)=>new _.aP((()=>u(e)),_.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,l,o)),c).inject(n,i,s,a);var l}}}}(l||(l={}))},84951:(e,t,n)=>{n.d(t,{E:()=>o});class o{constructor(e,t,n,o){this._customInboundEventName=t,this._customOutboundEventName=n,this._wrapOutboundMessage=o,this.inbound={subscribe:e=>{const t=({detail:t})=>{const n=t;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._target.addEventListener(this._customInboundEventName,t,!1),{unsubscribe:()=>this._target.removeEventListener(this._customInboundEventName,t,!1)}}},this.outbound=e=>{const t=this._wrapOutboundMessage?this._wrapOutboundMessage(e):e,n=new CustomEvent(this._customOutboundEventName,{bubbles:!0,cancelable:!0,detail:t});this._target.dispatchEvent(n)},this._target=e.defaultView||e}}},30337:(e,t,n)=>{n.d(t,{J:()=>i});var o=n(18506);const i=new Proxy({},{get:(e,t)=>(...e)=>(0,o.OB)().bgRpc.api.trackGnar(t,e)})},43089:(e,t,n)=>{n.d(t,{Hz:()=>s,O0:()=>a,OR:()=>r,QO:()=>i,qR:()=>l,uU:()=>o,wl:()=>c});const o=["Alt","AltGraph","CapsLock","Control","Meta","NumLock","ScrollLock","Shift"],i=["Fn","FnLock","Hyper","Super","Symbol","SymbolLock"],s={openAssistant:{mac:{key:"KeyG",modifiers:["Shift","Control","Meta"]},other:{key:"KeyG",modifiers:["Shift","Control","Alt"]}},closeAssistant:{mac:{key:"Escape",modifiers:[]},other:{key:"Escape",modifiers:[]}},openVBar:{mac:{key:"BracketRight",modifiers:["Shift","Meta","Control"]},other:{key:"BracketRight",modifiers:["Shift","Alt","Control"]}}},a='[data-grammarly-part="assistant-draggable-wrapper"],[data-grammarly-part="assistant-static-wrapper"]',r='[data-focus-id="empty-state"], button[data-name^="button:"]',c="button, [href], input, select, textarea",l=`${c}, [tabindex]:not([tabindex^="-"])`},22180:(e,t,n)=>{n.d(t,{e:()=>s});var o=n(18506),i=n(43089);function s(e){return i.Hz[e][(0,o.nD)()?"mac":"other"]}},41580:(e,t,n)=>{n.d(t,{b:()=>i});var o=n(92379);const i=({children:e})=>{const t="string"==typeof e?e:"";return t?o.createElement("style",{dangerouslySetInnerHTML:{__html:t}}):null}},20182:(e,t,n)=>{n.d(t,{K:()=>r});var o=n(70095),i=n(19917),s=n(8413),a=n(364);const r={...o.C,...a.D,...s.K,StandWithUkraineGrammarlySuspended:new i.Cc("standWithUkraineExtensionSuspended","enabled"),StandWithUkraineTheme:new i.Cc("standWithUkraineExtensionTheme","enabled"),StudentsOFEGdocs:new i.Cc("citations_rollout_gdocs","enabled"),StudentsOFEInternal:new i.Cc("citations_rollout_internal","enabled"),CitationBuilder:new i.Cc("citation_builder","enabled"),CitationBuilderEditing:new i.Cc("citation_builder_editing","enabled"),CitationBuilderManualInvocation:new i.Cc("citation_builder_manual_invocation","enabled"),ExtensionDebugReport:new i.Cc("extension_debug_report","enabled"),SduiBulkDismiss:new i.Cc("sdui_bulk_dismiss","enabled"),TrackSiblingDataForGMail:new i.Cc("extension_track_sibling_data_for_gmail","enabled"),FixGmailHouseCat:new i.Cc("gmail_housecat_memory_leak_fix","enabled"),KnowledgeHubGdocs:new i.Cc("knowledge_hub_gdocs","enabled"),KnowledgeHubGmail:new i.Cc("knowledge_hub_gmail","enabled"),KnowledgeHubSlack:new i.Cc("knowledge_hub_slack","enabled"),KnowledgeHubWord:new i.Cc("windowsextension_knowledge_hub_word","enabled"),SlackUseInsertHTML:new i.Cc("extension_slack_use_insert_html"),KeyboardShortcut:new i.Cc("extension_keyboard_shortcut","enabled"),EnableFirstVisibleHighlightTracking:new i.Cc("extension_track_first_visible_highlight","enabled"),KnowledgeHubCheetahIntegration:new i.Cc("gbgo_knowledge_share_web","enabled"),GdocsMultiColumnAllCombinations:new i.Cc("gdocs_canvas_multicolumn_compare_all_combination","enabled"),GdocsRefactorDomQuery:new i.Cc("gdocs_refactor_dom_query","enabled"),GDocsUseStackToStoreParentClip:new i.Cc("gdocs_use_stack_to_store_parent_clip","enabled"),GdocsReturnAllRects:new i.Cc("gdocs_return_all_rects","enabled"),SuggestionDeliveryAutoApply:new i.Cc("suggestion_delivery_autoapply_extension_gate_23q3","enabled"),IndianEnglishDialect:new i.Cc("indian_english_dialect","enabled"),IndianEnglishDialectInternal:new i.Cc("indian_english_dialect_internal","enabled"),CheetahFeatureFlagCompose:new i.Cc("cheetah_extension_feature_flag_compose","enabled"),CheetahFeatureFlagRewrite:new i.Cc("cheetah_extension_feature_flag_rewrite","enabled"),CheetahFeatureFlagInlineRewrite:new i.Cc("cheetah_extension_feature_flag_inline_rewrite","enabled"),CheetahFeatureFlagMagicRewrite:new i.Cc("cheetah_extension_feature_flag_magic_rewrite","enabled"),CheetahFeatureFlagQuickReply:new i.Cc("cheetah_extension_feature_flag_quick_reply","enabled"),CheetahFeatureFlagInlineQuickReply:new i.Cc("cheetah_extension_feature_flag_inline_quick_reply","enabled"),CheetahFeatureFlagGDocsInlineRewrites:new i.Cc("cheetah_extension_feature_flag_gdocs_inline_rewrites","enabled"),CheetahFeatureFlagOnboarding:new i.Cc("cheetah_extension_feature_flag_onboarding","enabled"),CheetahStudentsOnboarding:new i.Cc("ggo_students_onboarding","enabled"),CheetahStudentBTS:new i.Cc("ggo_student_bts","enabled"),CheetahStudentPromptsInternal:new i.Cc("ggo_student_prompts_internal","enabled"),GDocsTextCorruptionValidateTextBeforeAlertApply:new i.Cc("gDocs_tc_validate_text_before_alert_apply","enabled"),GDocsGetFormatMap:new i.Cc("gdocs_get_format_map","enabled"),NonGDocsGetFormatMap:new i.Cc("extension_get_format_map","enabled"),SupportMoreStyle:new i.Cc("extension_support_more_style","enabled"),GDocsUseVisibleLayoutRoot:new i.Cc("gdocs_use_visible_layout_root"),GDocsUnloadIfInitArgsChanged:new i.Cc("gdocs_unload_when_init_args_changed"),GDocsDetectDocModeChangeByLayoutRootListener:new i.Cc("gdocs_detect_dom_mode_change_by_layout_root"),Iterable:new i.Cc("iterable_gate_ext","enabled"),IterableGDocsSidebarInitializedTrigger:new i.Cc("iterable_gate_gdoc_sidebar_initialized_ext","enabled"),IterableUserSessionInitializedTrigger:new i.Cc("iterable_gate_user_session_initialized_ext","enabled"),NonGDocsFirstAlertLookedAtTrigger:new i.Cc("iterable_gate_non_gdocs_first_alert_looked_at_ext","enabled"),InkwellSubscribeToSecureKeyRequests:new i.Cc("extension_inkwell_communication","enabled"),SalesforceCK4RichTextFix:new i.Cc("salesforce_ck4_richtext_fix","enabled"),IterablePauseInTypingTrigger:new i.Cc("iterable_gate_pause_in_typing_ext","enabled"),IterableEngagedByAlertsAcceptedTrigger:new i.Cc("iterable_gate_alerts_accepted_ext","enabled"),IterableTriggerFromCustomPayload:new i.Cc("iterable_trigger_from_custom_payload_ext","enabled"),IterableTargetDomain:new i.Cc("iterable_target_domain_ext","enabled"),IterableMetrics:new i.Cc("iterable_metrics_ext","enabled"),IterableTriggerMetrics:new i.Cc("iterable_trigger_metrics_ext","enabled"),IterableLogs:new i.Cc("iterable_logs_ext","enabled"),IterableCooldownAndImpressions:new i.Cc("iterable_cooldown_and_retry_ext","enabled"),IterableGlobalCooldown:new i.Cc("iterable_global_cooldown_ext","enabled"),IterableHideIPMOnPopupStateChange:new i.Cc("iterable_hide_ipm_on_popup_state_change_ext","enabled"),SessionStorageLogsBackup:new i.Cc("session_storage_logs_backup","enabled"),SduiPopoverNotifications:new i.Cc("sdui_popover_manager_ext","enabled"),TextChangeBufferUseLegacy:new i.Cc("text_change_buffer_use_legacy_3","enabled"),TextChangeBufferDontFlushOnApply:new i.Cc("text_change_buffer_dont_flush_on_apply_1","enabled"),DontSyncAlertApplicationsWithInlineMode:new i.Cc("dont_sync_alert_applications_with_inline_mode","enabled"),KnowledgeEngineSearchV2Alpha:new i.Cc("knowledge_engine_search_v2alpha","enabled"),HideReportBugByGrammarlyEmployeeFeature:new i.Cc("hide_report_bug_by_grammarly_employee_feature","enabled"),ExtensionFeatureFlagCAPIClientStorage:new i.Cc("extension_feature_flag_capi_client_storage","enabled"),ExtensionFeatureFlagCAPIClientStorageCleanup:new i.Cc("extension_feature_flag_capi_client_storage_cleanup","enabled"),ExtensionFeatureFlagCAPIClientStorageLogWarnings:new i.Cc("extension_capi_client_storage_log_warnings","enabled"),ExtensionFeatureFlagCAPIClientStorageRunCleanupRequests:new i.Cc("extension_capi_client_storage_run_cleanup_requests","enabled"),CAPIDistinctConnectionStatus:new i.Cc("extension_capi_distinct_connection_status","enabled"),TransformReplacementBeforeApplyFeature:new i.Cc("extension_feature_transform_replacement_before_apply","enabled"),ZendeskTransformReplacementOnlyForString:new i.Cc("extension_zendesk_transform_replacement_only_for_string","enabled"),GDocsInitGbuttonInsideCommentsField:new i.Cc("gdocs_init_gbutton_inside_comments_field","enabled"),GDocsCreateRichText:new i.Cc("gdocs_create_rich_text","enabled"),GDocsFormatGetFontFamily:new i.Cc("gdocs_format_get_font_family","enabled"),GDocsFormatGetColor:new i.Cc("gdocs_format_get_color","enabled"),GDocsAlignBasicStyleForTextDiff:new i.Cc("gdocs_align_basic_style_for_text_diff","enabled"),GDocsReturnAppliedForNonSuccess:new i.Cc("gdocs_return_applied_for_non_success","enabled"),GDocsReturnAppliedForAll:new i.Cc("gdocs_return_applied_for_all","enabled"),GDocsCheckTextForSuggestionMode:new i.Cc("gdocs_check_text_for_suggestion_mode","enabled"),GDocsNoDeleteEventForSuggestionMode:new i.Cc("gdocs_no_delete_event_for_suggestion_mode","enabled"),GDocsUseSelectionServiceForSuggestionMode:new i.Cc("gdocs_use_selection_service_suggestion_mode","enabled"),ExtensionA11yUIFixes:new i.Cc("extension_a11y_ui_fixes","enabled"),AutocorrectKeydownCaptureUserInput:new i.Cc("extension_autocorrect_keydown_capture_user_input","enabled"),AutocorrectAllowCaptureNonTrustedUserEvents:new i.Cc("extension_autocorrect_allow_capture_not_trusted_user_events","enabled"),DispatchDeltaDeleteEvent:new i.Cc("extension_dispatch_deleta_delete_event","enabled"),DiscordTransformInsertToReplace:new i.Cc("extension_discord_transform_insert_to_replace","enabled"),DiscordExecComandReplacementService:new i.Cc("extension_discord_exec_comand_replacement","enabled"),DiscordDelayAfterReplacementInBatch:new i.Cc("extension_discord_delay_after_replacement_in_batch","enabled"),MSTeamsCustomTransformReplacementWithSpaces:new i.Cc("extension_ms_teams_transform_replacement_with_spaces","enabled"),ReplacementExecutionTimeoutValidation:new i.Cc("extension_replacement_execution_timeout_validation","enabled"),CheetahSelectionContextUpdates:new i.Cc("cheetah_selection_context_updates","enabled"),CheetahSelectionContextUpdatesServer:new i.Cc("cheetah_selection_context_updates_server","enabled"),UseBodyToGetViewportDimentions:new i.Cc("extension_use_body_to_get_viewport_dimentions","enabled"),CLEditorIntegration:new i.Cc("extension_cleditor_integration","enabled"),GOSRollout:new i.Cc("extension_gos_rollout","enabled"),GOSTelemetry:new i.Cc("extension_gos_telemetry","enabled"),CentralizeStopEventPropagation:new i.Cc("extension_centralize_stop_event_propagation","enabled"),CollectDataForPreserveFormatting:new i.Cc("extension_collect_data_for_preserve_formatting","enabled"),FormattingUseBatchWhenHaveListItems:new i.Cc("extension_preserve_formatting_skip_list_items","enabled"),FormattingReplaceEmptyStringToNonBreakingSpaceEntity:new i.Cc("extension_formatting_support_continuous_white_spaces","enabled"),GDocsCollectLayoutRenderingStats:new i.Cc("gdocs_collect_layout_rendering_stats","enabled"),GDocsInternalsFilterStrikethrough:new i.Cc("gdocs_internals_filter_strikethrough","enabled"),GDocsTrackUnderline:new i.Cc("gdocs_track_underline","enabled"),GDocsTrackStrikeThrough:new i.Cc("gdocs_track_strikethrough","enabled"),GDocsInternalsFilterCodeBlocks:new i.Cc("gdocs_internals_filter_code_blocks","enabled"),GDocsDebounceDataRendering:new i.Cc("gdocs_debouncing_data_rendering","enabled"),GDocsExtractLinkFromGoogleInternals:new i.Cc("gdocs_extract_link_from_internals","enabled"),GDocsExtractDocumentInternals:new i.Cc("gdocs_extract_document_internals","enabled"),GDocsExtractSuggestionObjectsWithPath:new i.Cc("gdocs_extract_suggestion_objects_with_path"),GDocsretryExtractAnnotationAfterOneSecond:new i.Cc("gdocs_retry_extract_annotation_after_one_second"),GDocsRetryExtractAnnotation100Times:new i.Cc("gdocs_retry_extract_annotation_100_times"),GDocsExtractLinkInternalsByPath:new i.Cc("gdocs_extract_link_internals_by_path"),TrackInstitutionIdToGnar:new i.Cc("extension_track_institution_id_to_gnar","enabled"),GdocsTrackFatalPopup:new i.Cc("extension_gdocs_track_fatal_popup","enabled"),VbarsGlobal:new i.Cc("vbars_global","enabled"),CheetahOnboardingContextProviderFix:new i.Cc("cheetah_extension_external_onboarding_context_provider_fix","enabled"),CheetahClearSDUIBufferOnReconnect:new i.Cc("cheetah_extension_clear_sdui_buffer_on_reconnect","enabled"),InactiveIntegration:new i.Cc("extension_inactive_integration","enabled"),G2VBarsKillSwitch:new i.Cc("vbars_extension_kill_switch"),G2VBarsInternal:new i.Cc("extension_g2_vbars_internal","enabled"),G2VBarsInternalIgnoreAllowList:new i.Cc("extension_g2_vbars_internal_ignore_allow_list","enabled"),G2VBarsSelectionPreload:new i.Cc("vbars_selection_preload_extension","enabled"),G2VBarsClickAwayFixes:new i.Cc("vbars_clickaway_listener","enabled"),G2VBarsSelectionEnterprise:new i.Cc("vbars_selection_enterprise","enabled"),G2VBarsPushedContent:new i.Cc("pushed_content_extension","enabled"),G2VBarsIdleEnterprise:new i.Cc("vbars_idle_enterprise","enabled"),UseApproximateTCValidation:new i.Cc("use_approximate_tc_validation","enabled"),GDocsCanUseTransformBeforeValidate:new i.Cc("gdocs_can_use_trasfrom_before_validate","enabled"),GDocsSendValidationInfoForBatchReplacement:new i.Cc("gdocs_send_validation_info_for_batch_replacement","enabled"),CanIgnoreNonWidthCharsForTCValidation:new i.Cc("extension_ignore_non_width_chars_for_tc_validaition","enabled"),GDocsCanIgnoreEndNewLine:new i.Cc("gdocs_ignore_end_new_line_for_tc_validaition","enabled"),GDocsWhitespaceSelectionRetry:new i.Cc("gdocs_whitespace_selection_retry","enabled"),OAuth2SelectiveLogout:new i.Cc("extension_oauth2_selective_logout","enabled"),OAuth2LastAuthnEventLogout:new i.Cc("extension_oauth2_last_authn_event_logout","enabled"),LockedUIRollout:new i.Cc("locked_ui_rollout","unlimited_pool"),DebouncedInlineCardUpdate:new i.Cc("extension_debounced_inline_card_update"),GDocsShouldCheckIfMappedSomething:new i.Cc("gdocs_map_result_must_mapped_some_text"),GDocsCheckIndexBoundaryWhenTranslateIndex:new i.Cc("gdocs_check_index_boundary_when_translate_index"),GDocsOnlyAddIncompleteResult:new i.Cc("gdocs_only_add_incomplete_result"),GDocsPageInputValidationForParser:new i.Cc("gdocs_page_input_validation_for_parser"),CheetahProfuseEventsTracking:new i.Cc("cheetah_profuse_events_tracking"),RedditReplacementDuplicationFix:new i.Cc("reddit_replacement_duplication_fix"),RedditNewUseOverlayLayout:new i.Cc("reddit_new_use_overlay_layout"),RedditUseClipboardForCreatePost:new i.Cc("extension_reddit_use_clipboard_for_create_post"),InstagramUseDispatchEventReplacementService:new i.Cc("instagram_use_dispatch_event_replacement_service"),FacebookUseDispatchEventReplacementService:new i.Cc("facebook_use_dispatch_event_replacement_service"),FacebookChatNoDelayBeforeSelection:new i.Cc("facebook_chat_no_delay_before_selection"),PrioritizeLeftNodeAsEndNode:new i.Cc("extension_prioritize_left_node_as_end_node"),SalesforceServiceConsoleReplacementFix:new i.Cc("salesforce_service_console_replacement_fix"),SalesforceFilterEmailThread:new i.Cc("salesforce_filter_email_thread"),SalesforceDetailsTextareaRichReplacementServiceDelay:new i.Cc("salesforce_details_textarea_replacement_service_delay"),StravaReplacementSelectionDelay:new i.Cc("extension_strave_replacement_selection_delay"),SkipParallelAutoFixReplacement:new i.Cc("skip_parallel_autofix_replacement"),AvoidExtraIntegrationControllerInitialization:new i.Cc("extension_avoid_extra_integration_controller_initialization"),OggyOnGOS:new i.Cc("extension_oggy_on_gos","enabled"),UnfixFast570:new i.Cc("extension_unfix_fast_570"),LatticeReplacementDuplicationFix:new i.Cc("lattice_replacement_duplication_fix"),NewSessionEndWithConnectionStats:new i.Cc("new_session_end_with_connection_stats"),GDocsReplacementValidateOnlyFullTextBeforeReplacement:new i.Cc("gdocs_replacement_only_validate_full_text_before_replacement"),GDocsReplacementValidateOnlyFragmentText:new i.Cc("gdocs_replacement_only_validate_fragment_text"),GDocsCachingParserMiddleware:new i.Cc("gdocs_caching_parser_middleware"),OggyIframeWrappers:new i.Cc("extension_oggy_use_iframe_wrappers"),LoadAppActionsFromAppletCdn:new i.Cc("app_actions_applet_cdn_extension"),PerformanceScoreOggy:new i.Cc("performance_score_oggy"),SessionTimeout:new i.Cc("extension_session_timeout"),ConnectorGdocs:new i.Cc("extension_connector_gdocs"),ConnectorNonGdocs:new i.Cc("extension_connector_non_gdocs"),ServiceAvailabilityViewMetrics:new i.Cc("extension_service_availability_view_metrics"),ServiceAvailabilityTypingMetrics:new i.Cc("extension_service_availability_typing_metrics"),GDocsUseCanvasFocusedRule:new i.Cc("extension_gdocs_use_canvas_focused_rule"),GDocsExpireCommentIntegrationByChildCount:new i.Cc("extension_gdocs_expire_by_child_count"),FieldIntegrationManager:new i.Cc("extension_field_integration_manager"),CheetahExecReplacementOnlyWhenItsExists:new i.Cc("extension_cheetah_exec_replacement_only_when_its_exists"),SendChangesToCAPIAfterSequentialApply:new i.Cc("extension_send_changes_to_capi_after_sequential_apply"),GDocsTabSwitchFrequencyTracking:new i.Cc("gdocs_tab_switch_frequency_tracking"),DatabricksPerformanceMetrics:new i.Cc("extension_databricks_performance_metrics"),PersonalizedInsightsConsentPopup:new i.Cc("extension_personalized_insights_consent_onboarding"),PersonalizedInsightsEmailDomainAndSignature:new i.Cc("extension_personalized_insights_email_domain_and_signature"),DataSharing:new i.Cc("data_sharing_optin"),TrackLevenshteinDistanceForTextCorruption:new i.Cc("extension_track_levenshtein_distance_for_text_corruption"),TrackTextCorruptionDebugProductMetric:new i.Cc("extension_track_text_corruption_debug_product_metric"),TouchTypistInternal:new i.Cc("extension_touch_typist_internal"),TouchTypistRelease:new i.Cc("extension_touchtypist_release"),TouchTypistPartialTrigger:new i.Cc("extension_touchtypist_partial_trigger","enabled"),TouchTypistForcedBufferFlush:new i.Cc("extension_touchtypist_internal_dlp_bypass","enabled"),TSMintSdkRollout:new i.Cc("extension-ts-mint-sdk-rollout"),FetchSkills:new i.Cc("extension_fetch_skills"),GDocsParseSmartChipFragments:new i.Cc("gdocs_parse_smart_chip_fragments"),NewsNowSingleInstantiation:new i.Cc("newsnow_disable_multiple"),CanContainsPrivateFieldsInDocInfo:new i.Cc("extension_can_contains_private_fields_in_doc_info"),CleanupPageMapCanvas2dContext:new i.Cc("cleanup_page_map_canvas_2d"),InProductDiscountSpecialOffer:new i.Cc("extension_in_product_discount_m2_special_offer"),MapImageNodeForRichText:new i.Cc("map_image_node_for_rich_text"),PreventEmptySetContext:new i.Cc("extension_prevent_empty_set_context"),GDocsSendComments:new i.Cc("gdocs_send_comments"),TrackAlertProcessingPerformance:new i.Cc("extension_track_alert_processing_performance"),AlertProcessingOptimization:new i.Cc("extension_alert_processing_optimization"),VBarsInjectionContainerDisplayContents:new i.Cc("vbars_injection_container_display_contents"),CodaUseCSSTransformTranslateForUnderlinePosition:new i.Cc("coda_use_css_transform_translate_for_underline_position"),CodaHideUnderlineWhenAnimated:new i.Cc("coda_hide_underline_when_animated"),CodaIntegrateOuterElementsCloser:new i.Cc("coda_integrate_outer_elements_closer"),CodaHideGbuttonForDocumentTitle:new i.Cc("coda_hide_gbutton_for_document_title"),CodaPositionGbuttonIntoFixedContainer:new i.Cc("coda_position_gbutton_into_fixed_container"),UseRefactoredUpdatePortForBg:new i.Cc("use_refactored_update_port_for_bg"),GDocsSignUpPopupReactToUserState:new i.Cc("extension_gdocs_signup_popup_react_to_user_state"),FullySignedInExperienceInGDocsFeature:new i.Cc("fully_signedin_gdocs_feature"),FullySignedInExperienceViaTone:new i.Cc("fully_signedin_block_inline_cards_via_tone"),GDocsAllowToDetectAssistantInjectionMode:new i.Cc("extension_gdocs_allow_to_detect_assistant_injection_mode"),GDocsDetectSidebarTypeDynamically:new i.Cc("extension_gdocs_detect_sidebar_type_dynamically"),GDocsInviteNudge:new i.Cc("extension_gdocs_invite_nudge"),GDocsShareModalTracking:new i.Cc("extension_gdocs_share_modal_tracking"),AttributesTriggerFieldIntegration:new i.Cc("extension_integration_target_attributes"),OAuthCheckTokenServiceState:new i.Cc("extension_check_oauth_token_service_state"),OAuthTokenServiceStateFallback:new i.Cc("extension_oauth_token_service_state_fallback"),SnippetsTemplateVariables:new i.Cc("meg_snippets_dynamic_fields"),DomainClaimedUserCopyWithInstitutionDetails:new i.Cc("meg_domain_claimed_user_copy_with_institution_details"),TrackContainerIdFailures:new i.Cc("extension_track_container_id_failures"),AuthenticationOptionsApi:new i.Cc("authentication_options_api"),UseBlockListToConfigureFieldMinSizeForDefaultIntegrations:new i.Cc("extension_use_block_list_to_configure_field_min_size_for_default_integrations"),EnablePathTrackingForSessionEnd:new i.Cc("extension_enable_path_tracking_for_session_end"),LazyLoadSnippetsSearchTrees:new i.Cc("extensions_lazy_load_snippets","enabled"),GDocsVersionHistorySidebarSelector:new i.Cc("extension_gdocs_version_history_selector"),GoogleGroupsIntegration:new i.Cc("extension_google_groups_integration","enabled")}},59366:(e,t,n)=>{n.d(t,{n:()=>o});class o{constructor(e){this._messageApi=e}on(e){this._messageApi.onRuntimeMessage.addListener(e)}off(e){this._messageApi.onRuntimeMessage.removeListener(e)}sendMessage(e){return this._messageApi.sendRuntimeMessage(e)}}},64225:(e,t,n)=>{n.d(t,{h:()=>g});var o=n(74822),i=n(59179),s=n(90572),a=n(32734),r=n(29416),c=n(13391),l=n(56209),d=n(78542),_=n(52698),u=n(37267),h=n(34385);class g{constructor(e,t=Promise.resolve(),n=d.Y.create("PersistentStore"),g=(0,l.Tb)()){this._api=e,this._current=c.h.create({}),this._mismatchedChanges=new o.x,this.get=async e=>h.s.parse(await this._api.get(e),e),this.getAll=async()=>h.s.parse(await this._api.getAll()),this.patch=async(e,t=!1)=>{if(t||!h.s.hasProtectedKeys(e))return await this._api.set(e);throw new Error("Attempting to directly patch protected keys of the store. Consider using actions for this operation.")},this.view=this._current.view.bind(this._current),this.dispose=()=>{this._subs.forEach((e=>e.unsubscribe())),this._subs=[]},this.changes=(0,u.D)(this._api.changes).pipe((0,i.U)(h.s.parseChange),(0,s.h)((e=>0!==Object.keys(e).length)),(0,a.B)()),this._subs=[],this._applyChanges=(e,t)=>{Object.keys(t).forEach((n=>{var o;if(!_.vZ(null===(o=t[n])||void 0===o?void 0:o.oldValue,e[n]))throw new Error("mismatched_changes")}));const n=_.UI(((e,t)=>null==t?void 0:t.newValue),t);return Object.assign({},e,n)},t.then((()=>this._api.getAll())).then((e=>this._current.set(h.s.parse(e)))).then((()=>{this._subs.push(this.changes.subscribe((e=>{try{this._current.modify((t=>this._applyChanges(t,e)))}catch(e){"mismatched_changes"===e.message?(n.warn("Mismatched changes to Persistent Store",e),this._mismatchedChanges.next(void 0)):(n.error("Unexpected error while applying changes to Persistent Store",e),g.storageApplyChangesFailed(e))}})))})),this._subs.push(this._mismatchedChanges.pipe((0,r.b)(200)).subscribe((()=>{this._api.getAll().then((e=>this._current.set(h.s.parse(e))))})))}}},34385:(e,t,n)=>{n.d(t,{s:()=>o});var o,i=n(83763),s=n(52698);!function(e){e.allPersistentKeys=["user","version","dynamicConfig","extensionSettings","dynamicConfigOverrideKey","environmentState","connection","activeTab","extensionFSM","fieldsSettings","alarms","clickToRunEnabledOnce","dapi","growthSettings","extensionMeta","gnarInternalStorage","extensionInstallDate","extensionInstallSource","lastAuthnEvent","copiedTextMessage","passport","mise","iterable","connectorSettings","oauthSDKTokenExchangeMethod",i.Nl,"authenticationOptions","authTokenInitialRefreshDone","authenticationStarted","claimedUserSettings","inviteNudgeFirstTimestamp"];const t=["user","dapi","dynamicConfig","alarms","lastAuthnEvent","mise",i.Nl];e.parse=(t,n=e.allPersistentKeys)=>s.Ue(n.map((e=>[e,t[e]]))),e.parseChange=t=>s.hX(((e,t)=>void 0!==t),s.Ue(e.allPersistentKeys.map((e=>[e,t[e]])))),e.hasProtectedKeys=e=>t.some((t=>t in e))}(o||(o={}))},8061:(e,t,n)=>{n.d(t,{d:()=>o});class o{constructor(e,t,n){this._messageService=e,this._customInboundEventName=t,this._customOutboundEventName=n,this.inbound={subscribe:e=>{const t=t=>{if(!function(e,t){if(!e||"object"!=typeof e)return!1;const n="type"in e&&e.type===t,o="message"in e;return n&&o}(t,this._customInboundEventName))return;const n=t.message;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._messageService.on(t),{unsubscribe:()=>this._messageService.off(t)}}},this.outbound=e=>{const t={type:this._customOutboundEventName,message:e};this._messageService.sendMessage(t)}}}},99902:(e,t,n)=>{n.d(t,{S:()=>o});class o{constructor(e,t){this._transport=e,this._api=t,this._disposed=!1,this._sub=this._transport.inbound.subscribe({next:async e=>{try{const t=this._api[e.data.method];if("function"!=typeof t)throw{message:`invalid method name ${String(e.data.method)}`};{const n={clientId:e.clientId},o=await t.call(this._api,n,...e.data.args);this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,res:o}})}}catch(t){this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,err:t}})}}})}dispose(){this._disposed||(this._disposed=!0,this._sub.unsubscribe())}}},45860:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(52698);function i(e){return o.Ue(Object.entries(e).map((([t,n])=>[t,(t,...o)=>n.apply(e,o)])))}},19516:(e,t,n)=>{n.d(t,{a:()=>i});var o=n(78542);const i=e=>{const t=o.Y.create("AuthActions");return{beginAuth:()=>{t.debug("beginAuth"),e.patch({authenticationStarted:(new Date).toISOString()})}}}},83542:(e,t,n)=>{n.d(t,{j:()=>o});const o=e=>{let t;const n=()=>(t||(t={networkOffline:!self.navigator.onLine,online:!0}),t),o=async()=>{const{connection:t}=await e.get(["connection"]);return null!=t?t:n()};return{initConnection:async()=>{const{connection:t}=await e.get(["connection"]);t||await e.patch({connection:n()})},modifyConnection:async t=>{const n=await o();return e.patch({connection:{...n,...t}})},setOffline:async t=>{const n=await o();if(n.networkOffline!==t)return e.patch({connection:{...n,networkOffline:t}})}}}},74922:(e,t,n)=>{n.d(t,{k:()=>o});const o=e=>({modifyEnvironment:async t=>{const{environmentState:n}=await e.get(["environmentState"]);return e.patch({environmentState:{...n,...t}})}})},11206:(e,t,n)=>{n.d(t,{q:()=>s});var o=n(6299),i=n(80945);const s=e=>({gdocsOptedIn:()=>{return e.patch({extensionSettings:(0,o.J_)(null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:i.he,"docs.google.com",{enabled:!0,disabledDate:void 0})});var t}})},29552:(e,t,n)=>{n.d(t,{Q:()=>c});var o=n(49079),i=n(22180),s=n(6299),a=n(73965),r=n(4256);const c=e=>{const t=(0,s.gC)(e);return{toggleDefs:n=>e.patch({extensionSettings:(0,s.k1)(t(),{enabledDefs:n})}),toggleAutocorrect:n=>e.patch({extensionSettings:(0,s.k1)(t(),{autocorrectEnabled:n})}),toggleAlwaysAvailableAssistant:n=>{var o;const i=null!==(o=t().common.alwaysAvailableAssistantSettings)&&void 0!==o?o:a.Nr;return e.patch({extensionSettings:(0,s.k1)(t(),{alwaysAvailableAssistantSettings:{...i,enabled:n}})})},toggleAutocomplete:n=>e.patch({extensionSettings:(0,s.k1)(t(),{autocompleteEnabled:n})}),toggleTouchTypist:n=>{var i;const a=null!==(i=t().common.touchTypistSettings)&&void 0!==i?i:o.Y;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistSettings:{...a,enabled:n,snoozedUntil:null}})})},setTouchTypistToggledByUser:({userId:n,value:i})=>{var a,r,c;const l=null!==(a=t().common.touchTypistState)&&void 0!==a?a:o.c,d=null!==(r=l.autoOptOutExperiment)&&void 0!==r?r:{},_={...null!==(c=d[n])&&void 0!==c?c:{},enabledToggledByUser:i};return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...l,autoOptOutExperiment:{...d,[n]:_}}})})},snoozeTouchTypist:()=>{var n;const i=null!==(n=t().common.touchTypistSettings)&&void 0!==n?n:o.Y;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistSettings:{...i,enabled:!1,snoozedUntil:new Date((new Date).getTime()+r.xO).toISOString()}})})},setTouchTypistHotkey:({hotkey:n})=>{var i;const a=null!==(i=t().common.touchTypistSettings)&&void 0!==i?i:o.Y;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistSettings:{...a,hotkey:n}})})},incrementAccessibilityOnboardingAlertsCount:()=>{var n;const i=null!==(n=t().common.touchTypistState)&&void 0!==n?n:o.c,{accessibilityOnboardingAlertsCount:a=o.c.accessibilityOnboardingAlertsCount}=i;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...i,accessibilityOnboardingAlertsCount:a+1}})})},incrementTouchTypistUserAcceptedCount:()=>{var n;const i=null!==(n=t().common.touchTypistState)&&void 0!==n?n:o.c;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...i,userAcceptedCount:Math.min(i.userAcceptedCount+1,3),lastUserAcceptedAt:(new Date).toISOString()}})})},setHasBeenAutoOptedOut:({userId:n,hasBeenAutoOptedOut:i})=>{var a,r,c;const l=null!==(a=t().common.touchTypistState)&&void 0!==a?a:o.c,d=null!==(r=l.autoOptOutExperiment)&&void 0!==r?r:{},_={...null!==(c=d[n])&&void 0!==c?c:{},hasBeenAutoOptedOut:i};return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...l,autoOptOutExperiment:{...d,[n]:_}}})})},toggleCitationBuilderForDomain:({domain:n,enabled:o,pathName:i,inAllowList:r})=>{var c;const l=null!==(c=t().common.citationBuilder)&&void 0!==c?c:a.KC.empty;return e.patch({extensionSettings:(0,s.k1)(t(),{citationBuilder:{...l,domains:{...l.domains,[n]:{disabled:!o,toggleDate:(new Date).getTime(),togglePathName:i,inAllowList:r}}}})})},toggleTranslateOnboardingForDomain:({domain:n,enabled:o})=>{var i;const r=null!==(i=t().common.translateOnboarding)&&void 0!==i?i:a.aK.empty;return e.patch({extensionSettings:(0,s.k1)(t(),{translateOnboarding:{...r,domains:{...r.domains,[n]:{disabled:!o}}}})})},toggleSite:({enabled:n,domain:o,clickToRunEnabled:i})=>e.patch({extensionSettings:(0,s.J_)(t(),o,{enabled:n,disabledDate:!0===n?void 0:Date.now(),...void 0!==i?{clickToRunEnabled:i}:void 0})}),setKeyboardShortcut:n=>{var o;const a=null!==(o=t().common.keyboardShortcuts)&&void 0!==o?o:{openAssistant:(0,i.e)("openAssistant"),closeAssistant:(0,i.e)("closeAssistant"),openVBar:(0,i.e)("openVBar")};return e.patch({extensionSettings:(0,s.k1)(t(),{keyboardShortcuts:{...a,...n}})})},toggleEnhancedScreenReaderUXSupport:n=>e.patch({extensionSettings:(0,s.k1)(t(),{isEnhancedScreenReaderUXSupported:n})})}}},83089:(e,t,n)=>{n.d(t,{q:()=>d});var o=n(19516),i=n(83542),s=n(74922),a=n(11206),r=n(58280),c=n(29552),l=n(87865);const d=e=>({quickSettings:(0,c.Q)(e),gdocs:(0,a.q)(e),settings:(0,l.C)(e),connection:(0,i.j)(e),tabs:(0,r.a)(e),environment:(0,s.k)(e),auth:(0,o.a)(e)})},87865:(e,t,n)=>{n.d(t,{C:()=>i});var o=n(6299);const i=e=>{const t=(0,o.gC)(e),n=async n=>{const i=t();Object.keys(n).every((e=>n[e]===i.common[e]))||await e.patch({extensionSettings:(0,o.k1)(i,n)})};return{patchCommonSettings:n,setDesktopIntegration:e=>n({isDesktopIntegrationEnabled:e}),enableClickToRunOnAllSites:()=>n({clickToRunOnAllSites:!0}),enableHistoryLoggerUntil:e=>n({historyLoggerEnabledUntil:e}),disableHistoryLogger:()=>n({historyLoggerEnabledUntil:0}),enableAdvancedHistoryLoggerUntil:e=>n({advancedHistoryLoggerEnabledUntil:e}),disableAdvancedHistoryLogger:()=>n({advancedHistoryLoggerEnabledUntil:0}),disableOnTab:n=>e.patch({extensionSettings:(0,o.J_)(t(),n,{enabled:!1,disabledDate:Date.now()})}),toggleDebugMenu:(e=!0)=>n({isDebugMenuVisible:e}),toggleGOSDebugger:e=>n({gOSDebuggerEnabled:e}),setGOSAppletChannel:e=>n({gOSAppletChannel:e}),setGOSAssistantAppletUrl:e=>n({gOSAssistantAppletUrl:e})}}},58280:(e,t,n)=>{n.d(t,{a:()=>i});var o=n(18669);const i=e=>({enableOnceClickToRun:async()=>{const{clickToRunEnabledOnce:t,activeTab:n}=await e.get(["clickToRunEnabledOnce","activeTab"]);return e.patch({clickToRunEnabledOnce:{...null!=t?t:{},...n?{[n.id]:{[(0,o.KK)(n.url)]:!0}}:{}}})},setActiveTab:t=>e.patch({activeTab:t})})},73965:(e,t,n)=>{n.d(t,{G6:()=>d,KC:()=>i,Nr:()=>c,aK:()=>s,v3:()=>l});var o,i,s,a=n(12518),r=n(81356);!function(e){e.fromUserType=e=>{switch(e){case r.F.premium:return a.F2("premium");case r.F.registered:return a.F2("free");default:return a.t$("unknownUserType")}}}(o||(o={})),function(e){let t;!function(e){e.apa="apa",e.mla="mla",e.chicago="chicago"}(t=e.Style||(e.Style={})),e.empty={domains:{},onboardingVersionSeen:-1,style:t.apa}}(i||(i={})),function(e){e.empty={domains:{}}}(s||(s={}));const c={};var l;!function(e){let t;!function(e){e.SUGGESTED_TERM="suggestedTermOnboardingSeen",e.TERM_DETAILS="onboardingSeen"}(t=e.OnboardingSeenFor||(e.OnboardingSeenFor={})),e.empty={enabled:!0,[t.SUGGESTED_TERM]:!1,[t.TERM_DETAILS]:!1},e.get=t=>({...e.empty,...t})}(l||(l={}));const d=()=>({seen:{},accepted:{},detectedTones:{}})},82004:()=>{},57810:e=>{e.exports={settingsMenu:"OPvuG",settingsMenuVisible:"vDEFm",settingsButton:"RsPvF"}},45079:e=>{e.exports={notchContainer:"g0Vgr",notch:"nQgcx",hidden:"MB55l",peeking:"wYEGR",notchButton:"K9COx"}},77671:e=>{e.exports={gr_no_print:"dnXmp"}}}]);