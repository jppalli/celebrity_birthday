/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={4666:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerService=void 0;const r=n(9959),o=n(5602);class i{static getLogger(){return this.initialized||this.setup(),i.provider.getCategory("LoggerService")}static setup(){const e=this.createLoggerCategoryConfiguration();i.provider=o.CategoryProvider.createProvider("LoggerService",e),this.initialized=!0}static createLoggerCategoryConfiguration(){return{level:r.LogLevel.Debug,channel:{type:"RawLogChannel",write:(e,t)=>{const n=e.logNames.indexOf("#")+1,r=e.logNames.slice(n).toString();console.info(`[${r}] [${e.level}] ${e.message}`)}}}}}t.LoggerService=i,i.initialized=!1},2071:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(4155),t)},8595:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.globalEvent=t.EventEmitter=void 0;class n{constructor(){this._eventHandlers={}}isValidType(e){return"string"==typeof e}isValidHandler(e){return"function"==typeof e}on(e,t){if(!e||!t)return!1;if(!this.isValidType(e))return!1;if(!this.isValidHandler(t))return!1;let n=this._eventHandlers[e];return n||(n=this._eventHandlers[e]=[]),!(n.indexOf(t)>=0||(t._once=!1,n.push(t),0))}once(e,t){if(!e||!t)return!1;if(!this.isValidType(e))return!1;if(!this.isValidHandler(t))return!1;const n=this.on(e,t);return n&&(t._once=!0),n}off(e,t){if(!e)return this.offAll();if(!t)return void(this._eventHandlers[e]=[]);if(!this.isValidType(e))return;if(!this.isValidHandler(t))return;const n=this._eventHandlers[e];if(n&&n.length)for(let e=0;e<n.length;e++)if(n[e]===t){n.splice(e,1);break}}offAll(){this._eventHandlers={}}fire(e,...t){if(!e||!this.isValidType(e))return;const n=this._eventHandlers[e];if(!n||!n.length)return;const r=this.createEvent(e,{args:t});for(const o of n)this.isValidHandler(o)&&(o._once&&(r.once=!0),o(r,...t),r.once&&this.off(e,o))}has(e,t){if(!e||!this.isValidType(e))return!1;const n=this._eventHandlers[e];return!(!n||!n.length||t&&this.isValidHandler(t)&&!(n.indexOf(t)>=0))}getHandlers(e){return e&&this.isValidType(e)&&this._eventHandlers[e]||[]}createEvent(e,t,n=!1){return{type:e,data:t,timestamp:Date.now(),once:n}}}t.EventEmitter=n,t.globalEvent=new n},5533:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DesktopWindow=void 0;const r=n(5842),o=n(7065);class i extends r.WindowBase{constructor(e,t){super(e,t)}type(){return o.WindowType.Desktop}resize(e){throw new Error("Method not implemented.")}}t.DesktopWindow=i},201:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Edge=void 0,(n=t.Edge||(t.Edge={})).None="None",n.Left="Left",n.Right="Right",n.Top="Top",n.Bottom="Bottom",n.TopLeft="TopLeft",n.TopRight="TopRight",n.BottomLeft="BottomLeft",n.BottomRight="BottomRight",function(e){e.isTop=function(t){return t===e.Top||t===e.TopLeft||t===e.TopRight},e.isBottom=function(t){return t===e.Bottom||t===e.BottomLeft||t===e.BottomRight},e.isLeft=function(t){return t===e.Left||t===e.TopLeft||t===e.BottomLeft},e.isRight=function(t){return t===e.Right||t===e.TopRight||t===e.BottomRight}}(t.Edge||(t.Edge={}))},7095:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OSRType=void 0,(n=t.OSRType||(t.OSRType={})).Default="default",n.DesktopOnly="desktopOnly",n.InGameOnly="inGameOnly"},7731:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WindowState=void 0,(n=t.WindowState||(t.WindowState={})).Hidden="hidden",n.Normal="normal",n.Minimized="minimized",n.Maximize="maximize",n.Closed="closed"},7065:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WindowType=void 0,(n=t.WindowType||(t.WindowType={})).Desktop="desktop",n.Offscreen="offscreen"},4155:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5842),t),o(n(7994),t),o(n(1438),t),o(n(5533),t)},9697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonitorStateController=void 0,t.MonitorStateController=class{constructor(e){this.onScreenPropertyChanged=e=>{const{monitor:t,id:n}=e;n===this.window.Id()&&(console.info(`screen changed: ${n}`,t),this.window.onWindowMonitorPropertyChanged({width:t.workingArea.width,height:t.workingArea.height,left:t.workingArea.left,top:t.workingArea.top},e.window))},this.window=e,overwolf.windows.onScreenPropertyChanged.addListener(this.onScreenPropertyChanged),console.info(`Creating monitor controller for ${this.window.Id()}`)}dispose(){console.info(`Disposing of monitor controller for ${this.window.Id()}`),overwolf.windows.onScreenPropertyChanged.removeListener(this.onScreenPropertyChanged),this.window=null}}},6790:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowStateController=void 0;const r=n(1524);t.WindowStateController=class{constructor(e){this.onWindowStateChanged=e=>{e.window_id===this.window.Id()&&("closed"!==e.window_state_ex?e.window_state_ex!==e.window_previous_state_ex&&this.raiseWindowStateEvent(e):this.window.onWindowClosed())},this.window=e,overwolf.windows.onStateChanged.addListener(this.onWindowStateChanged)}raiseWindowStateEvent(e){this.window.windowInfo&&(this.window.windowInfo.stateEx=e.window_state_ex);const t=r.EnumConvertors.ToWindowState(e.window_state_ex),n=r.EnumConvertors.ToWindowState(e.window_previous_state_ex);switch(e.window_state_ex){case"minimized":this.window.fire("minimized",t,n);break;case"maximized":this.window.fire("maximized",t,n);break;case"hidden":this.window.fire("hide",t,n);break;case"normal":"hidden"===e.window_previous_state_ex?this.window.fire("show",t,n):this.window.fire("restore",t,n);break;default:console.error(`window state changed: unknown state ${e.window_state_ex}`)}}dispose(){overwolf.windows.onStateChanged.removeListener(this.onWindowStateChanged),this.window=null}}},1438:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSRWindow=void 0;const r=n(7065),o=n(5842);class i extends o.WindowBase{constructor(e,t){super(e,null)}type(){return r.WindowType.Offscreen}resize(e,t){throw new Error("Method not implemented.")}get desktopOnly(){var e;return(null===(e=this.options)||void 0===e?void 0:e.desktopOnly)||super.desktopOnly}}t.OSRWindow=i},2444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowPositioning=void 0;const r=n(201),o=n(7065),i=n(4666),s=n(6775);class a{static async setDockPosition(e){switch(null==e?void 0:e.window.type()){case o.WindowType.Desktop:this.setWindowDockPosition(e);break;case o.WindowType.Offscreen:this.setOffscreenWindowDockPosition(e)}}static async centerWindow(e,t){return new Promise((async(n,r)=>{const o=this.getCenterPos(e,t);this.logger.info(`centering ${e.Id()} at (${o.x}, ${o.y})`),overwolf.windows.changePosition(e.Id(),o.x,o.y,(e=>{e.success?n(!0):r()}))}))}static getCenterPos(e,t){const{width:n,height:r,dpiAwareWidth:i,dpiAwareHeight:s}=e.getBounds(),a=e.type()===o.WindowType.Desktop,c=a?n:i,u=a?r:s;return{x:Math.round(t.left+t.width/2-c/2),y:Math.round(t.top+t.height/2-u/2)}}static async setOffscreenWindowDockPosition(e){return new Promise((async(t,n)=>{e&&e.window&&e.edge&&(e.monitor=await s.MonitorHelper.getWindowMonitor(e.window),t(await this.setWindowDockPosition(e)))}))}static async setWindowDockPosition(e){return new Promise((async(t,n)=>{if(!e||!e.window||!e.edge)return;const{window:o,edge:i,monitor:s,marginOptions:a}=e,{width:c,height:u,left:l,top:f}=s,{dpiAwareWidth:d,dpiAwareHeight:h}=o.getBounds(),p=this.getCenterPos(o,s);if(r.Edge.isTop(i)){const e=a.marginY?a.marginY:a.marginX;p.y=f+e}if(r.Edge.isLeft(i)){const e=a.marginX;p.x=l+e}if(r.Edge.isRight(i)){const e=a.marginX;p.x=c+l-d-e}if(r.Edge.isBottom(i)){const e=a.marginY?a.marginY:a.marginX;p.y=u+f-h-e}t(await o.setBounds(p))}))}}t.WindowPositioning=a,a.logger=i.LoggerService.getLogger().getChildCategory("WindowPositioning")},4847:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyDefaultOptions=void 0;const r=n(7095),o=n(7065);t.applyDefaultOptions=function(e,t){e&&(void 0===e.grabFocusOnDesktop&&(e.grabFocusOnDesktop=!1),void 0===e.popupBlocker&&(e.popupBlocker=!0),void 0===e.blockTopWindowNavigation&&(e.blockTopWindowNavigation=!0),void 0===e.autoDpi&&(e.autoDpi=!0),t===o.WindowType.Desktop&&function(e){void 0===e.showInTaskBar&&(e.showInTaskBar=!0),e.desktopWindow=!0}(e),t===o.WindowType.Offscreen&&function(e){void 0===e.type&&(e.type=r.OSRType.Default),void 0===e.transparent&&(e.transparent=!0),void 0===e.autoZoom&&(e.autoZoom=!0),e.type===r.OSRType.InGameOnly&&(e.InGameOnly=!0),e.type===r.OSRType.DesktopOnly&&(e.DesktopOnly=!0)}(e))}},1524:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumConvertors=void 0;const r=n(7731);t.EnumConvertors=class{static ToWindowState(e){switch(e){case"minimized":return r.WindowState.Minimized;case"maximized":return r.WindowState.Maximize;case"hidden":return r.WindowState.Hidden;case"normal":return r.WindowState.Normal;case"closed":return r.WindowState.Closed;default:throw new Error(`unknown window state ${e}`)}}}},6775:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonitorHelper=void 0;class n{static async getWindowMonitor(e){return e.desktopOnly?n.getWindowDesktopMonitor(e.windowInfo.monitorId):new Promise((async t=>{overwolf.games.getRunningGameInfo2((async r=>{var o;if(!(null==r?void 0:r.success)||!(null===(o=null==r?void 0:r.gameInfo)||void 0===o?void 0:o.isInFocus))return void t(await n.getWindowDesktopMonitor(e.windowInfo.monitorId));const i=r.gameInfo,s={width:i.logicalWidth,height:i.logicalHeight,left:0,top:0};t(s)}))}))}static async getWindowDesktopMonitor(e){return new Promise((async(t,n)=>{overwolf.utils.getMonitorsList((async r=>{var o;const i=null===(o=null==r?void 0:r.displays)||void 0===o?void 0:o.find((t=>t.id===e));if(!r.success||!i)return void n("Failed to find monitor");const s={width:i.workingArea.width,height:i.workingArea.height,left:i.workingArea.left,top:i.workingArea.top};t(s)}))}))}}t.MonitorHelper=n},5842:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowBase=void 0;const r=n(8595),o=n(201),i=n(7065),s=n(6790),a=n(2444),c=n(4847),u=n(9697),l=n(6775),f=n(4666);class d extends r.EventEmitter{constructor(e,t){super(),this.logger=f.LoggerService.getLogger().getChildCategory("WindowBase"),this.onWindowResized=e=>{e.id===this.id&&(this.owWindowInfo=e,e.logicalBounds&&this.fire("resized",{width:e.logicalBounds.width,height:e.logicalBounds.height}))},this.onWindowMoved=e=>{e.id===this.id&&(this.owWindowInfo=e,this.isDragging=!1,this.performAnchoring(),this.fire("moved",{x:e.logicalBounds.left,y:e.logicalBounds.top}))},this.onWindowDPIChanged=e=>{var t;if((null===(t=null==e?void 0:e.window)||void 0===t?void 0:t.id)!==this.id)return;const{window:n,prevDPI:r,newDPI:o}=e;this.owWindowInfo=n,this.performAutoZoom(r,o)},this.onWindowDragStarted=e=>{e.id===this.id&&(this.owWindowInfo=e,this.isDragging=!0,this.logger.debug(`start dragging ${this.id}`))},this.onWindowReadyToShow=e=>{e.id===this.id&&this.fire("ready-to-show")},this.onWindowLoadError=e=>{e.id===this.id&&this.fire("load-error")},null==t?(this.setDefaultOption(e),this.creationPromise=null!=e?this.createInternal(e):this.openInternal()):this.id=t}setDefaultOption(e){(0,c.applyDefaultOptions)(e,this.type())}saveWindowOptions(e,t){this.backgroundWindow=this.backgroundWindow||overwolf.windows.getMainWindow(),void 0===this.backgroundWindow.___odkinternal___&&(this.backgroundWindow.___odkinternal___={}),this.backgroundWindow.___odkinternal___[t]||(this.backgroundWindow.___odkinternal___[t]=e,this.options=this.backgroundWindow.___odkinternal___[t])}readWindowOptions(e){this.backgroundWindow=this.backgroundWindow||overwolf.windows.getMainWindow(),this.options=this.backgroundWindow.___odkinternal___[e],this.logger.debug(`read window ${e} options: ${JSON.stringify(this.options)}`)}async awaitableTimeout(e,t){return new Promise(((n,r)=>{setTimeout((async()=>{n(await e())}),t)}))}Id(){return this.id}loadUrl(e){return new Promise((async t=>{e||t(!1),this.options.url=e,this.id?overwolf.windows2.loadUrl(this.id,e,(e=>{t(e.success)})):(await this.createInternal(this.options),t(!!this.id))}))}async setTopmost(e){return await this.assureCreated(),new Promise((async(t,n)=>{overwolf.windows.setTopmost(this.id,e,(e=>{e.success?t():n(e.error)}))}))}async center(){return await this.assureCreated(),new Promise((async(e,t)=>{const n=await l.MonitorHelper.getWindowMonitor(this);return a.WindowPositioning.centerWindow(this,n)}))}async zoom(e){return await this.assureCreated(),new Promise((async t=>{overwolf.windows.setZoom(e,this.id),t()}))}async mute(e,t){return await this.assureCreated(),new Promise((async(n,r)=>{t?overwolf.windows.muteAll((e=>{e.success?n():r()})):overwolf.windows.setMute(e,(e=>{e.success?n():r(e.error)}))}))}async close(){return await this.assureCreated(),new Promise((async(e,t)=>{overwolf.windows.close(this.id,(n=>{n.success?e():t(n.error)}))}))}async show(){return await this.assureCreated(),new Promise((async(e,t)=>{overwolf.windows.restore(this.id,(n=>{n.success?e(!0):t(n.error)}))}))}async hide(){return await this.assureCreated(),new Promise((async(e,t)=>{overwolf.windows.hide(this.id,(n=>{n.success?e():t(n.error)}))}))}async minimize(){return await this.assureCreated(),new Promise((async(e,t)=>{overwolf.windows.minimize(this.id,(n=>{n.success?e():t(n.error)}))}))}async maximize(){return await this.assureCreated(),new Promise((async(e,t)=>{overwolf.windows.maximize(this.id,(n=>{n.success?e():t(n.error)}))}))}async restore(){return await this.assureCreated(),new Promise((async(e,t)=>{overwolf.windows.restore(this.id,(n=>{n.success?e():t(n.error)}))}))}async setPosition(e){return await this.assureCreated(),new Promise((async(t,n)=>{overwolf.windows.changePosition(this.id,e.x,e.y,(e=>{t(e.success)}))}))}async setSize(e){return await this.assureCreated(),new Promise((async(t,n)=>{overwolf.windows.changeSize(this.id,e.width,e.height,(e=>{e.success?t(!0):n(e.error)}))}))}async setBounds(e){return await this.assureCreated(),new Promise((async(t,n)=>{var r;overwolf.windows.setBounds({window_id:this.id,bounds:{width:isNaN(e.width)?null:e.width,height:isNaN(e.height)?null:e.height,x:isNaN(e.y)?null:e.x,y:isNaN(e.y)?null:e.y},auto_dpi_resize:null===(r=this.options)||void 0===r?void 0:r.autoDpi},(e=>{t(e.success)}))}))}async dock(e,t,n){await this.assureCreated(),e&&(n||(n=await l.MonitorHelper.getWindowMonitor(this)),await a.WindowPositioning.setDockPosition({window:this,edge:e,marginOptions:t,monitor:n}))}async anchor(e,t){var n;if(await this.assureCreated(),e){if(!e||e===o.Edge.None)return this.options.anchoring=null,null===(n=this.monitorStateController)||void 0===n||n.dispose(),void(this.monitorStateController=null);this.monitorStateController||(this.monitorStateController=new u.MonitorStateController(this)),this.options.anchoring={window:this,edge:e,marginOptions:t},this.performAnchoring()}}getBounds(){var e,t,n,r,o,i,s,a,c,u,l,f;this.assureCreated();const d=null!==(n=null===(t=null===(e=this.owWindowInfo)||void 0===e?void 0:e.logicalBounds)||void 0===t?void 0:t.width)&&void 0!==n?n:NaN,h=null!==(i=null===(o=null===(r=this.owWindowInfo)||void 0===r?void 0:r.logicalBounds)||void 0===o?void 0:o.height)&&void 0!==i?i:NaN;return{x:null!==(c=null===(a=null===(s=this.owWindowInfo)||void 0===s?void 0:s.logicalBounds)||void 0===a?void 0:a.left)&&void 0!==c?c:NaN,y:null!==(f=null===(l=null===(u=this.owWindowInfo)||void 0===u?void 0:u.logicalBounds)||void 0===l?void 0:l.top)&&void 0!==f?f:NaN,width:d,height:h,dpiAwareWidth:isNaN(d)?NaN:d*this.owWindowInfo.dpiScale,dpiAwareHeight:isNaN(h)?NaN:h*this.owWindowInfo.dpiScale}}async move(){return await this.assureCreated(),new Promise((async(e,t)=>{overwolf.windows.dragMove(this.id,(n=>{n.success?(this.isDragging=!1,e(!0)):t(n.error)}))}))}get desktopOnly(){return this.type()===i.WindowType.Desktop}openInternal(){if(this.logger.debug("open existing window"),this.id)throw new Error("Window already created");return this.backgroundWindow=overwolf.windows.getMainWindow(),this.creationPromise=new Promise(((e,t)=>{overwolf.windows2.create(null,null,(n=>{this.logger.debug(`open existing window result: ${JSON.stringify(n)}`),n.success?(this.readWindowOptions(n.window.id),this.onWindowCreated(n.window),e()):(this.clearWindowOptions(),this.id=null,t(n.error))}))})),this.creationPromise}createInternal(e){if(this.id)throw new Error("Window already created");if(!(null==e?void 0:e.id))throw new Error("ID must be provided");const{id:t}=e;return this.saveWindowOptions(e,t),this.creationPromise=new Promise(((n,r)=>{overwolf.windows2.create(t,e,(e=>{e.success?(this.onWindowCreated(e.window),n()):(this.clearWindowOptions(),this.id=null,r(e.error))}))})),this.creationPromise}async assureCreated(){if(this.creationPromise&&await this.creationPromise,closed)throw new Error("Window closed");if(!this.id)throw new Error("Window not created")}onWindowCreated(e){this.logger.info(`window created: ${e.id}`),this.id=e.id,this.owWindowInfo=e,this.windowStateController=new s.WindowStateController(this),overwolf.windows2.resized.addListener(this.onWindowResized),overwolf.windows2.moved.addListener(this.onWindowMoved),overwolf.windows2.dragStarted.addListener(this.onWindowDragStarted),overwolf.windows2.dpiChanged.addListener(this.onWindowDPIChanged),overwolf.windows2.readyToShow.addListener(this.onWindowReadyToShow),overwolf.windows2.loadError.addListener(this.onWindowLoadError),this.positionNewWindow()}async performAnchoring(e){var t;if(null==this.options||null==(null===(t=this.options)||void 0===t?void 0:t.anchoring))return;if(this.isDragging)return void this.logger.info("not performing anchoring while dragging");e||(e=await l.MonitorHelper.getWindowMonitor(this));const{edge:n,marginOptions:r}=this.options.anchoring;this.dock(n,r,e)}performAutoZoom(e,t){var n;if(null===(n=this.options)||void 0===n?void 0:n.autoZoom)if(1===t)this.zoom(0);else{const n=t>e?-1:1;this.zoom(n*t/e)}}async positionNewWindow(){var e,t,n,r,o;void 0!==(null===(e=this.options)||void 0===e?void 0:e.x)&&void 0!==(null===(t=this.options)||void 0===t?void 0:t.x)||(void 0===(null===(n=this.options)||void 0===n?void 0:n.anchoring)?void 0===(null===(r=this.options)||void 0===r?void 0:r.dockPosition)?await this.center():await this.dock(null===(o=this.options)||void 0===o?void 0:o.dockPosition):await this.anchor(this.options.anchoring.edge,this.options.anchoring.marginOptions))}clearWindowOptions(){try{this.backgroundWindow&&this.id&&(this.backgroundWindow.___odkinternal___[this.id]=null)}catch(e){this.logger.warn(`error resetting window ${this.id} options: ${e}`)}this.backgroundWindow=null,this.options=null}get windowInfo(){return this.owWindowInfo}get windowOptions(){return this.options}onWindowClosed(){var e,t;this.logger.info(`window ${this.id} closed`),this.closed=!0,null===(e=this.windowStateController)||void 0===e||e.dispose(),this.windowStateController=null,null===(t=this.monitorStateController)||void 0===t||t.dispose(),this.monitorStateController=null,overwolf.windows2.resized.removeListener(this.onWindowResized),overwolf.windows2.moved.removeListener(this.onWindowMoved),overwolf.windows2.dpiChanged.removeListener(this.onWindowDPIChanged),overwolf.windows2.readyToShow.removeListener(this.onWindowReadyToShow),overwolf.windows2.loadError.removeListener(this.onWindowLoadError),overwolf.windows2.dragStarted.removeListener(this.onWindowDragStarted),this.clearWindowOptions(),this.fire("closed",this),this.id=null}onWindowMonitorPropertyChanged(e,t){this.owWindowInfo=t,this.performAnchoring(e)}on(e,t){super.on(e,t)}once(e,t){super.once(e,t)}}t.WindowBase=d},7994:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Windows=void 0;const r=n(5533),o=n(1438);t.Windows=class{static Self(){return new Promise(((e,t)=>{overwolf.windows.getCurrentWindow((async n=>{var i;switch("Background"===n.window.type&&t("background page doesn't have window"),n.window.type){case"Desktop":{const t=new r.DesktopWindow(null);return await t.assureCreated(),e(t)}case"OffScreen":{const t=new o.OSRWindow(null);return await t.assureCreated(),e(t)}default:t(`unknown window type: ${null===(i=null==n?void 0:n.window)||void 0===i?void 0:i.type}`)}}))}))}static FromId(e){return new Promise(((t,n)=>{overwolf.windows.getWindow(e,(i=>{var s;switch(i.success||n(i.error),"Background"===i.window.type&&n("background page doesn't have window"),i.window.type){case"Desktop":return t(new r.DesktopWindow(null,e));case"OffScreen":return t(new o.OSRWindow(null,e));default:n(`unknown window type: ${null===(s=null==i?void 0:i.window)||void 0===s?void 0:s.type}`)}}))}))}}},9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var r=n(4867),o=n(6026),i=n(4372),s=n(5327),a=n(4097),c=n(4109),u=n(7985),l=n(5061),f=n(7874),d=n(5263);e.exports=function(e){return new Promise((function(t,n){var h,p=e.data,g=e.headers,v=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(h),e.signal&&e.signal.removeEventListener("abort",h)}r.isFormData(p)&&delete g["Content-Type"];var m=new XMLHttpRequest;if(e.auth){var w=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";g.Authorization="Basic "+btoa(w+":"+b)}var _=a(e.baseURL,e.url);function S(){if(m){var r="getAllResponseHeaders"in m?c(m.getAllResponseHeaders()):null,i={data:v&&"text"!==v&&"json"!==v?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m};o((function(e){t(e),y()}),(function(e){n(e),y()}),i),m=null}}if(m.open(e.method.toUpperCase(),s(_,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,"onloadend"in m?m.onloadend=S:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(S)},m.onabort=function(){m&&(n(l("Request aborted",e,"ECONNABORTED",m)),m=null)},m.onerror=function(){n(l("Network Error",e,null,m)),m=null},m.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},r.isStandardBrowserEnv()){var P=(e.withCredentials||u(_))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;P&&(g[e.xsrfHeaderName]=P)}"setRequestHeader"in m&&r.forEach(g,(function(e,t){void 0===p&&"content-type"===t.toLowerCase()?delete g[t]:m.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(m.withCredentials=!!e.withCredentials),v&&"json"!==v&&(m.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(h=function(e){m&&(n(!e||e&&e.type?new d("canceled"):e),m.abort(),m=null)},e.cancelToken&&e.cancelToken.subscribe(h),e.signal&&(e.signal.aborted?h():e.signal.addEventListener("abort",h))),p||(p=null),m.send(p)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),o=n(1849),i=n(321),s=n(7185),a=function e(t){var n=new i(t),a=o(i.prototype.request,n);return r.extend(a,i.prototype,n),r.extend(a,n),a.create=function(n){return e(s(t,n))},a}(n(5546));a.Axios=i,a.Cancel=n(5263),a.CancelToken=n(4972),a.isCancel=n(6502),a.VERSION=n(7288).version,a.all=function(e){return Promise.all(e)},a.spread=n(8713),a.isAxiosError=n(6268),e.exports=a,e.exports.default=a},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var r=n(5263);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},o.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(4867),o=n(5327),i=n(782),s=n(3572),a=n(7185),c=n(4875),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new i,response:new i}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var i,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!o){var f=[s,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),i=Promise.resolve(t);f.length;)i=i.then(f.shift(),f.shift());return i}for(var d=t;r.length;){var h=r.shift(),p=r.shift();try{d=h(d)}catch(e){p(e);break}}try{i=s(d)}catch(e){return Promise.reject(e)}for(;l.length;)i=i.then(l.shift(),l.shift());return i},l.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(a(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(a(r||{},{method:e,url:t,data:n}))}})),e.exports=l},782:(e,t,n)=>{"use strict";var r=n(4867);function o(){this.handlers=[]}o.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},4097:(e,t,n)=>{"use strict";var r=n(1793),o=n(7303);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},5061:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,o,i){var s=new Error(e);return r(s,t,n,o,i)}},3572:(e,t,n)=>{"use strict";var r=n(4867),o=n(8527),i=n(6502),s=n(5546),a=n(5263);function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=o.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||s.adapter)(e).then((function(t){return c(e),t.data=o.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(c(e),t&&t.response&&(t.response.data=o.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},7185:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||{};var n={};function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function s(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function c(n){return n in t?o(e[n],t[n]):n in e?o(void 0,e[n]):void 0}var u={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||i,o=t(e);r.isUndefined(o)&&t!==c||(n[e]=o)})),n}},6026:(e,t,n)=>{"use strict";var r=n(5061);e.exports=function(e,t,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},8527:(e,t,n)=>{"use strict";var r=n(4867),o=n(5546);e.exports=function(e,t,n){var i=this||o;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},5546:(e,t,n)=>{"use strict";var r=n(4867),o=n(6016),i=n(481),s=n(7874),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,l={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(u=n(5448)),u),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(0,JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||o&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(s){if("SyntaxError"===e.name)throw i(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(a)})),e.exports=l},7874:e=>{"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7288:e=>{e.exports={version:"0.26.1"}},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var r=n(4867);function o(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var s=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),s.push(o(t)+"="+o(e))})))})),i=s.join("&")}if(i){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,s){var a=[];a.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(o)&&a.push("path="+o),r.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},6268:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},4109:(e,t,n)=>{"use strict";var r=n(4867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,s={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(s[t]&&o.indexOf(t)>=0)return;s[t]="set-cookie"===t?(s[t]?s[t]:[]).concat([n]):s[t]?s[t]+", "+n:n}})),s):s}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4875:(e,t,n)=>{"use strict";var r=n(7288).version,o={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){o[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};o.transitional=function(e,t,n){function o(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(o(r," has been removed"+(t?" in "+t:"")));return t&&!i[r]&&(i[r]=!0,console.warn(o(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var i=r[o],s=t[i];if(s){var a=e[i],c=void 0===a||s(a,i,e);if(!0!==c)throw new TypeError("option "+i+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:o}},4867:(e,t,n)=>{"use strict";var r=n(1849),o=Object.prototype.toString;function i(e){return Array.isArray(e)}function s(e){return void 0===e}function a(e){return"[object ArrayBuffer]"===o.call(e)}function c(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==o.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===o.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:a,isBuffer:function(e){return null!==e&&!s(e)&&null!==e.constructor&&!s(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===o.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&a(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:u,isUndefined:s,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===o.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:f,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,o=arguments.length;r<o;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},8660:(e,t,n)=>{var r;!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=i(e);function i(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:o=i(r.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!i&&!s,c={create:i?function(){return A(Object.create(null))}:s?function(){return A({__proto__:null})}:function(){return A({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,o=n+1;o<r;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}():Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,h=new(l||"function"!=typeof WeakMap?function(){var e=16,n=c.create(),r=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var e;do{e="@@WeakMap@@"+a()}while(c.has(n,e));return n[e]=!0,e}function i(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:c.create()})}return e[r]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(){var t,n=(t=e,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));n[6]=79&n[6]|64,n[8]=191&n[8]|128;for(var r="",o=0;o<e;++o){var i=n[o];4!==o&&6!==o&&8!==o||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}():WeakMap);function p(e,t,n){var r=h.get(e);if(P(r)){if(!n)return;r=new f,h.set(e,r)}var o=r.get(t);if(P(o)){if(!n)return;o=new f,r.set(t,o)}return o}function g(e,t,n){if(v(e,t,n))return!0;var r=j(t);return!O(r)&&g(e,r,n)}function v(e,t,n){var r=p(t,n,!1);return!P(r)&&!!r.has(e)}function y(e,t,n){if(v(e,t,n))return m(e,t,n);var r=j(t);return O(r)?void 0:y(e,r,n)}function m(e,t,n){var r=p(t,n,!1);if(!P(r))return r.get(e)}function w(e,t,n,r){p(n,r,!0).set(e,t)}function b(e,t){var n=_(e,t),r=j(e);if(null===r)return n;var o=b(r,t);if(o.length<=0)return n;if(n.length<=0)return o;for(var i=new d,s=[],a=0,c=n;a<c.length;a++){var u=c[a];i.has(u)||(i.add(u),s.push(u))}for(var l=0,f=o;l<f.length;l++)u=f[l],i.has(u)||(i.add(u),s.push(u));return s}function _(e,t){var n=[],r=p(e,t,!1);if(P(r))return n;for(var i=function(e){var t=L(e,o);if(!x(t))throw new TypeError;var n=t.call(e);if(!R(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=E(i);if(!a)return n.length=s,n;var c=a.value;try{n[s]=c}catch(e){try{I(i)}finally{throw e}}s++}}function S(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function P(e){return void 0===e}function O(e){return null===e}function R(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e,t){switch(S(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",o=L(e,r);if(void 0!==o){var i=o.call(e,n);if(R(i))throw new TypeError;return i}return function(e,t){if("string"===t){var n=e.toString;if(x(n)&&!R(o=n.call(e)))return o;if(x(r=e.valueOf)&&!R(o=r.call(e)))return o}else{var r;if(x(r=e.valueOf)&&!R(o=r.call(e)))return o;var o,i=e.toString;if(x(i)&&!R(o=i.call(e)))return o}throw new TypeError}(e,"default"===n?"number":n)}function k(e){var t=C(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function W(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function x(e){return"function"==typeof e}function T(e){return"function"==typeof e}function L(e,t){var n=e[t];if(null!=n){if(!x(n))throw new TypeError;return n}}function E(e){var t=e.next();return!t.done&&t}function I(e){var t=e.return;t&&t.call(e)}function j(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var o=r.constructor;return"function"!=typeof o||o===e?t:o}function A(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,r){if(P(n)){if(!W(e))throw new TypeError;if(!T(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!P(r)&&!O(r)){if(!T(r))throw new TypeError;t=r}}return t}(e,t)}if(!W(e))throw new TypeError;if(!R(t))throw new TypeError;if(!R(r)&&!P(r)&&!O(r))throw new TypeError;return O(r)&&(r=void 0),function(e,t,n,r){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,n,r);if(!P(i)&&!O(i)){if(!R(i))throw new TypeError;r=i}}return r}(e,t,n=k(n),r)})),e("metadata",(function(e,t){return function(n,r){if(!R(n))throw new TypeError;if(!P(r)&&!function(e){switch(S(e)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;w(e,t,n,r)}})),e("defineMetadata",(function(e,t,n,r){if(!R(n))throw new TypeError;return P(r)||(r=k(r)),w(e,t,n,r)})),e("hasMetadata",(function(e,t,n){if(!R(t))throw new TypeError;return P(n)||(n=k(n)),g(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!R(t))throw new TypeError;return P(n)||(n=k(n)),v(e,t,n)})),e("getMetadata",(function(e,t,n){if(!R(t))throw new TypeError;return P(n)||(n=k(n)),y(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!R(t))throw new TypeError;return P(n)||(n=k(n)),m(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!R(e))throw new TypeError;return P(t)||(t=k(t)),b(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!R(e))throw new TypeError;return P(t)||(t=k(t)),_(e,t)})),e("deleteMetadata",(function(e,t,n){if(!R(t))throw new TypeError;P(n)||(n=k(n));var r=p(t,n,!1);if(P(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var o=h.get(t);return o.delete(n),o.size>0||h.delete(t),!0}))}(o)}()}(r||(r={}))},1616:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundBootstrap=void 0,n(8660);var a=n(1984),c=n(970),u=n(7828),l=n(3593),f=n(3308),d=n(9818),h=n(4639),p=(new(n(5934).VendorRegistry),new u.BackgroundRegistry,new f.ExternalServicesRegistry,new h.ConditionsRegistry,function(){function e(e,t){this.backgroundController=e,this.exposerService=t,this.startup()}return e.prototype.startup=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){return l.LoggerService.setup("Overwolf Promotions"),this.exposerService.initialize(),this.backgroundController.run(),[2]}))}))},r([(0,a.injectable)(),o("design:paramtypes",[c.BackgroundController,d.ExternalServicesExposerService])],e)}());t.BackgroundBootstrap=p,a.container.resolve(p)},970:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundController=void 0;var c=n(3593),u=n(1984),l=n(1926),f=n(3019),d=n(9487),h=n(9948),p=n(6401),g=n(9889),v=n(875),y=n(8122),m=n(5628),w=n(617),b=n(9964),_=function(){function e(e,t,n,r,o,i,s,a,u){this.entryPointService=e,this.owExtensionWrapper=t,this.contentRecommendationService=n,this.promotionWinManager=r,this.owApplicationWrapper=o,this.testerWindow=i,this.shutdownTimer=s,this.promotionAnalyticsService=a,this.gamesWrapper=u,this.logger=c.LoggerService.getCategory("BackgroundController"),this.entryPointService.addListener(this),this.promotionWinManager.addListener(this),this.contentRecommendationService.addListener(this)}return e.prototype.run=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,this.entryPointService.initialize()];case 1:return t.sent(),[4,this.printStartupInformationToConsole()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this.logger.error("Error:",e),[3,4];case 4:return[2]}}))}))},e.prototype.printStartupInformationToConsole=function(){var e;return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.owExtensionWrapper.initialize()];case 1:return n.sent(),t=this.owExtensionWrapper.manifest,this.logger.info("App version: ".concat(null===(e=null==t?void 0:t.meta)||void 0===e?void 0:e.version)),[2]}}))}))},e.prototype.shutdown=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.hasOpenWindows()];case 1:return e.sent()?(this.logger.info("We have open windows - not closing app"),[2]):this.runningGameId?(this.logger.info("We have running game, ".concat(this.runningGameId,", Not shutting down")),[2]):(this.logger.info("Shutting down ..."),this.closeBackgroundWithDelay(),[2])}}))}))},e.prototype.hasOpenWindows=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.promotionWinManager.isPromotionShown()];case 1:return e.sent()?[2,!0]:[2,!1]}}))}))},e.prototype.closeBackgroundWithDelay=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.shutdownTimer.sleep(100)];case 1:return e.sent(),this.owApplicationWrapper.shutdown(),[2]}}))}))},e.prototype.onLaunchedWithDock=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.testerWindow.show()];case 1:return e.sent(),[2]}}))}))},e.prototype.onLaunchedWithGame=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.shouldGameBeExcluded(e)];case 1:return t.sent()?(this.logger.info("Excluded Game started ".concat(e,", Ignoring")),this.shutdown(),[2]):(this.contentRecommendationService.gameStarted(e),this.runningGameId=e,[2])}}))}))},e.prototype.shouldGameBeExcluded=function(e){var t,n,r;return s(this,void 0,void 0,(function(){var o;return a(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.gamesWrapper.getGameDBInfo(e)];case 1:return o=i.sent(),"Application"===(null===(t=null==o?void 0:o.gameInfo)||void 0===t?void 0:t.TypeString)||"Application"===(null===(r=null===(n=null==o?void 0:o.installedGameInfo)||void 0===n?void 0:n.GameInfo)||void 0===r?void 0:r.TypeString)?[2,!0]:[2,!1];case 2:return i.sent(),[2,!1];case 3:return[2]}}))}))},e.prototype.onNoRecommendations=function(e){e!==b.NoRecommendationReasons.ConfiguredForEnd&&(this.runningGameId=null,this.shutdown())},e.prototype.onShowPromotion=function(e,t){return s(this,void 0,void 0,(function(){return a(this,(function(n){return this.promotionWinManager.show(e.id,t.id,null),[2]}))}))},e.prototype.onGameStarted=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return[4,this.hasOpenWindows()];case 1:return o.sent()&&(this.logger.info("Game started while promotion window is still open, closing promotion window"),t=this.promotionWinManager.getPromotionInfo(),n=t.gameId,r=t.promotionId,this.promotionAnalyticsService.reportContentRecommend(n,r,m.ContentRecommendationUserAction.IgnoredByLaunchingGame),this.promotionWinManager.close()),this.runningGameId||this.contentRecommendationService.gameStarted(e),[2]}}))}))},e.prototype.onGameEnded=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.shouldGameBeExcluded(e)];case 1:return t.sent()?(this.logger.info("Excluded Game Ended ".concat(e,", Ignoring")),[2]):(console.log("onGameEnded",e),this.contentRecommendationService.gameEnded(e),this.runningGameId=e,[2])}}))}))},e.prototype.onPromotionWindowClosed=function(){return s(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){return this.logger.info("Promotion Window closed, Shutting down in 3 seconds"),setTimeout((function(){e.runningGameId=null,e.shutdown()}),3e3),[2]}))}))},r([(0,u.singleton)(),i(3,(0,u.inject)(d.kNameOfPromotionWindowManagerService)),i(7,(0,u.inject)(y.kNameOfPromotionAnalyticsService)),o("design:paramtypes",[l.AppEntryPointService,f.OWExtensionWrapper,p.ContentRecommendationService,Object,h.OWApplicationWrapper,g.TesterWindow,v.TimerService,y.PromotionAnalyticsService,w.OWGamesWrapper])],e)}();t.BackgroundController=_},7828:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundRegistry=void 0;var i=n(1984),s=n(5566),a=n(5279),c=n(9487),u=n(875),l=n(8971),f=n(6698),d=n(8405),h=n(3055),p=n(9446),g=n(4010),v=n(8122),y=n(6622),m=o(n(6339)),w=n(5705),b=function(){function e(){}return r([(0,i.registry)([{token:a.kDITokenOwPromotionWindow,useFactory:(0,i.instancePerContainerCachingFactory)((function(){return new s.OWWindow(a.kPromotionWindowName)}))},{token:a.kDITokenPromotionWindowScreenAnchor,useFactory:(0,i.instancePerContainerCachingFactory)((function(e){return new s.OWWindowScreenAnchor({window:e.resolve(a.kDITokenOwPromotionWindow),anchorType:s.OWWindowAnchorTypes.bottomRight,isTopMost:!0})}))},{token:c.kNameOfPromotionWindowManagerService,useFactory:(0,i.instancePerContainerCachingFactory)((function(e){return e.resolve(d.PromotionWindowService)}))},{token:a.kDITokenOwTesterWindow,useFactory:(0,i.instancePerContainerCachingFactory)((function(){return new s.OWWindow(a.KTesterWindowName)}))},{token:f.kNameOfTesterWindowManagerService,useFactory:(0,i.instancePerContainerCachingFactory)((function(e){return e.resolve(g.TesterWindowService)}))},{token:v.kNameOfPromotionAnalyticsService,useFactory:(0,i.instancePerContainerCachingFactory)((function(e){return e.resolve(v.PromotionAnalyticsService)}))},{token:h.kNameOfRemoteObjectHttpFile,useFactory:(0,i.instancePerContainerCachingFactory)((function(e){return e.resolve(h.RemoteObjectHttpFile)}))},{token:p.kDITRemoteObjectRetrieverServiceOptions,useFactory:(0,i.instancePerContainerCachingFactory)((function(){var e=m.default.remoteObjectRetrieverService,t=e.configUrl,n=e.maxRetries;return{configUrl:t,retrievalIntervalInMs:e.retrievalIntervalInMs,maxRetries:n,waitIntervalBetweenRetriesInMs:e.waitIntervalBetweenRetriesInMs}}))},{token:y.kDITPromotionRemoteObjectRetrieverService,useFactory:(0,i.instancePerContainerCachingFactory)((function(e){return new p.RemoteObjectRetrieverService(e.resolve(p.kDITRemoteObjectRetrieverServiceOptions),e.resolve(h.kNameOfRemoteObjectHttpFile),e.resolve(u.TimerService),e.resolve(l.AsyncLock))}))},{token:w.kDITGameEventsListener,useFactory:(0,i.instancePerContainerCachingFactory)((function(e){return e.resolve(w.OwGameEventsWrapper)}))}])],e)}();t.BackgroundRegistry=b},4639:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionsRegistry=void 0;var o=n(1984),i=n(6702),s=n(6403),a=n(4623),c=n(2564),u=n(3410),l=n(5512),f=function(){function e(){}return r([(0,o.registry)([{token:i.kNameOfCondition,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(l.GlobalConditionCooldownFromLastPromotion)}))},{token:i.kNameOfCondition,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(s.ConditionPromotionPreviouslyDisplayed)}))},{token:i.kNameOfCondition,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(c.ConditionPromotionCTAClicked)}))},{token:i.kNameOfCondition,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(u.ConditionGeoRestricted)}))},{token:i.kNameOfCondition,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(a.ConditionGameInfoReceived)}))}])],e)}();t.ConditionsRegistry=f},3308:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalServicesRegistry=void 0;var o=n(1984),i=n(3385),s=n(4801),a=n(3234),c=n(9818),u=n(8405),l=n(4010),f=n(2331),d=function(){function e(){}return r([(0,o.registry)([{token:i.kNameOfPromotionWindowService,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(u.PromotionWindowService)}))},{token:s.kNameOfTesterWindowService,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(l.TesterWindowService)}))},{token:a.kNameOfUserActionService,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(f.UserActionService)}))},{token:c.kDITokenExternalService,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(i.kNameOfPromotionWindowService)}))},{token:c.kDITokenExternalService,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(s.kNameOfTesterWindowService)}))},{token:c.kDITokenExternalService,useFactory:(0,o.instancePerContainerCachingFactory)((function(e){return e.resolve(a.kNameOfUserActionService)}))}])],e)}();t.ExternalServicesRegistry=d},5934:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VendorRegistry=t.kDITokenAxios=void 0;var i=o(n(9669)),s=n(1984);t.kDITokenAxios="vendor-axios";var a=function(){function e(){}return r([(0,s.registry)([{token:t.kDITokenAxios,useValue:i.default}])],e)}();t.VendorRegistry=a},5279:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KTesterWindowName=t.kDITokenOwTesterWindow=t.kDITokenPromotionWindowScreenAnchor=t.kTesterWindowName=t.kPromotionWindowName=t.kDITokenOwPromotionWindow=void 0,t.kDITokenOwPromotionWindow="ow-Promotion-window",t.kPromotionWindowName="promotion",t.kTesterWindowName="tester",t.kDITokenPromotionWindowScreenAnchor="ow-Promotion-window-screen-anchor",t.kDITokenOwTesterWindow="ow-tester-window",t.KTesterWindowName="tester"},9487:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kNameOfPromotionWindowManagerService=void 0,t.kNameOfPromotionWindowManagerService="PromotionWindowManagerService"},6698:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kNameOfTesterWindowManagerService=void 0,t.kNameOfTesterWindowManagerService="TesterWindowManagerService"},9948:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.OWApplicationWrapper=void 0;var o=n(1984),i=function(){function e(){}return e.prototype.shutdown=function(){var e;null===(e=overwolf.windows.getMainWindow())||void 0===e||e.close()},r([(0,o.singleton)()],e)}();t.OWApplicationWrapper=i},3019:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWExtensionWrapper=void 0;var s=n(1984),a=n(8477),c=n(5566),u=function(){function e(){this.owExtension=null}return Object.defineProperty(e.prototype,"manifest",{get:function(){var e;return null===(e=this.owExtension)||void 0===e?void 0:e.manifest},enumerable:!1,configurable:!0}),e.prototype.initialize=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this,[4,c.OWExtension.fromCurrent()];case 1:return e.owExtension=t.sent(),[2]}}))}))},e.prototype.initializeForExtension=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return t=this,[4,c.OWExtension.fromExtensionId(e)];case 1:return t.owExtension=n.sent(),[2]}}))}))},e.prototype.changeExtensionEnableState=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,a.OWInternalExtensions.changeExtensionEnableState(e,t)];case 1:return n.sent(),[2]}}))}))},e.prototype.addTemporarilyWhitelistedExtension=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){return a.OWInternalExtensions.addTemporarilyWhitelistedExtension(e),[2]}))}))},e.prototype.installAnyApp=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,a.OWInternalExtensions.installAnyApp(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.getDownloadedExtensions=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,a.OWInternalExtensions.getDownloadedExtensions()]}))}))},e.prototype.getInstalledAndEnabledExtensions=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.getDownloadedExtensions()];case 1:return[2,e.sent().filter((function(e){return e.is_installed&&e.is_enabled}))]}}))}))},e.prototype.getInstalledAndEnabledExtensionUids=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.getDownloadedExtensions()];case 1:return[2,e.sent().filter((function(e){return e.is_installed&&e.is_enabled})).map((function(e){return e.UID}))]}}))}))},r([(0,s.injectable)()],e)}();t.OWExtensionWrapper=u},5127:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.OWExtensionsListenerWrapper=void 0;var i=n(1984),s=n(5566),a=function(){function e(){this.listeners=new Map}return e.prototype.addListener=function(e){this.removeListener(e),this.listeners.set(e,new s.OWExtensionsListener(e,!0))},e.prototype.removeListener=function(e){var t=this.listeners.get(e);t&&(t.stop(),this.listeners.delete(e))},r([(0,i.injectable)(),o("design:paramtypes",[])],e)}();t.OWExtensionsListenerWrapper=a},5705:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.OwGameEventsWrapper=t.kDITGameEventsListener=void 0;var c=n(1984),u=n(5566);t.kDITGameEventsListener="ow-game-events-listener-service";var l=function(){function e(){this.initialize()}return e.prototype.start=function(e){return void 0===e&&(e=[]),i(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.gameEventsService=new u.OWGamesEvents(this,e,50),[4,this.gameEventsService.start()];case 1:return t.sent(),[2]}}))}))},e.prototype.stop=function(){var e;null===(e=this.gameEventsService)||void 0===e||e.stop(),this.gameEventsService=null},e.prototype.initialize=function(){this.listeners=new Set},e.prototype.triggerListenerEvent=function(e,t){var n,r;if(e)try{for(var o=a(this.listeners),i=o.next();!i.done;i=o.next()){var s=i.value;s[e]&&s[e](t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.getInfo=function(){var e;return null===(e=this.gameEventsService)||void 0===e?void 0:e.getInfo()},e.prototype.onInfoUpdates=function(e){this.triggerListenerEvent("onInfoUpdates",e)},e.prototype.onNewEvents=function(e){this.triggerListenerEvent("onNewEvents",e)},e.prototype.addListener=function(e){this.listeners.add(e)},e.prototype.removeListener=function(e){this.listeners.delete(e)},r([(0,c.injectable)(),o("design:paramtypes",[])],e)}();t.OwGameEventsWrapper=l},4523:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.OWGameListenerWrapper=void 0;var i=n(1984),s=n(5566),a=function(){function e(){this.listeners=new Map}return e.prototype.addListener=function(e){this.removeListener(e),this.listeners.set(e,new s.OWGameListener(e,!0))},e.prototype.removeListener=function(e){var t=this.listeners.get(e);t&&(t.stop(),this.listeners.delete(e))},r([(0,i.injectable)(),o("design:paramtypes",[])],e)}();t.OWGameListenerWrapper=a},617:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWGamesWrapper=void 0;var s=n(1984),a=n(5566),c=function(){function e(){}return e.prototype.getRunningGameInfo=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,a.OWGames.getRunningGameInfo()]}))}))},e.prototype.getGameDBInfo=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){return[2,a.OWGames.getGameDBInfo(e)]}))}))},r([(0,s.singleton)()],e)}();t.OWGamesWrapper=c},902:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWSettingsWrapper=void 0;var s=n(1984),a=n(2549),c=function(){function e(){}return e.prototype.getLanguage=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,a.OWSettings.getLanguage()]}))}))},r([(0,s.injectable)()],e)}();t.OWSettingsWrapper=c},8280:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWUtilsWrapper=void 0;var s=n(1984),a=n(9225),c=n(8157),u=n(5566),l=function(){function e(){}return e.prototype.setClientStartupTime=function(){this.patchedClientLaunchedTime=new Date},e.prototype.openStoreOneAppPage=function(e){u.OWUtils.openStoreOneAppPage(e)},e.prototype.getClientInfo=function(){return u.OWUtils.isGetClientInfoSupported()?u.OWUtils.getClientInfo():this.getClientInfoFromPatchValues()},e.prototype.getPersistentPhasedPercent=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,c.OWInternalUtils.getPersistentPhasedPercent()]}))}))},e.prototype.getClientInfoFromPatchValues=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,this.getConsentTimestamp()];case 1:return e=n.sent(),t=this.calcUptimeFromPatchedLaunchedTimeInSeconds(),[2,{success:!0,installTime:e,uptimeSeconds:t}]}}))}))},e.prototype.getConsentTimestamp=function(){return o(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return[4,a.OWInternalProfile.getCurrentUser().catch((function(t){e=t.consentTimestamp}))];case 1:return(t=n.sent())&&(e=t.consentTimestamp),[2,e]}}))}))},e.prototype.calcUptimeFromPatchedLaunchedTimeInSeconds=function(){return(Date.now()-this.patchedClientLaunchedTime.getTime())/1e3},e.prototype.getSystemInformation=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,u.OWUtils.getSystemInformation()]}))}))},e.prototype.openUrlInDefaultBrowser=function(e){u.OWUtils.openUrlInDefaultBrowser(e)},r([(0,s.singleton)()],e)}();t.OWUtilsWrapper=l},1926:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.AppEntryPointService=void 0;var u=n(1984),l=n(9117),f=n(3593),d=n(3406),h=n(5127),p=n(4523),g=n(617),v=n(875),y=function(){function e(e,t,n,r,o){this.utilsService=e,this.owExtensionsListener=t,this.owGameListener=n,this.gamesWrapper=r,this.timerService=o,this.logger=f.LoggerService.getCategory("AppEntryPointService"),this.listeners=new Set}return e.prototype.initialize=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){return this.checkLaunchParam(),this.owExtensionsListener.addListener(this),this.owGameListener.addListener(this),[2]}))}))},e.prototype.addListener=function(e){this.listeners.add(e)},e.prototype.removeListener=function(e){this.listeners.delete(e)},e.prototype.checkLaunchParam=function(){var e;return i(this,void 0,void 0,(function(){var t,n,r,o;return s(this,(function(i){switch(i.label){case 0:return t=this.utilsService.getUrlParam(l.kUrlParamSource),n=this.utilsService.getUrlParam(l.kUrlParamGameId),[4,this.gamesWrapper.getRunningGameInfo()];case 1:return r=i.sent(),o=null==r?void 0:r.classId,this.fallbackRelaunchOnMissingApis(),this.handleLaunchSource(t,null!==(e=null==o?void 0:o.toString())&&void 0!==e?e:n,!0),[2]}}))}))},e.prototype.fallbackRelaunchOnMissingApis=function(){var e;(null===overwolf||void 0===overwolf?void 0:overwolf.windows2)&&(null===(e=null===overwolf||void 0===overwolf?void 0:overwolf.windows2)||void 0===e?void 0:e.create)||(this.logger.info("overwolf.windows2 undefined, relaunching"),overwolf.extensions.relaunch())},e.prototype.handleLaunchSource=function(e,t,n){var r=n?"Launched":"Received event";this.logger.info("".concat(r," source: ").concat(e," param: ").concat(t||"n/a"));var o=a(this.calcListenerEventFromLaunchSource(e,t),2),i=o[0],s=o[1];this.triggerListenerEvent(i,s)},e.prototype.calcListenerEventFromLaunchSource=function(e,t){switch(e){case l.kLaunchEventDockLaunch:return["onLaunchedWithDock",null];case l.kLaunchEventOverwolfStart:return["onLaunchedWithStartup",null];case l.kLaunchEventGameLaunch:case l.kRelaunch:return["onLaunchedWithGame",parseInt(t,10)]}return[null,null]},e.prototype.triggerListenerEvent=function(e,t){return i(this,void 0,void 0,(function(){var n,r,o,i,a,u;return s(this,(function(s){switch(s.label){case 0:if(!e)return[2];s.label=1;case 1:s.trys.push([1,6,7,8]),n=c(this.listeners),r=n.next(),s.label=2;case 2:return r.done?[3,5]:(o=r.value)[e]?[4,o[e](t)]:[3,4];case 3:s.sent(),s.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return i=s.sent(),a={error:i},[3,8];case 7:try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(a)throw a.error}return[7];case 8:return[2]}}))}))},e.prototype.onAppLaunchTriggered=function(e){switch(e.origin){case l.kLaunchEventDockLaunch:this.handleLaunchSource(e.origin,e.parameter,!1);break;case l.kLaunchEventGameLaunch:var t="".concat(l.kUrlParamGameId,"="),n=e.parameter.substring(t.length);this.triggerListenerEvent("onGameStarted",parseInt(n,10))}},e.prototype.onGameTerminated=function(e){this.triggerListenerEvent("onGameEnded",e.gameInfo.classId)},r([(0,u.singleton)(),o("design:paramtypes",[d.UtilsService,h.OWExtensionsListenerWrapper,p.OWGameListenerWrapper,g.OWGamesWrapper,v.TimerService])],e)}();t.AppEntryPointService=y},568:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.KnownRawGlobalConfigs=void 0,(n=t.KnownRawGlobalConfigs||(t.KnownRawGlobalConfigs={})).PassiveAnalyticsPersistentPhasing="passive_analytics_persistent_phasing",n.MinimumGameSessionTimeToDisplayPromotionMins="minimum_game_session_time_to_display_promotion_mins",n.MinimumVisibleTimeToCountInSeconds="min_visible_time_to_count_seconds",n.AutoDismissPromotionSecs="auto_dismiss_promotion_in_seconds",n.MinNumberOfAdsDisplayedBeforeShow="min_number_of_ads_displayed_before_show",n.CooldownFromPreviousPromoInHours="cooldown_from_previous_promotion_hours"},3302:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.RecommendationDatastoreService=void 0;var u=n(1984),l=n(568),f=n(6622),d=n(3593),h=function(){function e(e){this.remoteConfigsService=e,this.logger=d.LoggerService.getCategory("RecommendationDatastoreService")}return e.prototype.getGame=function(e){return i(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return[4,this.remoteConfigsService.getRawGame(e)];case 1:return(t=r.sent())?(n={id:e,name:t.name,recommendPercent:t.recommendPercent,shouldShowOnStart:t.shouldShowOnStart,shouldShowOnEnd:t.shouldShowOnEnd,gameEventTriggers:t.gameEventsTriggers,disableTriggers:t.disableTriggers,targetGameId:t.targetGameId},[4,this.getRecommendedPromotions(t)]):[2,null];case 2:return n.promotions=r.sent(),[2,n]}}))}))},e.prototype.getAllGames=function(){return i(this,void 0,void 0,(function(){var e,t,n,r,o,i,u,l,f,d,h,p;return s(this,(function(s){switch(s.label){case 0:return[4,this.remoteConfigsService.getRawGames()];case 1:if(!(e=s.sent()))return[2,null];t=[],s.label=2;case 2:s.trys.push([2,7,8,9]),n=a(Object.entries(e)),r=n.next(),s.label=3;case 3:return r.done?[3,6]:(o=c(r.value,2),i=o[0],u=o[1],p={id:parseInt(i),name:u.name,recommendPercent:u.recommendPercent,shouldShowOnStart:u.shouldShowOnStart,shouldShowOnEnd:u.shouldShowOnEnd,gameEventTriggers:u.gameEventsTriggers,disableTriggers:u.disableTriggers,targetGameId:u.targetGameId},[4,this.getRecommendedPromotions(u)]);case 4:p.promotions=s.sent(),l=p,t.push(l),s.label=5;case 5:return r=n.next(),[3,3];case 6:return[3,9];case 7:return f=s.sent(),d={error:f},[3,9];case 8:try{r&&!r.done&&(h=n.return)&&h.call(n)}finally{if(d)throw d.error}return[7];case 9:return[2,t]}}))}))},e.prototype.getGlobalConfigurations=function(){return i(this,void 0,void 0,(function(){var e,t,n,r,o,i,u,l,f,d;return s(this,(function(s){switch(s.label){case 0:return[4,this.remoteConfigsService.getRawGlobalConfigs()];case 1:if(!(e=s.sent()))return this.logger.error("Failed to get server configurations"),[2,null];t=this.generateGlobalConfigsMapping(),n={};try{for(r=a(t.entries()),o=r.next();!o.done;o=r.next())i=c(o.value,2),u=i[0],l=i[1],e[l]&&(n[u]=this.getConfigAsNumber(e,l))}catch(e){f={error:e}}finally{try{o&&!o.done&&(d=r.return)&&d.call(r)}finally{if(f)throw f.error}}return[2,n]}}))}))},e.prototype.setEnvironment=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.remoteConfigsService.setNewEnvironment(e)]}))}))},e.prototype.getRecommendedPromotions=function(e){return i(this,void 0,void 0,(function(){var t,n,r,o,i,c,u,l;return s(this,(function(s){switch(s.label){case 0:t=[],s.label=1;case 1:s.trys.push([1,6,7,8]),n=a(e.promotions),r=n.next(),s.label=2;case 2:return r.done?[3,5]:(o=r.value,[4,this.toPromotion(o)]);case 3:(i=s.sent())&&t.push(i),s.label=4;case 4:return r=n.next(),[3,2];case 5:return[3,8];case 6:return c=s.sent(),u={error:c},[3,8];case 7:try{r&&!r.done&&(l=n.return)&&l.call(n)}finally{if(u)throw u.error}return[7];case 8:return[2,t]}}))}))},e.prototype.toPromotion=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return[4,this.remoteConfigsService.getPromotionById(e)];case 1:return[2,{displayLimit:null==(t=n.sent())?void 0:t.display_limit,id:t.id,name:t.name,recommendWeight:t.recommend_weight,geoRestriction:t.geo_restriction}]}}))}))},e.prototype.generateGlobalConfigsMapping=function(){return new Map([["autoDismissPromotionsInSeconds",l.KnownRawGlobalConfigs.AutoDismissPromotionSecs],["minimumVisibleTimeToCountInSeconds",l.KnownRawGlobalConfigs.MinimumVisibleTimeToCountInSeconds],["passiveAnalyticsPersistentPhasing",l.KnownRawGlobalConfigs.PassiveAnalyticsPersistentPhasing],["minimumGameSessionTimeToDisplayPromotionMins",l.KnownRawGlobalConfigs.MinimumGameSessionTimeToDisplayPromotionMins],["minNumberOfAdsDisplayedBeforeShow",l.KnownRawGlobalConfigs.MinNumberOfAdsDisplayedBeforeShow],["cooldownFromPreviousPromoInHours",l.KnownRawGlobalConfigs.CooldownFromPreviousPromoInHours]])},e.prototype.getConfigAsNumber=function(e,t){return parseInt(e[t],10)},r([(0,u.singleton)(),o("design:paramtypes",[f.RemoteConfigurationsService])],e)}();t.RecommendationDatastoreService=h},6622:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteConfigurationsService=t.kDITPromotionRemoteObjectRetrieverService=void 0;var c=n(1984),u=n(5236);t.kDITPromotionRemoteObjectRetrieverService="rec-remote-object-ret-service";var l=function(){function e(e,t){this.remoteObjectRetrieverService=e,this.persistentStorage=t,this.getRemoteConfigs()}return e.prototype.getRawGame=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.getRemoteConfigs()];case 1:return[2,null==(t=n.sent())?void 0:t.games[e]]}}))}))},e.prototype.setNewEnvironment=function(e,t){return void 0===t&&(t="prod"),s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.remoteObjectRetrieverService.initConfigUrl(this.remoteObjectRetrieverService.options.configUrl.replace(t,e))];case 1:return n.sent(),[2,!0]}}))}))},e.prototype.getRawGames=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.getRemoteConfigs()];case 1:return[2,null==(e=t.sent())?void 0:e.games]}}))}))},e.prototype.getRawGlobalConfigs=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.getRemoteConfigs()];case 1:return[2,null==(e=t.sent())?void 0:e.config]}}))}))},e.prototype.getPromotionById=function(e){return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return[4,this.getRemoteConfigs()];case 1:return t=r.sent(),(n=null==t?void 0:t.promotions[e])?[2,n]:[2,null]}}))}))},e.prototype.getRawPromotions=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.getRemoteConfigs()];case 1:return[2,null==(e=t.sent())?void 0:e.promotions]}}))}))},e.prototype.getRemoteConfigs=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.remoteObjectRetrieverService.getObject()];case 1:return(e=t.sent())?(this.persistentStorage.setGlobalConfiguration(e),[2,e]):[2,this.persistentStorage.getGlobalConfiguration()]}}))}))},r([(0,c.singleton)(),i(0,(0,c.inject)(t.kDITPromotionRemoteObjectRetrieverService)),o("design:paramtypes",[Object,u.PersistentStorageService])],e)}();t.RemoteConfigurationsService=l},9818:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalServicesExposerService=t.kDITokenExternalService=void 0;var a=n(1984),c=n(7219);t.kDITokenExternalService="ExternalService";var u=function(){function e(e,t){this.windowsTunnelDataService=e,this.services=t}return e.prototype.initialize=function(){var e,t;try{for(var n=s(this.services),r=n.next();!r.done;r=n.next()){var o=r.value;this.windowsTunnelDataService.set(o.token,o)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},r([(0,a.injectable)(),i(1,(0,a.injectAll)(t.kDITokenExternalService)),o("design:paramtypes",[c.WindowsTunnelDataService,Array])],e)}();t.ExternalServicesExposerService=u},5236:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PersistentStorageService=void 0;var o=n(3593),i=n(9354),s=n(1984),a=n(7070),c="promotion-history",u="promotion-geo",l="promotion-ad-units",f="promotion-global-configurations",d=function(){function e(){this.logger=o.LoggerService.getCategory("PersistentStorageService")}return e.prototype.deleteLocalStorageItems=function(){localStorage.clear()},e.prototype.getGlobalConfiguration=function(){return i.LocalStorage.get(f).asObject()||(this.logger.error("Promotion global configurations were not found"),null)},e.prototype.setGlobalConfiguration=function(e){i.LocalStorage.setObject(f,e)},e.prototype.getLastDisplayedPromotionTimestamp=function(){var e=this.getPromotionsHistory();return null==e?void 0:e.lastDisplayedTimestamp},e.prototype.setLastDisplayedPromotionTimestamp=function(e){void 0===e&&(e=Date.now());var t=this.getPromotionsHistory();t.lastDisplayedTimestamp=e,this.setPromotionsHistory(t)},e.prototype.resetLastDisplayedPromotionTimestamp=function(){var e=this.getPromotionsHistory();e.lastDisplayedTimestamp=0,this.setPromotionsHistory(e)},e.prototype.getDisplayedPromotionInfo=function(e,t){var n=this.getPromotionsHistory().displayedAppsPerGame;if(!n)return null;var r=n[e.id];return r&&r[t.id]||null},e.prototype.setPromotionDisplayed=function(e,t,n){void 0===n&&(n=0);var r=this.getPromotionsHistory(),o=r.displayedAppsPerGame;o||(r.displayedAppsPerGame={},o=r.displayedAppsPerGame);var i=o[e];i||(r.displayedAppsPerGame[e]={},i=r.displayedAppsPerGame[e]),i[t]||(i[t]={lastTimestamp:0,count:0,CTAClicked:0});var s=i[t];s.lastTimestamp=Date.now(),s.count=n>0?n:s.count+1,this.setPromotionsHistory(r)},e.prototype.setPromotionClicked=function(e,t){var n=this.getPromotionsHistory(),r=n.displayedAppsPerGame;r||(n.displayedAppsPerGame={},r=n.displayedAppsPerGame);var o=r[e];o||(n.displayedAppsPerGame[e]={},o=n.displayedAppsPerGame[e]),o[t]||(o[t]={lastTimestamp:0,count:0,CTAClicked:0}),o[t].CTAClicked++,this.setPromotionsHistory(n)},e.prototype.resetDisplayedPromotionCount=function(e,t){var n=this.getPromotionsHistory(),r=n.displayedAppsPerGame[e.id];r&&(r[t.id]&&delete n.displayedAppsPerGame[e.id][t.id],this.setPromotionsHistory(n))},e.prototype.resetDisplayedPromotions=function(){var e=this.getPromotionsHistory();e.displayedAppsPerGame={},this.setPromotionsHistory(e)},e.prototype.getPromotionsHistory=function(){return i.LocalStorage.get(c).asObject()||this.generateNewPromotionsHistory()},e.prototype.createPromotionHistory=function(){var e=this.generateNewPromotionsHistory();this.setPromotionsHistory(e)},e.prototype.saveGeoResult=function(e){a.SessionStorage.set(u,e)},e.prototype.getGeoResult=function(){return a.SessionStorage.get(u).raw},e.prototype.generateNewPromotionsHistory=function(){return{lastDisplayedTimestamp:0,displayedAppsPerGame:{}}},e.prototype.setPromotionsHistory=function(e){i.LocalStorage.setObject(c,e)},e.prototype.getPromotionAdUnits=function(){var e=i.LocalStorage.get(l).asObject();return e&&e.adUnits?e:this.generateNewPromotionAdUnits()},e.prototype.getPromotionAdUnitsById=function(e){var t=i.LocalStorage.get("".concat("adUnitPromotion_").concat(e)).asInt();return null!=t?t:0},e.prototype.addPromotionAdUnits=function(e,t){var n=this.getPromotionAdUnits();if(!Object.prototype.hasOwnProperty.call(n.adUnits,e))return n.adUnits[e]=t,void this.setPromotionAdUnites(n);n.adUnits[e].lastViewTimestamp=t.lastViewTimestamp,n.adUnits[e].views++,this.setPromotionAdUnites(n)},e.prototype.setPromotionAdUnites=function(e){i.LocalStorage.setObject(l,e)},e.prototype.generateNewPromotionAdUnits=function(){return{adUnits:{}}},r([(0,s.singleton)()],e)}();t.PersistentStorageService=d},8568:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PromotionAnalyticsTracker=void 0;var a=n(1984),c=n(3593),u=n(601),l=n(3019),f=n(8280),d=n(3302),h=n(5236),p=function(){function e(e,t,n,r,o){this.OWtracking=e,this.owExtensionWrapper=t,this.owUtilsWrapper=n,this.datastoreService=r,this.persistentStorage=o,this.logger=c.LoggerService.getCategory("PromotionAnalyticsTracker"),this.phasePercent=0}return e.prototype.sendAnalyticsError=function(e,t){return i(this,void 0,void 0,(function(){var n,r,o,i;return s(this,(function(s){switch(s.label){case 0:return[4,this.shouldTrack()];case 1:return s.sent()?(n="promotion_recommend_error",o={InGameId:e,Value:1},i=r={},[4,this.getAppVersion()]):[2];case 2:return i.app_version=s.sent(),r.promotion_id=t,this.sendAnalyticsEvent({name:n,extra:r,overrides:o}),[2]}}))}))},e.prototype.sendContentRecommend=function(e,t,n){return i(this,void 0,void 0,(function(){var r,o,i,a;return s(this,(function(s){switch(s.label){case 0:return"string"==typeof e&&(e=parseInt(e)),[4,this.shouldTrack()];case 1:return s.sent()?(r="promotion_recommend",a={game_id:e,promotion_id:t},[4,this.getAppVersion()]):[2];case 2:return a.app_version=s.sent(),a.userAction=n,o=a,i={},this.sendAnalyticsEvent({name:r,extra:o,overrides:i}),[2]}}))}))},e.prototype.sendContentViewEvent=function(e){return i(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(o){switch(o.label){case 0:return[4,this.shouldTrack()];case 1:return o.sent()?(t=e.name,n=e.extra,r=e.overrides,t&&n?(this.sendAnalyticsEvent({name:t,extra:n,overrides:r}),[2]):[2]):[2]}}))}))},e.prototype.sendAppLaunched=function(e){return i(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(o){switch(o.label){case 0:return t="promotions_app_launched",[4,this.getAppVersion()];case 1:return n=o.sent(),r={game_id:e,app_version:n},this.sendAnalyticsEvent({name:t,extra:r}),[2]}}))}))},e.prototype.getAppVersion=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.owExtensionWrapper.initialize()];case 1:return e.sent(),[2,this.owExtensionWrapper.manifest.meta.version]}}))}))},e.prototype.getPromotionViewCount=function(e){var t;return null!==(t=this.persistentStorage.getPromotionAdUnitsById(e))&&void 0!==t?t:0},e.prototype.sendAnalyticsEvent=function(e){this.OWtracking.trackRSEventV2(e.name,e.extra,e.overrides)},e.prototype.shouldTrack=function(){return i(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.isPhasingInRange()]}))}))},e.prototype.isPhasingInRange=function(){return i(this,void 0,void 0,(function(){var e,t,n;return s(this,(function(r){switch(r.label){case 0:return 0!==this.phasePercent?[3,2]:(e=this,[4,this.owUtilsWrapper.getPersistentPhasedPercent()]);case 1:e.phasePercent=r.sent(),r.label=2;case 2:return[4,this.datastoreService.getGlobalConfigurations()];case 3:return t=r.sent(),n=null==t?void 0:t.passiveAnalyticsPersistentPhasing,[2,this.phasePercent<=n]}}))}))},r([(0,a.injectable)(),o("design:paramtypes",[u.OWTrackRSWrapper,l.OWExtensionWrapper,f.OWUtilsWrapper,d.RecommendationDatastoreService,h.PersistentStorageService])],e)}();t.PromotionAnalyticsTracker=p},8122:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PromotionAnalyticsService=t.kNameOfPromotionAnalyticsService=void 0;var i=n(1984),s=n(3593),a=n(8568);t.kNameOfPromotionAnalyticsService="PromotionAnalyticsService";var c=function(){function e(e){this.promotionAnalyticsTracker=e,this.logger=s.LoggerService.getCategory("PromotionAnalyticsService")}return e.prototype.reportContentViewError=function(e,t){this.promotionAnalyticsTracker.sendAnalyticsError(e,t)},e.prototype.reportContentRecommend=function(e,t,n){this.promotionAnalyticsTracker.sendContentRecommend(e,t,n)},e.prototype.reportContentViewEvent=function(e){this.promotionAnalyticsTracker.sendContentViewEvent(e)},e.prototype.reportAppLaunched=function(e){this.promotionAnalyticsTracker.sendAppLaunched(e)},r([(0,i.injectable)(),o("design:paramtypes",[a.PromotionAnalyticsTracker])],e)}();t.PromotionAnalyticsService=c},8730:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PromotionDetailsBuilderService=void 0;var c=n(1984),u=n(3593),l=n(8456),f=n(3019),d=n(902),h=n(5236),p=a(n(6339)),g=function(){function e(e,t,n,r){this.owSettingsWrapper=e,this.persistentStorage=t,this.owWrapper=n,this.owExtensionWrapper=r,this.logger=u.LoggerService.getCategory("PromotionDetails")}return e.prototype.getPromotionDetails=function(e,t,n){return i(this,void 0,void 0,(function(){var r,o;return s(this,(function(i){switch(i.label){case 0:return r=this.createPromotionDetails,o=[e,t],[4,this.buildUrlWithParameters(e,t,n)];case 1:return[2,r.apply(this,o.concat([i.sent()]))]}}))}))},e.prototype.createPromotionDetails=function(e,t,n){return i(this,void 0,void 0,(function(){return s(this,(function(r){return[2,{promotionId:t,gameId:e,url:n}]}))}))},e.prototype.buildUrlWithParameters=function(e,t,n){return i(this,void 0,void 0,(function(){var r,o,i,a,c,u;return s(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,this.owSettingsWrapper.getLanguage()];case 1:return r=s.sent(),[4,this.getAppVersion()];case 2:return o=s.sent(),i=Date.now(),a=p.default.generalConfiguration.promotionIframeURL,n&&(a=a.replace("prod",n)),(c=new URL(a)).searchParams.append("gameId",e.toString()),c.searchParams.append("promoId",t),c.searchParams.append("version",this.owWrapper.getVersion()),c.searchParams.append("appVersion",o),c.searchParams.append("lang",r),c.searchParams.append("timestamp",i.toString()),n&&c.searchParams.append("localeEnv",n),[2,c.toString()];case 3:return u=s.sent(),this.logger.error("Failed to gather parameters, exception details:",u),[2,null];case 4:return[2]}}))}))},e.prototype.getAppVersion=function(){var e,t,n;return i(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return[4,this.owExtensionWrapper.initialize()];case 1:return r.sent(),[2,null===(n=null===(t=null===(e=this.owExtensionWrapper)||void 0===e?void 0:e.manifest)||void 0===t?void 0:t.meta)||void 0===n?void 0:n.version]}}))}))},r([(0,c.singleton)(),o("design:paramtypes",[d.OWSettingsWrapper,h.PersistentStorageService,l.OWWrapper,f.OWExtensionWrapper])],e)}();t.PromotionDetailsBuilderService=g},5512:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalConditionCooldownFromLastPromotion=void 0;var c=n(1984),u=n(3302),l=n(5236),f=n(3593),d=n(1459),h=n(9487),p=n(9964),g=function(){function e(e,t,n){this.datastoreService=e,this.persistentStorageService=t,this.notifWindowManager=n,this.logger=f.LoggerService.getCategory("GlobalConditionCooldownFromLastPromotion"),this.notifWindowManager.addListener(this)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.logger.name},enumerable:!1,configurable:!0}),e.prototype.match=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.datastoreService.getGlobalConfigurations()];case 1:return(e=t.sent())?this.isCooldownHrsFromPreviousPromotionExpired(e.cooldownFromPreviousPromoInHours)?[2,[!0,void 0]]:[2,[!1,p.NoRecommendationReasons.CooldownDisplay]]:(this.logger.warn("Failed to get server configurations - returning false"),[2,[!1,p.NoRecommendationReasons.FailedToGetServiceConfig]])}}))}))},e.prototype.isCooldownHrsFromPreviousPromotionExpired=function(e){var t=this.persistentStorageService.getLastDisplayedPromotionTimestamp();if(!t)return!0;var n=(Date.now()-t)/36e5,r=n>=e,o="Previous promotion displayed: ".concat(Math.floor(n)," hrs ago, config:").concat(e," hrs, ret:").concat(r);return this.logger.info(o),r},e.prototype.onPromotionWindowClosed=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.logger.info("Updating lastDisplayedPromotionTimestamp with current "+"timestamp: ".concat(Date.now())),this.persistentStorageService.setLastDisplayedPromotionTimestamp(Date.now()),[2]}))}))},r([(0,c.injectable)(),(0,d.conditionType)(d.ConditionType.Global),i(2,(0,c.inject)(h.kNameOfPromotionWindowManagerService)),o("design:paramtypes",[u.RecommendationDatastoreService,l.PersistentStorageService,Object])],e)}();t.GlobalConditionCooldownFromLastPromotion=g},4623:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionGameInfoReceived=void 0;var u=n(1984),l=n(3593),f=n(1459),d=n(5705),h=n(1891),p=n(9487),g=n(5628),v=n(8122),y=function(){function e(e,t,n){this.gameEventListener=e,this.promotionWinManager=t,this.promotionAnalyticsService=n,this.logger=l.LoggerService.getCategory("ConditionGameInfoReceived"),this.waitingForEvents=!1,this.triggered=!1,this.infoDB=null,this.gameEventListener.addListener(this)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.logger.name},enumerable:!1,configurable:!0}),e.prototype.shouldSkip=function(e){var t,n;return!(null===(t=null==e?void 0:e.game)||void 0===t?void 0:t.gameEventTriggers)||0===(null===(n=null==e?void 0:e.game)||void 0===n?void 0:n.gameEventTriggers.length)},e.prototype.match=function(e){var t,n,r,o;return a(this,void 0,void 0,(function(){var i;return c(this,(function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.triggers=null===(t=null==e?void 0:e.game)||void 0===t?void 0:t.gameEventTriggers,this.disableTriggers=null===(n=null==e?void 0:e.game)||void 0===n?void 0:n.disableTriggers,this.requiredFeatures=["phase","game_info"],this.stopListening(),[4,null===(r=this.gameEventListener)||void 0===r?void 0:r.start(this.requiredFeatures)];case 1:return s.sent(),[4,this.obtainGameInfos()];case 2:return s.sent(),[4,this.handleInfoUpdate()];case 3:return s.sent()?[2,[!0]]:(this.waitingForEvents=!0,this.promiseResolver=new h.PromiseResolver,this.logger.info("Waiting for Info updates"),[4,null===(o=this.promiseResolver)||void 0===o?void 0:o.promise()]);case 4:return s.sent(),[2,[!0]];case 5:return i=s.sent(),this.logger.error("Error matching game eventsF",i),[2,[!1]];case 6:return[2]}}))}))},e.prototype.disableTriggersFound=function(){var e;return a(this,void 0,void 0,(function(){return c(this,(function(t){return this.triggered?[2,!!(null===(e=this.disableTriggers)||void 0===e?void 0:e.find(this.findTrigger()))]:[2,!1]}))}))},e.prototype.findTrigger=function(){var e=this;return function(t){var n,r,o,i,s;return!("info"!==t.type||!(null===(r=null===(n=e.infoDB)||void 0===n?void 0:n[t.category])||void 0===r?void 0:r[t.keyName])||!(null===(o=null==t?void 0:t.values)||void 0===o?void 0:o.includes(null===(s=null===(i=e.infoDB)||void 0===i?void 0:i[t.category])||void 0===s?void 0:s[t.keyName])))}},e.prototype.stopListening=function(){var e;null===(e=this.gameEventListener)||void 0===e||e.stop()},e.prototype.secondaryGameTrigger=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){return this.infoDB&&this.infoDB.game_info&&this.infoDB.game_info.game_type?[2,void 0!==this.infoDB.game_info.game_type]:[2,!1]}))}))},e.prototype.obtainGameInfos=function(){var e;return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,null===(e=this.gameEventListener)||void 0===e?void 0:e.getInfo()];case 1:return t=r.sent().res,this.infoDB=t,[3,3];case 2:return n=r.sent(),this.logger.error("Failed to obtain info",n),[3,3];case 3:return[2]}}))}))},e.prototype.handleInfoUpdate=function(){var e;return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=null===(e=this.triggers)||void 0===e?void 0:e.find(this.findTrigger()),[4,this.secondaryGameTrigger()];case 1:return n=r.sent(),t&&n?(this.logger.info("Found Trigger Info"),[2,!0]):[2,!1];case 2:return r.sent(),[2,!1];case 3:return[2]}}))}))},e.prototype.setToInfoDB=function(e){return a(this,void 0,void 0,(function(){var t,n,o;return c(this,(function(i){if(this.logger.info("onInfoUpdates",JSON.stringify(e)),t=r({},this.infoDB),!e)return[2];for(n in e)t=r(r({},t),((o={})[n]=r(r({},t[n]),e[n]),o));return this.infoDB=t,[2]}))}))},e.prototype.onInfoUpdates=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return c(this,(function(o){switch(o.label){case 0:return this.waitingForEvents?(this.setToInfoDB(e),[4,this.disableTriggersFound()]):[2];case 1:return o.sent()?(this.logger.info("Disable triggers found, closing"),this.stopListening(),t=this.promotionWinManager.getPromotionInfo(),n=t.gameId,r=t.promotionId,this.promotionAnalyticsService.reportContentRecommend(n,r,g.ContentRecommendationUserAction.IgnoredByChangedInfo),this.promotionWinManager.close(),[2]):[4,this.handleInfoUpdate()];case 2:return o.sent()?(this.triggered=!0,this.promiseResolver.resolve(),[2]):[2]}}))}))},e.prototype.onNewEvents=function(e){},o([(0,u.injectable)(),(0,f.conditionType)(f.ConditionType.Promotion),s(0,(0,u.inject)(d.kDITGameEventsListener)),s(1,(0,u.inject)(p.kNameOfPromotionWindowManagerService)),s(2,(0,u.inject)(v.kNameOfPromotionAnalyticsService)),i("design:paramtypes",[d.OwGameEventsWrapper,Object,v.PromotionAnalyticsService])],e)}();t.ConditionGameInfoReceived=y},3410:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionGeoRestricted=void 0;var c=n(1984),u=n(3593),l=n(1459),f=n(5236),d=n(9964),h=a(n(6339)),p=function(){function e(e){this.persistentLocalStorage=e,this.logger=u.LoggerService.getCategory("ConditionGeoRestricted")}return Object.defineProperty(e.prototype,"id",{get:function(){return this.logger.name},enumerable:!1,configurable:!0}),e.prototype.match=function(e){return i(this,void 0,void 0,(function(){var t;return s(this,(function(n){switch(n.label){case 0:return t=e.promotion,[4,this.IsUserGeoAllowed(t)];case 1:return n.sent()?[2,[!0]]:[2,[!1,d.NoRecommendationReasons.GeoRestricted]]}}))}))},e.prototype.shouldSkip=function(e){var t;return i(this,void 0,void 0,(function(){var n;return s(this,(function(r){return(null==(n=e.promotion)?void 0:n.geoRestriction)&&0!==(null===(t=null==n?void 0:n.geoRestriction)||void 0===t?void 0:t.length)?[2,!1]:[2,!0]}))}))},e.prototype.IsUserGeoAllowed=function(e){return i(this,void 0,void 0,(function(){var t,n,r,o;return s(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),t=h.default.generalConfiguration.geoConditionURL,n=e.geoRestriction,[4,this.getCountryCode(t)];case 1:return r=i.sent(),[2,n.includes(r)];case 2:return o=i.sent(),this.logger.error("Failed to obtain geo",o),[2,!1];case 3:return[2]}}))}))},e.prototype.getCountryCode=function(e){var t;return i(this,void 0,void 0,(function(){var n,r,o;return s(this,(function(i){switch(i.label){case 0:return(n=this.persistentLocalStorage.getGeoResult())?[2,n]:[4,fetch(e)];case 1:return[4,i.sent().json()];case 2:return r=i.sent(),o=null===(t=null==r?void 0:r.user)||void 0===t?void 0:t.country,this.persistentLocalStorage.saveGeoResult(o),[2,o]}}))}))},r([(0,c.injectable)(),(0,l.conditionType)(l.ConditionType.Promotion),o("design:paramtypes",[f.PersistentStorageService])],e)}();t.ConditionGeoRestricted=p},2564:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionPromotionCTAClicked=void 0;var a=n(1984),c=n(3593),u=n(3302),l=n(5236),f=n(2331),d=n(1459),h=n(9964),p=function(){function e(e,t,n){this.datastoreService=e,this.persistentLocalStorage=t,this.userActionService=n,this.logger=c.LoggerService.getCategory("ConditionPromotionCTAClicked"),this.userActionService.addListener(this)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.logger.name},enumerable:!1,configurable:!0}),e.prototype.match=function(e){return i(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(o){return t=e.game,n=e.promotion,(r=this.getApplicationClickedTimes(n,t))&&0!==r?[2,[!1,h.NoRecommendationReasons.CTAPreviouslyClicked]]:[2,[!0]]}))}))},e.prototype.getApplicationClickedTimes=function(e,t){var n=this.persistentLocalStorage.getDisplayedPromotionInfo(t,e);return n?n.CTAClicked:0},e.prototype.onUserActionCTAClicked=function(e){return i(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){return t=e.promotionId,n=e.gameId,this.logger.info("The promotion (".concat(n,", ").concat(t,") was Displayed.")),this.persistentLocalStorage.setPromotionClicked(n,t),[2]}))}))},r([(0,a.injectable)(),(0,d.conditionType)(d.ConditionType.Promotion),o("design:paramtypes",[u.RecommendationDatastoreService,l.PersistentStorageService,f.UserActionService])],e)}();t.ConditionPromotionCTAClicked=p},6403:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionPromotionPreviouslyDisplayed=void 0;var a=n(1984),c=n(3593),u=n(3302),l=n(5236),f=n(2331),d=n(1459),h=n(9964),p=function(){function e(e,t,n){this.datastoreService=e,this.persistentLocalStorage=t,this.userActionService=n,this.logger=c.LoggerService.getCategory("ConditionPromotionPreviouslyDisplayed"),this.userActionService.addListener(this)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.logger.name},enumerable:!1,configurable:!0}),e.prototype.match=function(e){return i(this,void 0,void 0,(function(){var t,n,r;return s(this,(function(o){return t=e.game,n=e.promotion,!(r=this.getApplicationDisplayedTimestamp(n,t))||0===r||r<(null==n?void 0:n.displayLimit)?(this.logger.info("Previously displayed ".concat(r,", out of ").concat(n.displayLimit)),[2,[!0]]):(this.logger.info("Reached display limit of ".concat(n.displayLimit)),[2,[!1,h.NoRecommendationReasons.PreviouslyDisplayed]])}))}))},e.prototype.getApplicationDisplayedTimestamp=function(e,t){var n=this.persistentLocalStorage.getDisplayedPromotionInfo(t,e);return n?n.count:0},e.prototype.onUserActionDisplayed=function(e){return i(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){return t=e.promotionId,n=e.gameId,this.logger.info("The promotion (".concat(n,", ").concat(t,") was Displayed.")),this.persistentLocalStorage.setPromotionDisplayed(n,t),[2]}))}))},r([(0,a.injectable)(),(0,d.conditionType)(d.ConditionType.Promotion),o("design:paramtypes",[u.RecommendationDatastoreService,l.PersistentStorageService,f.UserActionService])],e)}();t.ConditionPromotionPreviouslyDisplayed=p},1459:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConditionType=t.conditionType=t.ConditionType=void 0,n(8660);var r,o=Symbol("ConditionType");(r=t.ConditionType||(t.ConditionType={}))[r.Global=0]="Global",r[r.Promotion=1]="Promotion",t.conditionType=function(e){return function(t){return Reflect.defineMetadata(o,e,t.prototype),t}},t.getConditionType=function(e){return Reflect.getMetadata(o,e)}},6702:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kNameOfCondition=void 0,t.kNameOfCondition="Condition"},6401:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.ContentRecommendationService=void 0;var l=n(1984),f=n(5566),d=n(3593),h=n(3302),p=n(6702),g=n(8997),v=n(9964),y=n(1459),m=n(8122),w=function(){function e(e,t,n,r,o){this.datastoreService=e,this.weightedRandomAppSelector=t,this.conditions=n,this.promotionAnalyticsService=r,this.stopWatch=o,this.logger=d.LoggerService.getCategory("ContentRecommendationService"),this.listeners=new Set}return e.prototype.gameStarted=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this.stopWatch.start(),this.logger.info("Game Id ".concat(e," started")),[4,this.getAndHandleGameConfiguration(e)];case 1:return(t=n.sent())?t.shouldShowOnStart?[2,this.runConditions(t)]:(this.logger.info("Game configured to wait for game to end ..."),this.triggerNoRecommendation(v.NoRecommendationReasons.ConfiguredForEnd),[2]):(this.triggerNoRecommendation(v.NoRecommendationReasons.ConfiguredForEnd),[2])}}))}))},e.prototype.gameEnded=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return[4,this.getAndHandleGameConfiguration(e)];case 1:return(t=o.sent())?t.shouldShowOnStart?(this.triggerNoRecommendation(v.NoRecommendationReasons.ConfiguredForStart),[2]):t.shouldShowOnEnd?[4,this.datastoreService.getGlobalConfigurations()]:[2]:(this.triggerNoRecommendation(v.NoRecommendationReasons.NoGameConfig),[2]);case 2:return n=o.sent(),r=this.stopWatch.getTime()/60/1e3,this.stopWatch.stop(),this.logger.info("Game Id ".concat(e," ended, after running for ")+"".concat(r," minutes out of the configured ")+"".concat(n.minimumGameSessionTimeToDisplayPromotionMins," minutes ")),r<n.minimumGameSessionTimeToDisplayPromotionMins?(this.logger.info("Skipping recommendation display because game session was to short"),this.triggerNoRecommendation(v.NoRecommendationReasons.MinimumGameSessionLengthNotReached),[2]):(this.runConditions(t),[2])}}))}))},e.prototype.getAndHandleGameConfiguration=function(e){return s(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.datastoreService.getGame(e)];case 1:return(t=r.sent())?[2,t]:(this.logger.info("No game configuration found"),this.triggerNoRecommendation(v.NoRecommendationReasons.NoGameConfig),[2,null]);case 2:return n=r.sent(),this.logger.error("",n),this.triggerNoRecommendation(v.NoRecommendationReasons.FailedToQueryServer),[2,null];case 3:return[2]}}))}))},e.prototype.runConditions=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return this.logger.info("*** Starting promotion display conditions evaluation process ..."),[4,this.getGlobalConditionsResult(e)];case 1:return t=c.apply(void 0,[o.sent(),2]),n=t[0],r=t[1],n?[4,this.tryRecommendingPromotion(e)]:[2,this.triggerNoRecommendation(r)];case 2:return o.sent(),[2]}}))}))},e.prototype.getGlobalConditionsResult=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t={game:e},n=this.conditions.filter((function(e){return(0,y.getConditionType)(e)===y.ConditionType.Global})),[4,this.passesConditions(t,n)];case 1:return[2,o.sent()];case 2:return r=o.sent(),this.logger.error("Failed checking global conditions: ",r),[3,3];case 3:return[2,[!1,v.NoRecommendationReasons.CooldownCrashed]]}}))}))},e.prototype.tryRecommendingPromotion=function(e){return s(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:t=this.conditions.filter((function(e){return(0,y.getConditionType)(e)===y.ConditionType.Promotion})),this.weightedRandomAppSelector.initialize(e.promotions),n=this.weightedRandomAppSelector.next(),o.label=1;case 1:return n?(r={game:e,promotion:n},this.logger.info("**** Running conditions on: ".concat(n.name," ...")),[4,this.passesConditions(r,t)]):[3,3];case 2:return c.apply(void 0,[o.sent(),1])[0]?[2,this.triggerShowPromotion(e,n)]:(n=this.weightedRandomAppSelector.next(),[3,1]);case 3:return this.triggerNoRecommendation(v.NoRecommendationReasons.PortfolioExhausted),[2]}}))}))},e.prototype.passesConditions=function(e,t){return s(this,void 0,void 0,(function(){var n,r,o,i,s,l,f,d,h;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,6,7,8]),n=u(t),r=n.next(),a.label=1;case 1:return r.done?[3,5]:(o=r.value,[4,this.shouldSkipCondition(o,e)]);case 2:return a.sent()?(this.logger.info("Skipping condition ".concat(o.id)),[3,4]):[4,o.match(e)];case 3:if(i=c.apply(void 0,[a.sent(),2]),s=i[0],l=i[1],!s)return this.logger.info("".concat(o.id,": [Failed] (").concat(l,")")),[2,[s,l]];this.logger.info("".concat(o.id,": [Passed]")),a.label=4;case 4:return r=n.next(),[3,1];case 5:return[3,8];case 6:return f=a.sent(),d={error:f},[3,8];case 7:try{r&&!r.done&&(h=n.return)&&h.call(n)}finally{if(d)throw d.error}return[7];case 8:return[2,[!0]]}}))}))},e.prototype.shouldSkipCondition=function(e,t){return s(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return e.shouldSkip?[4,e.shouldSkip(t)]:[2,!1];case 1:return[2,n.sent()]}}))}))},e.prototype.triggerNoRecommendation=function(e){var t,n;this.logger.info("No recommendation triggered with reason: ".concat(e));try{for(var r=u(this.listeners),o=r.next();!o.done;o=r.next()){var i=o.value;i.onNoRecommendations&&i.onNoRecommendations(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e.prototype.triggerShowPromotion=function(e,t){var n,r;this.logger.info("Triggering recommendation for game: ".concat(e.id," & promotion:")+" ".concat(t.id));try{for(var o=u(this.listeners),i=o.next();!i.done;i=o.next()){var s=i.value;s.onShowPromotion&&s.onShowPromotion(e,t)}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.addListener=function(e){this.listeners.add(e)},e.prototype.removeListener=function(e){this.listeners.delete(e)},r([(0,l.singleton)(),i(2,(0,l.injectAll)(p.kNameOfCondition)),o("design:paramtypes",[h.RecommendationDatastoreService,g.WeightedRandomAppSelector,Array,m.PromotionAnalyticsService,f.StopWatch])],e)}();t.ContentRecommendationService=w},9964:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.NoRecommendationReasons=void 0,(n=t.NoRecommendationReasons||(t.NoRecommendationReasons={})).FailedToQueryServer="FailedToQueryServer",n.NoGameConfig="NoGameConfig",n.CooldownCrashed="CooldownCrashed",n.CooldownInitial="CooldownInitial",n.CooldownDisplay="CooldownDisplay",n.CooldownOWLaunch="CooldownOWLaunch",n.UserPersistentPhasing="UserPersistentPhasing",n.NoRelevantApp="NoRelevantApp",n.PortfolioExhausted="PortfolioExhausted",n.FailedToGetServiceConfig="FailedToGetServiceConfig",n.SpecificApplicationAlreadyDownloaded="SpecificApplicationAlreadyDownloaded",n.CapLimitReached="CapLimitReached",n.DedicatedAppAlreadyInstalled="DedicatedAppAlreadyInstalled",n.AppAlreadyInstalled="AppAlreadyInstalled",n.ErrorNoAppContext="ErrorNoAppContext",n.GPUNotSupported="GPUNotSupported",n.DismissedByUser="DismissedByUser",n.BlackListedApp="BlackListedApp",n.NoAppToRecommend="NoAppToRecommend",n.GameIsRunning="GameIsRunning",n.MinimumGameSessionLengthNotReached="MinimumGameSessionLengthNotReached",n.GameConfiguredToShowOnStart="GameConfiguredToShowOnStart",n.GameExcludedByUser="GameExcludedByUser",n.AppExcludedByUser="AppExcludedByUser",n.GeoRestricted="GeoRestricted",n.PreviouslyDisplayed="PreviouslyDisplayed",n.MinimumAdUniteDisplayNotReached="MinimumAdUniteDisplayNotReached",n.GameEventsInfoNotFound="GameEventsInfoNotFound",n.CTAPreviouslyClicked="CTAPreviouslyClicked",n.ConfiguredForStart="ConfiguredForStart",n.ConfiguredForEnd="ConfiguredForEnd"},8997:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.WeightedRandomAppSelector=void 0;var o=n(1984),i=n(6519),s=function(){function e(){this.applications=[]}return e.prototype.initialize=function(e){this.applications=i.Utils.deepClone(e)},e.prototype.next=function(){var e;if(0===(null===(e=this.applications)||void 0===e?void 0:e.length))return null;var t=this.fillArrayWithAppIndices();this.fisherYatesShuffle(t);var n=t[i.Utils.randomWholeNumber(0,t.length-1)],r=this.applications[n];return this.applications.splice(n,1),r},e.prototype.fillArrayWithAppIndices=function(){for(var e=[],t=0;t<this.applications.length;++t)for(var n=this.applications[t],r=0;r<n.recommendWeight;++r)e.push(t);return e},e.prototype.fisherYatesShuffle=function(e){for(var t=e.length-1;t>=0;--t){var n=i.Utils.randomWholeNumber(0,t),r=e[t];e[t]=e[n],e[n]=r}},r([(0,o.injectable)()],e)}();t.WeightedRandomAppSelector=s},8405:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.PromotionWindowService=void 0;var u=n(1984),l=n(5566),f=n(3385),d=n(3593),h=n(5279),p=n(8242),g=n(8730),v=n(2331),y=n(8122),m=n(5628),w=n(3302),b=n(875),_=n(6775),S=n(201),P=n(2071),O=n(7095),R=function(){function e(e,t,n,r,o,i,s,a,c){this.owPromotionWindow=e,this.owWindowScreenAnchor=t,this.datastoreService=n,this.owWindowListener=r,this.promotionVisibilityStopWatch=o,this.timerService=i,this.userActionService=s,this.promotionDetailsBuilder=a,this.promotionAnalyticsService=c,this.logger=d.LoggerService.getCategory("PromotionWindowService"),this.listeners=new Set,this.isTesterPromotion=!1,this.timerService.addListener(this)}return e.prototype.show=function(e,t,n,r){return void 0===n&&(n=!1),s(this,void 0,void 0,(function(){var o,i,s,c,u,l,f,d=this;return a(this,(function(a){switch(a.label){case 0:return this.logger.info("Showing promotion for game: ".concat(e)),this.registerListeners(),o=this,[4,this.promotionDetailsBuilder.getPromotionDetails(e,t,r)];case 1:return o.activePromotionInfo=a.sent(),window.screen.width,window.screen.height,i=window.devicePixelRatio,s=384,c=294,this.promotionWindow=new P.OSRWindow({id:"promotion",url:"dist/promotion/promotion.html",visible:!1,width:s,height:c,minWidth:s,minHeight:c,autoDpi:!1,autoZoom:!1,transparent:!0,resizable:!1,showInTaskBar:!1,isAltF4Blocked:!0,topMost:!0,type:O.OSRType.InGameOnly}),this.promotionWindow.on("closed",(function(){d.onWindowClosed(h.kPromotionWindowName)})),[4,this.promotionWindow.assureCreated()];case 2:return a.sent(),n?[3,4]:[4,_.MonitorHelper.getWindowMonitor(this.promotionWindow)];case 3:return f=a.sent(),u=1===i?f.width:f.width/i,l=1===i?f.height:f.height/i,[3,5];case 4:u=1===i?window.screen.width:window.screen.width/i,l=1===i?window.screen.height:window.screen.height/i,a.label=5;case 5:return u!==s&&l!==c&&this.promotionWindow.setSize({width:u,height:l}),[4,this.promotionWindow.anchor(S.Edge.TopRight,{marginX:Math.trunc(75),marginY:Math.trunc(393)})];case 6:return a.sent(),[4,this.promotionWindow.show()];case 7:return a.sent(),this.startIdleTimer(),n&&(this.isTesterPromotion=!0),[2]}}))}))},e.prototype.close=function(){this.owPromotionWindow.close()},e.prototype.isPromotionShown=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.owPromotionWindow.getWindowState()];case 1:return"closed"===e.sent().window_state_ex?[2,!1]:[2,!0]}}))}))},e.prototype.getPromotionInfo=function(){return this.activePromotionInfo},e.prototype.registerListeners=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.unregisterListeners(),this.owWindowListener.addListener(this),[2]}))}))},e.prototype.unregisterListeners=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.owWindowListener.removeListener(this),[2]}))}))},e.prototype.startIdleTimer=function(){return s(this,void 0,void 0,(function(){var e,t;return a(this,(function(n){switch(n.label){case 0:return[4,this.datastoreService.getGlobalConfigurations()];case 1:return e=n.sent(),t=this.isTesterPromotion?6e4:1e3*e.autoDismissPromotionsInSeconds,this.timerService.initialize({intervalInMs:t}),this.timerService.start(),[2]}}))}))},e.prototype.stopIdleTimer=function(){this.timerService.stop()},e.prototype.triggerListenerEvent=function(e){for(var t,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(e)try{for(var i=c(this.listeners),s=i.next();!s.done;s=i.next()){var a=s.value;a[e]&&a[e].apply(a,r)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.handlePromotionViewed=function(){return s(this,void 0,void 0,(function(){var e,t=this;return a(this,(function(n){switch(n.label){case 0:return[4,this.datastoreService.getGlobalConfigurations()];case 1:return e=n.sent(),setTimeout((function(){t.triggerListenerEvent("onPromotionReachedMinTimeToDisplay",t.activePromotionInfo)}),1e3*e.minimumVisibleTimeToCountInSeconds),[2]}}))}))},Object.defineProperty(e.prototype,"token",{get:function(){return f.kNameOfPromotionWindowService},enumerable:!1,configurable:!0}),e.prototype.addListener=function(e){this.listeners.add(e)},e.prototype.removeListener=function(e){this.listeners.delete(e)},e.prototype.promotionBecameVisible=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.logger.info("Recommendation became visible, restarting timer"),this.promotionVisibilityStopWatch.start(),[4,this.handlePromotionViewed()];case 1:return e.sent(),[2]}}))}))},e.prototype.getPromotionStopWatchTime=function(){return this.promotionVisibilityStopWatch.getTime()},e.prototype.getActivePromotion=function(){return this.activePromotionInfo},e.prototype.closePromotionWindow=function(){this.close()},e.prototype.toggleTimeoutTimer=function(e){e?this.stopIdleTimer():this.timerService.start()},e.prototype.onAltF4Blocked=function(e){this.logger.info("received Alt+F4 key combination on windowId: ".concat(e," ")),e.endsWith(h.kPromotionWindowName)&&(this.promotionVisibilityStopWatch.stop(),this.userActionService.promotionDismissed(this.activePromotionInfo),this.close())},e.prototype.onWindowClosed=function(e){if(e.endsWith(h.kPromotionWindowName)){this.stopIdleTimer(),this.unregisterListeners(),this.logger.info('Promotion window, windowId: "'.concat(e,'" closed,'));var t=this.promotionVisibilityStopWatch.getTime()/1e3;this.promotionVisibilityStopWatch.stop(),this.isTesterPromotion||this.triggerListenerEvent("onPromotionWindowClosed",this.activePromotionInfo,t)}},e.prototype.onTimer=function(){this.logger.info("Promotion timer has reached an end, closing promotion "),this.promotionVisibilityStopWatch.stop(),this.promotionAnalyticsService.reportContentRecommend(this.activePromotionInfo.gameId,this.activePromotionInfo.promotionId,m.ContentRecommendationUserAction.Timeout),this.close()},r([(0,u.singleton)(),i(0,(0,u.inject)(h.kDITokenOwPromotionWindow)),i(1,(0,u.inject)(h.kDITokenPromotionWindowScreenAnchor)),o("design:paramtypes",[l.OWWindow,l.OWWindowScreenAnchor,w.RecommendationDatastoreService,p.OWWindowListenerWrapper,l.StopWatch,b.TimerService,v.UserActionService,g.PromotionDetailsBuilderService,y.PromotionAnalyticsService])],e)}();t.PromotionWindowService=R},3055:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteObjectHttpFile=t.kNameOfRemoteObjectHttpFile=t.kHeaderLastModified=void 0;var u=c(n(9669)),l=n(1984),f=n(8971),d=n(5934);t.kHeaderLastModified="last-modified",t.kNameOfRemoteObjectHttpFile="RemoteObjectHttpFile";var h=function(){function e(e,t){this.singleRequestLock=e,this.axiosImpl=t,t||(this.axiosImpl=u.default)}return e.prototype.initialize=function(e){this.url=e},e.prototype.getLastModified=function(){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,this.singleRequestLock.lock()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,,4,6]),[4,this.axiosImpl.head(this.url.toString())];case 3:return e=r.sent(),n=e.headers[t.kHeaderLastModified],[2,new Date(n)];case 4:return[4,this.singleRequestLock.unlock()];case 5:return r.sent(),[7];case 6:return[2]}}))}))},e.prototype.retrieve=function(){return s(this,void 0,void 0,(function(){var e,n;return a(this,(function(r){switch(r.label){case 0:return[4,this.singleRequestLock.lock()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,5,7]),[4,this.axiosImpl.get(this.url.toString())];case 3:return e=r.sent(),n=e.headers[t.kHeaderLastModified],[2,[e.data,new Date(n)]];case 4:return r.sent(),[2,[null,null]];case 5:return[4,this.singleRequestLock.unlock()];case 6:return r.sent(),[7];case 7:return[2]}}))}))},r([(0,l.injectable)(),i(1,(0,l.inject)(d.kDITokenAxios)),o("design:paramtypes",[f.AsyncLock,Function])],e)}();t.RemoteObjectHttpFile=h},9446:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},c=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteObjectRetrieverService=t.kDITRemoteObjectRetrieverServiceOptions=void 0;var u=n(1984),l=n(3593),f=n(875),d=n(8971);t.kDITRemoteObjectRetrieverServiceOptions="RemoteObjectRetrieverServiceOptions";var h=function(){function e(e,t,n,r){this.options=e,this.remoteObject=t,this.timerService=n,this.singleRequestLock=r,this.logger=l.LoggerService.getCategory("RemoteObjectRetrieverService"),this.latestRetrievedObject=void 0,this.preformedFirstRetrievalAttempt=!1,t.initialize(e.configUrl),n.initialize({intervalInMs:e.retrievalIntervalInMs,autoReset:!0}),n.addListener(this)}return e.prototype.getObject=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.singleRequestLock.lock()];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,,4,6]),this.preformedFirstRetrievalAttempt?[2,this.latestRetrievedObject]:[4,this.tryToRetrieveRemoteObjectWithRetries(this.options.maxRetries)];case 3:if(e.sent(),this.timerService.start(),!this.latestRetrievedObject)throw new Error("Failed to retrieve config");return[2,this.latestRetrievedObject];case 4:return this.preformedFirstRetrievalAttempt=!0,[4,this.singleRequestLock.unlock()];case 5:return e.sent(),[7];case 6:return[2]}}))}))},e.prototype.initConfigUrl=function(e){return s(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.remoteObject.initialize(e),[4,this.tryToRetrieveRemoteObject()];case 1:return t.sent(),[2]}}))}))},e.prototype.tryToRetrieveRemoteObjectWithRetries=function(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:t=!1,n.label=1;case 1:return!t&&e>0?[4,this.handleSingleRetrievalRetry()]:[3,3];case 2:return t=n.sent(),e--,[3,1];case 3:return this.preformedFirstRetrievalAttempt=!0,t?[2,!0]:(this.logger.error("Failed all retries!"),[2,!1])}}))}))},e.prototype.handleSingleRetrievalRetry=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,this.tryToRetrieveRemoteObject()];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[4,this.timerService.sleep(this.options.waitIntervalBetweenRetriesInMs)];case 3:return e.sent(),[3,4];case 4:return[2,!1]}}))}))},e.prototype.tryToRetrieveRemoteObject=function(){return s(this,void 0,void 0,(function(){var e,t,n,r;return a(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.remoteObject.retrieve()];case 1:return e=c.apply(void 0,[o.sent(),2]),t=e[0],n=e[1],this.latestRetrievedObject=t,this.logger.info("Retrieved remote config ".concat(n)),[3,3];case 2:throw r=o.sent(),this.logger.error("Failed to retrieve remote object",r),r;case 3:return[2]}}))}))},e.prototype.onTimer=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.logger.info("Try to retrieve updated remote object ..."),[4,this.tryToRetrieveRemoteObjectWithRetries(this.options.maxRetries)];case 1:return e.sent(),[2]}}))}))},r([i(0,(0,u.inject)(t.kDITRemoteObjectRetrieverServiceOptions)),o("design:paramtypes",[Object,Object,f.TimerService,d.AsyncLock])],e)}();t.RemoteObjectRetrieverService=h},4010:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.TesterWindowService=void 0;var c=n(1984),u=n(4801),l=n(8242),f=n(5279),d=n(5236),h=n(3302),p=function(){function e(e,t,n){this.persistentStorage=e,this.owWindowListener=t,this.datastoreService=n,this.listeners=new Set,this.isRunning=!1,this.owWindowListener.addListener(this)}return e.prototype.triggerListenerEvent=function(e,t,n){return i(this,void 0,void 0,(function(){var r,o,i,c,u;return s(this,(function(s){switch(s.label){case 0:if(!e||!t)return[2];s.label=1;case 1:s.trys.push([1,6,7,8]),r=a(this.listeners),o=r.next(),s.label=2;case 2:return o.done?[3,5]:[4,o.value.onTestingPromotionSet(e,t,n)];case 3:s.sent(),s.label=4;case 4:return o=r.next(),[3,2];case 5:return[3,8];case 6:return i=s.sent(),c={error:i},[3,8];case 7:try{o&&!o.done&&(u=r.return)&&u.call(r)}finally{if(c)throw c.error}return[7];case 8:return[2]}}))}))},e.prototype.IsPromotionRunning=function(){return this.isRunning},e.prototype.addListener=function(e){this.listeners.add(e)},e.prototype.removeListener=function(e){this.listeners.delete(e)},e.prototype.promotionAlreadyRunning=function(e){this.isRunning=e},e.prototype.transferTesterPromotion=function(e,t,n){void 0===n&&(n=null),this.triggerListenerEvent(e,t,n)},e.prototype.resetPromotionTimestamp=function(){this.persistentStorage.resetLastDisplayedPromotionTimestamp()},e.prototype.resetLocalStorage=function(){this.persistentStorage.deleteLocalStorageItems()},e.prototype.resetPromotionsHistory=function(){this.persistentStorage.createPromotionHistory()},e.prototype.getGlobalConfigurations=function(){return this.datastoreService.getGlobalConfigurations()},e.prototype.getAllGamesConfigurations=function(){return this.datastoreService.getAllGames()},e.prototype.getGameConfiguration=function(e){return this.datastoreService.getGame(e)},e.prototype.setEnvironment=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){return[2,this.datastoreService.setEnvironment(e)]}))}))},e.prototype.resetDisplayedPromotions=function(){return this.persistentStorage.resetDisplayedPromotions()},Object.defineProperty(e.prototype,"token",{get:function(){return u.kNameOfTesterWindowService},enumerable:!1,configurable:!0}),e.prototype.onWindowClosed=function(e){e.endsWith(f.kTesterWindowName)&&(this.owWindowListener.removeListener(this),window.close())},r([(0,c.singleton)(),o("design:paramtypes",[d.PersistentStorageService,l.OWWindowListenerWrapper,h.RecommendationDatastoreService])],e)}();t.TesterWindowService=p},2331:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.UserActionService=void 0;var s=n(1984),a=n(5628),c=n(3234),u=n(875),l=n(3019),f=n(8280),d=n(8122),h=function(){function e(e,t,n,r){this.owExtensionWrapper=e,this.owUtilsWrapper=t,this.promotionAnalyticsService=n,this.timerService=r,this.listeners=new Set,this.owExtensionWrapper.initialize()}return Object.defineProperty(e.prototype,"token",{get:function(){return c.kNameOfUserActionService},enumerable:!1,configurable:!0}),e.prototype.triggerListenerEvent=function(e,t){var n,r;if(e)try{for(var o=i(this.listeners),s=o.next();!s.done;s=o.next()){var a=s.value;a[e]&&a[e](t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.addListener=function(e){this.listeners.add(e)},e.prototype.removeListener=function(e){this.listeners.delete(e)},e.prototype.sendTrackingEvent=function(e){this.promotionAnalyticsService.reportContentViewEvent(e)},e.prototype.sendErrorTrackingEvent=function(e){this.promotionAnalyticsService.reportContentViewError(e.gameId,e.promotionId)},e.prototype.promotionDisplayed=function(e){this.triggerListenerEvent("onUserActionDisplayed",e)},e.prototype.promotionDismissed=function(e){this.promotionAnalyticsService.reportContentRecommend(e.gameId,e.promotionId,a.ContentRecommendationUserAction.Dismissed)},e.prototype.OpenExternalUrl=function(e,t){this.promotionAnalyticsService.reportContentRecommend(t.gameId,t.promotionId,a.ContentRecommendationUserAction.CTAClicked),this.triggerListenerEvent("onUserActionCTAClicked",t)},r([(0,s.singleton)(),o("design:paramtypes",[l.OWExtensionWrapper,f.OWUtilsWrapper,d.PromotionAnalyticsService,u.TimerService])],e)}();t.UserActionService=h},9889:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TesterWindow=void 0;var c=n(1984),u=n(5566),l=n(3593),f=n(5279),d=n(9487),h=n(6698),p=function(){function e(e,t,n,r){this.promotionWinManager=e,this.testerWindowManagerService=t,this.owWindow=n,this.owWindowScreenAnchor=r,this.logger=l.LoggerService.getCategory("TesterWindow")}return e.prototype.show=function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return this.testerWindowManagerService.addListener(this),this.owWindow.restore(),[2]}))}))},e.prototype.onTestingPromotionSet=function(e,t,n){return s(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return this.logger.info("Showing promotion ".concat(e.id,", ").concat(t.id)),[4,this.promotionWinManager.isPromotionShown()];case 1:return r=o.sent(),this.testerWindowManagerService.promotionAlreadyRunning(r),r?(this.logger.info("Promotions window is Open,   unable to load new promotion until window is closed."),[2,!1]):(this.promotionWinManager.show(e.id,t.id,!0,n),[2,!0])}}))}))},e.prototype.closePromotionWindow=function(){this.owWindowScreenAnchor.stop()},r([(0,c.injectable)(),i(0,(0,c.inject)(d.kNameOfPromotionWindowManagerService)),i(1,(0,c.inject)(h.kNameOfTesterWindowManagerService)),i(2,(0,c.inject)(f.kDITokenOwTesterWindow)),i(3,(0,c.inject)(f.kDITokenPromotionWindowScreenAnchor)),o("design:paramtypes",[Object,Object,u.OWWindow,u.OWWindowScreenAnchor])],e)}();t.TesterWindow=p},8477:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OWInternalExtensions=void 0;var n=function(){function e(){}return e.getDownloadedExtensions=function(){return new Promise((function(e){overwolfInternal.extensions.getDownloadedExtensions((function(t){return"error"===(null==t?void 0:t.status)&&console.error("Failed to get all open windows: ".concat(t.reason)),e((null==t?void 0:t.extensions)||[])}))}))},e.showDevTools=function(e,t){overwolfInternal.extensions.showDevTools(e,t)},e.installAnyApp=function(e,t){return void 0===t&&(t=!1),new Promise((function(n){overwolfInternal.extensions.installAnyApp(e,t,(function(e){return"error"===e.status&&console.error("Failed to install app: ".concat(e.reason)),n(e)}))}))},e.changeExtensionEnableState=function(e,t){return new Promise((function(n){overwolfInternal.extensions.changeExtensionEnableState(e,t,(function(r){return r.success||console.error("Failed to change enable state for ".concat(e," to ").concat(t)),n(r)}))}))},e.addTemporarilyWhitelistedExtension=function(e){return new Promise((function(t){overwolfInternal.extensions.addTemporarilyWhitelistedExtension(e,(function(n){return"success"!==n.status&&console.error("Failed to addTemporarilyWhitelistedExtension ".concat(e," ")),t(n)}))}))},e}();t.OWInternalExtensions=n},9225:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWInternalProfile=void 0;var o=function(){function e(){}return e.getCurrentUser=function(){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2,new Promise((function(e,t){overwolfInternal.profile.getCurrentUser((function(n){return"success"!==n.status?t(n):e(n)}))}))]}))}))},e}();t.OWInternalProfile=o},8157:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWInternalUtils=void 0;var o=function(){function e(){}return e.getPersistentPhasedPercent=function(){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2,new Promise((function(e){overwolfInternal.utils.getPersistentPhasedPercent((function(t){e(t.phasedPercent)}))}))]}))}))},e.isAnyNotificationDisplayed=function(){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2,new Promise((function(e){overwolfInternal.utils.isAnyNotificationDisplayed((function(t){var n=t&&"success"===t.status&&!0===t.displayed;e(n)}))}))]}))}))},e.collectLogs=function(){return new Promise((function(e){overwolfInternal.utils.createLogsZip((function(t){e("success"===t.status)}))}))},e}();t.OWInternalUtils=o},6684:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3446),t),o(n(8154),t)},8154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OWListener=void 0;var n=function(){function e(e){this._delegate=e}return e.prototype.start=function(){this.stop()},e}();t.OWListener=n},3446:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(5241),t),o(n(9044),t),o(n(6437),t),o(n(462),t)},6437:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=t.LocalStorageValue=void 0;var n=function(){function e(e){this._value=e}return Object.defineProperty(e.prototype,"raw",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.asBool=function(){return this._value&&"true"===this._value.toLowerCase()},e.prototype.asInt=function(){return this._value&&parseInt(this._value,10)},e.prototype.asObject=function(){try{return JSON.parse(this._value)}catch(e){return console.error(e),null}},e.prototype.asArray=function(){try{return JSON.parse(this._value)}catch(e){return console.error(e),null}},e.prototype.isNull=function(){return null===this._value},e}();t.LocalStorageValue=n;var r=function(){function e(){}return e.get=function(e){var t=localStorage.getItem(e);return new n(t)},e.set=function(e,t){t||(t=""),localStorage.setItem(e,t)},e.setBool=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.remove=function(e){localStorage.removeItem(e)},e.setObject=function(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(e){return console.error(e),!1}},e}();t.LocalStorage=r},9044:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWatch=void 0;var n=function(){function e(){this._startTime=0,this._stopTime=0,this._initialized=!1}return Object.defineProperty(e.prototype,"initialized",{get:function(){return this._initialized},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._stopTime=0,this._startTime=Date.now(),this._initialized=!0},e.prototype.stop=function(){return this._initialized?(this._stopTime=Date.now(),this._stopTime-this._startTime):0},e.prototype.getTime=function(){return this._initialized?this._stopTime>0?this._stopTime-this._startTime:Date.now()-this._startTime:0},e}();t.StopWatch=n},462:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;var n=function(){function e(){}return e.isNullOrEmpty=function(e){return!e||0===e.length},e}();t.StringUtils=n},5241:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;var o=function(){function e(e,t,n){void 0===n&&(n=!1);var r=this;this._timerId=null,this.handleTimerEvent=function(){r._timerId=null,r._delegate.onTimer(r._id),r._autoReset&&r.start(r._intervalInMS)},this._delegate=e,this._id=t,this._autoReset=n}return e.wait=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){setTimeout(t,e)}))]}))}))},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.start=function(e){this.stop(),this._intervalInMS=e,this._timerId=setTimeout(this.handleTimerEvent,e)},e.prototype.stop=function(){null!=this._timerId&&(clearTimeout(this._timerId),this._timerId=null)},e}();t.Timer=o},5566:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(6684),t),o(n(496),t),o(n(3980),t),o(n(844),t),o(n(583),t),o(n(7058),t),o(n(6941),t),o(n(358),t),o(n(4087),t),o(n(2033),t),o(n(7926),t),o(n(2937),t),o(n(5343),t),o(n(7851),t),o(n(4550),t),o(n(9885),t)},3980:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWExtension=void 0;var o=function(){function e(e){this._manifest=e}return e.fromCurrent=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){overwolf.extensions.current.getManifest((function(n){return t(new e(n))}))}))]}))}))},e.fromExtensionId=function(t){return n(this,void 0,void 0,(function(){return r(this,(function(n){return[2,new Promise((function(n){overwolf.extensions.getManifest(t,(function(r){r.success?n(new e(r)):(console.log("".concat(t," - ").concat(JSON.stringify(r))),n(null))}))}))]}))}))},e.generateUserEmailHashes=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){overwolf.extensions.current.generateUserEmailHashes(e,(function(e){return t(e.success)}))}))]}))}))},e.CheckForUpdate=function(){return new Promise((function(e){overwolf.extensions.checkForExtensionUpdate(e)}))},e.RepairUrlProtocol=function(){return new Promise((function(e){overwolf.extensions.current.repairUrlProtocol((function(t){return e(t.success)}))}))},e.UpdateExtension=function(){return new Promise((function(e){overwolf.extensions.updateExtension(e)}))},Object.defineProperty(e.prototype,"manifest",{get:function(){return this._manifest},enumerable:!1,configurable:!0}),e}();t.OWExtension=o},583:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWExtensionsIO=void 0;var i=function(){function e(){}return e.readTextFile=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,new Promise((function(r){overwolf.extensions.io.readTextFile(e,t,(function(e){return r(n(n({},e),{status:""}))}))}))]}))}))},e.writeTextFile=function(e,t,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){return[2,new Promise((function(r){overwolf.extensions.io.writeTextFile(e,t,n,(function(e){return r(e.success)}))}))]}))}))},e.getStoragePath=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t){overwolf.extensions.io.getStoragePath(e,(function(e){return t(e)}))}))]}))}))},e}();t.OWExtensionsIO=i},844:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OWExtensionsListener=void 0;var i=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t)||this;return r.onAppLaunchTriggered=function(e){r._delegate.onAppLaunchTriggered&&r._delegate.onAppLaunchTriggered(e)},r.onAppInstalled=function(e){r._delegate.onAppInstalled&&r._delegate.onAppInstalled(e)},r.onAppUninstalled=function(e){r._delegate.onAppUninstalled&&r._delegate.onAppUninstalled(e)},r.onExtensionUpdated=function(e){r._delegate.onExtensionUpdated&&r._delegate.onExtensionUpdated(e)},n&&r.start(),r}return o(t,e),t.prototype.start=function(){e.prototype.start.call(this),this._delegate.onAppLaunchTriggered&&overwolf.extensions.onAppLaunchTriggered.addListener(this.onAppLaunchTriggered),this._delegate.onAppInstalled&&overwolf.extensions.onAppInstalled.addListener(this.onAppInstalled),this._delegate.onAppUninstalled&&overwolf.extensions.onAppUninstalled.addListener(this.onAppUninstalled),this._delegate.onExtensionUpdated&&overwolf.extensions.onExtensionUpdated.addListener(this.onExtensionUpdated)},t.prototype.stop=function(){overwolf.extensions.onAppLaunchTriggered.removeListener(this.onAppLaunchTriggered),overwolf.extensions.onAppInstalled.removeListener(this.onAppInstalled),overwolf.extensions.onAppUninstalled.removeListener(this.onAppUninstalled),overwolf.extensions.onExtensionUpdated.addListener(this.onExtensionUpdated)},t}(n(6684).OWListener);t.OWExtensionsListener=i},9117:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWExtensions=t.kLaunchEventDockLaunch=t.kRelaunch=t.kLaunchEventGameLaunch=t.kLaunchEventOverwolfStart=t.kUrlParamGameId=t.kUrlParamSource=void 0,t.kUrlParamSource="source",t.kUrlParamGameId="gameid",t.kLaunchEventOverwolfStart="overwolfstartlaunchevent",t.kLaunchEventGameLaunch="gamelaunchevent",t.kRelaunch="relaunch",t.kLaunchEventDockLaunch="dock";var o=function(){function e(){}return e.launch=function(e,t){overwolf.extensions.launch(e,t)},e.getExtraObject=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t,n){overwolf.extensions.current.getExtraObject(e,(function(e){e.success?t(e.object):n(e.error)}))}))]}))}))},e.relaunch=function(){overwolf.extensions.relaunch()},e}();t.OWExtensions=o},7058:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OWGameListener=void 0;var i=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t)||this;return r.onGameInfoUpdated=function(e){e&&e.gameInfo&&(e.runningChanged||e.gameChanged)&&(e.gameInfo.isRunning?r._delegate.onGameStarted&&r._delegate.onGameStarted(e.gameInfo):r._delegate.onGameEnded&&r._delegate.onGameEnded(e.gameInfo))},r.onRunningGameInfo=function(e){e&&e.isRunning&&r._delegate.onGameStarted&&r._delegate.onGameStarted(e)},r.onGameTerminated=function(e){e&&e.gameInfo&&r._delegate.onGameTerminated&&r._delegate.onGameTerminated(e)},n&&r.start(),r}return o(t,e),t.prototype.start=function(){e.prototype.start.call(this),this.onTerminatedFunc=this.onGameTerminated.bind(this),overwolf.games.onGameInfoUpdated.addListener(this.onGameInfoUpdated),overwolf.games.tracked.onTerminated.addListener(this.onTerminatedFunc),overwolf.games.getRunningGameInfo(this.onRunningGameInfo)},t.prototype.stop=function(){overwolf.games.onGameInfoUpdated.removeListener(this.onGameInfoUpdated),overwolf.games.tracked.onTerminated.removeListener(this.onTerminatedFunc)},t}(n(8154).OWListener);t.OWGameListener=i},6941:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWGamesEvents=void 0;var i=n(5241),s=function(){function e(e,t,n){void 0===n&&(n=10);var r=this;this._stopped=!0,this.onInfoUpdates=function(e){r._delegate.onInfoUpdates(e.info)},this.onNewEvents=function(e){r._delegate.onNewEvents(e)},this._delegate=e,this._requiredFeatures=t,this._featureRetries=n}return e.prototype.getInfo=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e){overwolf.games.events.getInfo(e)}))]}))}))},e.prototype.start=function(){return r(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(o){switch(o.label){case 0:return console.log("[ow-game-events] START"),this._stopped=!1,this.registerEvents(),[4,this.setRequiredFeatures()];case 1:return e=o.sent(),[4,this.getInfo()];case 2:return t=o.sent(),n=t.res,r=t.status,n&&"success"===r&&this.onInfoUpdates({info:n}),[2,e]}}))}))},e.prototype.stop=function(){console.log("[ow-game-events] STOP"),this._stopped=!0,this.unRegisterEvents()},e.prototype.setRequiredFeatures=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,s=this;return o(this,(function(o){switch(o.label){case 0:e=1,o.label=1;case 1:return e<=this._featureRetries?[4,new Promise((function(e){overwolf.games.events.setRequiredFeatures(s._requiredFeatures,e)}))]:[3,4];case 2:return"success"===(t=o.sent()).status?(n=JSON.stringify(t,null,2),console.log("setRequiredFeatures(): success: ".concat(n)),[2,t.supportedFeatures.length>0]):[4,i.Timer.wait(3e3)];case 3:return o.sent(),this._stopped?(console.info("setRequiredFeatures(): stopped while in loop"),[2,!1]):(e++,[3,1]);case 4:return r=JSON.stringify(t,null,2),console.warn("setRequiredFeatures(): failure after ".concat(e," tries ").concat(r)),[2,!1]}}))}))},e.prototype.registerEvents=function(){this.unRegisterEvents(),overwolf.games.events.onInfoUpdates2.addListener(this.onInfoUpdates),overwolf.games.events.onNewEvents.addListener(this.onNewEvents)},e.prototype.unRegisterEvents=function(){overwolf.games.events.onInfoUpdates2.removeListener(this.onInfoUpdates),overwolf.games.events.onNewEvents.removeListener(this.onNewEvents)},e}();t.OWGamesEvents=s},358:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWGames=void 0;var o=function(){function e(){}return e.getRunningGameInfo=function(){return new Promise((function(e){overwolf.games.getRunningGameInfo(e)}))},e.classIdFromGameId=function(e){return Math.floor(e/10)},e.getRecentlyPlayedGames=function(e){return void 0===e&&(e=3),n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){if(!overwolf.games.getRecentlyPlayedGames)return t(null);overwolf.games.getRecentlyPlayedGames(e,(function(e){t(e.games)}))}))]}))}))},e.getGameDBInfo=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){overwolf.games.getGameDBInfo(e,t)}))]}))}))},e}();t.OWGames=o},4087:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OWHotkeysListener=void 0;var n=function(){function e(e){this.onHotKeyChanged=function(e){},this._delegate=e}return e.prototype.start=function(){overwolf.settings.OnHotKeyChanged.removeListener(this.onHotKeyChanged),overwolf.settings.OnHotKeyChanged.addListener(this.onHotKeyChanged)},e.prototype.stop=function(){overwolf.windows.onStateChanged.removeListener(this.onHotKeyChanged)},e}();t.OWHotkeysListener=n},2033:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OWHotkeys=t.Hotkeys=void 0,function(e){e.HOTKEY_NAME="show-hide-porofessor",e.UNASSIGEND="Unassigned"}(n=t.Hotkeys||(t.Hotkeys={}));var r=function(){function e(){}return e._get=function(e,t){overwolf.settings.getHotKey(e,(function(e){e&&"error"!==e.status&&e.hotkey?t(e.hotkey):t(n.UNASSIGEND)}))},e._set=function(e,t){overwolf.settings.registerHotKey(e,(function(n){n.success?t():console.error("[HOTKEYS SERVICE] failed to register hotkey ".concat(e))}))},e.getToggleHotkey=function(){return new Promise((function(t,r){e._get(n.HOTKEY_NAME,t)}))},e.setToggleHotkey=function(t){e._set(n.HOTKEY_NAME,t)},e.addHotkeyChangeListener=function(e){overwolf.settings.OnHotKeyChanged.addListener(e)},e.beautifyHotkeyString=function(e){return e.split("+").join(" + ")},e}();t.OWHotkeys=r},9885:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OWIO=void 0;var n=function(){function e(){}return e.copyFile=function(e,t,n,r){return new Promise((function(o){overwolf.io.copyFile(e,t,n,r,(function(e){return o(e.success)}))}))},e.dir=function(e){return new Promise((function(t,n){overwolf.io.dir(e,(function(e){return t(e)}))}))},e.exist=function(e){return new Promise((function(t,n){overwolf.io.exist(e,(function(e){return t(e)}))}))},e.fileExists=function(e){return new Promise((function(t,n){overwolf.io.fileExists(e,(function(e){return t(e)}))}))},e.readTextFile=function(e,t){return new Promise((function(n,r){overwolf.io.readTextFile(e,t,(function(e){return n(e)}))}))},e.writeFileContents=function(e,t,n,r){return new Promise((function(o,i){overwolf.io.writeFileContents(e,t,n,r,(function(e){return o(e.success)}))}))},e.readFileContents=function(e,t){return new Promise((function(n,r){overwolf.io.readFileContents(e,t,(function(e){return n(e)}))}))},e}();t.OWIO=n},7926:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWLauncherEvents=void 0;var i=n(5241),s=function(){function e(t){var n=this;this.onLauncherStarted=function(t){return r(n,void 0,void 0,(function(){var n,r,s;return o(this,(function(o){switch(o.label){case 0:return t&&t.classId===e.Constants.LOL_LAUNCHER_ID?(this.registerEvents(),[4,this.setRequiredFeatures()]):[2];case 1:return o.sent(),[4,i.Timer.wait(600)];case 2:return o.sent(),[4,this.getInfo()];case 3:return n=o.sent(),r=n.res,s=n.status,this._delegate.onLauncherStarted(t),r&&"success"===s&&this.onInfoUpdates({info:r}),[2]}}))}))},this.onLauncherStopped=function(e){n.unRegisterEvents(),n._delegate.onLauncherStopped(e)},this.onInfoUpdates=function(e){n._delegate.onInfoUpdates(e.info)},this.onNewEvents=function(e){n._delegate.onNewEvents(e)},this._delegate=t,this.settingRunes=null,this.cancelSettingRunes=null}return Object.defineProperty(e,"Constants",{get:function(){return{LOL_LAUNCHER_ID:10902,SET_FEATURE_RETRIES:10,FEATURES:["game_flow","summoner_info","champ_select","lcu_info","credentials","lobby_info"]}},enumerable:!1,configurable:!0}),e.getInfo=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t){overwolf.games.launchers.events.getInfo(e,t)}))]}))}))},e.getRunningLOLLauncher=function(){return new Promise((function(t){overwolf.games.launchers.getRunningLaunchersInfo((function(n){return n&&n.launchers[0]?Math.floor(n.launchers[0].id/10)!=e.Constants.LOL_LAUNCHER_ID?t(!1):t(n.launchers[0]):t(!1)}))}))},e.prototype.getInfo=function(){return r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,e.getInfo(e.Constants.LOL_LAUNCHER_ID)]}))}))},e.prototype.setRequiredFeatures=function(){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:t=1,r.label=1;case 1:return t<=e.Constants.SET_FEATURE_RETRIES?[4,new Promise((function(t){overwolf.games.launchers.events.setRequiredFeatures(e.Constants.LOL_LAUNCHER_ID,e.Constants.FEATURES,t)}))]:[3,4];case 2:return"success"===(n=r.sent()).status?(console.log("setRequiredFeatures(): success: "+JSON.stringify(n,null,2)),[2,n.supportedFeatures.length>0]):[4,i.Timer.wait(3e3)];case 3:return r.sent(),t++,[3,1];case 4:return console.warn("setRequiredFeatures(): failure after "+t+" tries"+JSON.stringify(n,null,2)),[2,!1]}}))}))},e.prototype.registerEvents=function(){this.unRegisterEvents(),overwolf.games.launchers.events.onInfoUpdates.addListener(this.onInfoUpdates),overwolf.games.launchers.events.onNewEvents.addListener(this.onNewEvents)},e.prototype.unRegisterEvents=function(){overwolf.games.launchers.events.onInfoUpdates.removeListener(this.onInfoUpdates),overwolf.games.launchers.events.onNewEvents.removeListener(this.onNewEvents)},e.prototype.setRunesSingle=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return null===this.settingRunes||null===this.cancelSettingRunes?[3,2]:(this.cancelSettingRunes(),[4,this.settingRunes]);case 1:n.sent(),n.label=2;case 2:return[2,this.settingRunes=this.setRunesWithRetry(e,t)]}}))}))},e.prototype.setRunesWithRetry=function(e,t){return r(this,void 0,void 0,(function(){var n,r,s;return o(this,(function(o){switch(o.label){case 0:n=!1,r=!1,s=20,this.cancelSettingRunes=function(){r=!0},o.label=1;case 1:return[4,this.setPages(e,t)];case 2:return n=o.sent(),s--,console.log("[OWLauncherEvents.setRunesWithRetry] setting try: ".concat(20-s,", result: ").concat(n)),r||n?[3,4]:[4,i.Timer.wait(3e3)];case 3:o.sent(),o.label=4;case 4:if(!r&&!n&&s>0)return[3,1];o.label=5;case 5:return this.cancelSettingRunes=null,[2,n]}}))}))},e.prototype.setRunes=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){return console.log("[OWLauncherEvents.setRunes] ".concat(JSON.stringify(e)," ").concat(JSON.stringify(t))),[2,this.setPages(e,t)]}))}))},e.prototype.setPages=function(e,t){var n=e.token,s=e.port,a=t.title,c=t.primaryStyleId,u=t.selectedPerkIds,l=t.subStyleId;return r(this,void 0,void 0,(function(){var e,t,r,f,d,h,p,g,v,y;return o(this,(function(o){switch(o.label){case 0:return e="https://127.0.0.1:".concat(s),t="porofessor",r=[{key:"Accept",value:"application/json"},{key:"Authorization",value:"Basic ".concat(n)}],[4,new Promise((function(t){overwolf.web.sendHttpRequest("".concat(e,"/lol-perks/v1/pages"),"GET",r,null,(function(e){if(console.log("[OWLauncherEvents.setPages] got pages: ".concat(JSON.stringify(e))),e.success)try{t(JSON.parse(e.data))}catch(n){t(e.data)}else t(null)}))}))];case 1:return f=o.sent(),d=null,f&&f.length&&((h=f.find((function(e){return e.isDeletable&&e.name.toLowerCase().includes(t)})))||(h=f.find((function(e){return e.isDeletable&&e.current}))),h||(h=f.find((function(e){return e.isDeletable}))),h&&h.id&&(d=h.id)),null===d?[3,4]:[4,new Promise((function(t){overwolf.web.sendHttpRequest("".concat(e,"/lol-perks/v1/pages/").concat(d),"DELETE",r,null,(function(e){return t(e)}))}))];case 2:return p=o.sent(),console.log("[OWLauncherEvents.setPages] DELETE code: ".concat(p.statusCode," / response: ").concat(JSON.stringify(p))),(!p.statusCode||p.statusCode<200||p.statusCode>=300)&&console.log("[OWLauncherEvents.setPages] pages: ".concat(JSON.stringify(f))),[4,i.Timer.wait(2e3)];case 3:o.sent(),o.label=4;case 4:return g={id:0,name:a,current:!0,isActive:!1,isDeletable:!0,isEditable:!0,isValid:!0,order:0,lastModified:Date.now(),autoModifiedSelections:[],primaryStyleId:c,selectedPerkIds:u,subStyleId:l},v=JSON.stringify(g),[4,new Promise((function(t){overwolf.web.sendHttpRequest("".concat(e,"/lol-perks/v1/pages"),"POST",r,v,(function(e){return t(e)}))}))];case 5:return y=o.sent(),console.log("[OWLauncherEvents.setPages] POST: ".concat(y.statusCode," / response: ").concat(JSON.stringify(y))),(!y.statusCode||y.statusCode<200||y.statusCode>=300)&&console.log("[OWLauncherEvents.setPages] pages: ".concat(JSON.stringify(f))),[2,y.statusCode>=200&&y.statusCode<300]}}))}))},e.prototype.start=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return console.log("[ow-launch-events] START"),[4,e.getRunningLOLLauncher()];case 1:return(t=n.sent())&&(console.log("[ow-launch-events] lol launcher running"),this.onLauncherStarted(t)),overwolf.games.launchers.onLaunched.addListener(this.onLauncherStarted),overwolf.games.launchers.onTerminated.addListener(this.onLauncherStopped),[2]}}))}))},e.prototype.stop=function(){console.log("[ow-launch-events] STOP"),this.unRegisterEvents()},e}();t.OWLauncherEvents=s},4550:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWPlugin=void 0;var i=n(9117),s=function(){function e(e){this._pluginInstance=null,this._pluginInstance=e}return e.create=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,i.OWExtensions.getExtraObject(t)];case 1:return[2,new e(n.sent())]}}))}))},Object.defineProperty(e.prototype,"isInitialized",{get:function(){return null!==this._pluginInstance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"instance",{get:function(){return this._pluginInstance},enumerable:!1,configurable:!0}),e}();t.OWPlugin=s},2937:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OWProfileListener=void 0;var i=function(e){function t(t){var n=e.call(this,t)||this;return n.onLoginStateChanged=function(e){n._delegate.onLoginStateChanged&&n._delegate.onLoginStateChanged(e)},n}return o(t,e),t.prototype.start=function(){e.prototype.start.call(this),overwolf.profile.onLoginStateChanged.addListener(this.onLoginStateChanged)},t.prototype.stop=function(){overwolf.profile.onLoginStateChanged.removeListener(this.onLoginStateChanged)},t}(n(6684).OWListener);t.OWProfileListener=i},5343:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWProfile=void 0;var o=function(){function e(){}return e.getCurrentUser=function(){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2,new Promise((function(e){overwolf.profile.getCurrentUser(e)}))]}))}))},e.openLoginDialog=function(){overwolf.profile.openLoginDialog()},e}();t.OWProfile=o},2549:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OWSettings=void 0;var n=function(){function e(){}return e.getLanguage=function(){return new Promise((function(e){overwolf.settings.language.get((function(t){return e(t.language)}))}))},e.getExtensionSettings=function(){return new Promise((function(e,t){overwolf.settings.getExtensionSettings((function(t){return e(t.settings)}))}))},e.setExtensionSettings=function(e){return new Promise((function(t,n){overwolf.settings.setExtensionSettings(e,(function(e){return t(e.success)}))}))},e}();t.OWSettings=n},7851:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.OWUtils=void 0;var i=function(){function e(){}return e.getViewportSize=function(){var e=this;return new Promise((function(t,i){overwolf.utils.getMonitorsList((function(s){var a,c,u=-1,l=-1;try{for(var f=o(s.displays),d=f.next();!d.done;d=f.next()){var h=d.value;h.is_primary&&(u=h.width,l=h.height)}}catch(e){a={error:e}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(a)throw a.error}}overwolf.games.getRunningGameInfo((function(o){return n(e,void 0,void 0,(function(){return r(this,(function(e){return o&&o.isInFocus&&(u=o.width,l=o.height),null!==u&&null!==l?t({width:u,height:l}):i(new Error("could not get monitors width/height")),[2]}))}))}))}))}))},e.getDPIScale=function(){return new Promise((function(e){overwolf.windows.getWindowDPI((function(t){return e(t.scale)}))}))},e.getAppVersion=function(){return new Promise((function(e){overwolf.extensions.current.getManifest((function(t){return e(t.meta.version)}))}))},e.getSystemInformation=function(){return new Promise((function(e){overwolf.utils.getSystemInformation((function(t){return t.success?e(t.systemInfo):e({})}))}))},e.placeOnClipboard=function(e){overwolf.utils.placeOnClipboard(e)},e.openUrlInDefaultBrowser=function(e){overwolf.utils.openUrlInDefaultBrowser(e)},e.openStore=function(e,t){overwolf.utils.openStore({uid:e,page:t})},e.openFolderPicker=function(e){return new Promise((function(t){overwolf.utils.openFolderPicker(e,(function(e){t(e)}))}))},e.openFilePicker=function(e,t,n){return new Promise((function(r){overwolf.utils.openFilePicker(e,t,(function(e){r(e)}),n)}))},e.getMonitorsList=function(){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2,new Promise((function(e){overwolf.utils.getMonitorsList((function(t){e(t.displays)}))}))]}))}))},e.openWindowsExplorer=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){overwolf.utils.openWindowsExplorer(e,t)}))]}))}))},e.encryptForUser=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){overwolf.cryptography.encryptForCurrentUser(e,(function(e){t(e.ciphertext)}))}))]}))}))},e.decryptForUser=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){overwolf.cryptography.decryptForCurrentUser(e,(function(e){t(e.plaintext)}))}))]}))}))},e.openStoreOneAppPage=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){return overwolf.utils.openStoreOneAppPage(e),[2]}))}))},e.isGetClientInfoSupported=function(){return"function"==typeof overwolf.utils.getClientInfo},e.getClientInfo=function(){return new Promise((function(e){overwolf.utils.getClientInfo((function(t){return(null==t?void 0:t.success)?e(t):e(null)}))}))},e}();t.OWUtils=i},496:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2645),t),o(n(9882),t),o(n(2),t),o(n(1197),t),o(n(3067),t)},2645:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWGameWindowAnchor=void 0;var i=n(7851),s=n(3067),a=function(){function e(e,t,n,r){void 0===r&&(r=10);var o=this;this.onGameInfoUpdated=function(e){if(null!=e&&null!=e.resolutionChanged&&0!=e.resolutionChanged&&null!=e.gameInfo){var t=e.gameInfo.logicalWidth,n=e.gameInfo.logicalHeight;o.repositionWindow({width:t,height:n})}},this._window=e,this._winWidth=t.width,this._winHeight=t.height,this._anchorType=n,this._margin=r}return e.prototype.start=function(){var e=this;overwolf.games.onGameInfoUpdated.removeListener(this.onGameInfoUpdated),overwolf.games.onGameInfoUpdated.addListener(this.onGameInfoUpdated),overwolf.games.getRunningGameInfo((function(t){t&&e.repositionWindow({width:t.logicalWidth,height:t.logicalHeight})}))},e.prototype.stop=function(){overwolf.games.onGameInfoUpdated.removeListener(this.onGameInfoUpdated)},e.prototype.repositionWindow=function(e){return r(this,void 0,void 0,(function(){var t,n,r,a;return o(this,(function(o){switch(o.label){case 0:return[4,i.OWUtils.getDPIScale()];case 1:switch(t=o.sent(),n=this._margin,r=Math.floor(e.width-this._winWidth*t)-n,a=n,this._anchorType){case s.OWWindowAnchorTypes.topRight:break;case s.OWWindowAnchorTypes.middleRight:a=Math.floor(e.height/2-this._winHeight/2*t);break;case s.OWWindowAnchorTypes.bottomRight:a=Math.floor(e.height-this._winHeight*t)-n;break;case s.OWWindowAnchorTypes.bottomLeft:r=n,a=Math.floor(e.height-this._winHeight*t)-n;break;case s.OWWindowAnchorTypes.topLeft:r=n}return[4,this._window.changePosition(r,a)];case 2:return o.sent(),[2]}}))}))},e.prototype.repositionAnchor=function(e){this._anchorType=e,this.start()},e}();t.OWGameWindowAnchor=a},1197:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.OWWindowScreenAnchor=void 0;var i=n(7851),s=n(2),a=n(3067),c=function(){function e(e){this.mainMonitorId="",this.window=e.window,this.anchorType=e.anchorType,this.isTopMost=e.isTopMost,this.owWindowListener=new s.OWWindowsListener(this)}return e.prototype.start=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.stop(),[4,this.setMainMonitorInfo()];case 1:return e.sent(),[4,this.restoreWindow()];case 2:return e.sent(),[4,this.repositionWindow()];case 3:return e.sent(),this.owWindowListener.start(),[2]}}))}))},e.prototype.stop=function(){this.owWindowListener.stop(),this.window.close()},e.prototype.setMainMonitorInfo=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,i.OWUtils.getMonitorsList()];case 1:return e=t.sent(),this.mainMonitor=e.find((function(e){return!0===e.is_primary})),[2]}}))}))},e.prototype.restoreWindow=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.window.restore()];case 1:return e.sent(),[2]}}))}))},e.prototype.repositionWindow=function(){return r(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,this.window.obtain()];case 1:return e=o.sent(),t=this.mainMonitor,n=t.width,r=t.height,[4,this.changeWindowPosition(e,n,r)];case 2:return o.sent(),this.isTopMost?[4,this.window.setTopmost()]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},e.prototype.changeWindowPosition=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i;return o(this,(function(o){switch(o.label){case 0:switch(this.anchorType){case a.OWWindowAnchorTypes.topRight:r=0,i=t-e.width;break;case a.OWWindowAnchorTypes.topLeft:r=0,i=0;break;case a.OWWindowAnchorTypes.bottomLeft:r=n-e.height,i=0;break;case a.OWWindowAnchorTypes.bottomRight:r=n-e.height,i=t-e.width}return[4,this.window.changePosition(i,r)];case 1:return o.sent(),[2]}}))}))},e.prototype.onScreenPropertyChanged=function(e){var t;return r(this,void 0,void 0,(function(){return o(this,(function(n){return(null===(t=null==e?void 0:e.monitor)||void 0===t?void 0:t.id)!==this.mainMonitorId||this.repositionWindow(),[2]}))}))},e}();t.OWWindowScreenAnchor=c},3067:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.OWWindowAnchorTypes=void 0,(n=t.OWWindowAnchorTypes||(t.OWWindowAnchorTypes={}))[n.topLeft=0]="topLeft",n[n.topRight=1]="topRight",n[n.middleRight=2]="middleRight",n[n.bottomRight=3]="bottomRight",n[n.bottomLeft=4]="bottomLeft"},9882:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.OWWindow=void 0;var s=n(7851),a=n(2645),c=function(){function e(e){void 0===e&&(e=null),this._name=e,this._id=null}return e.prototype.obtain=function(){var e=this;return new Promise((function(t,n){var r=function(r){r&&"success"===r.status&&r.window&&r.window.id?(e._id=r.window.id,e._name||(e._name=r.window.name),t(r.window)):(e._id=null,n(r.error))};e._name?overwolf.windows.obtainDeclaredWindow(e._name,r):overwolf.windows.getCurrentWindow(r)}))},e.prototype.createGameWindowAnchor=function(e,t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return[4,this.obtain()];case 1:return(n=r.sent())?[2,new a.OWGameWindowAnchor(this,{width:n.width,height:n.height},e,t)]:[2,null]}}))}))},e.prototype.center=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return[2,new Promise((function(t,n){return r(e,void 0,void 0,(function(){var e,r,i,a,c;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.obtain()];case 1:return e=o.sent(),[4,s.OWUtils.getDPIScale()];case 2:return r=o.sent(),i=Math.round((window.screen.availWidth-e.width*r)/2),a=Math.round((window.screen.availHeight-e.height*r)/2),this.changePosition(Math.max(i,0),Math.max(a,0)),t(),[3,4];case 3:return c=o.sent(),[2,n(c)];case 4:return[2]}}))}))}))]}))}))},e.prototype.centerInMonitor=function(e){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return[2,new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,r,a,c,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.obtain()];case 1:return t=o.sent(),[4,s.OWUtils.getDPIScale()];case 2:return r=o.sent(),a=e.x+Math.round((e.width-t.width*r)/2),c=e.y+Math.round((e.height-t.height*r)/2),this.changePosition(a,c),n(),[3,4];case 3:return u=o.sent(),[2,i(u)];case 4:return[2]}}))}))}))]}))}))},e.prototype.bottomRight=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return[2,new Promise((function(t){return r(e,void 0,void 0,(function(){var e,n,r,a,c,u,l;return o(this,(function(o){switch(o.label){case 0:return e=null,[4,Promise.all([this.obtain(),s.OWUtils.getViewportSize()])];case 1:return n=i.apply(void 0,[o.sent(),2]),r=n[0],a=n[1],(e=r)?[4,s.OWUtils.getDPIScale()]:[2,t()];case 2:return c=o.sent(),u=a.width-e.width*c,l=a.height-e.height*c,u=Math.max(u,0),l=Math.max(l,0),u=Math.floor(u),l=Math.floor(l),[4,this.changePosition(u,l)];case 3:return o.sent(),[2,t()]}}))}))}))]}))}))},e.prototype.restore=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.restore(r,(function(e){e.success||(console.error("[restore] - an error occurred, windowId=".concat(r,", reason=").concat(e.error)),n(e.error)),t()}))}))]}}))}))},e.prototype.bringToFront=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.bringToFront(r,(function(e){e.success||(console.error("[restore] - an error occurred, windowId=".concat(r,", reason=").concat(e.error)),n(e.error)),t()}))}))]}}))}))},e.prototype.minimize=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.minimize(r,(function(e){e.success||n(e.error),t()}))}))]}}))}))},e.prototype.maximize=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.maximize(r,(function(e){e.success||n(e.error),t()}))}))]}}))}))},e.prototype.hide=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.hide(r,(function(e){e.success||n(e.error),t()}))}))]}}))}))},e.prototype.changePosition=function(e,t){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.assureObtained()];case 1:return r.sent(),[2,new Promise((function(r,o){var i=n._id;overwolf.windows.changePosition(i,e,t,(function(e){e.success||o(e.error),r()}))}))]}}))}))},e.prototype.changeSize=function(e,t){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.assureObtained()];case 1:return r.sent(),[2,new Promise((function(r,o){var i=n._id;overwolf.windows.changeSize(i,e,t,(function(e){e.success||o(e.error),r()}))}))]}}))}))},e.prototype.setMinSize=function(e,t){return r(this,void 0,void 0,(function(){var n=this;return o(this,(function(r){switch(r.label){case 0:return[4,this.assureObtained()];case 1:return r.sent(),[2,new Promise((function(r,o){var i=n._id;overwolf.windows.setMinSize(i,e,t,(function(e){e.success?r():o(e.error)}))}))]}}))}))},e.prototype.dragMove=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.dragMove(r,(function(e){e.success||n(e.error),t(e)}))}))]}}))}))},e.prototype.dragResizeLeft=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t){var n=e._id;return overwolf.windows.dragResize(n,"Left"),t(null)}))]}}))}))},e.prototype.dragResizeRight=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t){var n=e._id;return overwolf.windows.dragResize(n,"Right"),t(null)}))]}}))}))},e.prototype.getWindowState=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return[2,new Promise((function(t,n){var r=e._id||e._name;overwolf.windows.getWindowState(r,(function(e){e.success||n(e.error),t(e)}))}))]}))}))},e.prototype.setTopmost=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.setTopmost(r,!0,(function(e){e.success||n(e.error),t(e.success)}))}))]}}))}))},e.getCurrentInfo=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,new Promise((function(e,t){overwolf.windows.getCurrentWindow((function(n){n.success||t(n.error),e(n.window)}))}))]}))}))},e.getOpenWindows=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){return[2,new Promise((function(t){return r(e,void 0,void 0,(function(){return o(this,(function(e){return overwolf.windows.getOpenWindows((function(e){t(e)})),[2]}))}))}))]}))}))},e.setMute=function(e){return void 0===e&&(e=!0),r(this,void 0,void 0,(function(){return o(this,(function(t){return[2,new Promise((function(t,n){if(!overwolf.windows.setMute)return n("setMute does not exist");overwolf.windows.setMute(e,(function(e){e.success?t():n(e.error)}))}))]}))}))},e.prototype.close=function(){return r(this,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,this.getWindowState()];case 1:return(e=t.sent()).success&&"closed"===e.window_state?[2]:[4,this.internalClose()];case 2:return t.sent(),[2]}}))}))},e.prototype.reloadPage=function(){return r(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return[2,new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,r,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.obtain()];case 1:return t=o.sent(),[4,e.getOpenWindows()];case 2:return(r=o.sent())[t.name]?(r[t.name].location.reload(),n(),[3,4]):[2];case 3:return s=o.sent(),[2,i(s)];case 4:return[2]}}))}))}))]}))}))},e.prototype.assureObtained=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.obtain()];case 1:return e.sent(),[2]}}))}))},e.prototype.internalClose=function(){return r(this,void 0,void 0,(function(){var e=this;return o(this,(function(t){switch(t.label){case 0:return[4,this.assureObtained()];case 1:return t.sent(),[2,new Promise((function(t,n){var r=e._id;overwolf.windows.close(r,(function(e){e&&e.success?t():n(e)}))}))]}}))}))},e}();t.OWWindow=c},2:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OWWindowsListener=void 0;var i=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t)||this;return r.onWindowStateChanged=function(e){e&&(r._delegate.onWindowStateChanged&&r._delegate.onWindowStateChanged(e),"closed"===e.window_state&&r._delegate.onWindowClosed&&r._delegate.onWindowClosed(e.window_name),"minimized"===e.window_state&&r._delegate.onWindowMinimized&&r._delegate.onWindowMinimized(e.window_name),"maximized"===e.window_state&&r._delegate.onWindowMaximized&&r._delegate.onWindowMaximized(e.window_name),"normal"===e.window_state&&r._delegate.onWindowRestored&&r._delegate.onWindowRestored(e.window_name))},r.onScreenPropertyChanged=function(e){r._delegate.onScreenPropertyChanged&&r._delegate.onScreenPropertyChanged(e)},r.onAltF4Blocked=function(e){r._delegate.onAltF4Blocked&&r._delegate.onAltF4Blocked(e.id)},n&&r.start(),r}return o(t,e),t.prototype.start=function(){e.prototype.start.call(this),overwolf.windows.onStateChanged.addListener(this.onWindowStateChanged),overwolf.windows.onScreenPropertyChanged.addListener(this.onScreenPropertyChanged),overwolf.windows.onAltF4Blocked.addListener(this.onAltF4Blocked)},t.prototype.stop=function(){overwolf.windows.onStateChanged.removeListener(this.onWindowStateChanged),overwolf.windows.onScreenPropertyChanged.removeListener(this.onScreenPropertyChanged),overwolf.windows.onAltF4Blocked.removeListener(this.onAltF4Blocked)},t}(n(6684).OWListener);t.OWWindowsListener=i},5628:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ContentRecommendationUserAction=void 0,(n=t.ContentRecommendationUserAction||(t.ContentRecommendationUserAction={}))[n.Dismissed=1]="Dismissed",n[n.IgnoredByLaunchingGame=2]="IgnoredByLaunchingGame",n[n.Timeout=3]="Timeout",n[n.CTAClicked=4]="CTAClicked",n[n.IgnoredByChangedInfo=5]="IgnoredByChangedInfo"},3385:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kNameOfPromotionWindowService=void 0,t.kNameOfPromotionWindowService="PromotionWindowService"},4801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kNameOfTesterWindowService=void 0,t.kNameOfTesterWindowService="TesterWindowService"},3234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kNameOfUserActionService=void 0,t.kNameOfUserActionService="UserActionService"},1891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromiseResolver=void 0;var n=function(){function e(){var e=this;this._promise=new Promise((function(t,n){e._promiseResolver=t,e._promiseRejector=n}))}return e.prototype.promise=function(){return this._promise},e.prototype.resolve=function(){this._promise&&this._promiseResolver&&(this._promiseResolver(),this._promiseRejector=void 0)},e.prototype.reject=function(e){this._promise&&this._promiseRejector&&this._promiseRejector(e)},e}();t.PromiseResolver=n},3593:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerService=void 0;var r=n(9959),o=n(5602),i=function(){function e(){}return e.setup=function(t){e.logProvider=o.CategoryProvider.createProvider(t,{level:r.LogLevel.Info})},e.getCategory=function(t){return e.logProvider.getCategory(t)},e.logProvider=o.CategoryProvider.createProvider("OwAppLogProvider",{level:r.LogLevel.Info}),e}();t.LoggerService=i},875:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.TimerService=void 0;var c=n(1984),u=function(){function e(){var e=this;this.timerId=null,this.handleTimerEvent=function(){return i(e,void 0,void 0,(function(){var e,t,n,r,o,i;return s(this,(function(s){switch(s.label){case 0:this.timerId=null,s.label=1;case 1:s.trys.push([1,8,9,10]),e=a(this.listeners),t=e.next(),s.label=2;case 2:if(t.done)return[3,7];n=t.value,s.label=3;case 3:return s.trys.push([3,5,,6]),[4,n.onTimer(this.options.id)];case 4:case 5:return s.sent(),[3,6];case 6:return t=e.next(),[3,2];case 7:return[3,10];case 8:return r=s.sent(),o={error:r},[3,10];case 9:try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(o)throw o.error}return[7];case 10:return this.options.autoReset&&this.start(),[2]}}))}))},this.listeners=new Set}return e.prototype.initialize=function(e){this.options=e},e.prototype.sleep=function(e){return i(this,void 0,void 0,(function(){return s(this,(function(t){return[2,new Promise((function(t){setTimeout(t,e)}))]}))}))},e.prototype.start=function(){this.stop();var e=this.options.intervalInMs;this.timerId=setTimeout(this.handleTimerEvent,e)},e.prototype.stop=function(){null!=this.timerId&&(clearTimeout(this.timerId),this.timerId=null)},e.prototype.addListener=function(e){this.listeners.add(e)},e.prototype.removeListener=function(e){this.listeners.delete(e)},r([(0,c.injectable)(),o("design:paramtypes",[])],e)}();t.TimerService=u},3406:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.UtilsService=void 0;var o=n(1984),i=function(){function e(){}return e.prototype.getUrlParam=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]".concat(e,"=([^&#]*)")).exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},e.prototype.areObjectsEqual=function(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);if(n.length!==r.length)return!1;for(var o=0;o<n.length;o++){var i=n[o];if(e[i]!==t[i])return!1}return!0},r([(0,o.singleton)()],e)}();t.UtilsService=i},7219:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.WindowsTunnelDataService=t.kTunnelDataUserAction=t.kTunnelDataPromotionInfo=void 0;var i=n(1984),s=n(6658),a="__WINDOWS_TUNNEL_DATA_SERVICE__";t.kTunnelDataPromotionInfo="promotionInfo",t.kTunnelDataUserAction="userAction";var c=function(){function e(e){this.owMainWIndowWrapper=e,this._globalDataMap=null,this.initialize()}return e.prototype.initialize=function(){var e=this.owMainWIndowWrapper.getMainWindow();e?(e[a]||(e[a]={}),this._globalDataMap=e[a]):console.error("Could not get main window!")},e.prototype.set=function(e,t){this._globalDataMap?this._globalDataMap[e]=t:console.error("globalDataMap is undefined")},e.prototype.get=function(e){if(this._globalDataMap)return this._globalDataMap[e];console.error("globalDataMap is undefined")},r([(0,i.singleton)(),o("design:paramtypes",[s.OWMainWindowWrapper])],e)}();t.WindowsTunnelDataService=c},8971:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncLock=void 0;var s=n(1984),a=function(){function e(){this.promiseResolver=null}return e.prototype.lock=function(){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:return[4,this.promiseLock];case 1:return t.sent(),this.promiseLock=new Promise((function(t){e.promiseResolver=t})),[2]}}))}))},e.prototype.unlock=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){return this.promiseResolver?(this.promiseResolver(),this.promiseResolver=null,[2]):[2]}))}))},r([(0,s.injectable)()],e)}();t.AsyncLock=a},9354:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorage=void 0;var r=n(8996),o=function(){function e(){}return Object.defineProperty(e,"keys",{get:function(){return Object.keys(localStorage)},enumerable:!1,configurable:!0}),e.get=function(e){var t=localStorage.getItem(e);return new r.StorageValue(t)},e.getKeysByPrefix=function(e){var t=[];return Object.keys(localStorage).forEach((function(n){n.startsWith(e)&&t.push(n)})),t},e.set=function(e,t){t||(t=""),localStorage.setItem(e,t)},e.setNumber=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.setBool=function(e,t){localStorage.setItem(e,JSON.stringify(t))},e.remove=function(e){localStorage.removeItem(e)},e.setObject=function(e,t){try{return localStorage.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}},e}();t.LocalStorage=o},7070:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionStorage=void 0;var r=n(8996),o=function(){function e(){}return Object.defineProperty(e,"keys",{get:function(){return Object.keys(sessionStorage)},enumerable:!1,configurable:!0}),e.get=function(e){var t=sessionStorage.getItem(e);return new r.StorageValue(t)},e.getKeysByPrefix=function(e){var t=[];return Object.keys(sessionStorage).forEach((function(n){n.startsWith(e)&&t.push(n)})),t},e.set=function(e,t){t||(t=""),sessionStorage.setItem(e,t)},e.setNumber=function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},e.setBool=function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},e.remove=function(e){sessionStorage.removeItem(e)},e.setObject=function(e,t){try{return sessionStorage.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}},e}();t.SessionStorage=o},8996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageValue=void 0;var n=function(){function e(e){this._value=e}return Object.defineProperty(e.prototype,"raw",{get:function(){return this._value},enumerable:!1,configurable:!0}),e.prototype.asBool=function(){return!!this._value&&"true"===this._value.toLowerCase()},e.prototype.asInt=function(){return this._value?parseInt(this._value,10):NaN},e.prototype.asObject=function(){if(!this._value)return null;try{return JSON.parse(this._value)}catch(e){return null}},e.prototype.asArray=function(){try{return JSON.parse(this._value)}catch(e){return null}},e.prototype.isNull=function(){return null===this._value},e}();t.StorageValue=n},6519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=t.kWeekInMilliseconds=void 0,t.kWeekInMilliseconds=6048e5;var n=function(){function e(){}return e.deepClone=function(e){return JSON.parse(JSON.stringify(e))},e.randomWholeNumber=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},e.calcTimePassedInWeeks=function(e){return 0===e?0:(Date.now()-e)/t.kWeekInMilliseconds},e}();t.Utils=n},6658:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.OWMainWindowWrapper=void 0;var o=n(1984),i=function(){function e(){}return e.prototype.getMainWindow=function(){var e;return(null===(e=null===overwolf||void 0===overwolf?void 0:overwolf.windows)||void 0===e?void 0:e.getMainWindow)?overwolf.windows.getMainWindow():null},r([(0,o.injectable)()],e)}();t.OWMainWindowWrapper=i},601:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.OWTrackRSWrapper=void 0;var o=n(1984),i=function(){function e(){}return e.prototype.trackRSEvent=function(e,t,n){return overwolfInternal.trackRSEvent(e,t,n)},e.prototype.trackRSEventV2=function(e,t,n){return overwolfInternal.trackRSEventV2(e,t,n)},r([(0,o.injectable)()],e)}();t.OWTrackRSWrapper=i},8242:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.OWWindowListenerWrapper=void 0;var i=n(1984),s=n(5566),a=function(){function e(){this.listeners=new Map}return e.prototype.addListener=function(e){this.removeListener(e),this.listeners.set(e,new s.OWWindowsListener(e,!0))},e.prototype.removeListener=function(e){var t=this.listeners.get(e);t&&(t.stop(),this.listeners.delete(e))},r([(0,i.injectable)(),o("design:paramtypes",[])],e)}();t.OWWindowListenerWrapper=a},8456:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s);return i>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.OWWrapper=void 0;var o=n(1984),i=function(){function e(){}return e.prototype.getVersion=function(){return overwolf.version},r([(0,o.injectable)()],e)}();t.OWWrapper=i},1984:(e,t,n)=>{"use strict";var r;n.r(t),n.d(t,{Lifecycle:()=>o,autoInjectable:()=>E,container:()=>L,delay:()=>v,inject:()=>I,injectAll:()=>D,injectAllWithTransform:()=>N,injectWithTransform:()=>G,injectable:()=>j,instanceCachingFactory:()=>F,instancePerContainerCachingFactory:()=>B,isClassProvider:()=>h,isFactoryProvider:()=>p,isNormalToken:()=>y,isTokenProvider:()=>b,isValueProvider:()=>_,predicateAwareClassFactory:()=>H,registry:()=>A,scoped:()=>U,singleton:()=>M}),function(e){e[e.Transient=0]="Transient",e[e.Singleton=1]="Singleton",e[e.ResolutionScoped=2]="ResolutionScoped",e[e.ContainerScoped=3]="ContainerScoped"}(r||(r={}));const o=r;var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)};function s(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e}var l="injectionTokens";function f(e){var t=Reflect.getMetadata("design:paramtypes",e)||[],n=Reflect.getOwnMetadata(l,e)||{};return Object.keys(n).forEach((function(e){t[+e]=n[e]})),t}function d(e,t){return function(n,r,o){var i=Reflect.getOwnMetadata(l,n)||{};i[o]=t?{token:e,transform:t.transformToken,transformArgs:t.args||[]}:e,Reflect.defineMetadata(l,i,n)}}function h(e){return!!e.useClass}function p(e){return!!e.useFactory}var g=function(){function e(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return e.prototype.createProxy=function(e){var t,n=this,r=!1;return new Proxy({},this.createHandler((function(){return r||(t=e(n.wrap()),r=!0),t})))},e.prototype.createHandler=function(e){var t={};return this.reflectMethods.forEach((function(n){t[n]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t[0]=e(),Reflect[n].apply(void 0,u(t))}})),t},e}();function v(e){if(void 0===e)throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new g(e)}function y(e){return"string"==typeof e||"symbol"==typeof e}function m(e){return"object"==typeof e&&"token"in e&&"multiple"in e}function w(e){return"object"==typeof e&&"token"in e&&"transform"in e}function b(e){return!!e.useToken}function _(e){return null!=e.useValue}const S=function(){function e(){this._registryMap=new Map}return e.prototype.entries=function(){return this._registryMap.entries()},e.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},e.prototype.get=function(e){this.ensure(e);var t=this._registryMap.get(e);return t[t.length-1]||null},e.prototype.set=function(e,t){this.ensure(e),this._registryMap.get(e).push(t)},e.prototype.setAll=function(e,t){this._registryMap.set(e,t)},e.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},e.prototype.clear=function(){this._registryMap.clear()},e.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},e}(),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(S),O=function(){this.scopedResolutions=new Map};function R(e,t,n){var r,o,i,s,a=c(e.toString().match(/constructor\(([\w, ]+)\)/)||[],2)[1];return r="Cannot inject the dependency "+(s=t,null===(i=void 0===a?null:a)?"at position #"+s:'"'+i.split(",")[s].trim()+'" at position #'+s)+' of "'+e.name+'" constructor. Reason:',void 0===o&&(o="    "),u([r],n.message.split("\n").map((function(e){return o+e}))).join("\n")}var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(S),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(S);const W=function(){this.preResolution=new C,this.postResolution=new k};var x=new Map,T=function(){function e(e){this.parent=e,this._registry=new P,this.interceptors=new W,this.disposed=!1,this.disposables=new Set}return e.prototype.register=function(e,t,n){var r;if(void 0===n&&(n={lifecycle:o.Transient}),this.ensureNotDisposed(),r=function(e){return h(e)||_(e)||b(e)||p(e)}(t)?t:{useClass:t},b(r))for(var i=[e],s=r;null!=s;){var a=s.useToken;if(i.includes(a))throw new Error("Token registration cycle detected! "+u(i,[a]).join(" -> "));i.push(a);var c=this._registry.get(a);s=c&&b(c.provider)?c.provider:null}if((n.lifecycle===o.Singleton||n.lifecycle==o.ContainerScoped||n.lifecycle==o.ResolutionScoped)&&(_(r)||p(r)))throw new Error('Cannot use lifecycle "'+o[n.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:r,options:n}),this},e.prototype.registerType=function(e,t){return this.ensureNotDisposed(),y(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})},e.prototype.registerInstance=function(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})},e.prototype.registerSingleton=function(e,t){if(this.ensureNotDisposed(),y(e)){if(y(t))return this.register(e,{useToken:t},{lifecycle:o.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:o.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var n=e;return t&&!y(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:o.Singleton})},e.prototype.resolve=function(e,t){void 0===t&&(t=new O),this.ensureNotDisposed();var n=this.getRegistration(e);if(!n&&y(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),n){var r=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,r,"Single"),r}if(function(e){return"function"==typeof e||e instanceof g}(e))return r=this.construct(e,t),this.executePostResolutionInterceptor(e,r,"Single"),r;throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},e.prototype.executePreResolutionInterceptor=function(e,t){var n,r;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var i=a(this.interceptors.preResolution.getAll(e)),s=i.next();!s.done;s=i.next()){var c=s.value;"Once"!=c.options.frequency&&o.push(c),c.callback(e,t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.interceptors.preResolution.setAll(e,o)}},e.prototype.executePostResolutionInterceptor=function(e,t,n){var r,o;if(this.interceptors.postResolution.has(e)){var i=[];try{for(var s=a(this.interceptors.postResolution.getAll(e)),c=s.next();!c.done;c=s.next()){var u=c.value;"Once"!=u.options.frequency&&i.push(u),u.callback(e,t,n)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}this.interceptors.postResolution.setAll(e,i)}},e.prototype.resolveRegistration=function(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===o.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);var n,r=e.options.lifecycle===o.Singleton,i=e.options.lifecycle===o.ContainerScoped,s=r||i;return n=_(e.provider)?e.provider.useValue:b(e.provider)?s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):h(e.provider)?s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):p(e.provider)?e.provider.useFactory(this):this.construct(e.provider,t),e.options.lifecycle===o.ResolutionScoped&&t.scopedResolutions.set(e,n),n},e.prototype.resolveAll=function(e,t){var n=this;void 0===t&&(t=new O),this.ensureNotDisposed();var r=this.getAllRegistrations(e);if(!r&&y(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),r){var o=r.map((function(e){return n.resolveRegistration(e,t)}));return this.executePostResolutionInterceptor(e,o,"All"),o}var i=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,i,"All"),i},e.prototype.isRegistered=function(e,t){return void 0===t&&(t=!1),this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},e.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},e.prototype.clearInstances=function(){var e,t;this.ensureNotDisposed();try{for(var n=a(this._registry.entries()),r=n.next();!r.done;r=n.next()){var o=c(r.value,2),i=o[0],s=o[1];this._registry.setAll(i,s.filter((function(e){return!_(e.provider)})).map((function(e){return e.instance=void 0,e})))}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},e.prototype.createChildContainer=function(){var t,n;this.ensureNotDisposed();var r=new e(this);try{for(var i=a(this._registry.entries()),s=i.next();!s.done;s=i.next()){var u=c(s.value,2),l=u[0],f=u[1];f.some((function(e){return e.options.lifecycle===o.ContainerScoped}))&&r._registry.setAll(l,f.map((function(e){return e.options.lifecycle===o.ContainerScoped?{provider:e.provider,options:e.options}:e})))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.beforeResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:t,options:n})},e.prototype.afterResolution=function(e,t,n){void 0===n&&(n={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:t,options:n})},e.prototype.dispose=function(){return e=this,t=void 0,r=function(){var e;return function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(t){switch(t.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach((function(t){var n=t.dispose();n&&e.push(n)})),[4,Promise.all(e)];case 1:return t.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r},e.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},e.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},e.prototype.construct=function(e,t){var n=this;if(e instanceof g)return e.createProxy((function(e){return n.resolve(e,t)}));var r,o=function(){var r=x.get(e);if(!r||0===r.length){if(0===e.length)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var o=r.map(n.resolveParams(t,e));return new(e.bind.apply(e,u([void 0],o)))}();return"function"!=typeof(r=o).dispose||r.dispose.length>0||this.disposables.add(o),o},e.prototype.resolveParams=function(e,t){var n=this;return function(r,o){var i,s,a;try{return m(r)?w(r)?r.multiple?(i=n.resolve(r.transform)).transform.apply(i,u([n.resolveAll(r.token)],r.transformArgs)):(s=n.resolve(r.transform)).transform.apply(s,u([n.resolve(r.token,e)],r.transformArgs)):r.multiple?n.resolveAll(r.token):n.resolve(r.token,e):w(r)?(a=n.resolve(r.transform,e)).transform.apply(a,u([n.resolve(r.token,e)],r.transformArgs)):n.resolve(r,e)}catch(e){throw new Error(R(t,o,e))}}},e.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},e}(),L=new T;const E=function(){return function(e){var t=f(e);return function(n){function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n.apply(this,u(r.concat(t.slice(r.length).map((function(t,n){var o,i,s;try{return m(t)?w(t)?t.multiple?(o=L.resolve(t.transform)).transform.apply(o,u([L.resolveAll(t.token)],t.transformArgs)):(i=L.resolve(t.transform)).transform.apply(i,u([L.resolve(t.token)],t.transformArgs)):t.multiple?L.resolveAll(t.token):L.resolve(t.token):w(t)?(s=L.resolve(t.transform)).transform.apply(s,u([L.resolve(t.token)],t.transformArgs)):L.resolve(t)}catch(t){var a=n+r.length;throw new Error(R(e,a,t))}})))))||this}return s(r,n),r}(e)}},I=function(e){return d(e)},j=function(){return function(e){x.set(e,f(e))}},A=function(e){return void 0===e&&(e=[]),function(t){return e.forEach((function(e){var t=e.token,n=e.options,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["token","options"]);return L.register(t,r,n)})),t}},M=function(){return function(e){j()(e),L.registerSingleton(e)}},D=function(e){return d({token:e,multiple:!0})},N=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return d({token:e,multiple:!0,transform:t,transformArgs:n})},G=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return d(e,{transformToken:t,args:n})};function U(e,t){return function(n){j()(n),L.register(t||n,n,{lifecycle:e})}}function F(e){var t;return function(n){return null==t&&(t=e(n)),t}}function B(e){var t=new WeakMap;return function(n){var r=t.get(n);return null==r&&(r=e(n),t.set(n,r)),r}}function H(e,t,n,r){var o,i;return void 0===r&&(r=!0),function(s){var a=e(s);return r&&i===a||(o=(i=a)?s.resolve(t):s.resolve(n)),o}}if("undefined"==typeof Reflect||!Reflect.getMetadata)throw new Error("tsyringe requires a reflect polyfill. Please add 'import \"reflect-metadata\"' to the top of your entry point.")},5602:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CATEGORY_LOG_CONTROL:()=>W,CategoryProvider:()=>x});class r extends Map{computeIfAbsent(e,t){if(this.has(e))return this.get(e);const n=t(e);return this.set(e,n),n}computeIfPresent(e,t){const n=this.get(e);if(void 0===n)return;const r=t(e,n);return void 0!==r?this.set(e,r):this.delete(e),r}compute(e,t){const n=t(e,this.get(e));return n?this.set(e,n):this.delete(e),n}}var o;function i(e){return u.getLogger(e)}!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error"}(o||(o={}));const s={setInternalLogLevel:e=>u.changeLogLevel(e),setOutput:e=>u.changeOutput(e),reset:()=>u.reset()};class a{constructor(e,t,n){this._name=e,this._level=t,this._fnOutput=n}trace(e){this.log(o.Trace,e)}debug(e){this.log(o.Debug,e)}error(e,t){this.log(o.Error,e,t)}info(e){this.log(o.Info,e)}warn(e,t){this.log(o.Warn,e,t)}setLevel(e){this._level=e}setOutput(e){this._fnOutput=e}log(e,t,n){this._level>e||this._fnOutput(`${o[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${t()}${n?"\n"+n.stack:""}`)}}class c{constructor(){this._loggers=new r,this._logLevel=o.Error,this._fnOutput=c.logConsole}getLogger(e){return this._loggers.computeIfAbsent(e,(e=>new a(e,this._logLevel,this._fnOutput)))}changeLogLevel(e){this._logLevel=e,this._loggers.forEach((t=>t.setLevel(e)))}changeOutput(e){this._fnOutput=e,this._loggers.forEach((e=>e.setOutput(this._fnOutput)))}reset(){this.changeLogLevel(o.Error),this._fnOutput=c.logConsole,this._loggers.forEach((e=>e.setOutput(this._fnOutput)))}static logConsole(e){console&&console.log&&console.log(e)}}const u=new c;var l,f,d=Object.freeze({__proto__:null,INTERNAL_LOGGING_SETTINGS:s,get InternalLogLevel(){return o},getInternalLogger:i});!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Fatal=5]="Fatal",e[e.Off=6]="Off"}(l||(l={})),function(e){e.toLogLevel=function(t){switch(t.toLowerCase()){case"trace":return e.Trace;case"debug":return e.Debug;case"info":return e.Info;case"warn":return e.Warn;case"error":return e.Error;case"fatal":return e.Fatal;case"off":return e.Off;default:return}}}(l||(l={}));class h{constructor(e){this._runtime=e}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(e){this._runtime=e}trace(e,...t){this.logMessage(l.Trace,e,t)}debug(e,...t){this.logMessage(l.Debug,e,t)}info(e,...t){this.logMessage(l.Info,e,t)}warn(e,...t){this.logMessage(l.Warn,e,t)}error(e,...t){this.logMessage(l.Error,e,t)}fatal(e,...t){this.logMessage(l.Fatal,e,t)}logMessage(e,t,n){if(this._runtime.level>e)return;const r=Date.now(),o="string"==typeof t?t:t(),i=h.getErrorAndArgs(n);switch(this._runtime.channel.type){case"RawLogChannel":return void this._runtime.channel.write({message:o,exception:i.error,args:i.args,timeInMillis:r,level:e,logNames:this._runtime.name},this._runtime.argumentFormatter);case"LogChannel":this._runtime.channel.write(this.createLogMessage(o,e,i,r))}}formatArgValue(e){try{return this._runtime.argumentFormatter(e)}catch(t){return`>>ARG CONVERT FAILED: '${void 0!==e?e.toString():"undefined"}'<<`}}createLogMessage(e,t,n,r){let o;const i=n.error,s=n.args;i&&(o=`${i.name}: ${i.message}`,i.stack&&(o+=`@\n${i.stack}`));const a=this._runtime.dateFormatter(r);let c=l[t].toUpperCase();return c.length<5&&(c+=" "),{message:a+" "+c+" ["+("string"==typeof this._runtime.name?this._runtime.name:this._runtime.name.join(", "))+"] "+e+(void 0!==s&&s.length>0?" ["+s.map((e=>this.formatArgValue(e))).join(", ")+"]":""),error:o}}static getErrorAndArgs(e){if(0===e.length)return{};let t,n;const r=e[0];if(r instanceof Error)return t=r,n=e.length>1?e.slice(1):void 0,{error:t,args:n};if("function"==typeof r){const o=r();return o instanceof Error?(t=o,n=e.length>1?e.slice(1):void 0,{error:t,args:n}):1===e.length?Array.isArray(o)?{args:o.length>0?o:void 0}:{args:o}:Array.isArray(o)?{args:[...o,...e.slice(1)]}:{args:[o,...e.slice(1)]}}return{args:e}}}function p(e,t,n=" "){return g(e,t,"start",n)}function g(e,t,n,r=" "){if(t<=e.length)return e;if(r.length>1)throw new Error(`Fill char must be one char exactly, it is: ${r.length}`);const o=t-e.length;let i="";for(let e=0;e<o;e++)i+=r;return"start"===n?i+e:e+i}function v(e){return void 0===e?"undefined":JSON.stringify(e)}function y(e){const t=new Date(e);return`${t.getFullYear()}-${p((t.getMonth()+1).toString(),2,"0")}-${p(t.getDate().toString(),2,"0")} ${p(t.getHours().toString(),2,"0")}:${p(t.getMinutes().toString(),2,"0")}:${p(t.getSeconds().toString(),2,"0")},${p(t.getMilliseconds().toString(),2,"0")}`}class m{constructor(){this.type="LogChannel"}write(e){console&&console.log&&console.log(e.message+(e.error?`\n${e.error}`:""))}}!function(e){e.createConsoleChannel=function(){return new m}}(f||(f={}));class w{constructor(e,t){this._log=i("core.impl.LogProviderImpl"),this._name=e,this._settings=t,this._loggers=new r,this._idToKeyMap=new r,this._globalRuntimeSettings={level:t.level,channel:t.channel},this._nextLoggerId=1,this._log.trace((()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`))}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(e){return this.getOrCreateLogger(e)}updateLoggerRuntime(e,t){this._log.debug((()=>`Updating logger ${e.id} runtime settings using: '${JSON.stringify(t)}'`));const n=this._idToKeyMap.get(e.id);return void 0===n?(this._log.warn((()=>`Cannot update logger with id: ${e.id}, it was not found.`)),!1):(this._loggers.computeIfPresent(n,((e,n)=>(n.runtimeSettings=w.mergeRuntimeSettingsIntoLogRuntime(n.runtimeSettings,t),n))),!0)}updateRuntimeSettings(e){this._log.debug((()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(e)}'`)),this._globalRuntimeSettings={level:void 0!==e.level?e.level:this._globalRuntimeSettings.level,channel:void 0!==e.channel?e.channel:this._globalRuntimeSettings.channel},this._loggers.forEach((t=>t.runtimeSettings=w.mergeRuntimeSettingsIntoLogRuntime(t.runtimeSettings,e)))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(e){const t=w.createKey(e),n=this._loggers.computeIfAbsent(t,(()=>{const t={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:e,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new h(t)}));return this._idToKeyMap.computeIfAbsent(n.id,(()=>t)),n}nextLoggerId(){const e=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,e}static mergeRuntimeSettingsIntoLogRuntime(e,t){return Object.assign(Object.assign({},e),{level:void 0!==t.level?t.level:e.level,channel:void 0!==t.channel?t.channel:e.channel})}static createKey(e){return"string"==typeof e?e:e.join(",")}}var b=Object.freeze({__proto__:null,EnhancedMap:r,maxLengthStringValueInArray:function(e){return e.map((e=>e.length)).reduce(((e,t)=>t>e?t:e),0)},padEnd:function(e,t,n=" "){return g(e,t,"end",n)},padStart:p});class _{constructor(e,t,n,r){this._children=[],this._logger=e,this._name=t,this._parent=n,this._fnGetOrCreateChildCategory=r}get name(){return this._name}get parent(){return this._parent}get path(){const e=[];let t=this;for(;void 0!==t;)e.push(t.name),t=t.parent;return e.reverse()}get children(){return[...this._children]}addChild(e){if(e.parent!==this)throw new Error(`Cannot add child '${e.name}', expected parent '${this._name} but got ${e.parent?e.parent.name:"undefined"}'`);this._children.push(e)}getChildCategory(e){const t=this._children.find((t=>t.name===e));return void 0!==t?t:this._fnGetOrCreateChildCategory(e,this)}get id(){return this._logger.id}get logLevel(){return this._logger.logLevel}get runtimeSettings(){return this._logger.runtimeSettings}get logger(){return this._logger}trace(e,...t){this._logger.trace(e,...t)}debug(e,...t){this._logger.debug(e,...t)}info(e,...t){this._logger.info(e,...t)}warn(e,...t){this._logger.warn(e,...t)}error(e,...t){this._logger.error(e,...t)}fatal(e,...t){this._logger.fatal(e,...t)}}const S="#";class P{constructor(e,t){this._name=e,this._initialConfig=t,this._categoryStorage=new O(e,t)}get name(){return this._name}get config(){return this._initialConfig}get runtimeConfig(){return this._categoryStorage.getCurrentRuntimeConfig()}getCategory(e,t){return this._categoryStorage.getOrCreateCategory(e,t)}updateRuntimeSettingsCategory(e,t){this._categoryStorage.updateRuntimeSettingsCategory(e,t)}updateRuntimeSettings(e){this._categoryStorage.updateRuntimeSettings(e)}getRegisteredCategories(){return this._categoryStorage.getRegisteredCategories()}getCategoryByPath(e){return this._categoryStorage.getCategoryByPath(e)}}class O{constructor(e,t){var n,r;this._categoriesById=new Map,this._categoriesByPath=new Map,this._categoryProviderName=e,this._allowSameCategoryName=t.allowSameCategoryName,this._logProvider=(n=e,r=Object.assign({},t),new w(n,r)),this.getOrCreateCategory=this.getOrCreateCategory.bind(this)}getOrCreateCategory(e,t){if(-1!==e.indexOf(S))throw new Error(`Cannot create category '${e}', name cannot contain a '${S}'.`);const n=void 0!==t?this.getParentCategory(t):void 0;return void 0===n?this.getOrCreateRootCategory(e):this.getOrCreateChildCategory(e,n)}updateRuntimeSettingsCategory(e,t){if(!e.id.startsWith(this._categoryProviderName))throw new Error(`Category '${e.name}' with LogId '${e.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const n=this._categoriesById.get(e.id);void 0!==n&&(this._logProvider.updateLoggerRuntime(n.logger,{level:t.level}),void 0!==t.disableRecursion&&t.disableRecursion||n.children.forEach((e=>this.updateRuntimeSettingsCategory(e,t))))}updateRuntimeSettings(e){this._logProvider.updateRuntimeSettings(e)}getCurrentRuntimeConfig(){return Object.assign(Object.assign({},this._logProvider.runtimeSettings),{allowSameCategoryName:this._allowSameCategoryName})}getRegisteredCategories(){return[...this._categoriesById.values()]}getCategoryByPath(e){return this._categoriesByPath.get(e)}getParentCategory(e){let t;if(O.isLogId(e)){if(t=this._categoriesById.get(e),void 0===t)throw new Error(`Parent category was not found by LogId '${e}'. Are you sure you passed in the correct argument?`)}else if(t=this._categoriesById.get(e.id),void 0===t)throw new Error(`Parent category '${e.name}' was not found by it's LogId '${e.id}'. Are you sure you passed in the correct parent category?`);return t}getOrCreateRootCategory(e){const t=this._categoriesByPath.get(e);if(t){if(!this._allowSameCategoryName)throw new Error(`Category '${e} already exists, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return t}const n=this._logProvider.getLogger(e),r=new _(n,e,void 0,this.getOrCreateCategory);return this._categoriesById.set(r.id,r),this._categoriesByPath.set(e,r),r}getOrCreateChildCategory(e,t){if(!t.id.startsWith(this._categoryProviderName))throw new Error(`Parent category '${t.name}' with LogId '${t.id}' is from a different CategoryProvider, cannot mix categories between providers.`);const n=[...t.path,e].join(S),r=this._categoriesByPath.get(n);if(r){if(!this._allowSameCategoryName)throw new Error(`Child category '${e} already exists for parent category ${t.name}, config flag allowSameCategoryName=false - therefore matching version 1 behavior (hence this Error)`);return r}const o=this._logProvider.getLogger(n);this._logProvider.updateLoggerRuntime(o,{level:t.logger.runtimeSettings.level,channel:t.logger.runtimeSettings.channel});const i=new _(o,e,t,this.getOrCreateCategory);return this._categoriesById.set(i.id,i),this._categoriesByPath.set(i.path.join(S),i),t.addChild(i),i}static isLogId(e){return"string"==typeof e}}class R{constructor(e,t){this._provider=e,this._messageChannel=t,this._originalLogLevels=R.loadCurrentGroupLogLevels(e)}get name(){return this._provider.name}showSettings(){let e=`Available categories (CategoryProvider '${this._provider.name}'):\n`;const t=this.createCategoryInfoHierarchy(),n=t.size.toString().length,r=b.maxLengthStringValueInArray([...t.values()].map((e=>e.category.name+" ".repeat(e.depth)))),o=[...t.values()].map(((e,t)=>R.createSettingLineCategory(e,t,n,r)));e+=o.join("\n")+(o.length>0?"\n":""),this._messageChannel(e)}help(){const e=`You can use the following commands (CategoryProvider ${this._provider.name}):\n  showSettings()\n    Shows the current configuration settings.\n  update(level: CategoryControlProviderLogLevel, categoryId?: number | string, noRecurse?: boolean)\n    Change the log level for a category (by default recursively).\n      @param level      The log level to set - must be one of 'trace', 'debug', 'info', 'warn', 'error' or 'fatal'\n      @param categoryId The category id or path of a category (e.g. root#child1) to update. Use showSettings() for id and/or name.\n                        When omitted, it applies the level to all categories recursively.\n  reset()\n    Resets the log levels of the config groups back to when this control provider was created.\n  save()\n    Saves the current log levels for all categories of this provider. Use restore() to load last saved state.\n  restore()\n    Restore stored saved state, if any. Log levels will be set according to the saved state.\n  help()\n    Shows this help.\n`;this._messageChannel(e)}reset(){const e=new Map(this._provider.getRegisteredCategories().map((e=>[e.id,e])));this._originalLogLevels.forEach(((t,n)=>{const r=e.get(n);void 0!==r&&this._provider.updateRuntimeSettingsCategory(r,{level:t,disableRecursion:!0}),e.delete(n)})),e.forEach((e=>{void 0!==e.parent&&this._provider.updateRuntimeSettingsCategory(e,{level:e.parent.logLevel,disableRecursion:!0})})),this._originalLogLevels=R.loadCurrentGroupLogLevels(this._provider),this._messageChannel("Successfully reset log levels back to original state (from when this CategoryControlProvider was created).")}save(){if(!localStorage)return void this._messageChannel("Cannot save state, localStorage is not available.");const e=this._provider.getRegisteredCategories().filter((e=>void 0===e.parent)).map((e=>R.createCategorySaveData(e))),t={name:this._provider.name,rootCategories:e};localStorage.setItem(this.createKey(),JSON.stringify(t)),this._messageChannel(`Successfully saved state for CategoryControlProvider '${this._provider.name}'.`)}restore(e){const t=void 0===e||e;if(!localStorage)return void(t&&this._messageChannel(`Will not attempt to restore state for CategoryControlProvider '${this._provider.name}', localStorage is not available.`));const n=this.createKey(),r=localStorage.getItem(n);if(null!==r)try{const e=JSON.parse(r);if(this._provider.name!==e.name)return void(t&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not for provider - found name '${e.name}'.`));this.restoreBySaveData(e,t),this._messageChannel(`Successfully restored state for CategoryControlProvider '${this._provider.name}'`),this._originalLogLevels=R.loadCurrentGroupLogLevels(this._provider)}catch(e){localStorage.removeItem(n),this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', data is not valid. Invalid data removed from localStorage.`)}else t&&this._messageChannel(`Cannot restore state for CategoryControlProvider '${this._provider.name}', no data available.`)}update(e,t,n){void 0===t?this.updateAll(e):"number"==typeof t?this.updateByIndex(e,t,void 0!==n&&n):this.updateByPath(e,t,void 0!==n&&n)}updateAll(e){const t=l.toLogLevel(e);this._provider.getRegisteredCategories().filter((e=>void 0===e.parent)).forEach((e=>this._provider.updateRuntimeSettingsCategory(e,{level:t}))),this._messageChannel(`Updated all categories to use log level '${e.toLowerCase()}'`)}updateByPath(e,t,n){const r=this._provider.getCategoryByPath(t);void 0!==r?(this._provider.updateRuntimeSettingsCategory(r,{level:l.toLogLevel(e),disableRecursion:n}),this._messageChannel(`Successfully updated category '${r.name}' with path '${t}' to log level '${e.toLowerCase()}'${n?"":" and recursively applied to children (if any)"}.`)):this._messageChannel(`Failed to find a provider by path '${t}', please make sure to separate the parts by a ${S}.`)}updateByIndex(e,t,n){if(t<0)return void this._messageChannel(`Cannot update category by index '${t}', it is negative.`);const r=this.createCategoryInfoHierarchy();if(t>=r.size)return void this._messageChannel(`Cannot update category by index '${t}', it is outside of the range of available categories, use showSettings() to see the indices.`);const o=[...r.values()][t].category;this._provider.updateRuntimeSettingsCategory(o,{level:l.toLogLevel(e),disableRecursion:n}),this._messageChannel(`Successfully updated category '${o.name}' by index '${t}' to log level '${e.toLowerCase()}'${n?"":" and recursively applied to children (if any)"}.`)}restoreBySaveData(e,t){const n=(e,r)=>{const o=r.length>0?r+S+e.name:e.name,i=this._provider.getCategoryByPath(o);if(void 0!==i){const r=l.toLogLevel(e.level);void 0!==r?this._provider.updateRuntimeSettingsCategory(i,{level:r,disableRecursion:!0}):t&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - cannot restore log level for category path '${o}', log level is invalid.`);for(const t of e.children)n(t,o)}else t&&this._messageChannel(`CategoryControlProvider '${this._provider.name}' - failed to find a Category by path '${o}', will not restore category (and children)`)};for(const t of e.rootCategories)n(t,"")}createKey(){return`CategoryProvider-${this._provider.name}`}createCategoryInfoHierarchy(){const e=new Map;return this._provider.getRegisteredCategories().filter((e=>void 0===e.parent)).forEach((t=>R.addCategoryInfoHierarchy(t,0,e))),e}static createCategorySaveData(e){return{name:e.name,level:l[e.logLevel],children:e.children.map((e=>this.createCategorySaveData(e)))}}static loadCurrentGroupLogLevels(e){return new Map(e.getRegisteredCategories().map((e=>[e.id,e.logLevel])))}static createSettingLineCategory(e,t,n,r){const o=" ".repeat(e.depth)+e.category.name;return`  [${b.padStart(t.toString(),n)}, ${b.padEnd(o,r)} (level=${b.padEnd(e.logLevel,5)})]`}static addCategoryInfoHierarchy(e,t,n){n.set(e.id,{category:e,logLevel:l[e.logLevel],depth:t}),e.children.forEach((e=>this.addCategoryInfoHierarchy(e,t+1,n)))}}class C{constructor(){this._log=d.getInternalLogger("category.impl.CategoryProviderService"),this._providers=new b.EnhancedMap}createLogProvider(e,t){const n=this._providers.compute(e,((n,r)=>{if(r)throw new Error(`CategoryProvider with name '${e}' already exists, cannot create another.`);const o=function(e){const t={channel:f.createConsoleChannel(),allowSameCategoryName:!0,level:l.Error,dateFormatter:y,argumentFormatter:v};return e?{channel:e.channel?e.channel:t.channel,allowSameCategoryName:void 0!==e.allowSameCategoryName?e.allowSameCategoryName:t.allowSameCategoryName,level:void 0!==e.level?e.level:t.level,dateFormatter:e.dateFormatter?e.dateFormatter:t.dateFormatter,argumentFormatter:e.argumentFormatter?e.argumentFormatter:t.argumentFormatter}:t}(t);return this._log.debug((()=>`Creating new CategoryProvider with name '${e}', using config settings '${function(e){return`CategoryConfig=level: ${l[e.level].toString()}, allowSameCategoryName=${e.allowSameCategoryName}`}(o)}'.`)),new P(e,o)}));if(n)return n;throw new Error("No CategoryProvider? This is a bug.")}getCategoryControl(e){const t=e||(e=>{if(!console||!console.log)throw new Error("Cannot use console (it is not present), please specify a custom function to write to.");console.log(e)});return{help:()=>t(C.help()),showSettings:()=>t(this.showSettings()),getProvider:e=>this.getCategoryControlProviderByIdOrName(e,t)}}clear(){this._providers.clear()}showSettings(){let e="Available CategoryProviders:\n";const t=this._providers.size.toString().length,n=b.maxLengthStringValueInArray([...this._providers.keys()]),r=[...this._providers.entries()].map(((e,r)=>{const o=e[0];return`  [${b.padStart(r.toString(),t)}, ${b.padEnd(o,n)}]`}));return e+=r.join("\n")+(r.length>0?"\n":""),e}getCategoryControlProviderByIdOrName(e,t){if("string"==typeof e){const n=this._providers.get(e);if(void 0===n)throw new Error(`Provider with name '${e}' does not exist.`);return new R(n,t)}const n=[...this._providers.values()];if(e<0||e>=n.length)throw new Error(`Provider with index '${e}' does not exist (outside of range).`);return new R(n[e],t)}static help(){return"You can use the following commands:\n  showSettings()\n    Shows the current configuration settings.\n  getProvider: (id: number | string): CategoryControlProvider\n    Get access to a CategoryControlProvider to change log levels.\n      @param id The id (use showSettings to see) or name of the provider\n  help()\n    Shows this help.\n"}}const k=new C,W=e=>k.getCategoryControl(e);var x;!function(e){e.createProvider=function(e,t){return k.createLogProvider(e,t)},e.clear=function(){k.clear()}}(x||(x={}))},9959:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$internal:()=>d,$test:()=>S,DefaultChannels:()=>f,LogLevel:()=>l,createLogProvider:()=>b,formatArgument:()=>v,formatDate:()=>y,util:()=>_});class r extends Map{computeIfAbsent(e,t){if(this.has(e))return this.get(e);const n=t(e);return this.set(e,n),n}computeIfPresent(e,t){const n=this.get(e);if(void 0===n)return;const r=t(e,n);return void 0!==r?this.set(e,r):this.delete(e),r}compute(e,t){const n=t(e,this.get(e));return n?this.set(e,n):this.delete(e),n}}var o;function i(e){return u.getLogger(e)}!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error"}(o||(o={}));const s={setInternalLogLevel:e=>u.changeLogLevel(e),setOutput:e=>u.changeOutput(e),reset:()=>u.reset()};class a{constructor(e,t,n){this._name=e,this._level=t,this._fnOutput=n}trace(e){this.log(o.Trace,e)}debug(e){this.log(o.Debug,e)}error(e,t){this.log(o.Error,e,t)}info(e){this.log(o.Info,e)}warn(e,t){this.log(o.Warn,e,t)}setLevel(e){this._level=e}setOutput(e){this._fnOutput=e}log(e,t,n){this._level>e||this._fnOutput(`${o[this._level].toString()} <INTERNAL LOGGER> ${this._name} ${t()}${n?"\n"+n.stack:""}`)}}class c{constructor(){this._loggers=new r,this._logLevel=o.Error,this._fnOutput=c.logConsole}getLogger(e){return this._loggers.computeIfAbsent(e,(e=>new a(e,this._logLevel,this._fnOutput)))}changeLogLevel(e){this._logLevel=e,this._loggers.forEach((t=>t.setLevel(e)))}changeOutput(e){this._fnOutput=e,this._loggers.forEach((e=>e.setOutput(this._fnOutput)))}reset(){this.changeLogLevel(o.Error),this._fnOutput=c.logConsole,this._loggers.forEach((e=>e.setOutput(this._fnOutput)))}static logConsole(e){console&&console.log&&console.log(e)}}const u=new c;var l,f,d=Object.freeze({__proto__:null,INTERNAL_LOGGING_SETTINGS:s,get InternalLogLevel(){return o},getInternalLogger:i});!function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e[e.Fatal=5]="Fatal",e[e.Off=6]="Off"}(l||(l={})),function(e){e.toLogLevel=function(t){switch(t.toLowerCase()){case"trace":return e.Trace;case"debug":return e.Debug;case"info":return e.Info;case"warn":return e.Warn;case"error":return e.Error;case"fatal":return e.Fatal;case"off":return e.Off;default:return}}}(l||(l={}));class h{constructor(e){this._runtime=e}get id(){return this._runtime.id}get logLevel(){return this._runtime.level}get runtimeSettings(){return Object.assign({},this._runtime)}set runtimeSettings(e){this._runtime=e}trace(e,...t){this.logMessage(l.Trace,e,t)}debug(e,...t){this.logMessage(l.Debug,e,t)}info(e,...t){this.logMessage(l.Info,e,t)}warn(e,...t){this.logMessage(l.Warn,e,t)}error(e,...t){this.logMessage(l.Error,e,t)}fatal(e,...t){this.logMessage(l.Fatal,e,t)}logMessage(e,t,n){if(this._runtime.level>e)return;const r=Date.now(),o="string"==typeof t?t:t(),i=h.getErrorAndArgs(n);switch(this._runtime.channel.type){case"RawLogChannel":return void this._runtime.channel.write({message:o,exception:i.error,args:i.args,timeInMillis:r,level:e,logNames:this._runtime.name},this._runtime.argumentFormatter);case"LogChannel":this._runtime.channel.write(this.createLogMessage(o,e,i,r))}}formatArgValue(e){try{return this._runtime.argumentFormatter(e)}catch(t){return`>>ARG CONVERT FAILED: '${void 0!==e?e.toString():"undefined"}'<<`}}createLogMessage(e,t,n,r){let o;const i=n.error,s=n.args;i&&(o=`${i.name}: ${i.message}`,i.stack&&(o+=`@\n${i.stack}`));const a=this._runtime.dateFormatter(r);let c=l[t].toUpperCase();return c.length<5&&(c+=" "),{message:a+" "+c+" ["+("string"==typeof this._runtime.name?this._runtime.name:this._runtime.name.join(", "))+"] "+e+(void 0!==s&&s.length>0?" ["+s.map((e=>this.formatArgValue(e))).join(", ")+"]":""),error:o}}static getErrorAndArgs(e){if(0===e.length)return{};let t,n;const r=e[0];if(r instanceof Error)return t=r,n=e.length>1?e.slice(1):void 0,{error:t,args:n};if("function"==typeof r){const o=r();return o instanceof Error?(t=o,n=e.length>1?e.slice(1):void 0,{error:t,args:n}):1===e.length?Array.isArray(o)?{args:o.length>0?o:void 0}:{args:o}:Array.isArray(o)?{args:[...o,...e.slice(1)]}:{args:[o,...e.slice(1)]}}return{args:e}}}function p(e,t,n=" "){return g(e,t,"start",n)}function g(e,t,n,r=" "){if(t<=e.length)return e;if(r.length>1)throw new Error(`Fill char must be one char exactly, it is: ${r.length}`);const o=t-e.length;let i="";for(let e=0;e<o;e++)i+=r;return"start"===n?i+e:e+i}function v(e){return void 0===e?"undefined":JSON.stringify(e)}function y(e){const t=new Date(e);return`${t.getFullYear()}-${p((t.getMonth()+1).toString(),2,"0")}-${p(t.getDate().toString(),2,"0")} ${p(t.getHours().toString(),2,"0")}:${p(t.getMinutes().toString(),2,"0")}:${p(t.getSeconds().toString(),2,"0")},${p(t.getMilliseconds().toString(),2,"0")}`}class m{constructor(){this.type="LogChannel"}write(e){console&&console.log&&console.log(e.message+(e.error?`\n${e.error}`:""))}}!function(e){e.createConsoleChannel=function(){return new m}}(f||(f={}));class w{constructor(e,t){this._log=i("core.impl.LogProviderImpl"),this._name=e,this._settings=t,this._loggers=new r,this._idToKeyMap=new r,this._globalRuntimeSettings={level:t.level,channel:t.channel},this._nextLoggerId=1,this._log.trace((()=>`Created LogProviderImpl with settings: ${JSON.stringify(this._settings)}`))}get runtimeSettings(){return Object.assign(Object.assign({},this._settings),{level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel})}getLogger(e){return this.getOrCreateLogger(e)}updateLoggerRuntime(e,t){this._log.debug((()=>`Updating logger ${e.id} runtime settings using: '${JSON.stringify(t)}'`));const n=this._idToKeyMap.get(e.id);return void 0===n?(this._log.warn((()=>`Cannot update logger with id: ${e.id}, it was not found.`)),!1):(this._loggers.computeIfPresent(n,((e,n)=>(n.runtimeSettings=w.mergeRuntimeSettingsIntoLogRuntime(n.runtimeSettings,t),n))),!0)}updateRuntimeSettings(e){this._log.debug((()=>`Updating global runtime settings and updating existing loggers runtime settings using: '${JSON.stringify(e)}'`)),this._globalRuntimeSettings={level:void 0!==e.level?e.level:this._globalRuntimeSettings.level,channel:void 0!==e.channel?e.channel:this._globalRuntimeSettings.channel},this._loggers.forEach((t=>t.runtimeSettings=w.mergeRuntimeSettingsIntoLogRuntime(t.runtimeSettings,e)))}clear(){this._loggers.clear(),this._idToKeyMap.clear(),this._globalRuntimeSettings=Object.assign({},this._settings),this._nextLoggerId=1}getOrCreateLogger(e){const t=w.createKey(e),n=this._loggers.computeIfAbsent(t,(()=>{const t={level:this._globalRuntimeSettings.level,channel:this._globalRuntimeSettings.channel,id:this.nextLoggerId(),name:e,argumentFormatter:this._settings.argumentFormatter,dateFormatter:this._settings.dateFormatter};return new h(t)}));return this._idToKeyMap.computeIfAbsent(n.id,(()=>t)),n}nextLoggerId(){const e=this._name+"_"+this._nextLoggerId;return this._nextLoggerId++,e}static mergeRuntimeSettingsIntoLogRuntime(e,t){return Object.assign(Object.assign({},e),{level:void 0!==t.level?t.level:e.level,channel:void 0!==t.channel?t.channel:e.channel})}static createKey(e){return"string"==typeof e?e:e.join(",")}}function b(e,t){return new w(e,t)}var _=Object.freeze({__proto__:null,EnhancedMap:r,maxLengthStringValueInArray:function(e){return e.map((e=>e.length)).reduce(((e,t)=>t>e?t:e),0)},padEnd:function(e,t,n=" "){return g(e,t,"end",n)},padStart:p}),S=Object.freeze({__proto__:null,ArrayLogChannel:class{constructor(){this._buffer=[],this.type="LogChannel"}write(e){this._buffer.push(e)}get logMessages(){return this._buffer}get messages(){return this._buffer.map((e=>e.message))}},ArrayRawLogChannel:class{constructor(){this._buffer=[],this.type="RawLogChannel"}write(e,t){this._buffer.push(e)}get messages(){return this._buffer.map((e=>e.message))}get errors(){return this._buffer.map((e=>e.exception))}get size(){return this._buffer.length}get rawMessages(){return this._buffer}clear(){this._buffer=[]}},TestControlMessage:class{constructor(){this._messages=[],this.write=this.write.bind(this)}get messages(){return this._messages}write(e){this._messages.push(e)}clear(){this._messages=[]}}})},6339:e=>{"use strict";e.exports=JSON.parse('{"remoteObjectRetrieverService":{"configUrl":"https://content.overwolf.com/ow-promotions/v2/prod/config/externalConfigurations.json?v=1","maxRetries":5,"waitIntervalBetweenRetriesInMs":2000,"retrievalIntervalInMs":3600000},"generalConfiguration":{"promotionIframeURL":"https://content.overwolf.com/ow-promotions/v2/prod/view/index.html","geoConditionURL":"https://content.overwolf.com/ads-sdk/configuration"},"sentry":{"sampleRate":0.1,"dns":"https://8bad9eb6098143c68a0fe2a47d70822f@client-errors.overwolf.com/101"}}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(1616)})();
//# sourceMappingURL=../source-maps/background/background.js.map