/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var Qm=function(e,t){return Qm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},Qm(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Qm(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i}export function __decorate(e,t,i,r){var s=arguments.length,n=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}export function __param(e,t){return function(i,r){t(i,r,e)}}export function __esDecorate(e,t,i,r,s,n){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),h,d=!1,f=i.length-1;f>=0;f--){var g={};for(var v in r)g[v]=v==="access"?{}:r[v];for(var v in r.access)g.access[v]=r.access[v];g.addInitializer=function(x){if(d)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(x||null))};var b=(0,i[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],g);if(a==="accessor"){if(b===void 0)continue;if(b===null||typeof b!="object")throw new TypeError("Object expected");(h=o(b.get))&&(u.get=h),(h=o(b.set))&&(u.set=h),(h=o(b.init))&&s.unshift(h)}else(h=o(b))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,r.name,u),d=!0}export function __runInitializers(e,t,i){for(var r=arguments.length>2,s=0;s<t.length;s++)i=r?t[s].call(e,i):t[s].call(e);return r?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,s=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1],n=l;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(l);break}n[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],s=0}finally{r=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,r){r===void 0&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,n;r<s;r++)(n||!(r in t))&&(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(g){return Promise.resolve(g).then(f,h)}}function a(f,g){r[f]&&(s[f]=function(v){return new Promise(function(b,x){n.push([f,v,b,x])>1||c(f,v)})},g&&(s[f]=g(s[f])))}function c(f,g){try{l(r[f](g))}catch(v){d(n[0][3],v)}}function l(f){f.value instanceof __await?Promise.resolve(f.value.v).then(u,h):d(n[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function d(f,g){f(g),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,i;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,n){t[s]=e[s]?function(o){return(i=!i)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var VP=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return VP(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,i):s?s.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var qP=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};export function __disposeResources(e){function t(r){e.error=e.hasError?new qP(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function i(){for(;e.stack.length;){var r=e.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(i,function(n){return t(n),i()})}catch(n){t(n)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var GP=Object.create,Xm=Object.defineProperty,ZP=Object.getOwnPropertyDescriptor,R4=Object.getOwnPropertyNames,JP=Object.getPrototypeOf,YP=Object.prototype.hasOwnProperty,QP=(e,t)=>function(){return t||(0,e[R4(e)[0]])((t={exports:{}}).exports,t),t.exports},XP=(e,t)=>{for(var i in t)Xm(e,i,{get:t[i],enumerable:!0})},KP=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of R4(t))!YP.call(e,s)&&s!==i&&Xm(e,s,{get:()=>t[s],enumerable:!(r=ZP(t,s))||r.enumerable});return e},O4=(e,t,i)=>(i=e!=null?GP(JP(e)):{},KP(t||!e||!e.__esModule?Xm(i,"default",{value:e,enumerable:!0}):i,e)),F4=QP({"node_modules/minimist/index.js"(e,t){"use strict";function i(n,o){var a=n;o.slice(0,-1).forEach(function(l){a=a[l]||{}});var c=o[o.length-1];return c in a}function r(n){return typeof n=="number"||/^0x[0-9a-f]+$/i.test(n)?!0:/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(n)}function s(n,o){return o==="constructor"&&typeof n[o]=="function"||o==="__proto__"}t.exports=function(n,o){o||(o={});var a={bools:{},strings:{},unknownFn:null};typeof o.unknown=="function"&&(a.unknownFn=o.unknown),typeof o.boolean=="boolean"&&o.boolean?a.allBools=!0:[].concat(o.boolean).filter(Boolean).forEach(function(F){a.bools[F]=!0});var c={};function l(F){return c[F].some(function(J){return a.bools[J]})}Object.keys(o.alias||{}).forEach(function(F){c[F]=[].concat(o.alias[F]),c[F].forEach(function(J){c[J]=[F].concat(c[F].filter(function(he){return J!==he}))})}),[].concat(o.string).filter(Boolean).forEach(function(F){a.strings[F]=!0,c[F]&&[].concat(c[F]).forEach(function(J){a.strings[J]=!0})});var u=o.default||{},h={_:[]};function d(F,J){return a.allBools&&/^--[^=]+$/.test(J)||a.strings[F]||a.bools[F]||c[F]}function f(F,J,he){for(var se=F,ht=0;ht<J.length-1;ht++){var W=J[ht];if(s(se,W))return;se[W]===void 0&&(se[W]={}),(se[W]===Object.prototype||se[W]===Number.prototype||se[W]===String.prototype)&&(se[W]={}),se[W]===Array.prototype&&(se[W]=[]),se=se[W]}var H=J[J.length-1];s(se,H)||((se===Object.prototype||se===Number.prototype||se===String.prototype)&&(se={}),se===Array.prototype&&(se=[]),se[H]===void 0||a.bools[H]||typeof se[H]=="boolean"?se[H]=he:Array.isArray(se[H])?se[H].push(he):se[H]=[se[H],he])}function g(F,J,he){if(!(he&&a.unknownFn&&!d(F,he)&&a.unknownFn(he)===!1)){var se=!a.strings[F]&&r(J)?Number(J):J;f(h,F.split("."),se),(c[F]||[]).forEach(function(ht){f(h,ht.split("."),se)})}}Object.keys(a.bools).forEach(function(F){g(F,u[F]===void 0?!1:u[F])});var v=[];n.indexOf("--")!==-1&&(v=n.slice(n.indexOf("--")+1),n=n.slice(0,n.indexOf("--")));for(var b=0;b<n.length;b++){var x=n[b],E,I;if(/^--.+=/.test(x)){var U=x.match(/^--([^=]+)=([\s\S]*)$/);E=U[1];var j=U[2];a.bools[E]&&(j=j!=="false"),g(E,j,x)}else if(/^--no-.+/.test(x))E=x.match(/^--no-(.+)/)[1],g(E,!1,x);else if(/^--.+/.test(x))E=x.match(/^--(.+)/)[1],I=n[b+1],I!==void 0&&!/^(-|--)[^-]/.test(I)&&!a.bools[E]&&!a.allBools&&(!c[E]||!l(E))?(g(E,I,x),b+=1):/^(true|false)$/.test(I)?(g(E,I==="true",x),b+=1):g(E,a.strings[E]?"":!0,x);else if(/^-[^-]+/.test(x)){for(var ee=x.slice(1,-1).split(""),O=!1,B=0;B<ee.length;B++){if(I=x.slice(B+2),I==="-"){g(ee[B],I,x);continue}if(/[A-Za-z]/.test(ee[B])&&I[0]==="="){g(ee[B],I.slice(1),x),O=!0;break}if(/[A-Za-z]/.test(ee[B])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(I)){g(ee[B],I,x),O=!0;break}if(ee[B+1]&&ee[B+1].match(/\W/)){g(ee[B],x.slice(B+2),x),O=!0;break}else g(ee[B],a.strings[ee[B]]?"":!0,x)}E=x.slice(-1)[0],!O&&E!=="-"&&(n[b+1]&&!/^(-|--)[^-]/.test(n[b+1])&&!a.bools[E]&&(!c[E]||!l(E))?(g(E,n[b+1],x),b+=1):n[b+1]&&/^(true|false)$/.test(n[b+1])?(g(E,n[b+1]==="true",x),b+=1):g(E,a.strings[E]?"":!0,x))}else if((!a.unknownFn||a.unknownFn(x)!==!1)&&h._.push(a.strings._||!r(x)?x:Number(x)),o.stopEarly){h._.push.apply(h._,n.slice(b+1));break}}return Object.keys(u).forEach(function(F){i(h,F.split("."))||(f(h,F.split("."),u[F]),(c[F]||[]).forEach(function(J){f(h,J.split("."),u[F])}))}),o["--"]?h["--"]=v.slice():v.forEach(function(F){h._.push(F)}),h}}}),e2=O4(F4(),1);import*as t2 from"net";var j4;function Km(e,t){const i=Object.create(null);for(const r of e){const s=t(r);let n=i[s];n||(n=i[s]=[]),n.push(r)}return i}function i2(e,t){const i=[],r=[];for(const s of e)t.has(s)||i.push(s);for(const s of t)e.has(s)||r.push(s);return{removed:i,added:r}}var xJ=class{static{j4=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[j4]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},r2=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?vr.isErrorNoTelemetry(e)?new vr(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},Xc=new r2;function e1(e){Xc.setUnexpectedErrorHandler(e)}function s2(e){if(!e||typeof e!="object")return!1;const t=e;return t.code==="EPIPE"&&t.syscall?.toUpperCase()==="WRITE"}function Hh(e){Xc.onUnexpectedError(e)}function lt(e){yi(e)||Xc.onUnexpectedError(e)}function Wh(e){yi(e)||Xc.onUnexpectedExternalError(e)}function ua(e){if(e instanceof Error){const{name:t,message:i,cause:r}=e,s=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:s,noTelemetry:vr.isErrorNoTelemetry(e),cause:r?ua(r):void 0,code:e.code}}return e}function U4(e){let t;return e.noTelemetry?t=new vr:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=U4(e.cause)),t}var _h="Canceled";function yi(e){return e instanceof mt?!0:e instanceof Error&&e.name===_h&&e.message===_h}var mt=class extends Error{constructor(){super(_h),this.name=this.message}},t1=class Tm extends Error{static{this.a="PendingMigrationError"}static is(t){return t instanceof Tm||t instanceof Error&&t.name===Tm.a}constructor(t){super(t),this.name=Tm.a}};function Kc(){const e=new Error(_h);return e.name=e.message,e}function $e(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function i1(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var Jn=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}};function B4(e){return e?e.message?e.message:e.stack?e.stack.split(`
`)[0]:String(e):"Error"}var n2=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},r1=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},vr=class n4 extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof n4)return t;const i=new n4;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},Ji=class h3 extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,h3.prototype)}};function Vh(e,t){const i=this;let r=!1,s;return function(){if(r)return s;if(r=!0,t)try{s=e.apply(i,arguments)}finally{t()}else s=e.apply(i,arguments);return s}}function o2(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}function a2(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?n=o:s=o+1}return s}var EJ=class d3{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(d3.assertInvariants){if(this.d){for(const r of this.e)if(this.d(r)&&!t(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=o2(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function Ri(e,t,i=(r,s)=>r===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!i(e[r],t[r]))return!1;return!0}function c2(e,t){const i=[];let r;for(const s of e.slice(0).sort(t))!r||t(r[0],s)!==0?(r=[s],i.push(r)):r.push(s);return i}function z4(e,t,i){const r=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=r[r.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):r.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=i(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return r}function l2(e,t,i){const r=z4(e,t,i),s=[],n=[];for(const o of r)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function u2(e,t,i,r,s){return i===0?Promise.resolve([]):new Promise((n,o)=>{(async()=>{const a=e.length,c=e.slice(0,i).sort(t);for(let l=i,u=Math.min(i+r,a);l<a;l=u,u=Math.min(u+r,a)){if(l>i&&await new Promise(h=>setTimeout(h)),s&&s.isCancellationRequested)throw new mt;h2(e,t,c,l,u)}return c})().then(n,o)})}function h2(e,t,i,r,s){for(const n=i.length;r<s;r++){const o=e[r];if(t(o,i[n-1])<0){i.pop();const a=a2(i,c=>t(o,c)<0);i.splice(a,0,o)}}}function yt(e){return e.filter(t=>!!t)}function d2(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function s1(e){return!Array.isArray(e)||e.length===0}function el(e){return Array.isArray(e)&&e.length>0}function ha(e,t=i=>i){const i=new Set;return e.filter(r=>{const s=t(r);return i.has(s)?!1:(i.add(s),!0)})}function H4(e,t){return e.push(t),()=>f2(e,t)}function f2(e,t){const i=e.indexOf(t);if(i>-1)return e.splice(i,1),t}function W4(e,t){let i;if(typeof t=="number"){let r=t;i=()=>{const s=Math.sin(r++)*179426549;return s-Math.floor(s)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}}function qh(e,t){return Array.isArray(e)?e.map(t):t(e)}function nr(e){return Array.isArray(e)?e:[e]}var n1;(function(e){function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function r(n){return n>0}e.isGreaterThan=r;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(n1||(n1={}));function p2(e,t){return(i,r)=>t(e(i),e(r))}var g2=(e,t)=>e-t,SJ=class Mm{static{this.empty=new Mm(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new Mm(i=>this.iterate(r=>t(r)?i(r):!0))}map(t){return new Mm(i=>this.iterate(r=>i(t(r))))}some(t){let i=!1;return this.iterate(r=>(i=t(r),!i)),i}findFirst(t){let i;return this.iterate(r=>t(r)?(i=r,!1):!0),i}findLast(t){let i;return this.iterate(r=>(t(r)&&(i=r),!0)),i}findLastMaxBy(t){let i,r=!0;return this.iterate(s=>((r||n1.isGreaterThan(t(s,i)))&&(r=!1,i=s),!0)),i}},_4,V4,q4;function m2(e,t,i){let r=e.get(t);return r===void 0&&(r=i,e.set(t,r)),r}var v2=class{constructor(e,t){this.uri=e,this.value=t}};function w2(e){return Array.isArray(e)}var Gt=class Ih{static{this.c=t=>t.toString()}constructor(t,i){if(this[_4]="ResourceMap",t instanceof Ih)this.d=new Map(t.d),this.e=i??Ih.c;else if(w2(t)){this.d=new Map,this.e=i??Ih.c;for(const[r,s]of t)this.set(r,s)}else this.d=new Map,this.e=t??Ih.c}set(t,i){return this.d.set(this.e(t),new v2(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[r,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(_4=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},G4=class{constructor(e,t){this[V4]="ResourceSet",!e||typeof e=="function"?this.c=new Gt(e):(this.c=new Gt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,r)=>e.call(t,r,r,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(V4=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},Z4;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(Z4||(Z4={}));var b2=class{constructor(){this[q4]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const i=this.c.get(e);if(i)return t!==0&&this.n(i,t),i.value}set(e,t,i=0){let r=this.c.get(e);if(r)r.value=t,i!==0&&this.n(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.l(r);break;case 1:this.k(r);break;case 2:this.l(r);break;default:this.l(r);break}this.c.set(e,r),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const i=this.g;let r=this.d;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(q4=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const i=e.next,r=e.previous;e===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const i=e.next,r=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},y2=class extends b2{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},tl=class extends y2{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},A2=class{constructor(e){if(this.c=new Map,this.d=new Map,e)for(const[t,i]of e)this.set(t,i)}clear(){this.c.clear(),this.d.clear()}set(e,t){this.c.set(e,t),this.d.set(t,e)}get(e){return this.c.get(e)}getKey(e){return this.d.get(e)}delete(e){const t=this.c.get(e);return t===void 0?!1:(this.c.delete(e),this.d.delete(t),!0)}forEach(e,t){this.c.forEach((i,r)=>{e.call(t,i,r,this)})}keys(){return this.c.keys()}values(){return this.c.values()}},J4=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function pi(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function o1(e,t="Unreachable"){throw new Error(t)}function a1(e,t="unexpected state"){if(!e)throw typeof t=="string"?new Ji(`Assertion Failed: ${t}`):t}function Y4(e){if(!e()){debugger;e(),lt(new Ji("Assertion Failed"))}}function Fe(e){return typeof e=="string"}function x2(e){return Array.isArray(e)&&e.every(t=>Fe(t))}function xt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function E2(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function or(e){return typeof e=="number"&&!isNaN(e)}function S2(e){return!!e&&typeof e[Symbol.iterator]=="function"}function Q4(e){return e===!0||e===!1}function il(e){return typeof e>"u"}function Yi(e){return!Dt(e)}function Dt(e){return il(e)||e===null}function c1(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function da(e){return a1(e!=null,"Argument is `undefined` or `null`."),e}var k2=Object.prototype.hasOwnProperty;function X4(e){if(!xt(e))return!1;for(const t in e)if(k2.call(e,t))return!1;return!0}function K4(e){return typeof e=="function"}function I2(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++)e5(e[r],t[r])}function e5(e,t){if(Fe(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(K4(t)){try{if(e instanceof t)return}catch{}if(!Dt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var li;(function(e){function t(O){return!!O&&typeof O=="object"&&typeof O[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function r(){return i}e.empty=r;function*s(O){yield O}e.single=s;function n(O){return t(O)?O:s(O)}e.wrap=n;function o(O){return O||i}e.from=o;function*a(O){for(let B=O.length-1;B>=0;B--)yield O[B]}e.reverse=a;function c(O){return!O||O[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(O){return O[Symbol.iterator]().next().value}e.first=l;function u(O,B){let F=0;for(const J of O)if(B(J,F++))return!0;return!1}e.some=u;function h(O,B){let F=0;for(const J of O)if(!B(J,F++))return!1;return!0}e.every=h;function d(O,B){for(const F of O)if(B(F))return F}e.find=d;function*f(O,B){for(const F of O)B(F)&&(yield F)}e.filter=f;function*g(O,B){let F=0;for(const J of O)yield B(J,F++)}e.map=g;function*v(O,B){let F=0;for(const J of O)yield*B(J,F++)}e.flatMap=v;function*b(...O){for(const B of O)S2(B)?yield*B:yield B}e.concat=b;function x(O,B,F){let J=F;for(const he of O)J=B(J,he);return J}e.reduce=x;function E(O){let B=0;for(const F of O)B++;return B}e.length=E;function*I(O,B,F=O.length){for(B<-O.length&&(B=0),B<0&&(B+=O.length),F<0?F+=O.length:F>O.length&&(F=O.length);B<F;B++)yield O[B]}e.slice=I;function U(O,B=Number.POSITIVE_INFINITY){const F=[];if(B===0)return[F,O];const J=O[Symbol.iterator]();for(let he=0;he<B;he++){const se=J.next();if(se.done)return[F,e.empty()];F.push(se.value)}return[F,{[Symbol.iterator](){return J}}]}e.consume=U;async function j(O){const B=[];for await(const F of O)B.push(F);return B}e.asyncToArray=j;async function ee(O){let B=[];for await(const F of O)B=B.concat(F);return B}e.asyncToArrayFlat=ee})(li||(li={}));var C2=!1,Yn=null,kJ=class f3{constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:f3.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const r=this.c(t);r.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const r=i.get(t);if(r)return r;const s=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,r])=>r.source!==null&&!this.f(r,t).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(t=10,i){let r;if(i)r=i;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(r=l.filter(h=>!(h.parent&&u.has(h.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function s(c){function l(h,d){for(;h.length>0&&d.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new J4;for(const c of r){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}r.sort(p2(c=>c.idx,g2));let o="",a=0;for(const c of r.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let d=l[h];d=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${r.length} leaks) at ${d}`;const g=n.get(l.slice(0,h).join(`
`)),v=Km([...g].map(b=>s(b)[h]),b=>b);delete v[l[h]];for(const[b,x]of Object.entries(v))u.unshift(`    - stacktraces of ${x.length} other leaks continue with ${b}`);u.unshift(d)}o+=`


==================== Leaking disposable ${a}/${r.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return r.length>t&&(o+=`


... and ${r.length-t} more leaking disposables

`),{leaks:r,details:o}}};function $2(e){Yn=e}if(C2){const e="__is_disposable_tracked__";$2(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==te.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==te.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function fa(e){return Yn?.trackDisposable(e),e}function pa(e){Yn?.markAsDisposed(e)}function rl(e,t){Yn?.setParent(e,t)}function D2(e,t){if(Yn)for(const i of e)Yn.setParent(i,t)}function l1(e){return Yn?.markAsSingleton(e),e}function t5(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function wr(e){if(li.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function u1(...e){const t=re(()=>wr(e));return D2(e,t),t}function re(e){const t=fa({dispose:Vh(()=>{pa(t),e()})});return t}var le=class p3{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,fa(this)}dispose(){this.g||(pa(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{wr(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return rl(t,this),this.g?p3.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),rl(t,null))}},te=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new le,fa(this),rl(this.q,this)}dispose(){pa(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},Hr=class{constructor(){this.b=!1,fa(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&rl(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,pa(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&rl(e,null),e}},ga=class{constructor(){this.a=new Map,this.b=!1,fa(this)}dispose(){pa(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{wr(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}},Pt=class Nm{static{this.Undefined=new Nm(void 0)}constructor(t){this.element=t,this.next=Nm.Undefined,this.prev=Nm.Undefined}},nn=class{constructor(){this.a=Pt.Undefined,this.b=Pt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===Pt.Undefined}clear(){let e=this.a;for(;e!==Pt.Undefined;){const t=e.next;e.prev=Pt.Undefined,e.next=Pt.Undefined,e=t}this.a=Pt.Undefined,this.b=Pt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new Pt(e);if(this.a===Pt.Undefined)this.a=i,this.b=i;else if(t){const s=this.b;this.b=i,i.prev=s,s.next=i}else{const s=this.a;this.a=i,i.next=s,s.prev=i}this.c+=1;let r=!1;return()=>{r||(r=!0,this.e(i))}}shift(){if(this.a!==Pt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==Pt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==Pt.Undefined&&e.next!==Pt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Pt.Undefined&&e.next===Pt.Undefined?(this.a=Pt.Undefined,this.b=Pt.Undefined):e.next===Pt.Undefined?(this.b=this.b.prev,this.b.next=Pt.Undefined):e.prev===Pt.Undefined&&(this.a=this.a.next,this.a.prev=Pt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==Pt.Undefined;)yield e.element,e=e.next}},P2=globalThis.performance.now.bind(globalThis.performance),Oi=class g3{static create(t){return new g3(t)}constructor(t){this.c=t===!1?Date.now:P2,this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},i5=!1,T2=!1,We;(function(e){e.None=()=>te.None;function t(W){if(T2){const{onDidAddListener:H}=W,Q=h1.create();let X=0;W.onDidAddListener=()=>{++X===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Q.print()),H?.()}}}function i(W,H){return f(W,()=>{},0,void 0,!0,void 0,H)}e.defer=i;function r(W){return(H,Q=null,X)=>{let ne=!1,de;return de=W(Pe=>{if(!ne)return de?de.dispose():ne=!0,H.call(Q,Pe)},null,X),ne&&de.dispose(),de}}e.once=r;function s(W,H){return e.once(e.filter(W,H))}e.onceIf=s;function n(W,H,Q){return h((X,ne=null,de)=>W(Pe=>X.call(ne,H(Pe)),null,de),Q)}e.map=n;function o(W,H,Q){return h((X,ne=null,de)=>W(Pe=>{H(Pe),X.call(ne,Pe)},null,de),Q)}e.forEach=o;function a(W,H,Q){return h((X,ne=null,de)=>W(Pe=>H(Pe)&&X.call(ne,Pe),null,de),Q)}e.filter=a;function c(W){return W}e.signal=c;function l(...W){return(H,Q=null,X)=>{const ne=u1(...W.map(de=>de(Pe=>H.call(Q,Pe))));return d(ne,X)}}e.any=l;function u(W,H,Q,X){let ne=Q;return n(W,de=>(ne=H(ne,de),ne),X)}e.reduce=u;function h(W,H){let Q;const X={onWillAddFirstListener(){Q=W(ne.fire,ne)},onDidRemoveLastListener(){Q?.dispose()}};H||t(X);const ne=new $(X);return H?.add(ne),ne.event}function d(W,H){return H instanceof Array?H.push(W):H&&H.add(W),W}function f(W,H,Q=100,X=!1,ne=!1,de,Pe){let ot,ke,Wt,Ct=0,_t;const di={leakWarningThreshold:de,onWillAddFirstListener(){ot=W(Rt=>{Ct++,ke=H(ke,Rt),X&&!Wt&&(bi.fire(ke),ke=void 0),_t=()=>{const Vn=ke;ke=void 0,Wt=void 0,(!X||Ct>1)&&bi.fire(Vn),Ct=0},typeof Q=="number"?(Wt&&clearTimeout(Wt),Wt=setTimeout(_t,Q)):Wt===void 0&&(Wt=null,queueMicrotask(_t))})},onWillRemoveListener(){ne&&Ct>0&&_t?.()},onDidRemoveLastListener(){_t=void 0,ot.dispose()}};Pe||t(di);const bi=new $(di);return Pe?.add(bi),bi.event}e.debounce=f;function g(W,H=0,Q){return e.debounce(W,(X,ne)=>X?(X.push(ne),X):[ne],H,void 0,!0,void 0,Q)}e.accumulate=g;function v(W,H=(X,ne)=>X===ne,Q){let X=!0,ne;return a(W,de=>{const Pe=X||!H(de,ne);return X=!1,ne=de,Pe},Q)}e.latch=v;function b(W,H,Q){return[e.filter(W,H,Q),e.filter(W,X=>!H(X),Q)]}e.split=b;function x(W,H=!1,Q=[],X){let ne=Q.slice(),de=W(ke=>{ne?ne.push(ke):ot.fire(ke)});X&&X.add(de);const Pe=()=>{ne?.forEach(ke=>ot.fire(ke)),ne=null},ot=new $({onWillAddFirstListener(){de||(de=W(ke=>ot.fire(ke)),X&&X.add(de))},onDidAddFirstListener(){ne&&(H?setTimeout(Pe):Pe())},onDidRemoveLastListener(){de&&de.dispose(),de=null}});return X&&X.add(ot),ot.event}e.buffer=x;function E(W,H){return(X,ne,de)=>{const Pe=H(new U);return W(function(ot){const ke=Pe.evaluate(ot);ke!==I&&X.call(ne,ke)},void 0,de)}}e.chain=E;const I=Symbol("HaltChainable");class U{constructor(){this.f=[]}map(H){return this.f.push(H),this}forEach(H){return this.f.push(Q=>(H(Q),Q)),this}filter(H){return this.f.push(Q=>H(Q)?Q:I),this}reduce(H,Q){let X=Q;return this.f.push(ne=>(X=H(X,ne),X)),this}latch(H=(Q,X)=>Q===X){let Q=!0,X;return this.f.push(ne=>{const de=Q||!H(ne,X);return Q=!1,X=ne,de?ne:I}),this}evaluate(H){for(const Q of this.f)if(H=Q(H),H===I)break;return H}}function j(W,H,Q=X=>X){const X=(...ot)=>Pe.fire(Q(...ot)),ne=()=>W.on(H,X),de=()=>W.removeListener(H,X),Pe=new $({onWillAddFirstListener:ne,onDidRemoveLastListener:de});return Pe.event}e.fromNodeEventEmitter=j;function ee(W,H,Q=X=>X){const X=(...ot)=>Pe.fire(Q(...ot)),ne=()=>W.addEventListener(H,X),de=()=>W.removeEventListener(H,X),Pe=new $({onWillAddFirstListener:ne,onDidRemoveLastListener:de});return Pe.event}e.fromDOMEventEmitter=ee;function O(W,H){let Q;const X=new Promise((ne,de)=>{const Pe=r(W)(ne,null,H);Q=()=>Pe.dispose()});return X.cancel=Q,X}e.toPromise=O;function B(W){const H=new $;return W.then(Q=>{H.fire(Q)},()=>{H.fire(void 0)}).finally(()=>{H.dispose()}),H.event}e.fromPromise=B;function F(W,H){return W(Q=>H.fire(Q))}e.forward=F;function J(W,H,Q){return H(Q),W(X=>H(X))}e.runAndSubscribe=J;class he{constructor(H,Q){this._observable=H,this.f=0,this.g=!1;const X={onWillAddFirstListener:()=>{H.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{H.removeObserver(this)}};Q||t(X),this.emitter=new $(X),Q&&Q.add(this.emitter)}beginUpdate(H){this.f++}handlePossibleChange(H){}handleChange(H,Q){this.g=!0}endUpdate(H){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function se(W,H){return new he(W,H).emitter.event}e.fromObservable=se;function ht(W){return(H,Q,X)=>{let ne=0,de=!1;const Pe={beginUpdate(){ne++},endUpdate(){ne--,ne===0&&(W.reportChanges(),de&&(de=!1,H.call(Q)))},handlePossibleChange(){},handleChange(){de=!0}};W.addObserver(Pe),W.reportChanges();const ot={dispose(){W.removeObserver(Pe)}};return X instanceof le?X.add(ot):Array.isArray(X)&&X.push(ot),ot}}e.fromObservableLight=ht})(We||(We={}));var M2=class o4{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${o4.f++}`,o4.all.add(this)}start(t){this.g=new Oi,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},r5=-1,N2=class m3{static{this.f=1}constructor(t,i,r=(m3.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=r,this.h=0}dispose(){this.g?.clear()}check(t,i){const r=this.threshold;if(r<=0||i<r)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=r*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new L2(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[r,s]of this.g)(!t||i<s)&&(t=[r,s],i=s);return t}},h1=class v3{static create(){const t=new Error;return new v3(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},L2=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},R2=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},O2=0,Gh=class{constructor(e){this.value=e,this.id=O2++}},F2=2,s5=(e,t)=>{if(e instanceof Gh)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}},$=class{constructor(e){this.A=0,this.g=e,this.j=r5>0||this.g?.leakWarningThreshold?new N2(e?.onListenerError??lt,this.g?.leakWarningThreshold??r5):void 0,this.m=this.g?._profName?new M2(this.g._profName):void 0,this.z=this.g?.deliveryQueue}dispose(){if(!this.q){if(this.q=!0,this.z?.current===this&&this.z.reset(),this.w){if(i5){const e=this.w;queueMicrotask(()=>{s5(e,t=>t.stack?.print())})}this.w=void 0,this.A=0}this.g?.onDidRemoveLastListener?.(),this.j?.dispose()}}get event(){return this.u??=(e,t,i)=>{if(this.j&&this.A>this.j.threshold**2){const a=`[${this.j.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.A} vs ${this.j.threshold})`;console.warn(a);const c=this.j.getMostFrequentStack()??["UNKNOWN stack",-1],l=new R2(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.g?.onListenerError||lt)(l),te.None}if(this.q)return te.None;t&&(e=e.bind(t));const r=new Gh(e);let s,n;this.j&&this.A>=Math.ceil(this.j.threshold*.2)&&(r.stack=h1.create(),s=this.j.check(r.stack,this.A+1)),i5&&(r.stack=n??h1.create()),this.w?this.w instanceof Gh?(this.z??=new j2,this.w=[this.w,r]):this.w.push(r):(this.g?.onWillAddFirstListener?.(this),this.w=r,this.g?.onDidAddFirstListener?.(this)),this.g?.onDidAddListener?.(this),this.A++;const o=re(()=>{s?.(),this.B(r)});return i instanceof le?i.add(o):Array.isArray(i)&&i.push(o),o},this.u}B(e){if(this.g?.onWillRemoveListener?.(this),!this.w)return;if(this.A===1){this.w=void 0,this.g?.onDidRemoveLastListener?.(this),this.A=0;return}const t=this.w,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.q),console.log("size?",this.A),console.log("arr?",JSON.stringify(this.w)),new Error("Attempted to dispose unknown listener");this.A--,t[i]=void 0;const r=this.z.current===this;if(this.A*F2<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:r&&s<this.z.end&&(this.z.end--,s<this.z.i&&this.z.i--);t.length=s}}C(e,t){if(!e)return;const i=this.g?.onListenerError||lt;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}D(e){const t=e.current.w;for(;e.i<e.end;)this.C(t[e.i++],e.value);e.reset()}fire(e){if(this.z?.current&&(this.D(this.z),this.m?.stop()),this.m?.start(this.A),this.w)if(this.w instanceof Gh)this.C(this.w,e);else{const t=this.z;t.enqueue(this,e,this.w.length),this.D(t)}this.m?.stop()}hasListeners(){return this.A>0}},j2=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},sl=class extends ${async fireAsync(e,t,i){if(this.w)for(this.f||(this.f=new nn),s5(this.w,r=>this.f.push([r.value,e]));this.f.size>0&&!t.isCancellationRequested;){const[r,s]=this.f.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,r)),n.push(a)}};try{r(o)}catch(a){lt(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&lt(c.reason)})}}},nl=class extends ${get isPaused(){return this.f!==0}constructor(e){super(e),this.f=0,this.h=new nn,this.s=e?.merge}pause(){this.f++}resume(){if(this.f!==0&&--this.f===0)if(this.s){if(this.h.size>0){const e=Array.from(this.h);this.h.clear(),super.fire(this.s(e))}}else for(;!this.f&&this.h.size!==0;)super.fire(this.h.shift())}fire(e){this.A&&(this.f!==0?this.h.push(e):super.fire(e))}},U2=class extends nl{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},B2=class extends ${constructor(e){super(e),this.f=[],this.h=e?.merge}fire(e){this.hasListeners()&&(this.f.push(e),this.f.length===1&&queueMicrotask(()=>{this.h?super.fire(this.h(this.f)):this.f.forEach(t=>super.fire(t)),this.f=[]}))}},z2=class{constructor(){this.f=!1,this.g=We.None,this.h=te.None,this.j=new $({onDidAddFirstListener:()=>{this.f=!0,this.h=this.g(this.j.fire,this.j)},onDidRemoveLastListener:()=>{this.f=!1,this.h.dispose()}}),this.event=this.j.event}set input(e){this.g=e,this.f&&(this.h.dispose(),this.h=e(this.j.fire,this.j))}dispose(){this.h.dispose(),this.j.dispose()}},n5=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),Je;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof Zh?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:We.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n5})})(Je||(Je={}));var Zh=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?n5:(this.b||(this.b=new $),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},tt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Zh),this.f}cancel(){this.f?this.f instanceof Zh&&this.f.cancel():this.f=Je.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Zh&&this.f.dispose():this.f=Je.None}};function H2(){return globalThis._VSCODE_NLS_MESSAGES}function o5(){return globalThis._VSCODE_NLS_LANGUAGE}var W2=o5()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Jh(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(r,s)=>{const n=s[0],o=t[n];let a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),W2&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function p(e,t,...i){return Jh(typeof e=="number"?a5(e,t):t,i)}function a5(e,t){const i=H2()?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function Yh(e,t,...i){let r;typeof e=="number"?r=a5(e,t):r=t;const s=Jh(r,i);return{value:s,original:t===r?s:Jh(t,i)}}var on="en",ol=!1,al=!1,cl=!1,_2=!1,c5=!1,d1=!1,V2=!1,l5=!1,u5=!1,q2=!1,Qh=void 0,Xh=on,h5=on,G2=void 0,ms=void 0,vs=globalThis,Qi=void 0;typeof vs.vscode<"u"&&typeof vs.vscode.process<"u"?Qi=vs.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Qi=process);var d5=typeof Qi?.versions?.electron=="string",Z2=d5&&Qi?.type==="renderer";if(typeof Qi=="object"){ol=Qi.platform==="win32",al=Qi.platform==="darwin",cl=Qi.platform==="linux",_2=cl&&!!Qi.env.SNAP&&!!Qi.env.SNAP_REVISION,V2=d5,u5=!!Qi.env.CI||!!Qi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Qh=on,Xh=on;const e=Qi.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Qh=t.userLocale,h5=t.osLocale,Xh=t.resolvedLanguage||on,G2=t.languagePack?.translationsConfigFile}catch{}c5=!0}else typeof navigator=="object"&&!Z2?(ms=navigator.userAgent,ol=ms.indexOf("Windows")>=0,al=ms.indexOf("Macintosh")>=0,l5=(ms.indexOf("Macintosh")>=0||ms.indexOf("iPad")>=0||ms.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,cl=ms.indexOf("Linux")>=0,q2=ms?.indexOf("Mobi")>=0,d1=!0,Xh=o5()||on,Qh=navigator.language.toLowerCase(),h5=Qh):console.error("Unable to resolve platform.");var f5;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(f5||(f5={}));function J2(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var Kh=0;al?Kh=1:ol?Kh=3:cl&&(Kh=2);var je=ol,Ft=al,Et=cl,p5=c5,ed=d1,Y2=d1&&typeof vs.importScripts=="function",Q2=Y2?vs.origin:void 0,Qn=u5,X2=Kh,Wr=ms,an=Xh,g5;(function(e){function t(){return an}e.value=t;function i(){return an.length===2?an==="en":an.length>=3?an[0]==="e"&&an[1]==="n"&&an[2]==="-":!1}e.isDefaultVariant=i;function r(){return an==="en"}e.isDefault=r})(g5||(g5={}));var K2=typeof vs.postMessage=="function"&&!vs.importScripts,m5=(()=>{if(K2){const e=[];vs.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(r,1),n.callback();return}}});let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),vs.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),v5;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(v5||(v5={}));var Xn=al||l5?2:ol?1:3,w5=!0,b5=!1;function y5(){if(!b5){b5=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,w5=new Uint16Array(e.buffer)[0]===513}return w5}var f1=!!(Wr&&Wr.indexOf("Chrome")>=0),eT=!!(Wr&&Wr.indexOf("Firefox")>=0),tT=!!(!f1&&Wr&&Wr.indexOf("Safari")>=0),A5=!!(Wr&&Wr.indexOf("Edg/")>=0),IJ=!!(Wr&&Wr.indexOf("Android")>=0),Kn,p1=globalThis.vscode;if(typeof p1<"u"&&typeof p1.process<"u"){const e=p1.process;Kn={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Kn={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Kn={get platform(){return je?"win32":Ft?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var eo=Kn.cwd,cn=Kn.env,iT=Kn.platform,CJ=Kn.arch,rT=65,sT=97,nT=90,oT=122,to=46,ri=47,Fi=92,ws=58,aT=63,x5=class extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${r} of type ${t}`;n+=`. Received type ${typeof i}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function cT(e,t){if(e===null||typeof e!="object")throw new x5(t,"Object",e)}function Nt(e,t){if(typeof e!="string")throw new x5(t,"string",e)}var ji=iT==="win32";function Re(e){return e===ri||e===Fi}function g1(e){return e===ri}function bs(e){return e>=rT&&e<=nT||e>=sT&&e<=oT}function td(e,t,i,r){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(r(c))break;c=ri}if(r(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==to||s.charCodeAt(s.length-2)!==to){if(s.length>2){const u=s.lastIndexOf(i);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(i)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${i}..`:"..",n=2)}else s.length>0?s+=`${i}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===to&&a!==-1?++a:a=-1}return s}function lT(e){return e?`${e[0]==="."?"":"."}${e}`:""}function E5(e,t){cT(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${lT(t.ext)}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}var Lt={resolve(...e){let t="",i="",r=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],Nt(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=eo():(n=cn[`=${t}`]||eo(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===Fi)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Re(u)&&(a=1,l=!0);else if(Re(u))if(l=!0,Re(n.charCodeAt(1))){let h=2,d=h;for(;h<o&&!Re(n.charCodeAt(h));)h++;if(h<o&&h!==d){const f=n.slice(d,h);for(d=h;h<o&&Re(n.charCodeAt(h));)h++;if(h<o&&h!==d){for(d=h;h<o&&!Re(n.charCodeAt(h));)h++;(h===o||h!==d)&&(c=`\\\\${f}\\${n.slice(d,h)}`,a=h)}}}else a=1;else bs(u)&&n.charCodeAt(1)===ws&&(c=n.slice(0,2),a=2,o>2&&Re(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(i=`${n.slice(a)}\\${i}`,r=l,l&&t.length>0)break}return i=td(i,!r,"\\",Re),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){Nt(e,"path");const t=e.length;if(t===0)return".";let i=0,r,s=!1;const n=e.charCodeAt(0);if(t===1)return g1(n)?"\\":e;if(Re(n))if(s=!0,Re(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Re(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(r=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else bs(n)&&e.charCodeAt(1)===ws&&(r=e.slice(0,2),i=2,t>2&&Re(e.charCodeAt(2))&&(s=!0,i=3));let o=i<t?td(e.slice(i),!s,"\\",Re):"";if(o.length===0&&!s&&(o="."),o.length>0&&Re(e.charCodeAt(t-1))&&(o+="\\"),!s&&r===void 0&&e.includes(":")){if(o.length>=2&&bs(o.charCodeAt(0))&&o.charCodeAt(1)===ws)return`.\\${o}`;let a=e.indexOf(":");do if(a===t-1||Re(e.charCodeAt(a+1)))return`.\\${o}`;while((a=e.indexOf(":",a+1))!==-1)}return r===void 0?s?`\\${o}`:o:s?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){Nt(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Re(i)||t>2&&bs(i)&&e.charCodeAt(1)===ws&&Re(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let n=0;n<e.length;++n){const o=e[n];Nt(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let r=!0,s=0;if(typeof i=="string"&&Re(i.charCodeAt(0))){++s;const n=i.length;n>1&&Re(i.charCodeAt(1))&&(++s,n>2&&(Re(i.charCodeAt(2))?++s:r=!1))}if(r){for(;s<t.length&&Re(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Lt.normalize(t)},relative(e,t){if(Nt(e,"from"),Nt(t,"to"),e===t)return"";const i=Lt.resolve(e),r=Lt.resolve(t);if(i===r||(e=i.toLowerCase(),t=r.toLowerCase(),e===t))return"";if(i.length!==e.length||r.length!==t.length){const g=i.split("\\"),v=r.split("\\");g[g.length-1]===""&&g.pop(),v[v.length-1]===""&&v.pop();const b=g.length,x=v.length,E=b<x?b:x;let I;for(I=0;I<E&&g[I].toLowerCase()===v[I].toLowerCase();I++);return I===0?r:I===E?x>E?v.slice(I).join("\\"):b>E?"..\\".repeat(b-1-I)+"..":"":"..\\".repeat(b-I)+v.slice(I).join("\\")}let s=0;for(;s<e.length&&e.charCodeAt(s)===Fi;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===Fi;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Fi;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===Fi;)c--;const l=c-a,u=o<l?o:l;let h=-1,d=0;for(;d<u;d++){const g=e.charCodeAt(s+d);if(g!==t.charCodeAt(a+d))break;g===Fi&&(h=d)}if(d!==u){if(h===-1)return r}else{if(l>u){if(t.charCodeAt(a+d)===Fi)return r.slice(a+d+1);if(d===2)return r.slice(a+d)}o>u&&(e.charCodeAt(s+d)===Fi?h=d:d===2&&(h=3)),h===-1&&(h=0)}let f="";for(d=s+h+1;d<=n;++d)(d===n||e.charCodeAt(d)===Fi)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${r.slice(a,c)}`:(r.charCodeAt(a)===Fi&&++a,r.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Lt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Fi){if(t.charCodeAt(1)===Fi){const i=t.charCodeAt(2);if(i!==aT&&i!==to)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(bs(t.charCodeAt(0))&&t.charCodeAt(1)===ws&&t.charCodeAt(2)===Fi)return`\\\\?\\${t}`;return t},dirname(e){Nt(e,"path");const t=e.length;if(t===0)return".";let i=-1,r=0;const s=e.charCodeAt(0);if(t===1)return Re(s)?e:".";if(Re(s)){if(i=r=1,Re(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Re(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=r=a+1)}}}}else bs(s)&&e.charCodeAt(1)===ws&&(i=t>2&&Re(e.charCodeAt(2))?3:2,r=i);let n=-1,o=!0;for(let a=t-1;a>=r;--a)if(Re(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(i===-1)return".";n=i}return e.slice(0,n)},basename(e,t){t!==void 0&&Nt(t,"suffix"),Nt(e,"path");let i=0,r=-1,s=!0,n;if(e.length>=2&&bs(e.charCodeAt(0))&&e.charCodeAt(1)===ws&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(Re(c)){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(Re(e.charCodeAt(n))){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Nt(e,"path");let t=0,i=-1,r=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===ws&&bs(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Re(c)){if(!n){r=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===to?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||s===-1||o===0||o===1&&i===s-1&&i===r+1?"":e.slice(i,s)},format:E5.bind(null,"\\"),parse(e){Nt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let r=0,s=e.charCodeAt(0);if(i===1)return Re(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Re(s)){if(r=1,Re(e.charCodeAt(1))){let h=2,d=h;for(;h<i&&!Re(e.charCodeAt(h));)h++;if(h<i&&h!==d){for(d=h;h<i&&Re(e.charCodeAt(h));)h++;if(h<i&&h!==d){for(d=h;h<i&&!Re(e.charCodeAt(h));)h++;h===i?r=h:h!==d&&(r=h+1)}}}}else if(bs(s)&&e.charCodeAt(1)===ws){if(i<=2)return t.root=t.dir=e,t;if(r=2,Re(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let n=-1,o=r,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(s=e.charCodeAt(l),Re(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===to?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},uT=(()=>{if(ji){const e=/\\/g;return()=>{const t=eo().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>eo()})(),Ue={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=0&&!i;r--){const s=e[r];Nt(s,`paths[${r}]`),s.length!==0&&(t=`${s}/${t}`,i=s.charCodeAt(0)===ri)}if(!i){const r=uT();t=`${r}/${t}`,i=r.charCodeAt(0)===ri}return t=td(t,!i,"/",g1),i?`/${t}`:t.length>0?t:"."},normalize(e){if(Nt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===ri,i=e.charCodeAt(e.length-1)===ri;return e=td(e,!t,"/",g1),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return Nt(e,"path"),e.length>0&&e.charCodeAt(0)===ri},join(...e){if(e.length===0)return".";const t=[];for(let i=0;i<e.length;++i){const r=e[i];Nt(r,"path"),r.length>0&&t.push(r)}return t.length===0?".":Ue.normalize(t.join("/"))},relative(e,t){if(Nt(e,"from"),Nt(t,"to"),e===t||(e=Ue.resolve(e),t=Ue.resolve(t),e===t))return"";const i=1,r=e.length,s=r-i,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(i+l);if(h!==t.charCodeAt(n+l))break;h===ri&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===ri)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(i+l)===ri?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=r;++l)(l===r||e.charCodeAt(l)===ri)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(Nt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===ri;let i=-1,r=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===ri){if(!r){i=s;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&Nt(t,"suffix"),Nt(e,"path");let i=0,r=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===ri){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===ri){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){Nt(e,"path");let t=-1,i=0,r=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e[o];if(a==="/"){if(!s){i=o+1;break}continue}r===-1&&(s=!1,r=o+1),a==="."?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||r===-1||n===0||n===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:E5.bind(null,"/"),parse(e){Nt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===ri;let r;i?(t.root="/",r=1):r=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=r;--c){const u=e.charCodeAt(c);if(u===ri){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===to?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&i?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ue.win32=Lt.win32=Lt,Ue.posix=Lt.posix=Ue;var ys=ji?Lt.normalize:Ue.normalize,ar=ji?Lt.isAbsolute:Ue.isAbsolute,He=ji?Lt.join:Ue.join,hT=ji?Lt.resolve:Ue.resolve,ma=ji?Lt.relative:Ue.relative,Ai=ji?Lt.dirname:Ue.dirname,dt=ji?Lt.basename:Ue.basename,id=ji?Lt.extname:Ue.extname,$J=ji?Lt.format:Ue.format,DJ=ji?Lt.parse:Ue.parse,PJ=ji?Lt.toNamespacedPath:Ue.toNamespacedPath,vt=ji?Lt.sep:Ue.sep,S5=ji?Lt.delimiter:Ue.delimiter;function dT(e){return e}var fT=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=dT):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}},Zt=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}};function rd(e){return!e||typeof e!="string"?!0:e.trim().length===0}var pT=/{([^}]+)}/g;function k5(e,t){return Object.keys(t).length===0?e:e.replace(pT,(i,r)=>t[r]??i)}function ln(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function gT(e,t){let i=0,r=e.indexOf(t);for(;r!==-1;)i++,r=e.indexOf(t,r+t.length);return i}function mT(e,t){if(!e||!t)return e;const i=t.length;if(i===0||e.length===0)return e;let r=0;for(;e.indexOf(t,r)===r;)r=r+i;return e.substring(r)}function un(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(i===0||r===0)return e;let s=r,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+i!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function vT(e){return e.replace(/\*/g,"")}function I5(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=ln(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)}function C5(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function $5(e){return e.split(/\r\n|\r|\n/)}function m1(e){for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function wT(e,t=e.length-1){for(let i=t;i>=0;i--){const r=e.charCodeAt(i);if(r!==32&&r!==9)return i}return-1}function io(e,t){return e<t?-1:e>t?1:0}function v1(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){const c=e.charCodeAt(i),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function w1(e,t){return ll(e,t,0,e.length,0,t.length)}function ll(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){let c=e.charCodeAt(i),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return v1(e.toLowerCase(),t.toLowerCase(),i,r,s,n);D5(c)&&(c-=32),D5(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function D5(e){return e>=97&&e<=122}function P5(e){return e>=65&&e<=90}function _r(e,t){return e.length===t.length&&ll(e,t)===0}function sd(e,t){const i=t.length;return t.length>e.length?!1:ll(e,t,0,i)===0}function bT(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function nd(e){return 55296<=e&&e<=56319}function od(e){return 56320<=e&&e<=57343}function b1(e,t){return(e-55296<<10)+(t-56320)+65536}function T5(e,t,i){const r=e.charCodeAt(i);if(nd(r)&&i+1<t){const s=e.charCodeAt(i+1);if(od(s))return b1(r,s)}return r}function yT(e,t){const i=e.charCodeAt(t-1);if(od(i)&&t>1){const r=e.charCodeAt(t-2);if(nd(r))return b1(r,i)}return i}var AT=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=yT(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=T5(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},xT=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new AT(e,t)}nextGraphemeLength(){const e=j5.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(O5(r,n)){t.setOffset(s);break}r=n}return t.offset-i}prevGraphemeLength(){const e=j5.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(O5(n,r)){t.setOffset(s);break}r=n}return i-t.offset}eol(){return this.c.eol()}};function M5(e,t){return new xT(e,t).nextGraphemeLength()}var y1=void 0;function ET(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function N5(e){return y1||(y1=ET()),y1.test(e)}var ST=/^[\t\n\r\x20-\x7E]*$/;function kT(e){return ST.test(e)}var IT=/[\u2028\u2029]/;function L5(e){return IT.test(e)}var CT=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,$T=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,DT=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,TJ=new RegExp("(?:"+[CT.source,$T.source,DT.source].join("|")+")","g"),PT="\uFEFF";function TT(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function MT(e,t){if(!e||!t||e.length<t.length)return!1;const i=t.length,r=e.toLowerCase();let s=0,n=-1;for(;s<i;){const o=r.indexOf(t[s],n+1);if(o<0)return!1;n=o,s++}return!0}function R5(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function NT(e){return e.charAt(0).toUpperCase()+e.slice(1)}function LT(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function O5(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var F5;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(F5||(F5={}));var j5=class Ch{static{this.c=null}static getInstance(){return Ch.c||(Ch.c=new Ch),Ch.c}constructor(){this.d=RT()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this.d,r=i.length/3;let s=1;for(;s<=r;)if(t<i[3*s])s=2*s;else if(t>i[3*s+1])s=2*s+1;else return i[3*s+2];return 0}};function RT(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var U5;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(U5||(U5={}));var MJ=class $h{static{this.c=new Zt(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.d=new fT({getCacheKey:JSON.stringify},t=>{function i(u){const h=new Map;for(let d=0;d<u.length;d+=2)h.set(u[d],u[d+1]);return h}function r(u,h){const d=new Map(u);for(const[f,g]of h)d.set(f,g);return d}function s(u,h){if(!u)return h;const d=new Map;for(const[f,g]of u)h.has(f)&&d.set(f,g);return d}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=i(n[u]);a=s(a,h)}const c=i(n._common),l=r(c,a);return new $h(l)})}static getInstance(t){return $h.d.get(Array.from(t))}static{this.e=new Zt(()=>Object.keys($h.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return $h.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},NJ=class Dh{static c(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this.d=void 0}static e(){return this.d||(this.d=new Set([...Object.values(Dh.c())].flat())),this.d}static isInvisibleCharacter(t){return Dh.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&(Dh.isInvisibleCharacter(r)||r===32))return!0}return!1}static get codePoints(){return Dh.e()}};function hn(e){return e===47||e===92}function B5(e){return e.replace(/[\\/]/g,Ue.sep)}function OT(e){return e.indexOf("/")===-1&&(e=B5(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function A1(e,t=Ue.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if(hn(r)){if(hn(e.charCodeAt(1))&&!hn(e.charCodeAt(2))){let n=3;const o=n;for(;n<i&&!hn(e.charCodeAt(n));n++);if(o!==n&&!hn(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if(hn(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(z5(r)&&e.charCodeAt(1)===58)return hn(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<i;s++)if(hn(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var FT=/[\\/:\*\?"<>\|]/g,jT=/[/]/g,UT=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function BT(e,t=je){const i=t?FT:jT;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&UT.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function ad(e,t,i){const r=e===t;return!i||r?r:!e||!t?!1:_r(e,t)}function ro(e,t,i,r=vt){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!sd(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function z5(e){return e>=65&&e<=90||e>=97&&e<=122}function zT(e){return je?(e=un(e,vt),e.endsWith(":")&&(e+=vt)):(e=un(e,vt),e||(e=vt)),e}function HT(e){const t=ys(e);return je?e.length>3?!1:x1(t)&&(e.length===2||t.charCodeAt(2)===92):t===Ue.sep}function x1(e,t=je){return t?z5(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}function H5(e,t=je){return x1(e,t)?e[0]:void 0}var WT="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",_T="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function VT(e,t,i=8){let r="";for(let n=0;n<i;n++){let o;n===0&&je&&!t&&(i===3||i===4)?o=_T:o=WT,r+=o.charAt(Math.floor(Math.random()*o.length))}let s;return t?s=`${t}-${r}`:s=r,e?He(e,s):s}var qT=/^\w[\w\d+.-]*$/,GT=/^\//,ZT=/^\/\//;function JT(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!qT.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!GT.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(ZT.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function YT(e,t){return!e&&!t?"file":e}function QT(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==br&&(t=br+t):t=br;break}return t}var ft="",br="/",XT=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,A=class Lm{static isUri(t){return t instanceof Lm?!0:!t||typeof t!="object"?!1:typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function"}constructor(t,i,r,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ft,this.authority=t.authority||ft,this.path=t.path||ft,this.query=t.query||ft,this.fragment=t.fragment||ft):(this.scheme=YT(t,o),this.authority=i||ft,this.path=QT(this.scheme,r||ft),this.query=s||ft,this.fragment=n||ft,JT(this,o))}get fsPath(){return cd(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:r,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=ft),r===void 0?r=this.authority:r===null&&(r=ft),s===void 0?s=this.path:s===null&&(s=ft),n===void 0?n=this.query:n===null&&(n=ft),o===void 0?o=this.fragment:o===null&&(o=ft),i===this.scheme&&r===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new va(i,r,s,n,o)}static parse(t,i=!1){const r=XT.exec(t);return r?new va(r[2]||ft,ld(r[4]||ft),ld(r[5]||ft),ld(r[7]||ft),ld(r[9]||ft),i):new va(ft,ft,ft,ft,ft)}static file(t){let i=ft;if(je&&(t=t.replace(/\\/g,br)),t[0]===br&&t[1]===br){const r=t.indexOf(br,2);r===-1?(i=t.substring(2),t=br):(i=t.substring(2,r),t=t.substring(r)||br)}return new va("file",i,t,ft,ft)}static from(t,i){return new va(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return je&&t.scheme==="file"?r=Lm.file(Lt.join(cd(t,!0),...i)).path:r=Ue.join(t.path,...i),t.with({path:r})}toString(t=!1){return S1(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Lm)return t;{const i=new va(t);return i._formatted=t.external??null,i._fsPath=t._sep===W5?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function E1(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var W5=je?1:void 0,va=class extends A{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=cd(this,!1)),this._fsPath}toString(e=!1){return e?S1(this,!0):(this._formatted||(this._formatted=S1(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=W5),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},_5={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function V5(e,t,i){let r,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||i&&o===91||i&&o===93||i&&o===58)s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r!==void 0&&(r+=e.charAt(n));else{r===void 0&&(r=e.substr(0,n));const a=_5[o];a!==void 0?(s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r+=a):s===-1&&(s=n)}}return s!==-1&&(r+=encodeURIComponent(e.substring(s))),r!==void 0?r:e}function KT(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===35||r===63?(t===void 0&&(t=e.substr(0,i)),t+=_5[r]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function cd(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,je&&(i=i.replace(/\//g,"\\")),i}function S1(e,t){const i=t?KT:V5;let r="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(r+=s,r+=":"),(n||s==="file")&&(r+=br,r+=br),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?r+=i(u,!1,!1):(r+=i(u.substr(0,l),!1,!1),r+=":",r+=i(u.substr(l+1),!1,!0)),r+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?r+=i(n,!1,!0):(r+=i(n.substr(0,l),!1,!0),r+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),c&&(r+="#",r+=t?c:V5(c,!1,!1)),r}function q5(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+q5(e.substr(3)):e}}var G5=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ld(e){return e.match(G5)?e.replace(G5,t=>q5(t)):e}var q;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.vscodeChatInput="chatSessionInput",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(q||(q={}));function k1(e,t){return A.isUri(e)?_r(e.scheme,t):sd(e,t+":")}function eM(e,...t){return t.some(i=>k1(e,i))}var tM="tkn",iM=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=Ue.join(t??"/",rM(e))}getServerRootPath(){return this.f}get g(){return Ue.join(this.f,q.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return lt(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${tM}=${encodeURIComponent(s)}`),A.from({scheme:ed?this.d:q.vscodeRemoteResource,authority:`${i}:${r}`,path:this.g,query:n})}},Z5=new iM;function rM(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var sM="vs/../../node_modules",nM="vs/../../node_modules.asar",J5="vscode-app",oM=class Rm{static{this.a=J5}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===q.vscodeRemote?Z5.rewrite(t):t.scheme===q.file&&(p5||Q2===`${q.vscodeFileResource}://${Rm.a}`)?t.with({scheme:q.vscodeFileResource,authority:t.authority||Rm.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===q.vscodeFileResource?t.with({scheme:q.file,authority:t.authority!==Rm.a?t.authority:null,query:null,fragment:null}):t}b(t){if(A.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return A.joinPath(A.parse(i,!0),t);const r=He(i,t);return A.file(r)}throw new Error("Cannot determine URI for module id!")}},ud=new oM,LJ=Object.freeze({"Cache-Control":"no-cache, no-store"}),RJ=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"}),Y5;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function r(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:A.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=r;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(i,c):n[i]=c}e.addSearchParam=s})(Y5||(Y5={}));function yr(e){return cd(e,!0)}var ul=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:io(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===q.file)return ro(yr(e),yr(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(K5(e.authority,t.authority))return ro(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return A.joinPath(e,...t)}basenameOrAuthority(e){return Ar(e)||e.authority}basename(e){return Ue.basename(e.path)}extname(e){return Ue.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===q.file?t=A.file(Ai(yr(e))).path:(t=Ue.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===q.file?t=A.file(ys(yr(e))).path:t=Ue.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!K5(e.authority,t.authority))return;if(e.scheme===q.file){const s=ma(yr(e),yr(t));return je?B5(s):s}let i=e.path||"/";const r=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(i.length,r.length);s<n&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return Ue.relative(i,r)}resolvePath(e,t){if(e.scheme===q.file){const i=A.file(hT(yr(e),t));return e.with({authority:i.authority,path:i.path})}return t=OT(t),e.with({path:Ue.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&_r(e,t)}hasTrailingPathSeparator(e,t=vt){if(e.scheme===q.file){const i=yr(e);return i.length>A1(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=vt){return ex(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=vt){let i=!1;if(e.scheme===q.file){const r=yr(e);i=r!==void 0&&r.length===A1(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!ex(e,t)?e.with({path:e.path+"/"}):e}},qe=new ul(()=>!1),I1=new ul(e=>e.scheme===q.file?!Et:!0),aM=new ul(e=>!0),Q5=qe.isEqual.bind(qe),OJ=qe.isEqualOrParent.bind(qe),FJ=qe.getComparisonKey.bind(qe),C1=qe.basenameOrAuthority.bind(qe),Ar=qe.basename.bind(qe),cM=qe.extname.bind(qe),hd=qe.dirname.bind(qe),wt=qe.joinPath.bind(qe),jJ=qe.normalizePath.bind(qe),X5=qe.relativePath.bind(qe),UJ=qe.resolvePath.bind(qe),lM=qe.isAbsolutePath.bind(qe),K5=qe.isEqualAuthority.bind(qe),ex=qe.hasTrailingPathSeparator.bind(qe),BJ=qe.removeTrailingPathSeparator.bind(qe),zJ=qe.addTrailingPathSeparator.bind(qe),tx;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const r=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&r.set(a,c)});const n=i.path.substring(0,i.path.indexOf(";"));return n&&r.set(e.META_DATA_MIME,n),r}e.parseMetaData=t})(tx||(tx={}));var uM=Symbol("MicrotaskDelay");function dn(e){return!!e&&typeof e.then=="function"}function As(e){const t=new tt,i=e(t.token);let r=!1;const s=new Promise((n,o)=>{const a=t.token.onCancellationRequested(()=>{r=!0,a.dispose(),o(new mt)});Promise.resolve(i).then(c=>{a.dispose(),t.dispose(),r?t5(c)&&c.dispose():n(c)},c=>{a.dispose(),t.dispose(),o(c)})});return new class{cancel(){t.cancel(),t.dispose()}then(n,o){return s.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return s.finally(n)}}}function hM(e,t,i){return new Promise((r,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),r(i)});e.then(r,s).finally(()=>n.dispose())})}function dd(e,t){return new Promise((i,r)=>{const s=t.onCancellationRequested(()=>{s.dispose(),r(new mt)});e.then(i,r).finally(()=>s.dispose())})}function si(e){return new Promise((t,i)=>{const r=e();dn(r)?r.then(t,i):t(r)})}function ix(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}var dM=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(),new Promise((t,i)=>{this.a.then(r=>{this.a=null,t(r)},r=>{this.a=null,i(r)})})}dispose(){this.f=!0}},fM=class{constructor(){this.d=Promise.resolve(null)}queue(e){return this.d=this.d.then(()=>e(),()=>e())}},pM=class{constructor(){this.a=new Map}queue(e,t){const r=(this.a.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.a.get(e)===r&&this.a.delete(e)});return this.a.set(e,r),r}keys(){return this.a.keys()}},gM=(e,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},mM=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},rx=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((r,s)=>{this.d=r,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const r=this.g;return this.g=null,r()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===uM?mM(i):gM(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new mt),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},fd=class{constructor(e){this.a=new rx(e),this.b=new dM}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},cr=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function ni(e,t){return t?new Promise((i,r)=>{const s=setTimeout(()=>{n.dispose(),i()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),r(new mt)})}):As(i=>ni(e,i))}function $1(e,t=0,i){const r=setTimeout(()=>{e(),i&&s.dispose()},t),s=re(()=>{clearTimeout(r),i?.delete(s)});return i?.add(s),s}function vM(e,t=r=>!!r,i=null){if(e.length===0)return Promise.resolve(i);let r=e.length;const s=()=>{r=-1;for(const n of e)n.cancel?.()};return new Promise((n,o)=>{for(const a of e)a.then(c=>{--r>=0&&t(c)?(s(),n(c)):r===0&&n(i)}).catch(c=>{--r>=0&&(s(),o(c))})})}var wM=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new $}whenIdle(){return this.size>0?We.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},bM=class extends wM{constructor(){super(1)}},sx=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new Xi;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=qe){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=qe){const r=i.getComparisonKey(e);let s=this.a.get(r);if(!s){s=new bM;const n=this.f++,o=We.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new ga),this.d.set(n,o),this.a.set(r,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},nx=class{constructor(e,t){this.b=!1,this.a=void 0,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this.b=!0}cancel(){this.a!==void 0&&(clearTimeout(this.a),this.a=void 0)}cancelAndSet(e,t){if(this.b)throw new Ji("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this.a=setTimeout(()=>{this.a=void 0,e()},t)}setIfNotSet(e,t){if(this.b)throw new Ji("Calling 'setIfNotSet' on a disposed TimeoutTimer");this.a===void 0&&(this.a=setTimeout(()=>{this.a=void 0,e()},t))}},ox=class{constructor(){this.g=void 0,this.j=!1}cancel(){this.g?.dispose(),this.g=void 0}cancelAndSet(e,t,i=globalThis){if(this.j)throw new Ji("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.g=re(()=>{i.clearInterval(r),this.g=void 0})}dispose(){this.cancel(),this.j=!0}},Vr=class{constructor(e,t){this.b=void 0,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=void 0)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=void 0,this.a&&this.h()}h(){this.a?.()}},ax=class{constructor(e,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.a=e,this.b=t,this.d=0,this.f=void 0,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=void 0)}schedule(e=this.b){e%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${e}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(e/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==void 0}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=void 0,this.a?.())}},yM=class extends Vr{constructor(e,t){super(e,t),this.j=[]}work(e){this.j.push(e),this.isScheduled()||this.schedule()}h(){const e=this.j;this.j=[],this.a?.(e)}dispose(){this.j=[],super.dispose()}},cx=class extends te{constructor(e,t){super(),this.h=e,this.j=t,this.a=[],this.b=this.B(new Hr),this.f=!1,this.g=0}get pending(){return this.a.length}work(e){if(this.f)return!1;if(typeof this.h.maxBufferedWork=="number"){if(this.b.value){if(this.pending+e.length>this.h.maxBufferedWork)return!1}else if(this.pending+e.length-this.h.maxWorkChunkSize>this.h.maxBufferedWork)return!1}for(const i of e)this.a.push(i);const t=Date.now()-this.g;return!this.b.value&&(!this.h.waitThrottleDelayBetweenWorkUnits||t>=this.h.throttleDelay)?this.m():!this.b.value&&this.h.waitThrottleDelayBetweenWorkUnits&&this.r(Math.max(this.h.throttleDelay-t,0)),!0}m(){this.g=Date.now(),this.j(this.a.splice(0,this.h.maxWorkChunkSize)),this.a.length>0&&this.r()}r(e=this.h.throttleDelay){this.b.value=new Vr(()=>{this.b.clear(),this.m()},e),this.b.value.schedule()}dispose(){super.dispose(),this.a.length=0,this.f=!0}},lx,pd;(function(){const e=globalThis;typeof e.requestIdleCallback!="function"||typeof e.cancelIdleCallback!="function"?pd=(t,i,r)=>{m5(()=>{if(s)return;const n=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let s=!1;return{dispose(){s||(s=!0)}}}:pd=(t,i,r)=>{const s=t.requestIdleCallback(i,typeof r=="number"?{timeout:r}:void 0);let n=!1;return{dispose(){n||(n=!0,t.cancelIdleCallback(s))}}},lx=(t,i)=>pd(globalThis,t,i)})();var AM=class{constructor(e,t){this.l=!1,this.g=()=>{try{this.m=t()}catch(i){this.o=i}finally{this.l=!0}},this.j=pd(e,()=>this.g())}dispose(){this.j.dispose()}get value(){if(this.l||(this.j.dispose(),this.g()),this.o)throw this.o;return this.m}get isInitialized(){return this.l}},xM=class extends AM{constructor(e){super(globalThis,e)}};async function EM(e,t,i){let r;for(let s=0;s<i;s++)try{return await e()}catch(n){r=n,await ni(t)}throw r}var ux;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(ux||(ux={}));var Xi=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}settleWith(e){return e.then(t=>this.complete(t),t=>this.error(t))}cancel(){return this.error(new mt)}},fn;(function(e){async function t(r){let s;const n=await Promise.all(r.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function i(r){return new Promise(async(s,n)=>{try{await r(s,n)}catch(o){n(o)}})}e.withAsyncBody=i})(fn||(fn={}));var hx;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(hx||(hx={}));var hl=class ir{static fromArray(t){return new ir(i=>{i.emitMany(t)})}static fromPromise(t){return new ir(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new ir(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new ir(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=ir.fromArray([])}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new $,queueMicrotask(async()=>{const r={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(r)),this.k()}catch(s){this.l(s)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await We.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new ir(async r=>{for await(const s of t)r.emitOne(i(s))})}map(t){return ir.map(this,t)}static filter(t,i){return new ir(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return ir.filter(this,t)}static coalesce(t){return ir.filter(t,i=>!!i)}coalesce(){return ir.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return ir.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},D1=class{constructor(e){this.a=new Xi,this.b=new hl(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=s=>r.reject(s),this.f=s=>r.emitOne(s),this.g=s=>r.emitMany(s),this.a.p},e);let t,i;this.d=r=>{t||(t=r)},this.f=r=>{i||(i=[]),i.push(r)},this.g=r=>{i?r.forEach(s=>i.push(s)):i=r.slice()}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}emitMany(e){this.g(e)}};function gd(e,t){return new SM(e,t)}var SM=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?lt(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let i;switch(e){case"data":i=this.c.data;break;case"end":i=this.c.end;break;case"error":i=this.c.error;break}if(i){const r=i.indexOf(t);r>=0&&i.splice(r,1)}}j(){if(this.b.data.length===0)return;if(typeof this.e=="function"){const t=this.e(this.b.data);this.g(t)}else for(const t of this.b.data)this.g(t);this.b.data.length=0;const e=[...this.d];this.d.length=0,e.forEach(t=>t())}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function kM(e,t){const i=[];let r;for(;(r=e.read())!==null;)i.push(r);return t(i)}function IM(e,t){return new Promise((i,r)=>{const s=[];P1(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?r(n):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})})}function P1(e,t,i){e.on("error",r=>{i?.isCancellationRequested||t.onError(r)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",r=>{i?.isCancellationRequested||t.onData(r)})}function CM(e,t){const i=gd(t);return i.end(e),i}function $M(e,t,i){const r=gd(i);return P1(e,{onData:s=>r.write(t.data(s)),onError:s=>r.error(t.error?t.error(s):s),onEnd:()=>r.end()}),r}var dl=typeof Buffer<"u",DM=new Zt(()=>new Uint8Array(256)),T1,M1,_=class pr{static alloc(t){return dl?new pr(Buffer.allocUnsafe(t)):new pr(new Uint8Array(t))}static wrap(t){return dl&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new pr(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&dl?new pr(Buffer.from(t)):(T1||(T1=new TextEncoder),new pr(T1.encode(t)))}static fromByteArray(t){const i=pr.alloc(t.length);for(let r=0,s=t.length;r<s;r++)i.buffer[r]=t[r];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let n=0,o=t.length;n<o;n++)i+=t[n].byteLength}const r=pr.alloc(i);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];r.set(a,s),s+=a.byteLength}return r}static isNativeBuffer(t){return dl&&Buffer.isBuffer(t)}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=pr.alloc(this.byteLength);return t.set(this),t}toString(){return dl?this.buffer.toString():(M1||(M1=new TextDecoder),M1.decode(this.buffer))}slice(t,i){return new pr(this.buffer.subarray(t,i))}set(t,i){if(t instanceof pr)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return md(this.buffer,t)}writeUInt32BE(t,i){vd(this.buffer,t,i)}readUInt32LE(t){return MM(this.buffer,t)}writeUInt32LE(t,i){NM(this.buffer,t,i)}readUInt8(t){return LM(this.buffer,t)}writeUInt8(t,i){RM(this.buffer,t,i)}indexOf(t,i=0){return dx(this.buffer,t instanceof pr?t.buffer:t,i)}equals(t){return this===t?!0:this.byteLength!==t.byteLength?!1:this.buffer.every((i,r)=>i===t.buffer[r])}};function dx(e,t,i=0){const r=t.byteLength,s=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0]);if(r>s-i)return-1;const n=DM.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function PM(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function TM(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function md(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function vd(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function MM(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function NM(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function LM(e,t){return e[t]}function RM(e,t,i){e[i]=t}function OM(e){return kM(e,t=>_.concat(t))}function FM(e){return CM(e,t=>_.concat(t))}function jM(e){return $M(e,{data:t=>typeof t=="string"?_.fromString(t):_.wrap(t)},t=>_.concat(t))}function wa(e){let t=0,i=0,r=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(i){case 3:s[r++]=t|a,i=0;break;case 2:s[r++]=t|a>>>2,t=a<<6,i=3;break;case 1:s[r++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=r;for(;i>0;)n(0);return _.wrap(s).slice(0,o)}var UM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function fl({buffer:e},t=!0,i=!1){const r=i?BM:UM;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[(c<<2|l>>>6)&63],s+=r[l&63]}if(n===1){const a=e[o+0];s+=r[a>>>2],s+=r[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[c<<2&63],t&&(s+="=")}return s}var fx="0123456789abcdef";function px({buffer:e}){let t="";for(let i=0;i<e.length;i++){const r=e[i];t+=fx[r>>>4],t+=fx[r&15]}return t}function zM(e){if(e.length%2!==0)throw new SyntaxError("Hex string must have an even length");const t=new Uint8Array(e.length>>1);for(let i=0;i<e.length;)t[i>>1]=gx(e,i++)<<4|gx(e,i++);return _.wrap(t)}function gx(e,t){const i=e.charCodeAt(t);if(i>=48&&i<=57)return i-48;if(i>=97&&i<=102)return i-87;if(i>=65&&i<=70)return i-55;throw new SyntaxError(`Invalid hex character at position ${t}`)}function N1(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function i(s,n){t.push(s,n?.startTime??Date.now())}function r(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:i,getMarks:r}}function HM(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?N1():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=(performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart)??0);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return N1(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),N1()}function WM(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=HM()),e.MonacoPerformanceMarks}var mx=WM(globalThis),St=mx.mark,_M=mx.getMarks,wd={};XP(wd,{Promises:()=>Qe,RimRafMode:()=>so,SymlinkSupport:()=>xi,configureFlushOnWrite:()=>O1,realcase:()=>F1,realpathSync:()=>kx,whenDeleted:()=>KM,writeFileSync:()=>rN});import*as Oe from"fs";import{tmpdir as VM}from"os";import{promisify as pl}from"util";var qM=new tl(1e4);function bd(e){return wx(e,"NFC",qM)}var GM=new tl(1e4);function vx(e){return wx(e,"NFD",GM)}var ZM=/[^\u0000-\u0080]/;function wx(e,t,i){if(!e)return e;const r=i.get(e);if(r)return r;let s;return ZM.test(e)?s=e.normalize(t):s=e,i.set(e,s),s}var so;(function(e){e[e.UNLINK=0]="UNLINK",e[e.MOVE=1]="MOVE"})(so||(so={}));async function bx(e,t=so.UNLINK,i){if(HT(e))throw new Error("rimraf - will refuse to recursively delete root");return t===so.UNLINK?L1(e):JM(e,i)}async function JM(e,t=VT(VM())){try{try{await Oe.promises.rename(e,t)}catch(i){return i.code==="ENOENT"?void 0:L1(e)}L1(t).catch(i=>{})}catch(i){if(i.code!=="ENOENT")throw i}}async function L1(e){return Oe.promises.rm(e,{recursive:!0,force:!0,maxRetries:3})}async function yd(e,t){return QM(await(t?YM(e):Oe.promises.readdir(e)))}async function YM(e){try{return await Oe.promises.readdir(e,{withFileTypes:!0})}catch(r){console.warn("[node.js fs] readdir with filetypes failed with error: ",r)}const t=[],i=await yd(e);for(const r of i){let s=!1,n=!1,o=!1;try{const a=await Oe.promises.lstat(He(e,r));s=a.isFile(),n=a.isDirectory(),o=a.isSymbolicLink()}catch(a){console.warn("[node.js fs] unexpected error from lstat after readdir: ",a)}t.push({name:r,isFile:()=>s,isDirectory:()=>n,isSymbolicLink:()=>o})}return t}function QM(e){return e.map(t=>typeof t=="string"?Ft?bd(t):t:(t.name=Ft?bd(t.name):t.name,t))}async function XM(e){const t=await yd(e),i=[];for(const r of t)await xi.existsDirectory(He(e,r))&&i.push(r);return i}function KM(e,t=1e3){return new Promise(i=>{let r=!1;const s=setInterval(()=>{r||(r=!0,Oe.access(e,n=>{r=!1,n&&(clearInterval(s),i(void 0))}))},t)})}var xi;(function(e){async function t(s){let n;try{if(n=await Oe.promises.lstat(s),!n.isSymbolicLink())return{stat:n}}catch{}try{return{stat:await Oe.promises.stat(s),symbolicLink:n?.isSymbolicLink()?{dangling:!1}:void 0}}catch(o){if(o.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};if(je&&o.code==="EACCES")try{return{stat:await Oe.promises.stat(await Oe.promises.readlink(s)),symbolicLink:{dangling:!1}}}catch(a){if(a.code==="ENOENT"&&n)return{stat:n,symbolicLink:{dangling:!0}};throw a}throw o}}e.stat=t;async function i(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isFile()&&o?.dangling!==!0}catch{}return!1}e.existsFile=i;async function r(s){try{const{stat:n,symbolicLink:o}=await e.stat(s);return n.isDirectory()&&o?.dangling!==!0}catch{}return!1}e.existsDirectory=r})(xi||(xi={}));var eN=new sx;function tN(e,t,i){return eN.queueFor(A.file(e),()=>{const r=yx(i);return new Promise((s,n)=>iN(e,t,r,o=>o?n(o):s()))},I1)}var R1=!0;function O1(e){R1=e}function iN(e,t,i,r){if(!R1)return Oe.writeFile(e,t,{mode:i.mode,flag:i.flag},r);Oe.open(e,i.flag,i.mode,(s,n)=>{if(s)return r(s);Oe.writeFile(n,t,o=>{if(o)return Oe.close(n,()=>r(o));Oe.fdatasync(n,a=>(a&&(console.warn("[node.js fs] fdatasync is now disabled for this session because it failed: ",a),O1(!1)),Oe.close(n,c=>r(c))))})})}function rN(e,t,i){const r=yx(i);if(!R1)return Oe.writeFileSync(e,t,{mode:r.mode,flag:r.flag});const s=Oe.openSync(e,r.flag,r.mode);try{Oe.writeFileSync(s,t);try{Oe.fdatasyncSync(s)}catch(n){console.warn("[node.js fs] fdatasyncSync is now disabled for this session because it failed: ",n),O1(!1)}}finally{Oe.closeSync(s)}}function yx(e){return e?{mode:typeof e.mode=="number"?e.mode:438,flag:typeof e.flag=="string"?e.flag:"w"}:{mode:438,flag:"w"}}async function sN(e,t,i=6e4){if(e!==t)try{je&&typeof i=="number"?await Ax(e,t,Date.now(),i):await Oe.promises.rename(e,t)}catch(r){if(e.toLowerCase()!==t.toLowerCase()&&r.code==="EXDEV"||e.endsWith("."))await xx(e,t,{preserveSymlinks:!1}),await bx(e,so.MOVE);else throw r}}async function Ax(e,t,i,r,s=0){try{return await Oe.promises.rename(e,t)}catch(n){if(n.code!=="EACCES"&&n.code!=="EPERM"&&n.code!=="EBUSY")throw n;if(Date.now()-i>=r)throw console.error(`[node.js fs] rename failed after ${s} retries with error: ${n}`),n;if(s===0){let o=!1;try{const{stat:a}=await xi.stat(t);a.isFile()||(o=!0)}catch{}if(o)throw n}return await ni(Math.min(100,s*10)),Ax(e,t,i,r,s+1)}}async function xx(e,t,i){return Sx(e,t,{root:{source:e,target:t},options:i,handledSourcePaths:new Set})}var Ex=511;async function Sx(e,t,i){if(i.handledSourcePaths.has(e))return;i.handledSourcePaths.add(e);const{stat:r,symbolicLink:s}=await xi.stat(e);if(s){if(i.options.preserveSymlinks)try{return await aN(e,t,i)}catch{}if(s.dangling)return}return r.isDirectory()?nN(e,t,r.mode&Ex,i):oN(e,t,r.mode&Ex)}async function nN(e,t,i,r){await Oe.promises.mkdir(t,{recursive:!0,mode:i});const s=await yd(e);for(const n of s)await Sx(He(e,n),He(t,n),r)}async function oN(e,t,i){await Oe.promises.copyFile(e,t),await Oe.promises.chmod(t,i)}async function aN(e,t,i){let r=await Oe.promises.readlink(e);ro(r,i.root.source,!Et)&&(r=He(i.root.target,r.substr(i.root.source.length+1))),await Oe.promises.symlink(r,t)}async function F1(e,t){if(Et)return e;const i=Ai(e);if(e===i)return e;const r=(dt(e)||e).toLowerCase();try{if(t?.isCancellationRequested)return null;const n=(await Qe.readdir(i)).filter(o=>o.toLowerCase()===r);if(n.length===1){const o=await F1(i,t);if(o)return He(o,n[0])}else if(n.length>1){const o=n.indexOf(r);if(o>=0){const a=await F1(i,t);if(a)return He(a,n[o])}}}catch{}return null}async function cN(e){try{return await pl(Oe.realpath)(e)}catch{const i=Ix(e);return await Oe.promises.access(i,Oe.constants.R_OK),i}}function kx(e){try{return Oe.realpathSync(e)}catch{const i=Ix(e);return Oe.accessSync(i,Oe.constants.R_OK),i}}function Ix(e){return un(ys(e),vt)}var Qe=new class{get read(){return(e,t,i,r,s)=>new Promise((n,o)=>{Oe.read(e,t,i,r,s,(a,c,l)=>a?o(a):n({bytesRead:c,buffer:l}))})}get write(){return(e,t,i,r,s)=>new Promise((n,o)=>{Oe.write(e,t,i,r,s,(a,c,l)=>a?o(a):n({bytesWritten:c,buffer:l}))})}get fdatasync(){return pl(Oe.fdatasync)}get open(){return pl(Oe.open)}get close(){return pl(Oe.close)}get ftruncate(){return pl(Oe.ftruncate)}async exists(e){try{return await Oe.promises.access(e),!0}catch{return!1}}get readdir(){return yd}get readDirsInDir(){return XM}get writeFile(){return tN}get rm(){return bx}get rename(){return sN}get copy(){return xx}get realpath(){return cN}};function Cx(e){return(t,i,r)=>{let s=null,n=null;if(typeof r.value=="function"?(s="value",n=r.value):typeof r.get=="function"&&(s="get",n=r.get),!n||typeof i=="symbol")throw new Error("not supported");r[s]=e(n,i)}}function $x(e,t,i){let r=null,s=null;if(typeof i.value=="function"?(r="value",s=i.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof i.get=="function"&&(r="get",s=i.get),!s)throw new Error("not supported");const n=`$memoize$${t}`;i[r]=function(...o){return this.hasOwnProperty(n)||Object.defineProperty(this,n,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[n]}}function Ad(e,t,i){return Cx((r,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{r.apply(this,a),this[o]=i?i():void 0},e)}})}function lN(e,t,i){return Cx((r,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}function uN(e){return JSON.stringify(e,hN)}function Dx(e){let t=JSON.parse(e);return t=Jt(t),t}function hN(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function Jt(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return A.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof _||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Jt(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Jt(e[i],t+1))}return e}var Px;(function(e){e[e.Promise=100]="Promise",e[e.PromiseCancel=101]="PromiseCancel",e[e.EventListen=102]="EventListen",e[e.EventDispose=103]="EventDispose"})(Px||(Px={}));function Tx(e){switch(e){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}var Mx;(function(e){e[e.Initialize=200]="Initialize",e[e.PromiseSuccess=201]="PromiseSuccess",e[e.PromiseError=202]="PromiseError",e[e.PromiseErrorObj=203]="PromiseErrorObj",e[e.EventFire=204]="EventFire"})(Mx||(Mx={}));function Nx(e){switch(e){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}var no;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Idle=1]="Idle"})(no||(no={}));function ba(e){let t=0;for(let i=0;;i+=7){const r=e.read(1);if(t|=(r.buffer[0]&127)<<i,!(r.buffer[0]&128))return t}}var dN=pn(0);function ya(e,t){if(t===0){e.write(dN);return}let i=0;for(let s=t;s!==0;s=s>>>7)i++;const r=_.alloc(i);for(let s=0;t!==0;s++)r.buffer[s]=t&127,t=t>>>7,t>0&&(r.buffer[s]|=128);e.write(r)}var fN=class{constructor(e){this.b=e,this.a=0}read(e){const t=this.b.slice(this.a,this.a+e);return this.a+=t.byteLength,t}},pN=class{constructor(){this.a=[]}get buffer(){return _.concat(this.a)}write(e){this.a.push(e)}},gi;(function(e){e[e.Undefined=0]="Undefined",e[e.String=1]="String",e[e.Buffer=2]="Buffer",e[e.VSBuffer=3]="VSBuffer",e[e.Array=4]="Array",e[e.Object=5]="Object",e[e.Int=6]="Int"})(gi||(gi={}));function pn(e){const t=_.alloc(1);return t.writeUInt8(e,0),t}var oo={Undefined:pn(gi.Undefined),String:pn(gi.String),Buffer:pn(gi.Buffer),VSBuffer:pn(gi.VSBuffer),Array:pn(gi.Array),Object:pn(gi.Object),Uint:pn(gi.Int)};function j1(e,t){if(typeof t>"u")e.write(oo.Undefined);else if(typeof t=="string"){const i=_.fromString(t);e.write(oo.String),ya(e,i.byteLength),e.write(i)}else if(_.isNativeBuffer(t)){const i=_.wrap(t);e.write(oo.Buffer),ya(e,i.byteLength),e.write(i)}else if(t instanceof _)e.write(oo.VSBuffer),ya(e,t.byteLength),e.write(t);else if(Array.isArray(t)){e.write(oo.Array),ya(e,t.length);for(const i of t)j1(e,i)}else if(typeof t=="number"&&(t|0)===t)e.write(oo.Uint),ya(e,t);else{const i=_.fromString(JSON.stringify(t));e.write(oo.Object),ya(e,i.byteLength),e.write(i)}}function U1(e){switch(e.read(1).readUInt8(0)){case gi.Undefined:return;case gi.String:return e.read(ba(e)).toString();case gi.Buffer:return e.read(ba(e)).buffer;case gi.VSBuffer:return e.read(ba(e));case gi.Array:{const i=ba(e),r=[];for(let s=0;s<i;s++)r.push(U1(e));return r}case gi.Object:return JSON.parse(e.read(ba(e)).toString());case gi.Int:return ba(e)}}var Lx;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(Lx||(Lx={}));var Rx=class{constructor(e,t=null){this.l=e,this.a=!1,this.b=no.Uninitialized,this.d=new Set,this.f=new Map,this.g=0,this.k=new $,this.onDidInitialize=this.k.event,this.h=this.l.onMessage(i=>this.s(i)),this.j=t}getChannel(e){const t=this;return{call(i,r,s){return t.a?Promise.reject(new mt):t.m(e,i,r,s)},listen(i,r){return t.a?We.None:t.o(e,i,r)}}}m(e,t,i,r=Je.None){const s=this.g++,o={id:s,type:100,channelName:e,name:t,arg:i};if(r.isCancellationRequested)return Promise.reject(new mt);let a,c;return new Promise((u,h)=>{if(r.isCancellationRequested)return h(new mt);const d=()=>{const v=b=>{switch(b.type){case 201:this.f.delete(s),u(b.data);break;case 202:{this.f.delete(s);const x=new Error(b.data.message);x.stack=Array.isArray(b.data.stack)?b.data.stack.join(`
`):b.data.stack,x.name=b.data.name,h(x);break}case 203:this.f.delete(s),h(b.data);break}};this.f.set(s,v),this.p(o)};let f=null;this.b===no.Idle?d():(f=As(v=>this.u()),f.then(()=>{f=null,d()}));const g=()=>{f?(f.cancel(),f=null):this.p({id:s,type:101}),h(new mt)};a=r.onCancellationRequested(g),c={dispose:Vh(()=>{g(),a.dispose()})},this.d.add(c)}).finally(()=>{a?.dispose(),this.d.delete(c)})}o(e,t,i){const r=this.g++,n={id:r,type:102,channelName:e,name:t,arg:i};let o=null;const a=new $({onWillAddFirstListener:()=>{const l=()=>{this.d.add(a),this.p(n)};this.b===no.Idle?l():(o=As(u=>this.u()),o.then(()=>{o=null,l()}))},onDidRemoveLastListener:()=>{o?(o.cancel(),o=null):(this.d.delete(a),this.p({id:r,type:103}))}}),c=l=>a.fire(l.data);return this.f.set(r,c),a.event}p(e){switch(e.type){case 100:case 102:{const t=this.q([e.type,e.id,e.channelName,e.name],e.arg);this.j?.logOutgoing(t,e.id,0,`${Tx(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{const t=this.q([e.type,e.id]);this.j?.logOutgoing(t,e.id,0,Tx(e.type));return}}}q(e,t=void 0){const i=new pN;return j1(i,e),j1(i,t),this.r(i.buffer)}r(e){try{return this.l.send(e),e.byteLength}catch{return 0}}s(e){const t=new fN(e),i=U1(t),r=U1(t),s=i[0];switch(s){case 200:return this.j?.logIncoming(e.byteLength,0,0,Nx(s)),this.t({type:i[0]});case 201:case 202:case 204:case 203:return this.j?.logIncoming(e.byteLength,i[1],0,Nx(s),r),this.t({type:i[0],id:i[1],data:r})}}t(e){if(e.type===200){this.b=no.Idle,this.k.fire();return}this.f.get(e.id)?.(e)}get onDidInitializePromise(){return We.toPromise(this.onDidInitialize)}u(){return this.b===no.Idle?Promise.resolve():this.onDidInitializePromise}dispose(){this.a=!0,this.h&&(this.h.dispose(),this.h=null),wr(this.d.values()),this.d.clear()}};__decorate([$x],Rx.prototype,"onDidInitializePromise",null);function gN(e){let t=!1;return{call(i,r,s){return t?e.call(i,r,s):ni(0).then(()=>t=!0).then(()=>e.call(i,r,s))},listen(i,r){if(t)return e.listen(i,r);const s=new z2;return ni(0).then(()=>t=!0).then(()=>s.input=e.listen(i,r)),s.event}}}var B1;(function(e){function t(n,o,a){const c=n,l=a&&a.disableMarshalling,u=new Map;for(const h in c)r(h)&&u.set(h,We.buffer(c[h],!0,void 0,o));return new class{listen(h,d,f){const g=u.get(d);if(g)return g;const v=c[d];if(typeof v=="function"){if(s(d))return v.call(c,f);if(r(d))return u.set(d,We.buffer(c[d],!0,void 0,o)),u.get(d)}throw new vr(`Event not found: ${d}`)}call(h,d,f){const g=c[d];if(typeof g=="function"){if(!l&&Array.isArray(f))for(let b=0;b<f.length;b++)f[b]=Jt(f[b]);let v=g.apply(c,f);return v instanceof Promise||(v=Promise.resolve(v)),v}throw new vr(`Method not found: ${d}`)}}}e.fromService=t;function i(n,o){const a=o&&o.disableMarshalling;return new Proxy({},{get(c,l){if(typeof l=="string")return o?.properties?.has(l)?o.properties.get(l):s(l)?function(u){return n.listen(l,u)}:r(l)?n.listen(l):async function(...u){let h;o&&!Dt(o.context)?h=[o.context,...u]:h=u;const d=await n.call(l,h);return a?d:Jt(d)};throw new vr(`Property not found: ${String(l)}`)}})}e.toService=i;function r(n){return n[0]==="o"&&n[1]==="n"&&P5(n.charCodeAt(2))}function s(n){return/^onDynamic/.test(n)&&P5(n.charCodeAt(9))}})(B1||(B1={}));var Ox;(function(e){e.Created="created",e.Read="read",e.Write="write",e.Open="open",e.Error="error",e.Close="close",e.BrowserWebSocketBlobReceived="browserWebSocketBlobReceived",e.NodeEndReceived="nodeEndReceived",e.NodeEndSent="nodeEndSent",e.NodeDrainBegin="nodeDrainBegin",e.NodeDrainEnd="nodeDrainEnd",e.zlibInflateError="zlibInflateError",e.zlibInflateData="zlibInflateData",e.zlibInflateInitialWrite="zlibInflateInitialWrite",e.zlibInflateInitialFlushFired="zlibInflateInitialFlushFired",e.zlibInflateWrite="zlibInflateWrite",e.zlibInflateFlushFired="zlibInflateFlushFired",e.zlibDeflateError="zlibDeflateError",e.zlibDeflateData="zlibDeflateData",e.zlibDeflateWrite="zlibDeflateWrite",e.zlibDeflateFlushFired="zlibDeflateFlushFired",e.WebSocketNodeSocketWrite="webSocketNodeSocketWrite",e.WebSocketNodeSocketPeekedHeader="webSocketNodeSocketPeekedHeader",e.WebSocketNodeSocketReadHeader="webSocketNodeSocketReadHeader",e.WebSocketNodeSocketReadData="webSocketNodeSocketReadData",e.WebSocketNodeSocketUnmaskedData="webSocketNodeSocketUnmaskedData",e.WebSocketNodeSocketDrainBegin="webSocketNodeSocketDrainBegin",e.WebSocketNodeSocketDrainEnd="webSocketNodeSocketDrainEnd",e.ProtocolHeaderRead="protocolHeaderRead",e.ProtocolMessageRead="protocolMessageRead",e.ProtocolHeaderWrite="protocolHeaderWrite",e.ProtocolMessageWrite="protocolMessageWrite",e.ProtocolWrite="protocolWrite"})(Ox||(Ox={}));var xd;(function(e){e.enableDiagnostics=!1,e.records=[];const t=new WeakMap;let i=0;function r(n,o){if(!t.has(n)){const a=String(++i);t.set(n,a)}return t.get(n)}function s(n,o,a,c){if(!e.enableDiagnostics)return;const l=r(n,o);if(c instanceof _||c instanceof Uint8Array||c instanceof ArrayBuffer||ArrayBuffer.isView(c)){const u=_.alloc(c.byteLength);u.set(c),e.records.push({timestamp:Date.now(),id:l,label:o,type:a,buff:u})}else e.records.push({timestamp:Date.now(),id:l,label:o,type:a,data:c})}e.traceSocketEvent=s})(xd||(xd={}));var Fx;(function(e){e[e.NodeSocketCloseEvent=0]="NodeSocketCloseEvent",e[e.WebSocketCloseEvent=1]="WebSocketCloseEvent"})(Fx||(Fx={}));var z1=null;function gn(){return z1||(z1=_.alloc(0)),z1}var jx=class{get byteLength(){return this.b}constructor(){this.a=[],this.b=0}acceptChunk(e){this.a.push(e),this.b+=e.byteLength}read(e){return this.c(e,!0)}peek(e){return this.c(e,!1)}c(e,t){if(e===0)return gn();if(e>this.b)throw new Error("Cannot read so many bytes!");if(this.a[0].byteLength===e){const n=this.a[0];return t&&(this.a.shift(),this.b-=e),n}if(this.a[0].byteLength>e){const n=this.a[0].slice(0,e);return t&&(this.a[0]=this.a[0].slice(e),this.b-=e),n}const i=_.alloc(e);let r=0,s=0;for(;e>0;){const n=this.a[s];if(n.byteLength>e){const o=n.slice(0,e);i.set(o,r),r+=e,t&&(this.a[s]=n.slice(e),this.b-=e),e-=e}else i.set(n,r),r+=n.byteLength,t?(this.a.shift(),this.b-=n.byteLength):s++,e-=n.byteLength}return i}},Ux;(function(e){e[e.None=0]="None",e[e.Regular=1]="Regular",e[e.Control=2]="Control",e[e.Ack=3]="Ack",e[e.Disconnect=5]="Disconnect",e[e.ReplayRequest=6]="ReplayRequest",e[e.Pause=7]="Pause",e[e.Resume=8]="Resume",e[e.KeepAlive=9]="KeepAlive"})(Ux||(Ux={}));function Bx(e){switch(e){case 0:return"None";case 1:return"Regular";case 2:return"Control";case 3:return"Ack";case 5:return"Disconnect";case 6:return"ReplayRequest";case 7:return"PauseWriting";case 8:return"ResumeWriting";case 9:return"KeepAlive"}}var zx;(function(e){e[e.HeaderLength=13]="HeaderLength",e[e.AcknowledgeTime=2e3]="AcknowledgeTime",e[e.TimeoutTime=2e4]="TimeoutTime",e[e.ReconnectionGraceTime=108e5]="ReconnectionGraceTime",e[e.ReconnectionShortGraceTime=3e5]="ReconnectionShortGraceTime",e[e.KeepAliveSendTime=5e3]="KeepAliveSendTime"})(zx||(zx={}));var qr=class{constructor(e,t,i,r){this.type=e,this.id=t,this.ack=i,this.data=r,this.writtenTime=0}get size(){return this.data.byteLength}},Hx=class extends te{constructor(e){super(),this.f=this.B(new $),this.onMessage=this.f.event,this.g={readHead:!0,readLen:13,messageType:0,id:0,ack:0},this.a=e,this.b=!1,this.c=new jx,this.B(this.a.onData(t=>this.acceptChunk(t))),this.lastReadTime=Date.now()}acceptChunk(e){if(!(!e||e.byteLength===0))for(this.lastReadTime=Date.now(),this.c.acceptChunk(e);this.c.byteLength>=this.g.readLen;){const t=this.c.read(this.g.readLen);if(this.g.readHead)this.g.readHead=!1,this.g.readLen=t.readUInt32BE(9),this.g.messageType=t.readUInt8(0),this.g.id=t.readUInt32BE(1),this.g.ack=t.readUInt32BE(5),this.a.traceSocketEvent("protocolHeaderRead",{messageType:Bx(this.g.messageType),id:this.g.id,ack:this.g.ack,messageSize:this.g.readLen});else{const i=this.g.messageType,r=this.g.id,s=this.g.ack;if(this.g.readHead=!0,this.g.readLen=13,this.g.messageType=0,this.g.id=0,this.g.ack=0,this.a.traceSocketEvent("protocolMessageRead",t),this.f.fire(new qr(i,r,s,t)),this.b)break}}}readEntireBuffer(){return this.c.read(this.c.byteLength)}dispose(){this.b=!0,super.dispose()}},Wx=class{constructor(e){this.k=null,this.a=!1,this.b=!1,this.c=e,this.d=[],this.f=0,this.lastWriteTime=0}dispose(){try{this.flush()}catch{}this.a=!0}drain(){return this.flush(),this.c.drain()}flush(){this.m()}pause(){this.b=!0}resume(){this.b=!1,this.l()}write(e){if(this.a)return;e.writtenTime=Date.now(),this.lastWriteTime=Date.now();const t=_.alloc(13);t.writeUInt8(e.type,0),t.writeUInt32BE(e.id,1),t.writeUInt32BE(e.ack,5),t.writeUInt32BE(e.data.byteLength,9),this.c.traceSocketEvent("protocolHeaderWrite",{messageType:Bx(e.type),id:e.id,ack:e.ack,messageSize:e.data.byteLength}),this.c.traceSocketEvent("protocolMessageWrite",e.data),this.j(t,e.data)}g(e,t){const i=this.f===0;return this.d.push(e,t),this.f+=e.byteLength+t.byteLength,i}h(){const e=_.concat(this.d,this.f);return this.d.length=0,this.f=0,e}j(e,t){this.g(e,t)&&this.l()}l(){this.k||(this.k=setTimeout(()=>{this.k=null,this.m()}))}m(){if(this.f===0||this.b)return;const e=this.h();this.c.traceSocketEvent("protocolWrite",{byteLength:e.byteLength}),this.c.write(e)}},ao=class{constructor(){this.b=!1,this.c=!1,this.d=[],this.a=new $({onWillAddFirstListener:()=>{this.b=!0,queueMicrotask(()=>this.f())},onDidRemoveLastListener:()=>{this.b=!1}}),this.event=this.a.event}f(){if(!this.c){for(this.c=!0;this.b&&this.d.length>0;)this.a.fire(this.d.shift());this.c=!1}}fire(e){this.b?this.d.length>0?this.d.push(e):this.a.fire(e):this.d.push(e)}flushBuffer(){this.d=[]}},mN=class{constructor(e){this.data=e,this.next=null}},vN=class{constructor(){this.a=null,this.b=null}length(){let e=0,t=this.a;for(;t;)t=t.next,e++;return e}peek(){return this.a?this.a.data:null}toArray(){const e=[];let t=0,i=this.a;for(;i;)e[t++]=i.data,i=i.next;return e}pop(){if(this.a){if(this.a===this.b){this.a=null,this.b=null;return}this.a=this.a.next}}push(e){const t=new mN(e);if(!this.a){this.a=t,this.b=t;return}this.b.next=t,this.b=t}},wN=class hs{static{this.a=10}static{this.b=null}static getInstance(){return hs.b||(hs.b=new hs),hs.b}constructor(){this.c=[];const t=Date.now();for(let i=0;i<hs.a;i++)this.c[i]=t-1e3*i;setInterval(()=>{for(let i=hs.a;i>=1;i--)this.c[i]=this.c[i-1];this.c[0]=Date.now()},1e3)}d(){const t=Date.now(),i=(1+hs.a)*1e3;let r=0;for(let s=0;s<hs.a;s++)t-this.c[s]<=i&&r++;return 1-r/hs.a}hasHighLoad(){return this.d()>=.5}},H1=class{get unacknowledgedCount(){return this.d-this.f}constructor(e){this.v=new ao,this.onControlMessage=this.v.event,this.w=new ao,this.onMessage=this.w.event,this.x=new ao,this.onDidDispose=this.x.event,this.y=new ao,this.onSocketClose=this.y.event,this.z=new ao,this.onSocketTimeout=this.z.event,this.t=e.loadEstimator??wN.getInstance(),this.u=e.sendKeepAlive??!0,this.a=!1,this.c=new vN,this.d=0,this.f=0,this.g=null,this.h=0,this.j=0,this.k=0,this.l=null,this.n=0,this.o=Date.now(),this.s=new le,this.p=e.socket,this.q=this.s.add(new Wx(this.p)),this.r=this.s.add(new Hx(this.p)),this.s.add(this.r.onMessage(t=>this.A(t))),this.s.add(this.p.onClose(t=>this.y.fire(t))),e.initialChunk&&this.r.acceptChunk(e.initialChunk),this.u?this.m=setInterval(()=>{this.E()},5e3):this.m=null}dispose(){this.g&&(clearTimeout(this.g),this.g=null),this.l&&(clearTimeout(this.l),this.l=null),this.m&&(clearInterval(this.m),this.m=null),this.s.dispose()}drain(){return this.q.drain()}sendDisconnect(){if(!this.b){this.b=!0;const e=new qr(5,0,0,gn());this.q.write(e),this.q.flush()}}sendPause(){const e=new qr(7,0,0,gn());this.q.write(e)}sendResume(){const e=new qr(8,0,0,gn());this.q.write(e)}pauseSocketWriting(){this.q.pause()}getSocket(){return this.p}getMillisSinceLastIncomingData(){return Date.now()-this.r.lastReadTime}beginAcceptReconnection(e,t){this.a=!0,this.s.dispose(),this.s=new le,this.v.flushBuffer(),this.y.flushBuffer(),this.z.flushBuffer(),this.p.dispose(),this.n=0,this.o=Date.now(),this.p=e,this.q=this.s.add(new Wx(this.p)),this.r=this.s.add(new Hx(this.p)),this.s.add(this.r.onMessage(i=>this.A(i))),this.s.add(this.p.onClose(i=>this.y.fire(i))),this.r.acceptChunk(t)}endAcceptReconnection(){this.a=!1,this.j=this.h;const e=new qr(3,0,this.j,gn());this.q.write(e);const t=this.c.toArray();for(let i=0,r=t.length;i<r;i++)this.q.write(t[i]);this.C()}acceptDisconnect(){this.x.fire()}A(e){if(e.ack>this.f){this.f=e.ack;do{const t=this.c.peek();if(t&&t.id<=e.ack)this.c.pop();else break}while(!0)}switch(e.type){case 0:break;case 1:{if(e.id>this.h)if(e.id!==this.h+1){const t=Date.now();t-this.n>1e4&&(this.n=t,this.q.write(new qr(6,0,0,gn())))}else this.h=e.id,this.k=Date.now(),this.B(),this.w.fire(e.data);break}case 2:{this.v.fire(e.data);break}case 3:break;case 5:{this.x.fire();break}case 6:{const t=this.c.toArray();for(let i=0,r=t.length;i<r;i++)this.q.write(t[i]);this.C();break}case 7:{this.q.pause();break}case 8:{this.q.resume();break}case 9:break}}readEntireBuffer(){return this.r.readEntireBuffer()}flush(){this.q.flush()}send(e){const t=++this.d;this.j=this.h;const i=new qr(1,t,this.j,e);this.c.push(i),this.a||(this.q.write(i),this.C())}sendControl(e){const t=new qr(2,0,0,e);this.q.write(t)}B(){if(this.h<=this.j||this.l)return;const e=Date.now()-this.k;if(e>=2e3){this.D();return}this.l=setTimeout(()=>{this.l=null,this.B()},2e3-e+5)}C(){if(this.d<=this.f||this.g||this.a)return;const e=this.c.peek(),t=Date.now()-e.writtenTime,i=Date.now()-this.r.lastReadTime,r=Date.now()-this.o;if(t>=2e4&&i>=2e4&&r>=2e4&&!this.t.hasHighLoad()){this.o=Date.now(),this.z.fire({unacknowledgedMsgCount:this.c.length(),timeSinceOldestUnacknowledgedMsg:t,timeSinceLastReceivedSomeData:i});return}const s=Math.max(2e4-t,2e4-i,2e4-r,500);this.g=setTimeout(()=>{this.g=null,this.C()},s)}D(){if(this.h<=this.j)return;this.j=this.h;const e=new qr(3,0,this.j,gn());this.q.write(e)}E(){this.j=this.h;const e=new qr(9,0,this.j,gn());this.q.write(e)}};import"crypto";import"net";import{tmpdir as bN}from"os";import{createDeflateRaw as yN,createInflateRaw as AN}from"zlib";var kt=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=0,s="";return s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s}}(),xN=3e4,gl=class{traceSocketEvent(e,t){xd.traceSocketEvent(this.socket,this.debugLabel,e,t)}constructor(e,t=""){this.f=!0,this.debugLabel=t,this.socket=e,this.traceSocketEvent("created",{type:"NodeSocket"}),this.a=r=>{if(this.traceSocketEvent("error",{code:r?.code,message:r?.message}),r){if(r.code==="EPIPE")return;lt(r)}},this.socket.on("error",this.a);let i;this.b=r=>{this.traceSocketEvent("close",{hadError:r}),this.f=!1,i&&clearTimeout(i)},this.socket.on("close",this.b),this.d=()=>{this.traceSocketEvent("nodeEndReceived"),this.f=!1,i=setTimeout(()=>e.destroy(),xN)},this.socket.on("end",this.d)}dispose(){this.socket.off("error",this.a),this.socket.off("close",this.b),this.socket.off("end",this.d),this.socket.destroy()}onData(e){const t=i=>{this.traceSocketEvent("read",i),e(_.wrap(i))};return this.socket.on("data",t),{dispose:()=>this.socket.off("data",t)}}onClose(e){const t=i=>{e({type:0,hadError:i,error:void 0})};return this.socket.on("close",t),{dispose:()=>this.socket.off("close",t)}}onEnd(e){const t=()=>{e()};return this.socket.on("end",t),{dispose:()=>this.socket.off("end",t)}}write(e){if(!(this.socket.destroyed||!this.f))try{this.traceSocketEvent("write",e),this.socket.write(e.buffer,t=>{if(t){if(t.code==="EPIPE")return;lt(t)}})}catch(t){if(t.code==="EPIPE")return;lt(t)}}end(){this.traceSocketEvent("nodeEndSent"),this.socket.end()}drain(){return this.traceSocketEvent("nodeDrainBegin"),new Promise((e,t)=>{if(this.socket.bufferSize===0){this.traceSocketEvent("nodeDrainEnd"),e();return}const i=()=>{this.socket.off("close",i),this.socket.off("end",i),this.socket.off("error",i),this.socket.off("timeout",i),this.socket.off("drain",i),this.traceSocketEvent("nodeDrainEnd"),e()};this.socket.on("close",i),this.socket.on("end",i),this.socket.on("error",i),this.socket.on("timeout",i),this.socket.on("drain",i)})}},_x;(function(e){e[e.MinHeaderByteSize=2]="MinHeaderByteSize",e[e.MaxWebSocketMessageLength=262144]="MaxWebSocketMessageLength"})(_x||(_x={}));var Vx;(function(e){e[e.PeekHeader=1]="PeekHeader",e[e.ReadHeader=2]="ReadHeader",e[e.ReadBody=3]="ReadBody",e[e.Fin=4]="Fin"})(Vx||(Vx={}));var EN=class extends te{get permessageDeflate(){return this.a.permessageDeflate}get recordedInflateBytes(){return this.a.recordedInflateBytes}traceSocketEvent(e,t){this.socket.traceSocketEvent(e,t)}constructor(e,t,i,r){super(),this.f=this.B(new $),this.g=this.B(new $),this.h=!1,this.j={state:1,readLen:2,fin:0,compressed:!1,firstFrameOfMessage:!0,mask:0,opcode:0},this.socket=e,this.traceSocketEvent("created",{type:"WebSocketNodeSocket",permessageDeflate:t,inflateBytesLength:i?.byteLength||0,recordInflateBytes:r}),this.a=this.B(new SN(this,t,i,r,this.f,(s,n)=>this.m(s,n))),this.B(this.a.onError(s=>{console.error(s),lt(s),this.g.fire({type:0,hadError:!0,error:s})})),this.b=new jx,this.B(this.socket.onData(s=>this.n(s))),this.B(this.socket.onClose(async s=>{this.a.isProcessingReadQueue()&&await We.toPromise(this.a.onDidFinishProcessingReadQueue),this.g.fire(s)}))}dispose(){this.a.isProcessingWriteQueue()?this.B(this.a.onDidFinishProcessingWriteQueue(()=>{this.dispose()})):(this.socket.dispose(),super.dispose())}onData(e){return this.f.event(e)}onClose(e){return this.g.event(e)}onEnd(e){return this.socket.onEnd(e)}write(e){let t=0;for(;t<e.byteLength;)this.a.writeMessage(e.slice(t,Math.min(t+262144,e.byteLength)),{compressed:!0,opcode:2}),t+=262144}m(e,{compressed:t,opcode:i}){if(this.h)return;this.traceSocketEvent("webSocketNodeSocketWrite",e);let r=2;e.byteLength<126?r+=0:e.byteLength<2**16?r+=2:r+=8;const s=_.alloc(r),n=t?64:0,o=i&15;if(s.writeUInt8(128|n|o,0),e.byteLength<126)s.writeUInt8(e.byteLength,1);else if(e.byteLength<2**16){s.writeUInt8(126,1);let a=1;s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}else{s.writeUInt8(127,1);let a=1;s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(0,++a),s.writeUInt8(e.byteLength>>>24&255,++a),s.writeUInt8(e.byteLength>>>16&255,++a),s.writeUInt8(e.byteLength>>>8&255,++a),s.writeUInt8(e.byteLength>>>0&255,++a)}this.socket.write(_.concat([s,e]))}end(){this.h=!0,this.socket.end()}n(e){if(e.byteLength!==0){for(this.b.acceptChunk(e);this.b.byteLength>=this.j.readLen;)if(this.j.state===1){const t=this.b.peek(this.j.readLen),i=t.readUInt8(0),r=(i&128)>>>7,s=(i&64)>>>6,n=i&15,o=t.readUInt8(1),a=(o&128)>>>7,c=o&127;this.j.state=2,this.j.readLen=2+(a?4:0)+(c===126?2:0)+(c===127?8:0),this.j.fin=r,this.j.firstFrameOfMessage&&(this.j.compressed=!!s),this.j.firstFrameOfMessage=!!r,this.j.mask=0,this.j.opcode=n,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{headerSize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,opcode:this.j.opcode})}else if(this.j.state===2){const t=this.b.read(this.j.readLen),i=t.readUInt8(1),r=(i&128)>>>7;let s=i&127,n=1;s===126?s=t.readUInt8(++n)*2**8+t.readUInt8(++n):s===127&&(s=t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*0+t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n));let o=0;r&&(o=t.readUInt8(++n)*2**24+t.readUInt8(++n)*2**16+t.readUInt8(++n)*2**8+t.readUInt8(++n)),this.j.state=3,this.j.readLen=s,this.j.mask=o,this.traceSocketEvent("webSocketNodeSocketPeekedHeader",{bodySize:this.j.readLen,compressed:this.j.compressed,fin:this.j.fin,mask:this.j.mask,opcode:this.j.opcode})}else if(this.j.state===3){const t=this.b.read(this.j.readLen);this.traceSocketEvent("webSocketNodeSocketReadData",t),CN(t,this.j.mask),this.traceSocketEvent("webSocketNodeSocketUnmaskedData",t),this.j.state=1,this.j.readLen=2,this.j.mask=0,this.j.opcode<=2?this.a.acceptFrame(t,this.j.compressed,!!this.j.fin):this.j.opcode===9&&this.a.writeMessage(t,{compressed:!1,opcode:10})}}}async drain(){this.traceSocketEvent("webSocketNodeSocketDrainBegin"),this.a.isProcessingWriteQueue()&&await We.toPromise(this.a.onDidFinishProcessingWriteQueue),await this.socket.drain(),this.traceSocketEvent("webSocketNodeSocketDrainEnd")}},SN=class extends te{get permessageDeflate(){return!!(this.b&&this.f)}get recordedInflateBytes(){return this.b?this.b.recordedInflateBytes:_.alloc(0)}constructor(e,t,i,r,s,n){super(),this.n=e,this.r=s,this.s=n,this.a=this.B(new $),this.onError=this.a.event,this.g=[],this.h=[],this.j=this.B(new $),this.onDidFinishProcessingReadQueue=this.j.event,this.m=this.B(new $),this.onDidFinishProcessingWriteQueue=this.m.event,this.t=!1,this.y=!1,t?(this.b=this.B(new kN(this.n,r,i,{windowBits:15})),this.f=this.B(new IN(this.n,{windowBits:15})),this.B(this.b.onError(o=>this.a.fire(o))),this.B(this.f.onError(o=>this.a.fire(o)))):(this.b=null,this.f=null)}writeMessage(e,t){this.g.push({data:e,options:t}),this.u()}async u(){if(!this.t){for(this.t=!0;this.g.length>0;){const{data:e,options:t}=this.g.shift();if(this.f&&t.compressed){const i=await this.w(this.f,e);this.s(i,t)}else this.s(e,{...t,compressed:!1})}this.t=!1,this.m.fire()}}isProcessingWriteQueue(){return this.t}w(e,t){return new Promise((i,r)=>{e.write(t),e.flush(s=>i(s))})}acceptFrame(e,t,i){this.h.push({data:e,isCompressed:t,isLastFrameOfMessage:i}),this.z()}async z(){if(!this.y){for(this.y=!0;this.h.length>0;){const e=this.h.shift();if(this.b&&e.isCompressed){const t=await this.C(this.b,e.data,e.isLastFrameOfMessage);this.r.fire(t)}else this.r.fire(e.data)}this.y=!1,this.j.fire()}}isProcessingReadQueue(){return this.y}C(e,t,i){return new Promise((r,s)=>{e.write(t),i&&e.write(_.fromByteArray([0,0,255,255])),e.flush(n=>r(n))})}},kN=class extends te{get recordedInflateBytes(){return this.j?_.concat(this.f):_.alloc(0)}constructor(e,t,i,r){super(),this.h=e,this.j=t,this.a=this.B(new $),this.onError=this.a.event,this.f=[],this.g=[],this.b=AN(r),this.b.on("error",s=>{this.h.traceSocketEvent("zlibInflateError",{message:s?.message,code:s?.code}),this.a.fire(s)}),this.b.on("data",s=>{this.h.traceSocketEvent("zlibInflateData",s),this.g.push(_.wrap(s))}),i&&(this.h.traceSocketEvent("zlibInflateInitialWrite",i.buffer),this.b.write(i.buffer),this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateInitialFlushFired"),this.g.length=0}))}write(e){this.j&&this.f.push(e.clone()),this.h.traceSocketEvent("zlibInflateWrite",e),this.b.write(e.buffer)}flush(e){this.b.flush(()=>{this.h.traceSocketEvent("zlibInflateFlushFired");const t=_.concat(this.g);this.g.length=0,e(t)})}},IN=class extends te{constructor(e,t){super(),this.g=e,this.a=this.B(new $),this.onError=this.a.event,this.f=[],this.b=yN({windowBits:15}),this.b.on("error",i=>{this.g.traceSocketEvent("zlibDeflateError",{message:i?.message,code:i?.code}),this.a.fire(i)}),this.b.on("data",i=>{this.g.traceSocketEvent("zlibDeflateData",i),this.f.push(_.wrap(i))})}write(e){this.g.traceSocketEvent("zlibDeflateWrite",e.buffer),this.b.write(e.buffer)}flush(e){this.b.flush(2,()=>{this.g.traceSocketEvent("zlibDeflateFlushFired");let t=_.concat(this.f);this.f.length=0,t=t.slice(0,t.byteLength-4),e(t)})}};function CN(e,t){if(t===0)return;const i=e.byteLength>>>2;for(let c=0;c<i;c++){const l=e.readUInt32BE(c*4);e.writeUInt32BE(l^t,c*4)}const r=i*4,s=e.byteLength-r,n=t>>>24&255,o=t>>>16&255,a=t>>>8&255;s>=1&&e.writeUInt8(e.readUInt8(r)^n,r),s>=2&&e.writeUInt8(e.readUInt8(r+1)^o,r+1),s>=3&&e.writeUInt8(e.readUInt8(r+2)^a,r+2)}var qx=process.env.XDG_RUNTIME_DIR,$N={2:107,1:103};function DN(){const e=kt();if(process.platform==="win32")return`\\\\.\\pipe\\vscode-ipc-${e}-sock`;const t=process.platform!=="darwin"&&qx?qx:bN(),i=He(t,`vscode-ipc-${e}.sock`);return PN(i),i}function PN(e){const t=$N[X2];typeof t=="number"&&e.length>=t&&console.warn(`WARNING: IPC handle "${e}" is longer than ${t} chars, try a shorter --user-data-dir`)}function Xe(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,r])=>{t[i]=r&&typeof r=="object"?Xe(r):r}),t}function W1(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const r in i)if(Gx.call(i,r)){const s=i[r];typeof s=="object"&&!Object.isFrozen(s)&&!E2(s)&&t.push(s)}}return e}var Gx=Object.prototype.hasOwnProperty;function Aa(e,t){return _1(e,t,new Set)}function _1(e,t,i){if(Dt(e))return e;const r=t(e);if(typeof r<"u")return r;if(Array.isArray(e)){const s=[];for(const n of e)s.push(_1(n,t,i));return s}if(xt(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const s={};for(const n in e)Gx.call(e,n)&&(s[n]=_1(e[n],t,i));return i.delete(e),s}return e}function xs(e,t,i=!0){return xt(e)?(xt(t)&&Object.keys(t).forEach(r=>{r in e?i&&(xt(e[r])&&xt(t[r])?xs(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function Ei(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!Ei(e[i],t[i]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const n=[];for(r in t)n.push(r);if(n.sort(),!Ei(s,n))return!1;for(i=0;i<s.length;i++)if(!Ei(e[s[i]],t[s[i]]))return!1}return!0}function TN(e){const t=new Set;return JSON.stringify(e,(i,r)=>{if(xt(r)||Array.isArray(r)){if(t.has(r))return"[Circular]";t.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}function Zx(e,t){const i=t.toLowerCase(),r=Object.keys(e).find(s=>s.toLowerCase()===i);return r?e[r]:e[t]}function Jx(e,t){const i=Object.create(null);for(const[r,s]of Object.entries(e))t(r,s)&&(i[r]=s);return i}var Yx={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},Qx="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function MN(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of Qx)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var NN=MN();function Xx(e){let t=NN;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var Kx=new nn;Kx.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function eE(e,t,i,r,s){if(t=Xx(t),s||(s=li.first(Kx)),i.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:r+=l,i=i.substring(l,e+s.maxLen/2),eE(e,t,i,r,s)}const n=Date.now(),o=e-1-r;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=LN(t,i,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function LN(e,t,i,r){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=i&&e.lastIndex>=i)return s;if(r>0&&n>r)return null}return null}var tE;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(tE||(tE={}));var RN=8,ON=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Ke=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return Sd(e,t)}compute(e,t,i){return i}},Ed=class{constructor(e,t){this.newValue=e,this.didChange=t}};function Sd(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new Ed(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const r=Array.isArray(e)&&Array.isArray(t)&&Ri(e,t);return new Ed(t,!r)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const s=Sd(e[r],t[r]);s.didChange&&(e[r]=s.newValue,i=!0)}return new Ed(e,i)}var mn=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Sd(e,t)}validate(e){return this.defaultValue}},xa=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return Sd(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}};function K(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var we=class extends xa{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return K(e,this.defaultValue)}};function FN(e,t,i,r){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(i,s),s=Math.min(r,s),s|0)}var _e=class w3 extends xa{static clampedInt(t,i,r,s){return FN(t,i,r,s)}constructor(t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=r,o.minimum=s,o.maximum=n),super(t,i,r,o),this.minimum=s,this.maximum=n}validate(t){return w3.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Gr=class b3 extends xa{static clamp(t,i,r){return t<i?i:t>r?r:t}static float(t,i){if(typeof t=="number")return t;if(typeof t>"u")return i;const r=parseFloat(t);return isNaN(r)?i:r}constructor(t,i,r,s,n){typeof n<"u"&&(n.type="number",n.default=r),super(t,i,r,n),this.validationFn=s}validate(t){return this.validationFn(b3.float(t,this.defaultValue))}},mi=class y3 extends xa{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.default=r),super(t,i,r,s)}validate(t){return y3.string(t,this.defaultValue)}};function rt(e,t,i,r){return typeof e!="string"?t:r&&e in r?r[e]:i.indexOf(e)===-1?t:e}var it=class extends xa{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=i),super(e,t,i,s),this.c=r}validate(e){return rt(e,this.defaultValue,this.c)}},ml=class extends Ke{constructor(e,t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=r),super(e,t,i,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function jN(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var UN=class extends Ke{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[p(312,null),p(313,null),p(314,null)],default:"auto",tags:["accessibility"],description:p(315,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},BN=class extends Ke{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(28,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:p(316,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:p(317,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:K(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:K(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},iE;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(iE||(iE={}));function zN(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var xr;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(xr||(xr={}));function rE(e){switch(e){case"line":return xr.Line;case"block":return xr.Block;case"underline":return xr.Underline;case"line-thin":return xr.LineThin;case"block-outline":return xr.BlockOutline;case"underline-thin":return xr.UnderlineThin}}var HN=class extends mn{constructor(){super(153)}compute(e,t,i){const r=["monaco-editor"];return t.get(46)&&r.push(t.get(46)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(80)==="default"?r.push("mouse-default"):t.get(80)==="copy"&&r.push("mouse-copy"),t.get(121)&&r.push("showUnused"),t.get(150)&&r.push("showDeprecated"),r.join(" ")}},WN=class extends we{constructor(){super(43,"emptySelectionClipboard",!0,{description:p(318,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},_N=class extends Ke{constructor(){const e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(48,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:p(319,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[p(320,null),p(321,null),p(322,null)],description:p(323,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[p(324,null),p(325,null),p(326,null)],description:p(327,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:p(328,null),included:Ft},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:p(329,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:p(330,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[p(331,null),p(332,null)],description:p(333,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[p(334,null),p(335,null)],description:p(336,null)},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:p(337,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:K(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:K(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":rt(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":rt(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:K(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:K(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:K(t.loop,this.defaultValue.loop),history:rt(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:rt(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},VN=class Hc extends Ke{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(58,"fontLigatures",Hc.OFF,{anyOf:[{type:"boolean",description:p(338,null)},{type:"string",description:p(339,null)}],description:p(340,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Hc.OFF:t==="true"?Hc.ON:t:t?Hc.ON:Hc.OFF}},qN=class Wc extends Ke{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(61,"fontVariations",Wc.OFF,{anyOf:[{type:"boolean",description:p(341,null)},{type:"string",description:p(342,null)}],description:p(343,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Wc.OFF:t==="true"?Wc.TRANSLATE:t:t?Wc.TRANSLATE:Wc.OFF}compute(t,i,r){return t.fontInfo.fontVariationSettings}},GN=class extends mn{constructor(){super(57)}compute(e,t,i){return e.fontInfo}},ZN=class extends mn{constructor(){super(152)}compute(e,t,i){return e.inputMode==="overtype"?t.get(89):t.get(33)}},JN=class extends mn{constructor(){super(161)}compute(e,t){return e.editContextSupported&&t.get(42)}},YN=class extends mn{constructor(){super(163)}compute(e,t){return e.accessibilitySupport===2?t.get(6):t.get(5)}},QN=class extends xa{constructor(){super(59,"fontSize",Ss.fontSize,{type:"number",minimum:6,maximum:100,default:Ss.fontSize,description:p(344,null)})}validate(e){const t=Gr.float(e,this.defaultValue);return t===0?Ss.fontSize:Gr.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},XN=class _c extends Ke{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(60,"fontWeight",Ss.fontWeight,{anyOf:[{type:"number",minimum:_c.d,maximum:_c.e,errorMessage:p(345,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:_c.c}],default:Ss.fontWeight,description:p(346,null)})}validate(t){return t==="normal"||t==="bold"?t:String(_e.clampedInt(t,Ss.fontWeight,_c.d,_c.e))}},KN=class extends Ke{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[p(347,null),p(348,null),p(349,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(65,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:p(350,null)},"editor.gotoLocation.multipleDefinitions":{description:p(351,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:p(352,null),...t},"editor.gotoLocation.multipleDeclarations":{description:p(353,null),...t},"editor.gotoLocation.multipleImplementations":{description:p(354,null),...t},"editor.gotoLocation.multipleReferences":{description:p(355,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:p(356,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:p(357,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:p(358,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:p(359,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:p(360,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:rt(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??rt(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??rt(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??rt(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??rt(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??rt(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??rt(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:mi.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:mi.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:mi.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:mi.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:mi.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:mi.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},eL=class extends Ke{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(67,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:p(361,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:p(362,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:p(363,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:p(364,null)},"editor.hover.above":{type:"boolean",default:e.above,description:p(365,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),delay:_e.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:K(t.sticky,this.defaultValue.sticky),hidingDelay:_e.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:K(t.above,this.defaultValue.above)}}},sE;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(sE||(sE={}));var tL=class Om extends mn{constructor(){super(156)}compute(t,i,r){return Om.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,r=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,i-1));const n=(r+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,i){const r=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let d=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const f=t.minimap.maxColumn,g=t.minimap.size,v=t.minimap.side,b=t.verticalScrollbarWidth,x=t.viewLineCount,E=t.remainingWidth,I=t.isViewportWrapping,U=h?2:3;let j=Math.floor(n*s);const ee=j/n;let O=!1,B=!1,F=U*d,J=d/n,he=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:ne,extraLinesBeforeFirstLine:de,extraLinesBeyondLastLine:Pe,desiredRatio:ot,minimapLineCount:ke}=Om.computeContainedMinimapLineCount({viewLineCount:x,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(x/ke>1)O=!0,B=!0,d=1,F=1,J=d/n;else{let Ct=!1,_t=d+1;if(g==="fit"){const di=Math.ceil((de+x+Pe)*F);I&&a&&E<=i.stableFitRemainingWidth?(Ct=!0,_t=i.stableFitMaxMinimapScale):Ct=di>j}if(g==="fill"||Ct){O=!0;const di=d;F=Math.min(c*n,Math.max(1,Math.floor(1/ot))),I&&a&&E<=i.stableFitRemainingWidth&&(_t=i.stableFitMaxMinimapScale),d=Math.min(_t,Math.max(1,Math.floor(F/U))),d>di&&(he=Math.min(2,d/di)),J=d/n/he,j=Math.ceil(Math.max(ne,de+x+Pe)*F),I?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=E,i.stableFitMaxMinimapScale=d):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const se=Math.floor(f*J),ht=Math.min(se,Math.max(0,Math.floor((E-b-2)*J/(l+J)))+RN);let W=Math.floor(n*ht);const H=W/n;W=Math.floor(W*he);const Q=h?1:2,X=v==="left"?0:r-ht-b;return{renderMinimap:Q,minimapLeft:X,minimapWidth:ht,minimapHeightIsEditorHeight:O,minimapIsSampling:B,minimapScale:d,minimapLineHeight:F,minimapCanvasInnerWidth:W,minimapCanvasInnerHeight:j,minimapCanvasOuterWidth:H,minimapCanvasOuterHeight:ee}}static computeLayout(t,i){const r=i.outerWidth|0,s=i.outerHeight|0,n=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,h=t.get(147),d=h==="inherit"?t.get(146):h,f=d==="inherit"?t.get(142):d,g=t.get(145),v=i.isDominatedByLongLines,b=t.get(64),x=t.get(74).renderType!==0,E=t.get(75),I=t.get(115),U=t.get(93),j=t.get(79),ee=t.get(113),O=ee.verticalScrollbarSize,B=ee.verticalHasArrows,F=ee.arrowSize,J=ee.horizontalScrollbarSize,he=t.get(50),se=t.get(120)!=="never";let ht=t.get(72);he&&se&&(ht+=16);let W=0;if(x){const Rt=Math.max(o,E);W=Math.round(Rt*c)}let H=0;b&&(H=n*i.glyphMarginDecorationLaneCount);let Q=0,X=Q+H,ne=X+W,de=ne+ht;const Pe=r-H-W-ht;let ot=!1,ke=!1,Wt=-1;d==="inherit"&&v?(ot=!0,ke=!0):f==="on"||f==="bounded"?ke=!0:f==="wordWrapColumn"&&(Wt=g);const Ct=Om.c({outerWidth:r,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:I,paddingTop:U.top,paddingBottom:U.bottom,minimap:j,verticalScrollbarWidth:O,viewLineCount:u,remainingWidth:Pe,isViewportWrapping:ke},i.memory||new ON);Ct.renderMinimap!==0&&Ct.minimapLeft===0&&(Q+=Ct.minimapWidth,X+=Ct.minimapWidth,ne+=Ct.minimapWidth,de+=Ct.minimapWidth);const _t=Pe-Ct.minimapWidth,di=Math.max(1,Math.floor((_t-O-2)/a)),bi=B?F:0;return ke&&(Wt=Math.max(1,di),f==="bounded"&&(Wt=Math.min(Wt,g))),{width:r,height:s,glyphMarginLeft:Q,glyphMarginWidth:H,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:X,lineNumbersWidth:W,decorationsLeft:ne,decorationsWidth:ht,contentLeft:de,contentWidth:_t,minimap:Ct,viewportColumn:di,isWordWrapMinified:ot,isViewportWrapping:ke,wrappingColumn:Wt,verticalScrollbarWidth:O,horizontalScrollbarHeight:J,overviewRuler:{top:bi,width:O,height:s-2*bi,right:0}}}},iL=class extends Ke{constructor(){super(149,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[p(366,null),p(367,null)],type:"string",enum:["simple","advanced"],default:"simple",description:p(368,null)}})}validate(e){return rt(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}},Es;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(Es||(Es={}));var rL=class extends Ke{constructor(){const e={enabled:Es.OnCode};super(71,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[Es.Off,Es.OnCode,Es.On],default:e.enabled,enumDescriptions:[p(369,null),p(370,null),p(371,null)],description:p(372,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:rt(e.enabled,this.defaultValue.enabled,[Es.Off,Es.OnCode,Es.On])}}},sL=class extends Ke{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(125,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:p(373,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:p(374,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:p(375,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:p(376,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),maxLineCount:_e.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:rt(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:K(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},nL=class extends Ke{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(151,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:p(377,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[p(378,null),p(379,null,Ft?"Ctrl+Option":"Ctrl+Alt"),p(380,null,Ft?"Ctrl+Option":"Ctrl+Alt"),p(381,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:p(382,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:p(383,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:p(384,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:p(385,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:rt(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:_e.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:mi.string(t.fontFamily,this.defaultValue.fontFamily),padding:K(t.padding,this.defaultValue.padding),maximumLength:_e.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},oL=class extends Ke{constructor(){super(72,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):_e.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?_e.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},aL=class extends Gr{constructor(){super(73,"lineHeight",Ss.lineHeight,e=>Gr.clamp(e,0,150),{markdownDescription:p(386,null)})}compute(e,t,i){return e.fontInfo.lineHeight}},cL=class extends Ke{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(79,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:p(387,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:p(388,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[p(389,null),p(390,null),p(391,null)],default:e.size,description:p(392,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:p(393,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:p(394,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:p(395,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:p(396,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:p(397,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:p(398,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:p(399,null)},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:p(400,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:p(401,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:p(402,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let i=this.defaultValue.markSectionHeaderRegex;const r=e.markSectionHeaderRegex;if(typeof r=="string")try{new RegExp(r,"d"),i=r}catch{}return{enabled:K(t.enabled,this.defaultValue.enabled),autohide:K(t.autohide,this.defaultValue.autohide),size:rt(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:rt(t.side,this.defaultValue.side,["right","left"]),showSlider:rt(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:K(t.renderCharacters,this.defaultValue.renderCharacters),scale:_e.clampedInt(t.scale,1,1,3),maxColumn:_e.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:K(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:K(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:Gr.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Gr.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function lL(e){return e==="ctrlCmd"?Ft?"metaKey":"ctrlKey":"altKey"}var uL=class extends Ke{constructor(){super(93,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:p(403,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:p(404,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:_e.clampedInt(t.top,0,0,1e3),bottom:_e.clampedInt(t.bottom,0,0,1e3)}}},hL=class extends Ke{constructor(){const e={enabled:!0,cycle:!0};super(95,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:p(405,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:p(406,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),cycle:K(t.cycle,this.defaultValue.cycle)}}},dL=class extends mn{constructor(){super(154)}compute(e,t,i){return e.pixelRatio}},fL=class extends Ke{constructor(){super(97,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},pL=class extends Ke{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[p(407,null),p(408,null),p(409,null)]}];super(99,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:p(410,null)},comments:{anyOf:t,default:e.comments,description:p(411,null)},other:{anyOf:t,default:e.other,description:p(412,null)}},default:e,markdownDescription:p(413,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=rt(t,this.defaultValue.other,s),typeof i=="boolean"?o=i?"on":"off":o=rt(i,this.defaultValue.comments,s),typeof r=="boolean"?a=r?"on":"off":a=rt(r,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},nE;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(nE||(nE={}));var gL=class extends Ke{constructor(){super(74,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[p(414,null),p(415,null),p(416,null),p(417,null)],default:"on",description:p(418,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}},mL=class extends Ke{constructor(){const e=[],t={type:"number",description:p(419,null)};super(112,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:p(420,null),format:"color-hex"}}}]},default:e,description:p(421,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:_e.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:_e.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}},vL=class extends Ke{constructor(){super(102,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function oE(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var wL=class extends Ke{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(113,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(422,null),p(423,null),p(424,null)],default:"auto",description:p(425,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[p(426,null),p(427,null),p(428,null)],default:"auto",description:p(429,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:p(430,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:p(431,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:p(432,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:p(433,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=_e.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=_e.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:_e.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:oE(t.vertical,this.defaultValue.vertical),horizontal:oE(t.horizontal,this.defaultValue.horizontal),useShadows:K(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:K(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:K(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:K(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:K(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:_e.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:_e.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:K(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:K(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Er="inUntrustedWorkspace",co={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},bL=class extends Ke{constructor(){const e={nonBasicASCII:Er,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Er,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(135,"unicodeHighlight",e,{[co.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Er],default:e.nonBasicASCII,description:p(434,null)},[co.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:p(435,null)},[co.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:p(436,null)},[co.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Er],default:e.includeComments,description:p(437,null)},[co.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Er],default:e.includeStrings,description:p(438,null)},[co.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:p(439,null),additionalProperties:{type:"boolean"}},[co.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:p(440,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(Ei(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(Ei(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new Ed(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Ea(t.nonBasicASCII,Er,[!0,!1,Er]),invisibleCharacters:K(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:K(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Ea(t.includeComments,Er,[!0,!1,Er]),includeStrings:Ea(t.includeStrings,Er,[!0,!1,Er]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}},yL=class extends Ke{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always"},experimental:{suppressInlineSuggestions:"",triggerCommandOnProviderChange:!0}};super(69,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:p(441,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[p(442,null),p(443,null),p(444,null)],description:p(445,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:p(446,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:p(447,null)},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"string",default:e.experimental.suppressInlineSuggestions,tags:["experimental","onExp"],description:p(448,null)},"editor.inlineSuggest.experimental.triggerCommandOnProviderChange":{type:"boolean",default:e.experimental.triggerCommandOnProviderChange,tags:["experimental","onExp"],description:p(449,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:p(450,null)},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:p(451,null),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:p(452,null),enum:["auto","never"],enumDescriptions:[p(453,null),p(454,null)],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:p(455,null),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),mode:rt(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:rt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:K(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:K(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:mi.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:K(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{enabled:K(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:K(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:rt(t.edits?.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),renderSideBySide:rt(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"])},experimental:{suppressInlineSuggestions:mi.string(t.experimental?.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions),triggerCommandOnProviderChange:K(t.experimental?.triggerCommandOnProviderChange,this.defaultValue.experimental.triggerCommandOnProviderChange)}}}},AL=class extends Ke{constructor(){const e={enabled:Yx.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Yx.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(20,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(456,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:p(457,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:K(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},xL=class extends Ke{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(21,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(458,null),p(459,null),p(460,null)],default:e.bracketPairs,description:p(461,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[p(462,null),p(463,null),p(464,null)],default:e.bracketPairsHorizontal,description:p(465,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:p(466,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:p(467,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[p(468,null),p(469,null),p(470,null)],default:e.highlightActiveIndentation,description:p(471,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Ea(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Ea(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:K(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:K(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Ea(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Ea(e,t,i){const r=i.indexOf(e);return r===-1?t:i[r]}var EL=class extends Ke{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(128,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[p(472,null),p(473,null)],default:e.insertMode,description:p(474,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:p(475,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:p(476,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:p(477,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[p(478,null),p(479,null),p(480,null),p(481,null)],default:e.selectionMode,markdownDescription:p(482,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:p(483,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:p(484,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:p(485,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:p(486,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:p(487,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:p(488,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:p(489,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:p(490,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:p(491,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:p(492,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:p(493,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:p(494,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:p(495,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:p(496,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:p(497,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:p(498,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:p(499,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:p(500,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:p(501,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:p(502,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:p(503,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:p(504,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:p(505,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:p(506,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:p(507,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:p(508,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:p(509,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:p(510,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:p(511,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:p(512,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:p(513,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:p(514,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:p(515,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:p(516,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:p(517,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:p(518,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:p(519,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:rt(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:K(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:K(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:K(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:K(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:rt(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:K(t.showIcons,this.defaultValue.showIcons),showStatusBar:K(t.showStatusBar,this.defaultValue.showStatusBar),preview:K(t.preview,this.defaultValue.preview),previewMode:rt(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:K(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:K(t.showMethods,this.defaultValue.showMethods),showFunctions:K(t.showFunctions,this.defaultValue.showFunctions),showConstructors:K(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:K(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:K(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:K(t.showFields,this.defaultValue.showFields),showVariables:K(t.showVariables,this.defaultValue.showVariables),showClasses:K(t.showClasses,this.defaultValue.showClasses),showStructs:K(t.showStructs,this.defaultValue.showStructs),showInterfaces:K(t.showInterfaces,this.defaultValue.showInterfaces),showModules:K(t.showModules,this.defaultValue.showModules),showProperties:K(t.showProperties,this.defaultValue.showProperties),showEvents:K(t.showEvents,this.defaultValue.showEvents),showOperators:K(t.showOperators,this.defaultValue.showOperators),showUnits:K(t.showUnits,this.defaultValue.showUnits),showValues:K(t.showValues,this.defaultValue.showValues),showConstants:K(t.showConstants,this.defaultValue.showConstants),showEnums:K(t.showEnums,this.defaultValue.showEnums),showEnumMembers:K(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:K(t.showKeywords,this.defaultValue.showKeywords),showWords:K(t.showWords,this.defaultValue.showWords),showColors:K(t.showColors,this.defaultValue.showColors),showFiles:K(t.showFiles,this.defaultValue.showFiles),showReferences:K(t.showReferences,this.defaultValue.showReferences),showFolders:K(t.showFolders,this.defaultValue.showFolders),showTypeParameters:K(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:K(t.showSnippets,this.defaultValue.showSnippets),showUsers:K(t.showUsers,this.defaultValue.showUsers),showIssues:K(t.showIssues,this.defaultValue.showIssues)}}},SL=class extends Ke{constructor(){super(123,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:p(520,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:p(521,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:K(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:K(e.selectSubwords,this.defaultValue.selectSubwords)}}},kL=class extends Ke{constructor(){const e=[];super(140,"wordSegmenterLocales",e,{anyOf:[{description:p(522,null),type:"string"},{description:p(523,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},aE;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(aE||(aE={}));var IL=class extends Ke{constructor(){super(148,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[p(524,null),p(525,null),p(526,null),p(527,null)],description:p(528,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}},CL=class extends mn{constructor(){super(157)}compute(e,t,i){const r=t.get(156);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},$L=class extends Ke{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(41,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(529,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:p(530,null),enum:["afterDrop","never"],enumDescriptions:[p(531,null),p(532,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),showDropSelector:rt(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},DL=class extends Ke{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(94,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:p(533,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:p(534,null),enum:["afterPaste","never"],enumDescriptions:[p(535,null),p(536,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:K(t.enabled,this.defaultValue.enabled),showPasteSelector:rt(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},PL="Consolas, 'Courier New', monospace",TL="Menlo, Monaco, 'Courier New', monospace",ML="'Droid Sans Mono', 'monospace', monospace",Ss={fontFamily:Ft?TL:je?PL:ML,fontWeight:"normal",fontSize:Ft?12:14,lineHeight:0,letterSpacing:0},NL=[];function P(e){return NL[e.id]=e,e}var cE;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.allowVariableLineHeights=4]="allowVariableLineHeights",e[e.allowVariableFonts=5]="allowVariableFonts",e[e.allowVariableFontsInAccessibilityMode=6]="allowVariableFontsInAccessibilityMode",e[e.ariaLabel=7]="ariaLabel",e[e.ariaRequired=8]="ariaRequired",e[e.autoClosingBrackets=9]="autoClosingBrackets",e[e.autoClosingComments=10]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=11]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=12]="autoClosingDelete",e[e.autoClosingOvertype=13]="autoClosingOvertype",e[e.autoClosingQuotes=14]="autoClosingQuotes",e[e.autoIndent=15]="autoIndent",e[e.autoIndentOnPaste=16]="autoIndentOnPaste",e[e.autoIndentOnPasteWithinString=17]="autoIndentOnPasteWithinString",e[e.automaticLayout=18]="automaticLayout",e[e.autoSurround=19]="autoSurround",e[e.bracketPairColorization=20]="bracketPairColorization",e[e.guides=21]="guides",e[e.codeLens=22]="codeLens",e[e.codeLensFontFamily=23]="codeLensFontFamily",e[e.codeLensFontSize=24]="codeLensFontSize",e[e.colorDecorators=25]="colorDecorators",e[e.colorDecoratorsLimit=26]="colorDecoratorsLimit",e[e.columnSelection=27]="columnSelection",e[e.comments=28]="comments",e[e.contextmenu=29]="contextmenu",e[e.copyWithSyntaxHighlighting=30]="copyWithSyntaxHighlighting",e[e.cursorBlinking=31]="cursorBlinking",e[e.cursorSmoothCaretAnimation=32]="cursorSmoothCaretAnimation",e[e.cursorStyle=33]="cursorStyle",e[e.cursorSurroundingLines=34]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=35]="cursorSurroundingLinesStyle",e[e.cursorWidth=36]="cursorWidth",e[e.disableLayerHinting=37]="disableLayerHinting",e[e.disableMonospaceOptimizations=38]="disableMonospaceOptimizations",e[e.domReadOnly=39]="domReadOnly",e[e.dragAndDrop=40]="dragAndDrop",e[e.dropIntoEditor=41]="dropIntoEditor",e[e.editContext=42]="editContext",e[e.emptySelectionClipboard=43]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=44]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=45]="experimentalWhitespaceRendering",e[e.extraEditorClassName=46]="extraEditorClassName",e[e.fastScrollSensitivity=47]="fastScrollSensitivity",e[e.find=48]="find",e[e.fixedOverflowWidgets=49]="fixedOverflowWidgets",e[e.folding=50]="folding",e[e.foldingStrategy=51]="foldingStrategy",e[e.foldingHighlight=52]="foldingHighlight",e[e.foldingImportsByDefault=53]="foldingImportsByDefault",e[e.foldingMaximumRegions=54]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=55]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=56]="fontFamily",e[e.fontInfo=57]="fontInfo",e[e.fontLigatures=58]="fontLigatures",e[e.fontSize=59]="fontSize",e[e.fontWeight=60]="fontWeight",e[e.fontVariations=61]="fontVariations",e[e.formatOnPaste=62]="formatOnPaste",e[e.formatOnType=63]="formatOnType",e[e.glyphMargin=64]="glyphMargin",e[e.gotoLocation=65]="gotoLocation",e[e.hideCursorInOverviewRuler=66]="hideCursorInOverviewRuler",e[e.hover=67]="hover",e[e.inDiffEditor=68]="inDiffEditor",e[e.inlineSuggest=69]="inlineSuggest",e[e.letterSpacing=70]="letterSpacing",e[e.lightbulb=71]="lightbulb",e[e.lineDecorationsWidth=72]="lineDecorationsWidth",e[e.lineHeight=73]="lineHeight",e[e.lineNumbers=74]="lineNumbers",e[e.lineNumbersMinChars=75]="lineNumbersMinChars",e[e.linkedEditing=76]="linkedEditing",e[e.links=77]="links",e[e.matchBrackets=78]="matchBrackets",e[e.minimap=79]="minimap",e[e.mouseStyle=80]="mouseStyle",e[e.mouseWheelScrollSensitivity=81]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=82]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=83]="multiCursorMergeOverlapping",e[e.multiCursorModifier=84]="multiCursorModifier",e[e.multiCursorPaste=85]="multiCursorPaste",e[e.multiCursorLimit=86]="multiCursorLimit",e[e.occurrencesHighlight=87]="occurrencesHighlight",e[e.occurrencesHighlightDelay=88]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=89]="overtypeCursorStyle",e[e.overtypeOnPaste=90]="overtypeOnPaste",e[e.overviewRulerBorder=91]="overviewRulerBorder",e[e.overviewRulerLanes=92]="overviewRulerLanes",e[e.padding=93]="padding",e[e.pasteAs=94]="pasteAs",e[e.parameterHints=95]="parameterHints",e[e.peekWidgetDefaultFocus=96]="peekWidgetDefaultFocus",e[e.placeholder=97]="placeholder",e[e.definitionLinkOpensInPeek=98]="definitionLinkOpensInPeek",e[e.quickSuggestions=99]="quickSuggestions",e[e.quickSuggestionsDelay=100]="quickSuggestionsDelay",e[e.readOnly=101]="readOnly",e[e.readOnlyMessage=102]="readOnlyMessage",e[e.renameOnType=103]="renameOnType",e[e.renderControlCharacters=104]="renderControlCharacters",e[e.renderFinalNewline=105]="renderFinalNewline",e[e.renderLineHighlight=106]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=107]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=108]="renderValidationDecorations",e[e.renderWhitespace=109]="renderWhitespace",e[e.revealHorizontalRightPadding=110]="revealHorizontalRightPadding",e[e.roundedSelection=111]="roundedSelection",e[e.rulers=112]="rulers",e[e.scrollbar=113]="scrollbar",e[e.scrollBeyondLastColumn=114]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=115]="scrollBeyondLastLine",e[e.scrollPredominantAxis=116]="scrollPredominantAxis",e[e.selectionClipboard=117]="selectionClipboard",e[e.selectionHighlight=118]="selectionHighlight",e[e.selectOnLineNumbers=119]="selectOnLineNumbers",e[e.showFoldingControls=120]="showFoldingControls",e[e.showUnused=121]="showUnused",e[e.snippetSuggestions=122]="snippetSuggestions",e[e.smartSelect=123]="smartSelect",e[e.smoothScrolling=124]="smoothScrolling",e[e.stickyScroll=125]="stickyScroll",e[e.stickyTabStops=126]="stickyTabStops",e[e.stopRenderingLineAfter=127]="stopRenderingLineAfter",e[e.suggest=128]="suggest",e[e.suggestFontSize=129]="suggestFontSize",e[e.suggestLineHeight=130]="suggestLineHeight",e[e.suggestOnTriggerCharacters=131]="suggestOnTriggerCharacters",e[e.suggestSelection=132]="suggestSelection",e[e.tabCompletion=133]="tabCompletion",e[e.tabIndex=134]="tabIndex",e[e.unicodeHighlighting=135]="unicodeHighlighting",e[e.unusualLineTerminators=136]="unusualLineTerminators",e[e.useShadowDOM=137]="useShadowDOM",e[e.useTabStops=138]="useTabStops",e[e.wordBreak=139]="wordBreak",e[e.wordSegmenterLocales=140]="wordSegmenterLocales",e[e.wordSeparators=141]="wordSeparators",e[e.wordWrap=142]="wordWrap",e[e.wordWrapBreakAfterCharacters=143]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=144]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=145]="wordWrapColumn",e[e.wordWrapOverride1=146]="wordWrapOverride1",e[e.wordWrapOverride2=147]="wordWrapOverride2",e[e.wrappingIndent=148]="wrappingIndent",e[e.wrappingStrategy=149]="wrappingStrategy",e[e.showDeprecated=150]="showDeprecated",e[e.inlayHints=151]="inlayHints",e[e.effectiveCursorStyle=152]="effectiveCursorStyle",e[e.editorClassName=153]="editorClassName",e[e.pixelRatio=154]="pixelRatio",e[e.tabFocusMode=155]="tabFocusMode",e[e.layoutInfo=156]="layoutInfo",e[e.wrappingInfo=157]="wrappingInfo",e[e.defaultColorDecorators=158]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=159]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=160]="inlineCompletionsAccessibilityVerbose",e[e.effectiveEditContext=161]="effectiveEditContext",e[e.scrollOnMiddleClick=162]="scrollOnMiddleClick",e[e.effectiveAllowVariableFonts=163]="effectiveAllowVariableFonts"})(cE||(cE={}));var QJ={acceptSuggestionOnCommitCharacter:P(new we(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:p(537,null)})),acceptSuggestionOnEnter:P(new it(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",p(538,null),""],markdownDescription:p(539,null)})),accessibilitySupport:P(new UN),accessibilityPageSize:P(new _e(3,"accessibilityPageSize",500,1,1073741824,{description:p(540,null),tags:["accessibility"]})),allowVariableLineHeights:P(new we(4,"allowVariableLineHeights",!0,{description:p(541,null)})),allowVariableFonts:P(new we(5,"allowVariableFonts",!0,{description:p(542,null)})),allowVariableFontsInAccessibilityMode:P(new we(6,"allowVariableFontsInAccessibilityMode",!1,{description:p(543,null),tags:["accessibility"]})),ariaLabel:P(new mi(7,"ariaLabel",p(544,null))),ariaRequired:P(new we(8,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:P(new we(11,"screenReaderAnnounceInlineSuggestion",!0,{description:p(545,null),tags:["accessibility"]})),autoClosingBrackets:P(new it(9,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(546,null),p(547,null),""],description:p(548,null)})),autoClosingComments:P(new it(10,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(549,null),p(550,null),""],description:p(551,null)})),autoClosingDelete:P(new it(12,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",p(552,null),""],description:p(553,null)})),autoClosingOvertype:P(new it(13,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",p(554,null),""],description:p(555,null)})),autoClosingQuotes:P(new it(14,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",p(556,null),p(557,null),""],description:p(558,null)})),autoIndent:P(new ml(15,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],jN,{enumDescriptions:[p(559,null),p(560,null),p(561,null),p(562,null),p(563,null)],description:p(564,null)})),autoIndentOnPaste:P(new we(16,"autoIndentOnPaste",!1,{description:p(565,null)})),autoIndentOnPasteWithinString:P(new we(17,"autoIndentOnPasteWithinString",!0,{description:p(566,null)})),automaticLayout:P(new we(18,"automaticLayout",!1)),autoSurround:P(new it(19,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[p(567,null),p(568,null),p(569,null),""],description:p(570,null)})),bracketPairColorization:P(new AL),bracketPairGuides:P(new xL),stickyTabStops:P(new we(126,"stickyTabStops",!1,{description:p(571,null)})),codeLens:P(new we(22,"codeLens",!0,{description:p(572,null)})),codeLensFontFamily:P(new mi(23,"codeLensFontFamily","",{description:p(573,null)})),codeLensFontSize:P(new _e(24,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:p(574,null)})),colorDecorators:P(new we(25,"colorDecorators",!0,{description:p(575,null)})),colorDecoratorActivatedOn:P(new it(159,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[p(576,null),p(577,null),p(578,null)],description:p(579,null)})),colorDecoratorsLimit:P(new _e(26,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:p(580,null)})),columnSelection:P(new we(27,"columnSelection",!1,{description:p(581,null)})),comments:P(new BN),contextmenu:P(new we(29,"contextmenu",!0)),copyWithSyntaxHighlighting:P(new we(30,"copyWithSyntaxHighlighting",!0,{description:p(582,null)})),cursorBlinking:P(new ml(31,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],zN,{description:p(583,null)})),cursorSmoothCaretAnimation:P(new it(32,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[p(584,null),p(585,null),p(586,null)],description:p(587,null)})),cursorStyle:P(new ml(33,"cursorStyle",xr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],rE,{description:p(588,null)})),overtypeCursorStyle:P(new ml(89,"overtypeCursorStyle",xr.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],rE,{description:p(589,null)})),cursorSurroundingLines:P(new _e(34,"cursorSurroundingLines",0,0,1073741824,{description:p(590,null)})),cursorSurroundingLinesStyle:P(new it(35,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[p(591,null),p(592,null)],markdownDescription:p(593,null)})),cursorWidth:P(new _e(36,"cursorWidth",0,0,1073741824,{markdownDescription:p(594,null)})),disableLayerHinting:P(new we(37,"disableLayerHinting",!1)),disableMonospaceOptimizations:P(new we(38,"disableMonospaceOptimizations",!1)),domReadOnly:P(new we(39,"domReadOnly",!1)),dragAndDrop:P(new we(40,"dragAndDrop",!0,{description:p(595,null)})),emptySelectionClipboard:P(new WN),dropIntoEditor:P(new $L),editContext:P(new we(42,"editContext",!0,{description:p(596,null),included:f1||A5||p5})),stickyScroll:P(new sL),experimentalGpuAcceleration:P(new it(44,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[p(597,null),p(598,null)],description:p(599,null)})),experimentalWhitespaceRendering:P(new it(45,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[p(600,null),p(601,null),p(602,null)],description:p(603,null)})),extraEditorClassName:P(new mi(46,"extraEditorClassName","")),fastScrollSensitivity:P(new Gr(47,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:p(604,null)})),find:P(new _N),fixedOverflowWidgets:P(new we(49,"fixedOverflowWidgets",!1)),folding:P(new we(50,"folding",!0,{description:p(605,null)})),foldingStrategy:P(new it(51,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[p(606,null),p(607,null)],description:p(608,null)})),foldingHighlight:P(new we(52,"foldingHighlight",!0,{description:p(609,null)})),foldingImportsByDefault:P(new we(53,"foldingImportsByDefault",!1,{description:p(610,null)})),foldingMaximumRegions:P(new _e(54,"foldingMaximumRegions",5e3,10,65e3,{description:p(611,null)})),unfoldOnClickAfterEndOfLine:P(new we(55,"unfoldOnClickAfterEndOfLine",!1,{description:p(612,null)})),fontFamily:P(new mi(56,"fontFamily",Ss.fontFamily,{description:p(613,null)})),fontInfo:P(new GN),fontLigatures2:P(new VN),fontSize:P(new QN),fontWeight:P(new XN),fontVariations:P(new qN),formatOnPaste:P(new we(62,"formatOnPaste",!1,{description:p(614,null)})),formatOnType:P(new we(63,"formatOnType",!1,{description:p(615,null)})),glyphMargin:P(new we(64,"glyphMargin",!0,{description:p(616,null)})),gotoLocation:P(new KN),hideCursorInOverviewRuler:P(new we(66,"hideCursorInOverviewRuler",!1,{description:p(617,null)})),hover:P(new eL),inDiffEditor:P(new we(68,"inDiffEditor",!1)),letterSpacing:P(new Gr(70,"letterSpacing",Ss.letterSpacing,e=>Gr.clamp(e,-5,20),{description:p(618,null)})),lightbulb:P(new rL),lineDecorationsWidth:P(new oL),lineHeight:P(new aL),lineNumbers:P(new gL),lineNumbersMinChars:P(new _e(75,"lineNumbersMinChars",5,1,300)),linkedEditing:P(new we(76,"linkedEditing",!1,{description:p(619,null)})),links:P(new we(77,"links",!0,{description:p(620,null)})),matchBrackets:P(new it(78,"matchBrackets","always",["always","near","never"],{description:p(621,null)})),minimap:P(new cL),mouseStyle:P(new it(80,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:P(new Gr(81,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:p(622,null)})),mouseWheelZoom:P(new we(82,"mouseWheelZoom",!1,{markdownDescription:p(Ft?623:624,null)})),multiCursorMergeOverlapping:P(new we(83,"multiCursorMergeOverlapping",!0,{description:p(625,null)})),multiCursorModifier:P(new ml(84,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],lL,{markdownEnumDescriptions:[p(626,null),p(627,null)],markdownDescription:p(628,null)})),multiCursorPaste:P(new it(85,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[p(629,null),p(630,null)],markdownDescription:p(631,null)})),multiCursorLimit:P(new _e(86,"multiCursorLimit",1e4,1,1e5,{markdownDescription:p(632,null)})),occurrencesHighlight:P(new it(87,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[p(633,null),p(634,null),p(635,null)],markdownDescription:p(636,null)})),occurrencesHighlightDelay:P(new _e(88,"occurrencesHighlightDelay",0,0,2e3,{description:p(637,null),tags:["preview"]})),overtypeOnPaste:P(new we(90,"overtypeOnPaste",!0,{description:p(638,null)})),overviewRulerBorder:P(new we(91,"overviewRulerBorder",!0,{description:p(639,null)})),overviewRulerLanes:P(new _e(92,"overviewRulerLanes",3,0,3)),padding:P(new uL),pasteAs:P(new DL),parameterHints:P(new hL),peekWidgetDefaultFocus:P(new it(96,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[p(640,null),p(641,null)],description:p(642,null)})),placeholder:P(new fL),definitionLinkOpensInPeek:P(new we(98,"definitionLinkOpensInPeek",!1,{description:p(643,null)})),quickSuggestions:P(new pL),quickSuggestionsDelay:P(new _e(100,"quickSuggestionsDelay",10,0,1073741824,{description:p(644,null),tags:["onExP"]})),readOnly:P(new we(101,"readOnly",!1)),readOnlyMessage:P(new vL),renameOnType:P(new we(103,"renameOnType",!1,{description:p(645,null),markdownDeprecationMessage:p(646,null)})),renderControlCharacters:P(new we(104,"renderControlCharacters",!0,{description:p(647,null),restricted:!0})),renderFinalNewline:P(new it(105,"renderFinalNewline",Et?"dimmed":"on",["off","on","dimmed"],{description:p(648,null)})),renderLineHighlight:P(new it(106,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",p(649,null)],description:p(650,null)})),renderLineHighlightOnlyWhenFocus:P(new we(107,"renderLineHighlightOnlyWhenFocus",!1,{description:p(651,null)})),renderValidationDecorations:P(new it(108,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:P(new it(109,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",p(652,null),p(653,null),p(654,null),""],description:p(655,null)})),revealHorizontalRightPadding:P(new _e(110,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:P(new we(111,"roundedSelection",!0,{description:p(656,null)})),rulers:P(new mL),scrollbar:P(new wL),scrollBeyondLastColumn:P(new _e(114,"scrollBeyondLastColumn",4,0,1073741824,{description:p(657,null)})),scrollBeyondLastLine:P(new we(115,"scrollBeyondLastLine",!0,{description:p(658,null)})),scrollOnMiddleClick:P(new we(162,"scrollOnMiddleClick",!1,{description:p(659,null)})),scrollPredominantAxis:P(new we(116,"scrollPredominantAxis",!0,{description:p(660,null)})),selectionClipboard:P(new we(117,"selectionClipboard",!0,{description:p(661,null),included:Et})),selectionHighlight:P(new we(118,"selectionHighlight",!0,{description:p(662,null)})),selectOnLineNumbers:P(new we(119,"selectOnLineNumbers",!0)),showFoldingControls:P(new it(120,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[p(663,null),p(664,null),p(665,null)],description:p(666,null)})),showUnused:P(new we(121,"showUnused",!0,{description:p(667,null)})),showDeprecated:P(new we(150,"showDeprecated",!0,{description:p(668,null)})),inlayHints:P(new nL),snippetSuggestions:P(new it(122,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[p(669,null),p(670,null),p(671,null),p(672,null)],description:p(673,null)})),smartSelect:P(new SL),smoothScrolling:P(new we(124,"smoothScrolling",!1,{description:p(674,null)})),stopRenderingLineAfter:P(new _e(127,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:P(new EL),inlineSuggest:P(new yL),inlineCompletionsAccessibilityVerbose:P(new we(160,"inlineCompletionsAccessibilityVerbose",!1,{description:p(675,null)})),suggestFontSize:P(new _e(129,"suggestFontSize",0,0,1e3,{markdownDescription:p(676,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:P(new _e(130,"suggestLineHeight",0,0,1e3,{markdownDescription:p(677,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:P(new we(131,"suggestOnTriggerCharacters",!0,{description:p(678,null)})),suggestSelection:P(new it(132,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[p(679,null),p(680,null),p(681,null)],description:p(682,null)})),tabCompletion:P(new it(133,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[p(683,null),p(684,null),p(685,null)],description:p(686,null)})),tabIndex:P(new _e(134,"tabIndex",0,-1,1073741824)),unicodeHighlight:P(new bL),unusualLineTerminators:P(new it(136,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[p(687,null),p(688,null),p(689,null)],description:p(690,null)})),useShadowDOM:P(new we(137,"useShadowDOM",!0)),useTabStops:P(new we(138,"useTabStops",!0,{description:p(691,null)})),wordBreak:P(new it(139,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[p(692,null),p(693,null)],description:p(694,null)})),wordSegmenterLocales:P(new kL),wordSeparators:P(new mi(141,"wordSeparators",Qx,{description:p(695,null)})),wordWrap:P(new it(142,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[p(696,null),p(697,null),p(698,null),p(699,null)],description:p(700,null)})),wordWrapBreakAfterCharacters:P(new mi(143,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:P(new mi(144,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:P(new _e(145,"wordWrapColumn",80,1,1073741824,{markdownDescription:p(701,null)})),wordWrapOverride1:P(new it(146,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:P(new it(147,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:P(new ZN),editorClassName:P(new HN),defaultColorDecorators:P(new it(158,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[p(702,null),p(703,null),p(704,null)],description:p(705,null)})),pixelRatio:P(new dL),tabFocusMode:P(new we(155,"tabFocusMode",!1,{markdownDescription:p(706,null)})),layoutInfo:P(new tL),wrappingInfo:P(new CL),wrappingIndent:P(new IL),wrappingStrategy:P(new iL),effectiveEditContextEnabled:P(new JN),effectiveAllowVariableFonts:P(new YN)},Ui,V1=globalThis.vscode;if(typeof V1<"u"&&typeof V1.context<"u"){const e=V1.context.configuration();if(e)Ui=e.product;else throw new Error("Sandbox: unable to resolve product configuration from preload script.")}else if(globalThis._VSCODE_PRODUCT_JSON&&globalThis._VSCODE_PACKAGE_JSON){if(Ui=globalThis._VSCODE_PRODUCT_JSON,cn.VSCODE_DEV&&Object.assign(Ui,{nameShort:`${Ui.nameShort} Dev`,nameLong:`${Ui.nameLong} Dev`,dataFolderName:`${Ui.dataFolderName}-dev`,serverDataFolderName:Ui.serverDataFolderName?`${Ui.serverDataFolderName}-dev`:void 0}),!Ui.version){const e=globalThis._VSCODE_PACKAGE_JSON;Object.assign(Ui,{version:e.version})}}else Ui={},Object.keys(Ui).length===0&&Object.assign(Ui,{version:"1.102.0-dev",nameShort:"Code - OSS Dev",nameLong:"Code - OSS Dev",applicationName:"code-oss",dataFolderName:".vscode-oss",urlProtocol:"code-oss",reportIssueUrl:"https://github.com/microsoft/vscode/issues/new",licenseName:"MIT",licenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt",serverLicenseUrl:"https://github.com/microsoft/vscode/blob/main/LICENSE.txt"});var LL=Ui,lE=class A3{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++A3.count}},uE=[];function N(e){const t=new lE(e);return uE[t.nid]=t,t}function kd(e){return uE[e].sid}var vi=class{constructor(e){this.value=e}},hE;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(hE||(hE={}));var dE;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(dE||(dE={}));var fE;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(fE||(fE={}));var pE;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(pE||(pE={}));var gE;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(gE||(gE={}));var mE;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(mE||(mE={}));var vE;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(vE||(vE={}));var q1;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(q1||(q1={}));var XJ=class x3{static{this.a=0}static mixin(t){return t._id=x3.a++,t}},wE;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(wE||(wE={}));var bE;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(bE||(bE={}));var yE;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(yE||(yE={}));var Y={MainThreadAuthentication:N("MainThreadAuthentication"),MainThreadBulkEdits:N("MainThreadBulkEdits"),MainThreadLanguageModels:N("MainThreadLanguageModels"),MainThreadEmbeddings:N("MainThreadEmbeddings"),MainThreadChatAgents2:N("MainThreadChatAgents2"),MainThreadCodeMapper:N("MainThreadCodeMapper"),MainThreadLanguageModelTools:N("MainThreadChatSkills"),MainThreadClipboard:N("MainThreadClipboard"),MainThreadCommands:N("MainThreadCommands"),MainThreadComments:N("MainThreadComments"),MainThreadConfiguration:N("MainThreadConfiguration"),MainThreadConsole:N("MainThreadConsole"),MainThreadDebugService:N("MainThreadDebugService"),MainThreadDecorations:N("MainThreadDecorations"),MainThreadDiagnostics:N("MainThreadDiagnostics"),MainThreadDialogs:N("MainThreadDiaglogs"),MainThreadDocuments:N("MainThreadDocuments"),MainThreadDocumentContentProviders:N("MainThreadDocumentContentProviders"),MainThreadTextEditors:N("MainThreadTextEditors"),MainThreadEditorInsets:N("MainThreadEditorInsets"),MainThreadEditorTabs:N("MainThreadEditorTabs"),MainThreadErrors:N("MainThreadErrors"),MainThreadTreeViews:N("MainThreadTreeViews"),MainThreadDownloadService:N("MainThreadDownloadService"),MainThreadLanguageFeatures:N("MainThreadLanguageFeatures"),MainThreadLanguages:N("MainThreadLanguages"),MainThreadLogger:N("MainThreadLogger"),MainThreadMessageService:N("MainThreadMessageService"),MainThreadOutputService:N("MainThreadOutputService"),MainThreadProgress:N("MainThreadProgress"),MainThreadQuickDiff:N("MainThreadQuickDiff"),MainThreadQuickOpen:N("MainThreadQuickOpen"),MainThreadStatusBar:N("MainThreadStatusBar"),MainThreadSecretState:N("MainThreadSecretState"),MainThreadStorage:N("MainThreadStorage"),MainThreadSpeech:N("MainThreadSpeechProvider"),MainThreadTelemetry:N("MainThreadTelemetry"),MainThreadTerminalService:N("MainThreadTerminalService"),MainThreadTerminalShellIntegration:N("MainThreadTerminalShellIntegration"),MainThreadWebviews:N("MainThreadWebviews"),MainThreadWebviewPanels:N("MainThreadWebviewPanels"),MainThreadWebviewViews:N("MainThreadWebviewViews"),MainThreadCustomEditors:N("MainThreadCustomEditors"),MainThreadUrls:N("MainThreadUrls"),MainThreadUriOpeners:N("MainThreadUriOpeners"),MainThreadProfileContentHandlers:N("MainThreadProfileContentHandlers"),MainThreadWorkspace:N("MainThreadWorkspace"),MainThreadFileSystem:N("MainThreadFileSystem"),MainThreadFileSystemEventService:N("MainThreadFileSystemEventService"),MainThreadExtensionService:N("MainThreadExtensionService"),MainThreadSCM:N("MainThreadSCM"),MainThreadSearch:N("MainThreadSearch"),MainThreadShare:N("MainThreadShare"),MainThreadTask:N("MainThreadTask"),MainThreadWindow:N("MainThreadWindow"),MainThreadLabelService:N("MainThreadLabelService"),MainThreadNotebook:N("MainThreadNotebook"),MainThreadNotebookDocuments:N("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:N("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:N("MainThreadNotebookKernels"),MainThreadNotebookRenderers:N("MainThreadNotebookRenderers"),MainThreadInteractive:N("MainThreadInteractive"),MainThreadTheming:N("MainThreadTheming"),MainThreadTunnelService:N("MainThreadTunnelService"),MainThreadManagedSockets:N("MainThreadManagedSockets"),MainThreadTimeline:N("MainThreadTimeline"),MainThreadTesting:N("MainThreadTesting"),MainThreadLocalization:N("MainThreadLocalizationShape"),MainThreadMcp:N("MainThreadMcpShape"),MainThreadAiRelatedInformation:N("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:N("MainThreadAiEmbeddingVector"),MainThreadChatStatus:N("MainThreadChatStatus"),MainThreadAiSettingsSearch:N("MainThreadAiSettingsSearch")},ae={ExtHostCodeMapper:N("ExtHostCodeMapper"),ExtHostCommands:N("ExtHostCommands"),ExtHostConfiguration:N("ExtHostConfiguration"),ExtHostDiagnostics:N("ExtHostDiagnostics"),ExtHostDebugService:N("ExtHostDebugService"),ExtHostDecorations:N("ExtHostDecorations"),ExtHostDocumentsAndEditors:N("ExtHostDocumentsAndEditors"),ExtHostDocuments:N("ExtHostDocuments"),ExtHostDocumentContentProviders:N("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:N("ExtHostDocumentSaveParticipant"),ExtHostEditors:N("ExtHostEditors"),ExtHostTreeViews:N("ExtHostTreeViews"),ExtHostFileSystem:N("ExtHostFileSystem"),ExtHostFileSystemInfo:N("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:N("ExtHostFileSystemEventService"),ExtHostLanguages:N("ExtHostLanguages"),ExtHostLanguageFeatures:N("ExtHostLanguageFeatures"),ExtHostQuickOpen:N("ExtHostQuickOpen"),ExtHostQuickDiff:N("ExtHostQuickDiff"),ExtHostStatusBar:N("ExtHostStatusBar"),ExtHostShare:N("ExtHostShare"),ExtHostExtensionService:N("ExtHostExtensionService"),ExtHostLogLevelServiceShape:N("ExtHostLogLevelServiceShape"),ExtHostTerminalService:N("ExtHostTerminalService"),ExtHostTerminalShellIntegration:N("ExtHostTerminalShellIntegration"),ExtHostSCM:N("ExtHostSCM"),ExtHostSearch:N("ExtHostSearch"),ExtHostTask:N("ExtHostTask"),ExtHostWorkspace:N("ExtHostWorkspace"),ExtHostWindow:N("ExtHostWindow"),ExtHostWebviews:N("ExtHostWebviews"),ExtHostWebviewPanels:N("ExtHostWebviewPanels"),ExtHostCustomEditors:N("ExtHostCustomEditors"),ExtHostWebviewViews:N("ExtHostWebviewViews"),ExtHostEditorInsets:N("ExtHostEditorInsets"),ExtHostEditorTabs:N("ExtHostEditorTabs"),ExtHostProgress:N("ExtHostProgress"),ExtHostComments:N("ExtHostComments"),ExtHostSecretState:N("ExtHostSecretState"),ExtHostStorage:N("ExtHostStorage"),ExtHostUrls:N("ExtHostUrls"),ExtHostUriOpeners:N("ExtHostUriOpeners"),ExtHostProfileContentHandlers:N("ExtHostProfileContentHandlers"),ExtHostOutputService:N("ExtHostOutputService"),ExtHostLabelService:N("ExtHostLabelService"),ExtHostNotebook:N("ExtHostNotebook"),ExtHostNotebookDocuments:N("ExtHostNotebookDocuments"),ExtHostNotebookEditors:N("ExtHostNotebookEditors"),ExtHostNotebookKernels:N("ExtHostNotebookKernels"),ExtHostNotebookRenderers:N("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:N("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:N("ExtHostInteractive"),ExtHostChatAgents2:N("ExtHostChatAgents"),ExtHostLanguageModelTools:N("ExtHostChatSkills"),ExtHostChatProvider:N("ExtHostChatProvider"),ExtHostSpeech:N("ExtHostSpeech"),ExtHostEmbeddings:N("ExtHostEmbeddings"),ExtHostAiRelatedInformation:N("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:N("ExtHostAiEmbeddingVector"),ExtHostAiSettingsSearch:N("ExtHostAiSettingsSearch"),ExtHostTheming:N("ExtHostTheming"),ExtHostTunnelService:N("ExtHostTunnelService"),ExtHostManagedSockets:N("ExtHostManagedSockets"),ExtHostAuthentication:N("ExtHostAuthentication"),ExtHostTimeline:N("ExtHostTimeline"),ExtHostTesting:N("ExtHostTesting"),ExtHostTelemetry:N("ExtHostTelemetry"),ExtHostLocalization:N("ExtHostLocalization"),ExtHostMcp:N("ExtHostMcp")};function AE(e){return e.toJSON()}var RL=class{constructor(e){this.a=e}transformIncoming(e){const t=this.a.transformIncoming(e);return t===e?e:AE(A.from(t))}transformOutgoing(e){const t=this.a.transformOutgoing(e);return t===e?e:AE(A.from(t))}transformOutgoingURI(e){const t=this.a.transformOutgoing(e);return t===e?e:A.from(t)}transformOutgoingScheme(e){return this.a.transformOutgoingScheme(e)}},KJ=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function xE(e,t,i,r){if(!e||r>200)return null;if(typeof e=="object"){if(e.$mid===1)return i?A.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof _)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=xE(e[s],t,i,r+1);n!==null&&(e[s]=n)}}return null}function vl(e,t){const i=xE(e,t,!1,0);return i===null?e:i}var EE=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):lt(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},OL=class extends EE{constructor(){super(),this.h=!0,this.i=new mt}},SE;function G1(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Z1="$$ref$$",FL={[Z1]:-1};function kE(e,t=null,i=!1){const r=[];return{jsonString:(i?G1:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return FL;if(typeof o=="object"){if(o instanceof _){const a=r.push(o)-1;return{[Z1]:a}}if(t)return t(n,o)}return o}),referencedBuffers:r}}function IE(e,t,i){return JSON.parse(e,(r,s)=>{if(s){const n=s[Z1];if(typeof n=="number")return t[n];if(i&&s.$mid===1)return i.transformIncoming(s)}return s})}function CE(e,t){return JSON.stringify(e,t)}function jL(e){return e?(t,i)=>i&&i.$mid===1?e.transformOutgoing(i):i:null}var $E;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})($E||($E={}));var DE;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(DE||(DE={}));var UL=()=>{},BL=Symbol.for("rpcProtocol"),zL=Symbol.for("rpcProxy"),HL=class a4 extends te{static{SE=BL}static{this.a=3*1e3}constructor(t,i=null,r=null){super(),this[SE]=!0,this.b=this.B(new $),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=r,this.h=jL(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=lE.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new Vr(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const i=this.w[t];delete this.w[t],i.resolveErr(Kc())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+a4.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+a4.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?vl(t,this.g):t}getProxy(t){const{nid:i,sid:r}=t;return this.s[i]||(this.s[i]=this.J(i,r)),this.s[i]}J(t,i){const r={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===zL?i:s[n])};return new Proxy(Object.create(null),r)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,r=t.length;i<r;i++){const s=t[i];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,r=Tt.read(t,0),s=r.readUInt8(),n=r.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=lr.deserializeRequestJSONArgs(r);this.g&&(c=vl(c,this.g)),this.M(i,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=lr.deserializeRequestMixedArgs(r);this.g&&(c=vl(c,this.g)),this.M(i,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(i,n,0,"ack"),this.G(n);break}case 6:{this.N(i,n);break}case 7:{this.O(i,n,void 0);break}case 9:{let o=lr.deserializeReplyOKJSON(r);this.g&&(o=vl(o,this.g)),this.O(i,n,o);break}case 10:{const o=lr.deserializeReplyOKJSONWithBuffers(r,this.g);this.O(i,n,o);break}case 8:{const o=lr.deserializeReplyOKVSBuffer(r);this.O(i,n,o);break}case 11:{let o=lr.deserializeReplyErrError(r);this.g&&(o=vl(o,this.g)),this.P(i,n,o);break}case 12:{this.P(i,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,r,s,n,o){this.f?.logIncoming(t,i,1,`receiveRequest ${kd(r)}.${s}(`,n);const a=String(i);let c,l;if(o){const h=new tt;n.push(h.token),c=this.Q(r,s,n),l=()=>h.cancel()}else c=this.Q(r,s,n),l=UL;this.u[a]=l;const u=lr.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const d=lr.serializeReplyOK(i,h,this.h);this.f?.logOutgoing(d.byteLength,i,1,"reply:",h),this.c.send(d)},h=>{delete this.u[a];const d=lr.serializeReplyErr(i,h);this.f?.logOutgoing(d.byteLength,i,1,"replyErr:",h),this.c.send(d)})}N(t,i){this.f?.logIncoming(t,i,1,"receiveCancel");const r=String(i);this.u[r]?.()}O(t,i,r){this.f?.logIncoming(t,i,0,"receiveReply:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(r)}P(t,i,r){this.f?.logIncoming(t,i,0,"receiveReplyErr:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;r&&(r.$isError?(o=new Error,o.name=r.name,o.message=r.message,o.stack=r.stack):o=r),n.resolveErr(o)}Q(t,i,r){try{return Promise.resolve(this.S(t,i,r))}catch(s){return Promise.reject(s)}}S(t,i,r){const s=this.m[t];if(!s)throw new Error("Unknown actor "+kd(t));const n=s[i];if(typeof n!="function")throw new Error("Unknown method "+i+" on actor "+kd(t));return n.apply(s,r)}U(t,i,r){if(this.j)return new OL;let s=null;if(r.length>0&&Je.isCancellationToken(r[r.length-1])&&(s=r.pop()),s&&s.isCancellationRequested)return Promise.reject(Kc());const n=lr.serializeRequestArguments(r,this.h),o=++this.t,a=String(o),c=new EE,l=new le;s&&l.add(s.onCancellationRequested(()=>{const h=lr.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new WL(c,l),this.F(o);const u=lr.serializeRequest(o,t,i,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${kd(t)}.${i}(`,r),this.c.send(u),c}},WL=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},Tt=class c4{static alloc(t,i,r){const s=new c4(_.alloc(r+1+4),0);return s.writeUInt8(t),s.writeUInt32(i),s}static read(t,i){return new c4(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let r=0,s=t.length;r<s;r++){const n=t[r];switch(i+=1,n.type){case 1:i+=this.sizeLongString(n.value);break;case 2:i+=this.sizeVSBuffer(n.value);break;case 3:i+=this.sizeUInt32,i+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)i+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,r=t.length;i<r;i++){const s=t[i];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let r=0;r<t;r++)switch(this.readUInt8()){case 1:i[r]=this.readLongString();break;case 2:i[r]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());i[r]=new vi(IE(o,a,null));break}case 4:i[r]=void 0;break}return i}},PE;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(PE||(PE={}));var lr=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof _||e[t]instanceof vi||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n instanceof _)i[r]={type:2,value:n};else if(typeof n>"u")i[r]={type:4};else if(n instanceof vi){const{jsonString:o,referencedBuffers:a}=kE(n.value,t);i[r]={type:3,value:_.fromString(o),buffers:a}}else i[r]={type:1,value:_.fromString(CE(n,t))}}return{type:1,args:i}}return{type:0,args:CE(e,t)}}static serializeRequest(e,t,i,r,s){switch(r.type){case 0:return this.b(e,t,i,r.args,s);case 1:return this.c(e,t,i,r.args,s)}}static b(e,t,i,r,s){const n=_.fromString(i),o=_.fromString(r);let a=0;a+=Tt.sizeUInt8(),a+=Tt.sizeShortString(n),a+=Tt.sizeLongString(o);const c=Tt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static c(e,t,i,r,s){const n=_.fromString(i);let o=0;o+=Tt.sizeUInt8(),o+=Tt.sizeShortString(n),o+=Tt.sizeMixedArray(r);const a=Tt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),s=new Array(r.length);for(let n=0,o=r.length;n<o;n++){const a=r[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:i,args:s}}static serializeAcknowledged(e){return Tt.alloc(5,e,0).buffer}static serializeCancel(e){return Tt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof _)return this.e(e,t);if(t instanceof vi){const{jsonString:r,referencedBuffers:s}=kE(t.value,i,!0);return this.g(e,r,s)}else return this.f(e,G1(t,i))}static d(e){return Tt.alloc(7,e,0).buffer}static e(e,t){let i=0;i+=Tt.sizeVSBuffer(t);const r=Tt.alloc(8,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=_.fromString(t);let r=0;r+=Tt.sizeLongString(i);const s=Tt.alloc(9,e,r);return s.writeLongString(i),s.buffer}static g(e,t,i){const r=_.fromString(t);let s=0;s+=Tt.sizeUInt32,s+=Tt.sizeLongString(r);for(const o of i)s+=Tt.sizeVSBuffer(o);const n=Tt.alloc(10,e,s);n.writeUInt32(i.length),n.writeLongString(r);for(const o of i)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),s=[];for(let n=0;n<i;++n)s.push(e.readVSBuffer());return new vi(IE(r,s,t))}static serializeReplyErr(e,t){const i=t?G1(ua(t),null):void 0;if(typeof i!="string")return this.h(e);const r=_.fromString(i);let s=0;s+=Tt.sizeLongString(r);const n=Tt.alloc(11,e,s);return n.writeLongString(r),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return Tt.alloc(12,e,0).buffer}},TE;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(TE||(TE={}));var ME;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(ME||(ME={}));var Sr;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(Sr||(Sr={}));var wl=V("instantiationService");function _L(e,t,i){t[Sr.DI_TARGET]===t?t[Sr.DI_DEPENDENCIES].push({id:e,index:i}):(t[Sr.DI_DEPENDENCIES]=[{id:e,index:i}],t[Sr.DI_TARGET]=t)}function V(e){if(Sr.serviceIds.has(e))return Sr.serviceIds.get(e);const t=function(i,r,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");_L(t,i,s)};return t.toString=()=>e,Sr.serviceIds.set(e,t),t}function eY(e){return e}function J1(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var NE=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],LE;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(LE||(LE={}));var RE;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(RE||(RE={}));var Ve=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,r=typeof t=="string"?t:t.value;return _r(i,r)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},lo=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Ve.toKey(e))}delete(e){return this.c.delete(Ve.toKey(e))}has(e){return this.c.has(Ve.toKey(e))}},ks=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Ve.toKey(e))}get(e){return this.c.get(Ve.toKey(e))}has(e){return this.c.has(Ve.toKey(e))}set(e,t){this.c.set(Ve.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},OE=class extends Error{constructor(e,t,i){super(`Error in extension ${Ve.toKey(e)}: ${i??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},tY=V("IBuiltinExtensionsScannerService");function Y1(e,t){return t&&(e.stack||e.stacktrace)?p(110,null,jE(e),FE(e.stack)||FE(e.stacktrace)):jE(e)}function FE(e){return Array.isArray(e)?e.join(`
`):e}function jE(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?p(111,null,e.message):e.message||p(112,null)}function Zr(e=null,t=!1){if(!e)return p(113,null);if(Array.isArray(e)){const i=yt(e),r=Zr(i[0],t);return i.length>1?p(114,null,r,i.length):r}if(Fe(e))return e;if(e.detail){const i=e.detail;if(i.error)return Y1(i.error,t);if(i.exception)return Y1(i.exception,t)}return e.stack?Y1(e,t):e.message?e.message:p(115,null)}function Is(e){return Q1(e,0)}function Q1(e,t){switch(typeof e){case"object":return e===null?Cs(349,t):Array.isArray(e)?qL(e,t):GL(e,t);case"string":return X1(e,t);case"boolean":return VL(e,t);case"number":return Cs(e,t);case"undefined":return Cs(937,t);default:return Cs(617,t)}}function Cs(e,t){return(t<<5)-t+e|0}function VL(e,t){return Cs(e?433:863,t)}function X1(e,t){t=Cs(149417,t);for(let i=0,r=e.length;i<r;i++)t=Cs(e.charCodeAt(i),t);return t}function qL(e,t){return t=Cs(104579,t),e.reduce((i,r)=>Q1(r,i),t)}function GL(e,t){return t=Cs(181387,t),Object.keys(e).sort().reduce((i,r)=>(i=X1(r,i),Q1(e[r],i)),t)}var UE;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(UE||(UE={}));function K1(e,t,i=32){const r=i-t,s=~((1<<r)-1);return(e<<t|(s&e)>>>r)>>>0}function bl(e,t=32){return e instanceof ArrayBuffer?px(_.wrap(new Uint8Array(e))):(e>>>0).toString(16).padStart(t/4,"0")}var iY=class E3{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const r=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(nd(o))if(a+1<i){const l=t.charCodeAt(a+1);od(l)?(a++,c=b1(o,l)):c=65533}else{n=o;break}else od(o)&&(c=65533);if(s=this.w(r,s,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,i,r){return r<128?t[i++]=r:r<2048?(t[i++]=192|(r&1984)>>>6,t[i++]=128|(r&63)>>>0):r<65536?(t[i++]=224|(r&61440)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0):(t[i++]=240|(r&1835008)>>>18,t[i++]=128|(r&258048)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0),i>=64&&(this.y(),i-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),bl(this.h)+bl(this.l)+bl(this.m)+bl(this.n)+bl(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=E3.g,i=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,i.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,K1(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let r=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=K1(r,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=K1(s,30),s=r,r=u;this.h=this.h+r&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},BE;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(BE||(BE={}));function ev(...e){switch(e.length){case 1:return p(1830,null,e[0]);case 2:return p(1831,null,e[0],e[1]);case 3:return p(1832,null,e[0],e[1],e[2]);default:return}}var ZL=p(1833,null),JL=p(1834,null),yl=class l4{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw i1(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const i=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:i})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const i=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:i})}else this.h(126)?this.k(9):this.l(ev("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(ev("&&"));break;case 124:this.h(124)?this.k(16):this.l(ev("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,r=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:r};this.g.push({offset:i,lexeme:r,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),r=l4.b.get(i);r?this.k(r):this.f.push({type:17,lexeme:i,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(ZL);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,r=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(JL);return}const n=this.c.charCodeAt(t);if(i)i=!1;else if(n===47&&!r){t++;break}else n===91?r=!0:n===92?i=!0:n===93&&(r=!1);t++}for(;t<this.c.length&&l4.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},ei=new Map;ei.set("false",!1),ei.set("true",!0),ei.set("isMac",Ft),ei.set("isLinux",Et),ei.set("isWindows",je),ei.set("isWeb",ed),ei.set("isMacNative",Ft&&!ed),ei.set("isEdge",A5),ei.set("isFirefox",eT),ei.set("isChrome",f1),ei.set("isSafari",tT);var YL=Object.prototype.hasOwnProperty,zE;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(zE||(zE={}));var QL={regexParsingWithErrorRecovery:!0},XL=p(1810,null),KL=p(1811,null),eR=p(1812,null),HE=p(1813,null),tR=p(1814,null),iR=p(1815,null),rR=p(1816,null),sR=p(1817,null),WE=class Ph{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=QL){this.k=t,this.d=new yl,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:XL,offset:0,lexeme:"",additionalInfo:KL});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const r=this.D(),s=r.type===17?iR:void 0;throw this.h.push({message:tR,offset:r.offset,lexeme:yl.getLexeme(r),additionalInfo:s}),Ph.c}return i}catch(i){if(i!==Ph.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const i=this.o();t.push(i)}return t.length===1?t[0]:ui.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const i=this.s();t.push(i)}return t.length===1?t[0]:ui.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),Si.INSTANCE;case 12:return this.z(),Bi.INSTANCE;case 0:{this.z();const i=this.l();return this.A(1,HE),i?.negate()}case 17:return this.z(),El.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),ui.true();case 12:return this.z(),ui.false();case 0:{this.z();const i=this.l();return this.A(1,HE),i}case 17:{const i=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return ov.create(i,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let d=0;d<s.lexeme.length;d++)s.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let d=0;d<o.lexeme.length;d++)o.lexeme.charCodeAt(d)===40?a++:s.lexeme.charCodeAt(d)===41&&a--}if(a<0)break;n.push(yl.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return ui.regex(i,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!rd(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return ov.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,eR);const s=this.u();return ui.notIn(i,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return ui.equals(i,s);switch(s){case"true":return ui.has(i);case"false":return ui.not(i);default:return ui.equals(i,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return ui.notEquals(i,s);switch(s){case"true":return ui.not(i);case"false":return ui.has(i);default:return ui.notEquals(i,s)}}case 5:return this.z(),sv.create(i,this.u());case 6:return this.z(),nv.create(i,this.u());case 7:return this.z(),Cd.create(i,this.u());case 8:return this.z(),rv.create(i,this.u());case 13:return this.z(),ui.in(i,this.u());default:return ui.has(i)}}case 20:throw this.h.push({message:rR,offset:t.offset,lexeme:"",additionalInfo:sR}),Ph.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,r){const s=p(1818,null,t,yl.getLexeme(i)),n=i.offset,o=yl.getLexeme(i);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:r}),Ph.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},ui=class{static false(){return Si.INSTANCE}static true(){return Bi.INSTANCE}static has(e){return xl.create(e)}static equals(e,t){return tv.create(e,t)}static notEquals(e,t){return iv.create(e,t)}static regex(e,t){return ov.create(e,t)}static in(e,t){return _E.create(e,t)}static notIn(e,t){return VE.create(e,t)}static not(e){return El.create(e)}static and(...e){return GE.create(e,null,!0)}static or(...e){return av.create(e,null,!0)}static greater(e,t){return Cd.create(e,t)}static greaterEquals(e,t){return rv.create(e,t)}static smaller(e,t){return sv.create(e,t)}static smallerEquals(e,t){return nv.create(e,t)}static{this.c=new WE({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function nR(e){const t=new WE({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(r=>({errorMessage:r.additionalInfo?p(1819,null,r.additionalInfo):p(1820,null),offset:r.offset,length:r.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(r=>({errorMessage:r.additionalInfo?`${r.message}. ${r.additionalInfo}`:r.message,offset:r.offset,length:r.lexeme.length})):[]))}function Al(e,t){return e.cmp(t)}var Si=class S3{static{this.INSTANCE=new S3}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Bi.INSTANCE}},Bi=class k3{static{this.INSTANCE=new k3}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return Si.INSTANCE}},xl=class I3{static create(t,i=null){const r=ei.get(t);return typeof r=="boolean"?r?Bi.INSTANCE:Si.INSTANCE:new I3(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:JE(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=ei.get(this.key);return typeof t=="boolean"?t?Bi.INSTANCE:Si.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=El.create(this.key,this)),this.c}},tv=class C3{static create(t,i,r=null){if(typeof i=="boolean")return i?xl.create(t,r):El.create(t,r);const s=ei.get(t);return typeof s=="boolean"?i===(s?"true":"false")?Bi.INSTANCE:Si.INSTANCE:new C3(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:uo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=ei.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Bi.INSTANCE:Si.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=iv.create(this.c,this.d,this)),this.f}},_E=class $3{static create(t,i){return new $3(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:uo(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),r=t.getValue(this.d);return Array.isArray(i)?i.includes(r):typeof r=="string"&&typeof i=="object"&&i!==null?YL.call(i,r):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=VE.create(this.d,this.f)),this.c}},VE=class D3{static create(t,i){return new D3(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=11,this.c=_E.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},iv=class P3{static create(t,i,r=null){if(typeof i=="boolean")return i?El.create(t,r):xl.create(t,r);const s=ei.get(t);return typeof s=="boolean"?i===(s?"true":"false")?Si.INSTANCE:Bi.INSTANCE:new P3(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:uo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=ei.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Si.INSTANCE:Bi.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=tv.create(this.c,this.d,this)),this.f}},El=class T3{static create(t,i=null){const r=ei.get(t);return typeof r=="boolean"?r?Si.INSTANCE:Bi.INSTANCE:new T3(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:JE(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=ei.get(this.c);return typeof t=="boolean"?t?Si.INSTANCE:Bi.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=xl.create(this.c,this)),this.d}};function Id(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):Si.INSTANCE}var Cd=class M3{static create(t,i,r=null){return Id(i,s=>new M3(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:uo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=nv.create(this.c,this.d,this)),this.f}},rv=class N3{static create(t,i,r=null){return Id(i,s=>new N3(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:uo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=sv.create(this.c,this.d,this)),this.f}},sv=class L3{static create(t,i,r=null){return Id(i,s=>new L3(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:uo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=rv.create(this.c,this.d,this)),this.f}},nv=class R3{static create(t,i,r=null){return Id(i,s=>new R3(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:uo(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Cd.create(this.c,this.d,this)),this.f}},ov=class O3{static create(t,i){return new O3(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return i<r?-1:i>r?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return this.d===t.d&&i===r}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=oR.create(this)),this.c}},oR=class u4{static create(t){return new u4(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new u4(this.c.map(t))}negate(){return this.c}};function qE(e){let t=null;for(let i=0,r=e.length;i<r;i++){const s=e[i].substituteConstants();if(e[i]!==s&&t===null){t=[];for(let n=0;n<i;n++)t[n]=e[n]}t!==null&&(t[i]=s)}return t===null?e:t}var GE=class Vc{static create(t,i,r){return Vc.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=Al(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=qE(this.expr);return t===this.expr?this:Vc.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,r){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return Si.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Bi.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(Al);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=av.create(o.expr.map(u=>Vc.create([u,a],null,r)),null,c);l&&(s.push(l),s.sort(Al))}if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Si.INSTANCE;if(s.length===1)return s[0]}return new Vc(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Vc(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=av.create(t,this,!0)}return this.c}},av=class sa{static create(t,i,r){return sa.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=Al(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=qE(this.expr);return t===this.expr?this:sa.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,r){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Bi.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return Si.INSTANCE;s.sort(Al)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Bi.INSTANCE;if(s.length===1)return s[0]}return new sa(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new sa(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),r=t.shift(),s=[];for(const n of YE(i))for(const o of YE(r))s.push(GE.create([n,o],null,!1));t.unshift(sa.create(s,null,!1))}this.c=sa.create(t,this,!0)}return this.c}},Z=class Fm extends xl{static{this.d=[]}static all(){return Fm.d.values()}constructor(t,i,r){super(t,null),this.f=i,typeof r=="object"?Fm.d.push({...r,key:t}):r!==!0&&Fm.d.push({key:t,description:r,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return tv.create(this.key,t)}notEqualsTo(t){return iv.create(this.key,t)}greater(t){return Cd.create(this.key,t)}},ZE=V("contextKeyService");function JE(e,t){return e<t?-1:e>t?1:0}function uo(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function YE(e){return e.type===9?e.expr:[e]}var Ce=V("logService"),vn=V("loggerService"),ie;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(ie||(ie={}));var aR=ie.Info;function cv(e,t){return e!==ie.Off&&e<=t}function cR(e,t,i){switch(t){case ie.Trace:e.trace(i);break;case ie.Debug:e.debug(i);break;case ie.Info:e.info(i);break;case ie.Warning:e.warn(i);break;case ie.Error:e.error(i);break;case ie.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function Sa(e,t=!1){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(s instanceof Error&&(s=Zr(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}i+=(r>0?" ":"")+s}return i}var QE=class extends te{constructor(){super(...arguments),this.b=aR,this.c=this.B(new $),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return cv(this.b,e)}g(e){return this.q.isDisposed?!1:this.f(e)}},lv=class extends QE{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g(ie.Trace)&&this.m(ie.Trace,Sa([e,...t],!0))}debug(e,...t){this.g(ie.Debug)&&this.m(ie.Debug,Sa([e,...t]))}info(e,...t){this.g(ie.Info)&&this.m(ie.Info,Sa([e,...t]))}warn(e,...t){this.g(ie.Warning)&&this.m(ie.Warning,Sa([e,...t]))}error(e,...t){if(this.g(ie.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.m(ie.Error,Sa(i))}else this.m(ie.Error,Sa([e,...t]))}flush(){}},lR=class extends QE{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.h)i.trace(e,...t)}debug(e,...t){for(const i of this.h)i.debug(e,...t)}info(e,...t){for(const i of this.h)i.info(e,...t)}warn(e,...t){for(const i of this.h)i.warn(e,...t)}error(e,...t){for(const i of this.h)i.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},uR=class extends te{constructor(e,t,i){if(super(),this.j=e,this.m=t,this.b=new Gt,this.f=this.B(new $),this.onDidChangeLoggers=this.f.event,this.g=this.B(new $),this.onDidChangeLogLevel=this.g.event,this.h=this.B(new $),this.onDidChangeVisibility=this.h.event,i)for(const r of i)this.b.set(r.resource,{logger:void 0,info:r})}n(e){return Fe(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const i=this.s(e),r=Fe(e)?e:t?.id??Is(i.toString()).toString(16);let s=this.b.get(i)?.logger;const n=t?.logLevel==="always"?ie.Trace:t?.logLevel;s||(s=this.t(i,n??this.getLogLevel(i)??this.j,{...t,id:r}));const o={logger:s,info:{resource:i,id:r,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),s}s(e){return Fe(e)?wt(this.m,`${e}.log`):e}setLogLevel(e,t){if(A.isUri(e)){const i=e,r=t,s=this.b.get(i);s&&r!==s.info.logLevel&&(s.info.logLevel=r===this.j?void 0:r,s.logger?.setLevel(r),this.b.set(s.info.resource,s),this.g.fire([i,r]))}else{this.j=e;for(const[i,r]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&r.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const i=this.n(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.h.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.s(e),i=this.b.get(t);i&&(i.logger&&i.logger.dispose(),this.b.delete(t),this.f.fire({added:[],removed:[i.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function hR(e){switch(e){case ie.Trace:return"trace";case ie.Debug:return"debug";case ie.Info:return"info";case ie.Warning:return"warn";case ie.Error:return"error";case ie.Off:return"off"}}function dR(e){switch(e){case"trace":return ie.Trace;case"debug":return ie.Debug;case"info":return ie.Info;case"warn":return ie.Warning;case"error":return ie.Error;case"critical":return ie.Error;case"off":return ie.Off}}var rY=new Z("logLevel",hR(ie.Info)),Jr=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},XE=[],KE;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(KE||(KE={}));function Te(e,t,i){t instanceof Jr||(t=new Jr(t,[],!!i)),XE.push([e,t])}function fR(){return XE}var uv=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},At=V("IExtHostInitDataService"),pR=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},eS=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new pR(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),r=this.c(t,i);if(r)return r}}c(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this.c(r,t);if(s)return s;t.delete(i)}}},gR=!1,tS=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},mR=class h4{constructor(t=new uv,i=!1,r,s=gR){this.i=t,this.j=i,this.k=r,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(wl,this),this._globalGraph=s?r?._globalGraph??new eS(n=>n):void 0}dispose(){if(!this.f){this.f=!0,wr(this.h),this.h.clear();for(const t of this.g)t5(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const r=this,s=new class extends h4{dispose(){r.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),i?.add(s),s}invokeFunction(t,...i){this.m();const r=hv.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw i1("service accessor is only valid during the invocation of its target method");const a=this.s(o,r);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...i)}finally{s=!0,r.stop()}}createInstance(t,...i){this.m();let r,s;return t instanceof Jr?(r=hv.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(i),r)):(r=hv.traceCreation(this.l,t),s=this.o(t,i,r)),r.stop(),s}o(t,i=[],r){const s=Sr.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,r);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(n))}q(t,i){if(this.i.get(t)instanceof Jr)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const r=this.r(t);return r instanceof Jr?this.u(t,r,i.branch(t,!0)):(i.branch(t,!1),r)}u(t,i,r){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,r)}finally{this.t.delete(t)}}v(t,i,r){const s=new eS(c=>c.id.toString());let n=0;const o=[{id:t,desc:i,_trace:r}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new tS(s);for(const l of Sr.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Jr){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new tS(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Jr){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,i,r=[],s,n){if(this.i.get(t)instanceof Jr)return this.x(t,i,r,s,n,this.g);if(this.k)return this.k.w(t,i,r,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,r=[],s,n,o){if(s){const a=new h4(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new xM(()=>{const u=a.o(i,r,n);for(const[h,d]of c){const f=u[h];if(typeof f=="function")for(const g of d)g.disposable=f.apply(u,g.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=c.get(h);return g||(g=new nn,c.set(h,g)),(b,x,E)=>{if(l.isInitialized)return l.value[h](b,x,E);{const I={listener:[b,x,E],disposable:void 0},U=g.push(I);return re(()=>{U(),I.disposable?.dispose()})}}}if(h in u)return u[h];const d=l.value;let f=d[h];return typeof f!="function"||(f=f.bind(d),u[h]=f),f},set(u,h,d){return l.value[h]=d,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,r,n);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},iS;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(iS||(iS={}));var hv=class ds{static{this.all=new Set}static{this.c=new class extends ds{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new ds(2,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ds.c}static traceCreation(t,i){return t?new ds(1,i.name):ds.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const r=new ds(3,t.toString());return this.h.push([t,i,r]),r}stop(){const t=Date.now()-this.g;ds.f+=t;let i=!1;function r(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){i=!0,a.push(`${c}CREATES -> ${l}`);const d=r(n+1,h);d&&a.push(d)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${ds.f.toFixed(2)}ms)`];(t>2||i)&&ds.all.add(s.join(`
`))}},De=V("IExtHostRpcService"),vR=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},Sl=V("IURITransformerService"),wR=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},bR=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},yR=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?v1(e,this.b,0,e.length,this.c,this.d):ll(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},rS=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===47||this.f&&i===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?v1(e,this.b,0,e.length,this.d,this.e):ll(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},sS;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(sS||(sS={}));var nS=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new rS(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return w1(e,this.c.scheme);if(this.d[this.e]===2)return w1(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return io(e,this.c.query);if(this.d[this.e]===5)return io(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},ho=class d4{static{this.Val=Symbol("undefined_placeholder")}static wrap(t){return t===void 0?d4.Val:t}static unwrap(t){return t===d4.Val?void 0:t}},$d=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},oS;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(oS||(oS={}));var wn=class Th{static forUris(t=()=>!1,i=()=>!1){return new Th(new nS(t,i))}static forPaths(t=!1){return new Th(new rS(void 0,!t))}static forStrings(){return new Th(new bR)}static forConfigKeys(){return new Th(new yR)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const r=i.slice(0);W4(r);for(const s of r)this.set(s,t)}else{const r=t.slice(0);W4(r);for(const s of r)this.set(s[0],s[1])}}set(t,i){const r=this.b.reset(t);let s;this.c||(this.c=new $d,this.c.segment=r.value());const n=[];for(s=this.c;;){const a=r.cmp(s.segment);if(a>0)s.left||(s.left=new $d,s.left.segment=r.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new $d,s.right.segment=r.value()),n.push([1,s]),s=s.right;else if(r.hasNext())r.next(),s.mid||(s.mid=new $d,s.mid.segment=r.value()),n.push([0,s]),s=s.mid;else break}const o=ho.unwrap(s.value);s.value=ho.wrap(i),s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return ho.unwrap(this.d(t)?.value)}d(t){const i=this.b.reset(t);let r=this.c;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const r=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=r.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(r.hasNext())r.next(),s.push([0,n]),n=n.mid;else break}if(n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=[[1,n]],a=this.f(n.right,o);if(a.key){n.key=a.key,n.value=a.value,n.segment=a.segment;const c=a.right;if(o.length>1){const[u,h]=o[o.length-1];switch(u){case-1:h.left=c;break;case 0:a1(!1);case 1:a1(!1)}}else n.right=c;const l=this.g(o);if(s.length>0){const[u,h]=s[s.length-1];switch(u){case-1:h.left=l;break;case 0:h.mid=l;break;case 1:h.right=l;break}}else this.c=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}this.c=this.g(s)??this.c}}f(t,i){for(;t.left;)i.push([-1,t]),t=t.left;return t}g(t){for(let i=t.length-1;i>=0;i--){const r=t[i][1];r.updateHeight();const s=r.balanceFactor();if(s>1?(r.right.balanceFactor()>=0||(r.right=r.right.rotateRight()),t[i][1]=r.rotateLeft()):s<-1&&(r.left.balanceFactor()<=0||(r.left=r.left.rotateLeft()),t[i][1]=r.rotateRight()),i>0)switch(t[i-1][0]){case-1:t[i-1][1].left=t[i][1];break;case 1:t[i-1][1].right=t[i][1];break;case 0:t[i-1][1].mid=t[i][1];break}else return t[0][1]}}findSubstr(t){const i=this.b.reset(t);let r=this.c,s;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),s=ho.unwrap(r.value)||s,r=r.mid;else break}return r&&ho.unwrap(r.value)||s}findSuperstr(t){return this.h(t,!1)}h(t,i){const r=this.b.reset(t);let s=this.c;for(;s;){const n=r.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(r.hasNext())r.next(),s=s.mid;else return s.mid?this.j(s.mid):i?ho.unwrap(s.value):void 0}}hasElementOrSubtree(t){return this.h(t,!0)!==void 0}forEach(t){for(const[i,r]of this)t(r,i)}*[Symbol.iterator](){yield*this.j(this.c)}j(t){const i=[];return this.l(t,i),i[Symbol.iterator]()}l(t,i){t&&(t.left&&this.l(t.left,i),t.value!==void 0&&i.push([t.key,ho.unwrap(t.value)]),t.mid&&this.l(t.mid,i),t.right&&this.l(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const r=i.balanceFactor();return r<-1||r>1?!1:t(i.left)&&t(i.right)};return t(this.c)}};function AR(e,t,i){return Math.min(Math.max(e,t),i)}var xR=class{constructor(){this.a=0}getNext(){return this.a++}},ER=class{constructor(){this.a=1,this.b=0}update(e){return this.b=this.b+(e-this.b)/this.a,this.a+=1,this.b}get value(){return this.b}},kl;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(kl||(kl={})),function(e){const t="error",i="warning",r="warn",s="info",n="ignore";function o(c){return c?_r(t,c)?e.Error:_r(i,c)||_r(r,c)?e.Warning:_r(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return s;default:return n}}e.toString=a}(kl||(kl={}));var Mt=kl,SR=Mt,sY=V("notificationService"),aS;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.SILENT=2]="SILENT",e[e.URGENT=3]="URGENT"})(aS||(aS={}));var cS;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(cS||(cS={}));var lS;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(lS||(lS={}));var Dd=V("contextService");function kR(e){const t=e;return typeof t?.id=="string"&&A.isUri(t.uri)}function IR(e){const t=e;return typeof t?.id=="string"&&A.isUri(t.configPath)}var uS;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(uS||(uS={}));var CR=class{get folders(){return this.g}set folders(e){this.g=e,this.n()}constructor(e,t,i,r,s){this.h=e,this.j=i,this.k=r,this.l=s,this.c=wn.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=wn.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},dv=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return wt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function fv(e){return new dv({uri:e,index:0,name:C1(e)},{uri:e.toString()})}var hS="code-workspace",$R=`.${hS}`,nY=[{name:p(2692,null),extensions:[hS]}];function DR(e){return(typeof e=="string"?id(e):cM(e))===$R}var PR=class{constructor(){this.a=new Set(Object.keys(q)),this.b=new Map,this.extUri=new ul(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},ka=V("IExtHostFileSystemInfo"),pv=Object.freeze({create:e=>ha(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>pv.split(e).filter(t=>!t.startsWith("#"))}),oY=new Uint32Array(10),dS;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(dS||(dS={}));var fS;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(fS||(fS={}));var pS;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(pS||(pS={}));var aY=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),cY=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),lY=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),uY=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function gS(...e){return function(t,i){for(let r=0,s=e.length;r<s;r++){const n=e[r](t,i);if(n)return n}return null}}var hY=mS.bind(void 0,!1),gv=mS.bind(void 0,!0);function mS(e,t,i){if(!i||i.length<t.length)return null;let r;return e?r=sd(i,t):r=i.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function TR(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function MR(e,t){return mv(e.toLowerCase(),t.toLowerCase(),0,0)}function mv(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]===t[r]){let s=null;return(s=mv(e,t,i+1,r+1))?wS({start:r,end:r+1},s):null}return mv(e,t,i,r+1)}function vv(e){return 97<=e&&e<=122}function Il(e){return 65<=e&&e<=90}function wv(e){return 48<=e&&e<=57}function NR(e){return e===32||e===9||e===10||e===13}var LR=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>LR.add(e.charCodeAt(0)));function vS(e){return vv(e)||Il(e)||wv(e)}function wS(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function bS(e,t){for(let i=t;i<e.length;i++){const r=e.charCodeAt(i);if(Il(r)||wv(r)||i>0&&!vS(e.charCodeAt(i-1)))return i}return e.length}function bv(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]!==t[r].toLowerCase())return null;{let s=null,n=r+1;for(s=bv(e,t,i+1,r+1);!s&&(n=bS(t,n))<t.length;)s=bv(e,t,i+1,n),n++;return s===null?null:wS({start:r,end:r+1},s)}}function RR(e){let t=0,i=0,r=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),Il(n)&&t++,vv(n)&&i++,vS(n)&&r++,wv(n)&&s++;const o=t/e.length,a=i/e.length,c=r/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function OR(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function FR(e){const{upperPercent:t,lowerPercent:i,alphaPercent:r,numericPercent:s}=e;return i>.2&&t<.8&&r>.6&&s<.2}function jR(e){let t=0,i=0,r=0,s=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n),Il(r)&&t++,vv(r)&&i++,NR(r)&&s++;return(t===0||i===0)&&s===0?e.length<=30:t<=5}function yS(e,t){if(!t||(t=t.trim(),t.length===0)||!jR(e))return null;t.length>60&&(t=t.substring(0,60));const i=RR(t);if(!FR(i)){if(!OR(i))return null;t=t.toLowerCase()}let r=null,s=0;for(e=e.toLowerCase();s<t.length&&(r=bv(e,t,0,s))===null;)s=bS(t,s+1);return r}var dY=gS(gv,yS,TR),fY=gS(gv,yS,MR),pY=new tl(1e4),Pd=128;function yv(){const e=[],t=[];for(let i=0;i<=Pd;i++)t[i]=0;for(let i=0;i<=Pd;i++)e.push(t.slice(0));return e}function AS(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var gY=AS(2*Pd),mY=AS(2*Pd),vY=yv(),wY=yv(),bY=yv(),xS;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(xS||(xS={}));var ES;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(ES||(ES={}));var yY=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},Av=Object.create(null);function m(e,t){if(Fe(t)){const i=Av[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return Av[e]=t,{id:e}}function UR(){return Av}var BR={add:m("add",6e4),plus:m("plus",6e4),gistNew:m("gist-new",6e4),repoCreate:m("repo-create",6e4),lightbulb:m("lightbulb",60001),lightBulb:m("light-bulb",60001),repo:m("repo",60002),repoDelete:m("repo-delete",60002),gistFork:m("gist-fork",60003),repoForked:m("repo-forked",60003),gitPullRequest:m("git-pull-request",60004),gitPullRequestAbandoned:m("git-pull-request-abandoned",60004),recordKeys:m("record-keys",60005),keyboard:m("keyboard",60005),tag:m("tag",60006),gitPullRequestLabel:m("git-pull-request-label",60006),tagAdd:m("tag-add",60006),tagRemove:m("tag-remove",60006),person:m("person",60007),personFollow:m("person-follow",60007),personOutline:m("person-outline",60007),personFilled:m("person-filled",60007),gitBranch:m("git-branch",60008),gitBranchCreate:m("git-branch-create",60008),gitBranchDelete:m("git-branch-delete",60008),sourceControl:m("source-control",60008),mirror:m("mirror",60009),mirrorPublic:m("mirror-public",60009),star:m("star",60010),starAdd:m("star-add",60010),starDelete:m("star-delete",60010),starEmpty:m("star-empty",60010),comment:m("comment",60011),commentAdd:m("comment-add",60011),alert:m("alert",60012),warning:m("warning",60012),search:m("search",60013),searchSave:m("search-save",60013),logOut:m("log-out",60014),signOut:m("sign-out",60014),logIn:m("log-in",60015),signIn:m("sign-in",60015),eye:m("eye",60016),eyeUnwatch:m("eye-unwatch",60016),eyeWatch:m("eye-watch",60016),circleFilled:m("circle-filled",60017),primitiveDot:m("primitive-dot",60017),closeDirty:m("close-dirty",60017),debugBreakpoint:m("debug-breakpoint",60017),debugBreakpointDisabled:m("debug-breakpoint-disabled",60017),debugHint:m("debug-hint",60017),terminalDecorationSuccess:m("terminal-decoration-success",60017),primitiveSquare:m("primitive-square",60018),edit:m("edit",60019),pencil:m("pencil",60019),info:m("info",60020),issueOpened:m("issue-opened",60020),gistPrivate:m("gist-private",60021),gitForkPrivate:m("git-fork-private",60021),lock:m("lock",60021),mirrorPrivate:m("mirror-private",60021),close:m("close",60022),removeClose:m("remove-close",60022),x:m("x",60022),repoSync:m("repo-sync",60023),sync:m("sync",60023),clone:m("clone",60024),desktopDownload:m("desktop-download",60024),beaker:m("beaker",60025),microscope:m("microscope",60025),vm:m("vm",60026),deviceDesktop:m("device-desktop",60026),file:m("file",60027),fileText:m("file-text",60027),more:m("more",60028),ellipsis:m("ellipsis",60028),kebabHorizontal:m("kebab-horizontal",60028),mailReply:m("mail-reply",60029),reply:m("reply",60029),organization:m("organization",60030),organizationFilled:m("organization-filled",60030),organizationOutline:m("organization-outline",60030),newFile:m("new-file",60031),fileAdd:m("file-add",60031),newFolder:m("new-folder",60032),fileDirectoryCreate:m("file-directory-create",60032),trash:m("trash",60033),trashcan:m("trashcan",60033),history:m("history",60034),clock:m("clock",60034),folder:m("folder",60035),fileDirectory:m("file-directory",60035),symbolFolder:m("symbol-folder",60035),logoGithub:m("logo-github",60036),markGithub:m("mark-github",60036),github:m("github",60036),terminal:m("terminal",60037),console:m("console",60037),repl:m("repl",60037),zap:m("zap",60038),symbolEvent:m("symbol-event",60038),error:m("error",60039),stop:m("stop",60039),variable:m("variable",60040),symbolVariable:m("symbol-variable",60040),array:m("array",60042),symbolArray:m("symbol-array",60042),symbolModule:m("symbol-module",60043),symbolPackage:m("symbol-package",60043),symbolNamespace:m("symbol-namespace",60043),symbolObject:m("symbol-object",60043),symbolMethod:m("symbol-method",60044),symbolFunction:m("symbol-function",60044),symbolConstructor:m("symbol-constructor",60044),symbolBoolean:m("symbol-boolean",60047),symbolNull:m("symbol-null",60047),symbolNumeric:m("symbol-numeric",60048),symbolNumber:m("symbol-number",60048),symbolStructure:m("symbol-structure",60049),symbolStruct:m("symbol-struct",60049),symbolParameter:m("symbol-parameter",60050),symbolTypeParameter:m("symbol-type-parameter",60050),symbolKey:m("symbol-key",60051),symbolText:m("symbol-text",60051),symbolReference:m("symbol-reference",60052),goToFile:m("go-to-file",60052),symbolEnum:m("symbol-enum",60053),symbolValue:m("symbol-value",60053),symbolRuler:m("symbol-ruler",60054),symbolUnit:m("symbol-unit",60054),activateBreakpoints:m("activate-breakpoints",60055),archive:m("archive",60056),arrowBoth:m("arrow-both",60057),arrowDown:m("arrow-down",60058),arrowLeft:m("arrow-left",60059),arrowRight:m("arrow-right",60060),arrowSmallDown:m("arrow-small-down",60061),arrowSmallLeft:m("arrow-small-left",60062),arrowSmallRight:m("arrow-small-right",60063),arrowSmallUp:m("arrow-small-up",60064),arrowUp:m("arrow-up",60065),bell:m("bell",60066),bold:m("bold",60067),book:m("book",60068),bookmark:m("bookmark",60069),debugBreakpointConditionalUnverified:m("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:m("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:m("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:m("debug-breakpoint-data-unverified",60072),debugBreakpointData:m("debug-breakpoint-data",60073),debugBreakpointDataDisabled:m("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:m("debug-breakpoint-log-unverified",60074),debugBreakpointLog:m("debug-breakpoint-log",60075),debugBreakpointLogDisabled:m("debug-breakpoint-log-disabled",60075),briefcase:m("briefcase",60076),broadcast:m("broadcast",60077),browser:m("browser",60078),bug:m("bug",60079),calendar:m("calendar",60080),caseSensitive:m("case-sensitive",60081),check:m("check",60082),checklist:m("checklist",60083),chevronDown:m("chevron-down",60084),chevronLeft:m("chevron-left",60085),chevronRight:m("chevron-right",60086),chevronUp:m("chevron-up",60087),chromeClose:m("chrome-close",60088),chromeMaximize:m("chrome-maximize",60089),chromeMinimize:m("chrome-minimize",60090),chromeRestore:m("chrome-restore",60091),circleOutline:m("circle-outline",60092),circle:m("circle",60092),debugBreakpointUnverified:m("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:m("terminal-decoration-incomplete",60092),circleSlash:m("circle-slash",60093),circuitBoard:m("circuit-board",60094),clearAll:m("clear-all",60095),clippy:m("clippy",60096),closeAll:m("close-all",60097),cloudDownload:m("cloud-download",60098),cloudUpload:m("cloud-upload",60099),code:m("code",60100),collapseAll:m("collapse-all",60101),colorMode:m("color-mode",60102),commentDiscussion:m("comment-discussion",60103),creditCard:m("credit-card",60105),dash:m("dash",60108),dashboard:m("dashboard",60109),database:m("database",60110),debugContinue:m("debug-continue",60111),debugDisconnect:m("debug-disconnect",60112),debugPause:m("debug-pause",60113),debugRestart:m("debug-restart",60114),debugStart:m("debug-start",60115),debugStepInto:m("debug-step-into",60116),debugStepOut:m("debug-step-out",60117),debugStepOver:m("debug-step-over",60118),debugStop:m("debug-stop",60119),debug:m("debug",60120),deviceCameraVideo:m("device-camera-video",60121),deviceCamera:m("device-camera",60122),deviceMobile:m("device-mobile",60123),diffAdded:m("diff-added",60124),diffIgnored:m("diff-ignored",60125),diffModified:m("diff-modified",60126),diffRemoved:m("diff-removed",60127),diffRenamed:m("diff-renamed",60128),diff:m("diff",60129),diffSidebyside:m("diff-sidebyside",60129),discard:m("discard",60130),editorLayout:m("editor-layout",60131),emptyWindow:m("empty-window",60132),exclude:m("exclude",60133),extensions:m("extensions",60134),eyeClosed:m("eye-closed",60135),fileBinary:m("file-binary",60136),fileCode:m("file-code",60137),fileMedia:m("file-media",60138),filePdf:m("file-pdf",60139),fileSubmodule:m("file-submodule",60140),fileSymlinkDirectory:m("file-symlink-directory",60141),fileSymlinkFile:m("file-symlink-file",60142),fileZip:m("file-zip",60143),files:m("files",60144),filter:m("filter",60145),flame:m("flame",60146),foldDown:m("fold-down",60147),foldUp:m("fold-up",60148),fold:m("fold",60149),folderActive:m("folder-active",60150),folderOpened:m("folder-opened",60151),gear:m("gear",60152),gift:m("gift",60153),gistSecret:m("gist-secret",60154),gist:m("gist",60155),gitCommit:m("git-commit",60156),gitCompare:m("git-compare",60157),compareChanges:m("compare-changes",60157),gitMerge:m("git-merge",60158),githubAction:m("github-action",60159),githubAlt:m("github-alt",60160),globe:m("globe",60161),grabber:m("grabber",60162),graph:m("graph",60163),gripper:m("gripper",60164),heart:m("heart",60165),home:m("home",60166),horizontalRule:m("horizontal-rule",60167),hubot:m("hubot",60168),inbox:m("inbox",60169),issueReopened:m("issue-reopened",60171),issues:m("issues",60172),italic:m("italic",60173),jersey:m("jersey",60174),json:m("json",60175),kebabVertical:m("kebab-vertical",60176),key:m("key",60177),law:m("law",60178),lightbulbAutofix:m("lightbulb-autofix",60179),linkExternal:m("link-external",60180),link:m("link",60181),listOrdered:m("list-ordered",60182),listUnordered:m("list-unordered",60183),liveShare:m("live-share",60184),loading:m("loading",60185),location:m("location",60186),mailRead:m("mail-read",60187),mail:m("mail",60188),markdown:m("markdown",60189),megaphone:m("megaphone",60190),mention:m("mention",60191),milestone:m("milestone",60192),gitPullRequestMilestone:m("git-pull-request-milestone",60192),mortarBoard:m("mortar-board",60193),move:m("move",60194),multipleWindows:m("multiple-windows",60195),mute:m("mute",60196),noNewline:m("no-newline",60197),note:m("note",60198),octoface:m("octoface",60199),openPreview:m("open-preview",60200),package:m("package",60201),paintcan:m("paintcan",60202),pin:m("pin",60203),play:m("play",60204),run:m("run",60204),plug:m("plug",60205),preserveCase:m("preserve-case",60206),preview:m("preview",60207),project:m("project",60208),pulse:m("pulse",60209),question:m("question",60210),quote:m("quote",60211),radioTower:m("radio-tower",60212),reactions:m("reactions",60213),references:m("references",60214),refresh:m("refresh",60215),regex:m("regex",60216),remoteExplorer:m("remote-explorer",60217),remote:m("remote",60218),remove:m("remove",60219),replaceAll:m("replace-all",60220),replace:m("replace",60221),repoClone:m("repo-clone",60222),repoForcePush:m("repo-force-push",60223),repoPull:m("repo-pull",60224),repoPush:m("repo-push",60225),report:m("report",60226),requestChanges:m("request-changes",60227),rocket:m("rocket",60228),rootFolderOpened:m("root-folder-opened",60229),rootFolder:m("root-folder",60230),rss:m("rss",60231),ruby:m("ruby",60232),saveAll:m("save-all",60233),saveAs:m("save-as",60234),save:m("save",60235),screenFull:m("screen-full",60236),screenNormal:m("screen-normal",60237),searchStop:m("search-stop",60238),server:m("server",60240),settingsGear:m("settings-gear",60241),settings:m("settings",60242),shield:m("shield",60243),smiley:m("smiley",60244),sortPrecedence:m("sort-precedence",60245),splitHorizontal:m("split-horizontal",60246),splitVertical:m("split-vertical",60247),squirrel:m("squirrel",60248),starFull:m("star-full",60249),starHalf:m("star-half",60250),symbolClass:m("symbol-class",60251),symbolColor:m("symbol-color",60252),symbolConstant:m("symbol-constant",60253),symbolEnumMember:m("symbol-enum-member",60254),symbolField:m("symbol-field",60255),symbolFile:m("symbol-file",60256),symbolInterface:m("symbol-interface",60257),symbolKeyword:m("symbol-keyword",60258),symbolMisc:m("symbol-misc",60259),symbolOperator:m("symbol-operator",60260),symbolProperty:m("symbol-property",60261),wrench:m("wrench",60261),wrenchSubaction:m("wrench-subaction",60261),symbolSnippet:m("symbol-snippet",60262),tasklist:m("tasklist",60263),telescope:m("telescope",60264),textSize:m("text-size",60265),threeBars:m("three-bars",60266),thumbsdown:m("thumbsdown",60267),thumbsup:m("thumbsup",60268),tools:m("tools",60269),triangleDown:m("triangle-down",60270),triangleLeft:m("triangle-left",60271),triangleRight:m("triangle-right",60272),triangleUp:m("triangle-up",60273),twitter:m("twitter",60274),unfold:m("unfold",60275),unlock:m("unlock",60276),unmute:m("unmute",60277),unverified:m("unverified",60278),verified:m("verified",60279),versions:m("versions",60280),vmActive:m("vm-active",60281),vmOutline:m("vm-outline",60282),vmRunning:m("vm-running",60283),watch:m("watch",60284),whitespace:m("whitespace",60285),wholeWord:m("whole-word",60286),window:m("window",60287),wordWrap:m("word-wrap",60288),zoomIn:m("zoom-in",60289),zoomOut:m("zoom-out",60290),listFilter:m("list-filter",60291),listFlat:m("list-flat",60292),listSelection:m("list-selection",60293),selection:m("selection",60293),listTree:m("list-tree",60294),debugBreakpointFunctionUnverified:m("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:m("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:m("debug-breakpoint-function-disabled",60296),debugStackframeActive:m("debug-stackframe-active",60297),circleSmallFilled:m("circle-small-filled",60298),debugStackframeDot:m("debug-stackframe-dot",60298),terminalDecorationMark:m("terminal-decoration-mark",60298),debugStackframe:m("debug-stackframe",60299),debugStackframeFocused:m("debug-stackframe-focused",60299),debugBreakpointUnsupported:m("debug-breakpoint-unsupported",60300),symbolString:m("symbol-string",60301),debugReverseContinue:m("debug-reverse-continue",60302),debugStepBack:m("debug-step-back",60303),debugRestartFrame:m("debug-restart-frame",60304),debugAlt:m("debug-alt",60305),callIncoming:m("call-incoming",60306),callOutgoing:m("call-outgoing",60307),menu:m("menu",60308),expandAll:m("expand-all",60309),feedback:m("feedback",60310),gitPullRequestReviewer:m("git-pull-request-reviewer",60310),groupByRefType:m("group-by-ref-type",60311),ungroupByRefType:m("ungroup-by-ref-type",60312),account:m("account",60313),gitPullRequestAssignee:m("git-pull-request-assignee",60313),bellDot:m("bell-dot",60314),debugConsole:m("debug-console",60315),library:m("library",60316),output:m("output",60317),runAll:m("run-all",60318),syncIgnored:m("sync-ignored",60319),pinned:m("pinned",60320),githubInverted:m("github-inverted",60321),serverProcess:m("server-process",60322),serverEnvironment:m("server-environment",60323),pass:m("pass",60324),issueClosed:m("issue-closed",60324),stopCircle:m("stop-circle",60325),playCircle:m("play-circle",60326),record:m("record",60327),debugAltSmall:m("debug-alt-small",60328),vmConnect:m("vm-connect",60329),cloud:m("cloud",60330),merge:m("merge",60331),export:m("export",60332),graphLeft:m("graph-left",60333),magnet:m("magnet",60334),notebook:m("notebook",60335),redo:m("redo",60336),checkAll:m("check-all",60337),pinnedDirty:m("pinned-dirty",60338),passFilled:m("pass-filled",60339),circleLargeFilled:m("circle-large-filled",60340),circleLarge:m("circle-large",60341),circleLargeOutline:m("circle-large-outline",60341),combine:m("combine",60342),gather:m("gather",60342),table:m("table",60343),variableGroup:m("variable-group",60344),typeHierarchy:m("type-hierarchy",60345),typeHierarchySub:m("type-hierarchy-sub",60346),typeHierarchySuper:m("type-hierarchy-super",60347),gitPullRequestCreate:m("git-pull-request-create",60348),runAbove:m("run-above",60349),runBelow:m("run-below",60350),notebookTemplate:m("notebook-template",60351),debugRerun:m("debug-rerun",60352),workspaceTrusted:m("workspace-trusted",60353),workspaceUntrusted:m("workspace-untrusted",60354),workspaceUnknown:m("workspace-unknown",60355),terminalCmd:m("terminal-cmd",60356),terminalDebian:m("terminal-debian",60357),terminalLinux:m("terminal-linux",60358),terminalPowershell:m("terminal-powershell",60359),terminalTmux:m("terminal-tmux",60360),terminalUbuntu:m("terminal-ubuntu",60361),terminalBash:m("terminal-bash",60362),arrowSwap:m("arrow-swap",60363),copy:m("copy",60364),personAdd:m("person-add",60365),filterFilled:m("filter-filled",60366),wand:m("wand",60367),debugLineByLine:m("debug-line-by-line",60368),inspect:m("inspect",60369),layers:m("layers",60370),layersDot:m("layers-dot",60371),layersActive:m("layers-active",60372),compass:m("compass",60373),compassDot:m("compass-dot",60374),compassActive:m("compass-active",60375),azure:m("azure",60376),issueDraft:m("issue-draft",60377),gitPullRequestClosed:m("git-pull-request-closed",60378),gitPullRequestDraft:m("git-pull-request-draft",60379),debugAll:m("debug-all",60380),debugCoverage:m("debug-coverage",60381),runErrors:m("run-errors",60382),folderLibrary:m("folder-library",60383),debugContinueSmall:m("debug-continue-small",60384),beakerStop:m("beaker-stop",60385),graphLine:m("graph-line",60386),graphScatter:m("graph-scatter",60387),pieChart:m("pie-chart",60388),bracket:m("bracket",60175),bracketDot:m("bracket-dot",60389),bracketError:m("bracket-error",60390),lockSmall:m("lock-small",60391),azureDevops:m("azure-devops",60392),verifiedFilled:m("verified-filled",60393),newline:m("newline",60394),layout:m("layout",60395),layoutActivitybarLeft:m("layout-activitybar-left",60396),layoutActivitybarRight:m("layout-activitybar-right",60397),layoutPanelLeft:m("layout-panel-left",60398),layoutPanelCenter:m("layout-panel-center",60399),layoutPanelJustify:m("layout-panel-justify",60400),layoutPanelRight:m("layout-panel-right",60401),layoutPanel:m("layout-panel",60402),layoutSidebarLeft:m("layout-sidebar-left",60403),layoutSidebarRight:m("layout-sidebar-right",60404),layoutStatusbar:m("layout-statusbar",60405),layoutMenubar:m("layout-menubar",60406),layoutCentered:m("layout-centered",60407),target:m("target",60408),indent:m("indent",60409),recordSmall:m("record-small",60410),errorSmall:m("error-small",60411),terminalDecorationError:m("terminal-decoration-error",60411),arrowCircleDown:m("arrow-circle-down",60412),arrowCircleLeft:m("arrow-circle-left",60413),arrowCircleRight:m("arrow-circle-right",60414),arrowCircleUp:m("arrow-circle-up",60415),layoutSidebarRightOff:m("layout-sidebar-right-off",60416),layoutPanelOff:m("layout-panel-off",60417),layoutSidebarLeftOff:m("layout-sidebar-left-off",60418),blank:m("blank",60419),heartFilled:m("heart-filled",60420),map:m("map",60421),mapHorizontal:m("map-horizontal",60421),foldHorizontal:m("fold-horizontal",60421),mapFilled:m("map-filled",60422),mapHorizontalFilled:m("map-horizontal-filled",60422),foldHorizontalFilled:m("fold-horizontal-filled",60422),circleSmall:m("circle-small",60423),bellSlash:m("bell-slash",60424),bellSlashDot:m("bell-slash-dot",60425),commentUnresolved:m("comment-unresolved",60426),gitPullRequestGoToChanges:m("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:m("git-pull-request-new-changes",60428),searchFuzzy:m("search-fuzzy",60429),commentDraft:m("comment-draft",60430),send:m("send",60431),sparkle:m("sparkle",60432),insert:m("insert",60433),mic:m("mic",60434),thumbsdownFilled:m("thumbsdown-filled",60435),thumbsupFilled:m("thumbsup-filled",60436),coffee:m("coffee",60437),snake:m("snake",60438),game:m("game",60439),vr:m("vr",60440),chip:m("chip",60441),piano:m("piano",60442),music:m("music",60443),micFilled:m("mic-filled",60444),repoFetch:m("repo-fetch",60445),copilot:m("copilot",60446),lightbulbSparkle:m("lightbulb-sparkle",60447),robot:m("robot",60448),sparkleFilled:m("sparkle-filled",60449),diffSingle:m("diff-single",60450),diffMultiple:m("diff-multiple",60451),surroundWith:m("surround-with",60452),share:m("share",60453),gitStash:m("git-stash",60454),gitStashApply:m("git-stash-apply",60455),gitStashPop:m("git-stash-pop",60456),vscode:m("vscode",60457),vscodeInsiders:m("vscode-insiders",60458),codeOss:m("code-oss",60459),runCoverage:m("run-coverage",60460),runAllCoverage:m("run-all-coverage",60461),coverage:m("coverage",60462),githubProject:m("github-project",60463),mapVertical:m("map-vertical",60464),foldVertical:m("fold-vertical",60464),mapVerticalFilled:m("map-vertical-filled",60465),foldVerticalFilled:m("fold-vertical-filled",60465),goToSearch:m("go-to-search",60466),percentage:m("percentage",60467),sortPercentage:m("sort-percentage",60467),attach:m("attach",60468),goToEditingSession:m("go-to-editing-session",60469),editSession:m("edit-session",60470),codeReview:m("code-review",60471),copilotWarning:m("copilot-warning",60472),python:m("python",60473),copilotLarge:m("copilot-large",60474),copilotWarningLarge:m("copilot-warning-large",60475),keyboardTab:m("keyboard-tab",60476),copilotBlocked:m("copilot-blocked",60477),copilotNotConnected:m("copilot-not-connected",60478),flag:m("flag",60479),lightbulbEmpty:m("lightbulb-empty",60480),symbolMethodArrow:m("symbol-method-arrow",60481),copilotUnavailable:m("copilot-unavailable",60482),repoPinned:m("repo-pinned",60483),keyboardTabAbove:m("keyboard-tab-above",60484),keyboardTabBelow:m("keyboard-tab-below",60485),gitPullRequestDone:m("git-pull-request-done",60486),mcp:m("mcp",60487),extensionsLarge:m("extensions-large",60488),layoutPanelDock:m("layout-panel-dock",60489),layoutSidebarLeftDock:m("layout-sidebar-left-dock",60490),layoutSidebarRightDock:m("layout-sidebar-right-dock",60491),copilotInProgress:m("copilot-in-progress",60492),copilotError:m("copilot-error",60493),copilotSuccess:m("copilot-success",60494),chatSparkle:m("chat-sparkle",60495),searchSparkle:m("search-sparkle",60496),editSparkle:m("edit-sparkle",60497),copilotSnooze:m("copilot-snooze",60498)},zR={dialogError:m("dialog-error","error"),dialogWarning:m("dialog-warning","warning"),dialogInfo:m("dialog-info","info"),dialogClose:m("dialog-close","close"),treeItemExpanded:m("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:m("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:m("tree-filter-on-type-off","list-selection"),treeFilterClear:m("tree-filter-clear","close"),treeItemLoading:m("tree-item-loading","loading"),menuSelection:m("menu-selection","check"),menuSubmenu:m("menu-submenu","chevron-right"),menuBarMore:m("menubar-more","more"),scrollbarButtonLeft:m("scrollbar-button-left","triangle-left"),scrollbarButtonRight:m("scrollbar-button-right","triangle-right"),scrollbarButtonUp:m("scrollbar-button-up","triangle-up"),scrollbarButtonDown:m("scrollbar-button-down","triangle-down"),toolBarMore:m("toolbar-more","more"),quickInputBack:m("quick-input-back","arrow-left"),dropDownButton:m("drop-down-button",60084),symbolCustomColor:m("symbol-customcolor",60252),exportIcon:m("export",60332),workspaceUnspecified:m("workspace-unspecified",60355),newLine:m("newline",60394),thumbsDownFilled:m("thumbsdown-filled",60435),thumbsUpFilled:m("thumbsup-filled",60436),gitFetch:m("git-fetch",60445),lightbulbSparkleAutofix:m("lightbulb-sparkle-autofix",60447),debugBreakpointPending:m("debug-breakpoint-pending",60377)},ce={...BR,...zR},Ia;(function(e){function t(i){return!!i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(Ia||(Ia={}));var jt;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(d){const f=t.exec(d.id);if(!f)return i(ce.error);const[,g,v]=f,b=["codicon","codicon-"+g];return v&&b.push("codicon-modifier-"+v.substring(1)),b}e.asClassNameArray=i;function r(d){return i(d).join(" ")}e.asClassName=r;function s(d){return"."+i(d).join(".")}e.asCSSSelector=s;function n(d){return!!d&&typeof d=="object"&&typeof d.id=="string"&&(typeof d.color>"u"||Ia.isThemeColor(d.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(d){const f=o.exec(d);if(!f)return;const[,g]=f;return{id:g}}e.fromString=a;function c(d){return{id:d}}e.fromId=c;function l(d,f){let g=d.id;const v=g.lastIndexOf("~");return v!==-1&&(g=g.substring(0,v)),f&&(g=`${g}~${f}`),{id:g}}e.modify=l;function u(d){const f=d.id.lastIndexOf("~");if(f!==-1)return d.id.substring(f+1)}e.getModifier=u;function h(d,f){return d.id===f.id&&d.color?.id===f.color?.id}e.isEqual=h})(jt||(jt={}));var xv=new RegExp(`\\$\\(${jt.iconNameExpression}(?:${jt.iconModifierExpression})?\\)`,"g"),HR=new RegExp(`(\\\\)?${xv.source}`,"g");function WR(e){return e.replace(HR,(t,i)=>i?t:`\\${t}`)}var AY=new RegExp(`\\\\${xv.source}`,"g"),xY=new RegExp(`(\\s)?(\\\\)?${xv.source}(\\s)?`,"g"),EY=new RegExp(`\\$\\(${jt.iconNameCharacter}+\\)`,"g"),SS;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(SS||(SS={}));var Td=class F3{static lift(t){const i=new F3(t.value,t);return i.uris=t.uris,i.baseUri=t.baseUri?A.revive(t.baseUri):void 0,i}constructor(t="",i=!1){if(this.value=t,typeof this.value!="string")throw $e("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=i.isTrusted??void 0,this.supportThemeIcons=i.supportThemeIcons??!1,this.supportHtml=i.supportHtml??!1)}appendText(t,i=0){return this.value+=_R(this.supportThemeIcons?WR(t):t).replace(/([ \t]+)/g,(r,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\
`:`

`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,i){return this.value+=`
${VR(i,t)}
`,this}appendLink(t,i,r){return this.value+="[",this.value+=this.c(i,"]"),this.value+="](",this.value+=this.c(String(t),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(t,i){const r=new RegExp(ln(i),"g");return t.replace(r,(s,n)=>t.charAt(n-1)!=="\\"?`\\${s}`:s)}};function fo(e){return e instanceof Td?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function _R(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function VR(e,t){const i=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,r=i>=3?i+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function qR(e){const t=[],i=e.split("|").map(s=>s.trim());e=i[0];const r=i[1];if(r){const s=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function Ev(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var po=Ev();function kS(e){po=e}var IS=/[&<>"']/,GR=new RegExp(IS.source,"g"),CS=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ZR=new RegExp(CS.source,"g"),JR={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$S=e=>JR[e];function Ki(e,t){if(t){if(IS.test(e))return e.replace(GR,$S)}else if(CS.test(e))return e.replace(ZR,$S);return e}var YR=/(^|[^\[])\^/g;function ut(e,t){let i=typeof e=="string"?e:e.source;t=t||"";const r={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(YR,"$1"),i=i.replace(s,o),r},getRegex:()=>new RegExp(i,t)};return r}function DS(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var Cl={exec:()=>null};function PS(e,t){const i=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=i.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function $l(e,t,i){const r=e.length;if(r===0)return"";let s=0;for(;s<r;){const n=e.charAt(r-s-1);if(n===t&&!i)s++;else if(n!==t&&i)s++;else break}return e.slice(0,r-s)}function QR(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return-1}function TS(e,t,i,r){const s=t.href,n=t.title?Ki(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:i,href:s,title:n,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:i,href:s,title:n,text:Ki(o)}}function XR(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const r=i[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var Md=class{options;rules;lexer;constructor(e){this.options=e||po}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:$l(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=XR(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=$l(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:$l(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=$l(t[0],`
`).split(`
`),r="",s="";const n=[];for(;i.length>0;){let o=!1;const a=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))a.push(i[c]),o=!0;else if(!o)a.push(i[c]);else break;i=i.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,i.length===0)break;const d=n[n.length-1];if(d?.type==="code")break;if(d?.type==="blockquote"){const f=d,g=f.raw+`
`+i.join(`
`),v=this.blockquote(g);n[n.length-1]=v,r=r.substring(0,r.length-f.raw.length)+v.raw,s=s.substring(0,s.length-f.text.length)+v.text;break}else if(d?.type==="list"){const f=d,g=f.raw+`
`+i.join(`
`),v=this.list(g);n[n.length-1]=v,r=r.substring(0,r.length-d.raw.length)+v.raw,s=s.substring(0,s.length-f.raw.length)+v.raw,i=g.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const n=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,b=>" ".repeat(3*b.length)),h=e.split(`
`,1)[0],d=!u.trim(),f=0;if(this.options.pedantic?(f=2,l=u.trimStart()):d?f=t[1].length+1:(f=t[2].search(/[^ ]/),f=f>4?1:f,l=u.slice(f),f+=t[1].length),d&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const b=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),x=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),I=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const U=e.split(`
`,1)[0];if(h=U,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),E.test(h)||I.test(h)||b.test(h)||x.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(d||u.search(/[^ ]/)>=4||E.test(u)||I.test(u)||x.test(u))break;l+=`
`+h}!d&&!h.trim()&&(d=!0),c+=U+`
`,e=e.substring(U.length+1),u=h.slice(f)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let g=null,v;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(v=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!g,checked:v,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=PS(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<i.length;o++)n.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(PS(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ki(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const n=$l(i.slice(0,-1),"\\");if((i.length-n.length)%2===0)return}else{const n=QR(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);n&&(r=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),TS(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=t[r.toLowerCase()];if(!s){const n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return TS(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const n=[...r[0]].length-1;let o,a,c=n,l=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(r=u.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...r[0]][0].length,d=e.slice(0,n+r.index+h+a);if(Math.min(n,a)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const f=d.slice(2,-2);return{type:"strong",raw:d,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Ki(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return t[2]==="@"?(i=Ki(t[1]),r="mailto:"+i):(i=Ki(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=Ki(t[0]),r="mailto:"+i;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);i=Ki(t[0]),t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=Ki(t[0]),{type:"text",raw:t[0],text:i}}}},KR=/^(?: *(?:\n|$))+/,eO=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,tO=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Dl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,iO=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,MS=/(?:[*+-]|\d{1,9}[.)])/,NS=ut(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,MS).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Sv=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,rO=/^[^\n]+/,kv=/(?!\s*\])(?:\\.|[^\[\]\\])+/,sO=ut(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",kv).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),nO=ut(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,MS).getRegex(),Nd="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Iv=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,oO=ut("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Iv).replace("tag",Nd).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),LS=ut(Sv).replace("hr",Dl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Nd).getRegex(),aO=ut(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",LS).getRegex(),Cv={blockquote:aO,code:eO,def:sO,fences:tO,heading:iO,hr:Dl,html:oO,lheading:NS,list:nO,newline:KR,paragraph:LS,table:Cl,text:rO},RS=ut("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Dl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Nd).getRegex(),cO={...Cv,table:RS,paragraph:ut(Sv).replace("hr",Dl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",RS).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Nd).getRegex()},lO={...Cv,html:ut(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Iv).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Cl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ut(Sv).replace("hr",Dl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",NS).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},OS=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,uO=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,FS=/^( {2,}|\\)\n(?!\s*$)/,hO=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pl="\\p{P}\\p{S}",dO=ut(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Pl).getRegex(),fO=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,pO=ut(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Pl).getRegex(),gO=ut("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Pl).getRegex(),mO=ut("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Pl).getRegex(),vO=ut(/\\([punct])/,"gu").replace(/punct/g,Pl).getRegex(),wO=ut(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),bO=ut(Iv).replace("(?:-->|$)","-->").getRegex(),yO=ut("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",bO).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ld=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,AO=ut(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ld).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jS=ut(/^!?\[(label)\]\[(ref)\]/).replace("label",Ld).replace("ref",kv).getRegex(),US=ut(/^!?\[(ref)\](?:\[\])?/).replace("ref",kv).getRegex(),xO=ut("reflink|nolink(?!\\()","g").replace("reflink",jS).replace("nolink",US).getRegex(),$v={_backpedal:Cl,anyPunctuation:vO,autolink:wO,blockSkip:fO,br:FS,code:uO,del:Cl,emStrongLDelim:pO,emStrongRDelimAst:gO,emStrongRDelimUnd:mO,escape:OS,link:AO,nolink:US,punctuation:dO,reflink:jS,reflinkSearch:xO,tag:yO,text:hO,url:Cl},EO={...$v,link:ut(/^!?\[(label)\]\((.*?)\)/).replace("label",Ld).getRegex(),reflink:ut(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ld).getRegex()},Dv={...$v,escape:ut(OS).replace("])","~|])").getRegex(),url:ut(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},SO={...Dv,br:ut(FS).replace("{2,}","*").getRegex(),text:ut(Dv.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Rd={normal:Cv,gfm:cO,pedantic:lO},Tl={normal:$v,gfm:Dv,breaks:SO,pedantic:EO},go=class f4{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||po,this.options.tokenizer=this.options.tokenizer||new Md,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:Rd.normal,inline:Tl.normal};this.options.pedantic?(i.block=Rd.pedantic,i.inline=Tl.pedantic):this.options.gfm&&(i.block=Rd.gfm,this.options.breaks?i.inline=Tl.breaks:i.inline=Tl.gfm),this.tokenizer.rules=i}static get rules(){return{block:Rd,inline:Tl}}static lex(t,i){return new f4(i).lex(t)}static lexInline(t,i){return new f4(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],r=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=i[i.length-1],r&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s),r=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let r,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.emStrong(t,o,l)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),i.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),i.push(r);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let d;this.options.extensions.startInline.forEach(f=>{d=f.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(n)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,s=i[i.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},Od=class{options;parser;constructor(e){this.options=e||po}space(e){return""}code({text:e,lang:t,escaped:i}){const r=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+Ki(r)+'">'+(i?s:Ki(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Ki(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let r="";for(let o=0;o<e.items.length;o++){const a=e.items[o];r+=this.listitem(a)}const s=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+s+n+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let r="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];i="";for(let o=0;o<n.length;o++)i+=this.tablecell(n[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const r=this.parser.parseInline(i),s=DS(e);if(s===null)return r;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image({href:e,title:t,text:i}){const r=DS(e);if(r===null)return i;e=r;let s=`<img src="${e}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},Pv=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},mo=class p4{options;renderer;textRenderer;constructor(t){this.options=t||po,this.options.renderer=this.options.renderer||new Od,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Pv}static parse(t,i){return new p4(i).parse(t)}static parseInline(t,i){return new p4(i).parseInline(t)}parse(t,i=!0){let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}const o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);i?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):r+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,i){i=i||this.renderer;let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}const o=n;switch(o.type){case"escape":{r+=i.text(o);break}case"html":{r+=i.html(o);break}case"link":{r+=i.link(o);break}case"image":{r+=i.image(o);break}case"strong":{r+=i.strong(o);break}case"em":{r+=i.em(o);break}case"codespan":{r+=i.codespan(o);break}case"br":{r+=i.br(o);break}case"del":{r+=i.del(o);break}case"text":{r+=i.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Fd=class{options;constructor(e){this.options=e||po}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},kO=class{defaults=Ev();options=this.setOptions;parse=this.parseMarkdown(go.lex,mo.parse);parseInline=this.parseMarkdown(go.lexInline,mo.parseInline);Parser=mo;Renderer=Od;TextRenderer=Pv;Lexer=go;Tokenizer=Md;Hooks=Fd;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const n of s.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)i=i.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=r;i=i.concat(this.walkTokens(s.items,t));break}default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new Od(this.defaults);for(const n in i.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=i.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new Md(this.defaults);for(const n in i.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=i.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new Fd;for(const n in i.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=i.hooks[o],c=s[o];Fd.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,n=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return go.lex(e,t??this.defaults)}parser(e,t){return mo.parse(e,t??this.defaults)}parseMarkdown(e,t){return(r,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Ki(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}},vo=new kO;function ct(e,t){return vo.parse(e,t)}ct.options=ct.setOptions=function(e){return vo.setOptions(e),ct.defaults=vo.defaults,kS(ct.defaults),ct},ct.getDefaults=Ev,ct.defaults=po,ct.use=function(...e){return vo.use(...e),ct.defaults=vo.defaults,kS(ct.defaults),ct},ct.walkTokens=function(e,t){return vo.walkTokens(e,t)},ct.parseInline=vo.parseInline,ct.Parser=mo,ct.parser=mo.parse,ct.Renderer=Od,ct.TextRenderer=Pv,ct.Lexer=go,ct.lexer=go.lex,ct.Tokenizer=Md,ct.Hooks=Fd,ct.parse=ct;var SY=ct.options,kY=ct.setOptions,IY=ct.use,CY=ct.walkTokens,$Y=ct.parseInline,DY=mo.parse,PY=go.lex,Yr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),IO=/^(.+)\/(.+?)(;.+)?$/;function BS(e,t){const i=IO.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}var wi=Symbol("unset"),CO=class{constructor(){this.root=new Tv,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||li.empty()}get entries(){return this.root.children?.entries()||li.empty()}insert(e,t,i){this.c(e,r=>r._value=t,i)}mutate(e,t){this.c(e,i=>i._value=t(i._value===wi?void 0:i._value))}mutatePath(e,t){this.c(e,()=>{},i=>t(i))}delete(e){const t=this.b(e);if(!t)return;let i=t.length-1;const r=t[i].node._value;if(r!==wi){for(this.a--,t[i].node._value=wi;i>0;i--){const{node:s,part:n}=t[i];if(s.children?.size||s._value!==wi)break;t[i-1].node.children.delete(n)}return r}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const i=t[t.length-1].node;for(let r=t.length-1;r>0;r--){const s=t[r-1];if(s.node.children.delete(t[r].part),s.node.children.size>0||s.node._value!==wi)break}for(const r of zS(i))r._value!==wi&&(this.a--,yield r._value);i===this.root&&(this.root._value=wi,this.root.children=void 0)}find(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return;t=r}return t._value===wi?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;if(r._value!==wi)return!0;t=r}return!1}hasKeyOrChildren(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return!0}hasKey(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return t._value!==wi}b(e){const t=[{part:"",node:this.root}];let i=0;for(const r of e){const s=t[i].node.children?.get(r);if(!s)return;t.push({part:r,node:s}),i++}return t}c(e,t,i){let r=this.root;for(const o of e){if(r.children)if(r.children.has(o))r=r.children.get(o);else{const a=new Tv;r.children.set(o,a),r=a}else{const a=new Tv;r.children=new Map([[o,a]]),r=a}i?.(r)}const s=r._value===wi?0:1;t(r);const n=r._value===wi?0:1;this.a+=n-s}*values(){for(const{_value:e}of zS(this.root))e!==wi&&(yield e)}};function*zS(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const r of i.children.values())t.push(r)}}var Tv=class{constructor(){this._value=wi}get value(){return this._value===wi?void 0:this._value}set value(e){this._value=e===void 0?wi:e}},er=class na{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new na(t,i)}delta(t=0,i=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+i))}equals(t){return na.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return na.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return na.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const r=t.lineNumber|0,s=i.lineNumber|0;if(r===s){const n=t.column|0,o=i.column|0;return n-o}return r-s}clone(){return new na(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new na(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Ye=class Ht{constructor(t,i,r,s){t>r||t===r&&i>s?(this.startLineNumber=r,this.startColumn=s,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=r,this.endColumn=s)}isEmpty(){return Ht.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Ht.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return Ht.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return Ht.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return Ht.plusRange(this,t)}static plusRange(t,i){let r,s,n,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,s=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,s=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,s=t.startColumn),i.endLineNumber>t.endLineNumber?(n=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(n=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Ht(r,s,n,o)}intersectRanges(t){return Ht.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return r<a?(r=a,s=c):r===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),r>n||r===n&&s>o?null:new Ht(r,s,n,o)}equalsRange(t){return Ht.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return Ht.getEndPosition(this)}static getEndPosition(t){return new er(t.endLineNumber,t.endColumn)}getStartPosition(){return Ht.getStartPosition(this)}static getStartPosition(t){return new er(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new Ht(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new Ht(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return Ht.collapseToStart(this)}static collapseToStart(t){return new Ht(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Ht.collapseToEnd(this)}static collapseToEnd(t){return new Ht(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Ht(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,i=t){return new Ht(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new Ht(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static areOnlyIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber-1||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn-1||i.endLineNumber<t.startLineNumber-1||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn-1)}static compareRangesUsingStarts(t,i){if(t&&i){const n=t.startLineNumber|0,o=i.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const h=t.endColumn|0,d=i.endColumn|0;return h-d}return l-u}return a-c}return n-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},$O=class{constructor(){this.a=new Map,this.b=new Map,this.c=new $,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),re(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new DO(this,e,t);return this.b.set(e,i),re(()=>{const r=this.b.get(e);!r||r!==i||(this.b.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},DO=class extends te{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},HS;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(HS||(HS={}));var WS;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Tool=27]="Tool",e[e.Snippet=28]="Snippet"})(WS||(WS={}));var _S;(function(e){const t=new Map;t.set(0,ce.symbolMethod),t.set(1,ce.symbolFunction),t.set(2,ce.symbolConstructor),t.set(3,ce.symbolField),t.set(4,ce.symbolVariable),t.set(5,ce.symbolClass),t.set(6,ce.symbolStruct),t.set(7,ce.symbolInterface),t.set(8,ce.symbolModule),t.set(9,ce.symbolProperty),t.set(10,ce.symbolEvent),t.set(11,ce.symbolOperator),t.set(12,ce.symbolUnit),t.set(13,ce.symbolValue),t.set(15,ce.symbolEnum),t.set(14,ce.symbolConstant),t.set(15,ce.symbolEnum),t.set(16,ce.symbolEnumMember),t.set(17,ce.symbolKeyword),t.set(28,ce.symbolSnippet),t.set(18,ce.symbolText),t.set(19,ce.symbolColor),t.set(20,ce.symbolFile),t.set(21,ce.symbolReference),t.set(22,ce.symbolCustomColor),t.set(23,ce.symbolFolder),t.set(24,ce.symbolTypeParameter),t.set(25,ce.account),t.set(26,ce.issues),t.set(27,ce.tools);function i(o){let a=t.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=ce.symbolProperty),a}e.toIcon=i;function r(o){switch(o){case 0:return p(824,null);case 1:return p(825,null);case 2:return p(826,null);case 3:return p(827,null);case 4:return p(828,null);case 5:return p(829,null);case 6:return p(830,null);case 7:return p(831,null);case 8:return p(832,null);case 9:return p(833,null);case 10:return p(834,null);case 11:return p(835,null);case 12:return p(836,null);case 13:return p(837,null);case 14:return p(838,null);case 15:return p(839,null);case 16:return p(840,null);case 17:return p(841,null);case 18:return p(842,null);case 19:return p(843,null);case 20:return p(844,null);case 21:return p(845,null);case 22:return p(846,null);case 23:return p(847,null);case 24:return p(848,null);case 25:return p(849,null);case 26:return p(850,null);case 27:return p(851,null);case 28:return p(852,null);default:return""}}e.toLabel=r;const s=new Map;s.set("method",0),s.set("function",1),s.set("constructor",2),s.set("field",3),s.set("variable",4),s.set("class",5),s.set("struct",6),s.set("interface",7),s.set("module",8),s.set("property",9),s.set("event",10),s.set("operator",11),s.set("unit",12),s.set("value",13),s.set("constant",14),s.set("enum",15),s.set("enum-member",16),s.set("enumMember",16),s.set("keyword",17),s.set("snippet",28),s.set("text",18),s.set("color",19),s.set("file",20),s.set("reference",21),s.set("customcolor",22),s.set("folder",23),s.set("type-parameter",24),s.set("typeParameter",24),s.set("account",25),s.set("issue",26),s.set("tool",27);function n(o,a){let c=s.get(o);return typeof c>"u"&&!a&&(c=9),c}e.fromString=n})(_S||(_S={}));var VS;(function(e){e[e.Deprecated=1]="Deprecated"})(VS||(VS={}));var qS;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(qS||(qS={}));var GS;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(GS||(GS={}));var ZS;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(ZS||(ZS={}));var jd;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(jd||(jd={}));var Ud;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(Ud||(Ud={}));var JS;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(JS||(JS={}));var YS;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(YS||(YS={}));var QS;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(QS||(QS={}));var XS;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(XS||(XS={}));function PO(e){return e&&A.isUri(e.uri)&&Ye.isIRange(e.range)&&(Ye.isIRange(e.originSelectionRange)||Ye.isIRange(e.targetSelectionRange))}function TO(e){return e&&A.isUri(e.uri)&&Ye.isIRange(e.range)}var KS;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(KS||(KS={}));var TY={17:p(853,null),16:p(854,null),4:p(855,null),13:p(856,null),8:p(857,null),9:p(858,null),21:p(859,null),23:p(860,null),7:p(861,null),0:p(862,null),11:p(863,null),10:p(864,null),19:p(865,null),5:p(866,null),1:p(867,null),2:p(868,null),20:p(869,null),15:p(870,null),18:p(871,null),24:p(872,null),3:p(873,null),6:p(874,null),14:p(875,null),22:p(876,null),25:p(877,null),12:p(878,null)},ek;(function(e){e[e.Deprecated=1]="Deprecated"})(ek||(ek={}));var tk;(function(e){const t=new Map;t.set(0,ce.symbolFile),t.set(1,ce.symbolModule),t.set(2,ce.symbolNamespace),t.set(3,ce.symbolPackage),t.set(4,ce.symbolClass),t.set(5,ce.symbolMethod),t.set(6,ce.symbolProperty),t.set(7,ce.symbolField),t.set(8,ce.symbolConstructor),t.set(9,ce.symbolEnum),t.set(10,ce.symbolInterface),t.set(11,ce.symbolFunction),t.set(12,ce.symbolVariable),t.set(13,ce.symbolConstant),t.set(14,ce.symbolString),t.set(15,ce.symbolNumber),t.set(16,ce.symbolBoolean),t.set(17,ce.symbolArray),t.set(18,ce.symbolObject),t.set(19,ce.symbolKey),t.set(20,ce.symbolNull),t.set(21,ce.symbolEnumMember),t.set(22,ce.symbolStruct),t.set(23,ce.symbolEvent),t.set(24,ce.symbolOperator),t.set(25,ce.symbolTypeParameter);function i(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=ce.symbolProperty),o}e.toIcon=i;const r=new Map;r.set(0,20),r.set(1,8),r.set(2,8),r.set(3,8),r.set(4,5),r.set(5,0),r.set(6,9),r.set(7,3),r.set(8,2),r.set(9,15),r.set(10,7),r.set(11,1),r.set(12,4),r.set(13,14),r.set(14,18),r.set(15,13),r.set(16,13),r.set(17,13),r.set(18,13),r.set(19,17),r.set(20,13),r.set(21,16),r.set(22,6),r.set(23,10),r.set(24,11),r.set(25,24);function s(n){let o=r.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(tk||(tk={}));var Ca=class Wn{static{this.Comment=new Wn("comment")}static{this.Imports=new Wn("imports")}static{this.Region=new Wn("region")}static fromValue(t){switch(t){case"comment":return Wn.Comment;case"imports":return Wn.Imports;case"region":return Wn.Region}return new Wn(t)}constructor(t){this.value=t}},ik;(function(e){e[e.AIGenerated=1]="AIGenerated"})(ik||(ik={}));var Bd;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(Bd||(Bd={}));var Mv;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(Mv||(Mv={}));var $a;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})($a||($a={}));var Ml;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Ml||(Ml={}));var Nl;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Nl||(Nl={}));var rk;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(rk||(rk={}));var sk;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(sk||(sk={}));var nk;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(nk||(nk={}));var MY=new $O,ok;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(ok||(ok={}));var ak;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(ak||(ak={}));var ki;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(ki||(ki={})),function(e){function t(c,l){return l-c}e.compare=t;const i=Object.create(null);i[e.Error]=p(2129,null),i[e.Warning]=p(2130,null),i[e.Info]=p(2131,null);function r(c){return i[c]||""}e.toString=r;const s=Object.create(null);s[e.Error]=p(2132,null),s[e.Warning]=p(2133,null),s[e.Info]=p(2134,null);function n(c){return s[c]||""}e.toStringPlural=n;function o(c){switch(c){case Mt.Error:return e.Error;case Mt.Warning:return e.Warning;case Mt.Info:return e.Info;case Mt.Ignore:return e.Hint}}e.fromSeverity=o;function a(c){switch(c){case e.Error:return Mt.Error;case e.Warning:return Mt.Warning;case e.Info:return Mt.Info;case e.Hint:return Mt.Ignore}}e.toSeverity=a}(ki||(ki={}));var ck;(function(e){const t="";function i(s){return r(s,!0)}e.makeKey=i;function r(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(ki.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=r})(ck||(ck={}));var NY=V("markerService"),MO=class{constructor(){this.a=new Map}add(e,t){pi(Fe(e)),pi(xt(t)),pi(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}dispose(){this.a.forEach(e=>{K4(e.dispose)&&e.dispose()}),this.a.clear()}},Yt=new MO,NO=V("fileService");function Da(e){return e.create===!0}var zi;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(zi||(zi={}));var bn;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(bn||(bn={}));var lk;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(lk||(lk={}));var uk;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone",e[e.FileRealpath=262144]="FileRealpath"})(uk||(uk={}));var pe;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(pe||(pe={}));var zd=class j3 extends Error{static create(t,i){const r=new j3(t.toString(),i);return hk(r,i),r}constructor(t,i){super(t),this.code=i}};function $s(e,t){return zd.create(e,t)}function LO(e){return e||$s(p(2041,null),pe.Unknown)}function hk(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function Hd(e){if(!e)return pe.Unknown;if(e instanceof zd)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return pe.Unknown;switch(t[1]){case pe.FileExists:return pe.FileExists;case pe.FileIsADirectory:return pe.FileIsADirectory;case pe.FileNotADirectory:return pe.FileNotADirectory;case pe.FileNotFound:return pe.FileNotFound;case pe.FileTooLarge:return pe.FileTooLarge;case pe.FileWriteLocked:return pe.FileWriteLocked;case pe.NoPermissions:return pe.NoPermissions;case pe.Unavailable:return pe.Unavailable}return pe.Unknown}function RO(e){if(e instanceof Nv)return e.fileOperationResult;switch(Hd(e)){case pe.FileNotFound:return 1;case pe.FileIsADirectory:return 0;case pe.FileNotADirectory:return 9;case pe.FileWriteLocked:return 5;case pe.NoPermissions:return 6;case pe.FileExists:return 4;case pe.FileTooLarge:return 7;default:return 10}}var dk;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(dk||(dk={}));var fk;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(fk||(fk={}));var LY=class jm{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new Zt(()=>{const r=wn.forUris(()=>this.c);return r.fill(this.rawAdded.map(s=>[s,!0])),r}),this.f=new Zt(()=>{const r=wn.forUris(()=>this.c);return r.fill(this.rawUpdated.map(s=>[s,!0])),r}),this.g=new Zt(()=>{const r=wn.forUris(()=>this.c);return r.fill(this.rawDeleted.map(s=>[s,!0])),r}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const r of t){switch(r.type){case 1:this.rawAdded.push(r.resource);break;case 0:this.rawUpdated.push(r.resource);break;case 2:this.rawDeleted.push(r.resource);break}this.b!==jm.a&&(typeof r.cId=="number"?this.b===void 0?this.b=r.cId:this.b!==r.cId&&(this.b=jm.a):this.b!==void 0&&(this.b=jm.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...r){if(!t)return!1;const s=r.length>0;return!!((!s||r.includes(1))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!s||r.includes(0))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!s||r.includes(2))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}};function OO(e,t,i){return!e||!t||e===t||t.length>e.length?!1:(t.charAt(t.length-1)!==vt&&(t+=vt),i?sd(e,t):e.indexOf(t)===0)}var Nv=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},pk;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(pk||(pk={}));var gk;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(gk||(gk={}));var FO="";function mk(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var vk=class Ni{static{this.KB=1024}static{this.MB=Ni.KB*Ni.KB}static{this.GB=Ni.MB*Ni.KB}static{this.TB=Ni.GB*Ni.KB}static formatSize(t){return or(t)||(t=0),t<Ni.KB?p(2042,null,t.toFixed(0)):t<Ni.MB?p(2043,null,(t/Ni.KB).toFixed(2)):t<Ni.GB?p(2044,null,(t/Ni.MB).toFixed(2)):t<Ni.TB?p(2045,null,(t/Ni.GB).toFixed(2)):p(2046,null,(t/Ni.TB).toFixed(2))}},jO=class extends te{constructor(e,t="",i="",r=!0,s){super(),this.j=this.B(new $),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=i,this.z=r,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},RY=class g4{constructor(){this.id=g4.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const r of t)r.length&&(i.length?i=[...i,new g4,...r]:i=r);return i}static{this.ID="vs.actions.separator"}async run(){}},OY=class U3 extends jO{static{this.ID="vs.actions.empty"}constructor(){super(U3.ID,p(44,null),void 0,!1)}},UO={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},BO={id:"default",displayName:p(4336,null),providerDisplayName:p(4337,null)},wk;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(wk||(wk={}));var bk;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(bk||(bk={}));function Wd(e){if(yn(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function yk(e){if(yn(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function Lv(e){if(yn(e)||Wd(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function _d(e){if(yn(e))return!1;const t=e;return A.isUri(t?.base?.resource)&&A.isUri(t?.input1?.resource)&&A.isUri(t?.input2?.resource)&&A.isUri(t?.result?.resource)}var Ak;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(Ak||(Ak={}));var xk;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(xk||(xk={}));var zO=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},FY=new zO,Ek;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(Ek||(Ek={}));var HO=class extends te{};function yn(e){return e instanceof HO}function WO(e){const t=e;return A.isUri(t?.preferredResource)}function _O(e){const t=e;return yn(t?.primary)&&yn(t?.secondary)}function VO(e){const t=e;return yn(t?.modified)&&yn(t?.original)}var Sk;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(Sk||(Sk={}));var kk;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(kk||(kk={}));var An;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(An||(An={}));var qO=class{getOriginalUri(e,t){if(!e)return;if(_d(e))return Ck.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===An.BOTH)return{primary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===An.ANY)return this.getOriginalUri(r,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===An.PRIMARY?r:s}}if(Wd(e)||yk(e)||Lv(e)||_d(e))return;const i=WO(e)?e.preferredResource:e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return _O(e)||Lv(e)?{primary:e.primary,secondary:e.secondary}:VO(e)||Wd(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(_d(e))return Ck.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===An.BOTH)return{primary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===An.ANY)return this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===An.PRIMARY?r:s}}if(Wd(e)||yk(e)||Lv(e)||_d(e))return;const i=e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},Ik;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(Ik||(Ik={}));var Ck=new qO,$k;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})($k||($k={}));var GO=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(wl);for(const[i,r]of this.c)this.e(i,r,t);this.c.clear()}e(e,t,i){const r=i.createInstance(t);this.d.set(e,r)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return da(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),re(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Yt.add(UO.EditorFactory,new GO);var Dk;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(Dk||(Dk={}));var Pk;(function(e){e[e.NotOmitted=0]="NotOmitted",e[e.Partial=1]="Partial",e[e.Full=2]="Full"})(Pk||(Pk={}));var Tk;(function(e){e.icon=ce.error;function t(n){return{filterUri:n.resource,owner:n.owner,problemMessage:n.message,filterRange:{startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}}}e.fromMarker=t;function i(n){return{id:r(n),name:s(n),icon:e.icon,value:n,kind:"diagnostic",...n}}e.toEntry=i;function r(n){return[n.filterUri,n.owner,n.filterSeverity,n.filterRange?.startLineNumber].join(":")}e.id=r;function s(n){let o;if(function(c){c[c.MaxChars=30]="MaxChars",c[c.MaxSpaceLookback=10]="MaxSpaceLookback"}(o||(o={})),n.problemMessage){if(n.problemMessage.length<30)return n.problemMessage;const c=n.problemMessage.lastIndexOf(" ",30);return c===-1||c+10<30?n.problemMessage.substring(0,30)+"\u2026":n.problemMessage.substring(0,c)+"\u2026"}let a=p(5786,null);return n.filterUri&&(a=p(5787,null,Ar(n.filterUri))),a}e.label=s})(Tk||(Tk={}));var Mk;(function(e){function t(i){return A.isUri(i.value)?i.value:TO(i.value)?i.value.uri:void 0}e.toUri=t})(Mk||(Mk={}));function ZO(e){return e.kind==="image"}var Nk;(function(e){e.Instruction="vscode.prompt.instructions.root",e.InstructionReference="vscode.prompt.instructions",e.PromptFile="vscode.prompt.file"})(Nk||(Nk={}));function Lk(){return Object.create(null)}var wo="**",Rv="/",Vd="[/\\\\]",qd="[^/\\\\]",JO=/\//g;function Rk(e,t){switch(e){case 0:return"";case 1:return`${qd}*?`;default:return`(?:${Vd}|${qd}+${Vd}${t?`|${Vd}${qd}+`:""})*?`}}function Ll(e,t){if(!e)return[];const i=[];let r=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!r&&!s){i.push(n),n="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&i.push(n),i}function Ok(e){if(!e)return"";let t="";const i=Ll(e,Rv);if(i.every(r=>r===wo))t=".*";else{let r=!1;i.forEach((s,n)=>{if(s===wo){if(r)return;t+=Rk(2,n===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===Rv?h="":h=ln(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const d=`(?:${Ll(a,",").map(f=>Ok(f)).join("|")})`;t+=d,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=qd;continue;case"*":t+=Rk(1);continue;default:t+=ln(u)}}n<i.length-1&&(i[n+1]!==wo||n+2<i.length)&&(t+=Vd)}r=s===wo})}return t}var YO=/^\*\*\/\*\.[\w\.-]+$/,QO=/^\*\*\/([\w\.-]+)\/?$/,XO=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,KO=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,eF=/^\*\*((\/[\w\.-]+)+)\/?$/,tF=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Fk=new tl(1e4),jk=function(){return!1},Qr=function(){return null};function Ov(e,t){if(!e)return Qr;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const r=`${i}_${!!t.trimForExclusions}`;let s=Fk.get(r);if(s)return Uk(s,e);let n;return YO.test(i)?s=iF(i.substr(4),i):(n=QO.exec(Fv(i,t)))?s=rF(n[1],i):(t.trimForExclusions?KO:XO).test(i)?s=sF(i,t):(n=eF.exec(Fv(i,t)))?s=Bk(n[1].substr(1),i,!0):(n=tF.exec(Fv(i,t)))?s=Bk(n[1],i,!1):s=nF(i),Fk.set(r,s),Uk(s,e)}function Uk(e,t){if(typeof t=="string")return e;const i=function(r,s){return ro(r,t.base,!Et)?e(mT(r.substr(t.base.length),vt),s):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function Fv(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function iF(e,t){return function(i,r){return typeof i=="string"&&i.endsWith(e)?t:null}}function rF(e,t){const i=`/${e}`,r=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(i)||o.endsWith(r)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function sF(e,t){const i=Wk(e.slice(1,-1).split(",").map(a=>Ov(a,t)).filter(a=>a!==Qr),e),r=i.length;if(!r)return Qr;if(r===1)return i[0];const s=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function Bk(e,t,i){const r=vt===Ue.sep,s=r?e:e.replace(JO,vt),n=vt+s,o=Ue.sep+e;let a;return i?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!r&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!r&&c===e)?t:null},a.allPaths=[(i?"*/":"./")+e],a}function nF(e){try{const t=new RegExp(`^${Ok(e)}$`);return function(i){return t.lastIndex=0,typeof i=="string"&&t.test(i)?e:null}}catch{return Qr}}function Pa(e,t,i){return!e||typeof t!="string"?!1:kr(e)(t,void 0,i)}function kr(e,t={}){if(!e)return jk;if(typeof e=="string"||oF(e)){const i=Ov(e,t);if(i===Qr)return jk;const r=function(s,n){return!!i(s,n)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return aF(e,t)}function oF(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function zk(e){return e.allBasenames||[]}function Hk(e){return e.allPaths||[]}function aF(e,t){const i=Wk(Object.getOwnPropertyNames(e).map(a=>cF(a,e[a],t)).filter(a=>a!==Qr)),r=i.length;if(!r)return Qr;if(!i.some(a=>!!a.requiresSiblings)){if(r===1)return i[0];const a=function(u,h){let d;for(let f=0,g=i.length;f<g;f++){const v=i[f](u,h);if(typeof v=="string")return v;dn(v)&&(d||(d=[]),d.push(v))}return d?(async()=>{for(const f of d){const g=await f;if(typeof g=="string")return g}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let d=0,f=i.length;d<f;d++){const g=i[d];g.requiresSiblings&&l&&(c||(c=dt(a)),u||(u=c.substr(0,c.length-id(a).length)));const v=g(a,c,u,l);if(typeof v=="string")return v;dn(v)&&(h||(h=[]),h.push(v))}return h?(async()=>{for(const d of h){const f=await d;if(typeof f=="string")return f}return null})():null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function cF(e,t,i){if(t===!1)return Qr;const r=Ov(e,i);if(r===Qr)return Qr;if(typeof t=="boolean")return r;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!r(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return dn(h)?h.then(d=>d?e:null):h?e:null};return n.requiresSiblings=!0,n}}return r}function Wk(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const r=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=r.length;a<c;a++)s.push(t)}else s=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=r.indexOf(c);return l!==-1?s[l]:null};n.basenames=r,n.patterns=s,n.allBasenames=r;const o=e.filter(a=>!a.basenames);return o.push(n),o}function _k(e,t){return Ri(e,t,(i,r)=>typeof i=="string"&&typeof r=="string"?i===r:typeof i!="string"&&typeof r!="string"?i.base===r.base&&i.pattern===r.pattern:!1)}var lF=V("notebookDocumentService"),jv=["W","X","Y","Z","a","b","c","d","e","f"],uF=new RegExp(`^[${jv.join("")}]+`),Vk=7;function Uv(e){if(e.scheme!==q.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(uF,""),Vk),r=wa(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:r,fragment:null})}}function hF(e,t){const i=t.toString(Vk),s=`${i.length<jv.length?jv[i.length-1]:"z"}${i}s${fl(_.fromString(e.scheme),!0,!0)}`;return e.with({scheme:q.vscodeNotebookCell,fragment:s})}function dF(e){if(e.scheme!==q.vscodeNotebookMetadata)return;const t=wa(e.fragment).toString();return e.with({scheme:t,fragment:null})}function fF(e){const t=`${fl(_.fromString(e.scheme),!0,!0)}`;return e.with({scheme:q.vscodeNotebookMetadata,fragment:t})}function qk(e){if(e.scheme!==q.vscodeNotebookCellOutput)return;const t=new URLSearchParams(e.query),i=t.get("openIn");if(!i)return;const r=t.get("outputId")??void 0,s=Uv(e.with({scheme:q.vscodeNotebookCell,query:null})),n=t.get("outputIndex")?parseInt(t.get("outputIndex")||"",10):void 0,o=s?s.notebook:e.with({scheme:t.get("notebookScheme")||q.file,fragment:null,query:null}),a=t.get("cellIndex")?parseInt(t.get("cellIndex")||"",10):void 0;return{notebook:o,openIn:i,outputId:r,outputIndex:n,cellHandle:s?.handle,cellFragment:e.fragment,cellIndex:a}}var pF=class{constructor(){this.a=new Gt}getNotebook(e){if(e.scheme===q.vscodeNotebookCell){const t=Uv(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}if(e.scheme===q.vscodeNotebookCellOutput){const t=qk(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Te(lF,pF,1);var Ta;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Ta||(Ta={}));var jY=["application/json","application/javascript","text/html","image/svg+xml",Yr.latex,Yr.markdown,"image/png","image/jpeg",Yr.text],UY=[Yr.latex,Yr.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",Yr.text],Gk;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(Gk||(Gk={}));var Zk;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Zk||(Zk={}));var Jk;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(Jk||(Jk={}));var Yk;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(Yk||(Yk={}));var Qk;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(Qk||(Qk={}));var Ir;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(Ir||(Ir={}));var Xk;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(Xk||(Xk={}));var Kk;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(Kk||(Kk={}));var e6;(function(e){e.scheme=q.vscodeNotebookMetadata;function t(r){return fF(r)}e.generate=t;function i(r){return dF(r)}e.parse=i})(e6||(e6={}));var Bv;(function(e){e.scheme=q.vscodeNotebookCell;function t(l,u){return hF(l,u)}e.generate=t;function i(l){return Uv(l)}e.parse=i;function r(l,u){return l.with({scheme:q.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"editor",outputId:u??"",notebookScheme:l.scheme!==q.file?l.scheme:""}).toString()})}e.generateCellOutputUriWithId=r;function s(l,u,h){return l.with({scheme:q.vscodeNotebookCellOutput,fragment:u.fragment,query:new URLSearchParams({openIn:"notebook",outputIndex:String(h)}).toString()})}e.generateCellOutputUriWithIndex=s;function n(l,u,h,d,f){return l.with({scheme:q.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"notebookOutputEditor",notebook:l.toString(),cellIndex:String(h),outputId:d,outputIndex:String(f)}).toString()})}e.generateOutputEditorUri=n;function o(l){return qk(l)}e.parseCellOutputUri=o;function a(l,u,h){return e.generate(l,u).with({scheme:h})}e.generateCellPropertyUri=a;function c(l,u){if(l.scheme===u)return e.parse(l.with({scheme:e.scheme}))}e.parseCellPropertyUri=c})(Bv||(Bv={}));var BY=new Z("notebookEditorCursorAtBoundary","none"),zY=new Z("notebookEditorCursorAtLineBoundary","none"),t6;(function(e){e.default="default",e.option="option"})(t6||(t6={}));var i6;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(i6||(i6={}));var r6;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(r6||(r6={}));var HY=class Um{static{this.d="notebook/"}static create(t,i){return`${Um.d}${t}/${i??t}`}static parse(t){if(t.startsWith(Um.d)){const i=t.substring(Um.d.length).split("/");if(i.length===2)return{notebookType:i[0],viewType:i[1]}}}};function s6(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var gF=new TextDecoder;function mF(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let r=wF(t);const s=_.concat(t.map(o=>_.wrap(o))),n=EF(s);return r=r||n.byteLength!==s.byteLength,{data:n,didCompression:r}}var Gd="\x1B[A",zv=Gd.split("").map(e=>e.charCodeAt(0)),vF=10;function wF(e){let t=!1;return e.forEach((i,r)=>{if(r===0||i.length<Gd.length)return;const s=e[r-1],n=i.subarray(0,Gd.length);if(n[0]===zv[0]&&n[1]===zv[1]&&n[2]===zv[2]){const o=s.lastIndexOf(vF);if(o===-1)return;t=!0,e[r-1]=s.subarray(0,o),e[r]=i.subarray(Gd.length)}}),t}function bF(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function yF(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var AF=8,xF=13;function EF(e){return!e.buffer.includes(AF)&&!e.buffer.includes(xF)?e:_.fromString(yF(bF(gF.decode(e.buffer))))}var n6;(function(e){e.Delimiter="\0"})(n6||(n6={}));var o6;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(o6||(o6={}));var Be=class gr{static fromExtHostTestItem(t,i,r=t.parent){if(t._isRoot)return new gr([i]);const s=[t.id];for(let n=r;n&&n.id!==i;n=n.parent)s.push(n.id);return s.push(i),new gr(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const i=t.indexOf("\0");return i===-1?t:t.slice(0,i)}static fromString(t){return new gr(t.split("\0"))}static join(t,i){return new gr([...t.path,i])}static split(t){return t.split("\0")}static joinToString(t,i){return t.toString()+"\0"+i}static parentId(t){const i=t.lastIndexOf("\0");return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf("\0");return i===-1?t:t.slice(i+1)}static isChild(t,i){return i[t.length]==="\0"&&i.startsWith(t)}static compare(t,i){return t===i?0:gr.isChild(t,i)?2:gr.isChild(i,t)?3:1}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let r=0;for(;r<t-1;){for(let s=1;s<t;s++){const n=i(s-1),o=i(s);if(n.path[r]!==o.path[r])return r}r++}return r}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new gr(this.path,1)}get parentId(){return this.d>1?new gr(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new gr(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new gr(this.path,t)}compare(t){if(typeof t=="string")return gr.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},a6;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(a6||(a6={}));var c6;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(c6||(c6={}));var l6;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(l6||(l6={}));var u6;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(u6||(u6={}));var WY={2:p(12760,null),4:p(12761,null),8:p(12762,null)},SF=e=>"runId"in e,Ma;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:Ye.lift(i.range),uri:t.asCanonicalUri(A.revive(i.uri))})})(Ma||(Ma={}));var h6;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(h6||(h6={}));var Zd;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(A.revive(i.uri)):void 0,position:i.position?er.lift(i.position):void 0})})(Zd||(Zd={}));var Jd;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Ma.serialize(t.location),stackTrace:t.stackTrace?.map(Zd.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Ma.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(r=>Zd.deserialize(t,r))})})(Jd||(Jd={}));var Yd;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Ma.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&Ma.deserialize(t,i.location)})})(Yd||(Yd={}));var Qd;(function(e){e.serialize=t=>t.type===0?Jd.serialize(t):Yd.serialize(t),e.deserialize=(t,i)=>i.type===0?Jd.deserialize(t,i):Yd.deserialize(t,i),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Qd||(Qd={}));var Rl;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Qd.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(r=>Qd.deserialize(t,r))})})(Rl||(Rl={}));var d6="\0",Xd=(e,t)=>e+d6+t,f6=e=>{const t=e.indexOf(d6);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Kd;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(A.revive(i.uri)):void 0,range:i.range?Ye.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(Kd||(Kd={}));var p6;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(p6||(p6={}));var xn;(function(e){e.serialize=t=>({expand:t.expand,item:Kd.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Be.root(i.item.extId),expand:i.expand,item:Kd.deserialize(t,i.item)})})(xn||(xn={}));var Ol;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?Ye.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(Ol||(Ol={}));var Hv=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},g6;(function(e){e.serializeWithoutMessages=t=>({...xn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Rl.serializeWithoutMessages)}),e.serialize=t=>({...xn.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Rl.serialize)}),e.deserialize=(t,i)=>({...xn.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(r=>Rl.deserialize(t,r)),retired:!0})})(g6||(g6={}));var Wv;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(Wv||(Wv={}));var m6;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(A.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:Wv.empty()})})(m6||(m6={}));function _v(e){return{...e,location:e.location?.toJSON()}}function Vv(e){return e.location=e.location?er.isIPosition(e.location)?er.lift(e.location):Ye.lift(e.location):void 0,e}var v6;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(v6||(v6={}));var w6;(function(e){e.serialize=t=>t.type===0?tf.serialize(t):rf.serialize(t),e.deserialize=t=>t.type===0?tf.deserialize(t):rf.deserialize(t)})(w6||(w6={}));var ef;(function(e){e.serialize=_v,e.deserialize=Vv})(ef||(ef={}));var tf;(function(e){e.serialize=_v,e.deserialize=Vv})(tf||(tf={}));var rf;(function(e){e.serialize=t=>({..._v(t),branches:t.branches?.map(ef.serialize)}),e.deserialize=t=>({...Vv(t),branches:t.branches?.map(ef.deserialize)})})(rf||(rf={}));var b6;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(b6||(b6={}));var sf;(function(e){e.deserialize=(t,i)=>i.op===0?{op:i.op,item:xn.deserialize(t,i.item)}:i.op===1?{op:i.op,item:Ol.deserialize(i.item)}:i.op===2?{op:i.op,uri:t.asCanonicalUri(A.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===0?{op:t.op,item:xn.serialize(t.item)}:t.op===1?{op:t.op,item:Ol.serialize(t.item)}:t})(sf||(sf={}));var kF=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case 0:this.p(xn.deserialize(this.l,i.item),t);break;case 1:this.q(Ol.deserialize(i.item),t);break;case 3:this.v(i.itemId,t);break;case 5:this.w(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this.f.set(i.tag.id,i.tag);break;case 7:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Be.parentId(e.item.extId)?.toString();let r;if(!i)r=this.y(e),this.h.add(r),this.g.set(e.item.extId,r);else if(this.g.has(i)){const s=this.g.get(i);s.children.add(e.item.extId),r=this.y(e,s),this.g.set(e.item.extId,r)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(r),e.expand===2&&this.j++,r}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.j--,e.expand===2&&this.j++),Hv(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const r=Be.parentId(i.item.extId)?.toString();r?this.g.get(r).children.delete(i.item.extId):this.h.delete(i);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==i),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},IF=V("editorGroupsService"),y6;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(y6||(y6={}));var A6;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(A6||(A6={}));var x6;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(x6||(x6={}));var E6;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(E6||(E6={}));var S6;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(S6||(S6={}));var k6;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(k6||(k6={}));var I6;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(I6||(I6={}));var _Y=V("editorService"),CF=-1,$F=-2,Ds=V("configurationService"),C6;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(C6||(C6={}));function qv(e,t){const i=Object.create(null);for(const r in e)$6(i,r,e[r],t);return i}function $6(e,t,i,r){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=i}catch{r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function DF(e,t){const i=t.split(".");D6(e,i)}function D6(e,t){if(!e)return;const i=t.shift();if(t.length===0){delete e[i];return}if(Object.keys(e).indexOf(i)!==-1){const r=e[i];typeof r=="object"&&!Array.isArray(r)&&(D6(r,t),Object.keys(r).length===0&&delete e[i])}}function nf(e,t,i){function r(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=r(e,s);return typeof n>"u"?i:n}function PF(e){return e.replace(/^\[/,"").replace(/]$/g,"").replace(/\]\[/g,", ")}function TF(e){let t=!1;const i=new Map,r=new Map;if(MF(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const d=i.get(h);if(!d){const f={schemas:[u]};return i.set(h,f),r.set(u,f),!0}return d.schemas.push(u),r.set(u,d),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,d)=>{if(d!==u){const f=r.get(d);if(f&&f.schemas.length>1)return f.id||(f.id=`_${o.length}`,o.push(f.schemas[0])),{$ref:`#/${n}/${f.id}`}}return d})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function Na(e){return typeof e=="object"&&e!==null}function MF(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)Na(l)&&o.push(l)},r=(...c)=>{for(const l of c)if(Na(l))for(const u in l){const h=l[u];Na(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)Na(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)Na(l)&&o.push(l);else Na(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),r(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var of={JSONContribution:"base.contributions.json"};function P6(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var NF=class extends te{constructor(){super(...arguments),this.a={},this.b={},this.c=this.B(new $),this.onDidChangeSchema=this.c.event,this.f=this.B(new $),this.onDidChangeSchemaAssociations=this.f.event}registerSchema(e,t,i){const r=P6(e);this.a[r]=t,this.c.fire(e),i&&i.add(re(()=>{delete this.a[r],this.c.fire(e)}))}registerSchemaAssociation(e,t){const i=P6(e);return this.b[i]||(this.b[i]=[]),this.b[i].includes(t)||(this.b[i].push(t),this.f.fire()),re(()=>{const r=this.b[i];if(r){const s=r.indexOf(t);s!==-1&&(r.splice(s,1),r.length===0&&delete this.b[i],this.f.fire())}})}notifySchemaChanged(e){this.c.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?TF(t):void 0}hasSchemaContent(e){return!!this.a[e]}getSchemaAssociations(){return this.b}},LF=new NF;Yt.add(of.JSONContribution,LF);var T6;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(T6||(T6={}));var bo={Configuration:"base.contributions.configuration"},M6;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(M6||(M6={}));var af={properties:{},patternProperties:{}},cf={properties:{},patternProperties:{}},lf={properties:{},patternProperties:{}},uf={properties:{},patternProperties:{}},hf={properties:{},patternProperties:{}},df={properties:{},patternProperties:{}},Fl={properties:{},patternProperties:{}},yo="vscode://schemas/settings/resourceLanguage",ff=Yt.as(of.JSONContribution),RF=class extends te{constructor(){super(),this.a=[],this.n=new Set,this.r=this.B(new $),this.onDidSchemaChange=this.r.event,this.s=this.B(new $),this.onDidUpdateConfiguration=this.s.event,this.b=new Map,this.c={id:"defaultOverrides",title:p(1799,null),properties:{}},this.f=[this.c],this.m={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.g={},this.h=new Map,this.j={},ff.registerSchema(yo,this.m),this.N()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const i=new Set;this.F(e,t,i),ff.registerSchema(yo,this.m),this.r.fire(),this.s.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.G(e,t),ff.registerSchema(yo,this.m),this.r.fire(),this.s.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.G(t,i),this.F(e,!1,i),ff.registerSchema(yo,this.m),this.r.fire(),this.s.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.u(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}u(e,t){this.a.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const n in r){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=r[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),Xr.test(n)){const c=this.z(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.y(n,c,s),i.push(...jl(n))}else{const c=this.C(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.g[n];l&&(this.O(n,l),this.J(n,l))}}this.D(i)}deregisterDefaultConfigurations(e){const t=new Set;this.w(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}w(e,t){for(const i of e){const r=this.a.indexOf(i);r!==-1&&this.a.splice(r,1)}for(const{overrides:i,source:r}of e)for(const s in i){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>r?a.source?.id===r.id:a.value===i[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),Xr.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.z(s,c.value,c.source,a);a&&!X4(a.value)?(n.configurationDefaultOverrideValue=a,this.y(s,a,r)):(this.b.delete(s),delete this.g[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.C(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.g[s];c&&(this.O(s,c),this.J(s,c))}t.add(s)}}this.M()}y(e,t,i){const r={type:"object",default:t.value,description:p(1800,null,PF(e)),$ref:yo,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.g[e]=r,this.c.properties[e]=r}z(e,t,i,r){const s=r?.value||{},n=r?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(xt(a)&&(il(s[o])||xt(s[o]))){if(s[o]={...s[o]??{},...a},i)for(const l in a)n.set(`${o}.${l}`,i)}else s[o]=a,i?n.set(o,i):n.delete(o)}return{value:s,source:n}}C(e,t,i,r){const s=this.g[e],n=r?.value??s?.defaultDefaultValue;let o=i;if(xt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(il(n)||xt(n)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...xt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.w(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.u(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.G(e.removedConfigurations,i),e.addedConfigurations&&this.F(e.addedConfigurations,!1,i),this.r.fire(),this.s.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.r.fire()}registerOverrideIdentifiers(e){this.D(e),this.r.fire()}D(e){for(const t of e)this.n.add(t);this.M()}F(e,t,i){e.forEach(r=>{this.H(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.f.push(r),this.I(r)})}G(e,t){const i=r=>{if(r.properties)for(const s in r.properties){t.add(s);const n=this.g[s];n?.policy?.name&&this.h.delete(n.policy.name),delete this.g[s],this.L(s,r.properties[s])}r.allOf?.forEach(s=>i(s))};for(const r of e){i(r);const s=this.f.indexOf(r);s!==-1&&this.f.splice(s,1)}}H(e,t=!0,i,r,s=4,n){s=Dt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&FF(c,l)){delete o[c];continue}l.source=i,l.defaultDefaultValue=o[c].default,this.O(c,l),Xr.test(c)?l.scope=void 0:(l.scope=Dt(l.scope)?s:l.scope,l.restricted=Dt(l.restricted)?!!r?.includes(c):l.restricted);const u=o[c].hasOwnProperty("included")&&!o[c].included,h=o[c].policy?.name;u?(this.j[c]=o[c],h&&(this.h.set(h,c),n.add(c)),delete o[c]):(n.add(c),h&&this.h.set(h,c),this.g[c]=o[c],!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage))}const a=e.allOf;if(a)for(const c of a)this.H(c,t,i,r,s,n)}getConfigurations(){return this.f}getConfigurationProperties(){return this.g}getPolicyConfigurations(){return this.h}getExcludedConfigurationProperties(){return this.j}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}I(e){const t=i=>{const r=i.properties;if(r)for(const n in r)this.J(n,r[n]);i.allOf?.forEach(t)};t(e)}J(e,t){switch(af.properties[e]=t,t.scope){case 1:cf.properties[e]=t;break;case 2:uf.properties[e]=t;break;case 3:lf.properties[e]=t;break;case 7:hf.properties[e]=t;break;case 4:df.properties[e]=t;break;case 5:Fl.properties[e]=t;break;case 6:Fl.properties[e]=t,this.m.properties[e]=t;break}}L(e,t){switch(delete af.properties[e],t.scope){case 1:delete cf.properties[e];break;case 2:delete uf.properties[e];break;case 3:delete lf.properties[e];break;case 7:delete hf.properties[e];break;case 4:delete df.properties[e];break;case 5:case 6:delete Fl.properties[e],delete this.m.properties[e];break}}M(){for(const e of this.n.values()){const t=`[${e}]`,i={type:"object",description:p(1801,null),errorMessage:p(1802,null),$ref:yo};this.O(t,i),af.properties[t]=i,cf.properties[t]=i,lf.properties[t]=i,uf.properties[t]=i,hf.properties[t]=i,df.properties[t]=i,Fl.properties[t]=i}}N(){const e={type:"object",description:p(1803,null),errorMessage:p(1804,null),$ref:yo};af.patternProperties[En]=e,cf.patternProperties[En]=e,lf.patternProperties[En]=e,uf.patternProperties[En]=e,hf.patternProperties[En]=e,df.patternProperties[En]=e,Fl.patternProperties[En]=e,this.r.fire()}O(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),il(r)&&(r=t.defaultDefaultValue,s=void 0),il(r)&&(r=OF(t.type)),t.default=r,t.defaultValueSource=s}},N6="\\[([^\\]]+)\\]",L6=new RegExp(N6,"g"),En=`^(${N6})+$`,Xr=new RegExp(En);function jl(e){const t=[];if(Xr.test(e)){let i=L6.exec(e);for(;i?.length;){const r=i[1].trim();r&&t.push(r),i=L6.exec(e)}}return ha(t)}function OF(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var pf=new RF;Yt.add(bo.Configuration,pf);function FF(e,t){return e.trim()?Xr.test(e)?p(1806,null,e):pf.getConfigurationProperties()[e]!==void 0?p(1807,null,e):t.policy?.name&&pf.getPolicyConfigurations().get(t.policy?.name)!==void 0?p(1808,null,e,t.policy?.name,pf.getPolicyConfigurations().get(t.policy?.name)):null:p(1805,null)}var Gv="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",VY=new RegExp(Gv),R6;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(R6||(R6={}));var O6;(function(e){e.NoneOrRelevance="NoneOrRelevance",e.LastUpdatedDate="LastUpdatedDate",e.Title="Title",e.PublisherName="PublisherName",e.InstallCount="InstallCount",e.PublishedDate="PublishedDate",e.AverageRating="AverageRating",e.WeightedRating="WeightedRating"})(O6||(O6={}));var F6;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(F6||(F6={}));var j6;(function(e){e.Category="Category",e.ExtensionId="ExtensionId",e.ExtensionName="ExtensionName",e.ExcludeWithFlags="ExcludeWithFlags",e.Featured="Featured",e.SearchText="SearchText",e.Tag="Tag",e.Target="Target"})(j6||(j6={}));var U6;(function(e){e.Install="install",e.Uninstall="uninstall"})(U6||(U6={}));var B6;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(B6||(B6={}));var qY=V("extensionGalleryService"),z6;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(z6||(z6={}));var H6;(function(e){e.NotFound="NotFound",e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(H6||(H6={}));var W6;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(W6||(W6={}));var GY=V("extensionManagementService"),ZY=V("IGlobalExtensionEnablementService"),JY=V("IExtensionTipsService"),YY=V("IAllowedExtensionsService"),QY=Yh(1954,"Extensions"),XY=Yh(1955,"Preferences"),jF="extensions.allowed";Yt.as(bo.Configuration).registerConfiguration({id:"extensions",order:30,title:p(1937,null),type:"object",properties:{[jF]:{type:"object",markdownDescription:p(1938,null),default:"*",defaultSnippets:[{body:{},description:p(1939,null)},{body:{"*":!0},description:p(1940,null)}],scope:1,policy:{name:"AllowedExtensions",minimumVersion:"1.96",description:p(1941,null)},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:p(1942,null),enumDescriptions:[p(1943,null),p(1944,null),p(1945,null)]},{type:"array",items:{type:"string"},description:p(1946,null)}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:p(1947,null),enumDescriptions:[p(1948,null),p(1949,null),p(1950,null)]},"\\*":{type:"boolean",enum:[!0,!1],description:p(1951,null),enumDescriptions:[p(1952,null),p(1953,null)]}}}}});var KY=V("telemetryService"),eQ=V("customEndpointTelemetryService"),_6;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(_6||(_6={}));var V6;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(V6||(V6={}));var Zv=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},UF=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},tQ=new UF,BF="telemetry",zF={id:BF,name:p(2276,null)},HF=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function WF(e){if(!e)return"none";const t=J1(e);return HF.has(t)?t:"other"}function _F(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;r.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=n.exec(e);if(!a)break;const c=r.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function VF(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"JWT",regex:/eyJ[0eXAiOiJKV1Qi|hbGci|a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function q6(e,t){return Aa(e,i=>{if(i instanceof Zv||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let r=i.replaceAll("%20"," ");r=_F(r,t);for(const s of t)r=r.replace(s,"");return r=VF(r),r}})}function qF(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id?!0:w1(e.id,t.id)===0}var iQ=new Ve("pprice.better-merge"),GF=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const r=this.readActivationEvents(i);r.length>0&&(t[Ve.toKey(i.identifier)]=r)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${Ve.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this.a.get(i);if(!r)continue;const s=e.contributes[i],n=Array.isArray(s)?s:[s];try{r(n,t)}catch(o){lt(o)}}return t}},ZF=new GF,JF=Object.freeze({identifier:new Ve("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:A.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),YF=V("extensionService"),G6=class{constructor(e){this.dependency=e}},Z6;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(Z6||(Z6={}));function et(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function M(e,t){if(!et(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var J6;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(J6||(J6={}));var Y6;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(Y6||(Y6={}));var Ul=(e,t)=>e===t,QF={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Ul,label:Ul,description:Ul,error:Ul,sortText:Ul,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},XF=Object.entries(QF),KF=(e,t)=>{let i;for(const[r,s]of XF)s(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i},ej=class extends te{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new Vr(()=>this.flushDiff(),200)),this.g=this.B(new $),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){Hv(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){Hv(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const r=this.M(i);return r.isOpen()?this.L(i,t-1):r.wait().then(()=>this.L(i,t-1))}else if(i.expand===3)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Be.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const i of t.ops)this.w(e,i);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:o1(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const i=Be.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.s.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.s.getChildren(r.parent).delete(e.id);let s=this.tree.get(i.toString());if(!s){s={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=KF(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,i.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Be.joinToString(i,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(i.toString(),c))}),this.y(s.actual.uri)}C(e,t,i){const r=new Set(t.map(s=>s.id));for(const s of e)r.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(s=>Xd(this.s.controllerId,s.id))}}}),r.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Xd(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Xd(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const r=this.s.getApiFor(e);r.parent=i?.actual,r.listener=s=>this.w(t,s),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[r,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[r,s]of this.s.getChildren(e.actual)){const n=this.expand(Be.joinToString(e.fullId,s.id),t);dn(n)&&i.push(n)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new cr;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new cr,i=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let r;try{r=this.h(e.actual===this.root?void 0:e.actual)}catch(s){i(s)}return dn(r)?r.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const r=i.pop();if(r){this.s.getApiFor(r.actual).listener=void 0;for(const s of r.actual.tags)this.F(s.id);this.tree.delete(r.fullId.toString());for(const[s,n]of this.s.getChildren(r.actual))i.push(this.tree.get(Be.joinToString(r.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},tj=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},gf=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},ij=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},rj=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(s,n){for(const o of r.values())s.call(n,o,this)},[Symbol.iterator](){return r.entries()},replace(s){const n=new Map,o=new Set(r.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof i))throw new gf(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new ij(c.id,l,e.controllerId);if(n.has(c.id))throw new tj(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),r=n},add(s){if(!(s instanceof i))throw new gf(s.id);r.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){r.delete(s)&&e.listener?.({op:3,id:s})},get(s){return r.get(s)},toJSON(){return Array.from(r.values())}}},Q6=new WeakMap,sj=(e,t)=>{const i={controllerId:t};return Q6.set(e,i),i},mf=e=>{const t=Q6.get(e);if(!t)throw new gf(e?.id||"<unknown>");return t},nj=V("remoteAuthorityResolverService"),X6;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(X6||(X6={}));var K6=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},oj=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Ii;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Ii||(Ii={}));var Jv=class oa extends vr{static isNotAvailable(t){return t instanceof oa&&t._code===Ii.NotAvailable}static isTemporarilyNotAvailable(t){return t instanceof oa&&t._code===Ii.TemporarilyNotAvailable}static isNoResolverFound(t){return t instanceof oa&&t._code===Ii.NoResolverFound}static isInvalidAuthority(t){return t instanceof oa&&t._code===Ii.InvalidAuthority}static isHandled(t){return t instanceof oa&&t.isHandled}constructor(t,i=Ii.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,this.isHandled=i===Ii.NotAvailable&&r===!0,Object.setPrototypeOf(this,oa.prototype)}};function e9(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var Yv,Ao,Ps,Qv,xo,Sn,Eo,Xv,Kv,vf,Bl,e0,Kr,es,t0,Ci,i0;function fe(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const r=i.length===1?[]:i[1];return Reflect.construct(e,r,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[r,...s]=i;return Reflect.construct(e,s,r.constructor)}}})}var r0;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(r0||(r0={}));var t9;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(t9||(t9={}));var Me=Yv=class{static from(...t){let i=t;return new Yv(function(){if(i){for(const r of i)r&&typeof r.dispose=="function"&&r.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Me=Yv=__decorate([fe],Me);var Ne=Ao=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isBefore(i)&&(i=s)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isAfter(i)&&(i=s)}return i}static isPosition(t){if(!t)return!1;if(t instanceof Ao)return!0;const{line:i,character:r}=t;return typeof i=="number"&&typeof r=="number"}static of(t){if(t instanceof Ao)return t;if(this.isPosition(t))return new Ao(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,i){if(t<0)throw $e("line must be non-negative");if(i<0)throw $e("character must be non-negative");this.c=t,this.e=i}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,i=0){if(t===null||i===null)throw $e();let r;return typeof t>"u"?r=0:typeof t=="number"?r=t:(r=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),r===0&&i===0?this:new Ao(this.line+r,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw $e();let r;return typeof t>"u"?r=this.line:typeof t=="number"?r=t:(r=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),r===this.line&&i===this.character?this:new Ao(r,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Ne=Ao=__decorate([fe],Ne);var Ie=Ps=class{static isRange(t){return t instanceof Ps?!0:t?Ne.isPosition(t.start)&&Ne.isPosition(t.end):!1}static of(t){if(t instanceof Ps)return t;if(this.isRange(t))return new Ps(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Ne(t,i),o=new Ne(r,s)):Ne.isPosition(t)&&Ne.isPosition(i)&&(n=Ne.of(t),o=Ne.of(i)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Ps.isRange(t)?this.contains(t.start)&&this.contains(t.end):Ne.isPosition(t)?!(Ne.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const i=Ne.Max(t.start,this.c),r=Ne.Min(t.end,this.e);if(!i.isAfter(r))return new Ps(i,r)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=Ne.Min(t.start,this.c),r=Ne.Max(t.end,this.end);return new Ps(i,r)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,i=this.end){if(t===null||i===null)throw $e();let r;return t?Ne.isPosition(t)?r=t:(r=t.start||this.start,i=t.end||this.end):r=this.start,r.isEqual(this.c)&&i.isEqual(this.end)?this:new Ps(r,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return i9(this)}};Ie=Ps=__decorate([fe],Ie);var ts=Qv=class extends Ie{static isSelection(t){return t instanceof Qv?!0:t?Ie.isRange(t)&&Ne.isPosition(t.anchor)&&Ne.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Ne(t,i),o=new Ne(r,s)):Ne.isPosition(t)&&Ne.isPosition(i)&&(n=Ne.of(t),o=Ne.of(i)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return aj(this)}};ts=Qv=__decorate([fe],ts);function i9(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function aj(e){let t=i9(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var r9=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw $e("connectionToken")},cj=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw $e("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw $e("port");typeof i<"u"&&r9(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},wf=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&r9(t)}},La=class Bm extends Error{static NotAvailable(t,i){return new Bm(t,Ii.NotAvailable,i)}static TemporarilyNotAvailable(t){return new Bm(t,Ii.TemporarilyNotAvailable)}constructor(t,i=Ii.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,Object.setPrototypeOf(this,Bm.prototype)}},Cr;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(Cr||(Cr={}));var Ra;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Ra||(Ra={}));var kn=xo=class{static isTextEdit(t){return t instanceof xo?!0:t?Ie.isRange(t)&&typeof t.newText=="string":!1}static replace(t,i){return new xo(t,i)}static insert(t,i){return xo.replace(new Ie(t,t),i)}static delete(t){return xo.replace(t,"")}static setEndOfLine(t){const i=new xo(new Ie(new Ne(0,0),new Ne(0,0)),"");return i.newEol=t,i}get range(){return this.c}set range(t){if(t&&!Ie.isRange(t))throw $e("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw $e("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw $e("newEol");this.f=t}constructor(t,i){this.c=t,this.e=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};kn=xo=__decorate([fe],kn);var bf=Sn=class{static isNotebookCellEdit(t){return t instanceof Sn?!0:t?rs.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new Sn(t,i)}static insertCells(t,i){return new Sn(new rs(t,t),i)}static deleteCells(t){return new Sn(t,[])}static updateCellMetadata(t,i){const r=new Sn(new rs(t,t),[]);return r.newCellMetadata=i,r}static updateNotebookMetadata(t){const i=new Sn(new rs(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};bf=Sn=__decorate([fe],bf);var s0=class zm{static isSnippetTextEdit(t){return t instanceof zm?!0:t?Ie.isRange(t.range)&&ko.isSnippetString(t.snippet):!1}static replace(t,i){return new zm(t,i)}static insert(t,i){return zm.replace(new Ie(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},s9;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(s9||(s9={}));var So=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,i,r,s){this.c.push({_type:1,from:t,to:i,options:r,metadata:s})}createFile(t,i,r){this.c.push({_type:1,from:void 0,to:t,options:i,metadata:r})}deleteFile(t,i,r){this.c.push({_type:1,from:t,to:void 0,options:i,metadata:r})}e(t,i,r){this.c.push({_type:3,metadata:r,uri:t,edit:{editType:5,metadata:i}})}f(t,i,r,s){const n=i.start,o=i.end;(n!==o||r.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:r,metadata:s})}g(t,i,r,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:i,metadata:r}})}replace(t,i,r,s){this.c.push({_type:2,uri:t,edit:new kn(i,r),metadata:s})}insert(t,i,r,s){this.replace(t,new Ie(i,i),r,s)}delete(t,i,r){this.replace(t,i,"",r)}has(t){return this.c.some(i=>i._type===2&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const r of i){if(!r)continue;let s,n;Array.isArray(r)?(s=r[0],n=r[1]):s=r,bf.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):s0.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n,keepWhitespace:s.keepWhitespace}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let r=0;r<this.c.length;r++){const s=this.c[r];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[r]=void 0);break}}d2(this.c)}}get(t){const i=[];for(const r of this.c)r._type===2&&r.uri.toString()===t.toString()&&i.push(r.edit);return i}entries(){const t=new Gt;for(const i of this.c)if(i._type===2){let r=t.get(i.uri);r||(r=[i.uri,[]],t.set(i.uri,r)),r[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};So=__decorate([fe],So);var ko=Eo=class{static isSnippetString(t){return t instanceof Eo?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=Eo.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.e++){if(typeof t=="function"){const r=new Eo;r.e=this.e,t(r),this.e=r.e,t=r.value}else t=Eo.c(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.e++){const r=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=r,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const r=new Eo;r.e=this.e,i(r),this.e=r.e,i=r.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};ko=Eo=__decorate([fe],ko);var Io;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(Io||(Io={}));var oi;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(oi||(oi={}));var tr=Xv=class{static isLocation(t){return t instanceof Xv?!0:t?Ie.isRange(t.range)&&A.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if(Ie.isRange(i))this.range=Ie.of(i);else if(Ne.isPosition(i))this.range=new Ie(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};tr=Xv=__decorate([fe],tr);var zl=class{static is(t){return t?typeof t.message=="string"&&t.location&&Ie.isRange(t.location.range)&&A.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};zl=__decorate([fe],zl);var yf=class{constructor(t,i,r=oi.Error){if(!Ie.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=r}toJSON(){return{severity:oi[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&Ri(t.tags,i.tags)&&Ri(t.relatedInformation,i.relatedInformation,zl.isEqual)}};yf=__decorate([fe],yf);var Af=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};Af=__decorate([fe],Af);var xf=class extends Af{constructor(t,i,r,s){super(t,i),this.canIncreaseVerbosity=r,this.canDecreaseVerbosity=s}};xf=__decorate([fe],xf);var n0;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(n0||(n0={}));var Hl;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Hl||(Hl={}));var Ef=class{constructor(t,i=Hl.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:Hl[this.kind]}}};Ef=__decorate([fe],Ef);var Sf=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};Sf=__decorate([fe],Sf);var st;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(st||(st={}));var Wl;(function(e){e[e.Deprecated=1]="Deprecated"})(Wl||(Wl={}));var _l=Kv=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,r,s,n){this.name=t,this.kind=i,this.containerName=n,typeof r=="string"&&(this.containerName=r),s instanceof tr?this.location=s:r instanceof Ie&&(this.location=new tr(s,r)),Kv.validate(this)}toJSON(){return{name:this.name,kind:st[this.kind],location:this.location,containerName:this.containerName}}};_l=Kv=__decorate([fe],_l);var Vl=vf=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(vf.validate)}constructor(t,i,r,s,n){this.name=t,this.detail=i,this.kind=r,this.range=s,this.selectionRange=n,this.children=[],vf.validate(this)}};Vl=vf=__decorate([fe],Vl);var ql;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(ql||(ql={}));var Gl=class{constructor(t,i){this.title=t,this.kind=i}};Gl=__decorate([fe],Gl);var pt=class{static{Bl=this}static{this.c="."}constructor(t){this.value=t}append(t){return new Bl(this.value?this.value+Bl.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Bl.c)}};pt=Bl=__decorate([fe],pt),pt.Empty=new pt(""),pt.QuickFix=pt.Empty.append("quickfix"),pt.Refactor=pt.Empty.append("refactor"),pt.RefactorExtract=pt.Refactor.append("extract"),pt.RefactorInline=pt.Refactor.append("inline"),pt.RefactorMove=pt.Refactor.append("move"),pt.RefactorRewrite=pt.Refactor.append("rewrite"),pt.Source=pt.Empty.append("source"),pt.SourceOrganizeImports=pt.Source.append("organizeImports"),pt.SourceFixAll=pt.Source.append("fixAll"),pt.Notebook=pt.Empty.append("notebook");var Zl=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Zl=__decorate([fe],Zl);var o0=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},n9=class{constructor(e,t){this.fromRanges=t,this.from=e}},o9=class{constructor(e,t){this.fromRanges=t,this.to=e}},Oa;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Oa||(Oa={}));var kf=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};kf=__decorate([fe],kf);var Hi=e0=class{#e;static isMarkdownString(t){return t instanceof e0?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new Td(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};Hi=e0=__decorate([fe],Hi);var a0=class{constructor(t,i){this.label=t,this.documentation=i}};a0=__decorate([fe],a0);var c0=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};c0=__decorate([fe],c0);var l0=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};l0=__decorate([fe],l0);var u0;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(u0||(u0={}));var h0;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(h0||(h0={}));var If=class{constructor(t){this.value=t}};If=__decorate([fe],If);var Cf=class{constructor(t,i,r){this.position=t,this.label=i,this.kind=r}};Cf=__decorate([fe],Cf);var Fa;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Fa||(Fa={}));var me;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(me||(me={}));var Jl;(function(e){e[e.Deprecated=1]="Deprecated"})(Jl||(Jl={}));var $f=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&me[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};$f=__decorate([fe],$f);var ja=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};ja=__decorate([fe],ja);var d0=class{constructor(t,i,r){this.insertText=t,this.range=i,this.command=r}};d0=__decorate([fe],d0);var f0=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};f0=__decorate([fe],f0);var Co;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(Co||(Co={}));var Ua;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(Ua||(Ua={}));var Yl;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Yl||(Yl={}));var In;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(In||(In={}));function lj(e,t){return`${Ve.toKey(e)}.${t}`}var $r;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})($r||($r={}));var Ba;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Ba||(Ba={}));var Df;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Df||(Df={}));var za;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(za||(za={}));var Ha;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(Ha||(Ha={}));var Ql;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Ql||(Ql={}));var $o;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})($o||($o={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(za||(za={}));var Wa;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Wa||(Wa={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(Wa||(Wa={}));var Pf=class{constructor(t,i){if(i&&!A.isUri(i))throw $e("target");if(!Ie.isRange(t)||t.isEmpty)throw $e("range");this.range=t,this.target=i}};Pf=__decorate([fe],Pf);var _a=class{constructor(t,i,r,s){this.red=t,this.green=i,this.blue=r,this.alpha=s}};_a=__decorate([fe],_a);var Tf=class{constructor(t,i){if(i&&!(i instanceof _a))throw $e("color");if(!Ie.isRange(t)||t.isEmpty)throw $e("range");this.range=t,this.color=i}};Tf=__decorate([fe],Tf);var Mf=class{constructor(t){if(!t||typeof t!="string")throw $e("label");this.label=t}};Mf=__decorate([fe],Mf);var a9;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(a9||(a9={}));var p0;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(p0||(p0={}));var g0;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(g0||(g0={}));var Xl;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Xl||(Xl={}));var m0;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(m0||(m0={}));var uj=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw $e("startIndex");if(typeof t!="number"||t<1)throw $e("length");if(i!==void 0&&typeof i!="string")throw $e("tooltip")}},hj=class{constructor(e){this.uri=e}},dj=class{constructor(e){this.terminalCommand=e}},v0;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(v0||(v0={}));var fj=class{constructor(e){if(this.options=e,typeof e!="object")throw $e("options")}},w0;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Method=2]="Method",e[e.Alias=3]="Alias",e[e.Argument=4]="Argument",e[e.Option=5]="Option",e[e.OptionValue=6]="OptionValue",e[e.Flag=7]="Flag",e[e.SymbolicLinkFile=8]="SymbolicLinkFile",e[e.SymbolicLinkFolder=9]="SymbolicLinkFolder"})(w0||(w0={}));var pj=class{constructor(e,t,i,r,s,n,o,a,c){this.label=e,this.icon=t,this.detail=i,this.documentation=r,this.isFile=s,this.isDirectory=n,this.isKeyword=o,this.replacementIndex=a??0,this.replacementLength=c??0}},gj=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},b0;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(b0||(b0={}));var y0;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(y0||(y0={}));var A0;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(A0||(A0={}));var Kl=class{static{Kr=this}static{this.Clean=new Kr("clean","Clean")}static{this.Build=new Kr("build","Build")}static{this.Rebuild=new Kr("rebuild","Rebuild")}static{this.Test=new Kr("test","Test")}static from(t){switch(t){case"clean":return Kr.Clean;case"build":return Kr.Build;case"rebuild":return Kr.Rebuild;case"test":return Kr.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw $e("name");this.c=t}get id(){return this.c}};Kl=Kr=__decorate([fe],Kl);function c9(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var Va=class{constructor(t,i,r){if(typeof t!="string")throw $e("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=r):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw $e("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return c9(t)}};Va=__decorate([fe],Va);var Do=class{constructor(t,i,r){if(this.f=[],Array.isArray(i)){if(!t)throw $e("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw $e("command");this.e=t,i&&(this.f=i),this.g=r}else{if(typeof t!="string")throw $e("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw $e("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw $e("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return c9(t)}};Do=__decorate([fe],Do);var x0;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(x0||(x0={}));var Cn;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Cn||(Cn={}));var E0=class{constructor(e){this.c=e}computeId(){return"customExecution"+kt()}set callback(e){this.c=e}get callback(){return this.c}},Nf=class{static{es=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,r,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.w=this.source=r,this.execution=s,a=n,this.k=!0):i===Cn.Global||i===Cn.Workspace?(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o):(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof Va?this.l={type:es.e,id:this.q.computeId()}:this.q instanceof Do?this.l={type:es.f,id:this.q.computeId()}:this.q instanceof E0?this.l={type:es.c,id:this.q.computeId()}:this.l={type:es.g,id:kt()}}get definition(){return this.l}set definition(t){if(t==null)throw $e("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw $e("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const i=this.l.type;(es.g===i||es.e===i||es.f===i||es.c===i)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw $e("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};Nf=es=__decorate([fe],Nf);var $n;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})($n||($n={}));var S0;(function(e){function t(i){const r=i;return or(r.value)?r.tooltip&&!Fe(r.tooltip)?(console.log("INVALID view badge, invalid tooltip",r.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",r.value),!1)}e.isViewBadge=t})(S0||(S0={}));var Lf=t0=class{static isTreeItem(t,i){const r=t;if(r.checkboxState!==void 0){const s=or(r.checkboxState)?r.checkboxState:xt(r.checkboxState)&&or(r.checkboxState.state)?r.checkboxState.state:void 0,n=!or(r.checkboxState)&&xt(r.checkboxState)?r.checkboxState.tooltip:void 0;if(s===void 0||s!==is.Checked&&s!==is.Unchecked||n!==void 0&&!Fe(n))return console.log("INVALID tree item, invalid checkboxState",r.checkboxState),!1}if(t instanceof t0)return!0;if(r.label!==void 0&&!Fe(r.label)&&!r.label?.label)return console.log("INVALID tree item, invalid label",r.label),!1;if(r.id!==void 0&&!Fe(r.id))return console.log("INVALID tree item, invalid id",r.id),!1;if(r.iconPath!==void 0&&!Fe(r.iconPath)&&!A.isUri(r.iconPath)&&(!r.iconPath||!Fe(r.iconPath.id))){const s=r.iconPath;if(!s||!Fe(s.light)&&!A.isUri(s.light)&&!Fe(s.dark)&&!A.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",r.iconPath),!1}return r.description!==void 0&&!Fe(r.description)&&typeof r.description!="boolean"?(console.log("INVALID tree item, invalid description",r.description),!1):r.resourceUri!==void 0&&!A.isUri(r.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",r.resourceUri),!1):r.tooltip!==void 0&&!Fe(r.tooltip)&&!(r.tooltip instanceof Hi)?(console.log("INVALID tree item, invalid tooltip",r.tooltip),!1):r.command!==void 0&&!r.command.command?(console.log("INVALID tree item, invalid command",r.command),!1):r.collapsibleState!==void 0&&r.collapsibleState<Po.None&&r.collapsibleState>Po.Expanded?(console.log("INVALID tree item, invalid collapsibleState",r.collapsibleState),!1):r.contextValue!==void 0&&!Fe(r.contextValue)?(console.log("INVALID tree item, invalid contextValue",r.contextValue),!1):r.accessibilityInformation!==void 0&&!r.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",r.accessibilityInformation),!1):!0}constructor(t,i=Po.None){this.collapsibleState=i,A.isUri(t)?this.resourceUri=t:this.label=t}};Lf=t0=__decorate([fe],Lf);var Po;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Po||(Po={}));var is;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(is||(is={}));var Rf=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};Rf=__decorate([fe],Rf);var Of=class extends Rf{},mj=class extends Of{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},vj=class{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this.c=r}data(){return this.c()}},qa=class{#e=new Map;constructor(t){for(const[i,r]of t??[]){const s=this.#e.get(this.#t(i));s?s.push(r):this.#e.set(this.#t(i),[r])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[r,s]of this.#e)for(const n of s)t.call(i,n,r,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const r of i)yield[t,r]}#t(t){return t.toLowerCase()}};qa=__decorate([fe],qa);var k0=class{constructor(t,i,r){this.insertText=t,this.title=i,this.kind=r}};k0=__decorate([fe],k0);var I0;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(I0||(I0={}));var Dn=class Hm{static{this.c="."}constructor(t){this.value=t}append(...t){return new Hm((this.value?[this.value,...t]:t).join(Hm.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Hm.c)}};Dn.Empty=new Dn(""),Dn.Text=new Dn("text"),Dn.TextUpdateImports=Dn.Text.append("updateImports");var wj=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},hi=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};hi=__decorate([fe],hi),hi.File=new hi("file"),hi.Folder=new hi("folder");var eu=class{constructor(t){this.id=t}};eu=__decorate([fe],eu);var Ga;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(Ga||(Ga={}));var Za=class{get base(){return this.c}set base(t){this.c=t,this.e=A.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!A.isUri(t)&&!A.isUri(t.uri)))throw $e("base");if(typeof i!="string")throw $e("pattern");typeof t=="string"?this.baseUri=A.file(t):A.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};Za=__decorate([fe],Za);var l9=new WeakMap;function bj(e,t){l9.set(e,t)}var Ja=class{constructor(t,i,r,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof r=="string"&&(this.hitCondition=r),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=l9.get(this)??kt()),this.c}};Ja=__decorate([fe],Ja);var To=class extends Ja{constructor(t,i,r,s,n,o){if(super(i,r,s,n,o),t===null)throw $e("location");this.location=t}};To=__decorate([fe],To);var Mo=class extends Ja{constructor(t,i,r,s,n,o){super(i,r,s,n,o),this.functionName=t}};Mo=__decorate([fe],Mo);var Ff=class extends Ja{constructor(t,i,r,s,n,o,a,c){if(super(s,n,o,a,c),!i)throw $e("dataId");this.label=t,this.dataId=i,this.canPersist=r}};Ff=__decorate([fe],Ff);var Ya=class{constructor(t,i,r){this.command=t,this.args=i||[],this.options=r}};Ya=__decorate([fe],Ya);var Qa=class{constructor(t,i){this.port=t,this.host=i}};Qa=__decorate([fe],Qa);var tu=class{constructor(t){this.path=t}};tu=__decorate([fe],tu);var iu=class{constructor(t){this.implementation=t}};iu=__decorate([fe],iu);var u9=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},h9=class{constructor(e,t){this.session=e,this.threadId=t}},jf=class{constructor(t,i){this.range=t,this.expression=i}};jf=__decorate([fe],jf);var ru;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(ru||(ru={}));var Ts;(function(e){e[e.Other=0]="Other",e[e.Empty=1]="Empty",e[e.TokenCancellation=2]="TokenCancellation",e[e.LostRace=3]="LostRace",e[e.NotTaken=4]="NotTaken"})(Ts||(Ts={}));var Uf=class{constructor(t,i){this.range=t,this.text=i}};Uf=__decorate([fe],Uf);var Bf=class{constructor(t,i,r=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=r}};Bf=__decorate([fe],Bf);var zf=class{constructor(t,i){this.range=t,this.expression=i}};zf=__decorate([fe],zf);var C0=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};C0=__decorate([fe],C0);var $0;(function(e){e[e.AIGenerated=1]="AIGenerated"})($0||($0={}));var su;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(su||(su={}));var yj=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},Xa;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(Xa||(Xa={}));var Ut=Ci=class extends Error{static FileExists(t){return new Ci(t,pe.FileExists,Ci.FileExists)}static FileNotFound(t){return new Ci(t,pe.FileNotFound,Ci.FileNotFound)}static FileNotADirectory(t){return new Ci(t,pe.FileNotADirectory,Ci.FileNotADirectory)}static FileIsADirectory(t){return new Ci(t,pe.FileIsADirectory,Ci.FileIsADirectory)}static NoPermissions(t){return new Ci(t,pe.NoPermissions,Ci.NoPermissions)}static Unavailable(t){return new Ci(t,pe.Unavailable,Ci.Unavailable)}constructor(t,i=pe.Unknown,r){super(A.isUri(t)?t.toString(!0):t),this.code=r?.name??"Unknown",hk(this,i),Object.setPrototypeOf(this,Ci.prototype),typeof Error.captureStackTrace=="function"&&typeof r=="function"&&Error.captureStackTrace(this,r)}};Ut=Ci=__decorate([fe],Ut);var D0=class{constructor(t,i,r){this.start=t,this.end=i,this.kind=r}};D0=__decorate([fe],D0);var Ms;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Ms||(Ms={}));var nu;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(nu||(nu={}));var P0;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(P0||(P0={}));var T0;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(T0||(T0={}));var ou;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(ou||(ou={}));var au;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(au||(au={}));var cu;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(cu||(cu={}));var M0=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function Aj(e){return typeof e>"u"||x2(e)}var xj=class B3{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,r=t.tokenTypes.length;i<r;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,r=t.tokenModifiers.length;i<r;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,r,s,n){if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,i,r,s,n);if(Ie.isRange(t)&&typeof i=="string"&&Aj(r))return this.o(t,i,r);throw $e()}o(t,i,r){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(r)for(const l of r){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,i,r,s,n){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let d=this.g[5*h],f=this.g[5*h+1];d===0?(d=l,f+=u):d+=l,this.g[5*h]=d,this.g[5*h+1]=f,l=d,u=f}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=r,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=i}static r(t){const i=[],r=t.length/5|0;for(let a=0;a<r;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],d=t[5*c+1];return h-d}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<r;a++){const c=5*i[a],l=t[c+0],u=t[c+1],h=t[c+2],d=t[c+3],f=t[c+4],g=l-n,v=g===0?u-o:u,b=5*a;s[b+0]=g,s[b+1]=v,s[b+2]=h,s[b+3]=d,s[b+4]=f,n=l,o=u}return s}build(t){return this.f?new Ka(new Uint32Array(this.g),t):new Ka(B3.r(this.g),t)}},Ka=class{constructor(e,t){this.resultId=t,this.data=e}},d9=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},Hf=class{constructor(e,t){this.resultId=t,this.edits=e}},Wf;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Wf||(Wf={}));var Ej=class{constructor(e){this.name=e}},N0;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(N0||(N0={}));var lu=class{static{this.Back={iconPath:new hi("arrow-left")}}constructor(){}};lu=__decorate([fe],lu);var uu;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(uu||(uu={}));var ec;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(ec||(ec={}));var No;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(No||(No={}));var L0=class{static validate(e){if(typeof e.badge=="string"){let t=M5(e.badge,0);if(t<e.badge.length&&(t+=M5(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!hi.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},_f=class{constructor(t){this.kind=t}};_f=__decorate([fe],_f);var Pn;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Pn||(Pn={}));var rs=class m4{static isNotebookRange(t){return t instanceof m4?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,i){if(t<0)throw $e("start must be positive");if(i<0)throw $e("end must be positive");t<=i?(this.c=t,this.e=i):(this.c=i,this.e=t)}with(t){let i=this.c,r=this.e;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(r=t.end),i===this.c&&r===this.e?this:new m4(i,r)}},Vf=class v4{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>v4.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,r,s,n,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,v4.validate(this)}},f9=class{constructor(e){this.cells=e}},p9=class Xs{static isNotebookCellOutputItem(t){return t instanceof Xs?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return Xs.json(i,"application/vnd.code.notebook.error")}static stdout(t){return Xs.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return Xs.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new Xs(t,i)}static#e=new TextEncoder;static text(t,i=Yr.text){const r=Xs.#e.encode(String(t));return new Xs(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return Xs.text(r,i)}constructor(t,i){this.data=t,this.mime=i;const r=BS(i,!0);if(!r)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=r}},qf=class w4{static isNotebookCellOutput(t){return t instanceof w4?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const r=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=BS(o.mime);if(!r.has(a)||s6(a)){r.add(a);continue}s.add(n),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,i,r){this.items=w4.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=r):(this.id=kt(),this.metadata=i??r)}},Sj=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Lo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Lo||(Lo={}));var R0;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(R0||(R0={}));var Gf;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Gf||(Gf={}));var Zf;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Zf||(Zf={}));var kj=class{constructor(e,t){this.text=e,this.alignment=t}},O0;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(O0||(O0={}));var Jf;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Jf||(Jf={}));var g9=class{constructor(e,t=[]){this.uri=e,this.provides=nr(t)}},Ij=class{constructor(e){this.label=e}},hu;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(hu||(hu={}));var F0=class{constructor(t,i){this.label=t,this.timestamp=i}};F0=__decorate([fe],F0);var tc;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(tc||(tc={}));var Yf;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(Yf||(Yf={}));var Tn;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(Tn||(Tn={}));var Cj=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},$j=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},j0;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(j0||(j0={}));var ic;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(ic||(ic={}));var m9=class{constructor(e,t,i){this.controllerId=e,this.profileId=t,this.kind=i}},Qf=class{constructor(t=void 0,i=void 0,r=void 0,s=!1,n=!0){this.include=t,this.exclude=i,this.profile=r,this.continuous=s,this.preserveFocus=n}};Qf=__decorate([fe],Qf);var Xf=i0=class{static diff(t,i,r){const s=new i0(t);return s.expectedOutput=i,s.actualOutput=r,s}constructor(t){this.message=t}};Xf=i0=__decorate([fe],Xf);var du=class{constructor(t){this.id=t}};du=__decorate([fe],du);var Dj=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Kf=class{constructor(e,t){this.covered=e,this.total=t,ep(this)}};function ep(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var tp=class z3{static fromDetails(t,i){const r=new Kf(0,0),s=new Kf(0,0),n=new Kf(0,0);for(const a of i)if("branches"in a){r.total+=1,r.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new z3(t,r,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=i,o}constructor(t,i,r,s,n=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=r,this.declarationCoverage=s,this.includesTests=n}},v9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},w9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},b9=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},U0;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(U0||(U0={}));var B0;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(B0||(B0={}));var z0;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(z0||(z0={}));var H0=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},W0=class{constructor(e){this.uri=e}},ip=class{constructor(e,t){this.original=e,this.modified=t}},y9=class{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}},_0=class{constructor(e,t){this.uri=e,this.viewType=t}},A9=class{constructor(e){this.viewType=e}},V0=class{constructor(e,t){this.uri=e,this.notebookType=t}},q0=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},x9=class{constructor(){}},E9=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},S9=class{constructor(){}},k9=class{constructor(e){this.textDiffs=e}},G0;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(G0||(G0={}));var Z0;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(Z0||(Z0={}));var J0;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(J0||(J0={}));var Pj=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},Ro;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(Ro||(Ro={}));var Y0;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(Y0||(Y0={}));var Q0;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(Q0||(Q0={}));var fu;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(fu||(fu={}));var rp=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Hi(e):e}},pu=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Hi(e):e,this.vulnerabilities=t}},sp=class{constructor(e,t,i,r){this.title=e,this.message=t,this.data=i,this.buttons=r}},np=class{constructor(e,t){this.value=e,this.baseUri=t}},gu=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},X0=class{constructor(e){this.value=e}},op=class{constructor(e,t){this.value=e,this.task=t}},mu=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Hi(e):e}},ap=class{constructor(e){this.value=e}},Oo=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},cp=class{constructor(e,t){this.value=e,this.isEdit=t}},lp=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},up=class{constructor(e,t){this.uri=e,this.range=t}},K0=class{constructor(e){this.extensions=e}},vu=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},hp=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},wu=class{constructor(e){this.toolName=e}},ew=class{constructor(e,t,i,r,s,n){this.prompt=e,this.command=t,this.references=i,this.participant=r,this.toolReferences=s,this.editedFileEvents=n}},I9=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},Dr;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(Dr||(Dr={}));var tw;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(tw||(tw={}));var C9=class{constructor(e,t,i){this.document=e,this.selection=t,this.wholeRange=i}},$9=class{constructor(e){this.cell=e}},D9=class{constructor(e,t,i){this.mimeType=e,this.data=t,this.reference=i}},P9=class{constructor(e){this.diagnostics=e}},Wi;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Wi||(Wi={}));var dp=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},iw=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},Tj=class{constructor(e,t,i,r){this.command=e,this.language=t,this.confirmationMessages=i,this.presentation=r}},rw;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(rw||(rw={}));var T9=class b4{static User(t,i){return new b4(Wi.User,t,i)}static Assistant(t,i){return new b4(Wi.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new It(t)]:this.c=t}get content(){return this.c}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},M9=class y4{static User(t,i){return new y4(Wi.User,t,i)}static Assistant(t,i){return new y4(Wi.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new It(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(i=>typeof i=="string"?new It(i):i))}get content2(){return this.content.map(t=>t instanceof It?t.value:t)}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},Fo=class{constructor(e,t,i){this.callId=e,this.name=t,this.input=i}},It=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},Ns=class Wm{constructor(t,i){this.mimeType=i,this.data=t}static image(t,i){return new Wm(t,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return new Wm(_.fromString(r).buffer,i)}static text(t,i=Yr.text){return new Wm(_.fromString(t).buffer,i)}toJSON(){return{$mid:23,mimeType:this.mimeType,data:this.data}}},Ls;(function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e.WEBP="image/webp",e.BMP="image/bmp"})(Ls||(Ls={}));var ss=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},Rs=class fs extends Error{static#e="LanguageModelError";static NotFound(t){return new fs(t,fs.NotFound.name)}static NoPermissions(t){return new fs(t,fs.NoPermissions.name)}static Blocked(t){return new fs(t,fs.Blocked.name)}static tryDeserialize(t){if(t.name===fs.#e)return new fs(t.message,t.code,t.cause)}constructor(t,i,r){super(t,{cause:r}),this.name=fs.#e,this.code=i??""}},fp=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},N9=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},Mj=class extends fp{},sw;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(sw||(sw={}));var nw;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(nw||(nw={}));var ow;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(ow||(ow={}));var aw;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(aw||(aw={}));var cw;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(cw||(cw={}));var lw;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(lw||(lw={}));var Nj=class{constructor(e,t,i,r={},s){this.label=e,this.command=t,this.args=i,this.env=r,this.version=s}},Lj=class{constructor(e,t,i={},r){this.label=e,this.uri=t,this.headers=i,this.version=r}},L9;(function(e){e.UseFileStorage="chat.useFileStorage",e.AgentEnabled="chat.agent.enabled",e.Edits2Enabled="chat.edits2.enabled",e.ExtensionToolsEnabled="chat.extensionTools.enabled",e.EditRequests="chat.editRequests"})(L9||(L9={}));var R9;(function(e){e.Ask="ask",e.Edit="edit",e.Agent="agent"})(R9||(R9={}));var $i;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})($i||($i={})),function(e){function t(i){switch(i){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}($i||($i={}));var mX=V("IAiSettingsSearchService"),Mn;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(Mn||(Mn={}));var Rj={IconContribution:"base.contributions.icons"},O9;(function(e){function t(i,r){let s=i.defaults;for(;jt.isThemeIcon(s);){const n=rc.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(O9||(O9={}));var F9;(function(e){function t(r){return{weight:r.weight,style:r.style,src:r.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function i(r){const s=n=>Fe(n)?n:void 0;if(r&&Array.isArray(r.src)&&r.src.every(n=>Fe(n.format)&&Fe(n.location)))return{weight:s(r.weight),style:s(r.style),src:r.src.map(n=>({format:n.format,location:A.parse(n.location)}))}}e.fromJSONObject=i})(F9||(F9={}));var Oj=/^([\w_-]+)$/,Fj=p(2566,null),jj=class extends te{constructor(){super(),this.a=this.B(new $),this.onDidChange=this.a.event,this.f={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:p(2567,null),pattern:Oj.source,patternErrorMessage:Fj},fontCharacter:{type:"string",description:p(2568,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.g={type:"string",pattern:`^${jt.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.h={}}registerIcon(e,t,i,r){const s=this.b[e];if(s){if(i&&!s.description){s.description=i,this.f.properties[e].markdownDescription=`${i} $(${e})`;const a=this.g.enum.indexOf(e);a!==-1&&(this.g.enumDescriptions[a]=i),this.a.fire()}return s}const n={id:e,description:i,defaults:t,deprecationMessage:r};this.b[e]=n;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.f.properties[e]=o,this.g.enum.push(e),this.g.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.f.properties[e];const t=this.g.enum.indexOf(e);t!==-1&&(this.g.enum.splice(t,1),this.g.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.f}getIconReferenceSchema(){return this.g}registerIconFont(e,t){const i=this.h[e];return i||(this.h[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.h[e]}getIconFont(e){return this.h[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;jt.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.b).map(s=>this.b[s]);for(const s of r.filter(n=>!!n.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${jt.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(n=>!jt.isThemeIcon(n.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}},rc=new jj;Yt.add(Rj.IconContribution,rc);function sc(e,t,i,r){return rc.registerIcon(e,t,i,r)}function Uj(){const e=UR();for(const t in e){const i="\\"+e[t].toString(16);rc.registerIcon(t,{fontCharacter:i})}}Uj();var j9="vscode://schemas/icons",U9=Yt.as(of.JSONContribution);U9.registerSchema(j9,rc.getIconSchema());var B9=new Vr(()=>U9.notifySchemaChanged(j9),200);rc.onDidChange(()=>{B9.isScheduled()||B9.schedule()});var vX=sc("widget-close",ce.close,p(2569,null)),wX=sc("goto-previous-location",ce.arrowUp,p(2570,null)),bX=sc("goto-next-location",ce.arrowDown,p(2571,null)),yX=jt.modify(ce.sync,"spin"),AX=jt.modify(ce.loading,"spin"),bu;(function(e){e.LATEST_PROTOCOL_VERSION="2025-06-18",e.JSONRPC_VERSION="2.0",e.PARSE_ERROR=-32700,e.INVALID_REQUEST=-32600,e.METHOD_NOT_FOUND=-32601,e.INVALID_PARAMS=-32602,e.INTERNAL_ERROR=-32603})(bu||(bu={}));function Bj(e,t){return Ve.toKey(e)+"/"+t}var z9;(function(e){e[e.WorkspaceFolder=0]="WorkspaceFolder",e[e.Workspace=100]="Workspace",e[e.User=200]="User",e[e.Extension=300]="Extension",e[e.Filesystem=400]="Filesystem",e[e.RemoteBoost=-50]="RemoteBoost"})(z9||(z9={}));var H9;(function(e){function t(i,r){return i.id===r.id&&i.remoteAuthority===r.remoteAuthority&&i.label===r.label&&i.isTrustedByDefault===r.isTrustedByDefault}e.equals=t})(H9||(H9={}));var W9;(function(e){function t(s){return s}e.toSerialized=t;function i(s){return{id:s.id,label:s.label,cacheNonce:s.cacheNonce,launch:yu.fromSerialized(s.launch),variableReplacement:s.variableReplacement?uw.fromSerialized(s.variableReplacement):void 0}}e.fromSerialized=i;function r(s,n){return s.id===n.id&&s.label===n.label&&Ri(s.roots,n.roots,(o,a)=>o.toString()===a.toString())&&Ei(s.launch,n.launch)&&Ei(s.presentation,n.presentation)&&Ei(s.variableReplacement,n.variableReplacement)&&Ei(s.devMode,n.devMode)}e.equals=r})(W9||(W9={}));var uw;(function(e){function t(r){return r}e.toSerialized=t;function i(r){return{section:r.section,folder:r.folder?{...r.folder,uri:A.revive(r.folder.uri)}:void 0,target:r.target}}e.fromSerialized=i})(uw||(uw={}));var _9;(function(e){e[e.HasUnknown=0]="HasUnknown",e[e.LoadingUnknown=1]="LoadingUnknown",e[e.AllKnown=2]="AllKnown"})(_9||(_9={}));var xX=V("IMcpService"),V9;(function(e){e[e.Unknown=0]="Unknown",e[e.Cached=1]="Cached",e[e.Outdated=2]="Outdated",e[e.RefreshingFromUnknown=3]="RefreshingFromUnknown",e[e.RefreshingFromCached=4]="RefreshingFromCached",e[e.Live=5]="Live"})(V9||(V9={}));var q9;(function(e){e[e.Stdio=1]="Stdio",e[e.HTTP=2]="HTTP"})(q9||(q9={}));var yu;(function(e){function t(r){return r}e.toSerialized=t;function i(r){switch(r.type){case 2:return{type:r.type,uri:A.revive(r.uri),headers:r.headers};case 1:return{type:r.type,cwd:r.cwd,command:r.command,args:r.args,env:r.env,envFile:r.envFile}}}e.fromSerialized=i})(yu||(yu={}));var G9;(function(e){let t;(function(i){i[i.Stopped=0]="Stopped",i[i.Starting=1]="Starting",i[i.Running=2]="Running",i[i.Error=3]="Error"})(t=e.Kind||(e.Kind={})),e.toString=i=>{switch(i.state){case 0:return p(9046,null);case 1:return p(9047,null);case 2:return p(9048,null);case 3:return p(9049,null,i.message);default:o1(i)}},e.toKindString=i=>{switch(i){case 0:return"stopped";case 1:return"starting";case 2:return"running";case 3:return"error";default:o1(i)}},e.canBeStarted=i=>i===3||i===0,e.isRunning=i=>!e.canBeStarted(i.state)})(G9||(G9={}));var Z9;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(Z9||(Z9={}));var J9;(function(e){e.Readme="readme",e.Manifest="manifest",e.Configuration="configuration"})(J9||(J9={}));var zj=V("IMcpWorkbenchService"),Y9=class extends te{constructor(t,i){super(),this.f=t,this.B(i.onChange(this.update,this))}set mcpServer(t){this.f.forEach(i=>i.mcpServer=t)}update(t){for(const i of this.f)t&&i.mcpServer?t.name===i.mcpServer.name&&(i.mcpServer=t):i.update()}};Y9=__decorate([__param(1,zj)],Y9);var SX=new Z("mcpServersGalleryEnabled",!1),kX=new Z("hasInstalledMcpServers",!0),IX=sc("mcp-server",ce.mcp,p(9050,null)),Q9;(function(e){e.scheme="mcp-resource";const t="dylo78gyp";function i(s,n){return typeof n=="string"&&(n=A.parse(n)),n.with({scheme:e.scheme,authority:px(_.fromString(s.id)),path:["",n.scheme,n.authority||t].join("/")+n.path})}e.fromServer=i;function r(s){if(typeof s=="string"&&(s=A.parse(s)),s.scheme!==e.scheme)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const n=s.path.split("/");if(n.length<3)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const[,o,a,...c]=n,l=new URL(`${o}://${a.toLowerCase()===t?"":a}`);return l.pathname=c.length?"/"+c.join("/"):"",l.search=s.query,l.hash=s.fragment,{definitionId:zM(s.authority).toString(),resourceURL:l}}e.toServer=r})(Q9||(Q9={}));var X9;(function(e){e[e.Logging=1]="Logging",e[e.Completions=2]="Completions",e[e.Prompts=4]="Prompts",e[e.PromptsListChanged=8]="PromptsListChanged",e[e.Resources=16]="Resources",e[e.ResourcesSubscribe=32]="ResourcesSubscribe",e[e.ResourcesListChanged=64]="ResourcesListChanged",e[e.Tools=128]="Tools",e[e.ToolsListChanged=256]="ToolsListChanged"})(X9||(X9={}));var CX=V("IMcpServerSampling"),K9;(function(e){e.Prefix="mcp_",e[e.MaxPrefixLen=18]="MaxPrefixLen",e[e.MaxLength=64]="MaxLength"})(K9||(K9={}));var $X=V("IMcpElicitationService"),Pr;(function(e){function t(r){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=r,c=new Ne(s-1,n-1),l=new Ne(o-1,a-1);return new ts(c,l)}e.to=t;function i(r){const{anchor:s,active:n}=r;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=i})(Pr||(Pr={}));var R;(function(e){function t(r){if(!r)return;const{start:s,end:n}=r;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function i(r){if(!r)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=r;return new Ie(s-1,n-1,o-1,a-1)}e.to=i})(R||(R={}));var ns;(function(e){function t(r){return{uri:r.uri,range:R.from(r.range)}}e.from=t;function i(r){return new tr(A.revive(r.uri),R.to(r.range))}e.to=i})(ns||(ns={}));var hw;(function(e){function t(i){switch(i){case 1:return Tn.Comment;case 0:return Tn.Other;case 3:return Tn.RegEx;case 2:return Tn.String}}e.to=t})(hw||(hw={}));var Ge;(function(e){function t(r){return new Ne(r.lineNumber-1,r.column-1)}e.to=t;function i(r){return{lineNumber:r.line+1,column:r.character+1}}e.from=i})(Ge||(Ge={}));var nc;(function(e){function t(s,n,o){return yt(nr(s).map(a=>i(a,n,o)))}e.from=t;function i(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:r(s.scheme,n),pattern:Vi.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function r(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(nc||(nc={}));var pp;(function(e){function t(r){switch(r){case Io.Unnecessary:return 1;case Io.Deprecated:return 2}}e.from=t;function i(r){switch(r){case 1:return Io.Unnecessary;case 2:return Io.Deprecated;default:return}}e.to=i})(pp||(pp={}));var oc;(function(e){function t(r){let s;return r.code&&(Fe(r.code)||or(r.code)?s=String(r.code):s={value:String(r.code.value),target:r.code.target}),{...R.from(r.range),message:r.message,source:r.source,code:s,severity:Au.from(r.severity),relatedInformation:r.relatedInformation&&r.relatedInformation.map(gp.from),tags:Array.isArray(r.tags)?yt(r.tags.map(pp.from)):void 0}}e.from=t;function i(r){const s=new yf(R.to(r),r.message,Au.to(r.severity));return s.source=r.source,s.code=Fe(r.code)?r.code:r.code?.value,s.relatedInformation=r.relatedInformation&&r.relatedInformation.map(gp.to),s.tags=r.tags&&yt(r.tags.map(pp.to)),s}e.to=i})(oc||(oc={}));var gp;(function(e){function t(r){return{...R.from(r.location.range),message:r.message,resource:r.location.uri}}e.from=t;function i(r){return new zl(new tr(r.resource,R.to(r)),r.message)}e.to=i})(gp||(gp={}));var Au;(function(e){function t(r){switch(r){case oi.Error:return ki.Error;case oi.Warning:return ki.Warning;case oi.Information:return ki.Info;case oi.Hint:return ki.Hint}return ki.Error}e.from=t;function i(r){switch(r){case ki.Info:return oi.Information;case ki.Warning:return oi.Warning;case ki.Error:return oi.Error;case ki.Hint:return oi.Hint;default:return oi.Error}}e.to=i})(Au||(Au={}));var Bt;(function(e){function t(r){return typeof r=="number"&&r>=Yl.One?r-1:r===Yl.Beside?$F:CF}e.from=t;function i(r){if(typeof r=="number"&&r>=0)return r+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(Bt||(Bt={}));function Hj(e){return typeof e.range<"u"}function eI(e){return e.length===0?!0:!!Hj(e[0])}var xe;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function r(a){let c;if(i(a)){const{language:h,value:d}=a;c={value:"```"+h+`
`+d+"\n```\n"}}else Hi.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let d=A.parse(h,!0);d=d.with({query:s(d.query,l)}),l[h]=d}catch{}return""};return ct.walkTokens(ct.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(qR(h.href))}),c}e.from=r;function s(a,c){if(!a)return a;let l;try{l=Dx(a)}catch{}if(!l)return a;let u=!1;return l=Aa(l,h=>{if(A.isUri(h)){const d=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[d]=h,u=!0,d}else return}),u?JSON.stringify(l):a}function n(a){const c=new Hi(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?A.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(xe||(xe={}));function Wj(e){return eI(e)?e.map(t=>({range:R.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?xe.fromMany(t.hoverMessage):t.hoverMessage?xe.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:R.from(t)}))}function mp(e){return typeof e>"u"?e:typeof e=="string"?A.file(e):e}var ac;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?mp(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height}}e.from=t})(ac||(ac={}));var vp;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?mp(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ac.from(i.before):void 0,after:i.after?ac.from(i.after):void 0}}e.from=t})(vp||(vp={}));var dw;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case $o.OpenOpen:return 0;case $o.ClosedClosed:return 1;case $o.OpenClosed:return 2;case $o.ClosedOpen:return 3}}e.from=t})(dw||(dw={}));var fw;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?dw.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?vp.from(i.light):void 0,dark:i.dark?vp.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?mp(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ac.from(i.before):void 0,after:i.after?ac.from(i.after):void 0}}e.from=t})(fw||(fw={}));var zt;(function(e){function t(r){return{text:r.newText,eol:r.newEol&&hc.from(r.newEol),range:R.from(r.range)}}e.from=t;function i(r){const s=new kn(R.to(r.range),r.text);return s.newEol=typeof r.eol>"u"?void 0:hc.to(r.eol),s}e.to=i})(zt||(zt={}));var _i;(function(e){function t(r,s){const n={edits:[]};if(r instanceof So){const o=new G4;for(const a of r._allEntries())a._type===1&&A.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of r._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:fl(_.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:zt.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:R.from(a.range),text:a.edit.value,insertAsSnippet:!0,keepWhitespace:a.keepWhitespace},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(fc.from)}})}return n}e.from=t;function i(r){const s=new So,n=new Gt;for(const o of r.edits)if(o.textEdit){const a=o,c=A.revive(a.resource),l=R.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let d;h?d=s0.replace(l,new ko(u)):d=kn.replace(l,u);const f=n.get(c);f?f.push(d):n.set(c,[d])}else s.renameFile(A.revive(o.oldResource),A.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=i})(_i||(_i={}));var ur;(function(e){const t=Object.create(null);t[st.File]=0,t[st.Module]=1,t[st.Namespace]=2,t[st.Package]=3,t[st.Class]=4,t[st.Method]=5,t[st.Property]=6,t[st.Field]=7,t[st.Constructor]=8,t[st.Enum]=9,t[st.Interface]=10,t[st.Function]=11,t[st.Variable]=12,t[st.Constant]=13,t[st.String]=14,t[st.Number]=15,t[st.Boolean]=16,t[st.Array]=17,t[st.Object]=18,t[st.Key]=19,t[st.Null]=20,t[st.EnumMember]=21,t[st.Struct]=22,t[st.Event]=23,t[st.Operator]=24,t[st.TypeParameter]=25;function i(s){return typeof t[s]=="number"?t[s]:6}e.from=i;function r(s){for(const n in t)if(t[n]===s)return Number(n);return st.Property}e.to=r})(ur||(ur={}));var Os;(function(e){function t(r){switch(r){case Wl.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Wl.Deprecated}}e.to=i})(Os||(Os={}));var jo;(function(e){function t(r){return{name:r.name,kind:ur.from(r.kind),tags:r.tags&&r.tags.map(Os.from),containerName:r.containerName,location:Di.from(r.location)}}e.from=t;function i(r){const s=new _l(r.name,ur.to(r.kind),r.containerName,Di.to(r.location));return s.tags=r.tags&&r.tags.map(Os.to),s}e.to=i})(jo||(jo={}));var pw;(function(e){function t(r){const s={name:r.name||"!!MISSING: name!!",detail:r.detail,range:R.from(r.range),selectionRange:R.from(r.selectionRange),kind:ur.from(r.kind),tags:r.tags?.map(Os.from)??[]};return r.children&&(s.children=r.children.map(t)),s}e.from=t;function i(r){const s=new Vl(r.name,r.detail,ur.to(r.kind),R.to(r.range),R.to(r.selectionRange));return el(r.tags)&&(s.tags=r.tags.map(Os.to)),r.children&&(s.children=r.children.map(i)),s}e.to=i})(pw||(pw={}));var Uo;(function(e){function t(r){const s=new o0(ur.to(r.kind),r.name,r.detail||"",A.revive(r.uri),R.to(r.range),R.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:r.name,detail:r.detail,kind:ur.from(r.kind),uri:r.uri,range:R.from(r.range),selectionRange:R.from(r.selectionRange),tags:r.tags?.map(Os.from)}}e.from=i})(Uo||(Uo={}));var gw;(function(e){function t(i){return new n9(Uo.to(i.from),i.fromRanges.map(r=>R.to(r)))}e.to=t})(gw||(gw={}));var mw;(function(e){function t(i){return new o9(Uo.to(i.to),i.fromRanges.map(r=>R.to(r)))}e.to=t})(mw||(mw={}));var Di;(function(e){function t(r){return{range:r.range&&R.from(r.range),uri:r.uri}}e.from=t;function i(r){return new tr(A.revive(r.uri),R.to(r.range))}e.to=i})(Di||(Di={}));var xu;(function(e){function t(r){const s=r,n=r;return{originSelectionRange:s.originSelectionRange?R.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:R.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?R.from(s.targetSelectionRange):void 0}}e.from=t;function i(r){return{targetUri:A.revive(r.uri),targetRange:R.to(r.range),targetSelectionRange:r.targetSelectionRange?R.to(r.targetSelectionRange):void 0,originSelectionRange:r.originSelectionRange?R.to(r.originSelectionRange):void 0}}e.to=i})(xu||(xu={}));var Eu;(function(e){function t(r){return{range:R.from(r.range),contents:xe.fromMany(r.contents),canIncreaseVerbosity:r.canIncreaseVerbosity,canDecreaseVerbosity:r.canDecreaseVerbosity}}e.from=t;function i(r){const s=r.contents.map(xe.to),n=R.to(r.range),o=r.canIncreaseVerbosity,a=r.canDecreaseVerbosity;return new xf(s,n,o,a)}e.to=i})(Eu||(Eu={}));var vw;(function(e){function t(r){return{range:R.from(r.range),expression:r.expression}}e.from=t;function i(r){return new jf(R.to(r.range),r.expression)}e.to=i})(vw||(vw={}));var wp;(function(e){function t(r){if(r instanceof Uf)return{type:"text",range:R.from(r.range),text:r.text};if(r instanceof Bf)return{type:"variable",range:R.from(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};if(r instanceof zf)return{type:"expression",range:R.from(r.range),expression:r.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(r){switch(r.type){case"text":return{range:R.to(r.range),text:r.text};case"variable":return{range:R.to(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};case"expression":return{range:R.to(r.range),expression:r.expression}}}e.to=i})(wp||(wp={}));var bp;(function(e){function t(r){return{frameId:r.frameId,stoppedLocation:R.from(r.stoppedLocation)}}e.from=t;function i(r){return new C0(r.frameId,R.to(r.stoppedLocation))}e.to=i})(bp||(bp={}));var cc;(function(e){function t(r){return{range:R.from(r.range),kind:r.kind}}e.from=t;function i(r){return new Ef(R.to(r.range),r.kind)}e.to=i})(cc||(cc={}));var ww;(function(e){function t(r){return{uri:r.uri,highlights:r.highlights.map(cc.from)}}e.from=t;function i(r){return new Sf(A.revive(r.uri),r.highlights.map(cc.to))}e.to=i})(ww||(ww={}));var bw;(function(e){function t(i){switch(i){case 1:return Fa.TriggerCharacter;case 2:return Fa.TriggerForIncompleteCompletions;case 0:default:return Fa.Invoke}}e.to=t})(bw||(bw={}));var yw;(function(e){function t(i){return{triggerKind:bw.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(yw||(yw={}));var yp;(function(e){function t(r){switch(r){case Jl.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Jl.Deprecated}}e.to=i})(yp||(yp={}));var Aw;(function(e){function t(i,r,s){return"icon"in i&&"command"in i?{command:r.toInternal(i.command,s),icon:Jp.fromThemeIcon(i.icon)}:{command:r.toInternal(i,s)}}e.from=t})(Aw||(Aw={}));var Ap;(function(e){const t=new Map([[me.Method,0],[me.Function,1],[me.Constructor,2],[me.Field,3],[me.Variable,4],[me.Class,5],[me.Interface,7],[me.Struct,6],[me.Module,8],[me.Property,9],[me.Unit,12],[me.Value,13],[me.Constant,14],[me.Enum,15],[me.EnumMember,16],[me.Keyword,17],[me.Snippet,28],[me.Text,18],[me.Color,19],[me.File,20],[me.Reference,21],[me.Folder,23],[me.Event,10],[me.Operator,11],[me.TypeParameter,24],[me.Issue,26],[me.User,25]]);function i(n){return t.get(n)??9}e.from=i;const r=new Map([[0,me.Method],[1,me.Function],[2,me.Constructor],[3,me.Field],[4,me.Variable],[5,me.Class],[7,me.Interface],[6,me.Struct],[8,me.Module],[9,me.Property],[12,me.Unit],[13,me.Value],[14,me.Constant],[15,me.Enum],[16,me.EnumMember],[17,me.Keyword],[28,me.Snippet],[18,me.Text],[19,me.Color],[20,me.File],[21,me.Reference],[23,me.Folder],[10,me.Event],[11,me.Operator],[24,me.TypeParameter],[25,me.User],[26,me.Issue]]);function s(n){return r.get(n)??me.Property}e.to=s})(Ap||(Ap={}));var xw;(function(e){function t(i,r){const s=new $f(i.label);return s.insertText=i.insertText,s.kind=Ap.to(i.kind),s.tags=i.tags?.map(yp.to),s.detail=i.detail,s.documentation=fo(i.documentation)?xe.to(i.documentation):i.documentation,s.sortText=i.sortText,s.filterText=i.filterText,s.preselect=i.preselect,s.commitCharacters=i.commitCharacters,Ye.isIRange(i.range)?s.range=R.to(i.range):typeof i.range=="object"&&(s.range={inserting:R.to(i.range.insert),replacing:R.to(i.range.replace)}),s.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&1),typeof i.insertTextRules<"u"&&i.insertTextRules&4?s.insertText=new ko(i.insertText):(s.insertText=i.insertText,s.textEdit=s.range instanceof Ie?new kn(s.range,s.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>zt.to(n))),s.command=r&&i.command?r.fromInternal(i.command):void 0,s}e.to=t})(xw||(xw={}));var xp;(function(e){function t(r){if(typeof r.label!="string"&&!Array.isArray(r.label))throw new TypeError("Invalid label");return{label:r.label,documentation:xe.fromStrict(r.documentation)}}e.from=t;function i(r){return{label:r.label,documentation:fo(r.documentation)?xe.to(r.documentation):r.documentation}}e.to=i})(xp||(xp={}));var Ep;(function(e){function t(r){return{label:r.label,documentation:xe.fromStrict(r.documentation),parameters:Array.isArray(r.parameters)?r.parameters.map(xp.from):[],activeParameter:r.activeParameter}}e.from=t;function i(r){return{label:r.label,documentation:fo(r.documentation)?xe.to(r.documentation):r.documentation,parameters:Array.isArray(r.parameters)?r.parameters.map(xp.to):[],activeParameter:r.activeParameter}}e.to=i})(Ep||(Ep={}));var Su;(function(e){function t(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(Ep.from):[]}}e.from=t;function i(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(Ep.to):[]}}e.to=i})(Su||(Su={}));var Ew;(function(e){function t(i,r){const s=new Cf(Ge.to(r.position),typeof r.label=="string"?r.label:r.label.map(Sw.to.bind(void 0,i)),r.kind&&Sp.to(r.kind));return s.textEdits=r.textEdits&&r.textEdits.map(zt.to),s.tooltip=fo(r.tooltip)?xe.to(r.tooltip):r.tooltip,s.paddingLeft=r.paddingLeft,s.paddingRight=r.paddingRight,s}e.to=t})(Ew||(Ew={}));var Sw;(function(e){function t(i,r){const s=new If(r.label);return s.tooltip=fo(r.tooltip)?xe.to(r.tooltip):r.tooltip,Mv.is(r.command)&&(s.command=i.fromInternal(r.command)),r.location&&(s.location=Di.to(r.location)),s}e.to=t})(Sw||(Sw={}));var Sp;(function(e){function t(r){return r}e.from=t;function i(r){return r}e.to=i})(Sp||(Sp={}));var Bo;(function(e){function t(r){return{range:R.from(r.range),url:r.target,tooltip:r.tooltip}}e.from=t;function i(r){let s;if(r.url)try{s=typeof r.url=="string"?A.parse(r.url,!0):A.revive(r.url)}catch{}const n=new Pf(R.to(r.range),s);return n.tooltip=r.tooltip,n}e.to=i})(Bo||(Bo={}));var kp;(function(e){function t(r){const s=new Mf(r.label);return r.textEdit&&(s.textEdit=zt.to(r.textEdit)),r.additionalTextEdits&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>zt.to(n))),s}e.to=t;function i(r){return{label:r.label,textEdit:r.textEdit?zt.from(r.textEdit):void 0,additionalTextEdits:r.additionalTextEdits?r.additionalTextEdits.map(s=>zt.from(s)):void 0}}e.from=i})(kp||(kp={}));var lc;(function(e){function t(r){return new _a(r[0],r[1],r[2],r[3])}e.to=t;function i(r){return[r.red,r.green,r.blue,r.alpha]}e.from=i})(lc||(lc={}));var kw;(function(e){function t(r){return{range:R.from(r.range)}}e.from=t;function i(r){return new Zl(R.to(r.range))}e.to=i})(kw||(kw={}));var Ip;(function(e){function t(i){switch(i){case 2:return Ba.AfterDelay;case 1:return Ba.Manual;case 3:case 4:return Ba.FocusOut}}e.to=t})(Ip||(Ip={}));var uc;(function(e){function t(r){switch(r){case $r.Off:return 0;case $r.Relative:return 2;case $r.Interval:return 3;case $r.On:default:return 1}}e.from=t;function i(r){switch(r){case 0:return $r.Off;case 2:return $r.Relative;case 3:return $r.Interval;case 1:default:return $r.On}}e.to=i})(uc||(uc={}));var hc;(function(e){function t(r){if(r===Cr.CRLF)return 1;if(r===Cr.LF)return 0}e.from=t;function i(r){if(r===1)return Cr.CRLF;if(r===0)return Cr.LF}e.to=i})(hc||(hc={}));var Cp;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case $n.SourceControl:return 3;case $n.Window:return 10;case $n.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(Cp||(Cp={}));var $p;(function(e){function t(r){const s={start:r.start+1,end:r.end+1};return r.kind&&(s.kind=Dp.from(r.kind)),s}e.from=t;function i(r){const s={start:r.start-1,end:r.end-1};return r.kind&&(s.kind=Dp.to(r.kind)),s}e.to=i})($p||($p={}));var Dp;(function(e){function t(r){if(r)switch(r){case Ms.Comment:return Ca.Comment;case Ms.Imports:return Ca.Imports;case Ms.Region:return Ca.Region}}e.from=t;function i(r){if(r)switch(r.value){case Ca.Comment.value:return Ms.Comment;case Ca.Imports.value:return Ms.Imports;case Ca.Region.value:return Ms.Region}}e.to=i})(Dp||(Dp={}));var ku;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?R.from(i.selection):void 0,override:typeof i.override=="boolean"?BO.id:void 0}}e.from=t})(ku||(ku={}));var Vi;(function(e){function t(n){return n instanceof Za?n.toJSON():typeof n=="string"?n:i(n)||r(n)?new Za(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function i(n){const o=n;return o?A.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function r(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new Za(A.revive(n.baseUri),n.pattern)}e.to=s})(Vi||(Vi={}));var Iw;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const r=i;return{language:r.language,scheme:r.scheme,pattern:Vi.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType}}}else return}e.from=t})(Iw||(Iw={}));var os;(function(e){function t(r){return{start:r.start,end:r.end}}e.from=t;function i(r){return new rs(r.start,r.end)}e.to=i})(os||(os={}));var dc;(function(e){function t(r){return{timing:typeof r.runStartTime=="number"&&typeof r.runEndTime=="number"?{startTime:r.runStartTime,endTime:r.runEndTime}:void 0,executionOrder:r.executionOrder,success:r.lastRunSuccess}}e.to=t;function i(r){return{lastRunSuccess:r.success,runStartTime:r.timing?.startTime,runEndTime:r.timing?.endTime,executionOrder:r.executionOrder}}e.from=i})(dc||(dc={}));var Iu;(function(e){function t(r){switch(r){case Lo.Markup:return Ta.Markup;case Lo.Code:default:return Ta.Code}}e.from=t;function i(r){switch(r){case Ta.Markup:return Lo.Markup;case Ta.Code:default:return Lo.Code}}e.to=i})(Iu||(Iu={}));var Nn;(function(e){function t(r){const s={metadata:r.metadata??Object.create(null),cells:[]};for(const n of r.cells)Vf.validate(n),s.cells.push(fc.from(n));return s}e.from=t;function i(r){const s=new f9(r.cells.map(fc.to));return X4(r.metadata)||(s.metadata=r.metadata),s}e.to=i})(Nn||(Nn={}));var fc;(function(e){function t(r){return{cellKind:Iu.from(r.kind),language:r.languageId,mime:r.mime,source:r.value,metadata:r.metadata,internalMetadata:dc.from(r.executionSummary??{}),outputs:r.outputs?r.outputs.map(Ln.from):[]}}e.from=t;function i(r){return new Vf(Iu.to(r.cellKind),r.source,r.language,r.mime,r.outputs?r.outputs.map(Ln.to):void 0,r.metadata,r.internalMetadata?dc.to(r.internalMetadata):void 0)}e.to=i})(fc||(fc={}));var pc;(function(e){function t(r){return{mime:r.mime,valueBytes:_.wrap(r.data)}}e.from=t;function i(r){return new p9(r.valueBytes.buffer,r.mime)}e.to=i})(pc||(pc={}));var Ln;(function(e){function t(r){return{outputId:r.id,items:r.items.map(pc.from),metadata:r.metadata}}e.from=t;function i(r){const s=r.items.map(pc.to);return new qf(s,r.outputId,r.metadata)}e.to=i})(Ln||(Ln={}));var Pp;(function(e){function t(s){return r(s)?{include:Vi.from(s.include)??void 0,exclude:Vi.from(s.exclude)??void 0}:Vi.from(s)??void 0}e.from=t;function i(s){return r(s)?{include:Vi.to(s.include),exclude:Vi.to(s.exclude)}:Vi.to(s)}e.to=i;function r(s){const n=s;return n?!Dt(n.include)&&!Dt(n.exclude):!1}})(Pp||(Pp={}));var Cw;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===Gf.Left?1:2,command:r.toInternal(n,s),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(Cw||(Cw={}));var $w;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:r.toInternal(n,s),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})($w||($w={}));var Dw;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(Dw||(Dw={}));var Tp;(function(e){function t(r){return{uri:r.uri,provides:r.provides}}e.from=t;function i(r){return new g9(A.revive(r.uri),r.provides)}e.to=i})(Tp||(Tp={}));var gc;(function(e){function t(r){return{message:xe.fromStrict(r.message)||"",type:0,expected:r.expectedOutput,actual:r.actualOutput,contextValue:r.contextValue,location:r.location&&{range:R.from(r.location.range),uri:r.location.uri},stackTrace:r.stackTrace?.map(s=>({label:s.label,position:s.position&&Ge.from(s.position),uri:s.uri&&A.revive(s.uri).toJSON()}))}}e.from=t;function i(r){const s=new Xf(typeof r.message=="string"?r.message:xe.to(r.message));return s.actualOutput=r.actual,s.expectedOutput=r.expected,s.contextValue=r.contextValue,s.location=r.location?Di.to(r.location):void 0,s}e.to=i})(gc||(gc={}));var Tr;(function(e){e.namespace=Xd,e.denamespace=f6})(Tr||(Tr={}));var Pw;(function(e){function t(i){return{controllerId:i.controllerId,profileId:i.profileId,group:mc.from(i.kind)}}e.from=t})(Pw||(Pw={}));var mc;(function(e){const t={[ic.Coverage]:8,[ic.Debug]:4,[ic.Run]:2};function i(r){return t.hasOwnProperty(r)?t[r]:2}e.from=i})(mc||(mc={}));var Rn;(function(e){function t(r){const s=mf(r).controllerId;return{extId:Be.fromExtHostTestItem(r,s).toString(),label:r.label,uri:A.revive(r.uri),busy:r.busy,tags:r.tags.map(n=>Tr.namespace(s,n.id)),range:Ye.lift(R.from(r.range)),description:r.description||null,sortText:r.sortText||null,error:r.error&&xe.fromStrict(r.error)||null}}e.from=t;function i(r){return{parent:void 0,error:void 0,id:Be.fromString(r.extId).localId,label:r.label,uri:A.revive(r.uri),tags:(r.tags||[]).map(s=>{const{tagId:n}=Tr.denamespace(s);return new du(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:R.to(r.range||void 0),canResolveChildren:!1,busy:r.busy,description:r.description||void 0,sortText:r.sortText||void 0}}e.toPlain=i})(Rn||(Rn={})),function(e){function t(r){return{id:r.id}}e.from=t;function i(r){return new du(r.id)}e.to=i}(Tr||(Tr={}));var Tw;(function(e){const t=(r,s)=>{const n=r.value;if(!n)return;const o={...Rn.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(gc.to)})),children:[]};if(r.children)for(const a of r.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(r){const s=new CO;for(const a of r.items)s.insert(Be.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:r.completedAt,results:o.map(a=>t(a)).filter(Yi)}}e.to=i})(Tw||(Tw={}));var Cu;(function(e){function t(a){return{covered:a.covered,total:a.total}}function i(a){return"line"in a?Ge.from(a):R.from(a)}function r(a){if(a)return"endLineNumber"in a?R.to(a):Ge.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:r(l.location),label:l.label});return new v9(a.count,r(a.location),a.branches?.map(l=>new w9(l.count,r(l.location),l.label)))}else return new b9(a.name,a.count,r(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:i(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&i(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:i(a.location)}}e.fromDetails=n;function o(a,c,l){return ep(l.statementCoverage),ep(l.branchCoverage),ep(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof tp&&l.includesTests.length?l.includesTests.map(u=>Be.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Cu||(Cu={}));var Mw;(function(e){function t(i){switch(i){case 1:return ql.Invoke;case 2:return ql.Automatic}}e.to=t})(Mw||(Mw={}));var zo;(function(e){function t(r){const s=new H0(ur.to(r.kind),r.name,r.detail||"",A.revive(r.uri),R.to(r.range),R.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:ur.from(r.kind),name:r.name,detail:r.detail??"",uri:r.uri,range:R.from(r.range),selectionRange:R.from(r.selectionRange),tags:r.tags?.map(Os.from)}}e.from=i})(zo||(zo={}));var Mp;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(Mp||(Mp={}));var Ho;(function(e){function t(n,o,a){const c=o.fileData;return c?new mj(new vj(c.name,A.revive(c.uri),c.id,Vh(()=>a(c.id)))):n===Yr.uriList&&o.uriListData?new Of(s(o.uriListData)):new Of(o.asString)}e.to=t;async function i(n,o,a=kt()){const c=await o.asString();if(n===Yr.uriList)return{id:a,asString:c,fileData:void 0,uriListData:r(c)};const l=o.asFile();return{id:a,asString:c,fileData:l?{name:l.name,uri:l.uri,id:l._itemId??l.id}:void 0}}e.from=i;function r(n){return pv.split(n).map(o=>{if(o.startsWith("#"))return o;try{return A.parse(o)}catch{}return o})}function s(n){return pv.create(n.map(o=>typeof o=="string"?o:A.revive(o)))}})(Ho||(Ho={}));var vc;(function(e){function t(s,n){const o=s.items.map(([a,c])=>[a,Ho.to(a,c,n)]);return new qa(o)}e.toDataTransfer=t;async function i(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Ho.from(o,a)]))}}e.from=i;async function r(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Ho.from(o,a,a.id)]))}}e.fromList=r})(vc||(vc={}));var Np;(function(e){function t(r,s){return{kind:"reply",agentId:r.participant??s?.agentId??"",subCommand:r.command??s?.command,message:r.prompt,title:r.label}}e.from=t;function i(r){return{prompt:r.message,label:r.title,participant:r.agentId,command:r.subCommand}}e.to=i})(Np||(Np={}));var wc;(function(e){function t(r){switch(r){case 0:return Wi.System;case 1:return Wi.User;case 2:return Wi.Assistant}}e.to=t;function i(r){switch(r){case Wi.System:return 0;case Wi.User:return 1;case Wi.Assistant:return 2}return 1}e.from=i})(wc||(wc={}));var tI;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new It(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new It(l.value):new ss(l.value));return new dp(a.toolCallId,c,a.isError)}else{if(a.type==="image_url")return;if(a.type==="tool_use")return new Fo(a.toolCallId,a.name,a.parameters)}}).filter(a=>a!==void 0),n=wc.to(r.role);return new T9(n,s,r.name)}e.to=t;function i(r){const s=wc.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new It(o)]);const a=o.map(c=>{if(c instanceof dp)return{type:"tool_result",toolCallId:c.callId,value:yt(c.content.map(l=>l instanceof It?{type:"text",value:l.value}:l instanceof ss?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof Fo)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof It)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(tI||(tI={}));var $u;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new It(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new It(l.value):l.type==="data"?new Ns(l.value.data.buffer,l.value.mimeType):new ss(l.value));return new iw(a.toolCallId,c,a.isError)}else return a.type==="image_url"?new Ns(a.value.data.buffer,a.value.mimeType):a.type==="data"?new Ns(a.data.buffer,a.mimeType):new Fo(a.toolCallId,a.name,a.parameters)}),n=wc.to(r.role);return new M9(n,s,r.name)}e.to=t;function i(r){const s=wc.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new It(o)]);const a=o.map(c=>{if(c instanceof iw||c instanceof dp)return{type:"tool_result",toolCallId:c.callId,value:yt(c.content.map(l=>l instanceof It?{type:"text",value:l.value}:l instanceof ss?{type:"prompt_tsx",value:l.value}:l instanceof Ns?{type:"data",value:{mimeType:l.mimeType,data:_.wrap(l.data)}}:void 0)),isError:c.isError};if(c instanceof Ns)return _j(c)?{type:"image_url",value:{mimeType:c.mimeType,data:_.wrap(c.data)}}:{type:"data",mimeType:c.mimeType,data:_.wrap(c.data)};if(c instanceof Fo)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof It)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type llm 2");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})($u||($u={}));function _j(e){switch(e.mimeType){case Ls.PNG:case Ls.JPEG:case Ls.GIF:case Ls.WEBP:case Ls.BMP:return!0;default:return!1}}var Du;(function(e){function t(r){return{kind:"markdownContent",content:xe.from(r.value)}}e.from=t;function i(r){return new rp(xe.to(r.content))}e.to=i})(Du||(Du={}));var Lp;(function(e){function t(r){return{kind:"codeblockUri",uri:r.value,isEdit:r.isEdit}}e.from=t;function i(r){return new cp(A.revive(r.uri),r.isEdit)}e.to=i})(Lp||(Lp={}));var Rp;(function(e){function t(r){return{kind:"markdownVuln",content:xe.from(r.value),vulnerabilities:r.vulnerabilities}}e.from=t;function i(r){return new pu(xe.to(r.content),r.vulnerabilities)}e.to=i})(Rp||(Rp={}));var Op;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:i.message,data:i.data,buttons:i.buttons}}e.from=t})(Op||(Op={}));var Pu;(function(e){function t(r){const{value:s,baseUri:n}=r;function o(a,c){return a.map(l=>{const u=A.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:Ar(n),uri:n,children:o(s,n)}}}e.from=t;function i(r){const s=Jt(r.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new np(a,o)}e.to=i})(Pu||(Pu={}));var bc;(function(e){function t(r){const s=o=>A.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:r.title,inlineReference:s(r.value)?r.value:n(r.value)?jo.from(r.value):ns.from(r.value)}}e.from=t;function i(r){const s=Jt(r);return new gu(A.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?jo.to(s.inlineReference):ns.to(s.inlineReference),r.name)}e.to=i})(bc||(bc={}));var Tu;(function(e){function t(r){return{kind:"progressMessage",content:xe.from(r.value)}}e.from=t;function i(r){return new X0(r.content.value)}e.to=i})(Tu||(Tu={}));var Mu;(function(e){function t(r){return{kind:"warning",content:xe.from(r.value)}}e.from=t;function i(r){return new mu(r.content.value)}e.to=i})(Mu||(Mu={}));var Nw;(function(e){function t(i){return{kind:"extensions",extensions:i.extensions}}e.from=t})(Nw||(Nw={}));var Lw;(function(e){function t(r){return{kind:"move",uri:r.uri,range:R.from(r.range)}}e.from=t;function i(r){return new up(A.revive(r.uri),R.to(r.range))}e.to=i})(Lw||(Lw={}));var Nu;(function(e){function t(r){return{kind:"prepareToolInvocation",toolName:r.toolName}}e.from=t;function i(r){return new wu(r.toolName)}e.to=i})(Nu||(Nu={}));var Fp;(function(e){function t(i){return{kind:"progressTask",content:xe.from(i.value)}}e.from=t})(Fp||(Fp={}));var Rw;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?xe.from(i):void 0}}e.from=t})(Rw||(Rw={}));var Lu;(function(e){function t(r,s,n){return{kind:"command",command:s.toInternal(r.value,n)??{command:r.value.command,title:r.value.title}}}e.from=t;function i(r,s){return new ap(s.fromInternal(r.command)??{command:r.command.id,title:r.command.title})}e.to=i})(Lu||(Lu={}));var jp;(function(e){function t(r){return{kind:"textEdit",uri:r.uri,edits:r.edits.map(s=>zt.from(s)),done:r.isDone}}e.from=t;function i(r){const s=new vu(A.revive(r.uri),r.edits.map(n=>zt.to(n)));return s.isDone=r.done,s}e.to=i})(jp||(jp={}));var Up;(function(e){function t(i){return i.newCellMetadata?{editType:3,index:i.range.start,metadata:i.newCellMetadata}:i.newNotebookMetadata?{editType:5,metadata:i.newNotebookMetadata}:{editType:1,index:i.range.start,count:i.range.end-i.range.start,cells:i.newCells.map(fc.from)}}e.from=t})(Up||(Up={}));var Bp;(function(e){function t(i){return{kind:"notebookEdit",uri:i.uri,edits:i.edits.map(Up.from),done:i.isDone}}e.from=t})(Bp||(Bp={}));var Wo;(function(e){function t(r){const s=jt.isThemeIcon(r.iconPath)?r.iconPath:A.isUri(r.iconPath)?{light:A.revive(r.iconPath)}:r.iconPath&&"light"in r.iconPath&&"dark"in r.iconPath&&A.isUri(r.iconPath.light)&&A.isUri(r.iconPath.dark)?{light:A.revive(r.iconPath.light),dark:A.revive(r.iconPath.dark)}:void 0;return typeof r.value=="object"&&"variableName"in r.value?{kind:"reference",reference:{variableName:r.value.variableName,value:A.isUri(r.value.value)||!r.value.value?r.value.value:ns.from(r.value.value)},iconPath:s,options:r.options}:{kind:"reference",reference:A.isUri(r.value)||typeof r.value=="string"?r.value:ns.from(r.value),iconPath:s,options:r.options}}e.from=t;function i(r){const s=Jt(r),n=o=>A.isUri(o)?o:ns.to(o);return new Oo(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=i})(Wo||(Wo={}));var zp;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(zp||(zp={}));var Hp;(function(e){function t(s,n,o){return s instanceof rp?Du.from(s):s instanceof gu?bc.from(s):s instanceof Oo?Wo.from(s):s instanceof X0?Tu.from(s):s instanceof np?Pu.from(s):s instanceof ap?Lu.from(s,n,o):s instanceof vu?jp.from(s):s instanceof hp?Bp.from(s):s instanceof pu?Rp.from(s):s instanceof cp?Lp.from(s):s instanceof mu?Mu.from(s):s instanceof sp?Op.from(s):s instanceof lp?zp.from(s):s instanceof up?Lw.from(s):s instanceof K0?Nw.from(s):s instanceof wu?Nu.from(s):{kind:"markdownContent",content:xe.from("")}}e.from=t;function i(s,n){switch(s.kind){case"reference":return Wo.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return r(s,n)}}e.to=i;function r(s,n){switch(s.kind){case"markdownContent":return Du.to(s);case"inlineReference":return bc.to(s);case"progressMessage":return;case"treeData":return Pu.to(s);case"command":return Lu.to(s,n)}}e.toContent=r})(Hp||(Hp={}));var Wp;(function(e){function t(i,r,s,n,o,a,c){const l=[],u=[];for(const d of i.variables.variables)d.kind==="tool"?l.push(d):d.kind==="toolset"?l.push(...d.value):u.push(d);const h={id:i.requestId,prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,isParticipantDetected:i.isParticipantDetected??!1,references:u.map(d=>Vp.to(d,n,c)).filter(Yi),toolReferences:l.map(Ru.to),location:_p.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:r,toolInvocationToken:Object.freeze({sessionId:i.sessionId}),tools:o,model:s,editedFileEvents:i.editedFileEvents,modeInstructions:i.modeInstructions};return et(a,"chatParticipantPrivate")||(delete h.id,delete h.attempt,delete h.enableCommandDetection,delete h.isParticipantDetected,delete h.location,delete h.location2,delete h.editedFileEvents),et(a,"chatParticipantAdditions")||(delete h.acceptedConfirmationData,delete h.rejectedConfirmationData,delete h.tools),h}e.to=t})(Wp||(Wp={}));var Ow;(function(e){function t(i){return{prompt:i.prompt,files:i.files.map(r=>A.revive(r))}}e.to=t})(Ow||(Ow={}));var _p;(function(e){function t(r){switch(r){case $i.Notebook:return Dr.Notebook;case $i.Terminal:return Dr.Terminal;case $i.Panel:return Dr.Panel;case $i.Editor:return Dr.Editor}}e.to=t;function i(r){switch(r){case Dr.Notebook:return $i.Notebook;case Dr.Terminal:return $i.Terminal;case Dr.Panel:return $i.Panel;case Dr.Editor:return $i.Editor}}e.from=i})(_p||(_p={}));var Vp;(function(e){function t(i,r,s){let n=i.value;if(!n){let o;try{o=JSON.stringify(i)}catch{o=`kind=${i.kind}, id=${i.id}, name=${i.name}`}s.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${o}`);return}if(E1(n))n=A.revive(n);else if(n&&typeof n=="object"&&"uri"in n&&"range"in n&&E1(n.uri))n=ns.to(Jt(n));else if(ZO(i)){const o=i.references?.[0]?.reference;n=new D9(i.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i.value))),o&&A.isUri(o)?o:void 0)}else if(i.kind==="diagnostic"){const o=i.filterSeverity&&Au.to(i.filterSeverity),a=i.filterUri&&A.revive(i.filterUri).toString();n=new P9(r.map(([c,l])=>i.filterUri&&c.toString()!==a?[c,[]]:[c,l.filter(u=>!(o&&u.severity>o||i.filterRange&&!Ye.areIntersectingOrTouching(i.filterRange,R.from(u.range))))]).filter(([,c])=>c.length>0))}return{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],value:n,modelDescription:i.modelDescription}}e.to=t})(Vp||(Vp={}));var Ru;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{name:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(Ru||(Ru={}));var Fw;(function(e){function t(i,r,s){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:r.toInternal(i.command,s)}}e.from=t})(Fw||(Fw={}));var yc;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:r(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function i(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=i;function r(s){return Aa(s,n=>{if(n.$mid===20)return new fp(Aa(n.content,r));if(n.$mid===21)return new It(n.value);if(n.$mid===22)return new ss(n.value)})}})(yc||(yc={}));var jw;(function(e){function t(i,r,s){if(r.action.kind==="vote")return;const n=yc.to(i);if(r.action.kind==="command"){const o=r.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return r.action.kind==="followUp"?{action:{kind:"followUp",followup:Np.to(r.action.followup)},result:n}:r.action.kind==="inlineChat"?{action:{kind:"editor",accepted:r.action.action==="accepted"},result:n}:r.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",Ro.Accepted],["rejected",Ro.Rejected],["saved",Ro.Saved]]).get(r.action.outcome)??Ro.Rejected,uri:A.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits},result:n}:{action:r.action,result:n}}e.to=t})(jw||(jw={}));var qp;(function(e){function t(i,r,s){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:r.toInternal(i,s)}e.from=t})(qp||(qp={}));var Gp;(function(e){function t(i){return{...i,documentation:xe.fromStrict(i.documentation)}}e.from=t})(Gp||(Gp={}));var Uw;(function(e){function t(i,r){return Array.isArray(i)?{items:i.map(s=>Gp.from(s))}:{items:i.items.map(s=>Gp.from(s)),resourceRequestConfig:i.resourceRequestConfig?Bw.from(i.resourceRequestConfig,r):void 0}}e.from=t})(Uw||(Uw={}));var Bw;(function(e){function t(i,r){return{...i,pathSeparator:r,cwd:i.cwd}}e.from=t})(Bw||(Bw={}));var zw;(function(e){function t(i){return{kind:Hw.to(i.kind),acceptedLength:i.acceptedLength}}e.to=t})(zw||(zw={}));var Hw;(function(e){function t(i){switch(i){case 0:return Co.Word;case 1:return Co.Line;case 2:return Co.Suggest;default:return Co.Unknown}}e.to=t})(Hw||(Hw={}));var Ww;(function(e){function t(i,r){if(i.kind===Ud.Ignored){const s=i.supersededBy?r(i.supersededBy):void 0;return{kind:Ua.Ignored,supersededBy:s,userTypingDisagreed:i.userTypingDisagreed}}else if(i.kind===Ud.Accepted)return{kind:Ua.Accepted};return{kind:Ua.Rejected}}e.to=t})(Ww||(Ww={}));var _w;(function(e){function t(i,r){return{id:r,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||0,contextValue:i.contextValue}}e.from=t})(_w||(_w={}));var iI;(function(e){function t(i){return{name:i.id,description:i.modelDescription,inputSchema:i.inputSchema,tags:i.tags??[]}}e.to=t})(iI||(iI={}));var rI;(function(e){function t(r){return new fp(r.content.map(s=>s.kind==="text"?new It(s.value):new ss(s.value)))}e.to=t;function i(r,s){return r.toolResultMessage&&M(s,"chatParticipantPrivate"),{content:r.content.map(n=>{if(n instanceof It)return{kind:"text",value:n.value};if(n instanceof ss)return{kind:"promptTsx",value:n.value};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:xe.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(n=>A.isUri(n)?n:ns.from(n))}}e.from=i})(rI||(rI={}));var Zp;(function(e){function t(r){return new N9(r.content.map(s=>{if(s.kind==="text")return new It(s.value);if(s.kind==="data"){const n=Object.values(Ls).includes(s.value.mimeType)?s.value.mimeType:void 0;if(!n)throw new Error("Invalid MIME type");return new Ns(s.value.data.buffer,n)}else return new ss(s.value)}))}e.to=t;function i(r,s){r.toolResultMessage&&M(s,"chatParticipantPrivate");let n=!1;const o={content:r.content.map(a=>{if(a instanceof It)return{kind:"text",value:a.value};if(a instanceof ss)return{kind:"promptTsx",value:a.value};if(a instanceof Ns)return n=!0,{kind:"data",value:{mimeType:a.mimeType,data:_.wrap(a.data)}};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:xe.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(a=>A.isUri(a)?a:ns.from(a))};return n?new vi(o):o}e.from=i})(Zp||(Zp={}));var Jp;(function(e){function t(i){return i}e.fromThemeIcon=t})(Jp||(Jp={}));var Vw;(function(e){function t(r){return{query:r.query,kind:i(r.kind),settings:r.settings}}e.fromSettingsSearchResult=t;function i(r){switch(r){case Mn.EMBEDDED:return Mn.EMBEDDED;case Mn.LLM_RANKED:return Mn.LLM_RANKED;case Mn.CANCELED:return Mn.CANCELED;default:throw new Error("Unknown AiSettingsSearchResultKind")}}})(Vw||(Vw={}));var Ou;(function(e){function t(r){return!!r.uri}function i(r){return yu.toSerialized(t(r)?{type:2,uri:r.uri,headers:Object.entries(r.headers)}:{type:1,cwd:r.cwd?.fsPath,args:r.args,command:r.command,env:r.env,envFile:void 0})}e.from=i})(Ou||(Ou={}));var sI=class A4{constructor(t,i){this.line=t,this.character=i}isBefore(t){return!1}isBeforeOrEqual(t){return!1}isAfter(t){return!1}isAfterOrEqual(t){return!1}isEqual(t){return!1}compareTo(t){return 0}translate(t,i){return new A4(0,0)}with(t){return new A4(0,0)}},nI=class x4{constructor(t,i,r,s){this.isEmpty=!1,this.isSingleLine=!1,this.start=new sI(t,i),this.end=new sI(r,s)}contains(t){return!1}isEqual(t){return!1}intersection(t){}union(t){return new x4(0,0,0,0)}with(t){return new x4(0,0,0,0)}},Fs=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},Yp=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},qw=class{constructor(e){this.keyword=e}},js;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(js||(js={}));var Qp;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Qp||(Qp={}));var Xp=2e4,oI="\u27EA ",aI=" characters skipped \u27EB",Vj=(oI.length+aI.length+5)*2,DX=V("searchService"),cI;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(cI||(cI={}));var lI;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(lI||(lI={}));function Gw(e){return!!e.rangeLocations&&!!e.previewText}var uI;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(uI||(uI={}));var hI=class{constructor(e,t,i,r){this.rangeLocations=[],this.webviewIndex=r;const s=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&qj(s)){e=LT(e,i.matchLines);let n="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+i.charsPerLine;if(u>a+c+Vj){const d=oI+(u-a)+aI;n+=d+e.slice(u,h),o+=u-(a+d.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new Gj(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=qh(t,a=>({preview:new Zw(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function qj(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var Zw=class{constructor(e,t,i,r){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r}},Gj=class extends Zw{constructor(e,t,i){super(e,t,e,i)}},dI;(function(e){e.List="list",e.Tree="tree"})(dI||(dI={}));var fI;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(fI||(fI={}));var pI;(function(e){e.Auto="auto",e.Manual="manual",e.RunOnEmpty="runOnEmpty"})(pI||(pI={}));function Zj(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r||void 0;let s=Object.create(null);return s=xs(s,Xe(i)),s=xs(s,Xe(r),!0),s}function gI(e,t){return e.excludePattern&&Pa(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Pa(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const r=i.folder.fsPath;if(ro(t,r)){const s=ma(r,t);return!i.includePattern||!!Pa(i.includePattern,s)}else return!1}):!1:!0}var On;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(On||(On={}));var _o=class extends Error{constructor(e,t){super(e),this.code=t}};function mI(e){const t={message:e.message,code:e.code};return new Error(JSON.stringify(t))}function Jj(e){return!!e.path}function Jw(e,t,i=!0){const r=e.searchPath?e.searchPath:e.relativePath;return i?MT(r,t):Pa(t,r)}function Ac(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(r=>{const s=i[r];return typeof s=="boolean"&&s})}var vI=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(r=>({...e.excludePattern||{},...r.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(r=>kr(r));let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=kr(i))}d(e,t,i){let r=null;for(const s of this.b){const n=s(e,t,i);if(typeof n=="string"){r=n;break}}return r}matchesExcludesSync(e,t,i){return!!(this.b&&this.d(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.d(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const r=()=>this.c?!!this.c(e,t,i):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,i);return dn(n)?n.then(o=>o?!1:r()):r()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>Yj(t)||e,!1)}};function Yj(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function Qj(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(r=>r?wI(r):{})),t.then(r=>!!r[i]))}function Yw(e){if(!e)return;let t;return i=>{if(!t){const r=e();t=r?wI(r):{}}return!!t[i]}}function wI(e){const t={};for(const i of e)t[i]=!0;return t}function bI(e){return e.flatMap(t=>t.patterns.map(i=>t.baseUri?{baseUri:t.baseUri,pattern:i}:i))}var Qw={matchLines:100,charsPerLine:1e4},Xj=!1,Kj=class{constructor(e,t,i){this.id=e,this.dependencies=t,this.callback=i}},Vo;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(Vo||(Vo={}));var eU=class H3{static{this.INSTANCE=new H3}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=Vo.Uninitialized}g(){if(this.d===Vo.Uninitialized){if(globalThis.define){this.d=Vo.InitializedExternal;return}}else return;this.d=Vo.InitializedInternal,globalThis.define=(t,i,r)=>{typeof t!="string"&&(r=i,i=t,t=null),(typeof i!="object"||!Array.isArray(i))&&(r=i,i=null),this.c.push(new Kj(t,i,r))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${q.vscodeFileResource}://${J5}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===Vo.InitializedExternal)return new Promise(o=>{const a=kt();globalThis.define(a,[t],function(c){o(c)})});const i=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!i){console.warn(`Did not receive a define call from script ${t}`);return}const r={},s=[],n=[];if(Array.isArray(i.dependencies))for(const o of i.dependencies)o==="exports"?s.push(r):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof i.callback=="function"?i.callback(...s)??r:i.callback}h(t){return new Promise((i,r)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),i(this.c.pop())},a=c=>{n(),r(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const i=(await import("fs")).default,r=(await import("vm")).default,s=(await import("module")).default,n=A.parse(t).fsPath,o=i.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new r.Script(a).runInThisContext().apply(),this.c.pop()}catch(i){throw i}}},Xw=new Map;async function Kw(e,t,i){i===void 0&&(i=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const r=t?`${e}/${t}`:e;if(Xw.has(r))return Xw.get(r);let s;if(/^\w[\w\d+.-]*:\/\//.test(r))s=r;else{const c=`${Xj&&i&&!ed?nM:sM}/${r}`;s=ud.asBrowserUri(c).toString(!0)}const n=eU.INSTANCE.load(s);return Xw.set(r,n),n}var Kp="utf8",eb="utf8bom",eg="utf16be",tg="utf16le",ig=[254,255],tb=[255,254],Fu=[239,187,191],tU=512,iU=512,rU=512*8,sU=512*128,yI;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(yI||(yI={}));var nU=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},oU=class W3{static async create(t){let i;if(t!==Kp)i=(await Kw("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getDecoder(AI(t));else{const r=new TextDecoder;i={write(s){return r.decode(s,{stream:!0})},end(){return r.decode()}}}return new W3(i)}constructor(t){this.a=t}write(t){return this.a.write(t)}end(){return this.a.end()}};function aU(e,t){const i=t.minBytesRequiredForDetection??t.guessEncoding?rU:iU;return new Promise((r,s)=>{const n=gd(h=>h.join("")),o=[];let a=0,c;const l=new tt,u=async()=>{try{const h=await vU({buffer:_.concat(o),bytesRead:a},t.guessEncoding,t.candidateGuessEncodings);if(h.seemsBinary&&t.acceptTextOnly)throw new nU("Stream is binary but only text is accepted for decoding",1);h.encoding=await t.overwriteEncoding(h.encoding),c=await oU.create(h.encoding);const d=c.write(_.concat(o).buffer);n.write(d),o.length=0,a=0,r({stream:n,detected:h})}catch(h){l.cancel(),n.destroy(),s(h)}};P1(e,{onData:async h=>{c?n.write(c.write(h.buffer)):(o.push(h),a+=h.byteLength,a>=i&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:h=>n.error(h),onEnd:async()=>{c||await u(),n.end(c?.end())}},l.token)})}async function cU(e,t,i){const s=(await Kw("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getEncoder(AI(t),i);let n=!1,o=!1;return{read(){if(o)return null;const a=e.read();if(typeof a!="string"){if(o=!0,!n&&i?.addBOM)switch(t){case Kp:case eb:return _.wrap(Uint8Array.from(Fu));case eg:return _.wrap(Uint8Array.from(ig));case tg:return _.wrap(Uint8Array.from(tb))}const c=s.end();return c&&c.length>0?(n=!0,_.wrap(c)):null}return n=!0,_.wrap(s.write(a))}}}function AI(e){return e===eb||e===null?Kp:e}function lU(e,t){if(!e||t<ig.length)return null;const i=e.readUInt8(0),r=e.readUInt8(1);if(i===ig[0]&&r===ig[1])return eg;if(i===tb[0]&&r===tb[1])return tg;if(t<Fu.length)return null;const s=e.readUInt8(2);return i===Fu[0]&&r===Fu[1]&&s===Fu[2]?eb:null}var uU=["ascii","utf-16","utf-32"];async function hU(e,t){const i=await Kw("jschardet","dist/jschardet.min.js"),r=e.slice(0,sU),s=gU(r.buffer);t&&(t=yt(t.map(a=>pU(a))),t.length===0&&(t=void 0));let n;try{n=i.detect(s,t?{detectEncodings:t}:void 0)}catch{return null}if(!n||!n.encoding)return null;const o=n.encoding.toLowerCase();return 0<=uU.indexOf(o)?null:fU(n.encoding)}var dU={ibm866:"cp866",big5:"cp950"};function xI(e){return e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function fU(e){const t=xI(e);return dU[t]||t}function pU(e){const t=xI(e),i=wU[t];return i?i.guessableName:void 0}function gU(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function mU(e){switch(e){case"shiftjis":return"shift-jis";case"utf16le":return"utf-16le";case"utf16be":return"utf-16be";case"big5hkscs":return"big5-hkscs";case"eucjp":return"euc-jp";case"euckr":return"euc-kr";case"koi8r":return"koi8-r";case"koi8u":return"koi8-u";case"macroman":return"x-mac-roman";case"utf8bom":return"utf8";default:{const t=e.match(/windows(\d+)/);return t?"windows-"+t[1]:e}}}function vU({buffer:e,bytesRead:t},i,r){let s=lU(e,t),n=!1;if(s!==eg&&s!==tg&&e){let o=!0,a=!0,c=!1;for(let l=0;l<t&&l<tU;l++){const u=l%2===1,h=e.readUInt8(l)===0;if(h&&(c=!0),o&&(u&&!h||!u&&h)&&(o=!1),a&&(u&&h||!u&&!h)&&(a=!1),h&&!o&&!a)break}c&&(o?s=tg:a?s=eg:n=!0)}return i&&!n&&!s&&e?hU(e.slice(0,t),r).then(o=>({seemsBinary:!1,encoding:o})):{seemsBinary:n,encoding:s}}var ib={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},wU=(()=>{const e={};for(const t in ib)ib[t].guessableName&&(e[t]=ib[t]);return e})(),PX=V("textFileService"),EI;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(EI||(EI={}));var SI;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(SI||(SI={}));var kI;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(kI||(kI={}));var II;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(II||(II={}));function bU(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}function ju(e,t,i){return new ul(r=>rb(r,i)).isEqual(e,t)}function yU(e,t,i){return ju(e.uri,t.uri,i)?0:io(e.uri.toString(),t.uri.toString())}function AU(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:ju(e.uri,t.uri,i)?io(e.name,t.name):io(e.uri.toString(),t.uri.toString())}function CI(e,t,i,r){const s=e.slice(0).sort((o,a)=>i(o,a,r)),n=t.slice(0).sort((o,a)=>i(o,a,r));return l2(s,n,(o,a)=>i(o,a,r))}function rb(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&1024)}var sb=class E4 extends CR{static toExtHostWorkspace(t,i,r,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],d=i;i?a.forEach((b,x)=>{const E=A.revive(b.uri),I=E4.o(r||i,E,s);I?(I.name=b.name,I.index=b.index,h.push(I)):h.push({uri:E,name:b.name,index:x})}):h.push(...a.map(({uri:b,name:x,index:E})=>({uri:A.revive(b),name:x,index:E}))),h.sort((b,x)=>b.index<x.index?-1:1);const f=new E4(n,o,h,!!l,c?A.revive(c):null,!!u,b=>rb(b,s)),{added:g,removed:v}=CI(d?d.workspaceFolders:[],f.workspaceFolders,yU,s);return{workspace:f,added:g,removed:v}}static o(t,i,r){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(ju(n.uri,i,r))return n}}constructor(t,i,r,s,n,o,a){super(t,r.map(c=>new dv(c)),s,n,a),this.t=i,this.u=o,this.q=[],this.s=wn.forUris(a,()=>!0),r.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=hd(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},nb=class{constructor(t,i,r,s,n){this.c=new $,this.onDidChangeWorkspace=this.c.event,this.g=new $,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new sl,this.D=new Map,this.h=s,this.s=r,this.t=n,this.j=new xR,this.k=new cr,this.o=t.getProxy(Y.MainThreadWorkspace),this.q=t.getProxy(Y.MainThreadMessageService);const o=i.workspace;this.l=o?new sb(o.id,o.name,[],!!o.transient,o.configuration?A.revive(o.configuration):null,!!o.isUntitled,a=>rb(a,r)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?A.from({scheme:q.untitled,path:Ar(hd(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,r,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{A.isUri(u.uri)&&!n.some(h=>ju(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||C1(u.uri)})}),this.n||[i,r].some(u=>typeof u!="number"||u<0)||r===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+r>o.length)return!1;const a=o.slice(0);a.splice(i,r,...n.map(u=>({uri:u.uri,name:u.name||C1(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((d,f)=>f!==u&&ju(h.uri,d.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=CI(o,a,AU,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,r,n).then(void 0,h=>{this.n=void 0;const d={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(SR.Error,p(2943,null,u,h.toString()),d,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let r,s="";if(typeof t=="string"?(r=A.file(t),s=t):typeof t<"u"&&(r=t,s=t.fsPath),!r)return s;const n=this.getWorkspaceFolder(r,!0);if(!n)return s;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=X5(n.uri,r);return i&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=sb.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:r,removed:s}=sb.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:r,removed:s}))}findFiles(t,i,r,s,n=Je.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:r,useExcludeSettings:a?js.FilesExclude:js.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,i={},r,s=Je.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${r.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},i,s)}async z(t,i,r){if(r.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw console.error("Invalid file pattern provided",s),new Error(`Invalid file pattern provided ${JSON.stringify(s)}`);const n=s.map(o=>{const a=$I(i.exclude),c={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===js.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==js.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=rg(Vi.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,r)}async A(t,i){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,i).then(n=>Array.isArray(n)?n.map(o=>A.revive(o)):[]))??[])).flat()}findTextInFiles2(t,i,r,s=Je.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${r.value}, entryPoint: findTextInFiles2`);const n=d=>{if(!i)return{folder:void 0,options:{}};const f=d?rg(Vi.from(d)):void 0,g=i.exclude?$I(i.exclude):void 0;return{options:{ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===js.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==js.SearchAndFilesExclude,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:i.previewOptions?{matchLines:i.previewOptions?.numMatchLines??100,charsPerLine:i.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:i.surroundingContext,includePattern:f?.pattern,excludePattern:g},folder:f?.folder}},a=(i?.include?.map(d=>n(d))??[n(void 0)]).filter(d=>!!d),c=new le,l=c.add(new $),u=this.findTextInFilesBase(t,a,(d,f)=>l.fire({result:d,uri:f}),s);return{results:new hl(async d=>{c.add(l.event(f=>{const g=f.result,v=f.uri;Gw(g)?d.emitOne(new Fs(v,g.rangeLocations.map(b=>({previewRange:new Ie(b.preview.startLineNumber,b.preview.startColumn,b.preview.endLineNumber,b.preview.endColumn),sourceRange:new Ie(b.source.startLineNumber,b.source.startColumn,b.source.endLineNumber,b.source.endColumn)})),g.previewText)):d.emitOne(new Yp(v,g.text,g.lineNumber))})),await u}),complete:u.then(d=>(c.dispose(),{limitHit:d?.limitHit??!1}))}}async findTextInFilesBase(t,i,r,s=Je.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=A.revive(a.resource);a.results.forEach(l=>{const u=Jt(l);r(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(i?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,i,r,s,n=Je.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,a=rg(Vi.from(i.include)),c=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:o,surroundingContext:i.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,d)=>{Gw(h)?r({uri:d,preview:{text:h.previewText,matches:qh(h.rangeLocations,f=>new Ie(f.preview.startLineNumber,f.preview.startColumn,f.preview.endLineNumber,f.preview.endColumn))},ranges:qh(h.rangeLocations,f=>new Ie(f.source.startLineNumber,f.source.startColumn,f.source.endLineNumber,f.source.endColumn))}):r({uri:d,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return A.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return A.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,r),re(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const r=await this.resolveWorkspaceFolder(A.revive(t));if(!r){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const s=this.w.get(r.uri.scheme);if(this.h.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(r,i);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,i,r,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(A.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,r,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,i,r){const s=await this.resolveWorkspaceFolder(A.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},i,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>r&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,r),re(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,i,r){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(A.revive(t),i,r);if(n)return n}async $provideCanonicalUri(t,i,r){return this.provideCanonicalUri(A.revive(t),{targetScheme:i},r)}async decode(t,i){const[r,s]=this.F(i),n=await this.o.$resolveDecoding(r,s),o=(await aU(FM(_.wrap(t)),{...n,acceptTextOnly:!0,overwriteEncoding:a=>a===null||a===n.preferredEncoding?Promise.resolve(n.preferredEncoding):this.o.$validateDetectedEncoding(r,a,s)})).stream;return IM(o,a=>a.join(""))}async encode(t,i){const[r,s]=this.F(i),{encoding:n,addBOM:o}=await this.o.$resolveEncoding(r,s);if(n===Kp&&!o)return _.fromString(t).buffer;const a=await cU(bU(t),n,{addBOM:o});return OM(a).buffer}F(t){const i=E1(t?.uri)?t.uri:void 0,r=typeof t?.encoding=="string"?t.encoding:void 0;return[i,r?{encoding:r}:void 0]}};nb=__decorate([__param(0,De),__param(1,At),__param(2,ka),__param(3,Ce),__param(4,Sl)],nb);var Mr=V("IExtHostWorkspace");function rg(e){let t,i;if(e)return typeof e=="string"?t=e:(t=e.pattern,i=A.revive(e.baseUri)),{pattern:t,folder:i}}function $I(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const i=rg(t);return i?{pattern:i.pattern,uri:i.folder}:void 0}})??[]).filter(t=>!!t)}var DI;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(DI||(DI={}));var PI;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(PI||(PI={}));var TI;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(TI||(TI={}));var ob;(function(e){e.DEFAULT={allowTrailingComma:!0}})(ob||(ob={}));function xU(e,t=!1){let i=0;const r=e.length;let s="",n=0,o=16,a=0;function c(v){let b=0,x=0;for(;b<v;){const E=e.charCodeAt(i);if(E>=48&&E<=57)x=x*16+E-48;else if(E>=65&&E<=70)x=x*16+E-65+10;else if(E>=97&&E<=102)x=x*16+E-97+10;else break;i++,b++}return b<v&&(x=-1),x}function l(v){i=v,s="",n=0,o=16,a=0}function u(){const v=i;if(e.charCodeAt(i)===48)i++;else for(i++;i<e.length&&xc(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===46)if(i++,i<e.length&&xc(e.charCodeAt(i)))for(i++;i<e.length&&xc(e.charCodeAt(i));)i++;else return a=3,e.substring(v,i);let b=i;if(i<e.length&&(e.charCodeAt(i)===69||e.charCodeAt(i)===101))if(i++,(i<e.length&&e.charCodeAt(i)===43||e.charCodeAt(i)===45)&&i++,i<e.length&&xc(e.charCodeAt(i))){for(i++;i<e.length&&xc(e.charCodeAt(i));)i++;b=i}else a=3;return e.substring(v,b)}function h(){let v="",b=i;for(;;){if(i>=r){v+=e.substring(b,i),a=2;break}const x=e.charCodeAt(i);if(x===34){v+=e.substring(b,i),i++;break}if(x===92){if(v+=e.substring(b,i),i++,i>=r){a=2;break}switch(e.charCodeAt(i++)){case 34:v+='"';break;case 92:v+="\\";break;case 47:v+="/";break;case 98:v+="\b";break;case 102:v+="\f";break;case 110:v+=`
`;break;case 114:v+="\r";break;case 116:v+="	";break;case 117:{const I=c(4);I>=0?v+=String.fromCharCode(I):a=4;break}default:a=5}b=i;continue}if(x>=0&&x<=31)if(sg(x)){v+=e.substring(b,i),a=2;break}else a=6;i++}return v}function d(){if(s="",a=0,n=i,i>=r)return n=r,o=17;let v=e.charCodeAt(i);if(ab(v)){do i++,s+=String.fromCharCode(v),v=e.charCodeAt(i);while(ab(v));return o=15}if(sg(v))return i++,s+=String.fromCharCode(v),v===13&&e.charCodeAt(i)===10&&(i++,s+=`
`),o=14;switch(v){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,s=h(),o=10;case 47:{const b=i-1;if(e.charCodeAt(i+1)===47){for(i+=2;i<r&&!sg(e.charCodeAt(i));)i++;return s=e.substring(b,i),o=12}if(e.charCodeAt(i+1)===42){i+=2;const x=r-1;let E=!1;for(;i<x;){if(e.charCodeAt(i)===42&&e.charCodeAt(i+1)===47){i+=2,E=!0;break}i++}return E||(i++,a=1),s=e.substring(b,i),o=13}return s+=String.fromCharCode(v),i++,o=16}case 45:if(s+=String.fromCharCode(v),i++,i===r||!xc(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;i<r&&f(v);)i++,v=e.charCodeAt(i);if(n!==i){switch(s=e.substring(n,i),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(v),i++,o=16}}function f(v){if(ab(v)||sg(v))return!1;switch(v){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function g(){let v;do v=d();while(v>=12&&v<=15);return v}return{setPosition:l,getPosition:()=>i,scan:t?g:d,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>i-n,getTokenError:()=>a}}function ab(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function sg(e){return e===10||e===13||e===8232||e===8233}function xc(e){return e>=48&&e<=57}var MI;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(MI||(MI={}));function EU(e,t,i=ob.DEFAULT){const r=xU(e,!1);function s(F){return F?()=>F(r.getTokenOffset(),r.getTokenLength()):()=>!0}function n(F){return F?J=>F(J,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),d=n(t.onSeparator),f=s(t.onComment),g=n(t.onError),v=i&&i.disallowComments,b=i&&i.allowTrailingComma;function x(){for(;;){const F=r.scan();switch(r.getTokenError()){case 4:E(14);break;case 5:E(15);break;case 3:E(13);break;case 1:v||E(11);break;case 2:E(12);break;case 6:E(16);break}switch(F){case 12:case 13:v?E(10):f();break;case 16:E(1);break;case 15:case 14:break;default:return F}}}function E(F,J=[],he=[]){if(g(F),J.length+he.length>0){let se=r.getToken();for(;se!==17;){if(J.indexOf(se)!==-1){x();break}else if(he.indexOf(se)!==-1)break;se=x()}}}function I(F){const J=r.getTokenValue();return F?h(J):a(J),x(),!0}function U(){switch(r.getToken()){case 11:{let F=0;try{F=JSON.parse(r.getTokenValue()),typeof F!="number"&&(E(2),F=0)}catch{E(2)}h(F);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return x(),!0}function j(){return r.getToken()!==10?(E(3,[],[2,5]),!1):(I(!1),r.getToken()===6?(d(":"),x(),B()||E(4,[],[2,5])):E(5,[],[2,5]),!0)}function ee(){o(),x();let F=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(F||E(4,[],[]),d(","),x(),r.getToken()===2&&b)break}else F&&E(6,[],[]);j()||E(4,[],[2,5]),F=!0}return c(),r.getToken()!==2?E(7,[2],[]):x(),!0}function O(){l(),x();let F=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(F||E(4,[],[]),d(","),x(),r.getToken()===4&&b)break}else F&&E(6,[],[]);B()||E(4,[],[4,5]),F=!0}return u(),r.getToken()!==4?E(8,[4],[]):x(),!0}function B(){switch(r.getToken()){case 3:return O();case 1:return ee();case 10:return I(!0);default:return U()}}return x(),r.getToken()===17?i.allowEmptyContent?!0:(E(4,[],[]),!1):B()?(r.getToken()!==17&&E(9,[],[]),!0):(E(4,[],[]),!1)}function Uu(e){return Object.isFrozen(e)?e:W1(e)}var Ec=class aa{static createEmptyModel(t){return new aa({},[],[],void 0,t)}constructor(t,i,r,s,n){this.b=t,this.c=i,this.d=r,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw){const t=(Array.isArray(this.raw)?this.raw:[this.raw]).map(i=>{if(i instanceof aa)return i;const r=new SU("",this.f);return r.parseRaw(i),r.configurationModel});this.g=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?nf(this.contents,t):this.contents}inspect(t,i){const r=this;return{get value(){return Uu(r.rawConfiguration.getValue(t))},get override(){return i?Uu(r.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return Uu(i?r.rawConfiguration.override(i).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of r.rawConfiguration.overrides){const c=new aa(n,a,[],void 0,r.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?Uu(s):void 0}}}getOverrideValue(t,i){const r=this.j(i);return r?t?nf(r,t):r:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const r of this.overrides)r.identifiers.includes(t)&&i.push(...r.keys);return ha(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return ha(t)}override(t){let i=this.a.get(t);return i||(i=this.h(t),this.a.set(t,i)),i}merge(...t){const i=Xe(this.contents),r=Xe(this.overrides),s=[...this.keys],n=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of t)if(n.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.i(i,o.contents);for(const a of o.overrides){const[c]=r.filter(l=>Ri(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=ha(c.keys)):r.push(Xe(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new aa(i,s,r,!n.length||n.every(o=>o instanceof aa)?void 0:n,this.f)}h(t){const i=this.j(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const r={};for(const s of ha([...Object.keys(this.contents),...Object.keys(i)])){let n=this.contents[s];const o=i[s];o&&(typeof n=="object"&&typeof o=="object"?(n=Xe(n),this.i(n,o)):n=o),r[s]=n}return new aa(r,this.keys,this.overrides,void 0,this.f)}i(t,i){for(const r of Object.keys(i)){if(r in t&&xt(t[r])&&xt(i[r])){this.i(t[r],i[r]);continue}t[r]=Xe(i[r])}}j(t){let i=null,r=null;const s=n=>{n&&(r?this.i(r,n):r=Xe(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?i=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(i),r}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.k(t,i,!0)}setValue(t,i){this.k(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),DF(this.contents,t),Xr.test(t)&&this.overrides.splice(this.overrides.findIndex(r=>Ri(r.identifiers,jl(t))),1))}k(t,i,r){if($6(this.contents,t,i,s=>this.f.error(s)),r=r||this.keys.indexOf(t)===-1,r&&this.keys.push(t),Xr.test(t)){const s=jl(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:qv(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Ri(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},SU=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||Ec.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!Dt(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:r,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new Ec(i,r,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},i=null,r=[];const s=[],n=[];function o(c){Array.isArray(r)?r.push(c):i!==null&&(r[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(r),r=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{r=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(r),r=c,i=null},onArrayEnd:()=>{r=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{EU(e,a),t=r[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=Yt.as(bo.Configuration).getConfigurationProperties(),r=this.j(e,i,!0,t);e=r.raw;const s=qv(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.m(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}j(e,t,i,r){let s=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(Xr.test(a)&&i){const c=this.j(e[a],t,!1,r);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a];c?.restricted&&o.push(a),this.l(a,c,r)?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t,i){if(i.exclude?.includes(e))return!1;if(i.include?.includes(e))return!0;if(i.skipRestricted&&t?.restricted||i.skipUnregistered&&!t)return!1;const r=t?typeof t.scope<"u"?t.scope:4:void 0;return r===void 0||i.scopes===void 0?!0:i.scopes.includes(r)}m(e,t){const i=[];for(const r of Object.keys(e))if(Xr.test(r)){const s={};for(const n in e[r])s[n]=e[r][n];i.push({identifiers:jl(r),keys:Object.keys(s),contents:qv(s,t)})}return i}},kU=class{constructor(e,t,i,r,s,n,o,a,c,l,u,h,d){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=r,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=d}get value(){return Uu(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},cb=class _3{constructor(t,i,r,s,n,o,a,c,l,u){this.j=t,this.l=i,this.m=r,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Gt,this.v=null}getValue(t,i,r){return this.w(t,i,r).getValue(t)}updateValue(t,i,r={}){let s;r.resource?(s=this.t.get(r.resource),s||(s=Ec.createEmptyModel(this.u),this.t.set(r.resource,s))):s=this.s,i===void 0?s.removeValue(t):s.setValue(t,i),r.resource||(this.h=null)}inspect(t,i,r){const s=this.w(t,i,r),n=this.A(i.resource,r),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new kU(t,i,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,r?this.q:void 0,n||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const r=[];if(!i){const{added:s,updated:n,removed:o}=Fn(this.j,t);i=[...s,...n,...o]}for(const s of i)for(const n of jl(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!Ei(this.j.override(n).getValue(l),t.override(n).getValue(l)))];r.push([n,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:r}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:r,removed:s}=Fn(this.l,t),n=[...i,...r,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Fn(this.applicationConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Fn(this.localUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Fn(this.remoteUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Fn(this.workspaceConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,i){const r=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=Fn(r,i),c=[...s,...n,...o];return(c.length||!r)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:s,removed:n,overrides:o}=Fn(i,void 0);return{keys:[...r,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new Ec(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,r){let s=this.x(i,r);if(i.overrideIdentifier&&(s=s.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0){s=s.merge();for(const n of this.l.keys)s.setValue(n,this.l.getValue(n))}return s}x({resource:t},i){let r=this.y();if(i&&t){const s=i.getFolder(t);s&&(r=this.z(s.uri)||r);const n=this.t.get(t);n&&(r=r.merge(n))}return r}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const r=this.y(),s=this.r.get(t);s?(i=r.merge(s),this.i.set(t,i)):i=r}return i}A(t,i){if(i&&t){const r=i.getFolder(t);if(r)return this.r.get(r.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:r,overrides:s,keys:n}=this.r.get(i);return t.push([i,{contents:r,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(r=>t.add(r))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(r=>t.add(r))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.q.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.r.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s))),[...i.values()]}static parse(t,i){const r=this.E(t.defaults,i),s=this.E(t.policy,i),n=this.E(t.application,i),o=this.E(t.userLocal,i),a=this.E(t.userRemote,i),c=this.E(t.workspace,i),l=t.folders.reduce((u,h)=>(u.set(A.revive(h[0]),this.E(h[1],i)),u),new Gt);return new _3(r,s,n,o,a,c,l,Ec.createEmptyModel(i),new Gt,i)}static E(t,i){return new Ec(t.contents,t.keys,t.overrides,t.raw,i)}},IU=class{constructor(e,t,i,r,s){this.change=e,this.f=t,this.g=i,this.h=r,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=cb.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,r=this.d.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!Ei(o,a)}return!0}};function Fn(e,t){const{added:i,removed:r,updated:s}=NI(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=NI({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:r,updated:s,overrides:n}}function NI(e,t){const i=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],r=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=nf(t.contents,n),a=nf(e.contents,n);Ei(o,a)||s.push(n)}}return{added:i,removed:r,updated:s}}function ng(e,t){if(t){const i=t.split(".");let r=e;for(let s=0;r&&s<i.length;s++)r=r[i[s]];return r}}function CU(e){return e instanceof A}function $U(e){return e&&e.uri instanceof A&&e.languageId&&typeof e.languageId=="string"}function DU(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function PU(e){return e&&e.uri instanceof A&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function LI(e){if(CU(e))return{resource:e};if($U(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(DU(e))return{overrideIdentifier:e.languageId};if(PU(e))return{resource:e.uri};if(e===null)return{resource:null}}var lb=class{constructor(t,i,r){this.a=t.getProxy(Y.MainThreadConfiguration),this.c=i,this.b=r,this.d=new cr,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new TU(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(r=>r.$acceptConfigurationChanged(t,i))}};lb=__decorate([__param(0,De),__param(1,Mr),__param(2,Ce)],lb);var TU=class{constructor(e,t,i,r){this.a=new $,this.b=e,this.f=r,this.c=t,this.e=cb.parse(i,r),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=cb.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const r=LI(t)||{},s=this.g(this.e.getValue(e,r,this.c.workspace));e&&this.h(e,r,i?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case Ga.Global:return 2;case Ga.Workspace:return 5;case Ga.WorkspaceFolder:return 6}}const o={has(a){return typeof ng(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,r,i?.identifier);let l=ng(s,a);if(typeof l>"u")l=c;else{let u;const h=(d,f)=>{if(xt(d)){let g;const v=()=>{u=u||Xe(s),g=g||ng(u,f)};return new Proxy(d,{get:(b,x)=>{if(typeof x=="string"&&x.toLowerCase()==="tojson")return v(),()=>g;if(u)return g=g||ng(u,f),g[x];const E=b[x];return typeof x=="string"?h(E,`${f}.${x}`):E},set:(b,x,E)=>(v(),g&&(g[x]=E),!0),deleteProperty:(b,x)=>(v(),g&&delete g[x],!0),defineProperty:(b,x,E)=>(v(),g&&Object.defineProperty(g,x,E),!0)})}return Array.isArray(d)?Xe(d):d};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,r,u):this.b.$removeConfigurationOption(h,a,r,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,r,this.c.workspace);if(c)return{key:a,defaultValue:Xe(c.policy?.value??c.default?.value),globalLocalValue:Xe(c.userLocal?.value),globalRemoteValue:Xe(c.userRemote?.value),globalValue:Xe(c.user?.value??c.application?.value),workspaceValue:Xe(c.workspace?.value),workspaceFolderValue:Xe(c.workspaceFolder?.value),defaultLanguageValue:Xe(c.default?.override),globalLocalLanguageValue:Xe(c.userLocal?.override),globalRemoteLanguageValue:Xe(c.userRemote?.override),globalLanguageValue:Xe(c.user?.override??c.application?.override),workspaceLanguageValue:Xe(c.workspace?.override),workspaceFolderLanguageValue:Xe(c.workspaceFolder?.override),languageIds:Xe(c.overrideIdentifiers)}}};return typeof s=="object"&&xs(o,s,!1),Object.freeze(o)}g(e){const t=i=>xt(i)?new Proxy(i,{get:(r,s)=>t(r[s]),set:(r,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(r,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(r,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const r=Xr.test(e)?5:this.d.get(e),s=i?`[${i.value}] `:"";if(r===5){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(r===4){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new IU(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(r,s)=>i.affectsConfiguration(r,LI(s))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},hr=V("IExtHostConfiguration"),MU=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},Bu=class V3 extends te{static isHostExtension(t,i,r){if(i.getExtensionDescription(t))return!1;const s=r.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,i){super(),this.n=t,this.c=this.B(new $),this.onDidChange=this.c.event,this.f=0,this.g=i,this.r()}r(){this.g.sort(LU),this.h=new ks,this.j=[],this.m=new Map;for(const t of this.g){if(this.h.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.h.set(t.identifier,t),this.j.push(t);const i=this.n.readActivationEvents(t);for(const r of i)this.m.has(r)||this.m.set(r,[]),this.m.get(r).push(t)}}set(t){return this.g=t,this.r(),this.f++,this.c.fire(void 0),{versionId:this.f}}deltaExtensions(t,i){this.g=OI(this.g,i),this.g=this.g.concat(t);const r=V3.s(this.g);return this.g=OI(this.g,r.map(s=>s.identifier)),this.r(),this.f++,this.c.fire(void 0),new MU(this.f,r)}static s(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},r=new ks;for(const a of t)if(r.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(Ve.toKey(a.identifier),Ve.toKey(c));const s=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>s.add(a));const n=i.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];i.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>r.get(a))}containsActivationEvent(t){return this.m.has(t)}containsExtension(t){return this.h.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.m.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.j.slice(0)}getSnapshot(){return new NU(this.f,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.h.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.j)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},NU=class{constructor(e,t){this.versionId=e,this.extensions=t}},RI;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(RI||(RI={}));function LU(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,r=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==r)return i-r;const s=Ue.basename(e.extensionLocation.path),n=Ue.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function OI(e,t){const i=new lo(t);return e.filter(r=>!i.has(r.identifier))}var og=class q3{static{this.NONE=new q3(!1,-1,-1,-1)}constructor(t,i,r,s){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=r,this.activateResolvedTime=s}},ub=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new og(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},ag=class{constructor(e,t,i,r,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=s,this.disposable=n}},RU=class extends ag{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,te.None)}},OU=class extends ag{constructor(){super(!1,null,og.NONE,{activate:void 0,deactivate:void 0},void 0,te.None)}},cg=class extends ag{constructor(e){super(!0,e,og.NONE,{activate:void 0,deactivate:void 0},void 0,te.None)}},hb=class{constructor(t,i,r,s){this.g=s,this.a=t,this.b=i,this.c=r,this.d=new ks,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,r]of this.d)t.push(r.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const r=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(r.map(s=>({id:s.identifier,reason:{startup:i,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const r=this.a.getExtensionDescription(t);if(!r)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:r.identifier,reason:i}])}async h(t){const i=t.filter(r=>!this.isActivated(r.id)).map(r=>this.j(r));await Promise.all(i.map(r=>r.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new cg(n));return this.c.onExtensionActivationError(t.id,n,new G6(t.id.value)),o}const r=[],s=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){r.push(o);continue}if(this.l(n)){r.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;r.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,i.displayName,[],new cg(l));return this.c.onExtensionActivationError(i.identifier,l,new G6(n)),u}return this.k(t,i.displayName,r,null)}k(t,i,r,s){const n=new db(t.id,i,t.reason,r,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return Bu.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};hb=__decorate([__param(3,Ce)],hb);var db=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new cr,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const r=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);r.detail=i.value.activationFailedError,this.h=new cg(r),this.j.onExtensionActivationError(this.c,r,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new cg(i),this.b&&yi(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};db=__decorate([__param(6,Ce)],db);var FI=class{constructor(e,t){this.c=t,this.b=new $,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(Y.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this.a.$initializeExtensionStorage(e,t);let s;return r&&(s=this.d(e,t,r)),s||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.d(e,t,i);r&&this.b.fire({shared:e,key:t,value:r})}d(e,t,i){try{return JSON.parse(i)}catch(r){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}},fb=V("IExtHostStorage"),jI=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(r=>(this.f=r,this)),this.g=this.c.onDidChangeStorage(r=>{r.shared===this.b&&r.key===this.a&&(this.f=r.value)}),this.i=new Vr(()=>{const r=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of r.values())s.complete()}catch(s){for(const n of r.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const r=new Xi;return this.h.set(e,r),this.i.isScheduled()||this.i.schedule(),r.p}dispose(){this.g.dispose()}},FU=class extends jI{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},as,pb=as=class{constructor(t,i){this.b=new Map,this.c=new sx,this.a=t.getProxy(Y.MainThreadFileSystem);const r=this;this.value=Object.freeze({async stat(s){try{let n;const o=r.b.get(s.scheme);return o?(await r.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await r.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===bn.Readonly?1:void 0}}catch(n){as.e(n)}},async readDirectory(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await r.a.$readdir(s)}catch(n){return as.e(n)}},async createDirectory(s){try{const n=r.b.get(s.scheme);return n&&!n.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(n.impl,n.extUri,s)):await r.a.$mkdir(s)}catch(n){return as.e(n)}},async readFile(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await r.a.$readFile(s)).buffer}catch(n){return as.e(n)}},async writeFile(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(o.impl,o.extUri,o.extUri.dirname(s)),await r.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await r.a.$writeFile(s,_.wrap(n))}catch(o){return as.e(o)}},async delete(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await r.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await r.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return as.e(o)}},async rename(s,n,o){try{return await r.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return as.e(a)}},async copy(s,n,o){try{return await r.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return as.e(a)}},isWritableFileSystem(s){const n=i.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,i,r){const s=[];for(;!i.isEqual(r,i.dirname(r));)try{if(((await t.stat(r)).type&zi.Directory)===0)throw Ut.FileExists(`Unable to create folder '${r.scheme===q.file?r.fsPath:r.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(Hd(n)!==pe.FileNotFound)throw n;s.push(i.basename(r)),r=i.dirname(r)}for(let n=s.length-1;n>=0;n--){r=i.joinPath(r,s[n]);try{await t.createDirectory(r)}catch(o){if(Hd(o)!==pe.FileExists)throw o}}}static e(t){if(t instanceof Ut)throw t;if(t instanceof zd)switch(t.code){case pe.FileExists:throw Ut.FileExists(t.message);case pe.FileNotFound:throw Ut.FileNotFound(t.message);case pe.FileNotADirectory:throw Ut.FileNotADirectory(t.message);case pe.FileIsADirectory:throw Ut.FileIsADirectory(t.message);case pe.NoPermissions:throw Ut.NoPermissions(t.message);case pe.Unavailable:throw Ut.Unavailable(t.message);default:throw new Ut(t.message,t.name)}if(!(t instanceof Error))throw new Ut(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Ut.Unavailable(t.message);switch(t.name){case pe.FileExists:throw Ut.FileExists(t.message);case pe.FileNotFound:throw Ut.FileNotFound(t.message);case pe.FileNotADirectory:throw Ut.FileNotADirectory(t.message);case pe.FileIsADirectory:throw Ut.FileIsADirectory(t.message);case pe.NoPermissions:throw Ut.NoPermissions(t.message);case pe.Unavailable:throw Ut.Unavailable(t.message);default:throw new Ut(t.message,t.name)}}addFileSystemProvider(t,i,r){return this.b.set(t,{impl:i,extUri:r?.isCaseSensitive?qe:aM,isReadonly:!!r?.isReadonly}),re(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??qe}};pb=as=__decorate([__param(0,De),__param(1,ka)],pb);var zu=V("IExtHostConsumerFileSystem"),gb=V("IExtensionStoragePaths"),mb=class{constructor(t,i,r){this.d=i,this.f=r,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return A.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(A.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:A.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(r){this.d.error("[ExtHostStorage]",r);return}}workspaceValue(t){if(this.c)return A.joinPath(this.c,t.identifier.value)}globalValue(t){return A.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};mb=__decorate([__param(0,At),__param(1,Ce),__param(2,zu)],mb);var jU=V("tunnelService"),FX=V("sharedTunnelsService"),dr;(function(e){e.Http="http",e.Https="https"})(dr||(dr={}));var cs;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(cs||(cs={}));function UU(e){return!!e.forwardPort}var jn;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(jn||(jn={}));function BU(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var Hu=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function qo(e){return Hu.indexOf(e)>=0}var lg=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Us(e){return lg.indexOf(e)>=0}function zU(e,t,i,r){if(i===1)return!1;if(i===2&&Us(t)){const s=/(\d+)\.(\d+)\.(\d+)/g.exec(r);if(s?.length===4&&parseInt(s[1])>=18)return!1}return e<1024}var HU=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new $,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},vb=class extends te{constructor(t,i){super(),this.r=t,this.s=i,this.a=new $,this.onTunnelOpened=this.a.event,this.b=new $,this.onTunnelClosed=this.b.event,this.c=new $,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],i=Array.from(this.f.values());for(const r of i){const s=Array.from(r.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(r=>typeof r!="string"?r?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,r,s,n){this.z(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:r,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(Us(t)||qo(t))&&(t=Hu[0]);const r=this.D(t,i);if(r)return++r.refcount,r.value}openTunnel(t,i,r,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${r} on local port ${n}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),s||(s=this.t),this.g&&this.n.has(r)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,r,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(i,r),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(i,r);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const d=this.w(h);return(h.tunnelRemoteHost!==i||h.tunnelRemotePort!==r)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(d),d}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const r=i.get(t.tunnelRemotePort);r&&(r.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,r))}}}}async y(t,i,r){if(r.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const s=r.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),s}}async closeTunnel(t,i){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const r=this.f.get(t);if(r&&r.has(i)){const s=r.get(i);s.refcount=0,await this.y(t,i,s)}}z(t,i,r){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:r})}async C(t,i){const r=this.f.get(t);if(r){const s=r.get(i),n=s?await s.value:void 0;(!n||typeof n=="string")&&r.delete(i),r.size===0&&this.f.delete(t)}}D(t,i){const r=[t];qo(t)?(r.push(...Hu),r.push(...lg)):Us(t)&&r.push(...lg);const s=r.map(n=>this.f.get(n));for(const n of s){const o=n?.get(i);if(o)return o}}canTunnel(t){return!!BU(t)}G(t,i,r,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${r} on local port ${s}.`);const c=r;this.n.add(c);const l=s===void 0?r:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:i,port:r},localAddressPort:s,privacy:o,public:o?o!==cs.Private:void 0,protocol:a},d=t.forwardPort(h,u);return d?(this.z(i,r,d),d.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),d}};vb=__decorate([__param(0,Ce),__param(1,Ds)],vb);var WU=class extends HU{},wb;(function(e){function t(r){return{remoteAddress:r.remoteAddress,localAddress:r.localAddress,public:!!r.public,privacy:r.privacy??(r.public?cs.Public:cs.Private),protocol:r.protocol}}e.fromApiTunnel=t;function i(r){return{remoteAddress:{host:r.tunnelRemoteHost,port:r.tunnelRemotePort},localAddress:r.localAddress,public:r.privacy!==cs.ConstantPrivate&&r.privacy!==cs.ConstantPrivate,privacy:r.privacy,protocol:r.protocol}}e.fromServiceTunnel=i})(wb||(wb={}));var ug=V("IExtHostTunnelService"),hg=class extends te{constructor(t,i,r){super(),this.s=r,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new $,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(Y.MainThreadTunnelService)}async openTunnel(t,i){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const r=await this.a.$openTunnel(i,t.displayName);if(r){const s=new WU(r.remoteAddress,r.localAddress,()=>this.a.$closeTunnel(r.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const r=this.u();return this.r.set(r,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,r),new Me(()=>{this.r.delete(r),this.a.$unregisterPortsAttributesProvider(r)})}async $providePortAttributes(t,i,r,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:r,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,r,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,Je.None)??void 0;const r=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(r,!0),Promise.resolve(re(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const r=t.tunnelFactory??(i?this.w(i):void 0);if(r){this.b=r;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:p(2941,null),themeIcon:"lock"},{id:"public",label:p(2942,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return re(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const r=this.g.get(t.host);r.has(t.port)&&(i&&r.get(t.port).disposeListener.dispose(),await r.get(t.port).tunnel.dispose(),r.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const r=this.b(t,i);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),r!==void 0){const s=await r;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),wb.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(r){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),r instanceof Error)return r.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),r=t.filter((s,n)=>i[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${r.map(s=>s.port).join(", ")}`),r}};hg=__decorate([__param(0,De),__param(1,At),__param(2,Ce)],hg);function _U(e){return[...e.entries()]}function VU(e){return e?[...e.entries()]:[]}var qU=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const r=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),r.dispose()}},this.a.set(e,o)});return r}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},Go=(e,t,i,r)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!i(s,n)){const o=s;s=n,e.listener?.(r(n,o))}}}},Sc=(e,t)=>e===t,Un={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:Sc,description:Sc,sortText:Sc,busy:Sc,error:Sc,canResolveChildren:Sc,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(r=>i.id===r.id)))},kc=e=>t=>({op:4,update:e(t)}),GU=(e,t)=>({range:(()=>{let i;const r=kc(s=>({range:Ye.lift(R.from(s))}));return{enumerable:!0,configurable:!1,get(){return i},set(s){e.listener?.({op:6}),Un.range(i,s)||(i=s,e.listener?.(r(s)))}}})(),label:Go(e,t,Un.label,kc(i=>({label:i}))),description:Go(e,void 0,Un.description,kc(i=>({description:i}))),sortText:Go(e,void 0,Un.sortText,kc(i=>({sortText:i}))),canResolveChildren:Go(e,!1,Un.canResolveChildren,i=>({op:2,state:i})),busy:Go(e,!1,Un.busy,kc(i=>({busy:i}))),error:Go(e,void 0,Un.error,kc(i=>({error:xe.fromStrict(i)||null}))),tags:Go(e,[],Un.tags,(i,r)=>({op:1,new:i.map(Tr.from),old:r.map(Tr.from)}))}),ZU=e=>{const t=Be.fromString(e.extId),i=new Wu(t.controllerId,t.localId,e.label,A.revive(e.uri)||void 0);return i.range=R.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(r=>Tr.to({id:f6(r).tagId})),i},UI=e=>{let t;for(const i of e.tests){const r=ZU(i.item);mf(r).parent=t,t=r}return t},Wu=class G3{constructor(t,i,r,s){if(i.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const n=sj(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof bb?void 0:n.parent}},children:{value:rj(n,mf,G3),enumerable:!0,writable:!1},...GU(n,r)})}},bb=class extends Wu{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},JU=class extends ej{constructor(e,t,i){super({controllerId:e,getDocumentVersion:r=>r&&i.getDocument(r)?.version,getApiFor:mf,getChildren:r=>r.children,root:new bb(e,t),toITestItem:Rn.from})}},_u;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(_u||(_u={}));var BI;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(BI||(BI={}));var zI;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(zI||(zI={}));function HI(e){const t=_.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function YU(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var WI;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(WI||(WI={}));var yb=class extends te{constructor(t,i,r){super(),this.n=i,this.a=this.B(new $),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new $),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.h=!1,this.m=new Map,this.h=this.n.environment.isExtensionTelemetryLoggingOnly;const s=i.remote.isRemote?"remoteExtHostTelemetry":t?"workerExtHostTelemetry":"extHostTelemetry";this.j=this.B(r.createLogger(s,{name:p(2938,null,this.h?" (Not Sent)":""),hidden:!0,group:zF}))}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,i,r){const s=this.getTelemetryDetails(),n=new _I(i,r,t,this.j,this.h,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.m.get(t.identifier.value)??[];return this.m.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,i,r){this.f=t,this.c=r??{usage:!0,error:!0}}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.n.telemetryInfo.machineId,i["common.vscodesessionid"]=this.n.telemetryInfo.sessionId,i["common.vscodecommithash"]=this.n.commit,i["common.sqmid"]=this.n.telemetryInfo.sqmId,i["common.devDeviceId"]=this.n.telemetryInfo.devDeviceId,i["common.vscodeversion"]=this.n.version,i["common.vscodereleasedate"]=this.n.date,i["common.isnewappinstall"]=VI(this.n.telemetryInfo.firstSessionDate),i["common.product"]=this.n.environment.appHost,this.n.uiKind){case _u.Web:i["common.uikind"]="web";break;case _u.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=J1(WF(this.n.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.g=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.m.forEach((r,s)=>{const n=r.filter(o=>!o.isDisposed);n.length===0?this.m.delete(s):this.m.set(s,n)}),this.m.forEach(r=>{for(const s of r)s.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.g!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails())}onExtensionError(t,i){const s=this.m.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.m.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(i),n=!0);return n}};yb=__decorate([__param(1,At),__param(2,vn)],yb);var _I=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,s,n,o){this.g=i,this.h=r,this.i=s,this.j=n,this.a=new $,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=q6(t,[]),this.c&&(t=xs(t,this.c)),this.b||(t=xs(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},r=q6(i,[]),s=new Error(r.message,{cause:r.cause});s.stack=r.stack,s.name=r.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function VI(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var dg=V("IExtHostTelemetry"),Ab=class{#e;#t;#i;constructor(t,i,r){this.b=new Map,this.c=new Map,this.#e=t.getProxy(Y.MainThreadCommands),this.d=i,this.#i=r,this.#t=t.getProxy(Y.MainThreadTelemetry),this.converter=new QU(this,s=>{const n=this.c.get(s);return n?.result===ve.Void?n:void 0},i),this.f=[{processArgument(s){return Jt(s)}},{processArgument(s){return Aa(s,function(n){if(Ye.isIRange(n))return R.to(n);if(er.isIPosition(n))return Ge.to(n);if(Ye.isIRange(n.range)&&A.isUri(n.uri))return Di.to(n);if(n instanceof _)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...r)=>{const s=t.args.map((o,a)=>{if(!o.validate(r[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof r[a]=="object"?JSON.stringify(r[a],null,"	"):r[a]} `);return o.convert(r[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,r,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Me(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,r,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:r,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(i),new Me(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,r){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let s=!1;const n=Aa(i,function(o){if(o instanceof Ne)return Ge.from(o);if(o instanceof Ie)return R.from(o);if(o instanceof tr)return Di.from(o);if(rs.isNotebookRange(o))return os.from(o);if(o instanceof ArrayBuffer)return s=!0,_.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,_.wrap(o);if(o instanceof _)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new vi(n):n,r);return Jt(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,r){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{e5(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=Oi.create();try{return await n.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(yi(l)||this.d.error(l,t,s.extension?.identifier),!r)throw l;if(s.extension?.identifier){const u=this.#i.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(Zr(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,i,r){t.extension&&(i.startsWith("code.copilot.logStructured")||this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new Zv(i),duration:r}))}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const r=this.b.get(t);return r?(i=i.map(s=>this.f.reduce((n,o)=>o.processArgument(n,r.extension),s)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(r=>r[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,r]of this.b){const{metadata:s}=r;s&&(t[i]=s)}return Promise.resolve(t)}};Ab=__decorate([__param(0,De),__param(1,Ce),__param(2,dg)],Ab);var Nr=V("IExtHostCommands"),QU=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${kt()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this.f(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(el(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(re(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),i.$ident=s,i.id=this.delegatingCommandId,i.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},z=class Gi{static{this.Uri=new Gi("uri","Uri of a text document",t=>A.isUri(t),t=>t)}static{this.Position=new Gi("position","A position in a text document",t=>Ne.isPosition(t),Ge.from)}static{this.Range=new Gi("range","A range in a text document",t=>Ie.isRange(t),R.from)}static{this.Selection=new Gi("selection","A selection in a text document",t=>ts.isSelection(t),Pr.from)}static{this.Number=new Gi("number","",t=>typeof t=="number",t=>t)}static{this.String=new Gi("string","",t=>typeof t=="string",t=>t)}static Arr(t){return new Gi(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(r=>t.validate(r)),i=>i.map(r=>t.convert(r)))}static{this.CallHierarchyItem=new Gi("item","A call hierarchy item",t=>t instanceof o0,Uo.from)}static{this.TypeHierarchyItem=new Gi("item","A type hierarchy item",t=>t instanceof H0,zo.from)}static{this.TestItem=new Gi("testItem","A VS Code TestItem",t=>t instanceof Wu,Rn.from)}static{this.TestProfile=new Gi("testProfile","A VS Code test profile",t=>t instanceof m9,Pw.from)}constructor(t,i,r,s){this.name=t,this.description=i,this.validate=r,this.convert=s}optional(){return new Gi(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new Gi(t??this.name,i??this.description,this.validate,this.convert)}},ve=class Z3{static{this.Void=new Z3("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},be=class{constructor(e,t,i,r,s){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=s}},Bs=V("IExtHostTerminalService"),xb=class extends te{constructor(e,t,i,r){super(),this.u=e,this._id=t,this.w=i,this.y=r,this.a=!1,this.m={isInteractedWith:!1,shell:void 0},this.isOpen=!1,this.s=this.B(new $),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:GI(e.iconPath)??void 0,color:Ia.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,r,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:r,color:Ia.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,i),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Bt.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){return this.m.shell!==e?(this.m={...this.m,shell:e},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},Eb=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new $,this.onProcessData=this.a.event,this.b=new $,this.d=new $,this.onDidChangeProperty=this.d.event,this.f=new $,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}sendSignal(e){}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},XU=1,fg=class extends te{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,r){super(),this.R=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new Hr),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new $,this.onDidCloseTerminal=this.I.event,this.J=new $,this.onDidOpenTerminal=this.J.event,this.L=new $,this.onDidChangeActiveTerminal=this.L.event,this.M=new $,this.onDidChangeTerminalDimensions=this.M.event,this.N=new $,this.onDidChangeTerminalState=this.N.event,this.O=new $,this.onDidChangeShell=this.O.event,this.P=new $({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new $({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=r.getProxy(Y.MainThreadTerminalService),this.y=new qU(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,i){const r=new xb(this.a,kt(),t,t.name),s=new Eb(t.pty);return r.createExtensionTerminal(t.location,i,this.S(t,i).resolvedExtHostIdentifier,GI(t.iconPath),eB(t.color)).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(r),r.value}S(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const r=t.location.parentTerminal;if(r){const s=this.f.find(n=>n.value===r);s&&(i.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&"splitActiveTerminal"in i.location&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new Eb(i),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.L.fire(this.b);return}const r=this.getTerminalById(t);r&&(this.b=r,i!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const r=this.getTerminalById(t);r&&this.P.fire({terminal:r.value,data:i})}async $acceptTerminalDimensions(t,i,r){const s=this.getTerminalById(t);s&&s.setDimensions(i,r)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,i){const r=this.getTerminalById(t);r&&this.Q.fire({terminal:r.value,...i})}async $acceptTerminalMaximumDimensions(t,i,r){this.g.get(t)?.resize(i,r)}async $acceptTerminalTitleChange(t,i){const r=this.getTerminalById(t);r&&(r.name=i)}async $acceptTerminalClosed(t,i,r){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(i,r),this.I.fire(n.value)}}$acceptTerminalOpened(t,i,r,s){if(i){const a=this.Y(this.f,i);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:A.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new xb(this.a,t,n,r);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const r=this.getTerminalById(t);if(!r)return{message:p(2939,null,t)};r.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===r.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(i):this.j[t]={initialDimensions:i}}U(t,i){const r=new le;r.add(i.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),r.add(i.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,i.onProcessData),r.add(i.onProcessExit(n=>this.W(t,n))),this.g.set(t,i);const s=this.j[t];return s&&i instanceof Eb&&(i.startSendingEvents(s.initialDimensions),delete this.j[t]),r}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.N.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,r){try{this.g.get(t)?.resize(i,r)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:"cwd",value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,i,r){if(this.D.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.D.set(i,r),this.a.$registerProfileProvider(i,t.identifier.value),new Me(()=>{this.D.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalCompletionProvider(t,i,...r){if(this.C.has(i.id))throw new Error(`Terminal completion provider "${i.id}" already registered`);return this.C.set(i.id,i),this.a.$registerCompletionProvider(i.id,t.identifier.value,...r),new Me(()=>{this.C.delete(i.id),this.a.$unregisterCompletionProvider(i.id)})}async $provideTerminalCompletions(t,i){const r=new tt().token;if(r.isCancellationRequested||!this.activeTerminal)return;const s=this.C.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,i,r);if(n==null)return;const o=!je||this.activeTerminal.state?.shell==="gitbash"?"/":"\\";return Uw.from(n,o)}$acceptTerminalShellType(t,i){const r=this.getTerminalById(t);r?.setShellType(i)&&this.N.fire(r.value)}registerTerminalQuickFixProvider(t,i,r){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,r),this.a.$registerQuickFixProvider(t,i),new Me(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const r=new tt().token;if(r.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(i,r);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new le;if(this.w.value=o,!Array.isArray(n))return n?qp.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=qp.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const r=new tt().token;let s=await this.D.get(t)?.provideTerminalProfile(r);if(!r.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,i);return}this.createTerminalFromOptions(s.options,i)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Me(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,i){const r=this.getTerminalById(t);if(!r)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new tt;this.H.set(t,n);const o=[],a={terminal:r.value,line:i},c=[];for(const h of this.z)c.push(fn.withAsyncBody(async d=>{n.token.onCancellationRequested(()=>d({provider:h,links:[]}));const f=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||d({provider:h,links:f})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(d=>{const f={id:XU++,startIndex:d.startIndex,length:d.length,label:d.tooltip};return u.set(f.id,{provider:h.provider,link:d}),f}));return this.G.set(t,u),o}$activateLink(t,i){const r=this.G.get(t)?.get(i);r&&r.provider.handleTerminalLink(r.link)}W(t,i){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const r=this.h[t];r&&(r.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(r=>r.value===t);return i>=0?i:null}X(t,i){const r=this.Y(t,i);return r!==null?t[r]:null}Y(t,i){const r=t.findIndex(s=>s._id===i);return r>=0?r:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.B(new qI),this.$(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Z(t,i){const r=_U(i.map),s=VU(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,r.length===0?void 0:r,s)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const r=i[0],s=this.B(new qI(i[1]));this.$(r,s)})}$acceptDefaultProfile(t,i){const r=this.s;this.s=t,this.u=i,r?.path!==t.path&&this.O.fire(t.path)}$(t,i){this.n.set(t,i),this.B(i.onDidChangeCollection(()=>{this.Z(t,i)}))}};fg=__decorate([__param(1,Nr),__param(2,De)],fg);var qI=class extends te{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new $,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new KU(this,e),this.a.set(t,i),this.B(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,r){this.g(e,{value:t,type:Ra.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this.g(e,{value:t,type:Ra.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this.g(e,{value:t,type:Ra.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),r=this.map.get(i),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==s.applyAtProcessCreation||r.options?.applyAtShellIntegration!==s.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const i=this.h(e,t),r=this.map.get(i);return r?ZI(r):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.j(r.scope)===this.j(e)&&t.set(r.variable,ZI(r));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(i,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},KU=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new $}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,r)=>e.call(t,r,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},Sb=class extends fg{constructor(t,i){super(!1,t,i)}createTerminal(t,i,r){throw new r1}createTerminalFromOptions(t,i){throw new r1}};Sb=__decorate([__param(0,Nr),__param(1,De)],Sb);function GI(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function eB(e){return Ia.isThemeColor(e)?e:void 0}function ZI(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var tB=V("progressService"),JI;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(JI||(JI={}));var VX=Object.freeze({total(){},worked(){},done(){}}),pg=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},YI=class extends te{constructor(t,i){super(),this.a=new Xi,i.withProgress(t,r=>(this.b=r,this.c&&r.report(this.c),this.a.p)),this.B(re(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};YI=__decorate([__param(1,tB)],YI);var GX=V("editorProgressService"),QI="__",ZX=V("IAuthenticationService"),JX=V("IAuthenticationExtensionsService"),XI="/.well-known",kb=`${XI}/oauth-protected-resource`,iB=`${XI}/oauth-authorization-server`,rB=" ",KI;(function(e){e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedGrantType="unsupported_grant_type",e.InvalidScope="invalid_scope"})(KI||(KI={}));var eC;(function(e){e.AuthorizationPending="authorization_pending",e.SlowDown="slow_down",e.AccessDenied="access_denied",e.ExpiredToken="expired_token"})(eC||(eC={}));var tC;(function(e){e.InvalidRedirectUri="invalid_redirect_uri",e.InvalidClientMetadata="invalid_client_metadata",e.InvalidSoftwareStatement="invalid_software_statement",e.UnapprovedSoftwareStatement="unapproved_software_statement"})(tC||(tC={}));function sB(e){return typeof e!="object"||e===null?!1:e.resource!==void 0}function nB(e){return typeof e!="object"||e===null?!1:e.issuer!==void 0}function oB(e){return typeof e!="object"||e===null?!1:e.client_id!==void 0}function Ib(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.access_token!==void 0&&t.token_type!==void 0}function aB(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.device_code!==void 0&&t.user_code!==void 0&&t.verification_uri!==void 0&&t.expires_in!==void 0}function iC(e){return typeof e!="object"||e===null?!1:e.error!==void 0}function cB(e){return typeof e!="object"||e===null?!1:e.error!==void 0}function lB(e){return{issuer:e.toString(),authorization_endpoint:new URL("/authorize",e).toString(),token_endpoint:new URL("/token",e).toString(),registration_endpoint:new URL("/register",e).toString(),response_types_supported:["code","id_token","id_token token"]}}function uB(e){const t=new URL(e.issuer);return{...e,authorization_endpoint:e.authorization_endpoint??new URL("/authorize",t).toString(),token_endpoint:e.token_endpoint??new URL("/token",t).toString(),registration_endpoint:e.registration_endpoint??new URL("/register",t).toString()}}var rC=["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:device_code"],Cb=33418;async function sC(e,t,i){if(!e.registration_endpoint)throw new Error("Server does not support dynamic registration");const r=await fetch(e.registration_endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_name:t,client_uri:"https://code.visualstudio.com",grant_types:e.grant_types_supported?e.grant_types_supported.filter(n=>rC.includes(n)):rC,response_types:["code"],redirect_uris:["https://insiders.vscode.dev/redirect","https://vscode.dev/redirect","http://localhost/","http://127.0.0.1/",`http://localhost:${Cb}/`,`http://127.0.0.1:${Cb}/`],scope:i?.join(rB),token_endpoint_auth_method:"none",application_type:"native"})});if(!r.ok){const n=await r.text();let o=n;try{const a=JSON.parse(n);cB(a)&&(o=`${a.error}${a.error_description?`: ${a.error_description}`:""}`)}catch{}throw new Error(`Registration to ${e.registration_endpoint} failed: ${o}`)}const s=await r.json();if(oB(s))return s;throw new Error(`Invalid authorization dynamic client registration response: ${JSON.stringify(s)}`)}function hB(e){const t=e.split(" "),i=t[0],r={};return t.length>1&&t.slice(1).join(" ").split(",").forEach(n=>{const[o,a]=n.split("=").map(c=>c.trim().replace(/"/g,""));r[o]=a}),{scheme:i,params:r}}function nC(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT token format: token must have three parts separated by dots");const[i,r,s]=t;try{if(typeof JSON.parse(wa(i).toString())!="object")throw new Error("Invalid JWT token format: header is not a JSON object");const o=JSON.parse(wa(r).toString());if(typeof o!="object")throw new Error("Invalid JWT token format: payload is not a JSON object");return o}catch(n){throw n instanceof Error?new Error(`Failed to parse JWT token: ${n.message}`):new Error("Failed to parse JWT token")}}function dB(e){const t=new URL(e);if(!t.pathname.startsWith(kb))throw new Error(`Invalid discovery URL: expected path to start with ${kb}`);const i=t.pathname.substring(kb.length),r=new URL(t.origin);return r.pathname=i||"/",r.toString()}var $b,Db=class{static{$b=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,i){this.c=new $,this.onDidChangeWindowState=this.c.event,this.f=$b.a,t.handle&&(this.d=wa(t.handle).buffer),this.b=i.getProxy(Y.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:s})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?wa(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.f[t]&&(this.f={...this.f,[t]:i},this.c.fire(this.f))}openUri(t,i){let r;if(typeof t=="string"){r=t;try{t=A.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return rd(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===q.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,r,i)}async asExternalUri(t,i){if(rd(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const r=await this.b.$asExternalUri(t,i);return A.from(r)}};Db=$b=__decorate([__param(0,At),__param(1,De)],Db);var gg=V("IExtHostWindow"),Vu=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return fB(e,this)}},oC=new Map,Pb=new WeakMap;function fB(e,t){const i=Pb.get(e);if(i)return i;const r=pB(e,t);if(r){let s=oC.get(r)??0;s++,oC.set(r,s);const n=s===1?r:`${r}#${s}`;return Pb.set(e,n),n}}function pB(e,t){const i=Pb.get(e);if(i)return i;const r=t.owner?mB(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return r+s}else return r+n;const o=t.referenceFn;if(o!==void 0&&(s=Tb(o),s!==void 0))return r+s;if(t.owner!==void 0){const a=gB(t.owner,e);if(a!==void 0)return r+a}}function gB(e,t){for(const i in e)if(e[i]===t)return i}var aC=new Map,cC=new WeakMap;function mB(e){const t=cC.get(e);if(t)return t;const i=lC(e)??"Object";let r=aC.get(i)??0;r++,aC.set(i,r);const s=r===1?i:`${i}#${r}`;return cC.set(e,s),s}function lC(e){const t=e.constructor;if(t)return t.name==="Object"?void 0:t.name}function Tb(e){const t=e.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(r?r[1]:void 0)?.trim()}var Mb=(e,t)=>e===t;function Nb(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Nb(e[i],t[i]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const i=e,r=t,s=Object.keys(i),n=Object.keys(r),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!Nb(i[a],r[a]))return!1;return!0}return!1}function uC(e){const t=new Error("BugIndicatingErrorRecovery: "+e);lt(t),console.error("recovered from an error that indicates a bug",t)}var Zo;function Lb(e){Zo?Zo instanceof hC?Zo.loggers.push(e):Zo=new hC([Zo,e]):Zo=e}function ti(){return Zo}var Rb=void 0;function vB(e){Rb=e}function wB(e){Rb&&Rb(e)}var hC=class{constructor(e){this.loggers=e}handleObservableCreated(e){for(const t of this.loggers)t.handleObservableCreated(e)}handleOnListenerCountChanged(e,t){for(const i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e){for(const t of this.loggers)t.handleAutorunCreated(e)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(const r of this.loggers)r.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(const r of this.loggers)r.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}};function dC(e,t){const i=new fC(e,t);try{e(i)}finally{i.finish()}}function bB(e,t,i){e?t(e):dC(t,i)}var fC=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],ti()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():Tb(this._fn)}updateObserver(e,t){if(!this.a){uC("Transaction already finished!"),dC(i=>{i.updateObserver(e,t)});return}this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;if(!e){uC("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.a=null,ti()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this.a}},Ob;function yB(e){Ob=e}var pC;function AB(e){pC=e}var gC;function xB(e){gC=e}var EB=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,r=t===void 0?e:t;return Ob({owner:i,debugName:()=>{const s=Tb(r);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(o)return`${this.debugName}.${o[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:r},s=>r(this.read(s),s))}flatten(){return Ob({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(pC(this,t)),this}keepObserved(e){return e.add(gC(this)),this}get b(){return this.get()}},Fb=class extends EB{constructor(){super(),this.f=new Set,ti()?.handleObservableCreated(this)}addObserver(e){const t=this.f.size;this.f.add(e),t===0&&this.g(),t!==this.f.size&&ti()?.handleOnListenerCountChanged(this,this.f.size)}removeObserver(e){const t=this.f.delete(e);t&&this.f.size===0&&this.h(),t&&ti()?.handleOnListenerCountChanged(this,this.f.size)}g(){}h(){}log(){const e=!!ti();return wB(this),e||ti()?.handleObservableCreated(this),this}debugGetObservers(){return this.f}};function SB(e,t){let i;return typeof e=="string"?i=new Vu(void 0,e,void 0):i=new Vu(e,void 0,void 0),new jb(i,t,Mb)}var jb=class extends Fb{get debugName(){return this.c.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this.c=e,this.d=i,this.a=t,ti()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this.a}set(e,t,i){if(i===void 0&&this.d(this.a,e))return;let r;t||(t=r=new fC(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.a;this.i(e),ti()?.handleObservableUpdated(this,{oldValue:s,newValue:e,change:i,didChange:!0,hadValue:!0});for(const n of this.f)t.updateObserver(n,this),n.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.a}`}i(e){this.a=e}debugGetState(){return{value:this.a}}debugSetValue(e){this.a=e}},mC;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(mC||(mC={}));var vC=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i){this._debugNameData=e,this._runFn=t,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.i=!1,this.n=void 0,this.p=void 0,this.h=this.j?.createChangeSummary(void 0),ti()?.handleAutorunCreated(this),this.k(),fa(this)}dispose(){if(!this.c){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),this.n!==void 0&&this.n.dispose(),this.p!==void 0&&this.p.dispose(),ti()?.handleAutorunDisposed(this),pa(this)}}k(){const e=this.g;this.g=this.f,this.f=e,this.a=3;try{if(!this.c){ti()?.handleAutorunStarted(this);const t=this.h,i=this.p;i!==void 0&&(this.p=void 0);try{this.i=!0,this.j&&(this.j.beforeUpdate?.(this,t),this.h=this.j.createChangeSummary(t)),this.n!==void 0&&(this.n.dispose(),this.n=void 0),this._runFn(this,t)}catch(r){Hh(r)}finally{this.i=!1,i!==void 0&&i.dispose()}}}finally{this.c||ti()?.handleAutorunFinished(this);for(const t of this.g)t.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.a===3&&(this.a=1),this.b++}endUpdate(e){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const t of this.f)if(t.reportChanges(),this.a===2)break}this.a!==3&&this.k()}while(this.a!==3)}finally{this.b--}Y4(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.l(e)&&(this.a=1)}handleChange(e,t){if(this.l(e)){ti()?.handleAutorunDependencyChanged(this,e,t);try{(this.j?this.j.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.h):!0)&&(this.a=2)}catch(i){Hh(i)}}}l(e){return this.f.has(e)&&!this.g.has(e)}m(){if(!this.i)throw new Ji("The reader object cannot be used outside its compute function!")}readObservable(e){if(this.m(),this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}get store(){if(this.m(),this.c)throw new Ji("Cannot access store after dispose");return this.n===void 0&&(this.n=new le),this.n}get delayedStore(){if(this.m(),this.c)throw new Ji("Cannot access store after dispose");return this.p===void 0&&(this.p=new le),this.p}debugGetState(){return{isRunning:this.i,updateCount:this.b,dependencies:this.f,state:this.a}}debugRerun(){this.i?this.a=2:this.k()}};function wC(e){return new vC(new Vu(void 0,void 0,e),e,void 0)}var bC;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(bC||(bC={}));var zs=class extends Fb{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r=void 0,s){super(),this._debugNameData=e,this._computeFn=t,this.w=i,this.x=r,this.y=s,this.a=0,this.c=void 0,this.i=0,this.j=new Set,this.k=new Set,this.l=void 0,this.m=!1,this.n=!1,this.p=!1,this.q=!1,this.s=!1,this.t=void 0,this.u=void 0,this.v=null,this.l=this.w?.createChangeSummary(void 0)}h(){this.a=0,this.c=void 0,ti()?.handleDerivedCleared(this);for(const e of this.j)e.removeObserver(this);this.j.clear(),this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.u!==void 0&&(this.u.dispose(),this.u=void 0),this.x?.()}get(){if(this.n,this.f.size===0){let t;try{this.s=!0;let i;this.w&&(i=this.w.createChangeSummary(void 0),this.w.beforeUpdate?.(this,i)),t=this._computeFn(this,i)}finally{this.s=!1}return this.h(),t}else{do{if(this.a===1){for(const t of this.j)if(t.reportChanges(),this.a===2)break}this.a===1&&(this.a=3),this.a!==3&&this.A()}while(this.a!==3);return this.c}}A(){let e=!1;this.n=!0,this.p=!1;const t=this.k;this.k=this.j,this.j=t;try{const i=this.l;this.s=!0,this.w&&(this.q=!0,this.w.beforeUpdate?.(this,i),this.q=!1,this.l=this.w?.createChangeSummary(i));const r=this.a!==0,s=this.c;this.a=3;const n=this.u;n!==void 0&&(this.u=void 0);try{this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.c=this._computeFn(this,i)}finally{this.s=!1;for(const o of this.k)o.removeObserver(this);this.k.clear(),n!==void 0&&n.dispose()}e=this.p||r&&!this.y(s,this.c),ti()?.handleObservableUpdated(this,{oldValue:s,newValue:this.c,change:void 0,didChange:e,hadValue:r})}catch(i){Hh(i)}if(this.n=!1,!this.p&&e)for(const i of this.f)i.handleChange(this,void 0);else this.p=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.m)throw new Ji("Cyclic deriveds are not supported yet!");this.i++,this.m=!0;try{const t=this.i===1;if(this.a===3&&(this.a=1,!t))for(const i of this.f)i.handlePossibleChange(this);if(t)for(const i of this.f)i.beginUpdate(this)}finally{this.m=!1}}endUpdate(e){if(this.i--,this.i===0){const t=[...this.f];for(const i of t)i.endUpdate(this);if(this.v){const i=[...this.v];this.v=null;for(const r of i)r.endUpdate(this)}}Y4(()=>this.i>=0)}handlePossibleChange(e){if(this.a===3&&this.j.has(e)&&!this.k.has(e)){this.a=1;for(const t of this.f)t.handlePossibleChange(this)}}handleChange(e,t){if(this.j.has(e)&&!this.k.has(e)||this.q){ti()?.handleDerivedDependencyChanged(this,e,t);let i=!1;try{i=this.w?this.w.handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.l):!0}catch(s){Hh(s)}const r=this.a===3;if(i&&(this.a===1||r)&&(this.a=2,r))for(const s of this.f)s.handlePossibleChange(this)}}B(){if(!this.s)throw new Ji("The reader object cannot be used outside its compute function!")}readObservable(e){this.B(),e.addObserver(this);const t=e.get();return this.j.add(e),this.k.delete(e),t}reportChange(e){this.B(),this.p=!0;for(const t of this.f)t.handleChange(this,e)}get store(){return this.B(),this.t===void 0&&(this.t=new le),this.t}get delayedStore(){return this.B(),this.u===void 0&&(this.u=new le),this.u}addObserver(e){const t=!this.f.has(e)&&this.i>0;super.addObserver(e),t&&(this.v&&this.v.has(e)?this.v.delete(e):e.beginUpdate(this))}removeObserver(e){this.f.has(e)&&this.i>0&&(this.v||(this.v=new Set),this.v.add(e)),super.removeObserver(e)}debugGetState(){return{state:this.a,updateCount:this.i,isComputing:this.n,dependencies:this.j,value:this.c}}debugSetValue(e){this.c=e}setValue(e,t,i){this.c=e;const r=this.f;t.updateObserver(this,this);for(const s of r)s.handleChange(this,i)}};function yC(e,t){return new zs(new Vu(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,e.equalsFn??Mb)}yB(yC);function AC(...e){let t,i,r;return e.length===3?[t,i,r]=e:[i,r]=e,new Jo(new Vu(t,void 0,r),i,r,()=>Jo.globalTransaction,Mb)}var Jo=class extends Fb{constructor(e,t,i,r,s){super(),this.e=e,this.i=t,this._getValue=i,this.j=r,this.k=s,this.c=!1,this.n=n=>{const o=this._getValue(n),a=this.a,c=!this.c||!this.k(a,o);let l=!1;c&&(this.a=o,this.c&&(l=!0,bB(this.j(),u=>{ti()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.c});for(const h of this.f)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.l();return"Event fired"+(u?`: ${u}`:"")})),this.c=!0),l||ti()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.c})}}l(){return this.e.getDebugName(this)}get debugName(){const e=this.l();return"From Event"+(e?`: ${e}`:"")}g(){this.d=this.i(this.n)}h(){this.d.dispose(),this.d=void 0,this.c=!1,this.a=void 0}get(){return this.d?(this.c||this.n(void 0),this.a):this._getValue(void 0)}debugSetValue(e){this.a=e}};(function(e){e.Observer=Jo;function t(i,r){let s=!1;Jo.globalTransaction===void 0&&(Jo.globalTransaction=i,s=!0);try{r()}finally{s&&(Jo.globalTransaction=void 0)}}e.batchEventsGlobally=t})(AC||(AC={}));function kB(e){const t=new xC(!1,void 0);return e.addObserver(t),re(()=>{e.removeObserver(t)})}xB(kB);function IB(e,t){const i=new xC(!0,t);e.addObserver(i);try{i.beginUpdate(e)}finally{i.endUpdate(e)}return re(()=>{e.removeObserver(i)})}AB(IB);var xC=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a===1&&this.b&&(this.c?this.c(e.get()):e.reportChanges()),this.a--}handlePossibleChange(e){}handleChange(e,t){}},mg;function CB(e){mg||(mg=new EC,Lb(mg)),mg.addFilteredObj(e)}var EC=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return $B([Ic(TB("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[Ic(" "),fr(Hs(e.oldValue,70),{color:"red",strikeThrough:!0}),Ic(" "),fr(Hs(e.newValue,60),{color:"green"})]:[Ic(" (unchanged)")]:[Ic(" "),fr(Hs(e.newValue,60),{color:"green"}),Ic(" (initial)")]}handleObservableCreated(e){if(e instanceof zs){const t=e;if(this.f.set(t,new Set),!1){const r=[];t.__debugUpdating=r;const s=t.beginUpdate;t.beginUpdate=o=>(r.push(o),s.apply(t,[o]));const n=t.endUpdate;t.endUpdate=o=>{const a=r.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",t.debugName,o.debugName),r.splice(a,1),n.apply(t,[o])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this.c(e)){if(e instanceof zs){this._handleDerivedRecomputed(e,t);return}console.log(...this.d([Cc("observable value changed"),fr(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}}formatChanges(e){if(e.size!==0)return fr(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,i){this.c(e)&&this.f.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this.c(e))return;const i=this.f.get(e);i&&(console.log(...this.d([Cc("derived recomputed"),fr(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([Cc("derived cleared"),fr(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([Cc("observable from event triggered"),fr(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this.c(e)&&this.f.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,i){this.c(e)&&this.f.get(e).add(t)}handleAutorunStarted(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([Cc("autorun"),fr(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([Cc("transaction"),fr(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function $B(e){const t=new Array,i=[];let r="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(r+=`%c${o.text}`,t.push(o.style),o.data&&i.push(...o.data)):"data"in o&&i.push(...o.data)}s(e);const n=[r,...t];return n.push(...i),n}function Ic(e){return fr(e,{color:"black"})}function Cc(e){return fr(MB(`${e}: `,10),{color:"black",bold:!0})}function fr(e,t={color:"black"}){function i(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const r={color:t.color};return t.strikeThrough&&(r["text-decoration"]="line-through"),t.bold&&(r["font-weight"]="bold"),{text:e,style:i(r)}}function Hs(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?DB(e,t):PB(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function DB(e,t){let i="[ ",r=!0;for(const s of e){if(r||(i+=", "),i.length-5>t){i+="...";break}r=!1,i+=`${Hs(s,t-i.length)}`}return i+=" ]",i}function PB(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const n=e.toString();return n.length<=t?n:n.substring(0,t-3)+"..."}const i=lC(e);let r=i?i+"(":"{ ",s=!0;for(const[n,o]of Object.entries(e)){if(s||(r+=", "),r.length-5>t){r+="...";break}s=!1,r+=`${n}: ${Hs(o,t-r.length)}`}return r+=i?")":" }",r}function TB(e,t){let i="";for(let r=1;r<=t;r++)i+=e;return i}function MB(e,t){for(;e.length<t;)e+=" ";return e}var NB=class S4{static createHost(t,i){return new S4(t,i)}static createClient(t,i){return new S4(t,i)}constructor(t,i){this.b=t,this.c=i,this.a=this.b({handleNotification:n=>{const o=n,a=this.c().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:n=>{const o=n;try{return{type:"result",value:this.c().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const r=new Proxy({},{get:(n,o)=>async(...a)=>{const c=await this.a.sendRequest([o,a]);if(c.type==="error")throw c.value;return c.value}}),s=new Proxy({},{get:(n,o)=>(...a)=>{this.a.sendNotification([o,a])}});this.api={notifications:s,requests:r}}};function LB(e,t){const i=globalThis;let r=[],s;const{channel:n,handler:o}=RB({sendNotification:c=>{s?s.sendNotification(c):r.push(c)}});let a;return(i.$$debugValueEditor_debugChannels??(i.$$debugValueEditor_debugChannels={}))[e]=c=>{a=t(),s=c;for(const l of r)c.sendNotification(l);return r=[],o},NB.createClient(n,()=>{if(!a)throw new Error("Not supported");return a})}function RB(e){let t;return{channel:r=>(t=r,{sendNotification:s=>{e.sendNotification(s)},sendRequest:s=>{throw new Error("not supported")}}),handler:{handleRequest:r=>r.type==="notification"?t?.handleNotification(r.data):t?.handleRequest(r.data)}}}function SC(e,t){const i=e.split(`
`);for(let r=1;r<i.length;r++){const s=i[r];if(t&&t.test(s))continue;const n=s.match(/\$show(\d+)FramesUp/);if(n){const a=parseInt(n[1],10);r+=a-1;continue}const o=OB(s);if(o)return o}}function OB(e){const t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};const i=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(i)return{fileName:i[1],line:parseInt(i[2]),column:parseInt(i[3]),id:e}}var FB=class{constructor(){this.a=void 0}throttle(e,t){this.a===void 0&&(this.a=setTimeout(()=>{this.a=void 0,e()},t))}dispose(){this.a!==void 0&&clearTimeout(this.a)}};function kC(e,t){for(const i in t)e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?kC(e[i],t[i]):e[i]=t[i]}function IC(e,t){for(const i in t)t[i]===null?delete e[i]:e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?IC(e[i],t[i]):e[i]=t[i]}var jB=class Mh{static{this.a=void 0}static getInstance(){return Mh.a===void 0&&(Mh.a=new Mh),Mh.a}j(){const t=[],i=[...this.h];if(i.length===0)return;const r=i.flatMap(n=>n.debugGetUpdatingObservers()??[]).map(n=>n.observer),s=new Set;for(;r.length>0;){const n=r.shift();if(s.has(n))continue;s.add(n);const o=this.n(n,a=>{s.has(a)||r.push(a)});o&&t.push(o)}return{names:i.map(n=>n.getDebugName()??"tx"),affected:t}}k(t){const i=this.f.get(t);if(!i){lt(new Ji("No info found"));return}return i}m(t){const i=this.f.get(t);if(!i){lt(new Ji("No info found"));return}return i}n(t,i){if(t instanceof zs){const r=[...t.debugGetObservers()];for(const c of r)i(c);const s=this.k(t);if(!s)return;const n=t.debugGetState(),o={name:t.debugName,instanceId:s.instanceId,updateCount:n.updateCount},a=[...s.changedObservables].map(c=>this.f.get(c)?.instanceId).filter(Yi);if(n.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(n.state){case 0:return{...o,type:"observable/derived",state:"noValue"};case 3:return{...o,type:"observable/derived",state:"upToDate"};case 2:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(t instanceof vC){const r=this.m(t);if(!r)return;const s={name:t.debugName,instanceId:r.instanceId,updateCount:r.updateCount},n=[...r.changedObservables].map(o=>this.f.get(o).instanceId);if(t.debugGetState().isRunning)return{...s,type:"autorun",state:"updating",changedDependencies:n};switch(t.debugGetState().state){case 3:return{...s,type:"autorun",state:"upToDate"};case 2:return{...s,type:"autorun",state:"stale",changedDependencies:n};case 1:return{...s,type:"autorun",state:"possiblyStale"}}}}p(t){const i=this.k(t);if(i)return{name:t.debugName,instanceId:i.instanceId}}q(t){if(t instanceof zs)return{name:t.toString(),instanceId:this.k(t)?.instanceId};const i=this.m(t);if(i)return{name:t.toString(),instanceId:i.instanceId}}constructor(){this.b=0,this.c=0,this.e=new Map,this.f=new WeakMap,this.g=new Map,this.h=new Set,this.i=LB("observableDevTools",()=>({notifications:{setDeclarationIdFilter:t=>{},logObservableValue:t=>{console.log("logObservableValue",t)},flushUpdates:()=>{this.w()},resetUpdates:()=>{this.r=null,this.i.api.notifications.handleChange(this.u,!0)}},requests:{getDeclarations:()=>{const t={};for(const i of this.e.values())t[i.id]=i;return{decls:t}},getSummarizedInstances:()=>null,getObservableValueInfo:t=>({observers:[...this.g.get(t).debugGetObservers()].map(r=>this.q(r)).filter(Yi)}),getDerivedInfo:t=>{const i=this.g.get(t);return{dependencies:[...i.debugGetState().dependencies].map(r=>this.p(r)).filter(Yi),observers:[...i.debugGetObservers()].map(r=>this.q(r)).filter(Yi)}},getAutorunInfo:t=>({dependencies:[...this.g.get(t).debugGetState().dependencies].map(r=>this.p(r)).filter(Yi)}),getTransactionState:()=>this.j(),setValue:(t,i)=>{const r=this.g.get(t);if(r instanceof zs)r.debugSetValue(i);else if(r instanceof jb)r.debugSetValue(i);else if(r instanceof Jo)r.debugSetValue(i);else throw new Ji("Observable is not supported");const s=[...r.debugGetObservers()];for(const n of s)n.beginUpdate(r);for(const n of s)n.handleChange(r,void 0);for(const n of s)n.endUpdate(r)},getValue:t=>{const i=this.g.get(t);if(i instanceof zs)return Hs(i.debugGetState().value,200);if(i instanceof jb)return Hs(i.debugGetState().value,200)}}})),this.r=null,this.s=new FB,this.u={},this.w=()=>{this.r!==null&&(this.i.api.notifications.handleChange(this.r,!1),this.r=null)}}v(t){IC(this.u,t),this.r===null?this.r=t:kC(this.r,t),this.s.throttle(this.w,10)}x(t){let i=!0,r;const s=Error;for(;;){const o=s.stackTraceLimit;s.stackTraceLimit=i?6:20;const a=new Error().stack;s.stackTraceLimit=o;let c=SC(a,/[/\\]observableInternal[/\\]|\.observe|[/\\]util(s)?\./);if(!i&&!c&&(c=SC(a,/[/\\]observableInternal[/\\]|\.observe/)),c){r=c;break}if(!i){console.error("Could not find location for declaration",new Error().stack),r={fileName:"unknown",line:0,column:0,id:"unknown"};break}i=!1}let n=this.e.get(r.id);return n===void 0&&(n={id:this.b++,type:t,url:r.fileName,line:r.line,column:r.column},this.e.set(r.id,n),this.v({decls:{[n.id]:n}})),n.id}handleObservableCreated(t){const r={declarationId:this.x("observable/value"),instanceId:this.c++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this.f.set(t,r)}handleOnListenerCountChanged(t,i){const r=this.k(t);if(r){if(r.listenerCount===0&&i>0){const s=t instanceof zs?"observable/derived":"observable/value";this.g.set(r.instanceId,t),this.v({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,formattedValue:r.lastValue,type:s,name:t.debugName}}})}else r.listenerCount>0&&i===0&&(this.v({instances:{[r.instanceId]:null}}),this.g.delete(r.instanceId));r.listenerCount=i}}handleObservableUpdated(t,i){if(t instanceof zs){this._handleDerivedRecomputed(t,i);return}const r=this.k(t);r&&i.didChange&&(r.lastValue=Hs(i.newValue,30),r.listenerCount>0&&this.v({instances:{[r.instanceId]:{formattedValue:r.lastValue}}}))}handleAutorunCreated(t){const r={declarationId:this.x("autorun"),instanceId:this.c++,updateCount:0,changedObservables:new Set};this.f.set(t,r),this.g.set(r.instanceId,t),r&&this.v({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,runCount:0,type:"autorun",name:t.debugName}}})}handleAutorunDisposed(t){const i=this.m(t);i&&(this.v({instances:{[i.instanceId]:null}}),this.f.delete(t),this.g.delete(i.instanceId))}handleAutorunDependencyChanged(t,i,r){const s=this.m(t);s&&s.changedObservables.add(i)}handleAutorunStarted(t){}handleAutorunFinished(t){const i=this.m(t);i&&(i.changedObservables.clear(),i.updateCount++,this.v({instances:{[i.instanceId]:{runCount:i.updateCount}}}))}handleDerivedDependencyChanged(t,i,r){const s=this.k(t);s&&s.changedObservables.add(i)}_handleDerivedRecomputed(t,i){const r=this.k(t);if(!r)return;const s=Hs(i.newValue,30);r.updateCount++,r.changedObservables.clear(),r.lastValue=s,r.listenerCount>0&&this.v({instances:{[r.instanceId]:{formattedValue:s,recomputationCount:r.updateCount}}})}handleDerivedCleared(t){const i=this.k(t);i&&(i.lastValue=void 0,i.changedObservables.clear(),i.listenerCount>0&&this.v({instances:{[i.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(t){this.h.add(t)}handleEndTransaction(t){this.h.delete(t)}};vB(CB);var UB=!1;UB&&Lb(new EC),cn&&cn.VSCODE_DEV_DEBUG&&Lb(jB.getInstance());var Ub,Bb=class{static{Ub=this}static{this.a=0}constructor(t){this.c=new lo,this.d=new Map,this.b=t.getProxy(Y.MainThreadUrls)}registerUriHandler(t,i){const r=t.identifier;if(this.c.has(r))throw new Error(`Protocol handler already registered for extension ${r}`);const s=Ub.a++;return this.c.add(r),this.d.set(s,i),this.b.$registerUriHandler(s,r,t.displayName||t.name),re(()=>{this.c.delete(r),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,i){const r=this.d.get(t);if(!r)return Promise.resolve(void 0);try{r.handleUri(A.revive(i))}catch(s){lt(s)}return Promise.resolve(void 0)}async createAppUri(t){return A.revive(await this.b.$createAppUri(t))}};Bb=Ub=__decorate([__param(0,De)],Bb);var vg=V("IExtHostUrlsService"),wg=V("IExtHostProgress"),zb=class{constructor(t){this.b=0,this.c=new Map,this.a=t.getProxy(Y.MainThreadProgress)}async withProgress(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i,c={label:t.displayName||t.name,id:t.identifier.value};return this.a.$startProgress(s,{location:Cp.from(o),title:n,source:c,cancellable:a},t.isUnderDevelopment?void 0:t.identifier.value).catch(Wh),this.d(s,r,!!a)}async withProgressFromSource(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i;return this.a.$startProgress(s,{location:Cp.from(o),title:n,source:t,cancellable:a},void 0).catch(Wh),this.d(s,r,!!a)}d(t,i,r){let s;r&&(s=new tt,this.c.set(t,s));const n=a=>{this.a.$progressEnd(a),this.c.delete(a),s?.dispose()};let o;try{o=i(new CC(this.a,t),r&&s?s.token:Je.None)}catch(a){throw n(t),a}return o.then(a=>n(t),a=>n(t)),o}$acceptProgressCanceled(t){const i=this.c.get(t);i&&(i.cancel(),this.c.delete(t))}};zb=__decorate([__param(0,De)],zb);function BB(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var CC=class extends pg{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([lN(100,(e,t)=>BB(e,t),()=>Object.create(null))],CC.prototype,"throttledReport",null);var Hb=V("IExtHostAuthentication"),Wb=class{constructor(t,i,r,s,n,o,a){this.l=i,this.m=r,this.n=s,this.o=n,this.p=o,this.q=a,this.c=bg,this.f=new Map,this.g=new pM,this.h=new $,this.j=new zB,this.k=new $,this.d=t.getProxy(Y.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const i=t.toLowerCase();return We.chain(this.h.event,r=>r.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(i)).map(s=>({provider:s.provider})))}async getSession(t,i,r,s={}){const n=Ve.toKey(t.identifier),o=[...r].sort().join(" "),c=Object.keys(s).sort().map(l=>`${l}:${!!s[l]}`).join(", ");return await this.j.getOrCreate(`${n} ${i} ${o} ${c}`,async()=>{await this.d.$ensureProvider(i);const l=t.displayName||t.name;return this.d.$getSession(i,r,n,l,s)})}async getAccounts(t){return await this.d.$ensureProvider(t),await this.d.$getAccounts(t)}registerAuthenticationProvider(t,i,r,s){return this.g.queue(t,async()=>{if(this.f.get(t)){this.q.error(`An authentication provider with id '${t}' is already registered. The existing provider will not be replaced.`);return}const n=r.onDidChangeSessions(o=>this.d.$sendDidChangeSessions(t,o));this.f.set(t,{label:i,provider:r,disposable:n,options:s??{supportsMultipleAccounts:!1}}),await this.d.$registerAuthenticationProvider(t,i,s?.supportsMultipleAccounts??!1,s?.supportedAuthorizationServers)}),new Me(()=>{this.g.queue(t,async()=>{const n=this.f.get(t);n&&(n.disposable?.dispose(),this.f.delete(t),await this.d.$unregisterAuthenticationProvider(t))})})}$createSession(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s)return r.authorizationServer=A.revive(r.authorizationServer),await s.provider.createSession(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$removeSession(t,i){return this.g.queue(t,async()=>{const r=this.f.get(t);if(r)return await r.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$getSessions(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s)return r.authorizationServer=A.revive(r.authorizationServer),await s.provider.getSessions(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$onDidChangeAuthenticationSessions(t,i,r){return t.startsWith(QI)||this.h.fire({provider:{id:t,label:i},extensionIdFilter:r}),Promise.resolve()}$onDidUnregisterAuthenticationProvider(t){return this.g.queue(t,async()=>{const i=this.f.get(t);i&&(i.disposable?.dispose(),this.f.delete(t))})}async $registerDynamicAuthProvider(t,i,r,s,n){if(!s)try{s=(await sC(i,this.l.environment.appName,r?.scopes_supported)).client_id}catch(a){throw new Error(`Dynamic registration failed: ${a.message}`)}const o=new this.c(this.m,this.n,this.l,this.o,this.p,this.d,A.revive(t),i,r,s,this.k,n||[]);return await this.g.queue(o.id,async()=>{this.f.set(o.id,{label:o.label,provider:o,disposable:Me.from(o,o.onDidChangeSessions(a=>this.d.$sendDidChangeSessions(o.id,a)),o.onDidChangeClientId(()=>this.d.$sendDidChangeDynamicProviderInfo({providerId:o.id,clientId:o.clientId}))),options:{supportsMultipleAccounts:!1}}),await this.d.$registerDynamicAuthenticationProvider(o.id,o.label,o.authorizationServer,o.clientId)}),o.id}async $onDidChangeDynamicAuthProviderTokens(t,i,r){this.k.fire({authProviderId:t,clientId:i,tokens:r})}};Wb=__decorate([__param(0,De),__param(1,At),__param(2,gg),__param(3,vg),__param(4,wg),__param(5,vn),__param(6,Ce)],Wb);var zB=class{constructor(){this.c=new Map}getOrCreate(e,t){const i=this.c.get(e);if(i)return i;const r=t().finally(()=>this.c.delete(e));return this.c.set(e,r),r}},bg=class{constructor(t,i,r,s,n,o,a,c,l,u,h,d){this.k=t,this.l=i,this.m=r,this.n=s,this.o=o,this.authorizationServer=a,this.p=c,this.q=l,this.r=u,this.c=new $,this.onDidChangeSessions=this.c.event,this.d=new $,this.onDidChangeClientId=this.d.event;const f=a.toString(!0);this.id=l?.resource?f+" "+l?.resource:f,this.label=l?.resource_name??this.authorizationServer.authority,this.h=n.createLogger(this.id,{name:this.label}),this.j=new le,this.j.add(this.c);const g=We.chain(h.event,v=>v.filter(b=>b.authProviderId===this.id&&b.clientId===u).map(b=>b.tokens));this.f=this.j.add(new HB({onDidChange:g,set:v=>o.$setSessionsForDynamicAuthProvider(this.id,this.clientId,v)},d,this.h)),this.j.add(this.f.onDidChangeSessions(v=>this.c.fire(v))),this.g=[{label:p(2920,null),handler:(v,b,x)=>this.s(v,b,x)}]}get clientId(){return this.r}async getSessions(t,i){if(this.h.info(`Getting sessions for scopes: ${t?.join(" ")??"all"}`),!t)return this.f.sessions;const r=[...t].sort(),s=t.join(" ");let n=this.f.sessions.filter(o=>Ri([...o.scopes].sort(),r));if(this.h.info(`Found ${n.length} sessions for scopes: ${s}`),n.length){const o=[],a=[],c=new Map(this.f.tokens.map(l=>[l.access_token,l]));for(const l of n){const u=c.get(l.accessToken);if(u&&u.expires_in){const h=Date.now(),d=u.expires_in*1e3;if(h>u.created_at+d-5*60*1e3){if(this.h.info(`Token for session ${l.id} is about to expire, refreshing...`),a.push(u),!u.refresh_token){this.h.warn(`No refresh token available for scopes ${l.scopes.join(" ")}. Throwing away token.`);continue}try{const f=await this.y(u.refresh_token);f.scope!==s&&(this.h.warn(`Token scopes '${f.scope}' do not match requested scopes '${s}'. Overwriting token with what was requested...`),f.scope=s),this.h.info(`Successfully created a new token for scopes ${l.scopes.join(" ")}.`),o.push(f)}catch(f){this.h.error(`Failed to refresh token: ${f}`)}}}}return(o.length||a.length)&&(this.f.update({added:o,removed:a}),n=this.f.sessions.filter(l=>Ri([...l.scopes].sort(),r))),this.h.info(`Found ${n.length} sessions for scopes: ${s}`),n}return[]}async createSession(t,i){this.h.info(`Creating session for scopes: ${t.join(" ")}`);let r;for(let n=0;n<this.g.length;n++){const{handler:o}=this.g[n];try{if(r=await this.n.withProgressFromSource({label:this.label,id:this.id},{location:$n.Notification,title:p(2921,null,this.label),cancellable:!0},(a,c)=>o(t,a,c)),r)break}catch(a){const c=this.g[n+1]?.label;if(!c)break;const l=yi(a)?p(2922,null,this.label,c):p(2923,null,this.label,c);if(!await this.o.$showContinueNotification(l))throw new mt;this.h.error(`Failed to create token via flow '${c}': ${a}`)}}if(!r)throw new Error("Failed to create authentication token");r.scope!==t.join(" ")&&(this.h.warn(`Token scopes '${r.scope}' do not match requested scopes '${t.join(" ")}'. Overwriting token with what was requested...`),r.scope=t.join(" ")),this.f.update({added:[{...r,created_at:Date.now()}],removed:[]});const s=this.f.sessions.find(n=>n.accessToken===r.access_token);return this.h.info(`Created session for scopes: ${r.scope}`),s}async removeSession(t){this.h.info(`Removing session with id: ${t}`);const i=this.f.sessions.find(s=>s.id===t);if(!i){this.h.error(`Session with id ${t} not found`);return}const r=this.f.tokens.find(s=>s.access_token===i.accessToken);if(!r){this.h.error(`Failed to retrieve token for removed session: ${i.id}`);return}this.f.update({added:[],removed:[r]}),this.h.info(`Removed token for session: ${i.id} with scopes: ${i.scopes.join(" ")}`)}dispose(){this.j.dispose()}async s(t,i,r){const s=this.u(64),n=await this.v(s),o=this.u(32),a=A.parse(`${this.m.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/authorize?nonce=${o}`);let c;try{c=await this.l.createAppUri(a)}catch(b){throw new Error(`Failed to create external URI: ${b}`)}const l=new URL(this.p.authorization_endpoint);l.searchParams.append("client_id",this.r),l.searchParams.append("response_type","code"),l.searchParams.append("state",c.toString()),l.searchParams.append("code_challenge",n),l.searchParams.append("code_challenge_method","S256");const u=t.join(" ");u&&l.searchParams.append("scope",u),this.q?.resource&&l.searchParams.append("resource",this.q.resource);const h="https://vscode.dev/redirect";l.searchParams.append("redirect_uri",h);const d=this.w(a);if(this.h.info(`Opening authorization URL for scopes: ${u}`),this.h.trace(`Authorization URL: ${l.toString()}`),!await this.k.openUri(l.toString(),{}))throw new mt;i.report({message:p(2924,null)});let g;try{g=(await dd(d,r)).code}catch(b){throw yi(b)?(this.h.info("Authorization code request was cancelled by the user."),b):(this.h.error(`Failed to receive authorization code: ${b}`),new Error(`Failed to receive authorization code: ${b}`))}return this.h.info(`Authorization code received for scopes: ${u}`),await this.x(g,s,h)}u(t){const i=new Uint8Array(t);return crypto.getRandomValues(i),Array.from(i).map(r=>r.toString(16).padStart(2,"0")).join("").substring(0,t)}async v(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r);return fl(_.wrap(new Uint8Array(s)),!1,!1).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async w(t){const i=await this.o.$waitForUriHandler(t),r=/[?&]code=([^&]+)/.exec(i.query||"");if(!r||r.length<2)throw new Error("Authentication failed: No authorization code received");return{code:r[1]}}async x(t,i,r){if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const s=new URLSearchParams;s.append("client_id",this.r),s.append("grant_type","authorization_code"),s.append("code",t),s.append("redirect_uri",r),s.append("code_verifier",i);const n=await fetch(this.p.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:s.toString()});if(!n.ok){const a=await n.text();throw new Error(`Token exchange failed: ${n.status} ${n.statusText} - ${a}`)}const o=await n.json();if(Ib(o))return o;throw iC(o)&&o.error==="invalid_client"?(this.h.warn(`Client ID (${this.r}) was invalid, generated a new one.`),await this.z(),new Error("Client ID was invalid, generated a new one. Please try again.")):new Error(`Invalid authorization token response: ${JSON.stringify(o)}`)}async y(t){if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const i=new URLSearchParams;i.append("client_id",this.r),i.append("grant_type","refresh_token"),i.append("refresh_token",t);const s=await(await fetch(this.p.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:i.toString()})).json();if(Ib(s))return{...s,created_at:Date.now()};throw iC(s)&&s.error==="invalid_client"?(this.h.warn(`Client ID (${this.r}) was invalid, generated a new one.`),await this.z(),new Error("Client ID was invalid, generated a new one. Please try again.")):new Error(`Invalid authorization token response: ${JSON.stringify(s)}`)}async z(){try{const t=await sC(this.p,this.m.environment.appName,this.q?.scopes_supported);this.r=t.client_id,this.d.fire()}catch(t){throw this.h.error(`Failed to fetch new client ID: ${t}`),new Error(`Failed to fetch new client ID: ${t}`)}}};bg=__decorate([__param(0,gg),__param(1,vg),__param(2,At),__param(3,wg),__param(4,vn)],bg);var HB=class{constructor(e,t,i){this.h=e,this.j=i,this.f=new $,this.onDidChangeSessions=this.f.event,this.g=new le,this.c=SB("tokens",t),this.d=yC({equalsFn:(r,s)=>Ri(r,s,(n,o)=>n.accessToken===o.accessToken)},r=>this.c.read(r).map(s=>this.l(s))),this.g.add(this.k()),this.g.add(this.h.onDidChange(r=>this.c.set(r,void 0)))}get tokens(){return this.c.get()}get sessions(){return this.d.get()}dispose(){this.g.dispose()}update({added:e,removed:t}){this.j.trace(`Updating tokens: added ${e.length}, removed ${t.length}`);const i=[...this.c.get()];for(const r of t){const s=i.findIndex(n=>n.access_token===r.access_token);s!==-1&&i.splice(s,1)}for(const r of e){const s=i.findIndex(n=>n.access_token===r.access_token);s===-1?i.push(r):i[s]=r}(e.length||t.length)&&(this.c.set(i,void 0),this.h.set(i)),this.j.trace(`Tokens updated: ${i.length} tokens stored.`)}k(){let e=[];return wC(t=>{this.j.trace("Checking for session changes...");const i=this.d.read(t);if(e===i){this.j.trace("No session changes detected.");return}if(!i||i.length===0){this.j.trace("All sessions removed."),e.length>0&&(this.f.fire({added:[],removed:e,changed:[]}),e=[]);return}const r=[],s=[];for(const n of i)e.some(a=>a.accessToken===n.accessToken)||r.push(n);for(const n of e)i.some(a=>a.accessToken===n.accessToken)||s.push(n);(r.length>0||s.length>0)&&(this.j.trace(`Sessions changed: added ${r.length}, removed ${s.length}`),this.f.fire({added:r,removed:s,changed:[]})),e=i})}l(e){let t;if(e.id_token)try{t=nC(e.id_token)}catch{}if(!t)try{t=nC(e.access_token)}catch{}const i=e.scope?e.scope.split(" "):t?.scope?t.scope.split(" "):[];return{id:X1(e.access_token,0).toString(),accessToken:e.access_token,account:{id:t?.sub||"unknown",label:t?.preferred_username||t?.name||t?.email||"MCP"},scopes:i,idToken:e.id_token}}},yg,_b=V("IExtHostLanguageModels"),$C=class{constructor(e,t){this.option=e,this.stream=new D1,this.stream=t??new D1}},WB=class{constructor(){this.a=new Map,this.b=new D1,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return hl.map(e.b.asyncIterable,t=>{if(t instanceof It)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;const t=new Map;for(const i of li.wrap(e)){let r;i.part.type==="text"?r=new It(i.part.value):i.part.type==="data"?r=new It(""):r=new Fo(i.part.toolCallId,i.part.name,i.part.parameters);const s=t.get(i.index);s?s.push(r):t.set(i.index,[r])}for(const[i,r]of t){let s=this.a.get(i);s||(this.a.size===0?s=new $C(i,this.b):s=new $C(i),this.a.set(i,s)),s.stream.emitMany(r)}}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},Vb=class{static{yg=this}static{this.a=1}constructor(t,i,r){this.k=i,this.l=r,this.c=new $,this.d=new $,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new ks,this.i=new Map,this.j=new Map,this.s=new Set,this.b=t.getProxy(Y.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,i,r,s){const n=yg.a++;this.f.set(n,{extension:t.identifier,provider:r,languageModelId:i});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${Ve.toKey(t.identifier)}/${i}`,{extension:t.identifier,id:i,vendor:s.vendor??Ve.toKey(t.identifier),name:s.name??"",family:s.family??"",cost:s.cost,description:s.description,version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable,modelPickerCategory:s.category,capabilities:s.capabilities});const a=r.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(i,new Ve(c),l,u)});return re(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,i,r,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=[],l=()=>{c.length>0&&(this.b.$reportResponsePart(i,c),c.length=0)},u=new Vr(l,30),h=g=>{c.push(g)>30?(l(),u.cancel()):u.schedule()},d=new pg(async g=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let v;if(g.part instanceof Fo?v={type:"tool_use",name:g.part.name,parameters:g.part.input,toolCallId:g.part.callId}:g.part instanceof It?v={type:"text",value:g.part.value}:g.part instanceof Ns&&(v={type:"data",value:{mimeType:g.part.mimeType,data:_.wrap(g.part.data)}}),!v){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(g)}`);return}h({index:g.index,part:v})});let f;try{f=a.provider.provideLanguageModelResponse(s.value.map($u.to),n,Ve.toKey(r),d,o)}catch(g){throw g}Promise.resolve(f).then(()=>{l(),this.b.$reportResponseDone(i,void 0)},g=>{l(),this.b.$reportResponseDone(i,ua(g))})}$provideTokenLength(t,i,r){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(i,r)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:i,metadata:r}of t.added)this.g.set(i,{metadata:r,apiObjects:new ks});if(t.removed)for(const i of t.removed){this.g.delete(i);for(const[r,s]of this.i)s.languageModelId===i&&(s.res.reject(new mt),this.i.delete(r))}t.added?.forEach(i=>this.q(i.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const i=li.find(this.g.entries(),([,r])=>!!r.metadata.isDefault)?.[0];if(i)return this.getLanguageModelByIdentifier(t,i)}async getLanguageModelByIdentifier(t,i){const r=this.g.get(i);if(!r)return;this.p(t.identifier,r.metadata)&&await this.q(r.metadata);let s=r.apiObjects.get(t.identifier);if(!s){const n=this;s={id:r.metadata.id,vendor:r.metadata.vendor,family:r.metadata.family,version:r.metadata.version,name:r.metadata.name,capabilities:{supportsImageToText:r.metadata.capabilities?.vision??!1,supportsToolCalling:r.metadata.capabilities?.toolCalling??!1},maxInputTokens:r.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(i))throw Rs.NotFound(i);return n.r(i,o,a??Je.None)},sendRequest(o,a,c){if(!n.g.has(i))throw Rs.NotFound(i);return n.m(t,i,o,a??{},c??Je.None)}},Object.freeze(s),r.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,i){const r=await this.b.$selectChatModels({...i,extension:t.identifier}),s=[];for(const n of r){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,i,r,s,n){const o=this.n(t,r),a=t.identifier,c=this.g.get(i)?.metadata;if(!c||!this.g.has(i))throw Rs.NotFound(`Language model '${i}' is unknown.`);if(this.p(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw Rs.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);const l=Math.random()*1e6|0,u=new WB;this.i.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,new vi(o),s,n)}catch(h){throw this.i.delete(l),Rs.tryDeserialize(h)??h}return u.apiObject}n(t,i){const r=[];for(const s of i)s.role===Wi.System&&M(t,"languageModelSystem"),r.push($u.from(s));return r}async $acceptResponsePart(t,i){const r=this.i.get(t);r&&r.res.handleFragment(i)}async $acceptResponseDone(t,i){const r=this.i.get(t);r&&(this.i.delete(t),i?r.res.reject(Rs.tryDeserialize(i)??U4(i)):r.res.resolve())}async o(t,i,r,s){const n=QI+i.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=r?p(2930,null,i.displayName,r):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}p(t,i){return!!i.auth&&!Ve.equals(i.extension,t)}async q(t){if(t.auth)for(const i of this.s)try{await this.o(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(r){this.k.error("Fake Auth request failed"),this.k.error(r)}}async r(t,i,r){if(!this.g.get(t))throw Rs.NotFound(`Language model '${t}' is unknown.`);const n=li.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(i,r):this.b.$countTokens(t,typeof i=="string"?i:$u.from(i),r)}$updateModelAccesslist(t){const i=new Array;for(const{from:r,to:s,enabled:n}of t){const o=this.h.get(r)??new lo;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(r,o);const c={from:r,to:s};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const i=this,r=We.signal(We.filter(this.c.event,n=>Ve.equals(n.from,t.identifier))),s=We.signal(this.d.event);return{get onDidChange(){return We.any(r,s)},canSendRequest(n){let o;e:for(const[c,l]of i.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!i.p(t.identifier,o))return!0;const a=i.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,i,r=Je.None){return M(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(i,r)}async $isFileIgnored(t,i,r){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(A.revive(i),r)??!1}registerIgnoredFileProvider(t,i){M(t,"chatParticipantPrivate");const r=yg.a++;return this.b.$registerFileIgnoreProvider(r),this.j.set(r,i),re(()=>{this.b.$unregisterFileIgnoreProvider(r),this.j.delete(r)})}};Vb=yg=__decorate([__param(0,De),__param(1,Ce),__param(2,Hb)],Vb);function qu(e,t=je){return x1(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function Ag(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var DC;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(DC||(DC={}));var _B=60,VB=_B*60,qb=VB*24,iK=qb*7,rK=qb*30,sK=qb*365;function qB(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var xg={DateTimeFormat(e,t){return new Zt(()=>{try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}})},Collator(e,t){return new Zt(()=>{try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}})},Segmenter(e,t){return new Zt(()=>{try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}})},Locale(e,t){return new Zt(()=>{try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(on,t)}})},NumberFormat(e,t){return new Zt(()=>{try{return new Intl.NumberFormat(e,t)}catch{return new Intl.NumberFormat(void 0,t)}})}},PC;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(PC||(PC={}));function TC(e){return e<0?0:e>255?255:e|0}function $c(e){return e<0?0:e>4294967295?4294967295:e|0}var MC=class J3{constructor(t){const i=TC(t);this.c=i,this.a=J3.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const r=TC(i);t>=0&&t<256?this.a[t]=r:this.b.set(t,r)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},NC;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(NC||(NC={}));var LC;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(LC||(LC={}));var GB=class extends MC{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=xg.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this.h(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.value.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},RC=new tl(10);function ZB(e,t){const i=`${e}/${t.join(",")}`;let r=RC.get(i);return r||(r=new GB(e,t),RC.set(i,r)),r}var Gb;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(Gb||(Gb={}));var OC;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(OC||(OC={}));var FC;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(FC||(FC={}));var jC;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(jC||(jC={}));var UC;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(UC||(UC={}));var BC;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(BC||(BC={}));var zC;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(zC||(zC={}));var HC;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(HC||(HC={}));var Zb=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},WC;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(WC||(WC={}));var _C;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(_C||(_C={}));var VC;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(VC||(VC={}));var JB=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},YB=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},qC=class{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=GC(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=I5(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new JB(t,this.wordSeparators?ZB(this.wordSeparators,[]):null,i?this.searchString:null)}};function GC(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r===10)return!0;if(r===92){if(t++,t>=i)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function ZC(e,t,i){if(!i)return new Zb(e,null);const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s];return new Zb(e,r)}function QB(e,t,i,r,s){if(r===0)return!0;const n=t.charCodeAt(r-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r);if(e.get(o)!==0)return!0}return!1}function XB(e,t,i,r,s){if(r+s===i)return!0;const n=t.charCodeAt(r+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r+s-1);if(e.get(o)!==0)return!0}return!1}function JC(e,t,i,r,s){return QB(e,t,i,r,s)&&XB(e,t,i,r,s)}var KB=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this.b&&s===this.c){if(s===0){T5(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=r,this.c=s,!this._wordSeparators||JC(this._wordSeparators,e,t,r,s))return i}while(i);return null}},YC=V("IUriIdentityService");function QC(e){return e.scheme!==q.file&&e.scheme!==q.vscodeRemote}function ez(e){if(e.folders.length)return e.folders.every(t=>QC(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&QC(e.configuration))return e.configuration}function tz(e){return ez(e)?.scheme}var Jb=V("environmentService"),iz=Jb,XC=Jb,KC=V("remoteAgentService"),nK=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let r=0;r<this.maxSampleCount;r++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await ni(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((r,s)=>r+s,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((r,s)=>r+s,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},Yb,rz=V("pathService"),e7=Yb=class{constructor(t,i,r,s){this.d=t,this.e=i,this.f=r,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||Xn)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,i,r){return typeof i=="string"||typeof i>"u"?this.a.then(s=>this.h(t,s,i)):this.h(t,i,r)}h(t,i,r){return t.scheme===q.file||t.scheme===q.vscodeRemote?BT(r??Ar(t),i===1):!0}get defaultUriScheme(){return Yb.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return q.vscodeRemote;const r=tz(i.getWorkspace());if(r)return r;const s=i.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=i.getWorkspace().configuration;return n?n.scheme:q.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Lt:Ue)}async fileURI(t){let i="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(i=t.substring(2),t="/"):(i=t.substring(2,s),t=t.substring(s)||"/")}return A.from({scheme:q.file,authority:i,path:t,query:"",fragment:""})}};e7=Yb=__decorate([__param(1,KC),__param(2,XC),__param(3,Dd)],e7);function sz(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var t7=class{constructor(t,i,r,s,n,o){this.a=t,this.b=i,this.c=r,this.d=s,this.f=n,this.g=o}aiText(t,i,r={}){return{...this.j(i?.map(fv),r),type:3,contentPattern:t}}text(t,i,r={}){t=this.h(t,r);const s=this.a.getValue(),n=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(i?.map(fv),r),type:2,contentPattern:t,previewOptions:r.previewOptions,maxFileSize:r.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:r.surroundingContext,userDisabledExcludesAndIgnoreFiles:r.disregardExcludeSettings&&r.disregardIgnoreFiles}}h(t,i){const r=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:r.editor.wordSeparators};return this.l(t,i)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),s}file(t,i={}){return{...this.j(t,i),type:1,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}i(t,i){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(r=>r.length>0).map(Eg),!t.length)return{}}else t=Eg(t);return i?this.parseSearchPaths(t):{pattern:Qb(...Array.isArray(t)?t:[t])}}j(t=[],i={}){let r=Array.isArray(i.excludePattern)?i.excludePattern.map(u=>u.pattern).flat():i.excludePattern;r=r?.length===1?r[0]:r;const s=this.i(i.includePattern,i.expandPatterns),n=this.i(r,i.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,i,n)):t.map(u=>this.u(u,i,n,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults,onlyFileScheme:i.onlyFileScheme};if(i.onlyOpenEditors){const u=yt(this.c.groups.flatMap(f=>f.editors.map(g=>g.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(f=>gI(c,f.fsPath)),d=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(d)),{...c,...d}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>gI(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const i=[],r=new Gt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===q.walkThrough)return;if(lM(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=r.get(c);l||(n=!0,l={folder:c,includePattern:{}},i.push(l),r.set(c,l));const u=ma(c.fsPath,o.fsPath);da(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:i,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,i){if(i.isSmartCase){if(t.isRegExp){if(R5(t.pattern,!0))return!0}else if(R5(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&GC(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=h=>ar(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:oz(t)).map(h=>{const d=this.f.resolvedUserHome;return d?Ag(h,d.scheme===q.file?d.fsPath:d.path):h}),n=Km(s,h=>i(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>un(h,"/")).map(h=>un(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),az(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=Qb(...l);return u&&(a.pattern=u),a}n(t,i){return i.disregardExcludeSettings?void 0:Zj(t,!i.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const i=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=nz(s);return o&&(o=Xb(o)),this.q(n).flatMap(c=>this.r(c,o))}),r=new Map;return i.forEach(s=>{const n=s.searchPath.toString(),o=r.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):r.set(n,{searchPath:s.searchPath,pattern:s.pattern?Qb(s.pattern):void 0})}),Array.from(r.values())}q(t){if(ar(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==q.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:A.file(ys(t))}]}if(this.b.getWorkbenchState()===2){const i=this.b.getWorkspace().folders[0].uri;if(t=Eg(t),t.startsWith("../")||t===".."){const s=Ue.resolve(i.path,t);return[{searchPath:i.with({path:s})}]}const r=Xb(t);return[{searchPath:i,pattern:r}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=i.match(new RegExp(`^${ln(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Yi);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&Xb(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=p(14600,null,o);throw new Error(a)}}}}r(t,i){const r=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,s=[{searchPath:t.searchPath,pattern:r}];return r&&!r.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:r+"/**"}),s}t(t,i,r){const s=this.u(fv(t.searchPath),i,r,!1);return s?{...s,includePattern:t.pattern}:null}u(t,i,r,s){let n;const o=A.isUri(t)?t:t.uri;let a=i.excludePattern?.map(f=>{const g=i.excludePattern&&sz(f)?f.uri:void 0;return!g||!(A.isUri(t)&&this.g.extUri.isEqual(t,g))?g:void 0});if(a?.length||(a=[void 0]),r.searchPaths){const f=r.searchPaths.filter(g=>Q5(g.searchPath,o))[0];if(f&&!f.pattern)return null;f&&(n=f.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,i)||{},...n||{}},h=A.isUri(t)?Ar(t):t.name,d=a.map(f=>Object.keys(u).length>0?{folder:f,pattern:u}:void 0).filter(f=>f);return{folder:o,folderName:s?h:void 0,excludePattern:d,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!c.search.followSymlinks}}};t7=__decorate([__param(0,Ds),__param(1,Dd),__param(2,IF),__param(3,Ce),__param(4,rz),__param(5,YC)],t7);function nz(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let s=e.substr(0,r.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}function Qb(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function oz(e){return Ll(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function az(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function Eg(e){return e.replace(/\\/g,"/")}function Xb(e){return Eg(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var cz=7e3;function lz(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const r=[],s=[];for(const u of i)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):r.push(h)}if(r.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=ix(),a=u=>o({activationEvent:u}),c=Promise.all(r.map(u=>uz(e,u,a))).then(()=>{}),l=hz(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function uz(e,t,i){for(const r of e.folders)if(await e.exists(wt(A.revive(r),t))){i(`workspaceContains:${t}`);return}}async function hz(e,t,i,r){if(i.length===0)return Promise.resolve(void 0);const s=new tt,n=e.checkExists(e.folders,i,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},cz);let a=!1;try{a=await n}catch(c){yi(c)||lt(c)}s.dispose(),clearTimeout(o),a&&r(`workspaceContains:${i.join(",")}`)}var i7=class{constructor(e){this.b=new $,this.onDidChangePassword=this.b.event,this.a=e.getProxy(Y.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}},Kb=V("IExtHostSecretState"),dz=class{#e;constructor(e,t){this.disposables=new le,this.a=Ve.toKey(e.identifier),this.#e=t,this.onDidChange=We.map(We.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.a),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},ey=class{constructor(t,i,r){this.f=r,this.d=new Map,this.a=i.getProxy(Y.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===on}getMessage(t,i){const{message:r,args:s,comment:n}=i;if(this.c)return k5(r,s??{});let o=r;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),k5(a??r,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const r=await this.g(t);if(!r){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(r),n=JSON.parse(s);i=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${r}: ${s.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:r})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return A.revive(i)}return t.l10n?A.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};ey=__decorate([__param(0,At),__param(1,De),__param(2,Ce)],ey);var ty=V("IExtHostLocalizationService"),iy=V("IExtHostManagedSockets"),ry=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(Y.MainThreadManagedSockets)}setFactory(t,i){for(const r of this.d.values())r.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new fz(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,r=await this.c.makeConnection(),s=new le;return this.d.set(i,new pz(i,r,s)),s.add(re(()=>this.d.delete(i))),s.add(r.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),s.dispose()})),s.add(r.onDidClose(n=>{this.a.$onDidManagedSocketClose(i,n?.stack??n?.message),s.dispose()})),s.add(r.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(i,_.wrap(n)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};ry=__decorate([__param(0,De)],ry);var fz=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},pz=class extends te{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.B(i)}},sy,r7=V("IHostUtils"),ny=sy=class extends te{constructor(t,i,r,s,n,o,a,c,l,u,h,d,f){super(),this.Y=d,this.Z=f,this.a=this.B(new $),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=r,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(Y.MainThreadWorkspace),this.z=this.g.getProxy(Y.MainThreadTelemetry),this.C=this.g.getProxy(Y.MainThreadExtensionService),this.D=new cr,this.F=new cr,this.G=new cr,this.H=new cr,this.I=new mz(this.f.extensions.activationEvents),this.L=new Bu(this.I,this.f.extensions.allExtensions);const g=new lo(this.f.extensions.myExtensions);this.J=new Bu(this.I,o7(this.L,g)),Qn&&(this.s.info(`Creating extension host with the following global extensions: ${Dc(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${Dc(this.J)}`)),this.M=new FI(this.g,this.s),this.N=new i7(this.g),this.O=c,this.h=this.q.add(t.createChild(new uv([fb,this.M],[Kb,this.N]))),this.P=this.B(new hb(this.J,this.L,{onExtensionActivationError:(v,b,x)=>{this.C.$onExtensionActivationError(v,ua(b),x)},actualActivateExtension:async(v,b)=>{if(Bu.isHostExtension(v,this.J,this.L))return await this.C.$activateExtension(v,b),new OU;const x=this.J.getExtensionDescription(v);return this.fb(x,b)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.wb(),this.D.open(),await this.j.waitForInitializeCall(),St("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){lt(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),e1(s=>{this.s.error(s)}),this.g.dispose();const r=this.$();Promise.race([ni(5e3),r]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.s.info(`Extension host exiting with code ${i}`),this.s.flush(),this.s.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.C.$getExtension(t);return i&&{...i,identifier:new Ve(i.identifier.value),extensionLocation:A.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const r=this.P.getActivatedExtension(t);if(r.activationFailed)return Promise.reject(r.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===q.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const r=await this.R.get(i);return A.file(r)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new gz(t))),this.Q}async db(t){const i=wn.forUris(r=>I1.ignorePathCasing(r));return await Promise.all(t.map(async r=>{if(this.xb(r)){const s=await this.cb(r.extensionLocation);i.set(s,r)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const r=this.P.getActivatedExtension(t);if(!r)return i;try{typeof r.module.deactivate=="function"&&(i=Promise.resolve(r.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{r.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return i}async fb(t,i){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,i).then(r=>{const s=r.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,i),this.gb(t,i,"success",s),r},r=>{throw this.gb(t,i,"failure"),r})}gb(t,i,r,s){const n=n7(t,i);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:r})}hb(t,i){const r=n7(t,i);this.z.$publicLog2("activatePlugin",r);const s=this.xb(t);if(!s)return Promise.resolve(new RU(og.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.s.flush();const n=this.vb(t),o=new le,a=new ub(i.startup);return Promise.all([n?this.zb(t,wt(t.extensionLocation,s),a):this.yb(t,wt(t.extensionLocation,s),a),this.ib(t,o)]).then(c=>(St(`code/extHost/willActivateExtension/${t.identifier.value}`),sy.jb(this.s,t.identifier,c[0],c[1],o,a))).then(c=>(St(`code/extHost/didActivateExtension/${t.identifier.value}`),c))}ib(t,i){const r=this.Z.createLanguageModelAccessInformation(t),s=i.add(new FU(t,this.M)),n=i.add(new jI(t.identifier.value,!1,this.M)),o=i.add(new dz(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?tc.Test:tc.Development:tc.Production,c=this.f.remote.isRemote?No.Workspace:No.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const d=et(t,"ipc")?this.f.messagePorts?.get(Ve.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return r},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(f){return He(t.extensionLocation.fsPath,f)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return He(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return A.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Gu(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return M(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!d)return;const f=We.buffer(We.fromDOMEventEmitter(d,"message",g=>g.data));d.start(),h={onDidReceiveMessage:f,postMessage:d.postMessage.bind(d)}}return h}})})}static jb(t,i,r,s,n,o){return r=r||{activate:void 0,deactivate:void 0},this.kb(t,i,r,s,o).then(a=>new ag(!1,null,o.build(),r,a,re(()=>{n.dispose(),wr(s.subscriptions)})))}static kb(t,i,r,s,n){if(typeof r.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=r.activate.apply(globalThis,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(o).then(a=>(n.activateResolveStop(),a))}catch(o){return Promise.reject(o)}else return Promise.resolve(r)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,r=>{this.s.error(r)})}mb(t,i=0){const s=Date.now();m5(()=>{for(let n=i;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(_M()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),r=this.J.getAllExtensionDescriptions();if(i)this.mb(r);else for(const s of r)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],r=this.pb(i),s=this.rb(),n=Promise.all([s,t,r]).then(()=>{});return Promise.race([n,ni(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const r=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:r||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await lz(s,i);if(n)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(p(2926,null));const r=(await this.getExtensionPathIndex()).findSubstr(i),n=await(this.vb(r,i.path)?this.zb(null,i,new ub(!1)):this.yb(null,i,new ub(!1)));if(!n||typeof n.run!="function")throw new Error(p(2927,null,i.toString()));return new Promise((o,a)=>{const c=(h,d)=>{h?(Qn&&this.s.error("Test runner called back with error",h),a(h)):(Qn&&(d?this.s.info(`Test runner called back with ${d} failures.`):this.s.info("Test runner called back with successful outcome.")),o(typeof d=="number"&&d>0?1:0))},l=yr(i),u=n.run(l,c);u&&u.then&&u.then(()=>{Qn&&this.s.info("Test runner finished successfully."),o(0)}).catch(h=>{Qn&&this.s.error("Test runner finished with error",h),a(h instanceof Error&&h.stack?h.stack:String(h))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),ni(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,re(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new La("Not an authority that can be resolved!",Ii.InvalidAuthority);const r=t.substr(0,i);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${r}`,!1),{authorityPrefix:r,resolver:this.S[r]}}async $resolveAuthority(t,i){const r=Oi.create(!1),s=()=>`[resolveAuthority(${e9(t)},${i})][${r.elapsed()}ms] `,n=E=>this.s.info(`${s()}${E}`),o=E=>this.s.warn(`${s()}${E}`),a=(E,I=void 0)=>this.s.error(`${s()}${E}`,I),c=E=>{if(E instanceof La)return{type:"error",error:{code:E._code,message:E._message,detail:E._detail}};throw E},l=async E=>{n(`activating resolver for ${E}...`);const{resolver:I,authorityPrefix:U}=await this.ub(E);if(!I)throw a(`no resolver for ${U}`),new La(`No remote extension installed to resolve ${U}.`,Ii.NoResolverFound);return{resolver:I,authorityPrefix:U,remoteAuthority:E}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async E=>{if(!(E instanceof La)||E._code!==Ii.InvalidAuthority)throw E;return o(`resolving nested authorities failed: ${E.message}`),[await l(t)]})}catch(E){return c(E)}const d=new ox;d.cancelAndSet(()=>n("waiting..."),1e3);let f,g;for(const[E,{authorityPrefix:I,resolver:U,remoteAuthority:j}]of h.entries())try{if(E===h.length-1)n("invoking final resolve()..."),St(`code/extHost/willResolveAuthority/${I}`),f=await U.resolve(j,{resolveAttempt:i,execServer:g}),St(`code/extHost/didResolveAuthorityOK/${I}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(U,wf.isManagedResolvedAuthority(f)?f:void 0));else{if(n(`invoking resolveExecServer() for ${j}`),St(`code/extHost/willResolveExecServer/${I}`),g=await U.resolveExecServer?.(j,{resolveAttempt:i,execServer:g}),!g)throw new La(`Exec server was not available for ${j}`,Ii.NoResolverFound);St(`code/extHost/didResolveExecServerOK/${I}`)}}catch(ee){return St(`code/extHost/didResolveAuthorityError/${I}`),a("returned an error",ee),d.dispose(),c(ee)}d.dispose();const v={environmentTunnels:f.environmentTunnels,features:f.tunnelFeatures?{elevation:f.tunnelFeatures.elevation,privacyOptions:f.tunnelFeatures.privacyOptions,protocol:f.tunnelFeatures.protocol===void 0?!0:f.tunnelFeatures.protocol}:void 0},b={extensionHostEnv:f.extensionHostEnv,isTrusted:f.isTrusted,authenticationSession:f.authenticationSessionForInitializingExtensions?{id:f.authenticationSessionForInitializingExtensions.id,providerId:f.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${wf.isManagedResolvedAuthority(f)?"managed authority":`${f.host}:${f.port}`}`);let x;if(wf.isManagedResolvedAuthority(f)){const E=i;this.Y.setFactory(E,f.makeConnection),x={authority:t,connectTo:new K6(E),connectionToken:f.connectionToken}}else x={authority:t,connectTo:new oj(f.host,f.port),connectionToken:f.connectionToken};return{type:"ok",value:{authority:x,options:b,tunnelInformation:v}}}async $getCanonicalURI(t,i){this.s.info(`$getCanonicalURI invoked for authority (${e9(t)})`);const{resolver:r}=await this.ub(t);if(!r)return null;const s=A.revive(i);if(typeof r.getCanonicalURI>"u")return s;const n=await si(()=>r.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=A.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=s7(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),Qn&&(this.s.info(`$startExtensionHost: global extensions: ${Dc(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${Dc(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===1?this.D.wait().then(r=>this.ab(t,!1)):this.G.wait().then(r=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=A.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=s7(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),Qn&&(this.s.info(`$deltaExtensions: global extensions: ${Dc(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${Dc(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=_.alloc(t),r=Math.random()%256;for(let s=0;s<t;s++)i.writeUInt8(r,s);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}vb(t,i){return i??=t?this.xb(t):i,i?.endsWith(".mjs")||t?.type==="module"&&!i?.endsWith(".cjs")}};ny=sy=__decorate([__param(0,wl),__param(1,r7),__param(2,De),__param(3,Mr),__param(4,hr),__param(5,Ce),__param(6,At),__param(7,gb),__param(8,ug),__param(9,Bs),__param(10,ty),__param(11,iy),__param(12,_b)],ny);function s7(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const s=new Bu(e,t.getAllExtensionDescriptions());s.deltaExtensions(r.toAdd,r.toRemove);const n=new lo(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of r.myToRemove)n.delete(a);for(const a of r.myToAdd)n.add(a);const o=o7(s,n);return{globalRegistry:s,myExtensions:o}}function n7(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function Dc(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Ws=V("IExtHostExtensionService"),Gu=class{#e;#t;#i;constructor(e,t,i,r,s){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=ys(yr(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function o7(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var gz=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},mz=class{constructor(e){this.a=new ks,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},Pc=V("IExtHostApiDeprecationService"),oy=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(Y.MainThreadTelemetry)}report(t,i,r){const s=this.d(t,i);this.a.has(s)||(this.a.add(s),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${r}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};oy=__decorate([__param(0,De),__param(1,Ce)],oy);var dK=Object.freeze(new class{report(e,t,i){}}),a7=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Ce),r=e.get(De).getProxy(Y.MainThreadErrors);e1(s=>{t.error(s);const n=ua(s);r.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(Ce),i=e.get(De),r=e.get(Ws),s=e.get(dg),n=e.get(Pc),o=i.getProxy(Y.MainThreadExtensionService),a=i.getProxy(Y.MainThreadErrors),c=await r.getExtensionRegistry(),l=await r.getExtensionPathIndex(),u=new WeakMap;function h(g,v){if(u.has(g))return u.get(g).stack;let b="",x,E;for(const U of v)b+=`
	at ${U.toString()}`,E=U.getFileName(),!x&&E&&(x=l.findSubstr(A.file(E)));const I=`${g.name||"Error"}: ${g.message||""}${b}`;return u.set(g,{extensionIdentifier:x?.identifier,stack:I}),I}const d=Symbol("prepareStackTrace wrapped");let f=h;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return f},set(g){if(g===h||!g||g[d]){f=g||h;return}f=function(v,b){return h(v,b),g.call(Error,v,b)},Object.assign(f,{[d]:!0})}}),e1(g=>{t1.is(g)||t.error(g);const v=ua(g);let b;if(g instanceof OE?b=g.extension:b=u.get(g)?.extensionIdentifier,!!b)if(t1.is(g)){const x=c.getExtensionDescription(b);x&&n.report(g.name,x,`${g.message}
 FROM: ${g.stack}`)}else{o.$onExtensionRuntimeError(b,v);const x=s.onExtensionError(b,g);t.trace("forwarded error to extension?",x,b)}}),Xc.addListener(g=>{a.$onUnexpectedError(g)})}},vz=class Y3{constructor(t,i,r,s,n){this.a=r,this.b=new HL(t,null,s),i=Y3.e(i,this.b);const o=new uv(...fR());o.set(At,{_serviceBrand:void 0,...i,messagePorts:n}),o.set(De,new vR(this.b)),o.set(Sl,new wR(s)),o.set(r7,r);const a=new mR(o,!0);a.invokeFunction(a7.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(Ce)),St("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(Ws)),this.c.initialize(),a.invokeFunction(a7.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(Y.MainThreadExtensionService);return A.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=A.revive(i.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=A.revive(i.transformIncomingURIs(t.environment.appRoot));const r=t.environment.extensionDevelopmentLocationURI;return r&&(t.environment.extensionDevelopmentLocationURI=r.map(s=>A.revive(i.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=A.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=A.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=A.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.nlsBaseUrl=A.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=A.revive(i.transformIncomingURIs(t.logsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}};function wz(e){return{transformIncoming:t=>t.scheme==="vscode-remote"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="file"?{scheme:"vscode-local",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoing:t=>t.scheme==="file"?{scheme:"vscode-remote",authority:e,path:t.path,query:t.query,fragment:t.fragment}:t.scheme==="vscode-local"?{scheme:"file",path:t.path,query:t.query,fragment:t.fragment}:t,transformOutgoingScheme:t=>t==="file"?"vscode-remote":t==="vscode-local"?"file":t}}function bz(e){return new RL(wz(e))}var c7;(function(e){e[e.IPC=1]="IPC",e[e.Socket=2]="Socket",e[e.MessagePort=3]="MessagePort"})(c7||(c7={}));var Sg=class Q3{static{this.ENV_KEY="VSCODE_EXTHOST_IPC_HOOK"}constructor(t){this.pipeName=t,this.type=1}serialize(t){t[Q3.ENV_KEY]=this.pipeName}},ay=class X3{constructor(){this.type=2}static{this.ENV_KEY="VSCODE_EXTHOST_WILL_SEND_SOCKET"}serialize(t){t[X3.ENV_KEY]="1"}},cy=class K3{constructor(){this.type=3}static{this.ENV_KEY="VSCODE_WILL_SEND_MESSAGE_PORT"}serialize(t){t[K3.ENV_KEY]="1"}};function yz(e){delete e[Sg.ENV_KEY],delete e[ay.ENV_KEY],delete e[cy.ENV_KEY]}function Az(e){if(e[Sg.ENV_KEY])return ly(e,new Sg(e[Sg.ENV_KEY]));if(e[ay.ENV_KEY])return ly(e,new ay);if(e[cy.ENV_KEY])return ly(e,new cy);throw new Error("No connection information defined in environment!")}function ly(e,t){return yz(e),t}var fK=new Z("inOutput",!1),pK=new Z("activeLogOutput",!1),gK=new Z("activeLogOutput.isLog",!1),mK=new Z("activeLogOutput.levelSettable",!1),vK=new Z("activeLogOutput.level",""),wK=new Z("activeLogOutput.levelIsDefault",!1),bK=new Z("outputView.scrollLock",!1),yK=new Z("activeOutputChannel",""),AK=new Z("output.filter.trace",!0),xK=new Z("output.filter.debug",!0),EK=new Z("output.filter.info",!0),SK=new Z("output.filter.warning",!0),kK=new Z("output.filter.error",!0),IK=new Z("outputFilterFocus",!1),CK=new Z("output.filter.categories",""),$K=V("outputService"),Zu;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(Zu||(Zu={}));var xz={OutputChannels:"workbench.contributions.outputChannels"};function Ez(e){return Array.isArray(e.source)}var Sz=class extends te{constructor(){super(...arguments),this.a=new Map,this.b=this.B(new $),this.onDidRegisterChannel=this.b.event,this.c=this.B(new $),this.onDidRemoveChannel=this.c.event,this.f=this.B(new $),this.onDidUpdateChannelSources=this.f.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const i=this.a.get(e);i&&Ez(i)&&(i.source=t,this.f.fire(i))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};Yt.add(xz.OutputChannels,new Sz);var l7=class extends lv{constructor(e,t,i,r,s){super(),this.id=e,this.name=t,this.r=i,this.s=r,this.extension=s,this.n=0,this.visible=!1,this.setLevel(i.getLevel()),this.B(i.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(re(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,Zu.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,Zu.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=_.fromString(t).byteLength,cR(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,Zu.Append))}},kz=class extends l7{appendLine(e){this.append(e)}},uy=class{constructor(t,i,r,s,n,o){this.i=i,this.j=r,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(Y.MainThreadOutputService),this.b=this.k.extUri.joinPath(i.logsLocation,`output_logging_${qB(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[i,r]of this.g)r.visible=i===this.h}createOutputChannel(t,i,r){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof i=="object"&&i.log,n=Fe(i)?i:void 0;if(Fe(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>Ve.equals(r.identifier,u))?.[1];a&&(o=dR(a));const c=new le,l=s?this.o(t,o,r,c):this.n(t,n,r,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(re(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,i,r,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,i,r.identifier.value);return s.add(re(()=>this.l.deregisterLogger(o))),new l7(c,t,a,this.a,r)}async o(t,i,r,s){const n=await this.p(r),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${r.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:i,extensionId:r.identifier.value}));return s.add(re(()=>this.l.deregisterLogger(a))),new kz(c,t,l,this.a,r)}p(t){let i=this.d.get(t.identifier.value);if(!i){const r=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,i=(async()=>{try{await this.j.value.createDirectory(r)}catch(s){if(Hd(s)!==pe.FileExists)throw s}return r})())}return i}q(t,i,r){const s=()=>{if(r.isDisposed)throw new Error("Channel has been closed")};return i.then(n=>r.add(n)),{get name(){return t},append(n){s(),i.then(o=>o.append(n))},appendLine(n){s(),i.then(o=>o.appendLine(n))},clear(){s(),i.then(n=>n.clear())},replace(n){s(),i.then(o=>o.replace(n))},show(n,o){s(),i.then(a=>a.show(n,o))},hide(){s(),i.then(n=>n.hide())},dispose(){r.dispose()}}}r(t,i,r,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new $);function a(c){i=c,o.fire(c)}return r.then(c=>{c.logLevel!==i&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,r,s),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){n(),r.then(u=>u.trace(c,...l))},debug(c,...l){n(),r.then(u=>u.debug(c,...l))},info(c,...l){n(),r.then(u=>u.info(c,...l))},warn(c,...l){n(),r.then(u=>u.warn(c,...l))},error(c,...l){n(),r.then(u=>u.error(c,...l))}}}};uy=__decorate([__param(0,De),__param(1,At),__param(2,zu),__param(3,ka),__param(4,vn),__param(5,Ce)],uy);var u7=V("IExtHostOutputService"),Ju,hy=class{static{Ju=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(Y.MainThreadDecorations)}registerFileDecorationProvider(t,i){const r=Ju.c++;this.f.set(r,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(r,i.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(r,null);return}const o=nr(n);if(o.length<=Ju.d){this.g.$onDidChange(r,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:gT(u.path,"/")})),c=c2(a,(u,h)=>u.rank-h.rank||io(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const d of u){const f=Ai(d.uri.path);if(h!==f&&(h=f,l.push(d.uri)>=Ju.d))break e}}this.g.$onDidChange(r,l)});return new Me(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(r),this.f.delete(r)})}async $provideDecorations(t,i,r){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(A.revive(c),r));if(!u)return;try{L0.validate(u),u.badge&&typeof u.badge!="string"&&M(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};hy=Ju=__decorate([__param(0,De),__param(1,Ce)],hy);var h7=V("IExtHostDecorations"),Iz=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=$c(e);const i=this.a,r=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(i.length+s),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=$c(e),t=$c(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=$c(e),t=$c(t);const i=this.a,r=this.b;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=$c(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,r=0,s=0,n=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.b[r],n=s-this.a[r],e<n)i=r-1;else if(e>=s)t=r+1;else break;return new Cz(r,e-n)}},Cz=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},$z=class{constructor(e,t,i,r){this.a=e,this.b=t,this.c=i,this.d=r,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const i of t)this.k(i.range),this.l(new er(i.range.startLineNumber,i.range.startColumn),i.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this.b[r].length+e;this.f=new Iz(i)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const i=$5(t);if(i.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.b[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this.b.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,r)}},dy=new Map;function Dz(e,t){t?dy.set(e,t):dy.delete(e)}function Pz(e){return dy.get(e)}var Tz=class extends $z{constructor(e,t,i,r,s,n,o,a){super(t,i,r,s),this.o=e,this.p=n,this.q=o,this.r=a,this.n=!1}dispose(){pi(!this.n),this.n=!0,this.q=!1}equalLines(e){return Ri(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===q.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},get encoding(){return e.r},save(){return e.s()},getText(t){return t?e.t(t):e.getText()},get eol(){return e.c===`
`?Cr.LF:Cr.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.u(t)},offsetAt(t){return e.v(t)},positionAt(t){return e.w(t)},validateRange(t){return e.x(t)},validatePosition(t){return e.y(t)},getWordRangeAtPosition(t,i){return e.z(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){pi(!this.n),this.p=e}_acceptIsDirty(e){pi(!this.n),this.q=e}_acceptEncoding(e){pi(!this.n),this.r=e}s(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}t(e){const t=this.x(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const i=this.c,r=t.start.line,s=t.end.line,n=[];n.push(this.b[r].substring(t.start.character));for(let o=r+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(i)}u(e){let t;if(e instanceof Ne?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new Mz(t,this.b[t],t===this.b.length-1)}v(e){return e=this.y(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}w(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),i=this.b[t.index].length;return new Ne(t.index,Math.min(t.remainder,i))}x(e){if(!(e instanceof Ie))throw new Error("Invalid argument");const t=this.y(e.start),i=this.y(e.end);return t===e.start&&i===e.end?e:new Ie(t.line,t.character,i.line,i.character)}y(e){if(!(e instanceof Ne))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this.b.length)t=this.b.length-1,i=this.b[t].length,r=!0;else{const s=this.b[t].length;i<0?(i=0,r=!0):i>s&&(i=s,r=!0)}return r?new Ne(t,i):e}z(e,t){const i=this.y(e);if(!t)t=Pz(this.p);else if(C5(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=eE(i.character+1,Xx(t),this.b[i.line],0);if(r)return new Ie(i.line,r.startColumn-1,i.line,r.endColumn-1)}},Mz=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new Ie(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new Ie(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},kg=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},TK=new kg("id#"),Nz=class eP{static{this.c=new kg("TextEditorDecorationType")}constructor(t,i,r){const s=eP.c.nextId();t.$registerTextEditorDecorationType(i.identifier,s,fw.from(r)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},Lz=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof Ne)i=new Ie(e,e);else if(e instanceof Ie)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new Ie(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof Ie)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const r=this.c.validateRange(e);this.g.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==Cr.LF&&e!==Cr.CRLF)throw $e("endOfLine");this.h=e}},Rz=class{constructor(e,t,i,r){this.c=e,this.d=t,this._accept(i),this.e=r;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=uc.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:uc.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const r=this.m(e.tabSize);r==="auto"?(i=!0,t.tabSize=r):typeof r=="number"&&this.f!==r&&(this.f=r,i=!0,t.tabSize=r)}if(typeof e.indentSize<"u"){const r=this.o(e.indentSize);r==="tabSize"?(i=!0,t.indentSize=r):typeof r=="number"&&this.h!==r&&(this.g=r,this.h=r,i=!0,t.indentSize=r)}if(typeof e.insertSpaces<"u"){const r=this.q(e.insertSpaces);r==="auto"?(i=!0,t.insertSpaces=r):this.j!==r&&(this.j=r,i=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=uc.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},Oz=class{constructor(e,t,i,r,s,n,o,a){this.id=e,this.k=t,this.l=i,this.g=!1,this.h=new Set,this.c=s,this.d=new Rz(this.k,this.id,n,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return r.value},set document(l){throw new Jn("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof ts))throw $e("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof ts)))throw $e("selections");l.length===0&&(l=[new ts(0,0,0,0)]),c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new Jn("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new Jn("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new Lz(r.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let d;if(!u||Array.isArray(u)&&u.length===0)d=c.c.map(f=>R.from(f));else if(u instanceof Ne){const{lineNumber:f,column:g}=Ge.from(u);d=[{startLineNumber:f,startColumn:g,endLineNumber:f,endColumn:g}]}else if(u instanceof Ie)d=[R.from(u)];else{d=[];for(const f of u)if(f instanceof Ie)d.push(R.from(f));else{const{lineNumber:g,column:v}=Ge.from(f);d.push({startLineNumber:g,startColumn:v,endLineNumber:g,endColumn:v})}}return h.keepWhitespace===void 0&&(h.keepWhitespace=!1),t.$tryInsertSnippet(e,r.value.version,l.value,d,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(eI(u))return t.$trySetDecorations(e,l.key,Wj(u));{const d=new Array(4*u.length);for(let f=0,g=u.length;f<g;f++){const v=u[f];d[4*f]=v.start.line+1,d[4*f+1]=v.start.character+1,d[4*f+2]=v.end.line+1,d[4*f+3]=v.end.character+1}return t.$trySetDecorationsFast(e,l.key,d)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,R.from(l),u||Df.Default))},show(l){t.$tryShowEditor(e,Bt.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){pi(!this.g),this.g=!0}_acceptOptions(e){pi(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){pi(!this.g),this.e=e}_acceptViewColumn(e){pi(!this.g),this.f=e}_acceptSelections(e){pi(!this.g),this.c=e}_acceptDiffInformation(e){pi(!this.g),this.j=e}async m(){const e=this.c.map(Pr.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(s=>s.range);i.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=i.length-1;s<n;s++){const o=i[s].end;if(i[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(s=>({range:R.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?hc.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},Fz=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},fy=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new Gt,this.d=new $,this.e=new $,this.f=new $,this.g=new $,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=A.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=A.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==q.vscodeNotebookCell&&o.scheme!==q.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new Fz(new Tz(this.h.getProxy(Y.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty,n.encoding)),this.c.set(o,a),r.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=A.revive(n.documentUri);pi(this.c.has(o),`document '${o}' does not exist`),pi(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new Oz(n.id,this.h.getProxy(Y.MainThreadTextEditors),this.i,new Zt(()=>a.document),n.selections.map(Pr.to),n.options,n.visibleRanges.map(l=>R.to(l)),typeof n.editorPosition=="number"?Bt.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(pi(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),wr(i),wr(s),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(r),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return li.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};fy=__decorate([__param(0,De),__param(1,Ce)],fy);var Yo=V("IExtHostDocumentsAndEditors"),py=V("productService"),jz="vscode://schemas/vscode-product",Uz={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authIssuers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authProviderSpecific:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authProviderSpecific.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:9},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribLanguageModelToolSets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelDataPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelDataPart.d.ts",version:3},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},remoteCodingAgents:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.remoteCodingAgents.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textDocumentChangeReason:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textDocumentChangeReason.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Ig=Object.freeze(Uz),gy=Yt.as(of.JSONContribution),Bz=class _m{static a(t){const i=new lo;for(let r=0,s=t.length;r<s;r++)i.add(t[r].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new _m(i,[]);if(!i||!i.length)return new _m([],t);const r=this.a(t),s=this.a(i),n=i.filter(a=>!r.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new _m(n,o)}constructor(t,i){this.added=t,this.removed=i}},zz=class{constructor(e,t,i){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=i,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=Bz.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){lt(e)}}},Hz={type:"string",enum:["ui","workspace"],enumDescriptions:[p(14295,null),p(14296,null)]},d7="vscode://schemas/vscode-extensions",my={properties:{engines:{type:"object",description:p(14297,null),properties:{vscode:{type:"string",description:p(14298,null),default:"^1.22.0"}}},publisher:{description:p(14299,null),type:"string"},displayName:{description:p(14300,null),type:"string"},categories:{description:p(14301,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:NE},{type:"string",const:"Languages",deprecationMessage:p(14302,null)}]}},galleryBanner:{type:"object",description:p(14303,null),properties:{color:{description:p(14304,null),type:"string"},theme:{description:p(14305,null),type:"string",enum:["dark","light"]}}},contributes:{description:p(14306,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:p(14307,null)},enableProposedApi:{type:"boolean",deprecationMessage:p(14308,null)},enabledApiProposals:{markdownDescription:p(14309,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Ig).map(e=>e),markdownEnumDescriptions:Object.values(Ig).map(e=>e.proposal)}},api:{markdownDescription:p(14310,null),type:"string",enum:["none"],enumDescriptions:[p(14311,null)]},activationEvents:{description:p(14312,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:p(14313,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:p(14314,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:p(14315,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:p(14316,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:p(14317,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:p(14318,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:p(14319,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:p(14320,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:p(14321,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:p(14322,null),body:"onStartupFinished"},{label:"onTaskType",description:p(14323,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:p(14324,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:p(14325,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:p(14326,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:p(14327,null)},{label:"onUri",body:"onUri",description:p(14328,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:p(14329,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:p(14330,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:p(14331,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:p(14332,null)},{label:"onRenderer",description:p(14333,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:p(14334,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:p(14335,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:p(14336,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:p(14337,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:p(14338,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:p(14339,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:p(14340,null)},{label:"onMcpCollection",description:p(14341,null),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:p(14342,null),body:"*"}]}},badges:{type:"array",description:p(14343,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:p(14344,null)},href:{type:"string",description:p(14345,null)},description:{type:"string",description:p(14346,null)}}}},markdown:{type:"string",description:p(14347,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:p(14348,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:p(14349,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Gv}},extensionPack:{description:p(14350,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Gv}},extensionKind:{description:p(14351,null),type:"array",items:Hz,default:["workspace"],defaultSnippets:[{body:["ui"],description:p(14352,null)},{body:["workspace"],description:p(14353,null)},{body:["ui","workspace"],description:p(14354,null)},{body:["workspace","ui"],description:p(14355,null)},{body:[],description:p(14356,null)}]},capabilities:{description:p(14357,null),type:"object",properties:{virtualWorkspaces:{description:p(14358,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:p(14359,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(14360,null),p(14361,null),p(14362,null)]},description:{type:"string",markdownDescription:p(14363,null)}}},untrustedWorkspaces:{description:p(14364,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:p(14365,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[p(14366,null),p(14367,null),p(14368,null)]},restrictedConfigurations:{description:p(14369,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:p(14370,null)}}}}},sponsor:{description:p(14371,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:p(14372,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:p(14373,null),type:"string"},"vscode:uninstall":{description:p(14374,null),type:"string"}}},icon:{type:"string",description:p(14375,null)},l10n:{type:"string",description:p(14376,null)},pricing:{type:"string",markdownDescription:p(14377,null),enum:["Free","Trial"],default:"Free"}}},Wz=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new zz(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&ZF.register(e.extensionPoint,e.activationEventsGenerator),my.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,gy.registerSchema(d7,my),t}getExtensionPoints(){return Array.from(this.a.values())}},f7={ExtensionsRegistry:"ExtensionsRegistry"};Yt.add(f7.ExtensionsRegistry,new Wz);var _z=Yt.as(f7.ExtensionsRegistry);gy.registerSchema(d7,my),gy.registerSchema(jz,{properties:{extensionEnabledApiProposals:{description:p(14378,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Ig),markdownEnumDescriptions:Object.values(Ig).map(e=>e.proposal)}}]}}}});var Vz={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:p(11657,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:p(11658,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:p(11659,null),default:""}}},vy;(function(e){function t(i,r,s){if(!i)return;const n=Fe(i.type)?i.type:void 0;if(!n||n.length===0){s.error(p(11660,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)Fe(a)&&o.push(a);return{extensionId:r.value,taskType:n,required:o,properties:i.properties?Xe(i.properties):{},when:i.when?ui.deserialize(i.when):void 0}}e.from=t})(vy||(vy={}));var qz=_z.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:p(11661,null),type:"array",items:Vz}}),Gz=class{constructor(){this.d=new $,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{qz.setHandler((i,r)=>{this.c=void 0;try{for(const s of r.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of r.added){const n=s.value;for(const o of n){const a=vy.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(r.removed.length>0||r.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=Xe(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},Zz=new Gz,Jz="settings",NK=new Z("taskRunning",!1,p(11662,null)),LK=new Z("taskTerminalActive",!1,p(11663,null)),RK=Yh(11666,"Tasks"),Cg;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Cg||(Cg={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Cg||(Cg={}));var p7;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(p7||(p7={}));var Yu;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Yu||(Yu={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Yu||(Yu={}));var Qu;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(Qu||(Qu={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(Qu||(Qu={}));var Xu;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Xu||(Xu={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Xu||(Xu={}));var g7;(function(e){e.defaults={echo:!0,reveal:Yu.Always,revealProblems:Qu.Never,focus:!1,panel:Xu.Shared,showReuseMessage:!0,clear:!1}})(g7||(g7={}));var $g;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})($g||($g={})),function(e){function t(r){switch(r.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(r){switch(r){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}($g||($g={}));var m7;(function(e){function t(i){return Fe(i)?i:i.value}e.value=t})(m7||(m7={}));var v7;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(r){return r===e.Clean._id||r===e.Build._id||r===e.Rebuild._id||r===e.Test._id}e.is=t;function i(r){if(r!==void 0)return Fe(r)?t(r)?{_id:r,isDefault:!1}:void 0:r}e.from=i})(v7||(v7={}));var w7;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(w7||(w7={}));var b7;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(b7||(b7={}));var y7;(function(e){e.parallel="parallel",e.sequence="sequence"})(y7||(y7={}));var wy;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(wy||(wy={}));var A7;(function(e){e.terminateNewest="terminateNewest",e.terminateOldest="terminateOldest",e.prompt="prompt",e.warn="warn",e.silent="silent"})(A7||(A7={}));var x7;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:wy.default,instanceLimit:1,instancePolicy:"prompt"}})(x7||(x7={}));var Dg;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Dg||(Dg={})),function(e){e._default=e.Terminal}(Dg||(Dg={}));var E7;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(E7||(E7={}));var S7;(function(e){e.SingleRun="singleRun",e.Background="background"})(S7||(S7={}));var Bn;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(Bn||(Bn={}));var k7;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(k7||(k7={}));var I7;(function(e){function t(l){return{taskId:l._id,taskName:l.configurationProperties.name,runType:l.configurationProperties.isBackground?"background":"singleRun",group:l.configurationProperties.group,__task:l}}function i(l,u,h){return{...t(l),kind:Bn.Start,terminalId:u,resolvedVariables:h}}e.start=i;function r(l,u,h){return{...t(l),kind:Bn.ProcessStarted,terminalId:u,processId:h}}e.processStarted=r;function s(l,u,h){return{...t(l),kind:Bn.ProcessEnded,terminalId:u,exitCode:h}}e.processEnded=s;function n(l,u,h){return{...t(l),kind:Bn.Terminated,exitReason:h,terminalId:u}}e.terminated=n;function o(l,u,h){return{...t(u),kind:l,terminalId:h}}e.general=o;function a(l,u,h){return{...t(l),kind:Bn.ProblemMatcherEnded,hasErrors:u}}e.problemMatcherEnded=a;function c(){return{kind:Bn.Changed}}e.changed=c})(I7||(I7={}));var Pg;(function(e){function t(r){const s=Object.keys(r).sort();let n="";for(const o of s){let a=r[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function i(r){const n={_key:t(r),type:r.taskType};return Object.assign(n,r),n}e.create=i})(Pg||(Pg={}));var C7;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(C7||(C7={}));var $7;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})($7||($7={}));var D7;(function(e){function t(i,r){const s=Zz.get(i.type);if(s===void 0){const c=Xe(i);return delete c._key,Pg.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=Xe(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:r.error(p(11664,null,JSON.stringify(i,void 0,0),c));return}}}return Pg.create(n)}e.createTaskIdentifier=t})(D7||(D7={}));var OK=sc("rerun-task",ce.refresh,p(11665,null)),Tg;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Tg||(Tg={}));var Mg;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(Mg||(Mg={}));var by;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(by||(by={}));var Ku;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function i(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=by.from(s.options)),n}e.from=i;function r(s){if(s!=null)return new Va(s.process,s.args,s.options)}e.to=r})(Ku||(Ku={}));var yy;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(yy||(yy={}));var eh;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function i(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=yy.from(s.options)),n}e.from=i;function r(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new Do(s.commandLine,s.options):new Do(s.command,s.args?s.args:[],s.options)}e.to=r})(eh||(eh={}));var Lr;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function i(s){return{customExecution:"customExecution"}}e.from=i;function r(s,n){return n.get(s)}e.to=r})(Lr||(Lr={}));var Ay;(function(e){function t(i,r){let s;return i.scope!==void 0&&typeof i.scope!="number"?s=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===Cn.Workspace&&r&&r.workspaceFile?s=r.workspaceFile:s=Jz),{id:i._id,workspaceFolder:s}}e.from=t})(Ay||(Ay={}));var xy;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(xy||(xy={}));var ls;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=i(a,n);c&&o.push(c)}return o}e.fromMany=t;function i(s,n){if(s==null)return;let o;s.execution instanceof Va?o=Ku.from(s.execution):s.execution instanceof Do?o=eh.from(s.execution):s.execution&&s.execution instanceof E0&&(o=Lr.from(s.execution));const a=Tg.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Cn.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:xy.from(s.group),presentationOptions:Mg.from(s.presentationOptions),problemMatchers:nr(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=i;async function r(s,n,o){if(s==null)return;let a;Ku.is(s.execution)?a=Ku.to(s.execution):eh.is(s.execution)?a=eh.to(s.execution):Lr.is(s.execution)&&(a=Lr.to(s._id,o));const c=Tg.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(A.revive(s.source.scope)):l=Cn.Workspace),!c||!l)return;const u=new Nf(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Kl.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Kl(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=Mg.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=r})(ls||(ls={}));var Ey;(function(e){function t(r){return r}e.from=t;function i(r){if(r)return Object.assign(Object.create(null),r)}e.to=i})(Ey||(Ey={}));var Sy=class{#e;constructor(e,t,i){this._id=t,this.a=i,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},Ng=class{constructor(t,i,r,s,n,o,a,c){this.q=new $,this.r=new $,this.s=new $,this.u=new $,this.v=new $,this.w=new $,this.a=t.getProxy(Y.MainThreadTask),this.b=r,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,r){if(!r)return new Me(()=>{});const s=this.z();return this.j.set(s,{type:i,provider:r,extension:t}),this.a.$registerTaskProvider(s,i),new Me(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(Ey.from(t)).then(async i=>{const r=[];for(const s of i){const n=await ls.to(s,this.b,this.m);n&&r.push(n)}return r})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof Sy))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,r){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(i,await s.callback(r))),this.p=t.id,this.q.fire({execution:await this.B(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.B(t);this.l.delete(t.id),this.k.delete(t.id),this.D(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.B(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.B(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}get onDidStartTaskProblemMatchers(){return this.v.event}async $onDidStartTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.v.fire({execution:i})}get onDidEndTaskProblemMatchers(){return this.w.event}async $onDidEndTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.w.fire({execution:i,hasErrors:t.hasErrors})}$provideTasks(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));const s=[],n=si(()=>r.provider.provideTasks(Je.None)).then(o=>this.x(i,s,r,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));if(i.definition.type!==r.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${r.type}].`);const s=await ls.to(i,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await r.provider.resolveTask(s,Je.None);if(!n)return;this.C(n,r);const o=ls.from(n,r.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Lr.is(o.execution)&&await this.A(o,n,!0),await this.y(o)}z(){return this.h++}async A(t,i,r){const s=await this.a.$createTaskId(t);!r&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,i.execution)),this.m.set(s,i.execution)}async B(t,i){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new vr("Unexpected: The specified task is missing an execution");return n}const r=this.l.get(t.id);if(r)return r;let s;return i?s=Promise.resolve(new Sy(this,t.id,i)):s=ls.to(t.task,this.b,this.m).then(n=>{if(!n)throw new vr("Unexpected: Task does not exist.");return new Sy(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}C(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}D(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const r=this.n.values();let s=r.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=r.next()}};Ng=__decorate([__param(0,De),__param(1,At),__param(2,Mr),__param(3,Yo),__param(4,hr),__param(5,Bs),__param(6,Ce),__param(7,Pc)],Ng);var ky=class extends Ng{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c),this.registerTaskSystem(q.vscodeRemote,{scheme:q.vscodeRemote,authority:"",platform:J2(0)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const r=ls.from(i,t);if(r===void 0)throw new Error("Task is not valid");if(Lr.is(r.execution))await this.A(r,i,!1);else throw new r1;const s=await this.B(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(n=>{throw new Error(n)}),s}x(t,i,r,s){const n=[];if(s)for(const o of s){if(this.C(o,r),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=ls.from(o,r.extension);a&&Lr.is(a.execution)?(n.push(a),i.push(this.A(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:r.extension}}async y(t){if(Lr.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,r){}};ky=__decorate([__param(0,De),__param(1,At),__param(2,Mr),__param(3,Yo),__param(4,hr),__param(5,Bs),__param(6,Ce),__param(7,Pc)],ky);var Iy=V("IExtHostTask"),P7=class{constructor(){this.f=new Map,this.m=[],this.n=new $,this.o=new $,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,r){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof r=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:p(6890,null,r,e)};o(a)}},r)}return i&&this.f.set(s.seq,i),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await ni(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await ni(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function Yz(e){return e.type&&(e.label||e.program||e.runtime)}var Qz=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function Xz(e){return!!(e&&e.match(Qz))}function T7(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(Xz(e.path))return A.parse(e.path);if(ar(e.path))return A.file(e.path)}return e.path}function M7(e){if(typeof e.path=="object"){const t=A.revive(e.path);if(t)return t.scheme===q.file?t.fsPath:t.toString()}return e.path}function Kz(e,t){const i=t?T7:M7,r=Xe(e);return N7(r,(s,n)=>{s&&n&&(n.path=i(n))}),r}function eH(e,t){const i=t?T7:M7,r=Xe(e);return N7(r,(s,n)=>{!s&&n&&(n.path=i(n))}),r}function N7(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(r=>t(!1,r));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(r=>t(!1,r.source));break;case"loadedSources":i.body.sources.forEach(r=>t(!1,r));break;case"scopes":i.body.scopes.forEach(r=>t(!1,r.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"setBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"disassemble":i.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,i.body?.source);break;default:break}break}}}var Tc=V("IExtHostEditorTabs"),L7=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new W0(A.revive(this.b.input.uri));case 2:return new ip(A.revive(this.b.input.original),A.revive(this.b.input.modified));case 3:return new y9(A.revive(this.b.input.base),A.revive(this.b.input.input1),A.revive(this.b.input.input2),A.revive(this.b.input.result));case 6:return new _0(A.revive(this.b.input.uri),this.b.input.viewType);case 7:return new A9(this.b.input.viewType);case 4:return new V0(A.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new q0(A.revive(this.b.input.original),A.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new x9;case 9:return new E9(A.revive(this.b.input.uri),A.revive(this.b.input.inputBoxUri));case 10:return new S9;case 11:return new k9(this.b.input.diffEditors.map(e=>new ip(A.revive(e.original),A.revive(e.modified))));default:return}}},tH=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new L7(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Bt.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const i=new L7(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===1){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},Cy=class{constructor(t){this.b=new $,this.c=new $,this.e=[],this.a=t.getProxy(Y.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(r=>r.apiObject))},get activeTabGroup(){const r=t.d;return da(t.e.find(n=>n.groupId===r)?.apiObject)},close:async(r,s)=>{const n=Array.isArray(r)?r:[r];return n.length?iH(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),r=new Set(t.map(l=>l.groupId)),s=i2(i,r),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new tH(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=da(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(s=>s.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const r=i.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[r.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[r.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[r.apiObject]}));return}}g(t){for(const i of this.e)for(const r of i.tabs)if(r.apiObject===t)return r}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const r=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");r.push(n.tabId)}return this.a.$closeTab(r,i)}async j(t,i){const r=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");r.push(n.groupId)}return this.a.$closeGroup(r,i)}};Cy=__decorate([__param(0,De)],Cy);function iH(e){return e.tabs!==void 0}var rH=0,R7=new WeakMap,th=V("IExtHostTesting"),$y=class extends te{constructor(t,i,r,s){super(),this.C=i,this.D=r,this.F=s,this.f=this.B(new $),this.g=new Map,this.w=this.B(new $),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(Y.MainThreadTesting),this.m=new lH(this.h),this.j=new oH(this.h,i),r.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Be.root(a))?.collection.tree.get(a)?.actual??UI(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Be.root(c))?.collection.tree.get(c)?.actual??UI({$mid:16,tests:[o]}),message:gc.to(a)}}default:return n}}}),r.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await r.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Be.root(a));if(c)return Be.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Yi)||[],exclude:n?.exclude.map(o).filter(Yi)||[]}})}createTestController(t,i,r,s){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const n=new le,o=n.add(new JU(i,r,this.F));o.root.label=r;const a=new Map,c=new Set,l=this.h,u=()=>{let f=0;s&&(f|=2);const g=d.relatedCodeProvider;return g&&(g?.provideRelatedTests&&(f|=8),g?.provideRelatedCode&&(f|=4)),f},h={items:o.root.children,get label(){return r},set label(f){r=f,o.root.label=f,l.$updateController(i,{label:r})},get refreshHandler(){return s},set refreshHandler(f){s=f,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return d.relatedCodeProvider},set relatedCodeProvider(f){M(t,"testRelatedCode"),d.relatedCodeProvider=f,l.$updateController(i,{capabilities:u()})},createRunProfile:(f,g,v,b,x,E)=>{let I=Is(f);for(;a.has(I);)I++;return new U7(this.h,a,c,this.w.event,i,I,f,g,v,b,x,E)},createTestItem(f,g,v){return new Wu(i,f,g,v)},createTestRun:(f,g,v=!0)=>this.j.createTestRun(t,i,o,f,g,v),invalidateTestResults:f=>{if(f===void 0)this.h.$markTestRetired(void 0);else{const g=f instanceof Array?f:[f];this.h.$markTestRetired(g.map(v=>Be.fromExtHostTestItem(v,i).toString()))}},set resolveHandler(f){o.resolveHandler=f},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},d={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,r,u()),n.add(re(()=>l.$unregisterTestController(i))),this.g.set(i,d),n.add(re(()=>this.g.delete(i))),n.add(o.onDidGenerateDiff(f=>l.$publishDiff(i,f.map(sf.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,i=Je.None){const r=F7(t);if(!r)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(r.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:mc.from(r.kind),targets:[{testIds:t.include?.map(n=>Be.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:r.profileId,controllerId:r.controllerId}],exclude:t.exclude?.map(n=>n.id)},i)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,i,r){const s=this.F.getDocument(A.revive(t));if(!s)return[];const n=Ge.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,r)}catch(l){r.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Be.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const r=this.g.get(Be.root(t));if(!r)return[];const s=r.collection.tree.get(t);return s?(await r.relatedCodeProvider?.provideRelatedCode?.(s.actual,i))?.map(Di.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,r){return(await this.j.getCoverageDetails(t,i,r))?.map(Cu.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[r,s]of Object.entries(t)){const n=this.g.get(r);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&i.set(r,o)}this.w.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const r=Tw.to(i),s=i.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(r.getDetailedCoverage=(n,o=Je.None)=>this.h.$getCoverageDetails(i.id,s,n,o).then(a=>a.map(Cu.to))),R7.set(r,i.id),r}).concat(this.results).sort((i,r)=>r.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const r=this.g.get(Be.fromString(t).controllerId)?.collection;r&&(await r.expand(t,i<0?1/0:i),r.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>sf.deserialize({asCanonicalUri:r=>r},i)))}async $runControllerTests(t,i){return Promise.all(t.map(r=>this.G(r,!1,i)))}async $startContinuousRun(t,i){const r=new tt(i),s=await Promise.all(t.map(n=>this.G(n,!0,r.token)));return!i.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>i.onCancellationRequested(n)),r.dispose(!0),s}async $provideTestFollowups(t,i){const r=this.results.find(o=>R7.get(o)===t.resultId),s=r&&uH(Be.fromString(t.extId),r?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(r,s,t.taskIndex,t.messageIndex,i);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:n.map(o=>{const a=rH++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.z.delete(i)}$executeTestFollowup(t){const i=this.z.get(t);return i?this.D.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const r=i.getTaskIdForRun(t);if(r)return{taskId:r,runId:i.id}}}async G(t,i,r){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(f=>n.tree.get(f)).filter(Yi),u=t.excludeExtIds.map(f=>s.collection.tree.get(f)).filter(Yi).filter(f=>l.some(g=>g.fullId.compare(f.fullId)===2));if(!l.length)return{};const h=new Qf(l.some(f=>f.actual instanceof bb)?void 0:l.map(f=>f.actual),u.map(f=>f.actual),c,i),d=SF(t)&&this.j.prepareForMainThreadTestRun(a,h,j7.fromInternal(t,s.collection),c,r);try{return await c.runHandler(h,r),{}}catch(f){return{error:String(f)}}finally{d&&d.hasRunningTasks&&!r.isCancellationRequested&&await We.toPromise(d.onEnd)}}};$y=__decorate([__param(0,De),__param(1,Ce),__param(2,Nr),__param(3,Yo)],$y);var sH=1e4,O7;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(O7||(O7={}));var nH=class extends te{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,i,r,s,n){super(),this.C=e,this.D=t,this.F=i,this.G=r,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new $),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new tt(n));const o=this.B(new Vr(()=>this.I(),sH));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new $;this.y=a.event,this.B(re(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,i){const[,r]=Be.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(r);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof tp){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,i):this.G?.loadDetailedCoverage?.(a.run,n,i))??[]}createRun(e){const t=this.C.id,i=this.C.controllerId,r=kt(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(gc.from):[gc.from(u)];if(l.uri&&l.range){const d={range:R.from(l.range),uri:l.uri};for(const f of h)f.location=f.location||d}this.D.$appendTestMessagesInRun(t,r,Be.fromExtHostTestItem(l,i).toString(),h)};let o=!1;const a=this.B(new tt(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof tp?l.includesTests:[];if(u.length)for(const f of u)this.L(f);const h=l.uri.toString(),d=new Be([t,r,h]).toString();this.z.set(d,{report:l,extIds:u.map(f=>Be.fromExtHostTestItem(f,i).toString())}),this.D.$appendCoverage(t,r,Cu.fromFile(i,d,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,r,Be.fromExtHostTestItem(l,i).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,r,Be.fromExtHostTestItem(l,i).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,r,Be.fromExtHostTestItem(l,i).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Be.fromExtHostTestItem(l,i).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Be.fromExtHostTestItem(l,i).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,r,Be.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,r,_.fromString(l),u&&Di.from(u),h&&Be.fromExtHostTestItem(h,i).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,r),--this.g||this.J())}};return this.g++,this.h.set(r,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:r,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof Wu))throw new gf(e.id);if(this.j.has(Be.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],i=this.C.colllection.root;for(;;){const r=Rn.from(e);if(t.unshift(r),this.j.has(r.extId)||(this.j.add(r.extId),e===i))break;e=e.parent||i}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},oH=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const r=Be.root(e);return this.g.get(r)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,r,s){return this.k(t,i,r,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,r,s,n){const o=this.f.get(r);if(o)return o.createRun(s);const a=j7.fromPublic(t,i,r,n),c=F7(r);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:c&&{group:mc.from(c.kind),id:c.profileId},exclude:r.exclude?.map(u=>Be.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:r.include?.map(u=>Be.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:r.preserveFocus??!0,persist:n});const l=this.k(r,a,r.profile,e);return We.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,i,r,s){const n=new nH(t,this.h,this.j,i,r,s);return this.f.set(e,n),this.g.set(n.id,n),n}},F7=e=>{if(e.profile){if(!(e.profile instanceof U7))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},j7=class k4{static fromPublic(t,i,r,s){return new k4(t,kt(),s,i)}static fromInternal(t,i){return new k4(t.controllerId,t.runId,!0,i)}constructor(t,i,r,s){this.controllerId=t,this.id=i,this.isPersisted=r,this.colllection=s}},aH=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,Rn.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Be.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(r=>r.revived)},get updated(){return[...t].map(r=>r.revived)},get removed(){return[...i].map(r=>r.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},cH=class extends kF{constructor(){super(...arguments),this.z=new $,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:Rn.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new aH(this.z)}},lH=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:Vh(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new cH({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},ih=(e,t,i,r)=>{i?Object.assign(i,r):t.$updateTestRunConfig(e.controllerId,e.profileId,r)},U7=class extends m9{#e;#t;#i;#r;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,ih(this,this.#e,this.#r,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,ih(this,this.#e,this.#r,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),ih(this,this.#e,this.#r,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,ih(this,this.#e,this.#r,{tag:e?Tr.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,ih(this,this.#e,this.#r,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return We.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Yi))}constructor(e,t,i,r,s,n,o,a,c,l=!1,u=void 0,h=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=i,this.#i=r,t.set(n,this);const d=mc.from(a);l&&i.add(n),this.#r={profileId:n,controllerId:s,tag:u?Tr.namespace(this.controllerId,u.id):null,label:o,group:d,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#r&&(this.#e.$publishTestRunProfile(this.#r),this.#r=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#r=void 0}};function uH(e,t){for(let i=0;i<e.path.length;i++){const r=t.find(s=>s.id===e.path[i]);if(!r)return;if(i===e.path.length-1)return r;t=r.children}}var zK=V("configurationResolverService"),nt;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(nt||(nt={}));var hH=Object.values(nt).filter(e=>typeof e=="string"),Pi=class extends vr{constructor(e,t){super(t),this.variable=e}},B7=class I4{static{this.VARIABLE_LHS="${"}constructor(t){this.a=new Map,this.d=new Set,typeof t=="string"?(this.c=!0,this.b={value:t}):(this.c=!1,this.b=structuredClone(t))}static parse(t){if(t instanceof I4)return t;const i=new I4(t);return i.e(),i.g(i.b),i}e(){const t=this.b,i=je?"windows":Ft?"osx":Et?"linux":void 0;i&&t&&typeof t=="object"&&t.hasOwnProperty(i)&&Object.keys(t[i]).forEach(r=>t[r]=t[i][r]),delete t.windows,delete t.osx,delete t.linux}f(t,i){if(t[i]!=="$"||t[i+1]!=="{")return;let r=i+2,s=1;for(;r<t.length;){if(t[r]==="{")s++;else if(t[r]==="}"&&(s--,s===0))break;r++}if(s!==0)return;const n=t.slice(i,r+1),o=t.substring(i+2,r),a=o.indexOf(":");return a===-1?{replacement:{id:n,name:o,inner:o},end:r}:{replacement:{id:n,inner:o,name:o.slice(0,a),arg:o.slice(a+1)},end:r}}g(t){if(!(typeof t!="object"||t===null)){if(Array.isArray(t)){for(let i=0;i<t.length;i++){const r=t[i];typeof r=="string"?this.h(t,i,r):this.g(r)}return}for(const[i,r]of Object.entries(t))this.h(t,i,i,!0),typeof r=="string"?this.h(t,i,r):this.g(r)}}h(t,i,r,s,n){let o=0;for(;o<r.length;){const a=r.indexOf("${",o);if(a===-1)break;const c=this.f(r,a);if(c){if(o=c.end+1,n?.includes(c.replacement.id))continue;const l=this.a.get(c.replacement.id)||{locations:[],replacement:c.replacement},u={object:t,propertyName:i,replaceKeyName:s};l.locations.push(u),this.a.set(c.replacement.id,l),l.resolved?this.j(c.replacement,u,l.resolved,n):this.d.forEach(h=>h(c.replacement))}else o=a+2}}*unresolved(){const t=new Map,i=r=>{t.set(r.id,r)};for(const r of this.a.values())r.resolved===void 0&&t.set(r.replacement.id,r.replacement);for(this.d.add(i);;){const r=li.first(t);if(!r)break;const[s,n]=r;yield n,t.delete(s)}this.d.delete(i)}resolved(){return li.map(li.filter(this.a.values(),t=>!!t.resolved),t=>[t.replacement,t.resolved])}resolve(t,i){typeof i!="object"&&(i={value:String(i)});const r=this.a.get(t.id);if(r&&(r.resolved=i,i.value!==void 0))for(const s of r.locations||li.empty())this.j(t,s,i)}j(t,{replaceKeyName:i,propertyName:r,object:s},n,o=[]){if(n.value!==void 0){if(o.push(t.id),i&&typeof r=="string"){const a=s[r],c=r.replaceAll(t.id,n.value);delete s[r],s[c]=a,this.m(s,r,c),this.h(s,c,n.value,!0,o)}else s[r]=s[r].replaceAll(t.id,n.value),this.h(s,r,n.value,!1,o);o.pop()}}m(t,i,r){for(const s of this.a.values())for(const n of s.locations)n.object===t&&n.propertyName===i&&(n.propertyName=r)}toObject(){return this.c?this.b.value:this.b}},dH=class{constructor(e,t,i,r){this.h=new Map,this.resolvableVariables=new Set(hH),this.a=e,this.b=t,this.g=i,r&&(this.c=r.then(s=>this.i(s)))}i(e){if(je){const t=Object.create(null);return Object.keys(e).forEach(i=>{t[i.toLowerCase()]=e[i]}),t}return e}async resolveWithEnvironment(e,t,i){const r=B7.parse(i);for(const s of r.unresolved()){const n=await this.l(s,t?.uri,e);n!==void 0&&r.resolve(s,String(n))}return r.toObject()}async resolveAsync(e,t){const i=B7.parse(t);for(const r of i.unresolved()){const s=await this.l(r,e?.uri);s!==void 0&&i.resolve(r,String(s))}return i.toObject()}resolveWithInteractionReplace(e,t){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this.h.has(e))throw new Error("Variable "+e+" is contributed twice.");this.resolvableVariables.add(e),this.h.set(e,t)}j(e){return this.b?this.b.getUriLabel(e,{noPrefix:!0}):e.fsPath}async l(e,t,i,r){const s={env:i!==void 0?this.i(i):await this.c,userHome:i!==void 0?void 0:await this.g},{name:n,arg:o}=e,a=u=>{const h=this.a.getFilePath();if(h)return qu(h);throw new Pi(u,p(14091,null,e.id))},c=u=>{const h=a(u);if(this.a.getWorkspaceFolderPathForFile){const d=this.a.getWorkspaceFolderPathForFile();if(d)return qu(d)}throw new Pi(u,p(14092,null,e.id,dt(h)))},l=u=>{if(o){const h=this.a.getFolderUri(o);if(h)return h;throw new Pi(u,p(14093,null,u,o))}if(t)return t;throw this.a.getWorkspaceFolderCount()>1?new Pi(u,p(14094,null,u)):new Pi(u,p(14095,null,u))};switch(n){case"env":if(o){if(s.env){const u=s.env[je?o.toLowerCase():o];if(Fe(u))return u}return""}throw new Pi(nt.Env,p(14096,null,e.id));case"config":if(o){const u=this.a.getConfigurationValue(t,o);if(Dt(u))throw new Pi(nt.Config,p(14097,null,e.id,o));if(xt(u))throw new Pi(nt.Config,p(14098,null,e.id,o));return u}throw new Pi(nt.Config,p(14099,null,e.id));case"command":return this.m(nt.Command,e.id,o,r,"command");case"input":return this.m(nt.Input,e.id,o,r,"input");case"extensionInstallFolder":if(o){const u=await this.a.getExtension(o);if(!u)throw new Pi(nt.ExtensionInstallFolder,p(14100,null,e.id,o));return this.j(u.extensionLocation)}throw new Pi(nt.ExtensionInstallFolder,p(14101,null,e.id));default:switch(n){case"workspaceRoot":case"workspaceFolder":{const u=l(nt.WorkspaceFolder);return u?qu(this.j(u)):void 0}case"cwd":{if(!t&&!o)return eo();const u=l(nt.Cwd);return u?qu(this.j(u)):void 0}case"workspaceRootFolderName":case"workspaceFolderBasename":{const u=l(nt.WorkspaceFolderBasename);return u?qu(dt(this.j(u))):void 0}case"userHome":if(s.userHome)return s.userHome;throw new Pi(nt.UserHome,p(14102,null,e.id));case"lineNumber":{const u=this.a.getLineNumber();if(u)return u;throw new Pi(nt.LineNumber,p(14103,null,e.id))}case"columnNumber":{const u=this.a.getColumnNumber();if(u)return u;throw new Error(p(14104,null,e.id))}case"selectedText":{const u=this.a.getSelectedText();if(u)return u;throw new Pi(nt.SelectedText,p(14105,null,e.id))}case"file":return a(nt.File);case"fileWorkspaceFolder":return c(nt.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return dt(c(nt.FileWorkspaceFolderBasename));case"relativeFile":return t||o?ma(this.j(l(nt.RelativeFile)),a(nt.RelativeFile)):a(nt.RelativeFile);case"relativeFileDirname":{const u=Ai(a(nt.RelativeFileDirname));if(t||o){const h=ma(this.j(l(nt.RelativeFileDirname)),u);return h.length===0?".":h}return u}case"fileDirname":return Ai(a(nt.FileDirname));case"fileExtname":return id(a(nt.FileExtname));case"fileBasename":return dt(a(nt.FileBasename));case"fileBasenameNoExtension":{const u=dt(a(nt.FileBasenameNoExtension));return u.slice(0,u.length-id(u).length)}case"fileDirnameBasename":return dt(Ai(a(nt.FileDirnameBasename)));case"execPath":{const u=this.a.getExecPath();return u||e.id}case"execInstallFolder":{const u=this.a.getAppRoot();return u||e.id}case"pathSeparator":case"/":return vt;default:try{return this.m(nt.Unknown,e.id,o,r,void 0)}catch{return e.id}}}}m(e,t,i,r,s){if(i&&r){const n=s===void 0?r[i]:r[s+":"+i];if(typeof n=="string")return n;throw new Pi(e,p(14106,null,t))}return t}},Mc=V("IExtHostVariableResolverProvider"),fH=class extends dH{constructor(e,t,i,r,s,n,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=r.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof ip||l.input instanceof q0)return l.input.modified;if(l.input instanceof W0||l.input instanceof V0||l.input instanceof _0)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>eo(),getExecPath:()=>cn.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return ys(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return ys(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(cn))}},Lg=class extends te{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.g=r,this.h=s,this.j=n,this.a=new Zt(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new fH(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};Lg=__decorate([__param(0,Ws),__param(1,Mr),__param(2,Yo),__param(3,hr),__param(4,Tc)],Lg);var Dy=V("IExtHostDebugService"),Rg=class extends te{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,r,s,n,o,a,c){super(),this.Z=i,this.$=r,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new $),this.z=this.B(new $),this.C=this.B(new $),this.F=this.B(new $),this.u=t.getProxy(Y.MainThreadDebugService),this.I=this.B(new $),this.L=this.B(new $),this.G=new gH(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(Y.MainThreadTelemetry)}async $getVisualizerTreeItem(t,i){const r=this.hb(i);if(!r)return;const s=await this.Q.get(t)?.getTreeItem?.(r);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,i,r){const s=Ve.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(n,r),this.u.$registerDebugVisualizerTree(n,!!r.editItem),re(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const r=this.S.get(i)?.item;return r?(await this.Q.get(t)?.getChildren?.(r))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,i){const r=this.S.get(t);if(!r)return;const s=await this.Q.get(r.provider)?.editItem?.(r.item,i);return this.fb(r.provider,s||r.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const r=[i.children];for(const s of r)if(s)for(const n of s)r.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,i){let r=this.R.get(i);return r||(r=this.O++,this.R.set(i,r),this.S.set(r,{provider:t,item:i})),_w.from(i,r)}asDebugSourceUri(t,i){const r=t;if(typeof r.sourceReference=="number"&&r.sourceReference>0){let s=`debug:${encodeURIComponent(r.path||"")}`,n="?";return i&&(s+=`${n}session=${encodeURIComponent(i.id)}`,n="&"),s+=`${n}ref=${r.sourceReference}`,A.parse(s)}else{if(r.path)return A.file(r.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const i=[];for(const r of t.getAllExtensionDescriptions())if(r.contributes){const s=r.contributes.debuggers;if(s&&s.length>0)for(const n of s)Yz(n)&&i.push(n.type)}this.u.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=r;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,i)||s,r.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const r=i.v.visualization;r&&"command"in r&&this.db.executeCommand(r.command,...r.arguments||[])}hb(t){const i=this.w.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,r,s){const n=this.hb(r),o=this.zb(t,i),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,r){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const s=Ve.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(n,r),this.u.$registerDebugVisualizer(s,i),re(()=>{this.u.$unregisterDebugVisualizer(s,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(i,[],[]);const r=[],s=new Map;for(const n of i)if(n instanceof To){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),r.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Mo&&r.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(r)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.wb([],i,[]);const r=i.filter(o=>o instanceof To).map(o=>o.id),s=i.filter(o=>o instanceof Mo).map(o=>o.id),n=i.filter(o=>o instanceof Ff).map(o=>o.id);return this.u.$unregisterBreakpoints(r,s,n)}startDebugging(t,i,r){const s=r.testRun&&this.eb.getMetadataForRun(r.testRun);return this.u.$startDebugging(t?t.uri:void 0,i,{parentSessionID:r.parentSession?r.parentSession.id:void 0,lifecycleManagedByParent:r.lifecycleManagedByParent,repl:r.consoleMode===Wf.MergeWithParent?"mergeWithParent":"separate",noDebug:r.noDebug,compact:r.compact,suppressSaveBeforeStart:r.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:r.suppressDebugStatusbar??r.debugUI?.simple,suppressDebugToolbar:r.suppressDebugToolbar??r.debugUI?.simple,suppressDebugView:r.suppressDebugView??r.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,r){if(!i)return new Me(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:i}),this.u.$registerDebugConfigurationProvider(t,r,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,s),new Me(()=>{this.g=this.g.filter(n=>n.provider!==i),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,i,r){if(!r)return new Me(()=>{});if(!this.sb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.pb(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:i,handle:s,factory:r}),this.u.$registerDebugAdapterDescriptorFactory(i,s),new Me(()=>{this.j=this.j.filter(n=>n.factory!==r),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Me(()=>{});const r=this.m++;return this.n.push({type:t,handle:r,factory:i}),new Me(()=>{this.n=this.n.filter(s=>s.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let r;const s=await this.yb(t);return s&&(r={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAsync(r,i)}ib(t,i){if(t instanceof iu)return new vH(t.implementation)}jb(){}async $startDASession(t,i){const r=this,s=await this.xb(i);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const d=await this.U.sign(u.arguments.value);h.body={signature:d},a.sendResponse(h)}else throw new Error("no signer")}catch(d){h.success=!1,h.message=d.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=eH(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:s.type}),u}r.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,i){i=Kz(i,!1);const r=this.N.get(t);r&&r.onWillReceiveMessage&&r.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const r=this.M.get(t);return this.M.delete(t),r?r.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],r=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Mo(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new Ff(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=A.revive(n.uri);a=new To(new tr(c,new Ne(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}bj(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),r.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Mo&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof To&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new tr(A.revive(n.uri),new Ne(n.line,n.character))}s.push(o)}}}this.wb(i,r,s)}async $acceptStackFrameFocus(t){let i;if(t){const r=await this.xb(t.sessionId);t.kind==="thread"?i=new h9(r.api,t.threadId):i=new u9(r.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,r){return si(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(i);return s.provideDebugConfigurations(n,r)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,i,r,s){return si(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(i);return n.resolveDebugConfiguration(o,r,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,r,s){return si(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(i);return n.resolveDebugConfigurationWithSubstitutedVariables(o,r,s)})}async $provideDebugAdapter(t,i){const r=this.qb(t);if(!r)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(i);return this.ub(r,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const i=await this.xb(t);this.y.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.xb(t);i&&(this.z.fire(i.api),this.w.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.xb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const s={session:(await this.xb(t)).api,event:i.event,body:i.body};this.F.fire(s)}kb(t){if(t instanceof Ya)return this.lb(t);if(t instanceof Qa)return this.mb(t);if(t instanceof tu)return this.nb(t);if(t instanceof iu)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const i=this.j.filter(r=>r.type===t);if(i.length>0)return i[0].factory}qb(t){const i=this.j.filter(r=>r.handle===t);if(i.length>0)return i[0].factory}rb(t){const i=this.g.filter(r=>r.handle===t);if(i.length>0)return i[0].provider}sb(t,i){if(t.contributes){const r=t.contributes.debuggers;if(r&&r.length>0){for(const s of r)if(s.label&&s.type&&s.type===i)return!0}}return!1}tb(t){const r=t.configuration.type,s=this.n.filter(n=>n.type===r||n.type==="*").map(n=>si(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=yt(n);if(o.length>0)return new mH(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,i){const r=i.configuration.debugServer;if(typeof r=="number")return Promise.resolve(new Qa(r));if(t){const n=await this.$.getExtensionRegistry();return si(()=>t.createDebugAdapterDescriptor(i.api,this.vb(i,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(i,s))}vb(t,i){}wb(t,i,r){(t.length>0||i.length>0||r.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:r}))}async xb(t){if(t)if(typeof t=="string"){const i=this.w.get(t);if(i)return i}else{let i=this.w.get(t.id);if(!i){const r=await this.yb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;i=new pH(this.u,t.id,t.type,t.name,r,t.configuration,s?.api),this.w.set(i.id,i),this.u.$sessionCached(i.id)}return i}throw new Error("cannot find session")}yb(t){if(t){const i=A.revive(t);return this.Z.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}zb(t,i){return`${t}\0${i}`}Ab(t,i){if(i){if("title"in i&&"command"in i)return{type:0};if("treeId"in i)return{type:1,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const i=this.Cb(t);let r,s;return"id"in i?s=jt.asClassName(i):r=i,{iconPath:r,iconClass:s}}Cb(t){if(t instanceof hi)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,r=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?A.file(i):i,light:typeof r=="string"?A.file(r):r}}};Rg=__decorate([__param(0,De),__param(1,Mr),__param(2,Ws),__param(3,hr),__param(4,Tc),__param(5,Mc),__param(6,Nr),__param(7,th)],Rg);var pH=class{constructor(e,t,i,r,s,n,o){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},gH=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},mH=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},vH=class extends P7{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Py=class extends Rg{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c)}};Py=__decorate([__param(0,De),__param(1,Mr),__param(2,Ws),__param(3,hr),__param(4,Tc),__param(5,Mc),__param(6,Nr),__param(7,th)],Py);function wH(e){return"uri"in e&&"ranges"in e&&"preview"in e}function bH(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var z7=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const s=bH(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,i)))})().then(s=>yt(s).flat())}};function yH(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:H7(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function H7(e){return{matchLines:e?.matchLines??Qw.matchLines,charsPerLine:e?.charsPerLine??Qw.charsPerLine}}function AH(e){if(wH(e)){const t=nr(e.ranges).map((i,r)=>{const n=nr(e.preview.matches)[r];return{sourceRange:i,previewRange:n}});return new Fs(e.uri,t,e.preview.text)}else return new Yp(e.uri,e.text,e.lineNumber)}var xH=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,r){const s=a=>{EH(a)&&i.report(AH(a))};return(async()=>yt(await Promise.all(yH(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:yt(nr(a.message))}))}};function EH(e){if(SH(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function SH(e){return!!e.preview}var W7=class extends wn{constructor(e,t,i=()=>!1){const r=new nS(i,()=>!1);super(r);const s=new Gt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.m(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const i=this.m(e);return t.get(i)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(i=>e(i)))}m(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},kH=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&kr(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&kr(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,r)=>{const s=n=>{this.g++,e(n)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=dt(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{i({limitHit:this.f,stats:n||void 0})},n=>{r(new Error(Zr(n)))})})}async q(e,t){const i=new tt,r=e.map(l=>this.r(l)),s=this.o instanceof z7?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:r,maxResults:this.l.maxResults??Xp,session:s},o=l=>{const u=new vI(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new W7(e,o);let c;try{this.j.add(i),c=Oi.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),u=c.elapsed(),h=Oi.create();return this.h&&!this.f||(l&&l.forEach(d=>{const f=a.findQueryFragmentAwareSubstr(d),g=Ue.relative(f.folder.path,d.path);if(f.noSiblingsClauses){const v=dt(d.path);this.w(t,{base:f.folder,relativePath:g,basename:v});return}this.u(f.tree,f.folder,g,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(d=>{this.v(d.tree,d.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=Ac(this.l.includePattern,e.includePattern);let i=e.excludePattern?.map(s=>({folder:s.folder,patterns:Ac(this.l.excludePattern,s.pattern)}));i?.length||(i=[{folder:void 0,patterns:Ac(this.l.excludePattern,void 0)}]);const r=bI(i);return{folder:e.folder,excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,r){if(i===this.a){const n=dt(this.a);this.w(r,{base:t,relativePath:this.a,basename:n})}function s(n){const o=dt(n),a=Ai(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(i)}v({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.a;function o(a){const c=Yw(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:d,basename:f}=h;if(i.matchesExcludesSync(d,f,n!==f?c:void 0))continue;const g=t[d];if(g)o(g);else{if(d===n)continue;s.w(r,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},IH=class{constructor(){this.a=new Object,this.tokenSource=new tt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},CH=class tP{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,r,s){const n=this.c(t.cacheKey),o=new kH(t,i,n);let a=0;const c=l=>{a+=l.length,r(l.map(u=>this.d(u)))};return this.f(o,tP.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new IH),this.b.get(t)}d(t){return t.relativePath?{resource:wt(t.base,t.relativePath)}:{resource:t.base}}f(t,i,r,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(r(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&r(a),n.dispose(),c),c=>(a.length&&r(a),n.dispose(),Promise.reject(c)))}},Ty=class{constructor(e,t,i){this.f=e,this.g=t,this.h=i,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t,i){const r=this.j.folderQueries||[],s=new tt(t);return new Promise((n,o)=>{this.b=new DH(e);let a=!1;const c=(l,u)=>{if(!(l instanceof qw)&&!a&&!this.c){const h=this.l(l);l instanceof Fs&&typeof this.j.maxResults=="number"&&this.d+h>this.j.maxResults&&(this.c=!0,a=!0,s.cancel(),l=this.m(l,this.j.maxResults-this.d));const d=this.l(l);this.d+=d;const f=l instanceof Fs;(d>0||!f)&&this.b.add(l,u)}};this.n(r,c,s.token,i).then(l=>{s.dispose(),this.b.flush(),n({limitHit:this.c||l?.limitHit,messages:this.k(l),stats:{type:this.h}})},l=>{s.dispose();const u=Zr(l);o(new Error(u))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Fs?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Fs(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,i,r){const s=new W7(e,(u,h)=>({queryTester:new vI(this.j,u),folder:u.folder,folderIdx:h}),()=>!0),n=[],o={report:u=>{if(u instanceof qw)r?.(u);else{if(u.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const h=s.findQueryFragmentAwareSubstr(u.uri),d=h.folder.scheme===q.file?Qj(()=>this.g.readdir(hd(u.uri))):void 0,f=X5(h.folder,u.uri);if(f){const g=h.queryTester.includedInQuery(f,dt(f),d);dn(g)?n.push(g.then(v=>{v&&t(u,h.folderIdx)})):g&&t(u,h.folderIdx)}}}},c={folderOptions:e.map(u=>this.o(u)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??Xp,previewOptions:this.j.previewOptions??Qw,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(c.usePCRE2=this.j.usePCRE2);let l;return this.f.query.type===3?l=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,c,o,i):l=await this.f.provider.provideTextSearchResults($H(this.f.query.contentPattern),c,o,i),n.length&&await Promise.all(n),l}o(e){const t=Ac(this.j.includePattern,e.includePattern);let i=e.excludePattern?.map(n=>({folder:n.folder,patterns:Ac(this.j.excludePattern,n.pattern)}));(!i||i.length===0)&&(i=[{folder:void 0,patterns:Ac(this.j.excludePattern,void 0)}]);const r=bI(i);return{folder:A.from(e.folder),excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function $H(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var DH=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new TH(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!Q5(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(PH(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function PH(e){return e instanceof Fs?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var TH=class C4{static{this.b=4e3}static{this.c=50}constructor(t,i){this.j=t,this.k=i,this.d=0,this.f=[],this.g=0}addItem(t,i){t&&this.l(t,i)}addItems(t,i){t&&this.m(t,i)}l(t,i){this.f.push(t),this.g+=i,this.n()}m(t,i){this.f=this.f.concat(t),this.g+=i,this.n()}n(){this.d<C4.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},C4.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=void 0))}},My=V("IExtHostSearch"),Og=class{constructor(t,i,r){this.o=t,this.q=i,this.s=r,this.c=this.o.getProxy(Y.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new CH}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,new xH(i)),this.c.$registerTextSearchProvider(r,this.t(t)),re(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerTextSearchProvider(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,i),this.c.$registerTextSearchProvider(r,this.t(t)),re(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProvider(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const r=this.e++;return this.i.set(r,i),this.c.$registerAITextSearchProvider(r,this.t(t)),re(()=>{this.j.delete(t),this.i.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProviderOld(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,new z7(i)),this.c.$registerFileSearchProvider(r,this.t(t)),re(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProvider(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,i),this.c.$registerFileSearchProvider(r,this.t(t)),re(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=Fg(r),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,i,r){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,r,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=Fg(r);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s)}$provideAITextSearchResults(t,i,r,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=Fg(r);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s,c=>this.c.$handleKeywordResult(t,i,c))}$enableExtensionHostSearch(){}async $getAIName(t){const i=this.i.get(t);if(!(!i||!i.provideAITextSearchResults))return i.name??"AI"}v(t,i){return new Ty({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"textSearchProvider")}w(t,i){return new Ty({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"aiTextSearchProvider")}};Og=__decorate([__param(0,De),__param(1,Sl),__param(2,Ce)],Og);function Fg(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(MH),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>A.revive(t))}}function MH(e){return Jt(e)}var jg=class extends uR{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(r=>Jt(r))),this.c=t.getProxy(Y.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(A.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.c.$setVisibility(t,i)}t(t,i,r){return new NH(this.c,t,i,r)}};jg=__decorate([__param(0,De),__param(1,At)],jg);var NH=class extends lv{constructor(e,t,i,r){super(r?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(i),this.s.$createLogger(t,r).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const i=[[e,t]];this.n?this.w(i):this.r.push(...i)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},Ny=V("IExtHostTerminalShellIntegration"),Ly=class extends te{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new $,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new $,this.onDidStartTerminalShellExecution=this.f.event,this.g=new $,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(Y.MainThreadTerminalShellIntegration),this.B(re(()=>{for(const[r,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const i=this.h.getTerminalById(t);if(!i)return;const r=i.value;let s=this.b.get(t);s||(s=new LH(i.value,this.f),this.b.set(t,s),s.store.add(i.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),i.shellIntegration=s.value),this.c.fire({terminal:r,shellIntegration:s.value})}$shellExecutionStart(t,i,r,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.startShellExecution(o,this.j(n))}$shellExecutionEnd(t,i,r,s,n){const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$shellEnvChange(t,i,r,s){this.b.get(t)?.setEnv(i,r,s)}$cwdChange(t,i){this.b.get(t)?.setCwd(this.j(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}j(t){return t?A.file(t):void 0}};Ly=__decorate([__param(0,De),__param(1,Bs)],Ly);var LH=class extends te{get currentExecution(){return this.f}constructor(e,t){super(),this.s=e,this.t=t,this.a=[],this.store=this.B(new le),this.j=this.B(new $),this.onDidRequestChangeShellIntegration=this.j.event,this.m=this.B(new $),this.onDidRequestShellExecution=this.m.event,this.n=this.B(new $),this.onDidRequestEndExecution=this.n.event,this.r=this.B(new $),this.onDidRequestNewExecution=this.r.event;const i=this;this.value={get cwd(){return i.h},get env(){if(i.g)return Object.freeze({isTrusted:i.g.isTrusted,value:Object.freeze({...i.g.value})})},executeCommand(r,s){let n=r;if(s)for(const c of s)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;i.m.fire(n);const o={value:n,confidence:Xl.High,isTrusted:!0};return i.requestNewShellExecution(o,i.h).value}}}requestNewShellExecution(e,t){const i=new _7(e,t??this.h);return Ug(e.value).length>1&&(this.c={isMultiLine:!0,unresolvedCommandLines:Ug(e.value)}),this.a.push(i),this.r.fire(e.value),i}startShellExecution(e,t){if(this.b&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.b.value,exitCode:void 0}),this.b=void 0),this.f){if(this.c?.isMultiLine&&this.c.unresolvedCommandLines){const r=V7(this.c.unresolvedCommandLines,e);if(r){this.c.unresolvedCommandLines=r.unresolvedCommandLines;return}}this.f.endExecution(void 0),this.f.flush(),this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value,exitCode:void 0})}let i;if(e.confidence===Xl.High)for(const[r,s]of this.a.entries())if(s.value.commandLine.value===e.value){i=s,this.c={isMultiLine:!1,unresolvedCommandLines:void 0},i=s,this.a.splice(r,1);break}else{const n=V7(Ug(s.value.commandLine.value),e);if(n){this.c={isMultiLine:!0,unresolvedCommandLines:n.unresolvedCommandLines},i=s,this.a.splice(r,1);break}}else i=this.a.shift();i||(i=new _7(e,t??this.h)),this.f=i,this.t.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value})}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){if(!(this.c?.isMultiLine&&this.c.unresolvedCommandLines&&this.c.unresolvedCommandLines.length>0)&&this.f){const i=this.c?.isMultiLine?this.f.value.commandLine:e;this.f.endExecution(i);const r=this.f;this.b=r,this.f=void 0,r.flush().then(()=>{this.b===r&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:r.value,exitCode:t}),this.b=void 0)})}}setEnv(e,t,i){const r={};for(let s=0;s<e.length;s++)r[e[s]]=t[s];this.g={value:r,isTrusted:i},this.u()}setCwd(e){let t=!1;A.isUri(this.h)?t=!A.isUri(e)||this.h.toString()!==e.toString():this.h!==e&&(t=!0),t&&(this.h=e,this.u())}u(){this.j.fire({terminal:this.s,shellIntegration:this.value})}},_7=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return hl.EMPTY;this.a=new RH}return this.a.createIterable()}emitData(e){this.b||this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.b=!0}async flush(){this.a&&(await this.a.flush(),this.a.dispose(),this.a=void 0)}},RH=class extends te{constructor(){super(...arguments),this.b=[],this.c=[]}createIterable(){this.a||(this.a=new cr);const e=this.a,t=new hl(async i=>{this.c.push(i),await e.wait()});return this.b.push(t),t}emitData(e){for(const t of this.c)t.emitOne(e)}endExecution(){this.a?.open()}async flush(){await Promise.all(this.b.map(e=>e.toPromise()))}};function Ug(e){return e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)}function V7(e,t){if(e.length===0)return!1;const i=[...e],r=Ug(t.value);if(i&&i.length>0){for(;i.length>0&&i[0]===r[0];)i.shift(),r.shift();if(r.length===0)return{unresolvedCommandLines:i}}return!1}var q7;(function(e){e[e.CR=13]="CR",e[e.LF=10]="LF",e[e.COLON=58]="COLON",e[e.SPACE=32]="SPACE"})(q7||(q7={}));var Ry=class{constructor(e){this.a="",this.b="",this.f=[],this.g=!1,this.h=e,this.i=new TextDecoder("utf-8")}getLastEventId(){return this.d}getReconnectionTime(){return this.e}feed(e){if(e.length===0)return;let t=0;for(this.g&&e[0]===10&&t++,this.g=!1;t<e.length;){const i=e.indexOf(13,t),r=e.indexOf(10,t),s=i===-1?r:r===-1?i:Math.min(i,r);if(s===-1)break;let n="";for(const o of this.f)n+=this.i.decode(o,{stream:!0});n+=this.i.decode(e.subarray(t,s)),this.j(n),this.f.length=0,t=s+(e[s]===13&&e[s+1]===10?2:1)}t<e.length?this.f.push(e.subarray(t)):this.g=e[e.length-1]===13}j(e){if(!e.length){this.l();return}if(e.startsWith(":"))return;let t,i;const r=e.indexOf(":");r===-1?(t=e,i=""):(t=e.substring(0,r),i=e.substring(r+1),i.startsWith(" ")&&(i=i.substring(1))),this.k(t,i)}k(e,t){switch(e){case"event":this.b=t;break;case"data":this.a+=t,this.a+=`
`;break;case"id":t.includes("\0")?this.c=void 0:this.c=this.d=t;break;case"retry":/^\d+$/.test(t)&&(this.e=parseInt(t,10));break}}l(){if(this.a===""){this.a="",this.b="";return}this.a.endsWith(`
`)&&(this.a=this.a.substring(0,this.a.length-1));const e={type:this.b||"message",data:this.a};this.c!==void 0&&(e.id=this.c),this.e!==void 0&&(e.retry=this.e),this.h(e),this.reset()}reset(){this.a="",this.b="",this.c=void 0}},Bg=V("IExtHostMpcService"),zg=class extends te{constructor(t,i,r){super(),this.h=i,this.j=r,this.c=new Set,this.f=this.B(new ga),this.g=new Map,this.b=t.getProxy(Y.MainThreadMcp)}$startMcp(t,i){this.n(t,yu.fromSerialized(i))}n(t,i){if(i.type===2){this.f.set(t,new jH(t,i,this.b,this.h));return}throw new Error("not implemented")}$stopMcp(t){this.f.has(t)&&(this.f.deleteAndDispose(t),this.b.$onDidChangeState(t,{state:0}))}$sendMessage(t,i){this.f.get(t)?.send(i)}async $waitForInitialCollectionProviders(){await Promise.all(this.c)}async $resolveMcpLaunch(t,i){const r=this.g.get(t);if(!r)return;const s=r.servers.find(o=>o.label===i);if(!s)return;if(!r.provider.resolveMcpServerDefinition)return Ou.from(s);const n=await r.provider.resolveMcpServerDefinition(s,Je.None);return n?Ou.from(n):void 0}registerMcpConfigurationProvider(t,i,r){const s=new le,n=t.contributes?.mcpServerDefinitionProviders?.find(l=>l.id===i);if(!n)throw new Error(`MCP configuration providers must be registered in the contributes.mcpServerDefinitionProviders array within your package.json, but "${i}" was not`);const o={id:Bj(t.identifier,i),isTrustedByDefault:!0,label:n?.label??t.displayName??t.name,scope:1,canResolveLaunch:typeof r.resolveMcpServerDefinition=="function",extensionId:t.identifier.value,configTarget:this.j.remote.isRemote?4:2},a=async()=>{const l=await r.provideMcpServerDefinitions(Je.None);this.g.set(o.id,{servers:l??[],provider:r});const u=[];for(const h of l??[]){let d=Ve.toKey(t.identifier)+"/"+h.label;if(u.some(f=>f.id===d)){let f=2;for(;u.some(g=>g.id===d+f);)f++;d=d+f}u.push({id:d,label:h.label,cacheNonce:h.version,launch:Ou.from(h)})}this.b.$upsertMcpCollection(o,u)};s.add(re(()=>{this.g.delete(o.id),this.b.$deleteMcpCollection(o.id)})),r.onDidChangeMcpServerDefinitions&&s.add(r.onDidChangeMcpServerDefinitions(a)),r.onDidChangeServerDefinitions&&s.add(r.onDidChangeServerDefinitions(a)),r.onDidChange&&s.add(r.onDidChange(a));const c=new Promise(l=>{setTimeout(()=>a().finally(()=>{this.c.delete(c),l()}),0)});return this.c.add(c),s}};zg=__decorate([__param(0,De),__param(1,Ce),__param(2,At)],zg);var G7;(function(e){e[e.Unknown=0]="Unknown",e[e.Http=1]="Http",e[e.SSE=2]="SSE"})(G7||(G7={}));var OH=5,FH=[301,302,303,307,308],jH=class extends te{constructor(e,t,i,r){super(),this.j=e,this.n=t,this.r=i,this.t=r,this.a=new fM,this.b=new Xi,this.c={value:0},this.f=new tt,this.g=new AbortController,this.B(re(()=>{this.g.abort(),this.f.dispose(!0)})),this.r.$onDidChangeState(this.j,{state:2})}async send(e){try{await this.a.queue(()=>this.c.value===2?this.H(this.c.endpoint,e):this.u(e,this.c.value===1?this.c.sessionId:void 0))}catch(t){const i=`Error sending message to ${this.n.uri}: ${String(t)}`;this.r.$onDidChangeState(this.j,{state:3,message:i})}}async u(e,t){const i=new TextEncoder().encode(e),r={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length),Accept:"text/event-stream, application/json"};t&&(r["Mcp-Session-Id"]=t),await this.J(r);const s=await this.N(this.n.uri.toString(!0),{method:"POST",headers:r,body:i},r),n=this.c.value===0,o=s.headers.get("Mcp-Session-Id");if(o&&(this.c={value:1,sessionId:o}),this.c.value===0&&s.status>=400&&s.status<500&&s.status!==401&&s.status!==403){this.L(ie.Info,`${s.status} status sending message to ${this.n.uri}, will attempt to fall back to legacy SSE`),this.w(e);return}if(s.status>=300){const a=this.c.value===1&&!!this.c.sessionId&&(s.status===400||s.status===404);this.r.$onDidChangeState(this.j,{state:3,message:`${s.status} status sending message to ${this.n.uri}: ${await this.M(s)}`+(a?"; will retry with new session ID":""),shouldRetry:a});return}this.c.value===0&&(this.c={value:1,sessionId:void 0}),n&&this.F(),this.D(s,e)}async w(e){const t=await this.G();t&&(this.c={value:2,endpoint:t},await this.H(t,e))}async y(e){let t;if(e.headers.has("WWW-Authenticate")){const c=e.headers.get("WWW-Authenticate"),{scheme:l,params:u}=hB(c);l==="Bearer"&&u.resource_metadata&&(t=u.resource_metadata)}let i,r,s;if(t){const c=await this.z(t);i=c.authorization_servers?.[0],r=c.scopes_supported,s=c}const n=new URL(e.url).origin;let o={};i||(i=n,o={...Object.fromEntries(this.n.headers)});try{const c=await this.C(i,o),l=uB(c);this.h={authorizationServer:A.parse(i),serverMetadata:l,resourceMetadata:s};return}catch(c){this.L(ie.Warning,`Error populating auth metadata: ${String(c)}`)}const a=lB(new URL(n));a.scopes_supported=r??a.scopes_supported??[],this.h={authorizationServer:A.parse(i),serverMetadata:a,resourceMetadata:s}}async z(e){const t=new URL(e),i=new URL(this.n.uri.toString(!0));let r={};t.origin===i.origin&&(r={...Object.fromEntries(this.n.headers)});const s=await this.O(e,{method:"GET",headers:{...r,Accept:"application/json","MCP-Protocol-Version":bu.LATEST_PROTOCOL_VERSION}});if(s.status!==200)throw new Error(`Failed to fetch resource metadata: ${s.status} ${await this.M(s)}`);const n=await s.json();if(sB(n)){const o=dB(e);if(n.resource!==o)throw new Error(`Protected Resource Metadata resource "${n.resource}" does not match MCP server resolved resource "${o}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);return n}else throw new Error(`Invalid resource metadata: ${JSON.stringify(n)}`)}async C(e,t){const i=new URL(e),r=i.pathname==="/"?"":i.pathname,s=new URL(iB,e).toString()+r;let n=await this.O(s,{method:"GET",headers:{...t,Accept:"application/json","MCP-Protocol-Version":bu.LATEST_PROTOCOL_VERSION}});if(n.status!==200&&(n=await this.O(A.joinPath(A.parse(e),".well-known","openid-configuration").toString(!0),{method:"GET",headers:{...t,Accept:"application/json","MCP-Protocol-Version":bu.LATEST_PROTOCOL_VERSION}}),n.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${n.status} ${await this.M(n)}`);const o=await n.json();if(nB(o))return o;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(o)}`)}async D(e,t){if(e.status!==202)switch(e.headers.get("Content-Type")?.toLowerCase()){case"text/event-stream":{const i=new Ry(r=>{if(r.type==="message")this.r.$onDidReceiveMessage(this.j,r.data);else if(r.type==="endpoint")throw this.L(ie.Warning,`Received SSE endpoint from a POST to ${this.n.uri}, will fall back to legacy SSE`),this.w(t),new mt});try{await this.I(i,e)}catch(r){this.L(ie.Warning,`Error reading SSE stream: ${String(r)}`)}break}case"application/json":this.r.$onDidReceiveMessage(this.j,await e.text());break;default:{const i=await e.text();UH(i)?this.r.$onDidReceiveMessage(this.j,i):this.L(ie.Warning,`Unexpected ${e.status} response for request: ${i}`)}}}async F(){let e;for(let t=0;!this.q.isDisposed;t++){await ni(Math.min(t*1e3,3e4),this.f.token);let i;try{const s={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.J(s),this.c.value===1&&this.c.sessionId!==void 0&&(s["Mcp-Session-Id"]=this.c.sessionId),e&&(s["Last-Event-ID"]=e),i=await this.N(this.n.uri.toString(!0),{method:"GET",headers:s},s)}catch{this.L(ie.Info,`Error connecting to ${this.n.uri} for async notifications, will retry`);continue}if(i.status>=400){this.L(ie.Debug,`${i.status} status connecting to ${this.n.uri} for async notifications; they will be disabled: ${await this.M(i)}`);return}i.headers.get("content-type")?.toLowerCase().includes("text/event-stream")&&(t=0);const r=new Ry(s=>{s.type==="message"&&this.r.$onDidReceiveMessage(this.j,s.data),s.id&&(e=s.id)});try{await this.I(r,i)}catch(s){this.L(ie.Info,`Error reading from async stream, we will reconnect: ${s}`)}}}async G(){const e=new Xi,t={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.J(t);let i;try{if(i=await this.N(this.n.uri.toString(!0),{method:"GET",headers:t},t),i.status>=300){this.r.$onDidChangeState(this.j,{state:3,message:`${i.status} status connecting to ${this.n.uri} as SSE: ${await this.M(i)}`});return}}catch(s){this.r.$onDidChangeState(this.j,{state:3,message:`Error connecting to ${this.n.uri} as SSE: ${s}`});return}const r=new Ry(s=>{s.type==="message"?this.r.$onDidReceiveMessage(this.j,s.data):s.type==="endpoint"&&e.complete(new URL(s.data,this.n.uri.toString(!0)).toString())});return this.B(re(()=>e.cancel())),this.I(r,i).catch(s=>{this.r.$onDidChangeState(this.j,{state:3,message:`Error reading SSE stream: ${String(s)}`})}),e.p}async H(e,t){const i=new TextEncoder().encode(t),r={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length)};await this.J(r);const s=await this.O(e,{method:"POST",headers:r,body:i});s.status>=300&&this.L(ie.Warning,`${s.status} status sending message to ${this.b}: ${await this.M(s)}`)}async I(e,t){if(!t.body)return;const i=t.body.getReader();let r;do{try{r=await dd(i.read(),this.f.token)}catch(s){if(i.cancel(),this.q.isDisposed)return;throw s}r.value&&e.feed(r.value)}while(!r.done)}async J(e){if(this.h)try{const t=await this.r.$getTokenFromServerMetadata(this.j,this.h.authorizationServer,this.h.serverMetadata,this.h.resourceMetadata);t&&(e.Authorization=`Bearer ${t}`)}catch(t){this.L(ie.Warning,`Error getting token from server metadata: ${String(t)}`)}return e}L(e,t){this.q.isDisposed||this.r.$onDidPublishLog(this.j,e,t)}async M(e){try{return await e.text()}catch{return e.statusText}}async N(e,t,i){const r=()=>this.O(e,t);let s=await r();return s.status===401&&(this.h||(await this.y(s),await this.J(i),i.Authorization&&(t.headers=i,s=await r()))),s}async O(e,t){if(cv(this.t.getLevel(),ie.Trace)){const s={...t,headers:{...t.headers}};s.body&&(s.body=new TextDecoder().decode(s.body)),s.headers?.Authorization&&(s.headers.Authorization="***"),this.L(ie.Trace,`Fetching ${e} with options: ${JSON.stringify(s)}`)}let i=e,r;for(let s=0;s<OH&&(r=await fetch(i,{...t,signal:this.g.signal,redirect:"manual"}),!!FH.includes(r.status));s++){const n=r.headers.get("location");if(!n)break;const o=new URL(n,i).toString();this.L(ie.Trace,`Redirect (${r.status}) from ${i} to ${o}`),i=o,(r.status===303||(r.status===301||r.status===302)&&t.method==="POST")&&(t.method="GET",delete t.body)}if(cv(this.t.getLevel(),ie.Trace)){const s={};r.headers.forEach((n,o)=>{s[o]=n}),this.L(ie.Trace,`Fetched ${i}: ${JSON.stringify({status:r.status,headers:s})}`)}return r}};function UH(e){try{return JSON.parse(e),!0}catch{return!1}}Te(ty,ey,1),Te(vn,jg,1),Te(Pc,oy,1),Te(Nr,Ab,0),Te(wg,zb,0),Te(_b,Vb,0),Te(hr,lb,0),Te(zu,pb,0),Te(th,$y,0),Te(Dy,Py,0),Te(h7,hy,0),Te(Yo,fy,0),Te(iy,ry,0),Te(ka,PR,0),Te(u7,uy,1),Te(My,Og,0),Te(fb,FI,0),Te(Iy,ky,0),Te(Bs,Sb,0),Te(Ny,Ly,0),Te(ug,hg,0),Te(gg,Db,0),Te(vg,Bb,0),Te(Mr,nb,0),Te(Kb,i7,0),Te(Tc,Cy,0),Te(Mc,Lg,0),Te(Bg,zg,0);var Oy=class extends fg{constructor(t,i){super(!0,t,i)}createTerminal(t,i,r){return this.createTerminalFromOptions({name:t,shellPath:i,shellArgs:r})}createTerminalFromOptions(t,i){const r=new xb(this.a,kt(),t,t.name);return this.f.push(r),r.create(t,this.S(t,i)),r.value}};Oy=__decorate([__param(0,Nr),__param(1,De)],Oy);import*as Z7 from"child_process";import{promises as J7}from"fs";var Y7;(function(e){e[e.stdout=0]="stdout",e[e.stderr=1]="stderr"})(Y7||(Y7={}));var Q7;(function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.AccessDenied=2]="AccessDenied",e[e.ProcessNotFound=3]="ProcessNotFound"})(Q7||(Q7={}));function BH(e,...t){const i=t.reduce((n,o)=>(n[o]=!0,n),{}),r=[/^ELECTRON_.+$/,/^VSCODE_(?!(PORTABLE|SHELL_LOGIN|ENV_REPLACE|ENV_APPEND|ENV_PREPEND)).+$/,/^SNAP(|_.*)$/,/^GDK_PIXBUF_.+$/];Object.keys(e).filter(n=>!i[n]).forEach(n=>{for(let o=0;o<r.length;o++)if(n.search(r[o])!==-1){delete e[n];break}})}function zH(e){e&&(delete e.DEBUG,Et&&delete e.LD_PRELOAD)}function X7(e=cn){return e.comspec||"cmd.exe"}function HH(e){let t=[],i=!1;const r=function(s){if(i){t.push(s);return}(!e.send(s,o=>{if(o&&console.error(o),i=!1,t.length>0){const a=t.slice(0);t=[],a.forEach(c=>r(c))}})||je)&&(i=!0)};return{send:r}}async function WH(e){if(await Qe.exists(e)){let t;try{t=await J7.stat(e)}catch(i){i.message.startsWith("EACCES")&&(t=await J7.lstat(e))}return t?!t.isDirectory():!1}return!1}async function Hg(e,t,i,r=cn,s=WH){if(ar(e))return await s(e)?e:void 0;if(t===void 0&&(t=eo()),Ai(e)!=="."){const c=He(t,e);return await s(c)?c:void 0}const o=Zx(r,"PATH");if(i===void 0&&Fe(o)&&(i=o.split(S5)),i===void 0||i.length===0){const c=He(t,e);return await s(c)?c:void 0}for(const c of i){let l;if(ar(c)?l=He(c,e):l=He(t,c,e),je){const h=(Zx(r,"PATHEXT")||".COM;.EXE;.BAT;.CMD").split(";").map(async d=>{const f=l+d;return await s(f)?f:void 0});for(const d of h){const f=await d;if(f)return f}}if(await s(l))return l}const a=He(t,e);return await s(a)?a:void 0}async function Fy(e,t=!1){let i;if(je){const r=process.env.WINDIR||"C:\\Windows",s=He(r,"System32","taskkill.exe"),n=["/T"];t&&n.push("/F"),n.push("/PID",String(e)),i=Z7.spawn(s,n,{stdio:["ignore","pipe","pipe"]})}else{const r=ud.asFileUri("vs/base/node/terminateProcess.sh").fsPath;i=Z7.spawn("/bin/sh",[r,String(e),t?"9":"15"],{stdio:["ignore","pipe","pipe"]})}return new Promise((r,s)=>{const n=[];i.stdout.on("data",o=>n.push(o)),i.stderr.on("data",o=>n.push(o)),i.on("error",s),i.on("exit",o=>{o===0?r():s(new Error(`taskkill exited with code ${o}: ${Buffer.concat(n).toString()}`))})})}import{homedir as _H}from"os";var jy=class extends Ng{constructor(t,i,r,s,n,o,a,c,l){super(t,i,r,s,n,o,a,c),this.E=r,this.F=l,i.remote.isRemote&&i.remote.authority?this.registerTaskSystem(q.vscodeRemote,{scheme:q.vscodeRemote,authority:i.remote.authority,platform:process.platform}):this.registerTaskSystem(q.file,{scheme:q.file,authority:"",platform:process.platform}),this.a.$registerSupportedExecutions(!0,!0,!0)}async executeTask(t,i){const r=i;if(!i.execution&&r._id===void 0)throw new Error("Tasks to execute must include an execution");if(r._id!==void 0){const s=Ay.from(r,this.E),n=await this.a.$getTaskExecution(s);if(n.task===void 0)throw new Error("Task from execution DTO is undefined");const o=await this.B(n,i);return this.a.$executeTask(s).catch(()=>{}),o}else{const s=ls.from(i,t);if(s===void 0)return Promise.reject(new Error("Task is not valid"));Lr.is(s.execution)&&await this.A(s,i,!1);const n=await this.B(await this.a.$getTaskExecution(s),i);return this.a.$executeTask(s).catch(()=>{}),n}}x(t,i,r,s){const n=[];if(s)for(const o of s){this.C(o,r),(!o.definition||!t[o.definition.type])&&this.f.warn(`The task [${o.source}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`);const a=ls.from(o,r.extension);a&&(n.push(a),Lr.is(a.execution)&&i.push(this.A(a,o,!0)))}return{tasks:n,extension:r.extension}}async y(t){return t}async I(t){let i=t&&t.length>0?t[0]:void 0;if(!i){const r=A.file(_H());i=new dv({uri:r,name:Ar(r),index:0})}return{uri:i.uri,name:i.name,index:i.index,toResource:()=>{throw new Error("Not implemented")}}}async $resolveVariables(t,i){const r=A.revive(t),s={process:void 0,variables:Object.create(null)},n=await this.b.resolveWorkspaceFolder(r),o=await this.b.getWorkspaceFolders2()??[],a=await this.F.getResolver(),c=n?{uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}:await this.I(o);for(const l of i.variables)s.variables[l]=await a.resolveAsync(c,l);if(i.process!==void 0){let l;if(i.process.path!==void 0){l=i.process.path.split(S5);for(let f=0;f<l.length;f++)l[f]=await a.resolveAsync(c,l[f])}const u=await a.resolveAsync(c,i.process.name),h=i.process.cwd!==void 0?await a.resolveAsync(c,i.process.cwd):void 0,d=await Hg(u,h,l);d?s.process=d:ar(u)?s.process=u:s.process=He(h??"",u)}return s}async $jsonTasksSupported(){return!0}async $findExecutable(t,i,r){return Hg(t,i,r)}};jy=__decorate([__param(0,De),__param(1,At),__param(2,Mr),__param(3,Yo),__param(4,hr),__param(5,Bs),__param(6,Ce),__param(7,Pc),__param(8,Mc)],jy);import*as Nc from"child_process";var KK=V("externalTerminal"),Wg="Terminal.app",K7=p(2027,null),Uy=class{async getDefaultTerminalForPlatforms(){return{windows:By.getDefaultTerminalWindows(),linux:await e8.getDefaultTerminalLinuxReady(),osx:"xterm"}}},By=class Ks extends Uy{static{this.b="cmd.exe"}openTerminal(t,i){return this.spawnTerminal(Nc,t,X7(),i)}spawnTerminal(t,i,r,s){const n=i.windowsExec||Ks.getDefaultTerminalWindows();s&&s[1]===":"&&(s=s[0].toUpperCase()+s.substr(1));const o=dt(n,".exe").toLowerCase();if(o==="cmder")return t.spawn(n,s?[s]:void 0),Promise.resolve(void 0);const a=["/c","start","/wait"];return n.indexOf(" ")>=0&&a.push(n),a.push(n),o==="wt"&&a.push("-d ."),new Promise((c,l)=>{const u=Lc(process),h=t.spawn(r,a,{cwd:s,env:u,detached:!0});h.on("error",l),h.on("exit",()=>c())})}async runInTerminal(t,i,r,s,n){const o="windowsExec"in n&&n.windowsExec?n.windowsExec:Ks.getDefaultTerminalWindows(),a=await Ks.f();return new Promise((c,l)=>{const u=`"${i} - ${K7}"`,h=`"${r.join('" "')}" & pause`,d=Object.assign({},Lc(process),s);Object.keys(d).filter(x=>d[x]===null).forEach(x=>delete d[x]);const f={cwd:i,env:d,windowsVerbatimArguments:!0};let g,v;dt(o,".exe")==="wt"?(g=o,v=["-d",".",Ks.b,"/c",h]):a?(g=a,v=["-d",".",o,"/c",h]):(g=Ks.b,v=["/c","start",u,"/wait",o,"/c",`"${h}"`]),Nc.spawn(g,v,f).on("error",x=>{l(zy(x))}),c(void 0)})}static getDefaultTerminalWindows(){if(!Ks.d){const t=!!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");Ks.d=`${process.env.windir?process.env.windir:"C:\\Windows"}\\${t?"Sysnative":"System32"}\\cmd.exe`}return Ks.d}static async f(){try{return await Hg("wt")}catch{return}}};__decorate([$x],By,"f",null);var VH=class iP extends Uy{static{this.b="/usr/bin/osascript"}openTerminal(t,i){return this.spawnTerminal(Nc,t,i)}runInTerminal(t,i,r,s,n){const o=n.osxExec||Wg;return new Promise((a,c)=>{if(o===Wg||o==="iTerm.app"){const l=o===Wg?"TerminalHelper":"iTermHelper",h=[ud.asFileUri(`vs/workbench/contrib/externalTerminal/node/${l}.scpt`).fsPath,"-t",t||K7,"-w",i];for(const g of r)h.push("-a"),h.push(g);if(s){const g=Object.assign({},Lc(process),s);for(const v in g){const b=g[v];b===null?(h.push("-u"),h.push(v)):(h.push("-e"),h.push(`${v}=${b}`))}}let d="";const f=Nc.spawn(iP.b,h);f.on("error",g=>{c(zy(g))}),f.stderr.on("data",g=>{d+=g.toString()}),f.on("exit",g=>{if(g===0)a(void 0);else if(d){const v=d.split(`
`,1);c(new Error(v[0]))}else c(new Error(p(2028,null,l,g)))})}else c(new Error(p(2029,null,o)))})}spawnTerminal(t,i,r){const s=i.osxExec||Wg;return new Promise((n,o)=>{const a=["-a",s];r&&a.push(r);const c=Lc(process),l=t.spawn("/usr/bin/open",a,{cwd:r,env:c});l.on("error",o),l.on("exit",()=>n())})}},e8=class _n extends Uy{static{this.b=p(2030,null)}openTerminal(t,i){return this.spawnTerminal(Nc,t,i)}runInTerminal(t,i,r,s,n){const o=n.linuxExec?Promise.resolve(n.linuxExec):_n.getDefaultTerminalLinuxReady();return new Promise((a,c)=>{const l=[];o.then(u=>{u.indexOf("gnome-terminal")>=0?l.push("-x"):l.push("-e"),l.push("bash"),l.push("-c");const h=`${qH(r)}; echo; read -p "${_n.b}" -n1;`;l.push(`''${h}''`);const d=Object.assign({},Lc(process),s);Object.keys(d).filter(b=>d[b]===null).forEach(b=>delete d[b]);const f={cwd:i,env:d};let g="";const v=Nc.spawn(u,l,f);v.on("error",b=>{c(zy(b))}),v.stderr.on("data",b=>{g+=b.toString()}),v.on("exit",b=>{if(b===0)a(void 0);else if(g){const x=g.split(`
`,1);c(new Error(x[0]))}else c(new Error(p(2031,null,u,b)))})})})}static async getDefaultTerminalLinuxReady(){if(!_n.d)if(!Et)_n.d=Promise.resolve("xterm");else{const t=await Qe.exists("/etc/debian_version");_n.d=new Promise(i=>{t?i("x-terminal-emulator"):process.env.DESKTOP_SESSION==="gnome"||process.env.DESKTOP_SESSION==="gnome-classic"?i("gnome-terminal"):process.env.DESKTOP_SESSION==="kde-plasma"?i("konsole"):process.env.COLORTERM?i(process.env.COLORTERM):process.env.TERM?i(process.env.TERM):i("xterm")})}return _n.d}spawnTerminal(t,i,r){const s=i.linuxExec?Promise.resolve(i.linuxExec):_n.getDefaultTerminalLinuxReady();return new Promise((n,o)=>{s.then(a=>{const c=Lc(process),l=t.spawn(a,[],{cwd:r,env:c});l.on("error",o),l.on("exit",()=>n())})})}};function Lc(e){const t={...e.env};return BH(t),t}function zy(e){return"errno"in e&&e.errno==="ENOENT"&&"path"in e&&typeof e.path=="string"?new Error(p(2032,null,e.path)):e}function qH(e){let t="";for(const i of e)i.indexOf(" ")>=0?t+='"'+i+'"':t+=i,t+=" ";return t}var GH=class rP{constructor(){this.b=new Map}static{this.a=1}async createNewMessage(t){try{const i=await this.c();if(i){const r=String(rP.a++);return this.b.set(r,i),{id:r,data:i.createNewMessage(t)}}}catch{}return{id:"",data:t}}async validate(t,i){if(!t.id)return!0;const r=this.b.get(t.id);if(!r)return!1;this.b.delete(t.id);try{return r.validate(i)==="ok"}catch{return!1}finally{r.dispose?.()}}async sign(t){try{return await this.d(t)}catch{}return t}},t8=class extends GH{c(){return this.h().then(e=>new e.validator)}d(e){return this.h().then(t=>new t.signer().sign(e))}async h(){const e="vsda",{default:t}=await import(e);return t}};import*as i8 from"child_process";import*as r8 from"net";var s8=class qc extends P7{static{this.b=`\r
\r
`}static{this.c=/\r?\n/}static{this.i=/: */}constructor(){super(),this.p=Buffer.allocUnsafe(0),this.r=-1}t(t,i){this.l=i,this.p=Buffer.allocUnsafe(0),this.r=-1,t.on("data",r=>this.v(r))}sendMessage(t){if(this.l){const i=JSON.stringify(t);this.l.write(`Content-Length: ${Buffer.byteLength(i,"utf8")}${qc.b}${i}`,"utf8")}}v(t){for(this.p=Buffer.concat([this.p,t]);;){if(this.r>=0){if(this.p.length>=this.r){const i=this.p.toString("utf8",0,this.r);if(this.p=this.p.slice(this.r),this.r=-1,i.length>0)try{this.acceptMessage(JSON.parse(i))}catch(r){this.n.fire(new Error((r.message||r)+`
`+i))}continue}}else{const i=this.p.indexOf(qc.b);if(i!==-1){const s=this.p.toString("utf8",0,i).split(qc.c);for(const n of s){const o=n.split(qc.i);o[0]==="Content-Length"&&(this.r=Number(o[1]))}this.p=this.p.slice(i+qc.b.length);continue}}break}}},n8=class extends s8{startSession(){return new Promise((e,t)=>{let i=!1;this.x=this.y(()=>{this.t(this.x,this.x),e(),i=!0}),this.x.on("close",()=>{i?this.n.fire(new Error("connection closed")):t(new Error("connection closed"))}),this.x.on("error",r=>{r instanceof AggregateError&&(r=r.errors[0]),i?this.n.fire(r):t(r)})})}async stopSession(){await this.w(),this.x&&(this.x.end(),this.x=void 0)}},ZH=class extends n8{constructor(e){super(),this.z=e}y(e){return r8.createConnection(this.z.port,this.z.host||"127.0.0.1",e)}},JH=class extends n8{constructor(e){super(),this.z=e}y(e){return r8.createConnection(this.z.path,e)}},o8=class ca extends s8{constructor(t,i){super(),this.y=t,this.z=i}async startSession(){const t=this.y.command,i=this.y.args,r=this.y.options||{};try{if(t)if(ar(t)){if(!await Qe.exists(t))throw new Error(p(7029,null,t))}else t.indexOf("/")<0&&t.indexOf("\\")<0;else throw new Error(p(7030,null,this.z));let s=process.env;if(r.env&&Object.keys(r.env).length>0&&(s=xs(Xe(process.env),r.env)),t==="node")if(Array.isArray(i)&&i.length>0){const n=!!process.env.ELECTRON_RUN_AS_NODE||!!process.versions.electron,o={env:s,execArgv:n?["-e","delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])"]:[],silent:!0};r.cwd&&(o.cwd=r.cwd);const a=i8.fork(i[0],i.slice(1),o);if(!a.pid)throw new Error(p(7031,null,i[0]));this.x=a}else throw new Error(p(7032,null));else{let n=t,o=i;const a={env:s};r.cwd&&(a.cwd=r.cwd),je&&(t.endsWith(".bat")||t.endsWith(".cmd"))&&(a.shell=!0,n=`"${t}"`,o=i.map(c=>(c=c.replace(/"/g,'\\"'),`"${c}"`))),this.x=i8.spawn(n,o,a)}this.x.on("error",n=>{this.n.fire(n)}),this.x.on("exit",(n,o)=>{this.o.fire(n)}),this.x.stdout.on("close",()=>{this.n.fire(new Error("read error"))}),this.x.stdout.on("error",n=>{this.n.fire(n)}),this.x.stdin.on("error",n=>{this.n.fire(n)}),this.x.stderr.resume(),this.t(this.x.stdout,this.x.stdin)}catch(s){this.n.fire(s)}}async stopSession(){return this.x?(await this.w(),je?Fy(this.x.pid,!0).catch(()=>{this.x?.kill()}):(this.x.kill("SIGTERM"),Promise.resolve(void 0))):Promise.resolve(void 0)}static A(t,i){if(!t)return;const r=Object.create(null);t.runtime&&(t.runtime.indexOf("./")===0?r.runtime=He(i,t.runtime):r.runtime=t.runtime),t.runtimeArgs&&(r.runtimeArgs=t.runtimeArgs),t.program&&(ar(t.program)?r.program=t.program:r.program=He(i,t.program)),t.args&&(r.args=t.args);const s=t;return s.win&&(r.win=ca.A(s.win,i)),s.winx86&&(r.winx86=ca.A(s.winx86,i)),s.windows&&(r.windows=ca.A(s.windows,i)),s.osx&&(r.osx=ca.A(s.osx,i)),s.linux&&(r.linux=ca.A(s.linux,i)),r}static platformAdapterExecutable(t,i){let r=Object.create(null);i=i.toLowerCase();for(const l of t)if(l.contributes){const u=l.contributes.debuggers;u&&u.length>0&&u.filter(h=>typeof h.type=="string"&&_r(h.type,i)).forEach(h=>{const d=ca.A(h,l.extensionLocation.fsPath);r=xs(r,d,l.isBuiltin)})}let s;je&&!process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432")?s=r.winx86||r.win||r.windows:je?s=r.win||r.windows:Ft?s=r.osx:Et&&(s=r.linux),s=s||r;const n=s.program||r.program,o=s.args||r.args,a=s.runtime||r.runtime,c=s.runtimeArgs||r.runtimeArgs;if(a)return{type:"executable",command:a,args:(c||[]).concat(typeof n=="string"?[n]:[]).concat(o||[])};if(n)return{type:"executable",command:n,args:o||[]}}};import*as YH from"child_process";function QH(e,t){return new Promise((i,r)=>{let s="";const n=YH.spawn(e,t);n.pid&&n.stdout.on("data",o=>{s+=o.toString()}),n.on("error",o=>{r(o)}),n.on("close",o=>{i(s)})})}async function XH(e){if(e)if(je){const t=await import("@vscode/windows-process-tree");return new Promise(i=>{t.getProcessTree(e,r=>{i(!!r&&r.children.length>0)})})}else return QH("/usr/bin/pgrep",["-lP",String(e)]).then(t=>{const i=t.trim();return!(i.length===0||i.indexOf(" tmux")>=0)},t=>!0);return Promise.resolve(!0)}var a8;(function(e){e[e.cmd=0]="cmd",e[e.powershell=1]="powershell",e[e.bash=2]="bash"})(a8||(a8={}));function KH(e,t,i,r,s){e=e.trim().toLowerCase();let n;e.indexOf("powershell")>=0||e.indexOf("pwsh")>=0?n=1:e.indexOf("cmd.exe")>=0?n=0:e.indexOf("bash")>=0?n=2:je?n=0:n=2;let o,a=" ";switch(n){case 1:if(o=c=>(c=c.replace(/\'/g,"''"),c.length>0&&c.charAt(c.length-1)==="\\"?`'${c}\\'`:`'${c}'`),r){const c=H5(r);c&&(a+=`${c}:; `),a+=`cd ${o(r)}; `}if(s)for(const c in s){const l=s[c];l===null?a+=`Remove-Item env:${c}; `:a+=`\${env:${c}}='${l}'; `}if(t.length>0){const c=t.shift(),l=i?c:o(c);a+=l[0]==="'"?`& ${l} `:`${l} `;for(const u of t)a+=u==="<"||u===">"||i?u:o(u),a+=" "}break;case 0:if(o=c=>(c=c.replace(/\"/g,'""'),c=c.replace(/([><!^&|])/g,"^$1"),' "'.split("").some(l=>c.includes(l))||c.length===0?`"${c}"`:c),r){const c=H5(r);c&&(a+=`${c}: && `),a+=`cd ${o(r)} && `}if(s){a+='cmd /C "';for(const c in s){let l=s[c];l===null?a+=`set "${c}=" && `:(l=l.replace(/[&^|<>]/g,u=>`^${u}`),a+=`set "${c}=${l}" && `)}}for(const c of t)a+=c==="<"||c===">"||i?c:o(c),a+=" ";s&&(a+='"');break;case 2:{o=l=>(l=l.replace(/(["'\\\$!><#()\[\]*&^| ;{}?`])/g,"\\$1"),l.length===0?'""':l);const c=l=>/[^\w@%\/+=,.:^-]/.test(l)?`'${l.replace(/'/g,"'\\''")}'`:l;if(r&&(a+=`cd ${o(r)} ; `),s){a+="/usr/bin/env";for(const l in s){const u=s[l];u===null?a+=` -u ${c(l)}`:a+=` ${c(`${l}=${u}`)}`}a+=" "}for(const l of t)a+=l==="<"||l===">"||i?l:o(l),a+=" ";break}}return a}var Hy=class extends Rg{constructor(t,i,r,s,n,o,a,c,l,u){super(t,i,r,s,a,c,l,u),this.Fb=n,this.Gb=o,this.Db=new tW}ib(t,i){return t instanceof Ya?new o8(this.lb(t),i.type):t instanceof Qa?new ZH(this.mb(t)):t instanceof tu?new JH(this.nb(t)):super.ib(t,i)}vb(t,i){const r=o8.platformAdapterExecutable(i.getAllExtensionDescriptions(),t.type);if(r)return new Ya(r.command,r.args,r.options)}jb(){return new t8}async $runInTerminal(t,i){if(t.kind==="integrated"){this.Eb||(this.Eb=this.B(this.Fb.onDidCloseTerminal(g=>{this.Db.onTerminalClosed(g)})));const r=await this.ab.getConfigProvider(),s=this.Fb.getDefaultShell(!0),n=this.Fb.getDefaultShellArgs(!0),o=t.title||p(2960,null),a=JSON.stringify({shell:s,shellArgs:n});let c=await this.Db.checkout(a,o),l,u=!1;if(c)l=t.cwd;else{const g={shellPath:s,shellArgs:n,cwd:t.cwd,name:o,iconPath:new hi("debug")};u=!0,c=this.Fb.createTerminalFromOptions(g,{isFeatureTerminal:!0,forceShellIntegration:!0,useShellEnvironment:!0}),this.Db.insert(c,a)}c.show(!0);const h=await c.processId;if(u){let g;(function(b){b[b.DataDebounce=500]="DataDebounce",b[b.MaxDelay=5e3]="MaxDelay"})(g||(g={}));const v=new le;await new Promise(b=>{const x=v.add(new Vr(b,500));v.add(this.Fb.onDidWriteTerminalData(E=>{E.terminal===c&&x.schedule()})),v.add(this.Gb.onDidChangeTerminalShellIntegration(E=>{E.terminal===c&&b()})),v.add($1(b,5e3))}),v.dispose()}else if(c.state.isInteractedWith&&!c.shellIntegration&&(c.sendText(""),await ni(200)),r.getConfiguration("debug.terminal").get("clearBeforeReusing")){let g;if(s.indexOf("powershell")>=0||s.indexOf("pwsh")>=0||s.indexOf("cmd.exe")>=0?g="cls":s.indexOf("bash")>=0?g="clear":je?g="cls":g="clear",c.shellIntegration){const v=new le,b=c.shellIntegration.executeCommand(g);await new Promise(x=>{v.add(this.Gb.onDidEndTerminalShellExecution(E=>{E.execution===b&&x()})),v.add($1(x,500))}),v.dispose()}else c.sendText(g),await ni(200)}const d=KH(s,t.args,!!t.argsCanBeInterpretedByShell,l,t.env);c.shellIntegration?c.shellIntegration.executeCommand(d):c.sendText(d);const f=this.onDidTerminateDebugSession(g=>{g.id===i&&(this.Db.free(c),f.dispose())});return h}else if(t.kind==="external")return eW(t,await this.ab.getConfigProvider());return super.$runInTerminal(t,i)}};Hy=__decorate([__param(0,De),__param(1,Mr),__param(2,Ws),__param(3,hr),__param(4,Bs),__param(5,Ny),__param(6,Tc),__param(7,Mc),__param(8,Nr),__param(9,th)],Hy);var rh=void 0;function eW(e,t){if(!rh)if(je)rh=new By;else if(Ft)rh=new VH;else if(Et)rh=new e8;else throw new Error("external terminals not supported on this platform");const i=t.getConfiguration("terminal");return rh.runInTerminal(e.title,e.cwd,e.args,e.env||{},i.external||{})}var tW=class sP{constructor(){this.b=new Map}static{this.a=1e3}async checkout(t,i,r=!1){const n=[...this.b.entries()].map(([o,a])=>As(async c=>{if(o.name!==i||a.lastUsedAt!==-1&&await XH(await o.processId))return null;const l=Date.now();return a.lastUsedAt+sP.a>l||c.isCancellationRequested?null:a.config!==t?(r&&o.dispose(),null):(a.lastUsedAt=l,o)}));return await vM(n,o=>!!o)}insert(t,i){this.b.set(t,{lastUsedAt:Date.now(),config:i})}free(t){const i=this.b.get(t);i&&(i.lastUsedAt=-1)}onTerminalClosed(t){this.b.delete(t)}},c8=new Zt(()=>{const e=xg.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),tee=new Zt(()=>({collator:xg.Collator(void 0,{numeric:!0}).value})),iee=new Zt(()=>({collator:xg.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value}));function l8(e,t,i=!1){const r=e||"",s=t||"",n=c8.value.collator.compare(r,s);return c8.value.collatorIsNumeric&&n===0&&r!==s?r<s?-1:1:n}function iW(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function _g(e,t,i=!1){const r=e.split(vt),s=t.split(vt),n=r.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return l8(r[l],s[l],i);if(a)return-1;if(c)return 1;const u=iW(r[l],s[l],i);if(u!==0)return u}}function Wy(e,t,i){const r=e.toLowerCase(),s=t.toLowerCase(),n=rW(e,t,i);if(n)return n;const o=r.endsWith(i),a=s.endsWith(i);if(o!==a)return o?-1:1;const c=l8(r,s);return c!==0?c:r.localeCompare(s)}function rW(e,t,i){const r=e.toLowerCase(),s=t.toLowerCase(),n=r.startsWith(i),o=s.startsWith(i);if(n!==o)return n?-1:1;if(n&&o){if(r.length<s.length)return-1;if(r.length>s.length)return 1}return 0}var Vg=0,u8=[Vg,[]];function h8(e,t,i,r){if(!e||!t)return u8;const s=e.length,n=t.length;if(s<n)return u8;const o=e.toLowerCase();return sW(t,i,n,e,o,s,r)}function sW(e,t,i,r,s,n,o){const a=[],c=[];for(let d=0;d<i;d++){const f=d*n,g=f-n,v=d>0,b=e[d],x=t[d];for(let E=0;E<n;E++){const I=E>0,U=f+E,j=U-1,ee=g+E-1,O=I?a[j]:0,B=v&&I?a[ee]:0,F=v&&I?c[ee]:0;let J;!B&&v?J=0:J=nW(b,x,r,s,E,F),J&&B+J>=O&&(o||v||s.startsWith(t,E))?(c[U]=F+1,a[U]=B+J):(c[U]=Vg,a[U]=O)}}const l=[];let u=i-1,h=n-1;for(;u>=0&&h>=0;){const d=u*n+h;c[d]===Vg||(l.push(h),u--),h--}return[a[i*n-1],l.reverse()]}function nW(e,t,i,r,s,n){let o=0;if(!oW(t,r[s]))return o;if(o+=1,n>0&&(o+=Math.min(n,3)*6+Math.max(0,n-3)*3),e===i[s]&&(o+=1),s===0)o+=8;else{const a=aW(i.charCodeAt(s-1));a?o+=a:Il(i.charCodeAt(s))&&n===0&&(o+=2)}return o}function oW(e,t){return e===t?!0:e==="/"||e==="\\"?t==="/"||t==="\\":!1}function aW(e){switch(e){case 47:case 92:return 5;case 95:case 45:case 46:case 32:case 39:case 34:case 58:return 4;default:return 0}}var qg=Object.freeze({score:0}),Gg=1<<18,_y=1<<17,Vy=65536;function cW(e,t,i,r){const s=r.values?r.values:[r];return Is({[r.normalized]:{values:s.map(o=>({value:o.normalized,expectContiguousMatch:o.expectContiguousMatch})),label:e,description:t,allowNonContiguousMatches:i}})}function d8(e,t,i,r,s){if(!e||!t.normalized)return qg;const n=r.getItemLabel(e);if(!n)return qg;const o=r.getItemDescription(e),a=cW(n,o,i,t),c=s[a];if(c)return c;const l=lW(n,o,r.getItemPath(e),t,i);return s[a]=l,l}function lW(e,t,i,r,s){const n=!i||!r.containsPathSeparator;return i&&(Et?r.pathNormalized===i:_r(r.pathNormalized,i))?{score:Gg,labelMatch:[{start:0,end:e.length}],descriptionMatch:t?[{start:0,end:t.length}]:void 0}:r.values&&r.values.length>1?uW(e,t,i,r.values,n,s):f8(e,t,i,r,n,s)}function uW(e,t,i,r,s,n){let o=0;const a=[],c=[];for(const l of r){const{score:u,labelMatch:h,descriptionMatch:d}=f8(e,t,i,l,s,n);if(u===Vg)return qg;o+=u,h&&a.push(...h),d&&c.push(...d)}return{score:o,labelMatch:g8(a),descriptionMatch:g8(c)}}function f8(e,t,i,r,s,n){if(s||!t){const[o,a]=h8(e,r.normalized,r.normalizedLowercase,n&&!r.expectContiguousMatch);if(o){const c=gv(r.normalized,e);let l;if(c){l=_y;const u=Math.round(r.normalized.length/e.length*100);l+=u}else l=Vy;return{score:l+o,labelMatch:c||p8(a)}}}if(t){let o=t;i&&(o=`${t}${vt}`);const a=o.length,c=`${o}${e}`,[l,u]=h8(c,r.normalized,r.normalizedLowercase,n&&!r.expectContiguousMatch);if(l){const h=p8(u),d=[],f=[];return h.forEach(g=>{g.start<a&&g.end>a?(d.push({start:0,end:g.end-a}),f.push({start:g.start,end:a})):g.start>=a?d.push({start:g.start-a,end:g.end-a}):f.push(g)}),{score:l,labelMatch:d,descriptionMatch:f}}}return qg}function p8(e){const t=[];if(!e)return t;let i;for(const r of e)i&&i.end===r?i.end+=1:(i={start:r,end:r+1},t.push(i));return t}function g8(e){const t=e.sort((s,n)=>s.start-n.start),i=[];let r;for(const s of t)!r||!hW(r,s)?(r=s,i.push(s)):(r.start=Math.min(r.start,s.start),r.end=Math.max(r.end,s.end));return i}function hW(e,t){return!(e.end<t.start||t.end<e.start)}function dW(e,t,i,r,s,n){const o=d8(e,i,r,s,n),a=d8(t,i,r,s,n),c=o.score,l=a.score;if((c===Gg||l===Gg)&&c!==l)return c===Gg?-1:1;if(c>Vy||l>Vy){if(c!==l)return c>l?-1:1;if(c<_y&&l<_y){const b=fW(o.labelMatch,a.labelMatch);if(b!==0)return b}const g=s.getItemLabel(e)||"",v=s.getItemLabel(t)||"";if(g.length!==v.length)return g.length-v.length}if(c!==l)return c>l?-1:1;const u=Array.isArray(o.labelMatch)&&o.labelMatch.length>0,h=Array.isArray(a.labelMatch)&&a.labelMatch.length>0;if(u&&!h)return-1;if(h&&!u)return 1;const d=m8(e,o,s),f=m8(t,a,s);return d&&f&&d!==f?f>d?-1:1:pW(e,t,i,s)}function m8(e,t,i){let r=-1,s=-1;if(t.descriptionMatch&&t.descriptionMatch.length?r=t.descriptionMatch[0].start:t.labelMatch&&t.labelMatch.length&&(r=t.labelMatch[0].start),t.labelMatch&&t.labelMatch.length){if(s=t.labelMatch[t.labelMatch.length-1].end,t.descriptionMatch&&t.descriptionMatch.length){const n=i.getItemDescription(e);n&&(s+=n.length)}}else t.descriptionMatch&&t.descriptionMatch.length&&(s=t.descriptionMatch[t.descriptionMatch.length-1].end);return s-r}function fW(e,t){if(!e&&!t||(!e||!e.length)&&(!t||!t.length))return 0;if(!t||!t.length)return-1;if(!e||!e.length)return 1;const i=e[0].start,s=e[e.length-1].end-i,n=t[0].start,a=t[t.length-1].end-n;return s===a?0:a<s?1:-1}function pW(e,t,i,r){const s=r.getItemLabel(e)||"",n=r.getItemLabel(t)||"",o=r.getItemDescription(e),a=r.getItemDescription(t),c=s.length+(o?o.length:0),l=n.length+(a?a.length:0);if(c!==l)return c-l;const u=r.getItemPath(e),h=r.getItemPath(t);return u&&h&&u.length!==h.length?u.length-h.length:s!==n?Wy(s,n,i.normalized):o&&a&&o!==a?Wy(o,a,i.normalized):u&&h&&u!==h?Wy(u,h,i.normalized):0}function v8(e){return e.startsWith('"')&&e.endsWith('"')}var gW=" ";function qy(e){typeof e!="string"&&(e="");const t=e.toLowerCase(),{pathNormalized:i,normalized:r,normalizedLowercase:s}=w8(e),n=i.indexOf(vt)>=0,o=v8(e);let a;const c=e.split(gW);if(c.length>1)for(const l of c){const u=v8(l),{pathNormalized:h,normalized:d,normalizedLowercase:f}=w8(l);d&&(a||(a=[]),a.push({original:l,originalLowercase:l.toLowerCase(),pathNormalized:h,normalized:d,normalizedLowercase:f,expectContiguousMatch:u}))}return{original:e,originalLowercase:t,pathNormalized:i,normalized:r,normalizedLowercase:s,values:a,containsPathSeparator:n,expectContiguousMatch:o}}function w8(e){let t;je?t=e.replace(/\//g,vt):t=e.replace(/\\/g,vt);const i=vT(t).replace(/\s|"/g,"");return{pathNormalized:t,normalized:i,normalizedLowercase:i.toLowerCase()}}import*as mW from"child_process";import*as Gy from"fs";import{StringDecoder as b8}from"string_decoder";import*as vW from"child_process";function Zg(e){return e.startsWith("**")||e.startsWith("/")?e:`/${e}`}function wW(e){return new Zw(e.start.line,e.start.character,e.end.line,e.end.character)}function y8(e){return new nI(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn)}var Jg=class{constructor(t,i){this.a=t,this.b=i}appendLine(t){this.b.debug(`${this.a}#search`,t)}};Jg=__decorate([__param(1,Ce)],Jg);import{rgPath as bW}from"@vscode/ripgrep";var A8=bW.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked");function yW(e,t,i,r,s){const n=AW(e,t,i,r,s),o=t.folder.fsPath;return{cmd:vW.spawn(A8,n.args,{cwd:o}),rgDiskPath:A8,siblingClauses:n.siblingClauses,rgArgs:n,cwd:o}}function AW(e,t,i,r,s){const n=["--files","--hidden","--case-sensitive","--no-require-git"];EW([t],i,!1).forEach(a=>{const c=Zg(a);if(n.push("-g",c),Ft){const l=vx(c);l!==c&&n.push("-g",l)}});const o=xW([t],r,void 0,!1);return o.globArgs.forEach(a=>{const c=`!${Zg(a)}`;if(n.push("-g",c),Ft){const l=vx(c);l!==c&&n.push("-g",l)}}),t.disregardIgnoreFiles!==!1?n.push("--no-ignore"):t.disregardParentIgnoreFiles!==!1&&n.push("--no-ignore-parent"),t.ignoreSymlinks||n.push("--follow"),e.exists&&n.push("--quiet"),s&&n.push("--threads",`${s}`),n.push("--no-config"),t.disregardGlobalIgnoreFiles&&n.push("--no-ignore-global"),{args:n,siblingClauses:o.siblingClauses}}function xW(e,t,i,r=!0){const s=[];let n={};return e.forEach(o=>{const a=Object.assign({},o.excludePattern||{},t||{}),c=x8(a,r?o.folder.fsPath:void 0,i);s.push(...c.globArgs),c.siblingClauses&&(n=Object.assign(n,c.siblingClauses))}),{globArgs:s,siblingClauses:n}}function EW(e,t,i=!0){const r=[];return e.forEach(s=>{const n=Object.assign({},t||{},s.includePattern||{}),o=x8(n,i?s.folder.fsPath:void 0);r.push(...o.globArgs)}),r}function x8(e,t,i){const r=[],s={};return Object.keys(e).forEach(n=>{if(i&&i.has(n)||!n)return;const o=e[n];n=kW(t?SW(t,n):n),n.startsWith("\\\\")?n="\\\\"+n.substr(2).replace(/\\/g,"/"):n=n.replace(/\\/g,"/"),typeof o=="boolean"&&o?(n.startsWith("\\\\")&&(n+="**"),r.push(IW(n))):o&&o.when&&(s[n]=o)}),{globArgs:r,siblingClauses:s}}function SW(e,t){return ar(t)?t:He(e,t)}function kW(e){return e=un(e,"\\"),un(e,"/")}function IW(e){return A1(e).toLowerCase()==="c:/"?e.replace(/^c:[/\\]/i,"/"):e}var Yg=new Set;process.on("exit",()=>{Yg.forEach(e=>e())});var CW=class{constructor(e){this.c=null,this.h=null,this.l=!1,this.m=null,this.r=null,this.s=0,this.a=e,this.b=e.filePattern||"",this.d=e.includePattern&&kr(e.includePattern),this.f=e.maxResults||null,this.g=!!e.exists,this.v=Object.create(null),this.k=0,this.j=!1,this.o=0,this.p=0,this.q=[],this.b&&(this.c=e.shouldGlobMatchFilePattern?null:qy(this.b).normalizedLowercase),this.u=e.excludePattern&&kr(e.excludePattern),this.t=new Map,e.folderQueries.forEach(t=>{const i={};t.excludePattern?.forEach(s=>{Object.assign(i,s.pattern||{},this.a.excludePattern||{})}),t.excludePattern?.length||Object.assign(i,this.a.excludePattern||{});const r=t.folder.fsPath;e.folderQueries.map(s=>s.folder.fsPath).filter(s=>s!==r).forEach(s=>{ro(s,r)&&(i[ma(r,s)]=!0)}),this.t.set(r,new $W(i,r))})}cancel(){this.l=!0,Yg.forEach(e=>e())}walk(e,t,i,r,s,n){if(this.m=Oi.create(!1),this.l)return n(null,this.j);t.forEach(o=>{const a=dt(o.fsPath);this.u&&this.u(o.fsPath,a)||this.J(r,{relativePath:o.fsPath,searchPath:void 0})}),this.r=Oi.create(!1),this.w(e,(o,a)=>{this.x(this.y,this,o,i,r,s,c=>{if(c){const l=Zr(c);console.error(l),this.q.push(l),a(c,void 0)}else a(null,void 0)})},(o,a)=>{this.m.stop();const c=o?yt(o)[0]:null;n(c,this.j)})}w(e,t,i){const r=new Array(e.length),s=new Array(e.length);let n=!1,o=0;if(e.length===0)return i(null,[]);e.forEach((a,c)=>{t(a,(l,u)=>{if(l?(n=!0,r[c]=null,s[c]=l):(r[c]=u,s[c]=null),++o===e.length)return i(n?s:null,r)})})}x(e,t,...i){try{e.apply(t,i)}catch(r){i[i.length-1](r)}}y(e,t,i,r,s){const n=e.folder.fsPath,o=Ft,a=()=>d&&d.kill();Yg.add(a);let c=b=>{Yg.delete(a),c=()=>{},s(b)},l="";const u=this.D(),h=yW(this.a,e,this.a.includePattern,this.t.get(e.folder.fsPath).expression,t),d=h.cmd,f=!Object.keys(h.siblingClauses).length,g=h.rgArgs.args.map(b=>b.match(/^-/)?b:`'${b}'`).join(" ");let v=`${h.rgDiskPath} ${g}
 - cwd: ${h.cwd}`;h.rgArgs.siblingClauses&&(v+=`
 - Sibling clauses: ${JSON.stringify(h.rgArgs.siblingClauses)}`),r({message:v}),this.s=0,this.z(d,"utf8",r,(b,x,E)=>{if(b){c(b);return}if(this.j){c();return}const U=(l+(o?bd(x||""):x)).split(`
`);if(E){const j=U.length;U[j-1]=U[j-1].trim(),U[j-1]||U.pop()}else l=U.pop()||"";if(U.length&&U[0].indexOf(`
`)!==-1){c(new Error("Splitting up files failed"));return}if(this.s+=U.length,f){for(const j of U)if(this.J(i,{base:n,relativePath:j,searchPath:this.N(e,j)}),this.j){a();break}(E||this.j)&&c();return}this.G(e,u,n,U,i),E&&(this.H(u,n,i),c())})}spawnFindCmd(e){const t=this.t.get(e.folder.fsPath),i=t.getBasenameTerms(),r=t.getPathTerms(),s=["-L","."];if(i.length||r.length){s.push("-not","(","(");for(const n of i)s.push("-name",n),s.push("-o");for(const n of r)s.push("-path",n),s.push("-o");s.pop(),s.push(")","-prune",")")}return s.push("-type","f"),mW.spawn("find",s,{cwd:e.folder.fsPath})}readStdout(e,t,i){let r="";this.z(e,t,()=>{},(s,n,o)=>{if(s){i(s);return}r+=n,o&&i(null,r)})}z(e,t,i,r){let s=(a,c,l)=>{(a||l)&&(s=()=>{},this.r?.stop()),r(a,c,l)},n=!1;e.stdout?(this.A(e.stdout,t,s),e.stdout.once("data",()=>n=!0)):i({message:"stdout is null"});let o;e.stderr?o=this.B(e.stderr):i({message:"stderr is null"}),e.on("error",a=>{s(a)}),e.on("close",a=>{let c;!n&&(c=this.C(o,t))&&DW(c)?s(new Error(`command failed with error code ${a}: ${this.C(o,t)}`)):(this.g&&a===0&&(this.j=!0),s(null,"",!0))})}A(e,t,i){const r=new b8(t);return e.on("data",s=>{i(null,r.write(s))}),r}B(e){const t=[];return e.on("data",i=>{t.push(i)}),t}C(e,t){const i=new b8(t);return e.map(r=>i.write(r)).join("")}D(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}G(e,{pathToEntries:t},i,r,s){r.indexOf(this.b)!==-1&&this.J(s,{base:i,relativePath:this.b,searchPath:this.N(e,this.b)});const n=o=>{const a=dt(o),c=Ai(o);let l=t[c];l||(l=t[c]=[],n(c)),l.push({base:i,relativePath:o,basename:a,searchPath:this.N(e,o)})};r.forEach(n)}H({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.t.get(i),o=this.b;function a(c){s.o++;const l=Yw(()=>c.map(u=>u.basename));for(let u=0,h=c.length;u<h;u++){const d=c[u],{relativePath:f,basename:g}=d;if(n.test(f,g,o!==g?l:void 0))continue;const v=t[f];if(v)a(v);else{if(s.p++,f===o)continue;s.J(r,d)}if(s.j)break}}a(e)}getStats(){return{cmdTime:this.r.elapsed(),fileWalkTime:this.m.elapsed(),directoriesWalked:this.o,filesWalked:this.p,cmdResultCount:this.s}}I(e,t,i,r,s){const n=e.folder,o=Yw(()=>i);this.w(i,(a,c)=>{if(this.l||this.j)return c(null);const l=t?[t,a].join(vt):a;if(this.t.get(e.folder.fsPath).test(l,a,this.a.filePattern!==a?o:void 0))return c(null);const u=[n.fsPath,l].join(vt);Gy.lstat(u,(h,d)=>{if(h||this.l||this.j)return c(null);this.L(u,d,(f,g)=>f||this.l||this.j?c(null):g.isDirectory()?(this.o++,this.M(u,d,(v,b)=>v||this.l||this.j||(b=b||"",this.v[b])?c(null):(this.v[b]=!0,Qe.readdir(u).then(x=>{if(this.l||this.j)return c(null);this.I(e,l,x,r,E=>c(E||null))},x=>{c(null)})))):(this.p++,l===this.b||this.h&&or(g.size)&&g.size>this.h||this.J(r,{base:n.fsPath,relativePath:l,searchPath:this.N(e,l)}),c(null,void 0)))})},a=>{const c=a&&yt(a);return s(c&&c.length>0?c[0]:void 0)})}J(e,t){this.K(t)&&(!this.d||this.d(t.relativePath,dt(t.relativePath)))&&(this.k++,(this.g||this.f&&this.k>this.f)&&(this.j=!0),this.j||e(t))}K(e){if(this.b){if(this.b==="*")return!0;if(this.c)return Jw(e,this.c);if(this.b)return Jw(e,this.b,!1)}return!0}L(e,t,i){return t.isSymbolicLink()?Gy.stat(e,i):i(null,t)}M(e,t,i){return t.isSymbolicLink()?Gy.realpath(e,(r,s)=>r?i(r):i(null,s)):i(null,e)}N(e,t){return e.folderName?He(e.folderName,t):t}},E8=class{constructor(e,t){this.a=e.folderQueries,this.b=e.extraFileResources||[],this.d=t,this.c=new CW(e)}search(e,t,i){this.c.walk(this.a,this.b,this.d,e,t,(r,s)=>{i(r,{limitHit:s,stats:this.c.getStats(),messages:[]})})}cancel(){this.c.cancel()}},$W=class{constructor(e,t){this.expression=e,this.c=t,this.d(e)}d(e){let t,i;Object.keys(e).filter(r=>e[r]).forEach(r=>{ar(r)?(t=t||Lk(),t[r]=e[r]):(i=i||Lk(),i[r]=e[r])}),this.a=t&&kr(t,{trimForExclusions:!0}),this.b=i&&kr(i,{trimForExclusions:!0})}test(e,t,i){return this.b&&this.b(e,t,i)||this.a&&this.a(He(this.c,e),t,i)}getBasenameTerms(){const e=[];return this.a&&e.push(...zk(this.a)),this.b&&e.push(...zk(this.b)),e}getPathTerms(){const e=[];return this.a&&e.push(...Hk(this.a)),this.b&&e.push(...Hk(this.b)),e}};function DW(e){const t=e.trim().split(`
`),i=t[0].trim();if(i.startsWith("Error parsing regex"))return i;if(i.startsWith("regex parse error"))return NT(t[t.length-1].trim());if(i.startsWith("error parsing glob")||i.startsWith("unsupported encoding"))return i.charAt(0).toUpperCase()+i.substr(1);if(i==="Literal '\\n' not allowed.")return"Literal '\\n' currently not supported";if(i.startsWith("Literal "))return i}import*as PW from"child_process";import{EventEmitter as TW}from"events";import{StringDecoder as MW}from"string_decoder";import{RegExpParser as NW,RegExpVisitor as LW}from"vscode-regexpp";import{rgPath as RW}from"@vscode/ripgrep";var S8=RW.replace(/\bnode_modules\.asar\b/,"node_modules.asar.unpacked"),k8=class{constructor(e,t){this.a=e,this.b=t}provideTextSearchResults(e,t,i,r){return Promise.all(t.folderOptions.map(s=>{const n={folderOptions:s,numThreads:this.b,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};return this.provideTextSearchResultsWithRgOptions(e,n,i,r)})).then(s=>({limitHit:s.some(o=>!!o&&o.limitHit)}))}provideTextSearchResultsWithRgOptions(e,t,i,r){return this.a.appendLine(`provideTextSearchResults ${e.pattern}, ${JSON.stringify({...t,folder:t.folderOptions.folder.toString()})}`),new Promise((s,n)=>{r.onCancellationRequested(()=>g());const o={...t,numThreads:this.b},a=UW(e,o),c=t.folderOptions.folder.fsPath,l=a.map(I=>I.match(/^-/)?I:`'${I}'`).join(" ");this.a.appendLine(`${S8} ${l}
 - cwd: ${c}`);let u=PW.spawn(S8,a,{cwd:c});u.on("error",I=>{console.error(I),this.a.appendLine("Error: "+(I&&I.message)),n(mI(new _o(I&&I.message,On.rgProcessError)))});let h=!1;const d=new jW(t.maxResults??Xp,t.folderOptions.folder,H7(t.previewOptions));d.on("result",I=>{h=!0,b="",i.report(I)});let f=!1;const g=()=>{f=!0,u?.kill(),d?.cancel()};let v=!1;d.on("hitLimit",()=>{v=!0,g()});let b="";u.stdout.on("data",I=>{d.handleData(I),h||(b+=I)});let x=!1;u.stdout.once("data",()=>x=!0);let E="";u.stderr.on("data",I=>{const U=I.toString();this.a.appendLine(U),E.length+U.length<1e6&&(E+=U)}),u.on("close",()=>{if(this.a.appendLine(x?"Got data from stdout":"No data from stdout"),this.a.appendLine(h?"Got result from parser":"No result from parser"),b&&this.a.appendLine(`Got data without result: ${b}`),this.a.appendLine(""),f)s({limitHit:v});else{d.flush(),u=null;let I;E&&!x&&(I=OW(E))?n(mI(new _o(I.message,I.code))):s({limitHit:v})}})})}};function OW(e){const t=e.split(`
`),i=t[0].trim();if(t.some(s=>s.startsWith("regex parse error")))return new _o(FW(t),On.regexParseError);const r=i.match(/grep config error: unknown encoding: (.*)/);if(r)return new _o(`Unknown encoding: ${r[1]}`,On.unknownEncoding);if(i.startsWith("error parsing glob"))return new _o(i.charAt(0).toUpperCase()+i.substr(1),On.globParseError);if(i.startsWith("the literal"))return new _o(i.charAt(0).toUpperCase()+i.substr(1),On.invalidLiteral);if(i.startsWith("PCRE2: error compiling pattern"))return new _o(i,On.regexParseError)}function FW(e){const t=["Regex parse error"],i=e.filter(r=>r.startsWith("PCRE2:"));if(i.length>=1){const r=i[0].replace("PCRE2:","");if(r.indexOf(":")!==-1&&r.split(":").length>=2){const s=r.split(":")[1];t.push(":"+s)}}return t.join("")}var jW=class extends TW{constructor(e,t,i){super(),this.g=e,this.h=t,this.j=i,this.a="",this.b=!1,this.c=!1,this.f=0,this.d=new MW}cancel(){this.b=!0}flush(){this.k(this.d.end())}on(e,t){return super.on(e,t),this}handleData(e){if(this.b)return;const t=typeof e=="string"?e:this.d.write(e);this.k(t)}k(e){let t=e.indexOf(`
`);const i=this.a+e;if(t>=0)t+=this.a.length;else{this.a=i;return}let r=0;for(;t>=0;)this.m(i.substring(r,t).trim()),r=t+1,t=i.indexOf(`
`,r);this.a=i.substring(r)}m(e){if(this.b||!e)return;let t;try{t=JSON.parse(e)}catch{throw new Error(`malformed line from rg: ${e}`)}if(t.type==="match"){const i=sh(t.data.path),r=A.joinPath(this.h,i),s=this.n(t.data,r);this.p(s),this.c&&(this.cancel(),this.emit("hitLimit"))}else if(t.type==="context"){const i=sh(t.data.path),r=A.joinPath(this.h,i);this.o(t.data,r).forEach(n=>this.p(n))}}n(e,t){const i=e.line_number-1,r=sh(e.lines),s=Buffer.from(r);let n=0,o=0,a=i;e.submatches.length===0&&e.submatches.push(r.length?{start:0,end:1,match:{text:r[0]}}:{start:0,end:0,match:{text:""}});const c=yt(e.submatches.map((h,d)=>{if(this.c)return null;this.f++,this.f>=this.g&&(this.c=!0);const f=sh(h.match),g=s.slice(n,h.start).toString(),v=I8(g),b=v.numLines>0?v.lastLineLength:v.lastLineLength+o,x=I8(f),E=v.numLines+a,I=x.numLines+E,U=x.numLines>0?x.lastLineLength:x.lastLineLength+b;return n=h.end,o=U,a=I,new nI(E,b,I,U)})),l=qh(c,wW),u=new hI(r,l,this.j);return new Fs(t,u.rangeLocations.map(h=>({sourceRange:y8(h.source),previewRange:y8(h.preview)})),u.previewText)}o(e,t){const i=sh(e.lines),r=e.line_number;return i.replace(/\r?\n$/,"").split(`
`).map((s,n)=>new Yp(t,s,r+n))}p(e){this.emit("result",e)}};function sh(e){return e.bytes?Buffer.from(e.bytes,"base64").toString():e.text}function I8(e){const t=/\n/g;let i=0,r=-1,s;for(;s=t.exec(e);)i++,r=s.index;const n=r>=0?e.length-r-1:e.length;return{numLines:i,lastLineLength:n}}function UW(e,t){const i=["--hidden","--no-require-git"];i.push(e.isCaseSensitive?"--case-sensitive":"--ignore-case");const{doubleStarIncludes:r,otherIncludes:s}=Km(t.folderOptions.includes,o=>o.startsWith("**")?"doubleStarIncludes":"otherIncludes");if(s&&s.length){const o=new Set;s.forEach(a=>{o.add(a)}),i.push("-g","!*"),o.forEach(a=>{BW(a).map(Zg).forEach(c=>{i.push("-g",c)})})}r&&r.length&&r.forEach(o=>{i.push("-g",o)}),t.folderOptions.excludes.map(o=>typeof o=="string"?o:o.pattern).map(Zg).forEach(o=>i.push("-g",`!${o}`)),t.maxFileSize&&i.push("--max-filesize",t.maxFileSize+""),t.folderOptions.useIgnoreFiles.local?t.folderOptions.useIgnoreFiles.parent||i.push("--no-ignore-parent"):i.push("--no-ignore"),t.folderOptions.followSymlinks&&i.push("--follow"),t.folderOptions.encoding&&t.folderOptions.encoding!=="utf8"&&i.push("--encoding",t.folderOptions.encoding),t.numThreads&&i.push("--threads",`${t.numThreads}`),e.pattern==="--"&&(e.isRegExp=!0,e.pattern="\\-\\-"),e.isMultiline&&!e.isRegExp&&(e.pattern=ln(e.pattern),e.isRegExp=!0),t.usePCRE2&&i.push("--pcre2"),i.push("--crlf"),e.isRegExp&&(e.pattern=zW(e.pattern),i.push("--engine","auto"));let n;if(e.isWordMatch){const a=I5(e.pattern,!!e.isRegExp,{wholeWord:e.isWordMatch}).source.replace(/\\\//g,"/");i.push("--regexp",a)}else if(e.isRegExp){let o=HW(e.pattern);o=WW(o),i.push("--regexp",o)}else n=e.pattern,i.push("--fixed-strings");return i.push("--no-config"),t.folderOptions.useIgnoreFiles.global||i.push("--no-ignore-global"),i.push("--json"),e.isMultiline&&i.push("--multiline"),t.surroundingContext&&(i.push("--before-context",t.surroundingContext+""),i.push("--after-context",t.surroundingContext+"")),i.push("--"),n&&i.push(n),i.push("."),i}function BW(e){return $8(e).flatMap(i=>{const r=Ll(i,"/");return r.map((s,n)=>r.slice(0,n+1).join("/"))})}function zW(e){const t=/((?:[^\\]|^)(?:\\\\)*)\\u([a-z0-9]{4})/gi;for(;e.match(t);)e=e.replace(t,"$1\\x{$2}");const i=/((?:[^\\]|^)(?:\\\\)*)\\u\{([a-z0-9]{4})\}/gi;for(;e.match(i);)e=e.replace(i,"$1\\x{$2}");return e}var C8=e=>e.type==="Assertion"&&e.kind==="lookbehind";function HW(e){let t;try{t=new NW().parsePattern(e)}catch{return e}let i="",r=0;const s=(a,c,l)=>{i+=e.slice(r,a)+l,r=c},n=[];return new LW({onCharacterEnter(a){if(a.raw!=="\\n")return;const c=n[0];if(!c)s(a.start,a.end,"\\r?\\n");else if(!n.some(C8))if(c.type==="CharacterClass")if(c.negate){const l=e.slice(c.start+2,a.start)+e.slice(a.end,c.end-1);c.parent?.type==="Quantifier"?s(c.start,c.end,l?`[^${l}]`:"."):s(c.start,c.end,"(?!\\r?\\n"+(l?`|[${l}]`:"")+")")}else{const l=e.slice(c.start+1,a.start)+e.slice(a.end,c.end-1);s(c.start,c.end,l===""?"\\r?\\n":`(?:[${l}]|\\r?\\n)`)}else c.type==="Quantifier"&&s(a.start,a.end,"(?:\\r?\\n)")},onQuantifierEnter(a){n.unshift(a)},onQuantifierLeave(){n.shift()},onCharacterClassRangeEnter(a){n.unshift(a)},onCharacterClassRangeLeave(){n.shift()},onCharacterClassEnter(a){n.unshift(a)},onCharacterClassLeave(){n.shift()},onAssertionEnter(a){C8(a)&&n.push(a)},onAssertionLeave(a){n[0]===a&&n.shift()}}).visit(t),i+=e.slice(r),i}function WW(e){return e.replace(/\n/g,"\\r?\\n")}function _W(e){let t=!1,i=!1,r="",s="";for(let n=0;n<e.length;n++){const o=e[n];switch(o){case"\\":i?(t?s+="\\"+o:r+="\\"+o,i=!1):i=!0;break;case"{":if(i)t?s+=o:r+=o,i=!1;else{if(t)return{strInBraces:r+"{"+s+"{"+e.substring(n+1)};t=!0}break;case"}":if(i)t?s+=o:r+=o,i=!1;else{if(t)return{fixedStart:r,strInBraces:s,fixedEnd:e.substring(n+1)};r+=o}break;default:t?s+=(i?"\\":"")+o:r+=(i?"\\":"")+o,i=!1;break}}return{strInBraces:r+(t?"{"+s:"")}}function $8(e){const{fixedStart:t,strInBraces:i,fixedEnd:r}=_W(e);if(t===void 0||r===void 0)return[i];let s=Ll(i,",");s.length||(s=[""]);const n=$8(r);return s.flatMap(o=>{const a=t+o;return n.map(c=>a+c)})}var D8=class extends Ty{constructor(e,t,i=wd,r="searchProcess"){super({query:e,provider:t},{readdir:s=>i.Promises.readdir(s.fsPath),toCanonicalName:s=>mU(s)},r)}},VW=class{constructor(e,t){this.a=e,this.b=t}search(e,t,i){if((!this.a.folderQueries||!this.a.folderQueries.length)&&(!this.a.extraFileResources||!this.a.extraFileResources.length))return Promise.resolve({type:"success",limitHit:!1,stats:{type:"searchProcess"},messages:[]});const r={appendLine(n){i({message:n})}},s=new D8(this.a,new k8(r,this.b),wd);return new Promise((n,o)=>s.search(a=>{t(a.map(qW))},e).then(a=>n({limitHit:a.limitHit??!1,type:"success",stats:a.stats,messages:[]}),o))}};function qW(e){return{path:e.resource&&e.resource.fsPath,results:e.results,numMatches:(e.results||[]).reduce((t,i)=>Gw(i)?t+i.rangeLocations.length:t+1,0)}}var GW=class Vm{static{this.a=512}constructor(t="searchProcess",i){this.d=t,this.f=i,this.b=Object.create(null)}fileSearch(t){let i;const r=P8(t),s=new $({onDidAddFirstListener:()=>{i=As(async n=>{const o=await this.f?.();return this.doFileSearchWithEngine(E8,r,a=>s.fire(a),n,Vm.a,o)}),i.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{i.cancel()}});return s.event}textSearch(t){let i;const r=P8(t),s=new $({onDidAddFirstListener:()=>{i=As(n=>this.g(r,o=>s.fire(o),n)),i.then(n=>s.fire(n),n=>s.fire({type:"error",error:{message:n.message,stack:n.stack}}))},onDidRemoveLastListener:()=>{i.cancel()}});return s.event}async g(t,i,r){t.maxFileSize=this.h().maxFileSize;const s=await this.f?.();return new VW(t,s).search(r,i,i)}h(){return{maxFileSize:16*vk.GB}}doFileSearch(t,i,r,s){return this.doFileSearchWithEngine(E8,t,r,s,Vm.a,i)}doFileSearchWithEngine(t,i,r,s,n=Vm.a,o){let a=0;const c=u=>{Array.isArray(u)?(a+=u.length,r(u.map(h=>this.j(h)))):u.relativePath?(a++,r(this.j(u))):r(u)};if(i.sortByScore){let u=this.n(i,c,s);if(!u){const h=i.maxResults?Object.assign({},i,{maxResults:null}):i,d=new t(h,o);u=this.k(d,i,r,c,s)}return new Promise((h,d)=>{u.then(([f,g])=>{const v=g.map(b=>this.j(b));this.q(v,r,n),h(f)},d)})}const l=new t(i,o);return this.s(l,c,n,s).then(u=>({limitHit:u.limitHit,type:"success",stats:{detailStats:u.stats,type:this.d,fromCache:!1,resultCount:a,sortingTime:void 0},messages:[]}))}j(t){return{path:t.base?He(t.base,t.relativePath):t.relativePath}}k(t,i,r,s,n){const o=new $;let a=As(l=>{let u=[];const h=d=>{Array.isArray(d)?u=d:(s(d),o.fire(d))};return this.s(t,h,-1,l).then(d=>[d,u])}),c;if(i.cacheKey){c=this.l(i.cacheKey);const l={promise:a,event:o.event,resolved:!1};c.resultsToSearchCache[i.filePattern||""]=l,a.then(()=>{l.resolved=!0},u=>{delete c.resultsToSearchCache[i.filePattern||""]}),a=this.t(a)}return a.then(([l,u])=>{const h=c?c.scorerCache:Object.create(null),d=(typeof i.maxResults!="number"||i.maxResults>0)&&Oi.create(!1);return this.o(i,u,h,n).then(f=>{const g=d?d.elapsed():-1;return[{type:"success",stats:{detailStats:l.stats,sortingTime:g,fromCache:!1,type:this.d,resultCount:f.length},messages:l.messages,limitHit:l.limitHit||typeof i.maxResults=="number"&&u.length>i.maxResults},f]})})}l(t){const i=this.b[t];return i||(this.b[t]=new ZW)}n(t,i,r){const s=t.cacheKey&&this.b[t.cacheKey];if(!s)return;const n=this.r(s,t.filePattern||"",i,r);if(n)return n.then(([o,a,c])=>{const l=Oi.create(!1);return this.o(t,a,s.scorerCache,r).then(u=>{const h=l.elapsed(),d={fromCache:!0,detailStats:c,type:this.d,resultCount:a.length,sortingTime:h};return[{type:"success",limitHit:o.limitHit||typeof t.maxResults=="number"&&a.length>t.maxResults,stats:d,messages:[]},u]})})}o(t,i,r,s){const n=qy(t.filePattern||""),o=(c,l)=>dW(c,l,n,!0,JW,r),a=typeof t.maxResults=="number"?t.maxResults:Xp;return u2(i,o,a,1e4,s)}q(t,i,r){if(r&&r>0)for(let s=0;s<t.length;s+=r)i(t.slice(s,s+r));else i(t)}r(t,i,r,s){const n=Oi.create(!1),o=i.indexOf(vt)>=0;let a;for(const h in t.resultsToSearchCache)if(i.startsWith(h)){if(o&&h.indexOf(vt)<0&&h!=="")continue;const d=t.resultsToSearchCache[h];a={promise:this.t(d.promise),event:d.event,resolved:d.resolved};break}if(!a)return null;const c=n.elapsed(),l=Oi.create(!1),u=a.event(r);return s&&s.onCancellationRequested(()=>{u.dispose()}),a.promise.then(([h,d])=>{if(s&&s.isCancellationRequested)throw Kc();const f=[],g=qy(i).normalizedLowercase;for(const v of d)Jw(v,g)&&f.push(v);return[h,f,{cacheWasResolved:a.resolved,cacheLookupTime:c,cacheFilterTime:l.elapsed(),cacheEntryCount:d.length}]})}s(t,i,r,s){return new Promise((n,o)=>{let a=[];s?.onCancellationRequested(()=>t.cancel()),t.search(c=>{c&&(r?(a.push(c),r>0&&a.length>=r&&(i(a),a=[])):i(c))},c=>{i(c)},(c,l)=>{a.length&&i(a),c?(i({message:"Search finished. Error: "+c.message}),o(c)):(i({message:"Search finished. Stats: "+JSON.stringify(l.stats)}),n(l))})})}clearCache(t){return delete this.b[t],Promise.resolve(void 0)}t(t){return new class{get[Symbol.toStringTag](){return this.toString()}cancel(){}then(i,r){return t.then(i,r)}catch(i){return this.then(void 0,i)}finally(i){return t.finally(i)}}}},ZW=class{constructor(){this.resultsToSearchCache=Object.create(null),this.scorerCache=Object.create(null)}},JW=new class{getItemLabel(e){return dt(e.relativePath)}getItemDescription(e){return Ai(e.relativePath)}getItemPath(e){return e.relativePath}};function P8(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(YW),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>A.revive(t))}}function YW(e){return Jt(e)}var T8=class{constructor(e,t){this.b=e,this.c=t,this.a=new Set,process.once("exit",()=>this.f())}async provideTextSearchResults(e,t,i,r){const s=await this.c(),n=new k8(this.b,s);return Promise.all(t.folderOptions.map(o=>{const a={folderOptions:o,numThreads:s,maxResults:t.maxResults,previewOptions:t.previewOptions,maxFileSize:t.maxFileSize,surroundingContext:t.surroundingContext};if(o.folder.scheme===q.vscodeUserData){const c={...a,folder:o.folder.with({scheme:q.file})},l=new pg(u=>i.report({...u,uri:u.uri.with({scheme:o.folder.scheme})}));return this.d(r,u=>n.provideTextSearchResultsWithRgOptions(e,c,l,u))}else return this.d(r,c=>n.provideTextSearchResultsWithRgOptions(e,a,i,c))})).then(o=>({limitHit:o.some(c=>!!c&&c.limitHit)}))}async d(e,t){const i=QW(e);this.a.add(i);const r=await t(i.token);return this.a.delete(i),r}f(){this.a.forEach(e=>e.cancel())}};function QW(e){const t=new tt;return e.onCancellationRequested(()=>t.cancel()),t}var Zy=class extends Og{constructor(t,i,r,s,n){super(t,r,n),this.E=s,this.x=wd,this.y=-1,this.z=null,this.A=!1,this.C=new le,this.D=!1,this.getNumThreads=this.getNumThreads.bind(this),this.getNumThreadsCached=this.getNumThreadsCached.bind(this),this.F=this.F.bind(this);const o=new Jg("RipgrepSearchUD",this.s);this.C.add(this.registerTextSearchProvider(q.vscodeUserData,new T8(o,this.getNumThreadsCached))),i.remote.isRemote&&i.remote.authority&&this.G(),s.getConfigProvider().then(a=>{this.D||this.C.add(a.onDidChangeConfiguration(this.F))})}F(t){t.affectsConfiguration("search")&&(this.B=void 0)}async getNumThreads(){return(await this.E.getConfigProvider()).getConfiguration("search").get("ripgrep.maxThreads")}async getNumThreadsCached(){return this.B||(this.B=this.getNumThreads()),this.B}dispose(){this.D=!0,this.C.dispose()}$enableExtensionHostSearch(){this.G()}G(){if(this.A)return;this.A=!0;const t=new Jg("RipgrepSearchEH",this.s);this.C.add(this.registerTextSearchProvider(q.file,new T8(t,this.getNumThreadsCached))),this.C.add(this.H(q.file,new GW("fileSearchProvider",this.getNumThreadsCached)))}H(t,i){const r=this.e++;return this.z=i,this.y=r,this.c.$registerFileSearchProvider(r,this.t(t)),re(()=>{this.z=null,this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=Fg(r);if(t===this.y){const o=Date.now();return this.I(t,i,n,s).then(a=>{const c=Date.now()-o;return this.s.debug(`Ext host file search time: ${c}ms`),a})}return super.$provideFileSearchResults(t,i,r,s)}async doInternalFileSearchWithCustomCallback(t,i,r){const s=o=>{if(Jj(o)&&(o=[o]),Array.isArray(o)){r(o.map(a=>A.file(a.path)));return}o.message&&this.s.debug("ExtHostSearch",o.message)};if(!this.z)throw new Error("No internal file search handler");const n=await this.getNumThreadsCached();return this.z.doFileSearch(t,n,s,i)}async I(t,i,r,s){return this.doInternalFileSearchWithCustomCallback(r,s,n=>{this.c.$handleFileMatch(t,i,n)})}$clearCache(t){return this.z?.clearCache(t),super.$clearCache(t)}v(t,i){return new D8(t,i,void 0,"textSearchProvider")}};Zy=__decorate([__param(0,De),__param(1,At),__param(2,Sl),__param(3,hr),__param(4,Ce)],Zy);function M8(e,t,i,r,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=M8(a,t,i,r,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return r?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!r&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===i)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let d;if(typeof a=="string"?d=a:d={...a,base:ys(a.base)},d===t.fsPath||Pa(d,t.fsPath))h=10;else return 0}return h}else return 0}}function N8(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(N8):!!e.notebookType}var Jy;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Jy||(Jy={}));var hee=V("editSessionIdentityService"),Yy;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(Yy||(Yy={}));var dee=new Z("debugType",void 0,{type:"string",description:p(6891,null)}),fee=new Z("debugConfigurationType",void 0,{type:"string",description:p(6892,null)}),pee=new Z("debugState","inactive",{type:"string",description:p(6893,null)}),XW="debugUx",gee=new Z(XW,"default",{type:"string",description:p(6894,null)}),mee=new Z("hasDebugged",!1,{type:"boolean",description:p(6895,null)}),vee=new Z("inDebugMode",!1,{type:"boolean",description:p(6896,null)}),wee=new Z("inDebugRepl",!1,{type:"boolean",description:p(6897,null)}),bee=new Z("breakpointWidgetVisible",!1,{type:"boolean",description:p(6898,null)}),yee=new Z("inBreakpointWidget",!1,{type:"boolean",description:p(6899,null)}),Aee=new Z("breakpointsFocused",!0,{type:"boolean",description:p(6900,null)}),xee=new Z("watchExpressionsFocused",!0,{type:"boolean",description:p(6901,null)}),Eee=new Z("watchExpressionsExist",!1,{type:"boolean",description:p(6902,null)}),See=new Z("variablesFocused",!0,{type:"boolean",description:p(6903,null)}),kee=new Z("expressionSelected",!1,{type:"boolean",description:p(6904,null)}),Iee=new Z("breakpointInputFocused",!1,{type:"boolean",description:p(6905,null)}),Cee=new Z("callStackItemType",void 0,{type:"string",description:p(6906,null)}),$ee=new Z("callStackSessionIsAttach",!1,{type:"boolean",description:p(6907,null)}),Dee=new Z("callStackItemStopped",!1,{type:"boolean",description:p(6908,null)}),Pee=new Z("callStackSessionHasOneThread",!1,{type:"boolean",description:p(6909,null)}),Tee=new Z("callStackFocused",!0,{type:"boolean",description:p(6910,null)}),Mee=new Z("watchItemType",void 0,{type:"string",description:p(6911,null)}),Nee=new Z("canViewMemory",void 0,{type:"boolean",description:p(6912,null)}),Lee=new Z("breakpointItemType",void 0,{type:"string",description:p(6913,null)}),Ree=new Z("breakpointItemBytes",void 0,{type:"boolean",description:p(6914,null)}),Oee=new Z("breakpointHasModes",!1,{type:"boolean",description:p(6915,null)}),Fee=new Z("breakpointSupportsCondition",!1,{type:"boolean",description:p(6916,null)}),jee=new Z("loadedScriptsSupported",!1,{type:"boolean",description:p(6917,null)}),Uee=new Z("loadedScriptsItemType",void 0,{type:"string",description:p(6918,null)}),Bee=new Z("focusedSessionIsAttach",!1,{type:"boolean",description:p(6919,null)}),zee=new Z("focusedSessionIsNoDebug",!1,{type:"boolean",description:p(6920,null)}),Hee=new Z("stepBackSupported",!1,{type:"boolean",description:p(6921,null)}),Wee=new Z("restartFrameSupported",!1,{type:"boolean",description:p(6922,null)}),_ee=new Z("stackFrameSupportsRestart",!1,{type:"boolean",description:p(6923,null)}),Vee=new Z("jumpToCursorSupported",!1,{type:"boolean",description:p(6924,null)}),qee=new Z("stepIntoTargetsSupported",!1,{type:"boolean",description:p(6925,null)}),Gee=new Z("breakpointsExist",!1,{type:"boolean",description:p(6926,null)}),Zee=new Z("debuggersAvailable",!1,{type:"boolean",description:p(6927,null)}),Jee=new Z("debugExtensionAvailable",!0,{type:"boolean",description:p(6928,null)}),Yee=new Z("debugProtocolVariableMenuContext",void 0,{type:"string",description:p(6929,null)}),Qee=new Z("debugSetVariableSupported",!1,{type:"boolean",description:p(6930,null)}),Xee=new Z("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:p(6931,null)}),Kee=new Z("debugSetExpressionSupported",!1,{type:"boolean",description:p(6932,null)}),ete=new Z("breakWhenValueChangesSupported",!1,{type:"boolean",description:p(6933,null)}),tte=new Z("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:p(6934,null)}),ite=new Z("breakWhenValueIsReadSupported",!1,{type:"boolean",description:p(6935,null)}),rte=new Z("terminateDebuggeeSupported",!1,{type:"boolean",description:p(6936,null)}),ste=new Z("suspendDebuggeeSupported",!1,{type:"boolean",description:p(6937,null)}),nte=new Z("terminateThreadsSupported",!1,{type:"boolean",description:p(6938,null)}),ote=new Z("variableEvaluateNamePresent",!1,{type:"boolean",description:p(6939,null)}),ate=new Z("variableIsReadonly",!1,{type:"boolean",description:p(6940,null)}),cte=new Z("variableValue",!1,{type:"string",description:p(6941,null)}),lte=new Z("variableType",!1,{type:"string",description:p(6942,null)}),ute=new Z("variableInterfaces",!1,{type:"array",description:p(6943,null)}),hte=new Z("variableName",!1,{type:"string",description:p(6944,null)}),dte=new Z("variableLanguage",!1,{type:"string",description:p(6945,null)}),fte=new Z("variableExtensionId",!1,{type:"string",description:p(6946,null)}),pte=new Z("exceptionWidgetVisible",!1,{type:"boolean",description:p(6947,null)}),gte=new Z("multiSessionRepl",!1,{type:"boolean",description:p(6948,null)}),mte=new Z("multiSessionDebug",!1,{type:"boolean",description:p(6949,null)}),vte=new Z("disassembleRequestSupported",!1,{type:"boolean",description:p(6950,null)}),wte=new Z("disassemblyViewFocus",!1,{type:"boolean",description:p(6951,null)}),bte=new Z("languageSupportsDisassembleRequest",!1,{type:"boolean",description:p(6952,null)}),yte=new Z("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:p(6953,null)}),Ate={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:p(6955,null)},L8;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(L8||(L8={}));var R8;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(R8||(R8={}));var O8;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(O8||(O8={}));var Qg;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(Qg||(Qg={}));var F8;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(F8||(F8={}));var xte=V("debugService"),j8;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(j8||(j8={}));var U8;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(U8||(U8={}));var B8;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(B8||(B8={}));var z8;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(z8||(z8={}));var H8;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:A.revive(t.iconPath.light),dark:A.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(H8||(H8={}));var KW=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Y.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiRelatedInformationProvider(r,t),new Me(()=>{this.c.$unregisterAiRelatedInformationProvider(r),this.a.delete(r)})}},W8;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(W8||(W8={}));function _8(e){for(let t=0,i=e.length;t<i;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function e_(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return y5()||_8(t),_.wrap(t)}function t_(e){const t=e.buffer;if(y5()||_8(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function Qy(e){const t=new Uint32Array(i_(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return e_(t)}function i_(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function V8(e){const t=t_(e);let i=0;const r=t[i++];if(t[i++]===1){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:r,type:"full",data:c}}const n=t[i++],o=[];for(let a=0;a<n;a++){const c=t[i++],l=t[i++],u=t[i++];let h;u>0&&(h=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:r,type:"delta",deltas:o}}var r_=[new be("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[z.Uri,z.Position],new ve("A promise that resolves to an array of DocumentHighlight-instances.",Rr(cc.to))),new be("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[z.Uri],new ve("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(s1(e))return;class i extends _l{constructor(){super(...arguments),this.containerName=""}static to(s){const n=new i(s.name,ur.to(s.kind),s.containerName||"",new tr(t[0],R.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=R.to(s.selectionRange),n.children=s.children?s.children.map(i.to):[],n}}return e.map(i.to)})),new be("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[z.Uri,new z("options","Formatting options",e=>!0,e=>e)],new ve("A promise that resolves to an array of TextEdits.",Rr(zt.to))),new be("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[z.Uri,z.Range,new z("options","Formatting options",e=>!0,e=>e)],new ve("A promise that resolves to an array of TextEdits.",Rr(zt.to))),new be("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[z.Uri,z.Position,new z("ch","Trigger character",e=>typeof e=="string",e=>e),new z("options","Formatting options",e=>!0,e=>e)],new ve("A promise that resolves to an array of TextEdits.",Rr(zt.to))),new be("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location or LocationLink instances.",zn)),new be("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location-instances.",Rr(Di.to))),new be("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Location-instances.",Rr(Di.to))),new be("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Hover-instances.",Rr(Eu.to))),new be("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[z.Uri,z.Position],new ve("A promise that resolves to an array of Hover-instances.",Rr(Eu.to))),new be("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[z.Uri,new z("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Ne.isPosition(t)),e=>e.map(Ge.from))],new ve("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const r of t.reverse())i=new Zl(R.to(r),i);return i}))),new be("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[z.String.with("query","Search string")],new ve("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(jo.to))),new be("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[z.Uri,z.Position],new ve("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Uo.to))),new be("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[z.CallHierarchyItem],new ve("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(gw.to))),new be("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[z.CallHierarchyItem],new ve("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(mw.to))),new be("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[z.Uri,z.Position],new ve("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:R.to(e.range),placeholder:e.text}})),new be("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[z.Uri,z.Position,z.String.with("newName","The new symbol name")],new ve("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return _i.to(e)}})),new be("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[z.Uri,z.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new ve("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Bo.to))),new be("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[z.Uri],new ve("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new M0(e.tokenTypes,e.tokenModifiers)})),new be("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[z.Uri],new ve("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=V8(e);if(t.type==="full")return new Ka(t.data,void 0)})),new be("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[z.Uri,z.Range.optional()],new ve("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new M0(e.tokenTypes,e.tokenModifiers)})),new be("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[z.Uri,z.Range],new ve("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=V8(e);if(t.type==="full")return new Ka(t.data,void 0)})),new be("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[z.Uri,z.Position,z.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),z.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new ve("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new ja([]);const r=e.suggestions.map(s=>xw.to(s,i));return new ja(r,e.incomplete)})),new be("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[z.Uri,z.Position,z.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new ve("A promise that resolves to SignatureHelp.",e=>{if(e)return Su.to(e)})),new be("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[z.Uri,z.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new ve("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>Rr(r=>new kf(R.to(r.range),r.command&&i.fromInternal(r.command)))(e))),new be("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[z.Uri,new z("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>Ie.isRange(e),e=>ts.isSelection(e)?Pr.from(e):R.from(e)),z.String.with("kind","Code action kind to return code actions for").optional(),z.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new ve("A promise that resolves to an array of Command-instances.",(e,t,i)=>Rr(r=>{if(r._isSynthetic){if(!r.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(r.command)}else{const s=new Gl(r.title,r.kind?new pt(r.kind):void 0);return r.edit&&(s.edit=_i.to(r.edit)),r.command&&(s.command=i.fromInternal(r.command)),s.isPreferred=r.isPreferred,s}})(e))),new be("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[z.Uri],new ve("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new Tf(R.to(t.range),lc.to(t.color))):[])),new be("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new z("color","The color to show and insert",e=>e instanceof _a,lc.from),new z("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:R.from(e.range)}))],new ve("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(kp.to):[])),new be("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[z.Uri,z.Range],new ve("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map(Ew.to.bind(void 0,i)))),new be("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[z.Uri],new ve("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map($p.to)})),new be("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new ve("A promise that resolves to an array of NotebookContentProvider static info objects.",Rr(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>Pp.to(t))})))),new be("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[z.Uri,z.Range,new z("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof Ie,e=>bp.from(e))],new ve("A promise that resolves to an array of InlineValue objects",e=>e.map(wp.to))),new be("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new z("uriOrString","Uri-instance or string (only http/https)",e=>A.isUri(e)||typeof e=="string"&&eM(e,q.http,q.https),e=>e),new z("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Bt.from(e),void 0]:[Bt.from(e.viewColumn),ku.from(e)])).optional(),z.String.with("label","").optional()],ve.Void),new be("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[z.Uri.with("resource","Resource to open"),z.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new z("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Bt.from(e),void 0]:[Bt.from(e.viewColumn),ku.from(e)])).optional()],ve.Void),new be("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[z.Uri.with("left","Left-hand side resource of the diff editor"),z.Uri.with("right","Right-hand side resource of the diff editor"),z.String.with("title","Human readable title for the diff editor").optional(),new z("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Bt.from(e.viewColumn),ku.from(e)]).optional()],ve.Void),new be("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[z.String.with("title","Human readable title for the changes editor"),new z("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,r,s]=t;if(!A.isUri(i)||!A.isUri(r)&&r!==void 0&&r!==null||!A.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],ve.Void),new be("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[z.Uri,z.Position],new ve("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(zo.to))),new be("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[z.TypeHierarchyItem],new ve("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(zo.to))),new be("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[z.TypeHierarchyItem],new ve("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(zo.to))),new be("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[z.TestItem],ve.Void),new be("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[z.TestProfile,z.Arr(z.TestItem)],ve.Void),new be("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[z.Arr(z.TestItem)],ve.Void),new be("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[z.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],ve.Void),new be("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[z.String.with("name","The context key name"),new z("value","The context key value",()=>!0,e=>e)],ve.Void),new be("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new z("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?R.from(e.initialRange):void 0,initialSelection:ts.isSelection(e.initialSelection)?Pr.from(e.initialSelection):void 0,message:e.message,attachments:e.attachments,autoSend:e.autoSend,position:e.position?Ge.from(e.position):void 0}})],ve.Void)],s_=class{static register(e){r_.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",nR)}};function Rr(e){return t=>{if(Array.isArray(t))return t.map(e)}}function zn(e){if(!Array.isArray(e))return;const t=[];for(const i of e)PO(i)?t.push(xu.to(i)):t.push(Di.to(i));return t}var Xy=class{constructor(t,i){this.a=t.getProxy(Y.MainThreadBulkEdits),this.b={getTextDocumentVersion:r=>i.getDocument(r)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,r){const s=new vi(_i.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,r?.isRefactoring??!1)}};Xy=__decorate([__param(0,De)],Xy);function n_(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var q8;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(q8||(q8={}));var G8;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(G8||(G8={}));var Xg;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Xg||(Xg={}));var Z8;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(Z8||(Z8={}));var J8;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(J8||(J8={}));var o_=V("IChatService"),a_=class{constructor(e,t,i,r,s){this.j=e,this.k=t,this.l=i,this.m=r,this.n=s,this.b=Oi.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let i=function(l){if(s.c){const u=new Error("Response stream has been closed");throw Error.captureStackTrace(u,l),u}},r=function(l,u){if(o.push(u!==void 0?[l,u]:l)===1&&queueMicrotask(()=>{s.l.$handleProgressChunk(s.k.requestId,o).finally(()=>{a.forEach(d=>d()),a.length=0}),o.length=0}),u!==void 0)return new Promise(d=>{a.push(d)})};var e=i,t=r;const s=this;this.b.reset();let n=0;const o=[],a=[],c=(l,u)=>{if(typeof this.d>"u"&&(l.kind==="markdownContent"||l.kind==="markdownVuln"||l.kind==="prepareToolInvocation")&&(this.d=this.b.elapsed()),u){const h=n++,d=r(l,h),f={report:g=>{d.then(()=>{Hi.isMarkdownString(g.value)?r(Mu.from(g),h):r(Wo.from(g),h)})}};Promise.all([d,u(f)]).then(([g,v])=>{r(Rw.from(v),h)})}else r(l)};this.g=Object.freeze({markdown(l){i(this.markdown);const u=new rp(l),h=Du.from(u);return c(h),this},markdownWithVulnerabilities(l,u){i(this.markdown),u&&M(s.j,"chatParticipantAdditions");const h=new pu(l,u),d=Rp.from(h);return c(d),this},codeblockUri(l,u){i(this.codeblockUri),M(s.j,"chatParticipantAdditions");const h=new cp(l,u),d=Lp.from(h);return c(d),this},filetree(l,u){i(this.filetree);const h=new np(l,u),d=Pu.from(h);return c(d),this},anchor(l,u){const h=new gu(l,u);return this.push(h)},button(l){i(this.anchor);const u=new ap(l),h=Lu.from(u,s.m,s.n);return c(h),this},progress(l,u){i(this.progress);const h=new op(l,u),d=u?Fp.from(h):Tu.from(h);return c(d,u),this},warning(l){i(this.progress),M(s.j,"chatParticipantAdditions");const u=new mu(l),h=Mu.from(u);return c(h),this},reference(l,u){return this.reference2(l,u)},reference2(l,u,h){if(i(this.reference),typeof l=="object"&&"variableName"in l&&M(s.j,"chatParticipantAdditions"),typeof l=="object"&&"variableName"in l&&!l.value){const d=s.k.variables.variables.find(f=>f.name===l.variableName);if(d){let f;if(d.references?.length)f=d.references.map(g=>({kind:"reference",reference:{variableName:l.variableName,value:g.reference}}));else{const g=new Oo(l,u,h);f=[Wo.from(g)]}return f.forEach(g=>c(g)),this}}else{const d=new Oo(l,u,h),f=Wo.from(d);c(f)}return this},codeCitation(l,u,h){i(this.codeCitation),M(s.j,"chatParticipantAdditions");const d=new lp(l,u,h),f=zp.from(d);c(f)},textEdit(l,u){i(this.textEdit),M(s.j,"chatParticipantAdditions");const h=new vu(l,u);h.isDone=u===!0?!0:void 0;const d=jp.from(h);return c(d),this},notebookEdit(l,u){i(this.notebookEdit),M(s.j,"chatParticipantAdditions");const h=new hp(l,u),d=Bp.from(h);return c(d),this},confirmation(l,u,h,d){i(this.confirmation),M(s.j,"chatParticipantAdditions");const f=new sp(l,u,h,d),g=Op.from(f);return c(g),this},prepareToolInvocation(l){i(this.prepareToolInvocation),M(s.j,"chatParticipantAdditions");const u=new wu(l),h=Nu.from(u);return c(h),this},push(l){if(i(this.push),(l instanceof vu||l instanceof hp||l instanceof pu||l instanceof mu||l instanceof sp||l instanceof lp||l instanceof up||l instanceof K0||l instanceof op)&&M(s.j,"chatParticipantAdditions"),l instanceof Oo)this.reference2(l.value,l.iconPath,l.options);else if(l instanceof op){const u=l.task?Fp.from(l):Tu.from(l);c(u,l.task)}else if(l instanceof gu){const u=bc.from(l);if(l.resolve){M(s.j,"chatParticipantAdditions"),u.resolveId=kt();const h=new tt;l.resolve(h.token).then(()=>{const d=bc.from(l);s.l.$handleAnchorResolve(s.k.requestId,u.resolveId,d)}).then(()=>h.dispose(),()=>h.dispose()),s.n.add(re(()=>h.dispose(!0)))}c(u)}else if(l instanceof wu){M(s.j,"chatParticipantAdditions");const u=Nu.from(l);return c(u),this}else{const u=Hp.from(l,s.m,s.n);c(u)}return this}})}return this.g}},c_=class Nh extends te{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,i,r,s,n,o,a){super(),this.z=i,this.C=r,this.D=s,this.F=n,this.G=o,this.H=a,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new ga),this.u=this.B(new ga),this.w=new Set,this.y=this.B(new $),this.onDidDisposeChatSession=this.y.event,this.g=t.getProxy(Y.MainThreadChatAgents2),r.registerArgumentProcessor({processArgument:c=>n_(c)?null:c})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,i,r){const s=Nh.b++,n=new Y8(t,i,this.g,s,r);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,i,{},void 0),n.apiAgent}createDynamicChatAgent(t,i,r,s){const n=Nh.b++,o=new Y8(t,i,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,i,{isSticky:!0},r),o.apiAgent}registerChatParticipantDetectionProvider(t,i){const r=Nh.j++;return this.m.set(r,new l_(t,i)),this.g.$registerChatParticipantDetectionProvider(r),re(()=>{this.m.delete(r),this.g.$unregisterChatParticipantDetectionProvider(r)})}registerRelatedFilesProvider(t,i,r){const s=Nh.n++;return this.s.set(s,new u_(t,i)),this.g.$registerRelatedFilesProvider(s,r),re(()=>{this.s.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}async $provideRelatedFiles(t,i,r){const s=this.s.get(t);if(!s)return Promise.resolve([]);const n=Ow.to(i);return await s.provider.provideRelatedFiles(n,r)??void 0}async $detectChatParticipant(t,i,r,s,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.I(i,r,o.extension),u=await this.J(a,o.extension),h=Wp.to(a,c,u,this.L(o.extension),this.M(o.extension,a),o.extension,this.z);return o.provider.provideParticipantDetection(h,{history:l},{participants:s.participants,location:_p.to(s.location)},n)}async I(t,i,r){const s=Jt(t),n=await this.N(r,s.agentId,i);let o;if(s.locationData?.type===$i.Editor){const a=this.D.getDocument(s.locationData.document);o=new C9(a,Pr.to(s.locationData.selection),R.to(s.locationData.wholeRange))}else if(s.locationData?.type===$i.Notebook){const a=this.D.getDocument(s.locationData.sessionInputUri);o=new $9(a)}else s.locationData?.type,$i.Terminal;return{request:s,location:o,history:n}}async J(t,i){let r;if(t.userSelectedModelId&&(r=await this.F.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.F.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}async $setRequestPaused(t,i,r){const s=this.c.get(t);if(!s)return;const n=li.find(this.w,o=>o.requestId===i);n&&s.setChatRequestPauseState({request:n.extRequest,isPaused:r})}async $invokeAgent(t,i,r,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.I(i,r,n.extension);let h=this.t.get(c.sessionId);h||(h=new le,this.t.set(c.sessionId,h)),o=new a_(n.extension,c,this.g,this.C.converter,h);const d=await this.J(c,n.extension),f=Wp.to(c,l,d,this.L(n.extension),this.M(n.extension,c),n.extension,this.z);a={requestId:i.requestId,extRequest:f},this.w.add(a);const g=n.invoke(f,{history:u},o.apiObject,s);return await h_(1e3,Promise.resolve(g).then(v=>{if(v?.metadata)try{JSON.stringify(v.metadata)}catch(x){const E=`result.metadata MUST be JSON.stringify-able. Got error: ${x.message}`;return this.z.error(`[${n.extension.identifier.value}] [@${n.id}] ${E}`,n.extension),{errorDetails:{message:E},timings:o?.timings,nextQuestion:v.nextQuestion}}let b;return v?.errorDetails&&(b={...v.errorDetails,responseIsIncomplete:!0}),(b?.responseIsRedacted||b?.isQuotaExceeded||b?.confirmationButtons)&&M(n.extension,"chatParticipantPrivate"),{errorDetails:b,timings:o?.timings,metadata:v?.metadata,nextQuestion:v?.nextQuestion}}),s)}catch(c){this.z.error(c,n.extension),c instanceof Rs&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded";return{errorDetails:{message:Zr(c),responseIsIncomplete:!0,isQuotaExceeded:l}}}finally{a&&this.w.delete(a),o?.close()}}L(t){return et(t,"chatReferenceDiagnostic")?this.G.getDiagnostics():[]}M(t,i){if(!i.userSelectedTools)return new Map;const r=new Map;for(const s of this.H.getTools(t))typeof i.userSelectedTools[s.name]=="boolean"&&r.set(s.name,i.userSelectedTools[s.name]);return r}async N(t,i,r){const s=[];for(const n of r.history){const o=yc.to(n.result),a=i===n.request.agentId?o:{...o,metadata:void 0},c=[],l=[];for(const f of n.request.variables.variables)if(f.kind==="tool")l.push(Ru.to(f));else if(f.kind==="toolset")l.push(...f.value.map(Ru.to));else{const g=Vp.to(f,this.L(t),this.z);g&&c.push(g)}const u=et(t,"chatParticipantPrivate")?n.request.editedFileEvents:void 0,h=new ew(n.request.message,n.request.command,c,n.request.agentId,l,u);s.push(h);const d=yt(n.response.map(f=>Hp.toContent(f,this.C.converter)));s.push(new I9(d,a,n.request.agentId,n.request.command))}return s}$releaseSession(t){this.t.deleteAndDispose(t),this.y.fire(t)}async $provideFollowups(t,i,r,s,n){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=Jt(t),c=await this.N(o.extension,o.id,s),l=yc.to(r);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||li.some(this.c.values(),d=>d.id===u.participant&&Ve.equals(d.extension.identifier,o.extension.identifier));return h||this.z.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>Np.from(u,a))}$acceptFeedback(t,i,r){const s=this.c.get(t);if(!s)return;const n=yc.to(i);let o;switch(r.direction){case Xg.Down:o=fu.Unhelpful;break;case Xg.Up:o=fu.Helpful;break}const a={result:n,kind:o,unhelpfulReason:et(s.extension,"chatParticipantAdditions")?r.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,i,r){const s=this.c.get(t);if(!s||r.action.kind==="vote")return;const n=jw.to(i,r,this.C.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,i,r){const s=this.c.get(t);if(!s)return[];let n=this.u.get(t);return n?n.clear():(n=new le,this.u.set(t,n)),(await s.invokeCompletionProvider(i,r)).map(a=>Fw.from(a,this.C.converter,n))}async $provideChatTitle(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.N(s.extension,s.id,{history:i});return await s.provideTitle({history:n},r)}async $provideChatSummary(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.N(s.extension,s.id,{history:i});return await s.provideSummary({history:n},r)}},l_=class{constructor(e,t){this.extension=e,this.provider=t}},u_=class{constructor(e,t){this.extension=e,this.provider=t}},Y8=class{constructor(e,t,i,r,s){this.extension=e,this.id=t,this.w=i,this.x=r,this.y=s,this.k=new $,this.l=new $,this.u=new $}acceptFeedback(e){this.k.fire(e)}acceptAction(e){this.l.fire(e)}setChatRequestPauseState(e){this.u.fire(e)}async invokeCompletionProvider(e,t){return this.n?await this.n.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const r=await this.b.provideFollowups(e,t,i);return r?r.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideTitle(e,t){if(this.q)return await this.q.provideChatTitle(e,t)??void 0}async provideSummary(e,t){if(this.s)return await this.s.provideChatSummary(e,t)??void 0}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof A?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof hi?this.c:void 0,hasFollowups:this.b!==void 0,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:xe.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:xe.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:xe.from(this.j),supportIssueReporting:this.m,requester:this.t,additionalWelcomeMessage:!this.o||typeof this.o=="string"?this.o:xe.from(this.o)}),t=!1}))},r=this;return{get id(){return r.id},get iconPath(){return r.c},set iconPath(s){r.c=s,i()},get requestHandler(){return r.y},set requestHandler(s){c1(typeof s=="function","Invalid request handler"),r.y=s},get followupProvider(){return r.b},set followupProvider(s){r.b=s,i()},get helpTextPrefix(){return M(r.extension,"defaultChatParticipant"),r.d},set helpTextPrefix(s){M(r.extension,"defaultChatParticipant"),r.d=s,i()},get helpTextVariablesPrefix(){return M(r.extension,"defaultChatParticipant"),r.g},set helpTextVariablesPrefix(s){M(r.extension,"defaultChatParticipant"),r.g=s,i()},get helpTextPostfix(){return M(r.extension,"defaultChatParticipant"),r.j},set helpTextPostfix(s){M(r.extension,"defaultChatParticipant"),r.j=s,i()},get supportIssueReporting(){return M(r.extension,"chatParticipantPrivate"),r.m},set supportIssueReporting(s){M(r.extension,"chatParticipantPrivate"),r.m=s,i()},get onDidReceiveFeedback(){return r.k.event},set participantVariableProvider(s){if(M(r.extension,"chatParticipantAdditions"),r.n=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");r.w.$registerAgentCompletionsProvider(r.x,r.id,s.triggerCharacters)}else r.w.$unregisterAgentCompletionsProvider(r.x,r.id)},get participantVariableProvider(){return M(r.extension,"chatParticipantAdditions"),r.n},set additionalWelcomeMessage(s){M(r.extension,"defaultChatParticipant"),r.o=s,i()},get additionalWelcomeMessage(){return M(r.extension,"defaultChatParticipant"),r.o},set titleProvider(s){M(r.extension,"defaultChatParticipant"),r.q=s,i()},get titleProvider(){return M(r.extension,"defaultChatParticipant"),r.q},set summarizer(s){M(r.extension,"defaultChatParticipant"),r.s=s},get summarizer(){return M(r.extension,"defaultChatParticipant"),r.s},get onDidChangePauseState(){return M(r.extension,"chatParticipantAdditions"),r.u.event},onDidPerformAction:et(this.extension,"chatParticipantAdditions")?this.l.event:void 0,set requester(s){r.t=s,i()},get requester(){return r.t},dispose(){e=!0,r.b=void 0,r.k.dispose(),r.w.$unregisterAgent(r.x)}}}invoke(e,t,i,r){return this.y(e,t,i,r)}};function h_(e,t,i){return new Promise((r,s)=>{const n=i.onCancellationRequested(async()=>{n.dispose(),await ni(e),r(void 0)});t.then(r,s).finally(()=>n.dispose())})}var d_=class{constructor(e){this.b=new Map,this.a=e.getProxy(Y.MainThreadChatStatus)}createChatStatusItem(e,t){const i=f_(e.identifier,t);if(this.b.has(i))throw new Error(`Chat status item '${t}' already exists`);const r={id:i,title:"",description:"",detail:""};let s=!1,n=!1;const o=()=>{if(s)throw new Error("Chat status item is disposed");n&&this.a.$setEntry(t,r)},a=Object.freeze({id:t,get title(){return r.title},set title(c){r.title=c,o()},get description(){return r.description},set description(c){r.description=c,o()},get detail(){return r.detail},set detail(c){r.detail=c,o()},show:()=>{n=!0,o()},hide:()=>{n=!1,this.a.$disposeEntry(t)},dispose:()=>{s=!0,this.a.$disposeEntry(t),this.b.delete(i)}});return this.b.set(i,a),a}};function f_(e,t){return`${Ve.toKey(e)}.${t}`}var p_=class{constructor(e){const t=e.getProxy(Y.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},Q8="vscode-cdn.net",g_=`vscode-resource.${Q8}`,Ky=`'self' https://*.${Q8}`;function nh(e,t){return e.scheme===q.http||e.scheme===q.https?e:(t&&t.authority&&t.isRemote&&e.scheme===q.file&&(e=A.from({scheme:q.vscodeRemote,authority:t.authority,path:e.path})),A.from({scheme:q.https,authority:`${e.scheme}+${m_(e.authority)}.${g_}`,path:e.path,fragment:e.fragment,query:e.query}))}function m_(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57?t:"-"+i.toString(16).padStart(4,"0")})}var v_=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new le,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const r=t.getVisibleTextEditors();for(const s of this.c.values())r.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,r,s){let n;for(const d of this.e.getVisibleTextEditors(!0))if(d.value===e){n=d;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new $,l=new $,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(d){return nh(d,o.f)}get cspSource(){return Ky}set options(d){this.b=d,o.d.$setOptions(a,d)}get options(){return this.b}set html(d){this.a=d,o.d.$setHtml(a,d)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(d){return o.d.$postMessage(a,d)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,i,r||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}},w_=class nP{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(Y.MainThreadCodeMapper)}async $mapCode(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=nr(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(zt.from)})},notebookEdit:(c,l)=>{l=nr(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(Up.from)})}},o={location:i.location,chatRequestId:i.chatRequestId,chatRequestModel:i.chatRequestModel,chatSessionId:i.chatSessionId,codeBlocks:i.codeBlocks.map(c=>({code:c.code,resource:A.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await s.provideMappedEdits(o,n,r)??null}registerMappedEditsProvider(t,i){const r=nP.a++;return this.b.$registerCodeMapperProvider(r,t.displayName??t.name),this.c.set(r,i),{dispose:()=>this.b.$unregisterCodeMapperProvider(r)}}};function b_(e,t,i){const r=e.getProxy(Y.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new ks,t.registerArgumentProcessor({processArgument:g=>{if(g&&g.$mid===6){const v=this.b.get(g.handle);return v?v.value:g}else if(g&&g.$mid===7){const v=g,b=this.b.get(v.commentControlHandle);if(!b)return v;const x=b.getCommentThread(v.commentThreadHandle);return x?x.value:v}else if(g&&(g.$mid===9||g.$mid===8)){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);return b?g.$mid===8?b.value:{thread:b.value,text:g.text}:g}else if(g&&g.$mid===10){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);if(!b)return g;const x=g.commentUniqueId,E=b.getCommentByUniqueId(x);return E||g}else if(g&&g.$mid===11){const v=this.b.get(g.thread.commentControlHandle);if(!v)return g;const b=v.getCommentThread(g.thread.commentThreadHandle);if(!b)return g;const x=g.text,E=g.commentUniqueId,I=b.getCommentByUniqueId(E);return I?(typeof I.body=="string"?I.body=x:I.body=new Hi(x),I):g}return g}})}createCommentController(g,v,b){const x=s.a++,E=new o(g,x,v,b);this.b.set(E.handle,E);const I=this.c.get(g.identifier)||[];return I.push(E),this.c.set(g.identifier,I),E.value}async $createCommentThreadTemplate(g,v,b,x){const E=this.b.get(g);E&&E.$createCommentThreadTemplate(v,b,x)}async $setActiveComment(g,v){const b=this.b.get(g);b&&b.$setActiveComment(v??void 0)}async $updateCommentThreadTemplate(g,v,b){const x=this.b.get(g);x&&x.$updateCommentThreadTemplate(v,b)}$deleteCommentThread(g,v){this.b.get(g)?.$deleteCommentThread(v)}async $updateCommentThread(g,v,b){this.b.get(g)?.$updateCommentThread(v,b)}async $provideCommentingRanges(g,v,b){const x=this.b.get(g);if(!x||!x.commentingRangeProvider)return Promise.resolve(void 0);const E=await i.ensureDocumentData(A.revive(v));return si(async()=>{const I=await x.commentingRangeProvider?.provideCommentingRanges(E.document,b);let U;return Array.isArray(I)?U={ranges:I,fileComments:!1}:I?U={ranges:I.ranges||[],fileComments:I.enableFileComments||!1}:U=I??void 0,U}).then(I=>{let U;return I&&(U={ranges:I.ranges.map(j=>R.from(j)),fileComments:I.fileComments}),U})}$toggleReaction(g,v,b,x,E){const I=this.b.get(g);return!I||!I.reactionHandler?Promise.resolve(void 0):si(()=>{const U=I.getCommentThread(v);if(U){const j=U.getCommentByUniqueId(x.uniqueIdInThread);if(I!==void 0&&j&&I.reactionHandler)return I.reactionHandler(j,l(E))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(g){this.n=g}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(g){(g===void 0!=(this.p===void 0)||!g||!this.p||!g.isEqual(this.p))&&(this.p=g,this.b.range=g,this.c.fire())}get range(){return this.p}set canReply(g){this.d!==g&&(this.d=g,this.b.canReply=g,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(g){this.e=g,this.b.label=g,this.c.fire()}get contextValue(){return this.f}set contextValue(g){this.f=g,this.b.contextValue=g,this.c.fire()}get comments(){return this.q}set comments(g){this.q=g,this.b.comments=g,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(g){this.g!==g&&(this.g=g,this.b.collapsibleState=g,this.c.fire())}get state(){return this.h}set state(g){this.h=g,typeof g=="object"?(M(this.extensionDescription,"commentThreadApplicability"),this.b.state=g.resolved,this.b.applicability=g.applicability):this.b.state=g,this.c.fire()}get isDisposed(){return this.j}constructor(g,v,b,x,E,I,U,j,ee){this.m=v,this.n=b,this.o=x,this.p=E,this.q=I,this.extensionDescription=U,this.r=j,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new $,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new Hr,this.l.value=new le,this.n===void 0&&(this.n=`${g}.${this.handle}`),r.$createCommentThread(v,this.handle,this.n,this.o,R.from(this.p),this.q.map(B=>a(this,B,this.k,this.extensionDescription)),U.identifier,this.r,ee),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{r.$deleteCommentThread(v,this.handle)}});const O=this;this.value={get uri(){return O.uri},get range(){return O.range},set range(B){O.range=B},get comments(){return O.comments},set comments(B){O.comments=B},get collapsibleState(){return O.collapsibleState},set collapsibleState(B){O.collapsibleState=B},get canReply(){return O.canReply},set canReply(B){O.canReply=B},get contextValue(){return O.contextValue},set contextValue(B){O.contextValue=B},get label(){return O.label},set label(B){O.label=B},get state(){return O.state},set state(B){O.state=B},reveal:(B,F)=>O.reveal(B,F),hide:()=>O.hide(),dispose:()=>{O.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new le);const g=b=>Object.prototype.hasOwnProperty.call(this.b,b),v={};g("range")&&(v.range=R.from(this.p)),g("label")&&(v.label=this.label),g("contextValue")&&(v.contextValue=this.contextValue??null),g("comments")&&(v.comments=this.q.map(b=>a(this,b,this.k,this.extensionDescription))),g("collapsibleState")&&(v.collapseState=u(this.g)),g("canReply")&&(v.canReply=this.canReply),g("state")&&(v.state=h(this.h)),g("applicability")&&(v.applicability=d(this.h)),g("isTemplate")&&(v.isTemplate=this.r),this.b={},r.$updateCommentThread(this.m,this.handle,this.n,this.o,v)}getCommentByUniqueId(g){for(const v of this.k){const b=v[0],x=v[1];if(g===x)return b}}async reveal(g,v){M(this.extensionDescription,"commentReveal");let b;g&&g.body!==void 0?b=g:v=v??g;let x=b?this.k.get(b):void 0;x??=this.k.get(this.q[0]);let E=!0,I=!1;return v?.focus===cu.Reply?(I=!0,E=!1):v?.focus===cu.Comment&&(E=!1),r.$revealCommentThread(this.m,this.handle,x,{preserveFocus:E,focusReply:I})}async hide(){return r.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(g=>g.dispose())}}__decorate([Ad(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(g){this.b=g,g?.resourceHints&&M(this.h,"commentingRangeHint"),r.$updateCommentingRanges(this.handle,g?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(g){this.c=g,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!g})}get options(){return this.d}set options(g){this.d=g,r.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return M(this.h,"activeComment"),this.e}get activeCommentThread(){return M(this.h,"activeComment"),this.f?.value}constructor(g,v,b,x){this.h=g,this.i=v,this.j=b,this.k=x,this.a=new Map,r.$registerCommentController(this.handle,b,x,this.h.identifier.value);const E=this;this.value=Object.freeze({id:E.id,label:E.label,get options(){return E.options},set options(I){E.options=I},get commentingRangeProvider(){return E.commentingRangeProvider},set commentingRangeProvider(I){E.commentingRangeProvider=I},get reactionHandler(){return E.reactionHandler},set reactionHandler(I){E.reactionHandler=I},get activeCommentThread(){return E.activeCommentThread},createCommentThread(I,U,j){return E.createCommentThread(I,U,j).value},dispose:()=>{E.dispose()}}),this.g=[],this.g.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(g,v,b){const x=new n(this.id,this.handle,void 0,g,v,b,this.h,!1);return this.a.set(x.handle,x),x}$setActiveComment(g){if(!g){this.e=void 0,this.f=void 0;return}const v=this.a.get(g.commentThreadHandle);v&&(this.e=g.uniqueIdInThread?v.getCommentByUniqueId(g.uniqueIdInThread):void 0,this.f=v)}$createCommentThreadTemplate(g,v,b){const x=new n(this.id,this.handle,void 0,A.revive(g),R.to(v),[],this.h,!0,b);return x.collapsibleState=$a.Expanded,this.a.set(x.handle,x),x}$updateCommentThreadTemplate(g,v){const b=this.a.get(g);b&&(b.range=R.to(v))}$updateCommentThread(g,v){const b=this.a.get(g);if(!b)return;(E=>Object.prototype.hasOwnProperty.call(v,E))("collapseState")&&(b.collapsibleState=u(v.collapseState))}$deleteCommentThread(g){this.a.get(g)?.dispose(),this.a.delete(g)}getCommentThread(g){return this.a.get(g)}dispose(){this.a.forEach(g=>{g.dispose()}),this.g.forEach(g=>g.dispose())}}function a(f,g,v,b){let x=v.get(g);return x||(x=++f.commentHandle,v.set(g,x)),g.state!==void 0&&M(b,"commentsDraftState"),g.reactions?.some(E=>E.reactors!==void 0)&&M(b,"commentReactor"),{mode:g.mode,contextValue:g.contextValue,uniqueIdInThread:x,body:typeof g.body=="string"?g.body:xe.from(g.body),userName:g.author.name,userIconPath:g.author.iconPath,label:g.label,commentReactions:g.reactions?g.reactions.map(E=>c(E)):void 0,state:g.state,timestamp:g.timestamp?.toJSON()}}function c(f){return{label:f.label,iconPath:f.iconPath?mp(f.iconPath):void 0,count:f.count,hasReacted:f.authorHasReacted,reactors:f.reactors&&f.reactors.length>0&&typeof f.reactors[0]!="string"?f.reactors.map(g=>g.name):f.reactors}}function l(f){return{label:f.label||"",count:f.count||0,iconPath:f.iconPath?A.revive(f.iconPath):"",authorHasReacted:f.hasReacted||!1,reactors:f.reactors?.map(g=>({name:g}))}}function u(f){if(f!==void 0)switch(f){case nu.Expanded:return $a.Expanded;case nu.Collapsed:return $a.Collapsed}return $a.Collapsed}function h(f){let g;if(typeof f=="object"?g=f.resolved:g=f,g!==void 0)switch(g){case ou.Unresolved:return Ml.Unresolved;case ou.Resolved:return Ml.Resolved}return Ml.Unresolved}function d(f){let g;if(typeof f=="object"&&(g=f.applicability),g!==void 0)switch(g){case au.Current:return Nl.Current;case au.Outdated:return Nl.Outdated}return Nl.Current}return new s}var Kg={},ze={exports:Kg};(function(e,t){if(typeof Kg=="object"&&typeof ze=="object")ze.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var r in i)(typeof Kg=="object"?Kg:e)[r]=i[r]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(r,s,n){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var o in r)i.d(n,o,function(a){return r[a]}.bind(null,o));return n},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)}([function(e,t,i){(function(r){var s;t=e.exports=oe,s=typeof r=="object"&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var C=Array.prototype.slice.call(arguments,0);C.unshift("SEMVER"),console.log.apply(console,C)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var d=l++;c[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=l++;c[f]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var g=l++;c[g]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var v=l++;c[v]="(?:"+c[u]+"|"+c[d]+")";var b=l++;c[b]="(?:"+c[h]+"|"+c[d]+")";var x=l++;c[x]="(?:-("+c[v]+"(?:\\."+c[v]+")*))";var E=l++;c[E]="(?:-?("+c[b]+"(?:\\."+c[b]+")*))";var I=l++;c[I]="[0-9A-Za-z-]+";var U=l++;c[U]="(?:\\+("+c[I]+"(?:\\."+c[I]+")*))";var j=l++,ee="v?"+c[f]+c[x]+"?"+c[U]+"?";c[j]="^"+ee+"$";var O="[v=\\s]*"+c[g]+c[E]+"?"+c[U]+"?",B=l++;c[B]="^"+O+"$";var F=l++;c[F]="((?:<|>)?=?)";var J=l++;c[J]=c[h]+"|x|X|\\*";var he=l++;c[he]=c[u]+"|x|X|\\*";var se=l++;c[se]="[v=\\s]*("+c[he]+")(?:\\.("+c[he]+")(?:\\.("+c[he]+")(?:"+c[x]+")?"+c[U]+"?)?)?";var ht=l++;c[ht]="[v=\\s]*("+c[J]+")(?:\\.("+c[J]+")(?:\\.("+c[J]+")(?:"+c[E]+")?"+c[U]+"?)?)?";var W=l++;c[W]="^"+c[F]+"\\s*"+c[se]+"$";var H=l++;c[H]="^"+c[F]+"\\s*"+c[ht]+"$";var Q=l++;c[Q]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var X=l++;c[X]="(?:~>?)";var ne=l++;c[ne]="(\\s*)"+c[X]+"\\s+",a[ne]=new RegExp(c[ne],"g");var de=l++;c[de]="^"+c[X]+c[se]+"$";var Pe=l++;c[Pe]="^"+c[X]+c[ht]+"$";var ot=l++;c[ot]="(?:\\^)";var ke=l++;c[ke]="(\\s*)"+c[ot]+"\\s+",a[ke]=new RegExp(c[ke],"g");var Wt=l++;c[Wt]="^"+c[ot]+c[se]+"$";var Ct=l++;c[Ct]="^"+c[ot]+c[ht]+"$";var _t=l++;c[_t]="^"+c[F]+"\\s*("+O+")$|^$";var di=l++;c[di]="^"+c[F]+"\\s*("+ee+")$|^$";var bi=l++;c[bi]="(\\s*)"+c[F]+"\\s*("+O+"|"+c[se]+")",a[bi]=new RegExp(c[bi],"g");var Rt=l++;c[Rt]="^\\s*("+c[se]+")\\s+-\\s+("+c[se]+")\\s*$";var Vn=l++;c[Vn]="^\\s*("+c[ht]+")\\s+-\\s+("+c[ht]+")\\s*$";var Fh=l++;c[Fh]="(<|>)?=?\\s*\\*";for(var Zi=0;Zi<35;Zi++)s(Zi,c[Zi]),a[Zi]||(a[Zi]=new RegExp(c[Zi]));function rr(C,T){if(C instanceof oe)return C;if(typeof C!="string"||C.length>n||!(T?a[B]:a[j]).test(C))return null;try{return new oe(C,T)}catch{return null}}function oe(C,T){if(C instanceof oe){if(C.loose===T)return C;C=C.version}else if(typeof C!="string")throw new TypeError("Invalid Version: "+C);if(C.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof oe))return new oe(C,T);s("SemVer",C,T),this.loose=T;var L=C.trim().match(T?a[B]:a[j]);if(!L)throw new TypeError("Invalid Version: "+C);if(this.raw=C,this.major=+L[1],this.minor=+L[2],this.patch=+L[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");L[4]?this.prerelease=L[4].split(".").map(function(ge){if(/^[0-9]+$/.test(ge)){var Se=+ge;if(Se>=0&&Se<o)return Se}return ge}):this.prerelease=[],this.build=L[5]?L[5].split("."):[],this.format()}t.parse=rr,t.valid=function(C,T){var L=rr(C,T);return L?L.version:null},t.clean=function(C,T){var L=rr(C.trim().replace(/^[=v]+/,""),T);return L?L.version:null},t.SemVer=oe,oe.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},oe.prototype.toString=function(){return this.version},oe.prototype.compare=function(C){return s("SemVer.compare",this.version,this.loose,C),C instanceof oe||(C=new oe(C,this.loose)),this.compareMain(C)||this.comparePre(C)},oe.prototype.compareMain=function(C){return C instanceof oe||(C=new oe(C,this.loose)),tn(this.major,C.major)||tn(this.minor,C.minor)||tn(this.patch,C.patch)},oe.prototype.comparePre=function(C){if(C instanceof oe||(C=new oe(C,this.loose)),this.prerelease.length&&!C.prerelease.length)return-1;if(!this.prerelease.length&&C.prerelease.length)return 1;if(!this.prerelease.length&&!C.prerelease.length)return 0;var T=0;do{var L=this.prerelease[T],ge=C.prerelease[T];if(s("prerelease compare",T,L,ge),L===void 0&&ge===void 0)return 0;if(ge===void 0)return 1;if(L===void 0)return-1;if(L!==ge)return tn(L,ge)}while(++T)},oe.prototype.inc=function(C,T){switch(C){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",T);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",T);break;case"prepatch":this.prerelease.length=0,this.inc("patch",T),this.inc("pre",T);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",T),this.inc("pre",T);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var L=this.prerelease.length;--L>=0;)typeof this.prerelease[L]=="number"&&(this.prerelease[L]++,L=-2);L===-1&&this.prerelease.push(0)}T&&(this.prerelease[0]===T?isNaN(this.prerelease[1])&&(this.prerelease=[T,0]):this.prerelease=[T,0]);break;default:throw new Error("invalid increment argument: "+C)}return this.format(),this.raw=this.version,this},t.inc=function(C,T,L,ge){typeof L=="string"&&(ge=L,L=void 0);try{return new oe(C,L).inc(T,ge).version}catch{return null}},t.diff=function(C,T){if(Zc(C,T))return null;var L=rr(C),ge=rr(T);if(L.prerelease.length||ge.prerelease.length){for(var Se in L)if((Se==="major"||Se==="minor"||Se==="patch")&&L[Se]!==ge[Se])return"pre"+Se;return"prerelease"}for(var Se in L)if((Se==="major"||Se==="minor"||Se==="patch")&&L[Se]!==ge[Se])return Se},t.compareIdentifiers=tn;var jh=/^[0-9]+$/;function tn(C,T){var L=jh.test(C),ge=jh.test(T);return L&&ge&&(C=+C,T=+T),L&&!ge?-1:ge&&!L?1:C<T?-1:C>T?1:0}function ai(C,T,L){return new oe(C,L).compare(new oe(T,L))}function zr(C,T,L){return ai(C,T,L)>0}function qn(C,T,L){return ai(C,T,L)<0}function Zc(C,T,L){return ai(C,T,L)===0}function Uh(C,T,L){return ai(C,T,L)!==0}function Jc(C,T,L){return ai(C,T,L)>=0}function Yc(C,T,L){return ai(C,T,L)<=0}function Gn(C,T,L,ge){var Se;switch(T){case"===":typeof C=="object"&&(C=C.version),typeof L=="object"&&(L=L.version),Se=C===L;break;case"!==":typeof C=="object"&&(C=C.version),typeof L=="object"&&(L=L.version),Se=C!==L;break;case"":case"=":case"==":Se=Zc(C,L,ge);break;case"!=":Se=Uh(C,L,ge);break;case">":Se=zr(C,L,ge);break;case">=":Se=Jc(C,L,ge);break;case"<":Se=qn(C,L,ge);break;case"<=":Se=Yc(C,L,ge);break;default:throw new TypeError("Invalid operator: "+T)}return Se}function Li(C,T){if(C instanceof Li){if(C.loose===T)return C;C=C.value}if(!(this instanceof Li))return new Li(C,T);s("comparator",C,T),this.loose=T,this.parse(C),this.semver===gs?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(C,T){return tn(T,C)},t.major=function(C,T){return new oe(C,T).major},t.minor=function(C,T){return new oe(C,T).minor},t.patch=function(C,T){return new oe(C,T).patch},t.compare=ai,t.compareLoose=function(C,T){return ai(C,T,!0)},t.rcompare=function(C,T,L){return ai(T,C,L)},t.sort=function(C,T){return C.sort(function(L,ge){return t.compare(L,ge,T)})},t.rsort=function(C,T){return C.sort(function(L,ge){return t.rcompare(L,ge,T)})},t.gt=zr,t.lt=qn,t.eq=Zc,t.neq=Uh,t.gte=Jc,t.lte=Yc,t.cmp=Gn,t.Comparator=Li;var gs={};function gt(C,T){if(C instanceof gt)return C.loose===T?C:new gt(C.raw,T);if(C instanceof Li)return new gt(C.value,T);if(!(this instanceof gt))return new gt(C,T);if(this.loose=T,this.raw=C,this.set=C.split(/\s*\|\|\s*/).map(function(L){return this.parseRange(L.trim())},this).filter(function(L){return L.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+C);this.format()}function ci(C){return!C||C.toLowerCase()==="x"||C==="*"}function Ym(C,T,L,ge,Se,Ot,Ze,Vt,$t,ii,sr,bt,qt){return((T=ci(L)?"":ci(ge)?">="+L+".0.0":ci(Se)?">="+L+"."+ge+".0":">="+T)+" "+(Vt=ci($t)?"":ci(ii)?"<"+(+$t+1)+".0.0":ci(sr)?"<"+$t+"."+(+ii+1)+".0":bt?"<="+$t+"."+ii+"."+sr+"-"+bt:"<="+Vt)).trim()}function rn(C,T){for(var L=0;L<C.length;L++)if(!C[L].test(T))return!1;if(T.prerelease.length){for(L=0;L<C.length;L++)if(s(C[L].semver),C[L].semver!==gs&&C[L].semver.prerelease.length>0){var ge=C[L].semver;if(ge.major===T.major&&ge.minor===T.minor&&ge.patch===T.patch)return!0}return!1}return!0}function la(C,T,L){try{T=new gt(T,L)}catch{return!1}return T.test(C)}function Qc(C,T,L,ge){var Se,Ot,Ze,Vt,$t;switch(C=new oe(C,ge),T=new gt(T,ge),L){case">":Se=zr,Ot=Yc,Ze=qn,Vt=">",$t=">=";break;case"<":Se=qn,Ot=Jc,Ze=zr,Vt="<",$t="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(la(C,T,ge))return!1;for(var ii=0;ii<T.set.length;++ii){var sr=T.set[ii],bt=null,qt=null;if(sr.forEach(function(fi){fi.semver===gs&&(fi=new Li(">=0.0.0")),bt=bt||fi,qt=qt||fi,Se(fi.semver,bt.semver,ge)?bt=fi:Ze(fi.semver,qt.semver,ge)&&(qt=fi)}),bt.operator===Vt||bt.operator===$t||(!qt.operator||qt.operator===Vt)&&Ot(C,qt.semver)||qt.operator===$t&&Ze(C,qt.semver))return!1}return!0}Li.prototype.parse=function(C){var T=this.loose?a[_t]:a[di],L=C.match(T);if(!L)throw new TypeError("Invalid comparator: "+C);this.operator=L[1],this.operator==="="&&(this.operator=""),L[2]?this.semver=new oe(L[2],this.loose):this.semver=gs},Li.prototype.toString=function(){return this.value},Li.prototype.test=function(C){return s("Comparator.test",C,this.loose),this.semver===gs||(typeof C=="string"&&(C=new oe(C,this.loose)),Gn(C,this.operator,this.semver,this.loose))},Li.prototype.intersects=function(C,T){if(!(C instanceof Li))throw new TypeError("a Comparator is required");var L;if(this.operator==="")return L=new gt(C.value,T),la(this.value,L,T);if(C.operator==="")return L=new gt(this.value,T),la(C.semver,L,T);var ge=!(this.operator!==">="&&this.operator!==">"||C.operator!==">="&&C.operator!==">"),Se=!(this.operator!=="<="&&this.operator!=="<"||C.operator!=="<="&&C.operator!=="<"),Ot=this.semver.version===C.semver.version,Ze=!(this.operator!==">="&&this.operator!=="<="||C.operator!==">="&&C.operator!=="<="),Vt=Gn(this.semver,"<",C.semver,T)&&(this.operator===">="||this.operator===">")&&(C.operator==="<="||C.operator==="<"),$t=Gn(this.semver,">",C.semver,T)&&(this.operator==="<="||this.operator==="<")&&(C.operator===">="||C.operator===">");return ge||Se||Ot&&Ze||Vt||$t},t.Range=gt,gt.prototype.format=function(){return this.range=this.set.map(function(C){return C.join(" ").trim()}).join("||").trim(),this.range},gt.prototype.toString=function(){return this.range},gt.prototype.parseRange=function(C){var T=this.loose;C=C.trim(),s("range",C,T);var L=T?a[Vn]:a[Rt];C=C.replace(L,Ym),s("hyphen replace",C),C=C.replace(a[bi],"$1$2$3"),s("comparator trim",C,a[bi]),C=(C=(C=C.replace(a[ne],"$1~")).replace(a[ke],"$1^")).split(/\s+/).join(" ");var ge=T?a[_t]:a[di],Se=C.split(" ").map(function(Ot){return function(Ze,Vt){return s("comp",Ze),Ze=function($t,ii){return $t.trim().split(/\s+/).map(function(sr){return function(bt,qt){s("caret",bt,qt);var fi=qt?a[Ct]:a[Wt];return bt.replace(fi,function(S,Ae,Le,G,ye){var Xt;return s("caret",bt,S,Ae,Le,G,ye),ci(Ae)?Xt="":ci(Le)?Xt=">="+Ae+".0.0 <"+(+Ae+1)+".0.0":ci(G)?Xt=Ae==="0"?">="+Ae+"."+Le+".0 <"+Ae+"."+(+Le+1)+".0":">="+Ae+"."+Le+".0 <"+(+Ae+1)+".0.0":ye?(s("replaceCaret pr",ye),ye.charAt(0)!=="-"&&(ye="-"+ye),Xt=Ae==="0"?Le==="0"?">="+Ae+"."+Le+"."+G+ye+" <"+Ae+"."+Le+"."+(+G+1):">="+Ae+"."+Le+"."+G+ye+" <"+Ae+"."+(+Le+1)+".0":">="+Ae+"."+Le+"."+G+ye+" <"+(+Ae+1)+".0.0"):(s("no pr"),Xt=Ae==="0"?Le==="0"?">="+Ae+"."+Le+"."+G+" <"+Ae+"."+Le+"."+(+G+1):">="+Ae+"."+Le+"."+G+" <"+Ae+"."+(+Le+1)+".0":">="+Ae+"."+Le+"."+G+" <"+(+Ae+1)+".0.0"),s("caret return",Xt),Xt})}(sr,ii)}).join(" ")}(Ze,Vt),s("caret",Ze),Ze=function($t,ii){return $t.trim().split(/\s+/).map(function(sr){return function(bt,qt){var fi=qt?a[Pe]:a[de];return bt.replace(fi,function(S,Ae,Le,G,ye){var Xt;return s("tilde",bt,S,Ae,Le,G,ye),ci(Ae)?Xt="":ci(Le)?Xt=">="+Ae+".0.0 <"+(+Ae+1)+".0.0":ci(G)?Xt=">="+Ae+"."+Le+".0 <"+Ae+"."+(+Le+1)+".0":ye?(s("replaceTilde pr",ye),ye.charAt(0)!=="-"&&(ye="-"+ye),Xt=">="+Ae+"."+Le+"."+G+ye+" <"+Ae+"."+(+Le+1)+".0"):Xt=">="+Ae+"."+Le+"."+G+" <"+Ae+"."+(+Le+1)+".0",s("tilde return",Xt),Xt})}(sr,ii)}).join(" ")}(Ze,Vt),s("tildes",Ze),Ze=function($t,ii){return s("replaceXRanges",$t,ii),$t.split(/\s+/).map(function(sr){return function(bt,qt){bt=bt.trim();var fi=qt?a[H]:a[W];return bt.replace(fi,function(S,Ae,Le,G,ye,Xt){s("xRange",bt,S,Ae,Le,G,ye,Xt);var Bh=ci(Le),sn=Bh||ci(G),Zn=sn||ci(ye);return Ae==="="&&Zn&&(Ae=""),Bh?S=Ae===">"||Ae==="<"?"<0.0.0":"*":Ae&&Zn?(sn&&(G=0),Zn&&(ye=0),Ae===">"?(Ae=">=",sn?(Le=+Le+1,G=0,ye=0):Zn&&(G=+G+1,ye=0)):Ae==="<="&&(Ae="<",sn?Le=+Le+1:G=+G+1),S=Ae+Le+"."+G+"."+ye):sn?S=">="+Le+".0.0 <"+(+Le+1)+".0.0":Zn&&(S=">="+Le+"."+G+".0 <"+Le+"."+(+G+1)+".0"),s("xRange return",S),S})}(sr,ii)}).join(" ")}(Ze,Vt),s("xrange",Ze),Ze=function($t,ii){return s("replaceStars",$t,ii),$t.trim().replace(a[Fh],"")}(Ze,Vt),s("stars",Ze),Ze}(Ot,T)}).join(" ").split(/\s+/);return this.loose&&(Se=Se.filter(function(Ot){return!!Ot.match(ge)})),Se=Se.map(function(Ot){return new Li(Ot,T)})},gt.prototype.intersects=function(C,T){if(!(C instanceof gt))throw new TypeError("a Range is required");return this.set.some(function(L){return L.every(function(ge){return C.set.some(function(Se){return Se.every(function(Ot){return ge.intersects(Ot,T)})})})})},t.toComparators=function(C,T){return new gt(C,T).set.map(function(L){return L.map(function(ge){return ge.value}).join(" ").trim().split(" ")})},gt.prototype.test=function(C){if(!C)return!1;typeof C=="string"&&(C=new oe(C,this.loose));for(var T=0;T<this.set.length;T++)if(rn(this.set[T],C))return!0;return!1},t.satisfies=la,t.maxSatisfying=function(C,T,L){var ge=null,Se=null;try{var Ot=new gt(T,L)}catch{return null}return C.forEach(function(Ze){Ot.test(Ze)&&(ge&&Se.compare(Ze)!==-1||(Se=new oe(ge=Ze,L)))}),ge},t.minSatisfying=function(C,T,L){var ge=null,Se=null;try{var Ot=new gt(T,L)}catch{return null}return C.forEach(function(Ze){Ot.test(Ze)&&(ge&&Se.compare(Ze)!==1||(Se=new oe(ge=Ze,L)))}),ge},t.validRange=function(C,T){try{return new gt(C,T).range||"*"}catch{return null}},t.ltr=function(C,T,L){return Qc(C,T,"<",L)},t.gtr=function(C,T,L){return Qc(C,T,">",L)},t.outside=Qc,t.prerelease=function(C,T){var L=rr(C,T);return L&&L.prerelease.length?L.prerelease:null},t.intersects=function(C,T,L){return C=new gt(C,L),T=new gt(T,L),C.intersects(T)},t.coerce=function(C){if(C instanceof oe)return C;if(typeof C!="string")return null;var T=C.match(a[Q]);return T==null?null:rr((T[1]||"0")+"."+(T[2]||"0")+"."+(T[3]||"0"))}}).call(this,i(1))},function(e,t){var i,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(b){if(i===setTimeout)return setTimeout(b,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(b,0);try{return i(b,0)}catch{try{return i.call(null,b,0)}catch{return i.call(this,b,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:n}catch{i=n}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var b=a(d);u=!0;for(var x=l.length;x;){for(c=l,l=[];++h<x;)c&&c[h].run();h=-1,x=l.length}c=null,u=!1,function(E){if(r===clearTimeout)return clearTimeout(E);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(E);try{r(E)}catch{try{return r.call(null,E)}catch{return r.call(this,E)}}}(b)}}function g(b,x){this.fun=b,this.array=x}function v(){}s.nextTick=function(b){var x=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)x[E-1]=arguments[E];l.push(new g(b,x)),l.length!==1||u||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=v,s.addListener=v,s.once=v,s.off=v,s.removeListener=v,s.removeAllListeners=v,s.emit=v,s.prependListener=v,s.prependOnceListener=v,s.listeners=function(b){return[]},s.binding=function(b){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(b){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var Ste=ze.exports.SEMVER_SPEC_VERSION,kte=ze.exports.parse,Ite=ze.exports.valid,Cte=ze.exports.coerce,$te=ze.exports.clean,Dte=ze.exports.inc,Pte=ze.exports.major,Tte=ze.exports.minor,Mte=ze.exports.patch,Nte=ze.exports.prerelease,Lte=ze.exports.gt,Rte=ze.exports.gte,Ote=ze.exports.lt,Fte=ze.exports.lte,jte=ze.exports.eq,Ute=ze.exports.neq,Bte=ze.exports.cmp,zte=ze.exports.compare,Hte=ze.exports.rcompare,Wte=ze.exports.compareIdentifiers,_te=ze.exports.rcompareIdentifiers,Vte=ze.exports.compareBuild,qte=ze.exports.sort,Gte=ze.exports.rsort,Zte=ze.exports.diff,Jte=ze.exports.validRange,Yte=ze.exports.satisfies,Qte=ze.exports.maxSatisfying,Xte=ze.exports.minSatisfying,Kte=ze.exports.minVersion,eie=ze.exports.gtr,tie=ze.exports.ltr,iie=ze.exports.outside,rie=ze.exports.intersects,sie=ze.exports.SemVer,nie=ze.exports.Comparator,oie=ze.exports.Range,X8=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,y_=/^-(\d{4})(\d{2})(\d{2})$/;function A_(e){return e=e.trim(),e==="*"||X8.test(e)}function K8(e){if(!A_(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(X8);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function e$(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=y_.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var x_=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function E_(e,t){if(t.serializeBuffersForPostMessage){const i=new x_,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=S_(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=i.buffers.map(o=>{const a=new Uint8Array(o);return _.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function S_(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function k_(e,t){const i=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),r=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}var I_=class{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,i,r,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new $,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new $,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#r=r,this.#n=s,this.#s=n,this.#u=Rc(n),this.#d=C_(n),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,nh(e,this.#r)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===q.https||e.scheme===q.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+Ky}return Ky}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),Ei(this.#o,e)||this.#t.$setOptions(this.#e,t$(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=E_(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===q.vscodeRemote,i=this.#s.extensionLocation.scheme===q.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=A.from({scheme:o||"file",path:decodeURIComponent(a)}),u=nh(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=A.from({scheme:o||"file",path:decodeURIComponent(a)}),u=nh(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`})}};function Rc(e){try{const t=e$(K8(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function C_(e){try{const t=e$(K8(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var $_=class extends te{constructor(e,t,i,r,s){super(),this.c=t,this.f=i,this.g=r,this.h=s,this.b=new Map,this.a=e.getProxy(Y.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const r=this.j(e);if(r){const{message:s}=k_(t,i.value);r._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new I_(e,this.a,D_(t),this.c,this.f,i,this.h);this.b.set(e,r);const s=r._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return r}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function em(e){return{id:e.identifier,location:e.extensionLocation}}function t$(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||P_(e,t)}}function D_(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>A.from(t))}}function P_(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var Or=class oP{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){oP.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},T_=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new Or("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=F_(this.document.uri)+this.a++;return wt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},M_=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const r=this.b(e,t.uri);if(this.a.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new T_(t,i);return this.a.set(r,s),s}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},i$;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(i$||(i$={}));var N_=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:0,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:1,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Me(()=>this.a.delete(e))}},L_=class{constructor(e,t,i,r,s){this.d=t,this.f=i,this.g=r,this.h=s,this.b=new N_,this.c=new M_,this.a=e.getProxy(Y.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const s=new le;return R_(i)?(s.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(em(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Rc(e))):(s.add(this.b.addCustomProvider(t,e,i)),tm(i)&&s.add(i.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(O_(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(em(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,Rc(e))),Me.from(s,new Me(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=A.revive(e),a=await n.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},s);let c;return tm(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:tm(n.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const r=A.revive(e),{document:s}=this.i(t,r);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,i,r,s,n){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=Bt.to(s),c=this.g.createNewWebview(t,r.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,r.title,a,r.options,c,r.active),u=A.revive(e);switch(o.type){case 1:{const{document:h}=this.i(i,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this.b.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=A.revive(t),o=this.d.getDocument(n);await r.provider.moveCustomTextEditor(o,s,Je.None)}async $undo(e,t,i,r){return this.i(t,e).undo(i,r)}async $redo(e,t,i,r){return this.i(t,e).redo(i,r)}async $revert(e,t,i){const r=this.i(t,e);await this.j(t).revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.i(t,e);await this.j(t).saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,A.revive(i),r)}async $backup(e,t,i){const r=this.i(t,e),n=await this.j(t).backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(n),n.id}i(e,t){const i=this.c.get(e,A.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!tm(i))throw new Error("Custom document is not editable");return i}};function tm(e){return!!e.onDidChangeCustomDocument}function R_(e){return typeof e.resolveCustomTextEditor=="function"}function O_(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function F_(e){const t=e.scheme===q.file||e.scheme===q.untitled?e.fsPath:e.toString();return Is(t)+""}var Qo,r$=class aP{#e;#t;#i;constructor(t,i,r,s,n,o,a,c){this.d=t,this.e=i,this.f=r,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,r),this.#i=new Gt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,i){if(!t){this.clear();return}this.j();let r=[];if(A.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,i.slice()),r=[t]}else if(Array.isArray(t)){r=[];let o;t=[...t].sort(aP.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,r.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...l);else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(r),!this.#e)return;const s=[];let n=0;for(const o of r){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[oi.Error,oi.Warning,oi.Information,oi.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...oc.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:ki.Info,message:p(2925,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...oc.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.j();for(const[r,s]of this)t.call(i,r,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.j();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#i.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},eA=class{static{Qo=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new Gt;for(const r of t)i.set(r,r);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,r,s){this.j=i,this.k=r,this.l=s,this.g=new Map,this.h=new U2({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=We.map(this.h.event,Qo._mapper),this.f=t.getProxy(Y.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:r,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(d,f){s.$changeMany(d,f),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,d,f.length===0?"CLEARING":f)}$clear(d){s.$clear(d),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,d)}dispose(){s.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+Qo.c++,u=i;else if(!r.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+Qo.c++;while(r.has(u))}return new class extends r${constructor(){super(i,u,Qo.e,Qo.d,d=>c.getDocument(d)?.version,a.extUri,l,n),r.set(u,this)}dispose(){super.dispose(),r.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,r=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=i.get(n.toString());typeof a>"u"&&(a=r.length,i.set(n.toString(),a),r.push([n,[]])),r[a][1]=r[a][1].concat(...o)});return r}}m(t){let i=[];for(const r of this.g.values())r.has(t)&&(i=i.concat(r.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",r=new r$(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(i,r),this.n=r}for(const[i,r]of t)this.n.set(A.revive(i),r.map(oc.to))}};eA=Qo=__decorate([__param(1,Ce),__param(2,ka)],eA);var j_=class{constructor(e){this.a=e.getProxy(Y.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(i=>A.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?A.revive(t):void 0)}},U_=class cP{static{this.a=0}constructor(t,i,r){this.d=i,this.e=r,this.b=new Map,this.c=t.getProxy(Y.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(q).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const r=cP.a++;this.b.set(r,i),this.c.$registerTextContentProvider(r,t);let s;if(typeof i.onDidChange=="function"){let n;s=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(r,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=$5(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(lt).finally(()=>{n===a&&(n=void 0)});n=a})}return new Me(()=>{this.b.delete(r)&&this.c.$unregisterTextContentProvider(r),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,i){const r=this.b.get(t);return r?Promise.resolve(r.provideTextDocumentContent(A.revive(i),Je.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},B_=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=r,this.a=new nn,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const n={dispose:this.a.push([t,i,e])};return Array.isArray(r)&&r.push(n),n}}async $participateInSave(e,t){const i=A.revive(e);let r=!1;const s=setTimeout(()=>r=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(r)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:Ip.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,i],r){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(i,e,t,r).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,r){const s=[],n=Date.now(),{document:o,reason:a}=r,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw i1("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const d=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(f=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(d),u(f)}).catch(f=>{clearTimeout(d),h(f)})}).then(u=>{const h={edits:[]};for(const d of u)if(Array.isArray(d)&&d.every(f=>f instanceof kn))for(const{newText:f,newEol:g,range:v}of d)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:v&&R.from(v),text:f,eol:g&&hc.from(g)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new vi(h)):Promise.reject(new Error("concurrent_edits"))})}},z_=class{constructor(e,t){this.a=new $,this.b=new $,this.c=new $,this.d=new $,this.e=new $,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidChangeDocumentWithReason=this.d.event,this.onDidSaveDocument=this.e.event,this.f=new le,this.i=new Map,this.g=e.getProxy(Y.MainThreadDocuments),this.h=t,this.h.onDidRemoveDocuments(i=>{for(const r of i)this.b.fire(r.document)},void 0,this.f),this.h.onDidAddDocuments(i=>{for(const r of i)this.a.fire(r.document)},void 0,this.f)}dispose(){this.f.dispose()}getAllDocumentData(){return[...this.h.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.h.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e,t){const i=this.h.getDocument(e);if(i&&(!t?.encoding||i.document.encoding===t.encoding))return Promise.resolve(i);let r=this.i.get(e.toString());return r?t?.encoding&&(r=r.then(s=>s.document.encoding!==t.encoding?this.ensureDocumentData(e,t):s)):(r=this.g.$tryOpenDocument(e,t).then(s=>{this.i.delete(e.toString());const n=A.revive(s);return da(this.h.getDocument(n))},s=>(this.i.delete(e.toString()),Promise.reject(s))),this.i.set(e.toString(),r)),r}createDocumentData(e){return this.g.$tryCreateDocument(e).then(t=>A.revive(t))}$acceptModelLanguageChanged(e,t){const i=A.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");this.b.fire(r.document),r._acceptLanguageId(t),this.a.fire(r.document)}$acceptModelSaved(e){const t=A.revive(e),i=this.h.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.e.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=A.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0}),this.d.fire({document:r.document,contentChanges:[],reason:void 0,detailedReason:void 0})}$acceptEncodingChanged(e,t){const i=A.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");r._acceptEncoding(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0}),this.d.fire({document:r.document,contentChanges:[],reason:void 0,detailedReason:void 0})}$acceptModelChanged(e,t,i){const r=A.revive(e),s=this.h.getDocument(r);if(!s)throw new Error("unknown document");s._acceptIsDirty(i),s.onEvents(t);let n;t.isUndoing?n=Ql.Undo:t.isRedoing&&(n=Ql.Redo),this.c.fire(W1({document:s.document,contentChanges:t.changes.map(o=>({range:R.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n})),this.d.fire(W1({document:s.document,contentChanges:t.changes.map(o=>({range:R.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n,detailedReason:t.detailedReason?{source:t.detailedReason.source,metadata:t.detailedReason}:void 0}))}setWordDefinitionFor(e,t){Dz(e,t)}},H_=class{constructor(e){this.b=new Map,this.c=new $,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(Y.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const r=this.e++;return this.a.$registerEmbeddingProvider(r,t),this.b.set(r,{id:t,provider:i}),re(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(r),this.b.delete(r)})}async computeEmbeddings(e,t,i){i??=Je.None;let r=!1;typeof t=="string"&&(t=[t],r=!0);const s=await this.a.$computeEmbeddings(e,t,i);if(s.length!==t.length)throw new Error;if(r){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,i){const r=this.b.get(e);if(!r)return[];const s=await r.provider.provideEmbeddings(t,i);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},W_=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Y.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const r=this.a.get(e);if(!r)throw new Error("Embedding vector provider not found");const s=await r.provideEmbeddingVector(t,i);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiEmbeddingVectorProvider(t,r),new Me(()=>{this.c.$unregisterAiEmbeddingVectorProvider(r),this.a.delete(r)})}},s$;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(s$||(s$={}));var __=class{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)r[s]=i;this.a=r,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},n$=class{constructor(e){let t=0,i=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const r=new __(i,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];r.set(o,a,c)}this.a=r,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},tA=null;function V_(){return tA===null&&(tA=new n$([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),tA}var o$;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(o$||(o$={}));var oh=null;function q_(){if(oh===null){oh=new MC(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let i=0;i<e.length;i++)oh.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)oh.set(t.charCodeAt(i),2)}return oh}var G_=class $4{static a(t,i,r,s,n){let o=n-1;do{const a=i.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=i.charCodeAt(s-1),c=i.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:r,startColumn:s+1,endLineNumber:r,endColumn:o+2},url:i.substring(s,o+1)}}static computeLinks(t,i=V_()){const r=q_(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,d=1,f=!1,g=!1,v=!1,b=!1;for(;l<c;){let x=!1;const E=a.charCodeAt(l);if(d===13){let I;switch(E){case 40:f=!0,I=0;break;case 41:I=f?0:1;break;case 91:v=!0,g=!0,I=0;break;case 93:v=!1,I=g?0:1;break;case 123:b=!0,I=0;break;case 125:I=b?0:1;break;case 39:case 34:case 96:h===E?I=1:h===39||h===34||h===96?I=0:I=1;break;case 42:I=h===42?1:0;break;case 124:I=h===124?1:0;break;case 32:I=v?0:1;break;default:I=r.get(E)}I===1&&(s.push($4.a(r,a,n,u,l)),x=!0)}else if(d===12){let I;E===91?(g=!0,I=0):I=r.get(E),I===1?x=!0:d=13}else d=i.nextState(d,E),d===0&&(x=!0);x&&(d=1,f=!1,g=!1,b=!1,u=l+1,h=E),l++}d===13&&s.push($4.a(r,a,n,u,c))}return s}},Z_=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,r,s=14,n=14;for(const o of e){let a=i?bT(i,o):0;for(a===0?r=1:r=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([r,o.toUpperCase().charCodeAt(a),n]),t.push([r,o.toLowerCase().charCodeAt(a),n]),r=n;i=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new n$(t)}}provideDocumentLinks(e){this.c();const t=[],i=G_.computeLinks({getLineContent(r){return e.lineAt(r-1).text},getLineCount(){return e.lineCount}},this.b);for(const r of i){const s=Bo.to(r);s.target&&t.push(s)}return t}},J_=class D4{constructor(t,i){this.i=i,this.b=new Z_,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(Y.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,r,s={}){if(D4.j(r),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(i),this.d.add(i),this.c.set(n,r);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof r.copy=="function"&&(o+=8),typeof r.open=="function"&&typeof r.close=="function"&&typeof r.read=="function"&&typeof r.write=="function"&&(M(t,"fsChunks"),o+=4);let a;s.isReadonly&&fo(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=r.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:d,type:f}=h;if(d.scheme!==i)continue;let g;switch(f){case Xa.Changed:g=0;break;case Xa.Created:g=1;break;case Xa.Deleted:g=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:d,type:g})}this.a.$onFileSystemChange(n,u)});return re(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:r,mtime:s,size:n,permissions:o}=t;return{type:i,ctime:r,mtime:s,size:n,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(A.revive(i))).then(r=>D4.k(r))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(A.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(A.revive(i))).then(r=>_.wrap(r))}$writeFile(t,i,r,s){return Promise.resolve(this.l(t).writeFile(A.revive(i),r.buffer,s))}$delete(t,i,r){return Promise.resolve(this.l(t).delete(A.revive(i),r))}$rename(t,i,r,s){return Promise.resolve(this.l(t).rename(A.revive(i),A.revive(r),s))}$copy(t,i,r,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(A.revive(i),A.revive(r),s))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(A.revive(i)))}$watch(t,i,r,s){const n=this.l(t).watch(A.revive(r),s);this.f.set(i,n)}$unwatch(t,i){const r=this.f.get(i);r&&(r.dispose(),this.f.delete(i))}$open(t,i,r){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(A.revive(i),r))}$close(t,i){const r=this.l(t);if(!r.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(r.close(i))}$read(t,i,r,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=_.alloc(s);return Promise.resolve(n.read(i,r,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,i,r,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(i,r,s.buffer,0,s.byteLength))}l(t){const i=this.c.get(t);if(!i){const r=new Error;throw r.name="ENOPRO",r.message="no provider",r}return i}};function a$(e){return typeof e.correlationId=="number"}function Y_(e){return e.recursive===!0}var c$=class lP extends te{static{this.a=5}constructor(t,i,r,s){super(),this.h=t,this.j=i,this.m=r,this.n=s,this.c=this.B(new Hr),this.f=void 0,this.g=0}s(){const t=new le;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(i=>this.h(i))),t.add(this.b.onDidLogMessage(i=>this.j(i))),t.add(this.b.onDidError(i=>this.t(i.error,i.request)))}t(t,i){this.u(t,i)?this.g<lP.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,i){return!(!this.n.restartOnError||i||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}},Q_=class extends c${constructor(e,t,i){super(e,t,i,{type:"node.js",restartOnError:!1})}},X_=class extends c${constructor(e,t,i){super(e,t,i,{type:"universal",restartOnError:!0})}};function l$(e){return e.map(t=>({type:t.type,resource:A.revive(t.resource),cId:t.cId}))}function K_(e){const t=new eV;for(const i of e)t.processEvent(i);return t.coalesce()}function u$(e,t){return typeof t=="string"&&!t.startsWith(wo)&&!ar(t)?{base:e,pattern:t}:t}function h$(e,t){const i=[];for(const r of t)i.push(kr(u$(e,r)));return i}var eV=class{constructor(){this.a=new Set,this.b=new Map}c(e){return Et?e.resource.fsPath:e.resource.fsPath.toLowerCase()}processEvent(e){const t=this.b.get(this.c(e));let i=!1;if(t){const r=t.type,s=e.type;t.resource.fsPath!==e.resource.fsPath&&(e.type===2||e.type===1)?i=!0:r===1&&s===2?(this.b.delete(this.c(e)),this.a.delete(t)):r===2&&s===1?t.type=0:r===1&&s===0||(t.type=s)}else i=!0;i&&(this.a.add(e),this.b.set(this.c(e),e))}coalesce(){const e=[],t=[];return Array.from(this.a).filter(i=>i.type!==2?(e.push(i),!1):!0).sort((i,r)=>i.resource.fsPath.length-r.resource.fsPath.length).filter(i=>t.some(r=>OO(i.resource.fsPath,r,!Et))?!1:(t.push(i.resource.fsPath),!0)).concat(e)}};function tV(e,t){if(typeof t=="number")switch(e.type){case 1:return(t&4)===0;case 2:return(t&8)===0;case 0:return(t&2)===0}return!1}function iV(e){if(typeof e=="number"){const t=[];return e&4&&t.push("Added"),e&8&&t.push("Deleted"),e&2&&t.push("Updated"),t.length===0?"<all>":`[${t.join(", ")}]`}return"<none>"}var rV=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,r,s,n,o){this.a=Math.random(),this.b=new $,this.c=new $,this.d=new $,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=kr(n),c=typeof n=="string",l=!1,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const d of h.created){const f=A.revive(d);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.b.fire(f)}if(!o.ignoreChangeEvents)for(const d of h.changed){const f=A.revive(d);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.c.fire(f)}if(!o.ignoreDeleteEvents)for(const d of h.deleted){const f=A.revive(d);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=Me.from(this.i(e,i,t,r,n,o,!1),this.b,this.c,this.d,u)}i(e,t,i,r,s,n,o){const a=Me.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(Y.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(wo)||s.pattern.includes(Rv))&&(l=!0);const u=[];let h,d;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(d=14,n.ignoreChangeEvents&&(d&=-3),n.ignoreCreateEvents&&(d&=-5),n.ignoreDeleteEvents&&(d&=-9));else if(l&&u.length===0){const f=t.getWorkspaceFolder(A.revive(s.baseUri)),g=i.getConfiguration("files",f).get("watcherExclude");if(g)for(const v in g)v&&g[v]===!0&&u.push(v)}else if(!l){const f=t.getWorkspaceFolder(A.revive(s.baseUri));if(f){const g=i.getConfiguration("files",f).get("watcherExclude");if(g){for(const v in g)if(v&&g[v]===!0){const b=`${un(v,"/")}/${wo}`;h||(h=[]),h.push(u$(f.uri.fsPath,b))}}if(!h||h.length===0)return a}}return c.$watch(r.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:d},!!o),Me.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},sV=class{get created(){return this.a.value}get changed(){return this.b.value}get deleted(){return this.c.value}constructor(e){this.d=e,this.a=new Zt(()=>this.d.created.map(A.revive)),this.b=new Zt(()=>this.d.changed.map(A.revive)),this.c=new Zt(()=>this.d.deleted.map(A.revive)),this.session=this.d.session}},nV=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new $,this.b=new $,this.c=new $,this.d=new $,this.g=new sl,this.h=new sl,this.i=new sl,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,r,s){return new rV(this.j,t,e,i,this.a.event,Vi.from(r),s)}$onFileEvent(e){this.a.fire(new sV(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:A.revive(i.source),newUri:A.revive(i.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(i=>A.revive(i.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(i=>A.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:A.revive(s.source),newUri:A.revive(s.target)}))},i,r);case 1:return await this.n(this.i,{files:t.map(s=>A.revive(s.target))},i,r);case 0:case 3:return await this.n(this.h,{files:t.map(s=>A.revive(s.target))},i,r)}}async n(e,t,i,r){const s=new Set,n=[];if(await e.fireAsync(t,r,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof So&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),r.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=_i.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},oV=class{constructor(e,t,i,r,s){this.a=t,this.b=i,this.c=r;const n=new be("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new z("showOptions","Show Options",o=>!0,o=>o),new z("resource","Interactive resource Uri",o=>!0,o=>o),new z("controllerId","Notebook controller Id",o=>!0,o=>o),new z("title","Interactive editor title",o=>!0,o=>o)],new ve("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:A.revive(o.notebookUri),inputUri:A.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:A.revive(o.notebookUri),inputUri:A.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,i,r){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1,encoding:"utf8"}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},aV=class{constructor(e){this.b=0,this.a=e.getProxy(Y.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),re(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},d$;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(d$||(d$={}));var cV=class mr extends Ye{constructor(t,i,r,s){super(t,i,r,s),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=r,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return mr.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,i){return this.getDirection()===0?new mr(this.startLineNumber,this.startColumn,t,i):new mr(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new er(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new er(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===0?new mr(t,i,this.endLineNumber,this.endColumn):new mr(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new mr(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===0?new mr(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new mr(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new mr(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!this.selectionsEqual(t[r],i[r]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,r,s,n){return n===0?new mr(t,i,r,s):new mr(r,s,t,i)}},f$=class uP{constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const r=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(r,i);if(!s1(s))return s[0]instanceof Vl?s.map(pw.from):uP.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const i=[],r=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:ur.from(s.kind),tags:s.tags?.map(Os.from)||[],detail:"",containerName:s.containerName,range:R.from(s.location.range),selectionRange:R.from(s.location.range),children:[]};for(;;){if(r.length===0){r.push(n),i.push(n);break}const o=r[r.length-1];if(Ye.containsRange(o.range,n.range)&&!Ye.equalsRange(o.range,n.range)){o.children?.push(n),r.push(n);break}r.pop()}}return i}},im=class{constructor(e,t,i,r,s,n){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.d=new Or("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),r=await this.h.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const s=this.d.add(r),n=new le;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<r.length;a++){if(!Ie.isRange(r[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[s,a],range:R.from(r[a].range),command:this.g.toInternal(r[a].command,n)})}return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let r;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?r=i:r=await this.h.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!r.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(r.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function rm(e){return Array.isArray(e)?e.map(xu.from):e?[xu.from(e)]:[]}var p$=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const r=this.d.getDocument(e),s=Ge.to(t),n=await this.e.provideDefinition(r,s,i);return rm(n)}},g$=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const r=this.d.getDocument(e),s=Ge.to(t),n=await this.e.provideDeclaration(r,s,i);return rm(n)}},m$=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const r=this.d.getDocument(e),s=Ge.to(t),n=await this.e.provideImplementation(r,s,i);return rm(n)}},v$=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const r=this.d.getDocument(e),s=Ge.to(t),n=await this.e.provideTypeDefinition(r,s,i);return rm(n)}},iA=class hP{static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,r,s){const n=this.g.getDocument(t),o=Ge.to(i);let a;if(r&&r.verbosityRequest){const h=r.verbosityRequest.previousHover.id,d=this.e.get(h);if(!d)throw new Error(`Hover with id ${h} not found`);const f={verbosityDelta:r.verbosityRequest.verbosityDelta,previousHover:d};a=await this.h.provideHover(n,o,s,f)}else a=await this.h.provideHover(n,o,s);if(!a||s1(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new Ie(o,o));const c=Eu.from(a),l=this.d;if(this.e.size===hP.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},w$=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const r=this.d.getDocument(e),s=Ge.to(t),n=await this.e.provideEvaluatableExpression(r,s,i);if(n)return vw.from(n)}},b$=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,r){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,R.to(t),bp.to(i),r);if(Array.isArray(n))return n.map(o=>wp.from(o))}},y$=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const r=this.d.getDocument(e),s=Ge.to(t),n=await this.e.provideDocumentHighlights(r,s,i);if(Array.isArray(n))return n.map(cc.from)}},A$=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideMultiDocumentHighlights(e,t,i,r){const s=this.d.getDocument(e),n=i.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=Ge.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,r);if(Array.isArray(a))return a.map(ww.from)}},x$=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const r=this.d.getDocument(e),s=Ge.to(t),n=await this.e.provideLinkedEditingRanges(r,s,i);if(n&&Array.isArray(n.ranges))return{ranges:yt(n.ranges.map(R.from)),wordPattern:n.wordPattern}}},E$=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,r){const s=this.d.getDocument(e),n=Ge.to(t),o=await this.e.provideReferences(s,n,i,r);if(Array.isArray(o))return o.map(Di.from)}},sm=class qm{static{this.d=1e3}constructor(t,i,r,s,n,o,a){this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new Or("CodeAction"),this.f=new Map}async provideCodeActions(t,i,r,s){const n=this.g.getDocument(t),o=cV.isISelection(i)?Pr.to(i):R.to(i),a=[];for(const f of this.j.getDiagnostics(t))if(o.intersection(f.range)&&a.push(f)>qm.d)break;const c={diagnostics:a,only:r.only?new pt(r.only):void 0,triggerKind:Mw.to(r.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!el(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new le;this.f.set(u,h);const d=[];for(let f=0;f<l.length;f++){const g=l[f];if(g)if(qm.o(g)&&!(g instanceof Gl))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),d.push({_isSynthetic:!0,title:g.title,command:this.h.toInternal(g,h)});else{const v=g;c.only&&(v.kind?c.only.contains(v.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${v.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const b=v.ranges??[];d.push({cacheId:[u,f],title:v.title,command:v.command&&this.h.toInternal(v.command,h),diagnostics:v.diagnostics&&v.diagnostics.map(oc.from),edit:v.edit&&_i.from(v.edit,void 0),kind:v.kind&&v.kind.value,isPreferred:v.isPreferred,isAI:et(this.m,"codeActionAI")?v.isAI:!1,ranges:et(this.m,"codeActionRanges")?yt(b.map(R.from)):void 0,disabled:v.disabled?.reason})}}return{cacheId:u,actions:d}}async resolveCodeAction(t,i){const[r,s]=t,n=this.e.get(r,s);if(!n||qm.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,i)??n;let a;o.edit&&(a=_i.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(r);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},ah=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.e=new Or("DocumentPasteEdit.edits")}async prepareDocumentPaste(e,t,i,r){if(!this.h.prepareDocumentPaste)return;this.d=void 0;const s=this.g.getDocument(e),n=t.map(u=>R.to(u)),o=vc.toDataTransfer(i,()=>{throw new n2});if(await this.h.prepareDocumentPaste(s,n,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter(([,u])=>!(u instanceof Of)),c=new Map,l=await Promise.all(Array.from(a,async([u,h])=>{const d=kt();return c.set(d,h),[u,await Ho.from(u,h,d)]}));return this.d=c,{items:l}}async providePasteEdits(e,t,i,r,s,n){if(!this.h.provideDocumentPasteEdits)return[];const o=this.g.getDocument(t),a=i.map(d=>R.to(d)),c=r.items.map(([d,f])=>{const g=this.d?.get(f.id);return g?[d,g]:[d,Ho.to(d,f,async v=>(await this.f.$resolvePasteFileData(this.j,e,v)).buffer)]}),l=new qa(c),u=await this.h.provideDocumentPasteEdits(o,a,l,{only:s.only?new Dn(s.only):void 0,triggerKind:s.triggerKind},n);if(!u||n.isCancellationRequested)return[];const h=this.e.add(u);return u.map((d,f)=>({_cacheId:[h,f],title:d.title??p(2928,null,this.k.displayName||this.k.name),kind:d.kind,yieldTo:d.yieldTo?.map(g=>g.value),insertText:typeof d.insertText=="string"?d.insertText:{snippet:d.insertText.value},additionalEdit:d.additionalEdit?_i.from(d.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,r]=e,s=this.e.get(i,r);if(!s||!this.h.resolveDocumentPasteEdit)return{};const n=await this.h.resolveDocumentPasteEdit(s,t)??s;return{insertText:n.insertText,additionalEdit:n.additionalEdit?_i.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.e.delete(e)}},S$=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(s))return s.map(zt.from)}},rA=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const s=this.d.getDocument(e),n=R.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(zt.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){c1(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(R.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(zt.from)}},k$=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,s){const n=this.d.getDocument(e),o=Ge.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,i,r,s);if(Array.isArray(a))return a.map(zt.from)}},nm=class{constructor(e,t){this.e=e,this.f=t,this.d=new Or("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!el(i))return{symbols:[]};const r=this.d.add(i),s={cacheId:r,symbols:[]};for(let n=0;n<i.length;n++){const o=i[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...jo.from(o),cacheId:[r,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const r=await this.e.resolveWorkspaceSymbol(i,t);return r&&xs(e,jo.from(r),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},om=class P4{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,r){this.d=t,this.e=i,this.f=r}async provideRenameEdits(t,i,r,s){const n=this.d.getDocument(t),o=Ge.to(i);try{const a=await this.e.provideRenameEdits(n,o,r,s);return a?_i.from(a):void 0}catch(a){const c=P4.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,r){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=Ge.to(i);try{const o=await this.e.prepareRename(s,n,r);let a,c;if(Ie.isRange(o)?(a=o,c=s.getText(o)):xt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:R.from(a),text:c}}catch(o){const a=P4.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},sA=class T4{static{this.d={[Bd.Invoke]:su.Invoke,[Bd.Automatic]:su.Automatic}}constructor(t,i,r){this.e=t,this.f=i,this.g=r}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,r,s){const n=this.e.getDocument(t),o=R.to(i);try{const a=T4.d[r],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(T4.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},nA=class{constructor(e,t){this.resultId=e,this.tokens=t}},oA=class Ur{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,r){const s=this.f.getDocument(t),n=i!==0?this.d.get(i):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,r):await this.g.provideDocumentSemanticTokens(s,r);return n&&this.d.delete(i),o?(o=Ur.h(o),this.o(Ur.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return Ur.j(t)?Ur.k(t)?t:new Ka(new Uint32Array(t.data),t.resultId):Ur.l(t)?Ur.m(t)?t:new Hf(t.edits.map(i=>new d9(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!Ur.j(i)||!t||!t.tokens)return i;const r=t.tokens,s=r.length,n=i.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&r[a]===n[a];)a++;if(a===s&&a===o)return new Hf([],i.resultId);let l=0;const u=c-a;for(;l<u&&r[s-l-1]===n[o-l-1];)l++;return new Hf([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],i.resultId)}o(t,i){if(Ur.j(t)){const r=this.e++;return this.d.set(r,new nA(t.resultId,t.data)),Qy({id:r,type:"full",data:t.data})}if(Ur.l(t)){const r=this.e++;return Ur.j(i)?this.d.set(r,new nA(i.resultId,i.data)):this.d.set(r,new nA(t.resultId)),Qy({id:r,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},I$=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(r,R.to(t),i);return s?this.f(s):null}f(e){return Qy({id:0,type:"full",data:e.data})}},ch=class dP{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,r,s,n){this.f=t,this.g=i,this.h=r,this.j=s,this.k=n,this.d=new Or("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,r,s){const n=this.f.getDocument(t),o=Ge.to(i),a=n.getWordRangeAtPosition(o)||new Ie(o,o),c=a.with({end:o}),l=new Oi,u=await this.h.provideCompletionItems(n,o,s,yw.to(r));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new ja(u):u,d=dP.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),f=new le;this.e.set(d,f);const g=[],v={x:d,b:g,a:{replace:R.from(a),insert:R.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let b=0;b<h.items.length;b++){const x=h.items[b],E=this.l(x,[d,b],c,a);g.push(E)}return v}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const r=this.d.get(...t);if(!r)return;const s=this.l(r,t),n=await this.h.resolveCompletionItem(r,i);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!Ei(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,r,s){const n=this.e.get(i[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:i,a:t.label,b:t.kind!==void 0?Ap.from(t.kind):void 0,m:t.tags&&t.tags.map(yp.from),c:t.detail,d:typeof t.documentation>"u"?void 0:xe.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(zt.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof ko&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),Ie.isRange(c)?a.j=R.from(c):c&&(!r?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:R.from(c.inserting),replace:R.from(c.replacing)}),a}},Xo=class{constructor(e,t,i,r){this.f=e,this.g=t,this.h=i,this.j=r,this.d=new lV,this.k={[jd.Automatic]:ru.Automatic,[jd.Explicit]:ru.Invoke},this.e=et(this.f,"inlineCompletionsAdditions")}get supportsHandleEvents(){return et(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function"||typeof this.h.handleDidRejectCompletionItem=="function"||typeof this.h.handleEndOfLifetime=="function")}async provideInlineCompletions(e,t,i,r){const s=this.g.getDocument(e),n=Ge.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:R.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],requestUuid:i.requestUuid},r);if(!o)return;const{resultItems:a,list:c}=Array.isArray(o)?{resultItems:o,list:void 0}:{resultItems:o.items,list:o},l=this.e?Array.isArray(o)?[]:o.commands||[]:[],u=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let h;return{pid:this.d.createReferenceId({dispose(){h?.dispose()},items:a,list:c}),items:a.map((f,g)=>{let v;f.command&&(h||(h=new le),v=this.j.toInternal(f.command,h));let b;f.action&&(h||(h=new le),b=this.j.toInternal(f.action,h));const x=f.insertText;return{insertText:typeof x=="string"?x:{snippet:x.value},filterText:f.filterText,range:f.range?R.from(f.range):void 0,showRange:this.e&&f.showRange?R.from(f.showRange):void 0,command:v,action:b,idx:g,completeBracketPairs:this.e?f.completeBracketPairs:!1,isInlineEdit:this.e?f.isInlineEdit:!1,showInlineEditMenu:this.e?f.showInlineEditMenu:!1,displayLocation:f.displayLocation&&this.e?{range:R.from(f.displayLocation.range),label:f.displayLocation.label}:void 0,warning:f.warning&&this.e?{message:xe.from(f.warning.message),icon:f.warning.icon?Jp.fromThemeIcon(f.warning.icon):void 0}:void 0}}),commands:l.map(f=>(h||(h=new le),Aw.from(f,this.j,h))),suppressSuggestions:!1,enableForwardStability:u}}disposeCompletions(e,t){const i=this.d.get(e);if(this.h.handleListEndOfLifetime&&this.e&&i?.list){let n=function(o){switch(o.kind){case"lostRace":return{kind:Ts.LostRace};case"tokenCancellation":return{kind:Ts.TokenCancellation};case"other":return{kind:Ts.Other};case"empty":return{kind:Ts.Empty};case"notTaken":return{kind:Ts.NotTaken};default:return{kind:Ts.Other}}};var r=n;this.h.handleListEndOfLifetime(i.list,n(t))}this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this.d.get(e)?.items[t];r&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i,r){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,i),this.h.handleDidPartiallyAcceptCompletionItem(s,zw.to(r)))}handleEndOfLifetime(e,t,i){const r=this.d.get(e)?.items[t];if(r&&this.h.handleEndOfLifetime&&this.e){const s=Ww.to(i,n=>this.d.get(n.pid)?.items[n.idx]);this.h.handleEndOfLifetime(r,s)}}handleRejection(e,t){const i=this.d.get(e)?.items[t];i&&this.h.handleDidRejectCompletionItem&&this.e&&this.h.handleDidRejectCompletionItem(i)}},lV=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},aA=class{constructor(e,t){this.e=e,this.f=t,this.d=new Or("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const s=this.e.getDocument(e),n=Ge.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(s,n,r,o);if(a){const c=this.d.add([a]);return{...Su.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=Su.to(e.activeSignatureHelp),r=this.d.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},am=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.d=new Or("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const r=this.f.getDocument(e),s=R.to(t),n=await this.h.provideInlayHints(r,s,i);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new le);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const r=await this.h.resolveInlayHint(i,t);if(r&&this.l(r))return this.m(r,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:xe.fromStrict(e.tooltip),position:Ge.from(e.position),textEdits:e.textEdits&&e.textEdits.map(zt.from),kind:e.kind&&Sp.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")r.label=e.label;else{const s=[];r.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:xe.fromStrict(n.tooltip)};tr.isLocation(n.location)&&(o.location=Di.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,i)),s.push(o)}}return r}},cm=class Gm{constructor(t,i){this.e=t,this.f=i,this.d=new Or("DocumentLink")}async provideLinks(t,i){const r=this.e.getDocument(t),s=await this.f.provideDocumentLinks(r,i);if(!(!Array.isArray(s)||s.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(Gm.g).map(Bo.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!Gm.g(s[a]))continue;const c=Bo.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const r=this.d.get(...t);if(!r)return;const s=await this.f.resolveDocumentLink(r,i);if(!(!s||!Gm.g(s)))return Bo.from(s)}releaseLinks(t){this.d.delete(t)}},cA=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),r=await this.e.provideDocumentColors(i,t);return Array.isArray(r)?r.map(n=>({color:lc.from(n.color),range:R.from(n.range)})):[]}async provideColorPresentations(e,t,i){const r=this.d.getDocument(e),s=R.to(t.range),n=lc.to(t.color),o=await this.e.provideColorPresentations(n,{document:r,range:s},i);if(Array.isArray(o))return o.map(kp.from)}},C$=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideFoldingRanges(r,t,i);if(Array.isArray(s))return s.map($p.from)}},$$=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const r=this.d.getDocument(e),s=t.map(Ge.to),n=await this.e.provideSelectionRanges(r,s,i);if(!el(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(kw.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},lh=class{constructor(e,t){this.f=e,this.g=t,this.d=new kg(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=Ge.to(t),n=await this.g.prepareCallHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(r,i);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>R.from(o))}))}async provideCallsFrom(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(r,i);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>R.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Uo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},uh=class{constructor(e,t){this.f=e,this.g=t,this.d=new kg(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=Ge.to(t),n=await this.g.prepareTypeHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(r,i);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(r,i);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=zo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},lm=class{constructor(e,t,i,r,s){this.e=e,this.f=t,this.g=i,this.h=r,this.j=s,this.d=new Or("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,r,s){const n=this.f.getDocument(t),o=Ge.to(i),a=vc.toDataTransfer(r,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=nr(c),u=this.d.add(l);return l.map((h,d)=>({_cacheId:[u,d],title:h.title??p(2929,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?_i.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,r]=e,s=this.d.get(i,r);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?_i.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},hh=class{constructor(e,t){this.adapter=e,this.extension=t}},uV=class Qt{static{this.d=0}constructor(t,i,r,s,n,o,a,c){this.g=i,this.h=r,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(Y.MainThreadLanguageFeatures)}o(t,i){return nc.from(t,this.g,i)}p(t){return new Me(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return Qt.d++}async s(t,i,r,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof i))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${r.toString().replace(/[\r\n]/g,"")}'`);const l=r(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{yi(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),Je.isCancellationToken(n)?dd(l,n):l}t(t,i){const r=this.q();return this.f.set(r,new hh(t,i)),r}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,r,s){const n=this.t(new f$(this.h,r),t),o=s&&s.label||Qt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(i,t),o),this.p(n)}$provideDocumentSymbols(t,i,r){return this.s(t,f$,s=>s.provideDocumentSymbols(A.revive(i),r),void 0,r)}registerCodeLensProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new hh(new im(this.h,this.j.converter,r,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(i,t),n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Me.from(o,a)}return o}$provideCodeLenses(t,i,r){return this.s(t,im,s=>s.provideCodeLenses(A.revive(i),r),void 0,r,i.scheme==="output")}$resolveCodeLens(t,i,r){return this.s(t,im,s=>s.resolveCodeLens(i,r),void 0,void 0,!0)}$releaseCodeLenses(t,i){this.s(t,im,r=>Promise.resolve(r.releaseCodeLenses(i)),void 0,void 0,!0)}registerDefinitionProvider(t,i,r){const s=this.t(new p$(this.h,r),t);return this.e.$registerDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideDefinition(t,i,r,s){return this.s(t,p$,n=>n.provideDefinition(A.revive(i),r,s),[],s)}registerDeclarationProvider(t,i,r){const s=this.t(new g$(this.h,r),t);return this.e.$registerDeclarationSupport(s,this.o(i,t)),this.p(s)}$provideDeclaration(t,i,r,s){return this.s(t,g$,n=>n.provideDeclaration(A.revive(i),r,s),[],s)}registerImplementationProvider(t,i,r){const s=this.t(new m$(this.h,r),t);return this.e.$registerImplementationSupport(s,this.o(i,t)),this.p(s)}$provideImplementation(t,i,r,s){return this.s(t,m$,n=>n.provideImplementation(A.revive(i),r,s),[],s)}registerTypeDefinitionProvider(t,i,r){const s=this.t(new v$(this.h,r),t);return this.e.$registerTypeDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideTypeDefinition(t,i,r,s){return this.s(t,v$,n=>n.provideTypeDefinition(A.revive(i),r,s),[],s)}registerHoverProvider(t,i,r,s){const n=this.t(new iA(this.h,r),t);return this.e.$registerHoverProvider(n,this.o(i,t)),this.p(n)}$provideHover(t,i,r,s,n){return this.s(t,iA,o=>o.provideHover(A.revive(i),r,s,n),void 0,n)}$releaseHover(t,i){this.s(t,iA,r=>Promise.resolve(r.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,r,s){const n=this.t(new w$(this.h,r),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(i,t)),this.p(n)}$provideEvaluatableExpression(t,i,r,s){return this.s(t,w$,n=>n.provideEvaluatableExpression(A.revive(i),r,s),void 0,s)}registerInlineValuesProvider(t,i,r,s){const n=typeof r.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new b$(this.h,r),t);this.e.$registerInlineValuesProvider(o,this.o(i,t),n);let a=this.p(o);if(n!==void 0){const c=r.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Me.from(a,c)}return a}$provideInlineValues(t,i,r,s,n){return this.s(t,b$,o=>o.provideInlineValues(A.revive(i),r,s,n),void 0,n)}registerDocumentHighlightProvider(t,i,r){const s=this.t(new y$(this.h,r),t);return this.e.$registerDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,i,r){const s=this.t(new A$(this.h,r,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}$provideDocumentHighlights(t,i,r,s){return this.s(t,y$,n=>n.provideDocumentHighlights(A.revive(i),r,s),void 0,s)}$provideMultiDocumentHighlights(t,i,r,s,n){return this.s(t,A$,o=>o.provideMultiDocumentHighlights(A.revive(i),r,s.map(a=>A.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,i,r){const s=this.t(new x$(this.h,r),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(i,t)),this.p(s)}$provideLinkedEditingRanges(t,i,r,s){return this.s(t,x$,async n=>{const o=await n.provideLinkedEditingRanges(A.revive(i),r,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Qt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,i,r){const s=this.t(new E$(this.h,r),t);return this.e.$registerReferenceSupport(s,this.o(i,t)),this.p(s)}$provideReferences(t,i,r,s,n){return this.s(t,E$,o=>o.provideReferences(A.revive(i),r,s,n),void 0,n)}registerCodeActionProvider(t,i,r,s){const n=new le,o=this.t(new sm(this.h,this.j.converter,this.k,r,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(i,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},Qt.u(t),Qt.w(t),!!r.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,i,r,s,n){return this.s(t,sm,o=>o.provideCodeActions(A.revive(i),r,s,n),void 0,n)}$resolveCodeAction(t,i,r){return this.s(t,sm,s=>s.resolveCodeAction(i,r),{},void 0)}$releaseCodeActions(t,i){this.s(t,sm,r=>Promise.resolve(r.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,r){const s=this.t(new S$(this.h,r),t);return this.e.$registerDocumentFormattingSupport(s,this.o(i,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,i,r,s){return this.s(t,S$,n=>n.provideDocumentFormattingEdits(A.revive(i),r,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,i,r){const s=typeof r.provideDocumentRangesFormattingEdits=="function",n=this.t(new rA(this.h,r),t);return this.e.$registerRangeFormattingSupport(n,this.o(i,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,i,r,s,n){return this.s(t,rA,o=>o.provideDocumentRangeFormattingEdits(A.revive(i),r,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,i,r,s,n){return this.s(t,rA,o=>o.provideDocumentRangesFormattingEdits(A.revive(i),r,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,i,r,s){const n=this.t(new k$(this.h,r),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(i,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,i,r,s,n,o){return this.s(t,k$,a=>a.provideOnTypeFormattingEdits(A.revive(i),r,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const r=this.t(new nm(i,this.l),t);return this.e.$registerNavigateTypeSupport(r,typeof i.resolveWorkspaceSymbol=="function"),this.p(r)}$provideWorkspaceSymbols(t,i,r){return this.s(t,nm,s=>s.provideWorkspaceSymbols(i,r),{symbols:[]},r)}$resolveWorkspaceSymbol(t,i,r){return this.s(t,nm,s=>s.resolveWorkspaceSymbol(i,r),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.s(t,nm,r=>r.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,r){const s=this.t(new om(this.h,r,this.l),t);return this.e.$registerRenameSupport(s,this.o(i,t),om.supportsResolving(r)),this.p(s)}$provideRenameEdits(t,i,r,s,n){return this.s(t,om,o=>o.provideRenameEdits(A.revive(i),r,s,n),void 0,n)}$resolveRenameLocation(t,i,r,s){return this.s(t,om,n=>n.resolveRenameLocation(A.revive(i),r,s),void 0,s)}registerNewSymbolNamesProvider(t,i,r){const s=this.t(new sA(this.h,r,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(i,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,sA,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,r,s,n){return this.s(t,sA,o=>o.provideNewSymbolNames(A.revive(i),r,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,i,r,s){const n=this.t(new oA(this.h,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(i,t),s,o);let a=this.p(n);if(o){const c=r.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Me.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,r,s){return this.s(t,oA,n=>n.provideDocumentSemanticTokens(A.revive(i),r,s),null,s)}$releaseDocumentSemanticTokens(t,i){this.s(t,oA,r=>r.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,r,s){const n=this.t(new I$(this.h,r),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(i,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,i,r,s){return this.s(t,I$,n=>n.provideDocumentRangeSemanticTokens(A.revive(i),r,s),null,s)}registerCompletionItemProvider(t,i,r,s){const n=this.t(new ch(this.h,this.j.converter,r,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(i,t),s,ch.supportsResolving(r),t.identifier),this.p(n)}$provideCompletionItems(t,i,r,s,n){return this.s(t,ch,o=>o.provideCompletionItems(A.revive(i),r,s,n),void 0,n)}$resolveCompletionItem(t,i,r){return this.s(t,ch,s=>s.resolveCompletionItem(i,r),void 0,r)}$releaseCompletionItems(t,i){this.s(t,ch,r=>r.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,r,s){const n=typeof r.onDidChange=="function"&&et(t,"inlineCompletionsAdditions")?this.q():void 0,o=new Xo(t,this.h,r,this.j.converter),a=this.t(o,t);let c=this.p(a);if(n!==void 0){const l=r.onDidChange(u=>this.e.$emitInlineCompletionsChange(n));c=Me.from(c,l)}return this.e.$registerInlineCompletionsSupport(a,this.o(i,t),o.supportsHandleEvents,Ve.toKey(t.identifier.value),t.version,s?.groupId?Ve.toKey(s.groupId):void 0,s?.yieldTo?.map(l=>Ve.toKey(l))||[],s?.displayName,s?.debounceDelayMs,n),c}$provideInlineCompletions(t,i,r,s,n){return this.s(t,Xo,o=>o.provideInlineCompletions(A.revive(i),r,s,n),void 0,void 0)}$handleInlineCompletionDidShow(t,i,r,s){this.s(t,Xo,async n=>{n.handleDidShowCompletionItem(i,r,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,r,s,n){this.s(t,Xo,async o=>{o.handlePartialAccept(i,r,s,n)},void 0,void 0)}$handleInlineCompletionEndOfLifetime(t,i,r,s){this.s(t,Xo,async n=>{n.handleEndOfLifetime(i,r,s)},void 0,void 0)}$handleInlineCompletionRejection(t,i,r){this.s(t,Xo,async s=>{s.handleRejection(i,r)},void 0,void 0)}$freeInlineCompletionsList(t,i,r){this.s(t,Xo,async s=>{s.disposeCompletions(i,r)},void 0,void 0)}registerSignatureHelpProvider(t,i,r,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new aA(this.h,r),t);return this.e.$registerSignatureHelpProvider(o,this.o(i,t),n),this.p(o)}$provideSignatureHelp(t,i,r,s,n){return this.s(t,aA,o=>o.provideSignatureHelp(A.revive(i),r,s,n),void 0,n)}$releaseSignatureHelp(t,i){this.s(t,aA,r=>r.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,r){const s=typeof r.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new am(this.h,this.j.converter,r,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(i,t),typeof r.resolveInlayHint=="function",s,Qt.u(t));let o=this.p(n);if(s!==void 0){const a=r.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Me.from(o,a)}return o}$provideInlayHints(t,i,r,s){return this.s(t,am,n=>n.provideInlayHints(A.revive(i),r,s),void 0,s)}$resolveInlayHint(t,i,r){return this.s(t,am,s=>s.resolveInlayHint(i,r),void 0,r)}$releaseInlayHints(t,i){this.s(t,am,r=>r.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,r){const s=this.t(new cm(this.h,r),t);return this.e.$registerDocumentLinkProvider(s,this.o(i,t),typeof r.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,i,r){return this.s(t,cm,s=>s.provideLinks(A.revive(i),r),void 0,r,i.scheme==="output")}$resolveDocumentLink(t,i,r){return this.s(t,cm,s=>s.resolveLink(i,r),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.s(t,cm,r=>r.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,r){const s=this.t(new cA(this.h,r),t);return this.e.$registerDocumentColorProvider(s,this.o(i,t)),this.p(s)}$provideDocumentColors(t,i,r){return this.s(t,cA,s=>s.provideColors(A.revive(i),r),[],r)}$provideColorPresentations(t,i,r,s){return this.s(t,cA,n=>n.provideColorPresentations(A.revive(i),r,s),void 0,s)}registerFoldingRangeProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new hh(new C$(this.h,r),t)),this.e.$registerFoldingRangeProvider(s,this.o(i,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Me.from(o,a)}return o}$provideFoldingRanges(t,i,r,s){return this.s(t,C$,n=>n.provideFoldingRanges(A.revive(i),r,s),void 0,s)}registerSelectionRangeProvider(t,i,r){const s=this.t(new $$(this.h,r,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(i,t)),this.p(s)}$provideSelectionRanges(t,i,r,s){return this.s(t,$$,n=>n.provideSelectionRanges(A.revive(i),r,s),[],s)}registerCallHierarchyProvider(t,i,r){const s=this.t(new lh(this.h,r),t);return this.e.$registerCallHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareCallHierarchy(t,i,r,s){return this.s(t,lh,n=>Promise.resolve(n.prepareSession(A.revive(i),r,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,i,r,s){return this.s(t,lh,n=>n.provideCallsTo(i,r,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,i,r,s){return this.s(t,lh,n=>n.provideCallsFrom(i,r,s),void 0,s)}$releaseCallHierarchy(t,i){this.s(t,lh,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,r){const s=this.t(new uh(this.h,r),t);return this.e.$registerTypeHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareTypeHierarchy(t,i,r,s){return this.s(t,uh,n=>Promise.resolve(n.prepareSession(A.revive(i),r,s)),void 0,s)}$provideTypeHierarchySupertypes(t,i,r,s){return this.s(t,uh,n=>n.provideSupertypes(i,r,s),void 0,s)}$provideTypeHierarchySubtypes(t,i,r,s){return this.s(t,uh,n=>n.provideSubtypes(i,r,s),void 0,s)}$releaseTypeHierarchy(t,i){this.s(t,uh,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new hh(new lm(this.e,this.h,r,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(i,t),s?{supportsResolve:!!r.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,i,r,s,n,o){return this.s(t,lm,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,A.revive(r),s,n,o)),void 0,void 0)}$resolveDropEdit(t,i,r){return this.s(t,lm,s=>s.resolveDropEdit(i,r),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.s(t,lm,r=>Promise.resolve(r.releaseDropEdits(i)),void 0,void 0)}registerDocumentPasteEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new hh(new ah(this.e,this.h,r,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(i,t),{supportsCopy:!!r.prepareDocumentPaste,supportsPaste:!!r.provideDocumentPasteEdits,supportsResolve:!!r.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,i,r,s,n){return this.s(t,ah,o=>o.prepareDocumentPaste(A.revive(i),r,s,n),void 0,n)}$providePasteEdits(t,i,r,s,n,o,a){return this.s(t,ah,c=>c.providePasteEdits(i,A.revive(r),s,n,o,a),void 0,a)}$resolvePasteEdit(t,i,r){return this.s(t,ah,s=>s.resolvePasteEdit(i,r),{},void 0)}$releasePasteEdits(t,i){this.s(t,ah,r=>Promise.resolve(r.releasePasteEdits(i)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:Qt.y(t.decreaseIndentPattern),increaseIndentPattern:Qt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Qt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Qt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:Qt.y(t.beforeText),afterText:t.afterText?Qt.y(t.afterText):void 0,previousLineText:t.previousLineText?Qt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(Qt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>Wa.toString(i)):void 0}}static E(t){return t.map(Qt.D)}setLanguageConfiguration(t,i,r){const{wordPattern:s}=r;if(s&&C5(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(i,s):this.h.setWordDefinitionFor(i,void 0),r.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),r.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:r.comments,brackets:r.brackets,wordPattern:r.wordPattern?Qt.y(r.wordPattern):void 0,indentationRules:r.indentationRules?Qt.z(r.indentationRules):void 0,onEnterRules:r.onEnterRules?Qt.C(r.onEnterRules):void 0,__electricCharacterSupport:r.__electricCharacterSupport,__characterPairSupport:r.__characterPairSupport,autoClosingPairs:r.autoClosingPairs?Qt.E(r.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,i,o),this.p(n)}$setWordDefinitions(t){for(const i of t)this.h.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}},um;(function(e){e.Internal={type:"internal",label:"Built-In"};function t(s){switch(s.type){case"extension":return`extension:${s.extensionId.value}`;case"mcp":return`mcp:${s.collectionId}:${s.definitionId}`;case"user":return`user:${s.file.toString()}`;case"internal":return"internal"}}e.toKey=t;function i(s,n){return t(s)===t(n)}e.equals=i;function r(s){return s.type==="internal"?{ordinal:1,label:p(5797,null)}:s.type==="mcp"?{ordinal:2,label:p(5798,null,s.label)}:s.type==="user"?{ordinal:0,label:p(5799,null)}:{ordinal:3,label:p(5800,null,s.label)}}e.classify=r})(um||(um={}));function hV(e){return typeof e=="object"&&typeof e.sessionId=="string"}var dV=V("ILanguageModelToolsService"),fV=V("notebookService"),pV=V("codeMapperService"),D$="vscode_editFile",lA="vscode_editFile_internal",P$={id:lA,displayName:"",modelDescription:"",source:um.Internal},uA=class{constructor(t,i,r){this.a=t,this.b=i,this.c=r}async invoke(t,i,r,s){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const n=t.parameters,o=A.revive(n.uri),a=Bv.parse(o)?.notebook||o,c=this.a.getSession(t.context?.sessionId),l=c.getRequests().at(-1);c.acceptResponseProgress(l,{kind:"markdownContent",content:new Td("\n````\n")}),c.acceptResponseProgress(l,{kind:"codeblockUri",uri:a,isEdit:!0}),c.acceptResponseProgress(l,{kind:"markdownContent",content:new Td("\n````\n")}),this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",edits:[],uri:a}):c.acceptResponseProgress(l,{kind:"textEdit",edits:[],uri:a});const u=c.editingSession;if(!u)throw new Error("This tool must be called from within an editing session");const h=await this.b.mapCode({codeBlocks:[{code:n.code,resource:a,markdownBeforeBlock:n.explanation}],location:"tool",chatRequestId:t.chatRequestId,chatRequestModel:t.modelId,chatSessionId:t.context.sessionId},{textEdit:(f,g)=>{c.acceptResponseProgress(l,{kind:"textEdit",uri:f,edits:g})},notebookEdit(f,g){c.acceptResponseProgress(l,{kind:"notebookEdit",uri:f,edits:g})}},s);if(this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",uri:a,edits:[],done:!0}):c.acceptResponseProgress(l,{kind:"textEdit",uri:a,edits:[],done:!0}),h?.errorMessage)throw new Error(h.errorMessage);let d;return await new Promise(f=>{let g=!1;d=wC(v=>{const x=u.entries.read(v)?.find(E=>E.modifiedURI.toString()===a.toString());x&&(x.isCurrentlyBeingModifiedBy.read(v)?g=!0:g&&f(!0))})}).finally(()=>{d.dispose()}),{content:[{kind:"text",value:"The file was edited successfully"}]}}async prepareToolInvocation(t,i){return{presentation:"hidden"}}};uA=__decorate([__param(0,o_),__param(1,pV),__param(2,fV)],uA);var T$=class extends te{static{this.ID="chat.builtinTools"}constructor(t,i){super();const r=i.createInstance(uA);this.B(t.registerToolData(P$)),this.B(t.registerToolImplementation(P$.id,r))}};T$=__decorate([__param(0,dV),__param(1,wl)],T$);var gV="vscode_fetchWebPage_internal",M$=V("commandService"),hA=new class{constructor(){this.a=new Map,this.b=new $,this.onDidRegisterCommand=this.b.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const o=[];for(const c of e.metadata.args)o.push(c.constraint);const a=e.handler;e.handler=function(c,...l){return I2(l,o),a(c,...l)}}const{id:i}=e;let r=this.a.get(i);r||(r=new nn,this.a.set(i,r));const s=r.unshift(e),n=re(()=>{s(),this.a.get(i)?.isEmpty()&&this.a.delete(i)});return this.b.fire(i),l1(n)}registerCommandAlias(e,t){return hA.registerCommand(e,(i,...r)=>i.get(M$).executeCommand(t,...r))}getCommand(e){const t=this.a.get(e);if(!(!t||t.isEmpty()))return li.first(t)}getCommands(){const e=new Map;for(const t of this.a.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};hA.registerCommand("noop",()=>{});var N$;(function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"})(N$||(N$={}));function L$(e,t){if(typeof e=="number"){if(e===0)return null;const i=(e&65535)>>>0,r=(e&4294901760)>>>16;return r!==0?new dm([hm(i,t),hm(r,t)]):new dm([hm(i,t)])}else{const i=[];for(let r=0;r<e.length;r++)i.push(hm(e[r],t));return new dm(i)}}function hm(e,t){const i=!!(e&2048),r=!!(e&256),s=t===2?r:i,n=!!(e&1024),o=!!(e&512),a=t===2?i:r,c=e&255;return new mV(s,n,o,a,c)}var mV=class fP{constructor(t,i,r,s,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=r,this.metaKey=s,this.keyCode=n}equals(t){return t instanceof fP&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){const t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",r=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`K${t}${i}${r}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new dm([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},dm=class{constructor(e){if(e.length===0)throw $e("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},R$;(function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"})(R$||(R$={}));var vV=class pP{constructor(){this.c=new nn,this.d=[],this.e=null}static f(t){if(Xn===1){if(t&&t.win)return t.win}else if(Xn===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const i=pP.f(t),r=new le;if(i&&i.primary){const s=L$(i.primary,Xn);s&&r.add(this.g(s,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let s=0,n=i.secondary.length;s<n;s++){const o=i.secondary[s],a=L$(o,Xn);a&&r.add(this.g(a,t.id,t.args,t.weight,-s-1,t.when))}return r}setExtensionKeybindings(t){const i=[];let r=0;for(const s of t)s.keybinding&&(i[r++]={keybinding:s.keybinding,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1});this.d=i,this.e=null}registerCommandAndKeybindingRule(t){return u1(this.registerKeybindingRule(t),hA.registerCommand(t))}g(t,i,r,s,n,o){const a=this.c.push({keybinding:t,command:i,commandArgs:r,when:o,weight1:s,weight2:n,extensionId:null,isBuiltinExtension:!1});return this.e=null,re(()=>{a(),this.e=null})}getDefaultKeybindings(){return this.e||(this.e=Array.from(this.c).concat(this.d),this.e.sort(yV)),this.e.slice(0)}},wV=new vV,bV={EditorModes:"platform.keybindingsRegistry"};Yt.add(bV.EditorModes,wV);function yV(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}var fm;function AV(e){return e.command!==void 0}var dh=class D{static{this.a=new Map}static{this.CommandPalette=new D("CommandPalette")}static{this.DebugBreakpointsContext=new D("DebugBreakpointsContext")}static{this.DebugCallStackContext=new D("DebugCallStackContext")}static{this.DebugConsoleContext=new D("DebugConsoleContext")}static{this.DebugVariablesContext=new D("DebugVariablesContext")}static{this.NotebookVariablesContext=new D("NotebookVariablesContext")}static{this.DebugHoverContext=new D("DebugHoverContext")}static{this.DebugWatchContext=new D("DebugWatchContext")}static{this.DebugToolBar=new D("DebugToolBar")}static{this.DebugToolBarStop=new D("DebugToolBarStop")}static{this.DebugDisassemblyContext=new D("DebugDisassemblyContext")}static{this.DebugCallStackToolbar=new D("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new D("DebugCreateConfiguration")}static{this.EditorContext=new D("EditorContext")}static{this.SimpleEditorContext=new D("SimpleEditorContext")}static{this.EditorContent=new D("EditorContent")}static{this.EditorLineNumberContext=new D("EditorLineNumberContext")}static{this.EditorContextCopy=new D("EditorContextCopy")}static{this.EditorContextPeek=new D("EditorContextPeek")}static{this.EditorContextShare=new D("EditorContextShare")}static{this.EditorTitle=new D("EditorTitle")}static{this.CompactWindowEditorTitle=new D("CompactWindowEditorTitle")}static{this.EditorTitleRun=new D("EditorTitleRun")}static{this.EditorTitleContext=new D("EditorTitleContext")}static{this.EditorTitleContextShare=new D("EditorTitleContextShare")}static{this.EmptyEditorGroup=new D("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new D("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new D("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new D("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new D("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new D("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new D("ExplorerContext")}static{this.ExplorerContextShare=new D("ExplorerContextShare")}static{this.ExtensionContext=new D("ExtensionContext")}static{this.ExtensionEditorContextMenu=new D("ExtensionEditorContextMenu")}static{this.GlobalActivity=new D("GlobalActivity")}static{this.CommandCenter=new D("CommandCenter")}static{this.CommandCenterCenter=new D("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new D("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new D("LayoutControlMenu")}static{this.MenubarMainMenu=new D("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new D("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new D("MenubarDebugMenu")}static{this.MenubarEditMenu=new D("MenubarEditMenu")}static{this.MenubarCopy=new D("MenubarCopy")}static{this.MenubarFileMenu=new D("MenubarFileMenu")}static{this.MenubarGoMenu=new D("MenubarGoMenu")}static{this.MenubarHelpMenu=new D("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new D("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new D("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new D("PanelAlignmentMenu")}static{this.PanelPositionMenu=new D("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new D("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new D("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new D("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new D("MenubarSelectionMenu")}static{this.MenubarShare=new D("MenubarShare")}static{this.MenubarSwitchEditorMenu=new D("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new D("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new D("MenubarTerminalMenu")}static{this.MenubarTerminalSuggestStatusMenu=new D("MenubarTerminalSuggestStatusMenu")}static{this.MenubarViewMenu=new D("MenubarViewMenu")}static{this.MenubarHomeMenu=new D("MenubarHomeMenu")}static{this.OpenEditorsContext=new D("OpenEditorsContext")}static{this.OpenEditorsContextShare=new D("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new D("ProblemsPanelContext")}static{this.SCMInputBox=new D("SCMInputBox")}static{this.SCMChangeContext=new D("SCMChangeContext")}static{this.SCMResourceContext=new D("SCMResourceContext")}static{this.SCMResourceContextShare=new D("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new D("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new D("SCMResourceGroupContext")}static{this.SCMSourceControl=new D("SCMSourceControl")}static{this.SCMSourceControlInline=new D("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new D("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new D("SCMHistoryTitle")}static{this.SCMHistoryItemContext=new D("SCMHistoryItemContext")}static{this.SCMHistoryItemChatContext=new D("SCMHistoryItemChatContext")}static{this.SCMHistoryItemChangeContext=new D("SCMHistoryItemChangeContext")}static{this.SCMHistoryItemHover=new D("SCMHistoryItemHover")}static{this.SCMHistoryItemRefContext=new D("SCMHistoryItemRefContext")}static{this.SCMQuickDiffDecorations=new D("SCMQuickDiffDecorations")}static{this.SCMTitle=new D("SCMTitle")}static{this.SearchContext=new D("SearchContext")}static{this.SearchActionMenu=new D("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new D("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new D("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new D("StickyScrollContext")}static{this.TestItem=new D("TestItem")}static{this.TestItemGutter=new D("TestItemGutter")}static{this.TestProfilesContext=new D("TestProfilesContext")}static{this.TestMessageContext=new D("TestMessageContext")}static{this.TestMessageContent=new D("TestMessageContent")}static{this.TestPeekElement=new D("TestPeekElement")}static{this.TestPeekTitle=new D("TestPeekTitle")}static{this.TestCallStack=new D("TestCallStack")}static{this.TestCoverageFilterItem=new D("TestCoverageFilterItem")}static{this.TouchBarContext=new D("TouchBarContext")}static{this.TitleBar=new D("TitleBar")}static{this.TitleBarContext=new D("TitleBarContext")}static{this.TitleBarTitleContext=new D("TitleBarTitleContext")}static{this.TunnelContext=new D("TunnelContext")}static{this.TunnelPrivacy=new D("TunnelPrivacy")}static{this.TunnelProtocol=new D("TunnelProtocol")}static{this.TunnelPortInline=new D("TunnelInline")}static{this.TunnelTitle=new D("TunnelTitle")}static{this.TunnelLocalAddressInline=new D("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new D("TunnelOriginInline")}static{this.ViewItemContext=new D("ViewItemContext")}static{this.ViewContainerTitle=new D("ViewContainerTitle")}static{this.ViewContainerTitleContext=new D("ViewContainerTitleContext")}static{this.ViewTitle=new D("ViewTitle")}static{this.ViewTitleContext=new D("ViewTitleContext")}static{this.CommentEditorActions=new D("CommentEditorActions")}static{this.CommentThreadTitle=new D("CommentThreadTitle")}static{this.CommentThreadActions=new D("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new D("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new D("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new D("CommentThreadCommentContext")}static{this.CommentTitle=new D("CommentTitle")}static{this.CommentActions=new D("CommentActions")}static{this.CommentsViewThreadActions=new D("CommentsViewThreadActions")}static{this.InteractiveToolbar=new D("InteractiveToolbar")}static{this.InteractiveCellTitle=new D("InteractiveCellTitle")}static{this.InteractiveCellDelete=new D("InteractiveCellDelete")}static{this.InteractiveCellExecute=new D("InteractiveCellExecute")}static{this.InteractiveInputExecute=new D("InteractiveInputExecute")}static{this.InteractiveInputConfig=new D("InteractiveInputConfig")}static{this.ReplInputExecute=new D("ReplInputExecute")}static{this.IssueReporter=new D("IssueReporter")}static{this.NotebookToolbar=new D("NotebookToolbar")}static{this.NotebookToolbarContext=new D("NotebookToolbarContext")}static{this.NotebookStickyScrollContext=new D("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new D("NotebookCellTitle")}static{this.NotebookCellDelete=new D("NotebookCellDelete")}static{this.NotebookCellInsert=new D("NotebookCellInsert")}static{this.NotebookCellBetween=new D("NotebookCellBetween")}static{this.NotebookCellListTop=new D("NotebookCellTop")}static{this.NotebookCellExecute=new D("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new D("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new D("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new D("NotebookDiffCellInputTitle")}static{this.NotebookDiffDocumentMetadata=new D("NotebookDiffDocumentMetadata")}static{this.NotebookDiffCellMetadataTitle=new D("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new D("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new D("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new D("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new D("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new D("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new D("NotebookKernelSource")}static{this.BulkEditTitle=new D("BulkEditTitle")}static{this.BulkEditContext=new D("BulkEditContext")}static{this.TimelineItemContext=new D("TimelineItemContext")}static{this.TimelineTitle=new D("TimelineTitle")}static{this.TimelineTitleContext=new D("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new D("TimelineFilterSubMenu")}static{this.AccountsContext=new D("AccountsContext")}static{this.SidebarTitle=new D("SidebarTitle")}static{this.PanelTitle=new D("PanelTitle")}static{this.AuxiliaryBarTitle=new D("AuxiliaryBarTitle")}static{this.TerminalInstanceContext=new D("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new D("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new D("TerminalNewDropdownContext")}static{this.TerminalTabContext=new D("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new D("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new D("TerminalStickyScrollContext")}static{this.WebviewContext=new D("WebviewContext")}static{this.InlineCompletionsActions=new D("InlineCompletionsActions")}static{this.InlineEditsActions=new D("InlineEditsActions")}static{this.NewFile=new D("NewFile")}static{this.MergeInput1Toolbar=new D("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new D("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new D("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new D("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new D("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new D("InlineEditToolbar")}static{this.ChatContext=new D("ChatContext")}static{this.ChatCodeBlock=new D("ChatCodeblock")}static{this.ChatCompareBlock=new D("ChatCompareBlock")}static{this.ChatMessageTitle=new D("ChatMessageTitle")}static{this.ChatMessageFooter=new D("ChatMessageFooter")}static{this.ChatExecute=new D("ChatExecute")}static{this.ChatExecuteSecondary=new D("ChatExecuteSecondary")}static{this.ChatInput=new D("ChatInput")}static{this.ChatInputSide=new D("ChatInputSide")}static{this.ChatModelPicker=new D("ChatModelPicker")}static{this.ChatModePicker=new D("ChatModePicker")}static{this.ChatEditingWidgetToolbar=new D("ChatEditingWidgetToolbar")}static{this.ChatEditingEditorContent=new D("ChatEditingEditorContent")}static{this.ChatEditingEditorHunk=new D("ChatEditingEditorHunk")}static{this.ChatEditingDeletedNotebookCell=new D("ChatEditingDeletedNotebookCell")}static{this.ChatInputAttachmentToolbar=new D("ChatInputAttachmentToolbar")}static{this.ChatEditingWidgetModifiedFilesToolbar=new D("ChatEditingWidgetModifiedFilesToolbar")}static{this.ChatInputResourceAttachmentContext=new D("ChatInputResourceAttachmentContext")}static{this.ChatInputSymbolAttachmentContext=new D("ChatInputSymbolAttachmentContext")}static{this.ChatInlineResourceAnchorContext=new D("ChatInlineResourceAnchorContext")}static{this.ChatInlineSymbolAnchorContext=new D("ChatInlineSymbolAnchorContext")}static{this.ChatEditingCodeBlockContext=new D("ChatEditingCodeBlockContext")}static{this.ChatTitleBarMenu=new D("ChatTitleBarMenu")}static{this.ChatAttachmentsContext=new D("ChatAttachmentsContext")}static{this.ChatToolOutputResourceToolbar=new D("ChatToolOutputResourceToolbar")}static{this.ChatExplorerMenu=new D("ChatExplorerMenu")}static{this.ChatTextEditorMenu=new D("ChatTextEditorMenu")}static{this.ChatTerminalMenu=new D("ChatTerminalMenu")}static{this.ChatToolOutputResourceContext=new D("ChatToolOutputResourceContext")}static{this.AccessibleView=new D("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new D("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new D("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new D("DiffEditorSelectionToolbar")}static for(t){return D.a.get(t)??new D(t)}constructor(t){if(D.a.has(t))throw new TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);D.a.set(t,this),this.id=t}},uie=V("menuService"),fh=class M4{static{this.a=new Map}static for(t){let i=this.a.get(t);return i||(i=new M4(t),this.a.set(t,i)),i}static merge(t){const i=new Set;for(const r of t)r instanceof M4&&i.add(r.b);return i}constructor(t){this.b=t,this.has=i=>i===t}},hie=new class{constructor(){this.a=new Map,this.b=new Map,this.c=new B2({merge:fh.merge}),this.onDidChangeMenu=this.c.event}addCommand(e){return this.a.set(e.id,e),this.c.fire(fh.for(dh.CommandPalette)),l1(re(()=>{this.a.delete(e.id)&&this.c.fire(fh.for(dh.CommandPalette))}))}getCommand(e){return this.a.get(e)}getCommands(){const e=new Map;return this.a.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this.b.get(e);i||(i=new nn,this.b.set(e,i));const r=i.push(t);return this.c.fire(fh.for(e)),l1(re(()=>{r(),this.c.fire(fh.for(e))}))}appendMenuItems(e){const t=new le;for(const{id:i,item:r}of e)t.add(this.appendMenuItem(i,r));return t}getMenuItems(e){let t;return this.b.has(e)?t=[...this.b.get(e)]:t=[],e===dh.CommandPalette&&this.d(t),t}d(e){const t=new Set;for(const i of e)AV(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this.a.forEach((i,r)=>{t.has(r)||e.push({command:i})})}},O$=fm=class{static label(t,i){return i?.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value}constructor(t,i,r,s,n,o,a){this.hideActions=s,this.menuKeybinding=n,this.b=a,this.id=t.id,this.label=fm.label(t,r),this.tooltip=(typeof t.tooltip=="string"?t.tooltip:t.tooltip?.value)??"",this.enabled=!t.precondition||o.contextMatchesRules(t.precondition),this.checked=void 0;let c;if(t.toggled){const l=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=o.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),this.checked&&jt.isThemeIcon(l.icon)&&(c=l.icon),this.checked&&l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}c||(c=jt.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=i?new fm(i,void 0,r,s,void 0,o,a):void 0,this.a=r,this.class=c&&jt.asClassName(c)}run(...t){let i=[];return this.a?.arg&&(i=[...i,this.a.arg]),this.a?.shouldForwardArgs&&(i=[...i,...t]),this.b.executeCommand(this.id,...i)}};O$=fm=__decorate([__param(5,ZE),__param(6,M$)],O$);var fie=Yh(7771,"Extensions"),F$;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(F$||(F$={}));var j$;(function(e){e.ReloadWindow="reloadWindow",e.RestartExtensions="restartExtensions",e.DownloadUpdate="downloadUpdate",e.ApplyUpdate="applyUpdate",e.QuitAndInstall="quitAndInstall"})(j$||(j$={}));var U$=V("extensionsWorkbenchService"),B$;(function(e){e.Readme="readme",e.Features="features",e.Changelog="changelog",e.Dependencies="dependencies",e.ExtensionPack="extensionPack"})(B$||(B$={}));var z$=class extends te{constructor(t,i){super(),this.a=t,this.B(i.onChange(this.b,this))}set extension(t){this.a.forEach(i=>i.extension=t)}b(t){for(const i of this.a)t&&i.extension?qF(i.extension.identifier,t.identifier)&&(i.extension.server&&t.server&&i.extension.server!==t.server?i.updateWhenCounterExtensionChanges&&i.update():i.extension=t):i.update()}};z$=__decorate([__param(1,U$)],z$);var gie=new Z("defaultExtensionViews",!0),mie=new Z("hasOutdatedExtensions",!1),vie=new Z("hasGallery",!1),wie=new Z("extensionResultListFocused ",!0),bie=new Z("searchMcpServers",!1),yie=new dh("extensionsSearchActionsMenu"),Aie=new dh("extensionsFilterSubMenu"),H$="vscode_searchExtensions_internal",xie={id:H$,toolReferenceName:"extensions",canBeReferencedInPrompt:!0,icon:jt.fromId(ce.extensions.id),displayName:p(7792,null),modelDescription:p(7793,null),userDescription:p(7794,null),source:um.Internal,inputSchema:{type:"object",properties:{category:{type:"string",description:"The category of extensions to search for",enum:NE},keywords:{type:"array",items:{type:"string"},description:"The keywords to search for"},ids:{type:"array",items:{type:"string"},description:"The ids of the extensions to search for"}}}},W$=class{constructor(t){this.a=t}async invoke(t,i,r,s){const n=t.parameters;if(!n.keywords?.length&&!n.category&&!n.ids?.length)return{content:[{kind:"text",value:p(7795,null)}]};const o=new Map,a=u=>{for(const h of u)h.deprecationInfo||h.isMalicious||o.set(h.identifier.id.toLowerCase(),{id:h.identifier.id,name:h.displayName,description:h.description,installed:h.state===1,installCount:h.installCount??0,rating:h.rating??0,categories:h.categories??[],tags:h.gallery?.tags??[]})},c=async u=>{const h=await this.a.queryGallery({text:u,pageSize:10,sortBy:"InstallCount"},s);h.firstPage.length&&a(h.firstPage)};if(n.ids?.length){const u=await this.a.getExtensions(n.ids.map(h=>({id:h})),s);a(u)}if(n.keywords?.length)for(const u of n.keywords??[])if(u==="featured")await c("featured");else{let h=n.category?`category:"${n.category}"`:"";h=u?`${h} ${u}`.trim():h,await c(h)}else await c(`category:"${n.category}"`);const l=Array.from(o.values());return{content:[{kind:"text",value:`Here are the list of extensions:
${JSON.stringify(l)}
. Important: Use the following format to display extensions to the user because there is a renderer available to parse these extensions in this format and display them with all details. So, do not describe about the extensions to the user.
\`\`\`vscode-extensions
extensionId1,extensionId2
\`\`\`
.`}],toolResultDetails:{input:JSON.stringify(n),output:[{isText:!0,value:JSON.stringify(l.map(u=>u.id))}]}}}};W$=__decorate([__param(0,U$)],W$);var _$=class{constructor(e){this.a=e}update(e){this.a=e}get data(){return this.a}get apiObject(){if(!this.b){const e=this;this.b=Object.freeze({get name(){return e.a.id},get description(){return e.a.modelDescription},get inputSchema(){return e.a.inputSchema},get tags(){return e.a.tags??[]}})}return this.b}},xV=class{constructor(e,t){this.e=t,this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(Y.MainThreadLanguageModelTools),this.b.$getTools().then(i=>{for(const r of i)this.d.set(r.id,new _$(Jt(r)))})}async $countTokensForInvocation(e,t,i){const r=this.c.get(e);if(!r)throw new Error(`Tool invocation call ${e} not found`);return await r(t,i)}async invokeTool(e,t,i,r){const s=kt();i.tokenizationOptions&&this.c.set(s,i.tokenizationOptions.countTokens);try{if(i.toolInvocationToken&&!hV(i.toolInvocationToken))throw new Error("Invalid tool invocation token");if((t===lA||t===D$)&&!et(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=await this.b.$invokeTool({toolId:t,callId:s,parameters:i.input,tokenBudget:i.tokenizationOptions?.tokenBudget,context:i.toolInvocationToken,chatRequestId:et(e,"chatParticipantPrivate")?i.chatRequestId:void 0,chatInteractionId:et(e,"chatParticipantPrivate")?i.chatInteractionId:void 0},r),o=n instanceof vi?n.value:n;return Zp.to(Jt(o))}finally{this.c.delete(s)}}$onDidChangeTools(e){const t=new Set(this.a.keys());for(const i of e){t.delete(i.id);const r=this.d.get(i.id);r?r.update(i):this.d.set(i.id,new _$(Jt(i)))}for(const i of t)this.d.delete(i)}getTools(e){return Array.from(this.d.values()).map(t=>t.apiObject).filter(t=>{switch(t.name){case lA:case D$:case gV:case H$:return et(e,"chatParticipantPrivate");default:return!0}})}async $invokeTool(e,t){const i=this.a.get(e.toolId);if(!i)throw new Error(`Unknown tool ${e.toolId}`);const r={input:e.parameters,toolInvocationToken:e.context};et(i.extension,"chatParticipantPrivate")&&(r.chatRequestId=e.chatRequestId,r.chatInteractionId=e.chatInteractionId,r.chatSessionId=e.context?.sessionId,e.toolSpecificData?.kind==="terminal"&&(r.terminalCommand=e.toolSpecificData.command)),et(i.extension,"chatParticipantAdditions")&&e.modelId&&(r.model=await this.f(e.modelId,i.extension)),e.tokenBudget!==void 0&&(r.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((o,a=Je.None)=>this.b.$countTokensForInvocation(e.callId,o,a))});let s;et(i.extension,"toolProgress")&&(s={report:o=>{this.b.$acceptToolProgress(e.callId,{message:xe.fromStrict(o.message),increment:o.increment,total:100})}});const n=await hM(Promise.resolve(i.tool.invoke(r,t,s)),t);if(!n)throw new mt;return Zp.from(n,i.extension)}async f(e,t){let i;if(e&&(i=await this.e.getLanguageModelByIdentifier(t,e)),!i&&(i=await this.e.getDefaultLanguageModel(t),!i))throw new Error("Language model unavailable");return i}async $prepareToolInvocation(e,t,i){const r=this.a.get(e);if(!r)throw new Error(`Unknown tool ${e}`);const s={input:t.parameters,chatRequestId:t.chatRequestId,chatSessionId:t.chatSessionId,chatInteractionId:t.chatInteractionId};if(et(r.extension,"chatParticipantPrivate")&&r.tool.prepareInvocation2){const n=await r.tool.prepareInvocation2(s,i);return n?{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:xe.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:xe.from(n.confirmationMessages.message)}:void 0,toolSpecificData:{kind:"terminal",language:n.language,command:n.command},presentation:n.presentation}:void 0}else if(r.tool.prepareInvocation){const n=await r.tool.prepareInvocation(s,i);return n?((n.pastTenseMessage||n.presentation)&&M(r.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:xe.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:xe.from(n.confirmationMessages.message)}:void 0,invocationMessage:xe.fromStrict(n.invocationMessage),pastTenseMessage:xe.fromStrict(n.pastTenseMessage),presentation:n.presentation}):void 0}}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),re(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},EV=class{constructor(e,t,i,r){this.c=t,this.d=i,this.e=r,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(Y.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=Ge.from(t),s=await this.a.$tokensAtPosition(e.uri,r),n={type:Tn.Other,range:e.getWordRangeAtPosition(t)??new Ie(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:R.to(s.range),type:hw.to(s.type)};return!o.range.contains(t)||i!==e.version?n:o}createLanguageStatusItem(e,t,i){const r=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:Oa.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new le,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=$1(()=>{l.clear(),this.a.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:nc.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Oa.Error?Mt.Error:a.severity===Oa.Warning?Mt.Warning:Mt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(r),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(d){a.name=d,u()},get selector(){return a.selector},set selector(d){a.selector=d,u()},get text(){return a.text},set text(d){a.text=d,u()},set text2(d){M(e,"languageStatusText"),a.text=d,u()},get text2(){return M(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(d){a.detail=d,u()},get severity(){return a.severity},set severity(d){a.severity=d,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(d){a.accessibilityInformation=d,u()},get command(){return a.command},set command(d){a.command=d,u()},get busy(){return a.busy},set busy(d){a.busy=d,u()}};return u(),h}};function SV(e){return e&&e.title}var dA=class{constructor(t,i){this.b=i,this.a=t.getProxy(Y.MainThreadMessageService)}showMessage(t,i,r,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||SV(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&M(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:d,isCloseAffordance:f}=h;c.push({title:d,isCloseAffordance:!!f,handle:u}),f&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(i,r,o,c).then(u=>{if(typeof u=="number")return a[u]})}};dA=__decorate([__param(1,Ce)],dA);var fA=class{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new rs(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},pA=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1,encoding:"utf8"}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=A.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(Ln.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(dc.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Iu.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(r){e.g=r},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(Ln.to)}setOutputItems(e,t,i){const r=i.map(pc.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...r),s.items.length>1&&s.items.every(n=>s6(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=mF(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(dc.to(e))}setMime(e){}},kV=class gP{static{this.a=0}constructor(t,i,r,s,n){this.k=t,this.l=i,this.m=r,this.uri=s,this.handle=gP.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===q.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(r){return r=t.n(r),t.b[r].apiCell},getCells(r){return(r?t.p(r):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,r){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:r});const s={notebook:this.apiNotebook,metadata:r,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===Ir.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===Ir.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===Ir.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Ir.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===Ir.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===Ir.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===Ir.ChangeCellMime?this.w(a.index,a.mime):a.kind===Ir.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===Ir.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,r=t.end|0;return i<0&&(i=0),r>this.b.length&&(r=this.b.length),t.with({start:i,end:r})}p(t){t=this.o(t);const i=[];for(let r=t.start;r<t.end;r++)i.push(this.b[r]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,r){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(d=>{const f=new pA(this,this.l,d);return i||n.push(pA.asModelAddData(d)),f}),u=new fA(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const d of h)o.push(d.uri),u.deletedItems.push(d.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),r)for(const a of s)r.push(a.asApiEvent())}s(t,i,r,s){const n=this.b.splice(t,i);this.b.splice(r,0,...n);const o=[new fA(t,i,n.map(a=>a.apiCell),[]),new fA(r,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,r,s){this.b[t].setOutputItems(i,r,s)}v(t,i){const r=this.b[t];r.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(r.uri,i)}w(t,i){const r=this.b[t];r.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},gA=class mP{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,r,s,n,o,a){this.id=t,this.c=i,this.notebookData=r,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(i){this.selections=[i]},get selections(){return t.e},set selections(i){if(!Array.isArray(i)||!i.every(rs.isNotebookRange))throw $e("selections");t.e=i.length===0?[new rs(0,0)]:i,t.h(t.e)},get visibleRanges(){return t.d},revealRange(i,r){t.c.$tryRevealRange(t.id,os.from(i),r??Zf.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},mP.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(os.from))}_acceptViewColumn(t){this.f=t}},mA=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ue)return vA(this.right);let e=this;for(;e.parent!==ue&&e.parent.left!==e;)e=e.parent;return e.parent===ue?ue:e.parent}prev(){if(this.left!==ue)return q$(this.left);let e=this;for(;e.parent!==ue&&e.parent.right!==e;)e=e.parent;return e.parent===ue?ue:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},V$;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(V$||(V$={}));var ue=new mA(null,0);ue.parent=ue,ue.left=ue,ue.right=ue,ue.color=0;function vA(e){for(;e.left!==ue;)e=e.left;return e}function q$(e){for(;e.right!==ue;)e=e.right;return e}function wA(e){return e===ue?0:e.size_left+e.piece.length+wA(e.right)}function bA(e){return e===ue?0:e.lf_left+e.piece.lineFeedCnt+bA(e.right)}function yA(){ue.parent=ue}function ph(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==ue&&(i.left.parent=t),i.parent=t.parent,t.parent===ue?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function gh(e,t){const i=t.left;t.left=i.right,i.right!==ue&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===ue?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function pm(e,t){let i,r;if(t.left===ue?(r=t,i=r.right):t.right===ue?(r=t,i=r.left):(r=vA(t.right),i=r.right),r===e.root){e.root=i,i.color=0,t.detach(),yA(),e.root.parent=ue;return}const s=r.color===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===t?(i.parent=r.parent,mh(e,i)):(r.parent===t?i.parent=r:i.parent=r.parent,mh(e,i),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==ue&&(r.left.parent=r),r.right!==ue&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,mh(e,r)),t.detach(),i.parent.left===i){const o=wA(i),a=bA(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,_s(e,i.parent,c,l)}}if(mh(e,i.parent),s){yA();return}let n;for(;i!==e.root&&i.color===0;)i===i.parent.left?(n=i.parent.right,n.color===1&&(n.color=0,i.parent.color=1,ph(e,i.parent),n=i.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.right.color===0&&(n.left.color=0,n.color=1,gh(e,n),n=i.parent.right),n.color=i.parent.color,i.parent.color=0,n.right.color=0,ph(e,i.parent),i=e.root)):(n=i.parent.left,n.color===1&&(n.color=0,i.parent.color=1,gh(e,i.parent),n=i.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.left.color===0&&(n.right.color=0,n.color=1,ph(e,n),n=i.parent.left),n.color=i.parent.color,i.parent.color=0,n.left.color=0,gh(e,i.parent),i=e.root));i.color=0,yA()}function G$(e,t){for(mh(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,ph(e,t)),t.parent.color=0,t.parent.parent.color=1,gh(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,gh(e,t)),t.parent.color=0,t.parent.parent.color=1,ph(e,t.parent.parent))}e.root.color=0}function _s(e,t,i,r){for(;t!==e.root&&t!==ue;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}function mh(e,t){let i=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=wA(t.left)-t.size_left,r=bA(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=r;t!==e.root&&(i!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}}var Vs=65535;function Z$(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var IV=class{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}};function qs(e,t=!0){const i=[0];let r=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(i[r++]=s+2,s++):i[r++]=s+1:o===10&&(i[r++]=s+1)}return t?Z$(i):i}function CV(e,t){e.length=0,e[0]=0;let i=1,r=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[i++]=c+2,c++):(r++,e[i++]=c+1):u===10?(s++,e[i++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new IV(Z$(e),r,s,n,o);return e.length=0,a}var Ti=class{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}},Ko=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},$V=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ue&&e.iterate(e.root,i=>(i!==ue&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},DV=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this.b=r}}},PV=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new Ko("",[0])],this.g={line:0,column:0},this.root=ue,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let r=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=qs(e[s].buffer));const o=new Ti(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),r=this.S(r,o)}this.h=new DV(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=Vs,i=t-Math.floor(t/3),r=i*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=i||n+l<r)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new Ko(u,qs(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new Ko(a,qs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new $V(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,r=>{if(r===ue)return!0;const s=this.R(r),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==ue;)if(r.left!==ue&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.B(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==ue;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(i+1,1),o=r-n;return new er(i+1,o+1)}return new er(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===ue){const s=this.getOffsetAt(i+1,1),n=r-e-s;return new er(i+1,n+1)}else t=t.right;return new er(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),r=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this.a[i.piece.bufferIndex].buffer,s=this.u(i.piece.bufferIndex,i.piece.start);let n=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==ue;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,i.piece.length);i=i.next()}return n}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===ue)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(r&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=i,i="",r=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(r=!0,i+=a.substr(h,o-1)):i+=a.substr(h,o),!0;i+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let d=l+1;d<u;d++)i=this.f?a.substring(c[d],c[d+1]-this.e):a.substring(c[d],c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(r=!0,n.end.column===0?t--:i=a.substr(c[u],n.end.column-1)):i=a.substr(c[u],n.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],r=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this.a[e.node.piece.bufferIndex],r=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===ue)return"";const r=this.a[i.piece.bufferIndex],s=this.u(i.piece.bufferIndex,i.piece.start);return r.buffer.substring(s,s+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],r=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=r+t.remainder,n=r+t.node.piece.length;return i.buffer.substring(s,n)}}findMatchesInNode(e,t,i,r,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],d=this.u(e.piece.bufferIndex,e.piece.start),f=this.u(e.piece.bufferIndex,s),g=this.u(e.piece.bufferIndex,n);let v;const b={line:0,column:0};let x,E;t._wordSeparators?(x=h.buffer.substring(f,g),E=I=>I+f,t.reset(0)):(x=h.buffer,E=I=>I,t.reset(f));do if(v=t.next(x),v){if(E(v.index)>=g)return l;this.s(e,E(v.index)-d,b);const I=this.t(e.piece.bufferIndex,s,b),U=b.line===s.line?b.column-s.column+r:b.column+1,j=U+v[0].length;if(u[l++]=ZC(new Ye(i+I,U,i+I,j),v,a),E(v.index)+v[0].length>=g||l>=c)return l}while(v);return l}findMatchesLineByLine(e,t,i,r){const s=[];let n=0;const o=new KB(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,r,n,s),s;let h=e.startLineNumber,d=a.node;for(;d!==c.node;){const g=this.t(d.piece.bufferIndex,l,d.piece.end);if(g>=1){const b=this.a[d.piece.bufferIndex].lineStarts,x=this.u(d.piece.bufferIndex,d.piece.start),E=b[l.line+g],I=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(d,o,h,I,l,this.s(d,E-x),t,i,r,n,s),n>=r)return s;h+=g}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const b=this.getLineContent(h).substring(v,e.endColumn-1);return n=this.n(t,o,b,e.endLineNumber,v,n,s,i,r),s}if(n=this.n(t,o,this.getLineContent(h).substr(v),h,v,n,s,i,r),n>=r)return s;h++,a=this.H(h,1),d=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const g=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(g,e.endColumn-1);return n=this.n(t,o,v,e.endLineNumber,g,n,s,i,r),s}const f=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,f,l,u,t,i,r,n,s),s}n(e,t,i,r,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,d=h.length,f=i.length;let g=-d;for(;(g=i.indexOf(h,g+d))!==-1;)if((!l||JC(l,i,f,g,d))&&(o[n++]=new Zb(new Ye(r,g+1+s,r,g+1+d+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(i),u&&(o[n++]=ZC(new Ye(r,u.index+1+s,r,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==ue){const{node:r,remainder:s,nodeStartOffset:n}=this.G(e),o=r.piece,a=o.bufferIndex,c=this.s(r,s);if(r.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<Vs){this.F(r,t),this.y();return}if(n===e)this.o(t,r),this.h.validate(e);else if(n+r.piece.length>e){const l=[];let u=new Ti(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(r,s)===10){const g={line:u.start.line+1,column:0};u=new Ti(u.bufferIndex,g,u.end,this.t(u.bufferIndex,g,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(r,s-1)===13){const g=this.s(r,s-1);this.C(r,g),t="\r"+t,r.piece.length===0&&l.push(r)}else this.C(r,c);else this.C(r,c);const h=this.w(t);u.length>0&&this.S(r,u);let d=r;for(let f=0;f<h.length;f++)d=this.S(d,h[f]);this.v(l)}else this.q(t,r)}else{const r=this.w(t);let s=this.T(null,r[0]);for(let n=1;n<r.length;n++)s=this.S(s,r[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ue)return;const i=this.G(e),r=this.G(e+t),s=i.node,n=r.node;if(s===n){const h=this.s(s,i.remainder),d=this.s(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const f=s.next();pm(this,s),this.N(f),this.y();return}this.D(s,d),this.h.validate(e),this.N(s),this.y();return}if(i.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,d),this.y();return}const o=[],a=this.s(s,i.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,r.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==ue&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Ti(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,_s(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.w(e);let s=this.T(t,r[r.length-1]);for(let n=r.length-2;n>=0;n--)s=this.T(s,r[n]);this.N(s),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),r=this.S(t,i[0]);let s=r;for(let n=1;n<i.length;n++)s=this.S(s,i[n]);this.N(r)}s(e,t,i){const r=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[r.start.line]+r.start.column+t;let c=r.start.line,l=r.end.line,u=0,h=0,d=0;for(;c<=l&&(u=c+(l-c)/2|0,d=n[u],u!==l);)if(h=n[u+1],a<d)l=u-1;else if(a>=h)c=u+1;else break;return i?(i.line=u,i.column=a-d,null):{line:u,column:a-d}}t(e,t,i){if(i.column===0)return i.line-t.line;const r=this.a[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],n=r[i.line]+i.column;if(s>n+1)return i.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)pm(this,e[t])}w(e){if(e.length>Vs){const l=[];for(;e.length>Vs;){const h=e.charCodeAt(Vs-1);let d;h===13||h>=55296&&h<=56319?(d=e.substring(0,Vs-1),e=e.substring(Vs-1)):(d=e.substring(0,Vs),e=e.substring(Vs));const f=qs(d);l.push(new Ti(this.a.length,{line:0,column:0},{line:f.length-1,column:d.length-f[f.length-1]},f.length-1,d.length)),this.a.push(new Ko(d,f))}const u=qs(e);return l.push(new Ti(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new Ko(e,u)),l}let t=this.a[0].buffer.length;const i=qs(e,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new Ti(0,r,a,this.t(0,r,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,r="";const s=this.h.get2(e);if(s){i=s.node;const n=this.B(i,e-s.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=o.substring(a+n,a+i.piece.length);else{const c=this.B(i,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;i!==ue;)if(i.left!==ue&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return n+=i.size_left,this.h.set({node:i,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);r=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==ue;){const n=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return r+=n.substring(a,a+o-t),r}else{const o=this.u(i.piece.bufferIndex,i.piece.start);r+=n.substr(o,i.piece.length)}i=i.next()}return r}y(){let e=this.root,t=1,i=0;for(;e!==ue;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,r=this.s(e,t),s=r.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const n=this.t(e.piece.bufferIndex,i.start,r);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:r.column}}B(e,t){if(t<0)return 0;const i=e.piece,r=this.a[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}C(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.end),n=t,o=this.u(i.bufferIndex,n),a=this.t(i.bufferIndex,i.start,n),c=a-r,l=o-s,u=i.length+l;e.piece=new Ti(i.bufferIndex,i.start,n,a,u),_s(this,e,l,c)}D(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.start),n=t,o=this.t(i.bufferIndex,n,i.end),a=this.u(i.bufferIndex,n),c=o-r,l=s-a,u=i.length+l;e.piece=new Ti(i.bufferIndex,n,i.end,o,u),_s(this,e,l,c)}E(e,t,i){const r=e.piece,s=r.start,n=r.end,o=r.length,a=r.lineFeedCnt,c=t,l=this.t(r.bufferIndex,r.start,c),u=this.u(r.bufferIndex,t)-this.u(r.bufferIndex,s);e.piece=new Ti(r.bufferIndex,r.start,c,l,u),_s(this,e,u-o,l-a);const h=new Ti(r.bufferIndex,i,n,this.t(r.bufferIndex,i,n),this.u(r.bufferIndex,n)-this.u(r.bufferIndex,i)),d=this.S(e,h);this.N(d)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),r=this.a[0].buffer.length;this.a[0].buffer+=t;const s=qs(t,!1);for(let d=0;d<s.length;d++)s[d]+=r;if(i){const d=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-d}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Ti(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,_s(this,e,t.length,h)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==ue;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this.h.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,r=0;for(;i!==ue;)if(i.left!==ue&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.B(i,e-i.lf_left-2),n=this.B(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,n),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.B(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==ue;){if(i.piece.lineFeedCnt>0){const s=this.B(i,0),n=this.J(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(i.piece.length>=t-1){const s=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],r=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ue||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ue||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],r=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Ti(e.piece.bufferIndex,e.piece.start,s,o,n),_s(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Ti(t.piece.bufferIndex,a,t.piece.end,l,c),_s(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<i.length;h++)pm(this,i[h])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)pm(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},n=r.length-1,o=this.t(r.bufferIndex,s,r.end);i.piece=new Ti(r.bufferIndex,s,r.end,o,n),_s(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ue)return t(ue);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ue)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,r=this.u(i.bufferIndex,i.start),s=this.u(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),r=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,r)}S(e,t){const i=new mA(t,1);if(i.left=ue,i.right=ue,i.parent=ue,i.size_left=0,i.lf_left=0,this.root===ue)this.root=i,i.color=0;else if(e.right===ue)e.right=i,i.parent=e;else{const s=vA(e.right);s.left=i,i.parent=s}return G$(this,i),i}T(e,t){const i=new mA(t,1);if(i.left=ue,i.right=ue,i.parent=ue,i.size_left=0,i.lf_left=0,this.root===ue)this.root=i,i.color=0;else if(e.left===ue)e.left=i,i.parent=e;else{const r=q$(e.left);r.right=i,i.parent=r}return G$(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},J$;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(J$||(J$={}));function AA(e){let t=0,i=0,r=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(i=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,r=n+1):a===10&&(s|=1,t===0&&(i=n),t++,r=n+1)}return t===0&&(i=e.length),[t,i,e.length-r,s]}var xA;function TV(){return xA||(xA=new TextDecoder("UTF-16LE")),xA}function MV(e,t,i){const r=new Uint16Array(e.buffer,t,i);return i>0&&(r[0]===65279||r[0]===65534)?NV(e,t,i):TV().decode(r)}function NV(e,t,i){const r=[];let s=0;for(let n=0;n<i;n++){const o=PM(e,t);t+=2,r[s++]=String.fromCharCode(o)}return r.join("")}function gm(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var LV=class ps{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,r,s){this.oldPosition=t,this.oldText=i,this.newPosition=r,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${gm(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${gm(this.oldText)}")`:`(replace@${this.oldPosition} "${gm(this.oldText)}" with "${gm(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,r){const s=i.length;vd(t,s,r),r+=4;for(let n=0;n<s;n++)TM(t,i.charCodeAt(n),r),r+=2;return r}static d(t,i){const r=md(t,i);return i+=4,MV(t,i,r)}writeSize(){return 8+ps.a(this.oldText)+ps.a(this.newText)}write(t,i){return vd(t,this.oldPosition,i),i+=4,vd(t,this.newPosition,i),i+=4,i=ps.c(t,this.oldText,i),i=ps.c(t,this.newText,i),i}static read(t,i,r){const s=md(t,i);i+=4;const n=md(t,i);i+=4;const o=ps.d(t,i);i+=ps.a(o);const a=ps.d(t,i);return i+=ps.a(a),r.push(new ps(s,o,n,a)),i}},RV=class Lh extends te{constructor(t,i,r,s,n,o,a){super(),this.m=this.B(new $),this.onDidChangeContent=this.m.event,this.f=i,this.j=!o,this.g=s,this.h=n,this.c=new PV(t,r,a)}equals(t){return!(t instanceof Lh)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const r=t+i,s=this.getPositionAt(t),n=this.getPositionAt(r);return new Ye(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const r=this.n(i);return this.c.getValueInRange(t,r)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const r=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-r+n}getCharacterCountInRange(t,i=0){if(this.j){let r=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)nd(a.charCodeAt(u))?(r=r+1,u=u+1):r=r+1}return r+=this.n(i).length*(n-s),r}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=m1(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=wT(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,r){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let v=0;v<t.length;v++){const b=t[v];a&&b._isTracked&&(a=!1);const x=b.range;if(b.text){let ee=!0;o||(ee=!kT(b.text),o=ee),!s&&ee&&(s=N5(b.text)),!n&&ee&&(n=L5(b.text))}let E="",I=0,U=0,j=0;if(b.text){let ee;[I,U,j,ee]=AA(b.text);const O=this.getEOL();ee===0||ee===(O===`\r
`?2:1)?E=b.text:E=b.text.replace(/\r\n|\r|\n/g,O)}c[v]={sortIndex:v,identifier:b.identifier||null,range:x,rangeOffset:this.getOffsetAt(x.startLineNumber,x.startColumn),rangeLength:this.getValueLengthInRange(x),text:E,eolCount:I,firstLineLength:U,lastLineLength:j,forceMoveMarkers:!!b.forceMoveMarkers,isAutoWhitespaceEdit:b.isAutoWhitespaceEdit||!1}}c.sort(Lh.u);let l=!1;for(let v=0,b=c.length-1;v<b;v++){const x=c[v].range.getEndPosition(),E=c[v+1].range.getStartPosition();if(E.isBeforeOrEqual(x)){if(E.isBefore(x))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=r||i?Lh._getInverseEditRanges(c):[],h=[];if(i)for(let v=0;v<c.length;v++){const b=c[v],x=u[v];if(b.isAutoWhitespaceEdit&&b.range.isEmpty())for(let E=x.startLineNumber;E<=x.endLineNumber;E++){let I="";E===x.startLineNumber&&(I=this.getLineContent(b.range.startLineNumber),m1(I)!==-1)||h.push({lineNumber:E,oldContent:I})}}let d=null;if(r){let v=0;d=[];for(let b=0;b<c.length;b++){const x=c[b],E=u[b],I=this.getValueInRange(x.range),U=x.rangeOffset+v;v+=x.text.length-I.length,d[b]={sortIndex:x.sortIndex,identifier:x.identifier,range:E,text:I,textChange:new LV(x.rangeOffset,I,U,x.text)}}l||d.sort((b,x)=>b.sortIndex-x.sortIndex)}this.g=s,this.h=n,this.j=o;const f=this.t(c);let g=null;if(i&&h.length>0){h.sort((v,b)=>b.lineNumber-v.lineNumber),g=[];for(let v=0,b=h.length;v<b;v++){const x=h[v].lineNumber;if(v>0&&h[v-1].lineNumber===x)continue;const E=h[v].oldContent,I=this.getLineContent(x);I.length===0||I===E||m1(I)!==-1||g.push(x)}}return this.m.fire(),new YB(d,f,g)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const r=t[0].range,s=t[t.length-1].range,n=new Ye(r.startLineNumber,r.startColumn,s.endLineNumber,s.endColumn);let o=r.startLineNumber,a=r.startColumn;const c=[];for(let f=0,g=t.length;f<g;f++){const v=t[f],b=v.range;i=i||v.forceMoveMarkers,c.push(this.getValueInRange(new Ye(o,a,b.startLineNumber,b.startColumn))),v.text.length>0&&c.push(v.text),o=b.endLineNumber,a=b.endColumn}const l=c.join(""),[u,h,d]=AA(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:d,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}t(t){t.sort(Lh.w);const i=[];for(let r=0;r<t.length;r++){const s=t[r],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new Ye(n,o,a,c);i.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,r,s){return this.c.findMatchesLineByLine(t,i,r,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const r=t.startLineNumber,s=t.startColumn,[n,o,a]=AA(i);let c;if(i.length>0){const l=n+1;l===1?c=new Ye(r,s,r,s+o):c=new Ye(r,s,r+l-1,a+1)}else c=new Ye(r,s,r,s);return c}static _getInverseEditRanges(t){const i=[];let r=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=r,u=s+(c.range.startColumn-n.range.endColumn)):(l=r+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const d=c.eolCount+1;d===1?h=new Ye(l,u,l,u+c.firstLineLength):h=new Ye(l,u,l+d-1,c.lastLineLength+1)}else h=new Ye(l,u,l,u);r=h.endLineNumber,s=h.endColumn,i.push(h),n=c}return i}static u(t,i){const r=Ye.compareRangesUsingEnds(t.range,i.range);return r===0?t.sortIndex-i.sortIndex:r}static w(t,i){const r=Ye.compareRangesUsingEnds(t.range,i.range);return r===0?i.sortIndex-t.sortIndex:-r}},OV=class{constructor(e,t,i,r,s,n,o,a,c){this.a=e,this.b=t,this.c=i,this.d=r,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=i.length;s<n;s++){const o=i[s].buffer.replace(/\r\n|\r|\n/g,t),a=qs(o);i[s]=new Ko(o,a)}const r=new RV(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},Y$=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&TT(e)&&(this.b=PT,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=CV(this.e,e);this.a.push(new Ko(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=N5(e)),this.k||(this.k=L5(e)))}finish(e=!0){return this.o(),new OV(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=qs(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},FV=class extends te{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new Ye(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new Y$;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:r}=t.create(1);this.b=i,this.B(r)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new Y$;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:r,disposable:s}=i.create(1);return this.B(s),r})),this.a}findInInputs(e){const i=new qC(e,!1,!1,null).parseSearchRequest();if(!i)return[];const r=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(r,i,!0,5e3)}findInOutputs(e){const i=new qC(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(r=>{const s=r.findMatchesLineByLine(this.f(r),i,!0,5e3);if(s.length!==0)return{textBuffer:r,matches:s}}).filter(r=>!!r):[]}};function Q$(e,t){let i=-1;const r=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==i&&s.length>0&&(r.push([...s]),s=[]),s.push(o),i=o.range.endLineNumber}),s.length>0&&r.push([...s]),r.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new hI(a.join(`
`)+`
`,o.map(u=>new Ye(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var X$;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState",e.Mcp="mcp"})(X$||(X$={}));function jV(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&A.isUri(t.location)&&A.isUri(t.globalStorageHome)&&A.isUri(t.settingsResource)&&A.isUri(t.keybindingsResource)&&A.isUri(t.tasksResource)&&A.isUri(t.snippetsHome)&&A.isUri(t.promptsHome)&&A.isUri(t.extensionsResource)&&A.isUri(t.mcpResource))}var UV=V("IUserDataProfilesService");function mm(e,t,i,r,s,n){return{id:e,name:t,location:i,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:wt(i,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:wt(i,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:wt(i,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:wt(i,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:wt(i,"snippets"),promptsHome:n&&s?.useDefaultFlags?.prompts?n.promptsHome:wt(i,"prompts"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:wt(i,"extensions.json"),mcpResource:n&&s?.useDefaultFlags?.mcp?n.mcpResource:wt(i,"mcp.json"),cacheHome:wt(r,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var K$=class extends te{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,i,r,s){super(),this.s=t,this.t=i,this.u=r,this.y=s,this.g=this.B(new $),this.onDidChangeProfiles=this.g.event,this.h=this.B(new $),this.onWillCreateProfile=this.h.event,this.j=this.B(new $),this.onWillRemoveProfile=this.j.event,this.m=this.B(new $),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=wt(this.s.userRoamingDataHome,"profiles"),this.f=wt(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),i=[t];try{for(const s of this.N()){if(!s.name||!Fe(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}i.push(mm(Ar(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const r=new Map;if(i.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=A.parse(n),c=i.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=i.find(c=>c.id===o);a&&r.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:i,emptyWindows:r}}return this.z}D(){const t=mm("__default__profile__",p(2645,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",r=new RegExp(`${ln(i)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=r.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${i} ${s+1}`;return this.createProfile(Is(kt()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,i,r){return this.createProfile(Is(kt()).toString(16),t,i,r)}async createProfile(t,i,r,s){return await this.F(t,i,r,s)}async F(t,i,r,s){if(!Fe(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(i);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!r?.transient&&u.name===i))throw new Error(`Profile with ${i} name already exists`);const a=s?this.G(s):void 0;A.isUri(a)&&(r={...r,workspaces:[a]});const c=mm(t,i,wt(this.profilesHome,t),this.f,r,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await fn.settled(l),a&&!A.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(i)}})(),this.n.set(i,n)),n}async updateProfile(t,i){const r=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?i.workspaces&&(o=n,o.workspaces=i.workspaces):o=mm(n.id,i.name??n.name,n.location,this.f,{icon:i.icon===null?void 0:i.icon??n.icon,transient:i.transient??n.isTransient,useDefaultFlags:i.useDefaultFlags??n.useDefaultFlags,workspaces:i.workspaces??n.workspaces},this.defaultProfile);else if(i.workspaces){const a=n.workspaces?.filter(c=>!i.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&r.push(o)}if(!r.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],r);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(s=>s.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const r=[];this.j.fire({profile:i,join(s){r.push(s)}});try{await Promise.allSettled(r)}catch(s){this.y.error(s)}this.I([],[i],[]);try{await this.t.del(i.cacheHome,{recursive:!0})}catch(s){RO(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,i){const r=this.profiles.find(n=>n.id===i.id);if(!r)throw new Error(`Profile '${i.name}' does not exist`);const s=this.G(t);if(A.isUri(s)){const n=r.workspaces?[...r.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(r,{workspaces:n}))}else this.L(s,r,!1),this.M(this.profiles)}unsetWorkspace(t,i=!1){const r=this.G(t);if(A.isUri(r)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,r))})}else this.L(r,void 0,i),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(r=>!this.u.extUri.isEqual(r.location,i.resource))).map(i=>this.t.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t);return A.isUri(i)?this.profiles.find(r=>r.workspaces?.some(s=>this.u.extUri.isEqual(s,i))):this.C.emptyWindows.get(i)??this.r.emptyWindows.get(i)}G(t){return kR(t)?t.uri:IR(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location))||[...this.r.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location)))}I(t,i,r){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(i.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=r.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,i,r)}J(t,i,r){this.g.fire({added:t,removed:i,updated:r,all:this.profiles})}L(t,i,r){r=i?.isTransient?!0:r,r?i?this.r.emptyWindows.set(t,i):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),i?this.C.emptyWindows.set(t,i):this.C.emptyWindows.delete(t))}M(t){const i=[],r={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||i.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)r[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:r,emptyWindows:s}),this.O(i),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};K$=__decorate([__param(0,Jb),__param(1,NO),__param(2,YC),__param(3,Ce)],K$);var Iie=Object.freeze({id:"application",order:100,title:p(4253,null),type:"object"}),BV=Object.freeze({id:"workbench",order:7,title:p(4254,null),type:"object"}),zV=Object.freeze({id:"security",scope:1,title:p(4255,null),type:"object",order:7}),Cie=Object.freeze({id:"problems",title:p(4256,null),type:"object",order:101}),HV=Object.freeze({id:"window",order:8,title:p(4257,null),type:"object"}),WV={ConfigurationMigration:"base.contributions.configuration.migration"},_V=class{constructor(){this.migrations=[],this.a=new $,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},vm=new _V;Yt.add(WV.ConfigurationMigration,vm);var eD=class extends te{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.B(this.b.onDidChangeWorkspaceFolders(async r=>{for(const s of r.added)await this.f(s,vm.migrations)})),this.c(vm.migrations),this.B(vm.onDidRegisterConfigurationMigration(r=>this.c(r)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(r=>this.g(r,t?.uri))])}async g(t,i){const r=this.a.inspect(t.key,{resource:i}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=r[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,i,l);for(const d of h??[])c.push([d,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:h},o)))}}async h(t,i,r,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[i];if(u)return n?u.overrides?.find(({identifiers:h})=>Ei(h,n))?.value:u.value},a=await t.migrateFn(r,o);return Array.isArray(a)?a:[[t.key,a]]}};eD=__decorate([__param(0,Ds),__param(1,Dd)],eD);var tD=class extends te{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new Xi,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!je&&(await this.b.getEnvironment())?.os!==1)return;Yt.as(bo.Configuration).registerConfiguration({...zV,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:p(4258,null)},default:[],markdownDescription:p(4259,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:p(4260,null),scope:3}}})}};tD=__decorate([__param(0,KC)],tD);var vh="window.newWindowProfile",iD=class extends te{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.B(this.c.onDidChangeProfiles(r=>this.g())),this.h(),this.j(),this.B(i.onDidChangeConfiguration(r=>{r.source!==7&&r.affectsConfiguration(vh)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Yt.as(bo.Configuration),i={...HV,properties:{[vh]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(r=>r.name),null],enumItemLabels:[...this.c.profiles.map(r=>""),p(4261,null)],description:p(4262,null),scope:1}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(vh);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(vh);if(!t)return;const i=this.b?this.c.profiles.find(r=>r.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(vh,i?.name)}};iD=__decorate([__param(0,UV),__param(1,Ds)],iD);var Tie=V("editorResolverService"),VV=Yt.as(bo.Configuration),qV={...BV,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:p(14161,null),additionalProperties:{type:"string"}}}};VV.registerConfiguration(qV);var EA;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(EA||(EA={}));var rD;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(rD||(rD={}));function GV(e,t){if(new Set([q.extension,q.webviewPanel,q.vscodeWorkspaceTrust,q.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Ue.sep)>=0?`${t.scheme}:${t.path}`:Ar(t);return Pa(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var ZV=class Rh{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,r,s,n,o,a){this.q=r,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Gt,this.h=new Map,this.j=new $,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new $,this.onDidOpenNotebookDocument=this.m.event,this.n=new $,this.onDidCloseNotebookDocument=this.n.event,this.o=new $,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new Or("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(Y.MainThreadNotebook),this.c=t.getProxy(Y.MainThreadNotebookDocuments),this.d=t.getProxy(Y.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,d=this.g.get(l)?.getCell(u);if(d)return d.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Rh.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,r]of this.h)if(r.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const r=this.g.get(t);if(!r&&!i)throw new Error(`NO notebook document for '${t}'`);return r}static w(t,i){if(!i)return;const r=i.filenamePattern.map(s=>Pp.from(s)).filter(s=>s!==void 0);if(i.filenamePattern&&!r){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:r,priority:i.exclusive?EA.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,r){const s=Rh.a++,n=typeof r.onDidChangeCellStatusBarItems=="function"?Rh.a++:void 0;this.f.set(s,r),this.b.$registerNotebookCellStatusBarItemProvider(s,n,i);let o;return n!==void 0&&(o=r.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Me(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Nn.from(t.content)});return A.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const r=await this.c.$tryOpenNotebook(t),s=this.g.get(A.revive(r));return da(s?.apiNotebook)}async showNotebookDocument(t,i){let r;typeof i=="object"?r={position:Bt.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map(os.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0,label:typeof i.asRepl=="string"?i.asRepl:typeof i.asRepl=="object"?i.asRepl.label:void 0}:r={preserveFocus:!1,pinned:!0};const s=i?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,r),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,r,s){const n=this.f.get(t),o=A.revive(i),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(r);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new le,h=this.p.add([u]),f=(Array.isArray(l)?l:[l]).map(g=>Cw.from(g,this.i,u));return{cacheId:h,items:f}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,r,s,n){if(rd(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:r,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,Dw.from(s),Rh.w(t,n)),re(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(i.buffer,r);return new vi(Nn.from(n))}async $notebookToData(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(Nn.to(i.value),r);return _.wrap(n)}async $saveNotebook(t,i,r,s,n){const o=A.revive(i),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${r}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==r)throw new Error("Document version mismatch, expected: "+r+", actual: "+c.versionId);if(!this.s.value.isWritableFileSystem(o.scheme))throw new Nv(p(2934,null,this.A(o)),6);const l={metadata:Jx(c.apiNotebook.metadata,g=>!(a.options?.transientDocumentMetadata??{})[g]),cells:[]};for(const g of c.apiNotebook.getCells()){const v=new Vf(g.kind,g.document.getText(),g.document.languageId,g.mime,a.options?.transientOutputs?[]:[...g.outputs],g.metadata,g.executionSummary);v.metadata=Jx(g.metadata,b=>!(a.options?.transientCellMetadata??{})[b]),l.cells.push(v)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${r} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${r} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),d=await this.s.value.stat(o),f={name:h.basename(o),isFile:(d.type&zi.File)!==0,isDirectory:(d.type&zi.Directory)!==0,isSymbolicLink:(d.type&zi.SymbolicLink)!==0,mtime:d.mtime,ctime:d.ctime,size:d.size,readonly:!!((d.permissions??0)&bn.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((d.permissions??0)&bn.Locked),etag:mk({mtime:d.mtime,size:d.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${r}, ${o.toString()})`),f}async $searchInNotebooks(t,i,r,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new G4;await(async(d,f,g)=>{await Promise.all(d.map(async v=>await Promise.all(v.filenamePatterns.map(b=>{const x={_reason:g._reason,folderQueries:g.folderQueries,includePattern:g.includePattern,excludePattern:g.excludePattern,maxResults:g.maxResults,type:1,filePattern:b};return this.t.doInternalFileSearchWithCustomCallback(x,f,E=>{E.forEach(I=>{a.has(I)||s.some(j=>v.isFromSettings&&!j.isFromSettings?!1:j.filenamePatterns.some(ee=>GV(ee,I)))||a.add(I)})}).catch(E=>{if(E.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw E})}))))})(r,n,i);const l=new Gt;let u=!1;const h=Array.from(a).map(async d=>{const f=[];try{if(n.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((x,E)=>x+E.cellResults.length,0)>i.maxResults){u=!0;return}const g=[],v=this.g.get(d);if(v)v.apiNotebook.getCells().forEach(E=>g.push({input:E.document.getText(),outputs:E.outputs.flatMap(I=>I.items.map(U=>U.data.toString()))}));else{const x=await this.s.value.readFile(d),E=_.fromString(x.toString()),I=await o.deserializeNotebook(E.buffer,n);if(n.isCancellationRequested)return;Nn.from(I).cells.forEach(j=>g.push({input:j.source,outputs:j.outputs.flatMap(ee=>ee.items.map(O=>O.valueBytes.toString()))}))}if(n.isCancellationRequested)return;g.forEach((x,E)=>{const I=i.contentPattern.pattern,U=new FV(x.input,void 0,x.outputs),j=U.findInInputs(I),ee=U.findInOutputs(I),O=ee.flatMap(B=>Q$(B.matches,B.textBuffer)).map((B,F)=>(B.webviewIndex=F,B));if(j.length>0||ee.length>0){const B={index:E,contentResults:Q$(j,U.inputTextBuffer),webviewResults:O};f.push(B)}});const b={resource:d,cellResults:f};l.set(d,b);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,i){const r=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==FO&&typeof r.mtime=="number"&&typeof r.size=="number"&&i.mtime<r.mtime&&i.etag!==mk({mtime:i.mtime,size:r.size}))throw new Nv(p(2935,null),3,i)}A(t){return t.scheme===q.file?t.fsPath:t.toString()}B(t,i,r){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const s=new gA(i,this.d,t,r.visibleRanges.map(os.to),r.selections.map(os.to),typeof r.viewColumn=="number"?Bt.to(r.viewColumn):void 0,r.viewType);this.h.set(i,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const r of t.value.removedDocuments){const s=A.revive(r),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const r=[];for(const s of t.value.addedDocuments){const n=A.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new kV(this.c,this.q,this.r,n,s);r.push(...s.cells.map(a=>pA.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:r}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const r of t.value.addedEditors){if(this.h.has(r.id))return;const s=A.revive(r.documentUri),n=this.g.get(s);n&&this.B(n,r.id,r)}const i=[];if(t.value.removedEditors)for(const r of t.value.removedEditors){const s=this.h.get(r);s&&(this.h.delete(r),this.k?.id===s.id&&(this.k=void 0),i.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const r=new Set;this.l.forEach(s=>r.add(s.id));for(const s of this.h.values()){const n=r.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=z.String.with("notebookType","A notebook type"),r=new be("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new z("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>_.wrap(n))],new ve("Notebook Data",n=>Nn.to(n.value))),s=new be("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new z("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new vi(Nn.from(n)))],new ve("Bytes",n=>n.buffer));t.registerApiCommand(r),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},JV=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=r,this.a=new sl}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const s=function(o){t.call(i,o)};return s.extension=e,this.a.event(s,void 0,r)}}async $participateInSave(e,t,i){const r=A.revive(e),s=this.c.getNotebookDocument(r);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:Ip.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof So?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=_i.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new vi(o))}},YV=class{constructor(e){this.c=e,this.a=new $,this.onDidSaveNotebookDocument=this.a.event,this.b=new $,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,r){const n=this.c.getNotebookDocument(A.revive(e)).acceptModelChanged(t.value,i,r);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(A.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(A.revive(e));this.a.fire(t.apiNotebook)}},SA=class{constructor(t,i){this.c=t,this.d=i,this.a=new $,this.b=new $,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const r=this.d.getEditorById(t);i.visibleRanges&&r._acceptVisibleRanges(i.visibleRanges.ranges.map(os.to)),i.selections&&r._acceptSelections(i.selections.selections.map(os.to)),i.visibleRanges&&this.b.fire({notebookEditor:r.apiEditor,visibleRanges:r.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:r.apiEditor,selections:r.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(Bt.to(t[i]))}};SA=__decorate([__param(0,Ce)],SA);var Oc;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(Oc||(Oc={}));var Nie=V("INotebookExecutionService"),QV=100,sD;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(sD||(sD={}));var Lie=V("INotebookKernelService"),Rie=V("INotebookKernelHistoryService"),kA=class{constructor(t,i,r,s,n){this.l=i,this.m=r,this.n=s,this.o=n,this.b=new Gt,this.c=new Gt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.q=0,this.r={},this.a=t.getProxy(Y.MainThreadNotebookKernels);const o=new be("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new z("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.m.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.m.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return"skipIfAlreadySelected"in c?{notebookEditorId:l,skipIfAlreadySelected:c.skipIfAlreadySelected}:{notebookEditorId:l}}return c})],ve.Void),a=new be("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[z.Uri],new ve("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.n.registerApiCommand(o),this.n.registerApiCommand(a)}createNotebookController(t,i,r,s,n,o){for(const j of this.j.values())if(j.controller.id===i&&Ve.equals(t.identifier,j.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.o.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${f.id}' of extension: '${t.identifier}'`);let u=!1;const h=new $,d=new $,f={id:wm(t.identifier,i),notebookType:r,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(Tp.from):[]};let g=n??l,v,b;this.a.$addKernel(a,f).catch(j=>{console.log(j),u=!0});let x=0;const E=()=>{if(u)return;const j=++x;Promise.resolve().then(()=>{j===x&&this.a.$updateKernel(a,f)})},I=new Gt,U={get id(){return i},get notebookType(){return f.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return f.label},set label(j){f.label=j??t.displayName??t.name,E()},get detail(){return f.detail??""},set detail(j){f.detail=j,E()},get description(){return f.description??""},set description(j){f.description=j,E()},get supportedLanguages(){return f.supportedLanguages},set supportedLanguages(j){f.supportedLanguages=j,E()},get supportsExecutionOrder(){return f.supportsExecutionOrder??!1},set supportsExecutionOrder(j){f.supportsExecutionOrder=j,E()},get rendererScripts(){return f.preloads?f.preloads.map(Tp.to):[]},get executeHandler(){return g},set executeHandler(j){g=j??l},get interruptHandler(){return v},set interruptHandler(j){v=j,f.supportsInterrupt=!!j,E()},set variableProvider(j){M(t,"notebookVariableProvider"),b=j,f.hasVariableProvider=!!j,j?.onDidChangeVariables(ee=>c.a.$variablesUpdated(ee.uri)),E()},get variableProvider(){return b},createNotebookCellExecution(j){if(u)throw new Error("notebook controller is DISPOSED");if(!I.has(j.notebook.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(ee=>ee.toString())),new Error(`notebook controller is NOT associated to notebook: ${j.notebook.uri.toString()}`);return c._createNotebookCellExecution(j,wm(t.identifier,this.id))},createNotebookExecution(j){if(M(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!I.has(j.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(I.keys()).map(ee=>ee.toString())),new Error(`notebook controller is NOT associated to notebook: ${j.uri.toString()}`);return c._createNotebookExecution(j,wm(t.identifier,this.id))},dispose:()=>{u||(this.o.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),d.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(j,ee){ee===Jf.Hidden&&M(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,j.uri,ee)},onDidReceiveMessage:d.event,postMessage(j,ee){return M(t,"notebookMessaging"),c.a.$postMessage(a,ee&&c.m.getIdByEditor(ee),j)},asWebviewUri(j){return M(t,"notebookMessaging"),nh(j,c.l.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:U,onDidReceiveMessage:d,onDidChangeSelection:h,associatedNotebooks:I}),U}getIdByController(t){for(const[i,r]of this.j)if(r.controller===t)return wm(r.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const r=this.g++,s=this;this.o.trace(`NotebookControllerDetectionTask[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(r,i);const n={dispose:()=>{this.f.delete(r),s.a.$removeKernelDetectionTask(r)}};return this.f.set(r,n),n}registerKernelSourceActionProvider(t,i,r){const s=this.i++,n=typeof r.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,r),this.o.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,i);let a;return n!==void 0&&(a=r.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,i){const r=this.h.get(t);if(r){const s=new le;return(await r.provideNotebookKernelSourceActions(i)??[]).map(o=>$w.from(o,this.n.converter,s))}return[]}$acceptNotebookAssociation(t,i,r){const s=this.j.get(t);if(s){const n=this.m.getNotebookDocument(A.revive(i));r?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.o.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),r),s.onDidChangeSelection.fire({selected:r,notebook:n.apiNotebook})}}async $executeCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(A.revive(i)),o=[];for(const a of r){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.o.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.o.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(A.revive(i));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of r){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),r.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,r,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.m.getNotebookDocument(A.revive(r)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.r[s],!h)return}else this.r={};const d=n==="named"?hu.Named:hu.Indexed,f=u.provideVariables(l.apiNotebook,h,d,o,a);let g=0;for await(const v of f){if(a.isCancellationRequested)return;const b={id:this.q++,name:v.variable.name,value:v.variable.value,type:v.variable.type,interfaces:v.variable.interfaces,language:v.variable.language,expression:v.variable.expression,hasNamedChildren:v.hasNamedChildren,indexedChildrenCount:v.indexedChildrenCount,extensionId:c.extensionId.value};if(this.r[b.id]=v.variable,this.a.$receiveVariable(i,b),g++>=QV)return}}$acceptKernelMessageFromRenderer(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getEditorById(i);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:r}))}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.m.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new XV(i,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===Fr.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,i){const r=this.m.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=r.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(r.uri))throw new Error(`duplicate notebook execution for ${r.uri}`);const n=new eq(i,r,this.a),o=n.onDidChangeState(()=>{n.state===Gs.Resolved&&(n.dispose(),o.dispose(),this.c.delete(r.uri))});return this.c.set(r.uri,[n,o]),n.asApiObject()}};kA=__decorate([__param(4,Ce)],kA);var Fr;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Fr||(Fr={}));var XV=class vP extends te{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.m=i,this.n=r,this.b=vP.a++,this.c=new $,this.onDidChangeState=this.c.event,this.f=Fr.Init,this.g=this.B(new tt),this.h=new tq(10,s=>this.s(s)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new vi(i))}t(){if(this.f===Fr.Init)throw new Error("Must call start before modifying cell output");if(this.f===Fr.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}y(t){return t.map(i=>{const r=qf.ensureUniqueMimeTypes(i.items,!0);return r===i.items?Ln.from(i):Ln.from({items:r,id:i.id,metadata:i.metadata})})}async z(t,i,r){const s=this.w(i),n=this.y(nr(t));return this.r({editType:Oc.Output,cellHandle:s,append:r,outputs:n})}async C(t,i,r){return t=qf.ensureUniqueMimeTypes(nr(t),!0),this.r({editType:Oc.OutputItems,items:t.map(pc.from),outputId:i.id,append:r})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(r){t.j=r,t.s([{editType:Oc.ExecutionState,executionOrder:t.j}])},start(r){if(t.f===Fr.Resolved||t.f===Fr.Started)throw new Error("Cannot call start again");t.f=Fr.Started,t.c.fire(),t.s({editType:Oc.ExecutionState,runStartTime:r})},end(r,s,n){if(t.f===Fr.Resolved)throw new Error("Cannot call resolve twice");t.f=Fr.Resolved,t.c.fire(),t.h.flush();const o=KV(n);t.n.$completeExecution(t.b,new vi({runEndTime:s,lastRunSuccess:r,error:o}))},clearOutput(r){return t.t(),t.z([],r,!1)},appendOutput(r,s){return t.t(),t.z(r,s,!0)},replaceOutput(r,s){return t.t(),t.z(r,s,!1)},appendOutputItems(r,s){return t.t(),t.C(r,s,!0)},replaceOutputItems(r,s){return t.t(),t.C(r,s,!1)}})}};function KV(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,i=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>i(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var Gs;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(Gs||(Gs={}));var eq=class wP extends te{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.h=i,this.j=r,this.b=wP.a++,this.c=new $,this.onDidChangeState=this.c.event,this.f=Gs.Init,this.g=this.B(new tt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===Gs.Resolved||this.f===Gs.Started)throw new Error("Cannot call start again");this.f=Gs.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===Gs.Resolved)throw new Error("Cannot call resolve twice");this.f=Gs.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},tq=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new Xi,this.b=Date.now(),ni(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function wm(e,t){return`${e.value}/${t}`}var iq=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(Y.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this.c.getEditorById(e);this.a.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(r=>r.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(r,s,n)=>this.d(t).event(r,s,n),postMessage:(r,s)=>{gA.apiEditorsToExtHost.has(r)&&([r,s]=[s,r]);const n=s&&gA.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,r)}}}d(e){let t=this.a.get(e);return t||(t=new $({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},rq=class{constructor(e){this.b=new Map,this.a=e.getProxy(Y.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(M(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),re(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,r){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(Fe(t)?t:A.revive(t),i)}},sq=class bP{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(Y.MainThreadQuickDiff)}$provideOriginalResource(t,i,r){const s=A.revive(i),n=this.c.get(t);return n?si(()=>n.provideOriginalResource(s,r)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,r,s,n,o){const a=bP.a++;this.c.set(a,r);const c=Ve.toKey(t.identifier);return this.b.$registerQuickDiffProvider(a,nc.from(i,this.d),`${c}.${s}`,n,o),{dispose:()=>{this.b.$unregisterQuickDiffProvider(a),this.c.delete(a)}}}};function nq(e,t,i){const r=e.getProxy(Y.MainThreadQuickOpen);class s{constructor(f,g){this.e=new Map,this.f=0,this.a=f,this.b=g}showQuickPick(f,g,v,b=Je.None){this.c=void 0;const x=Promise.resolve(g),E=++this.f,I=r.$show(E,{title:v?.title,placeHolder:v?.placeHolder,matchOnDescription:v?.matchOnDescription,matchOnDetail:v?.matchOnDetail,ignoreFocusLost:v?.ignoreFocusOut,canPickMany:v?.canPickMany},b),U={},j=I.then(()=>U);return Promise.race([j,x]).then(ee=>{if(ee===U)return;const O=et(f,"quickPickItemTooltip");return x.then(B=>{const F=[];for(let J=0;J<B.length;J++){const he=B[J];if(typeof he=="string")F.push({label:he,handle:J});else if(he.kind===uu.Separator)F.push({type:"separator",label:he.label});else{he.tooltip&&!O&&console.warn(`Extension '${f.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${f.identifier.value}`);const se=he.iconPath?l(he.iconPath):void 0;F.push({label:he.label,iconPath:se?.iconPath,iconClass:se?.iconClass,description:he.description,detail:he.detail,picked:he.picked,alwaysShow:he.alwaysShow,tooltip:O?xe.fromStrict(he.tooltip):void 0,handle:J})}}return v&&typeof v.onDidSelectItem=="function"&&(this.c=J=>{v.onDidSelectItem(B[J])}),r.$setItems(E,F),I.then(J=>{if(typeof J=="number")return B[J];if(Array.isArray(J))return J.map(he=>B[he])})})}).then(void 0,ee=>{if(!yi(ee))return r.$setError(E,ee),Promise.reject(ee)})}$onItemSelected(f){this.c?.(f)}showInput(f,g=Je.None){return this.d=f?.validateInput,r.$input(f,typeof this.d=="function",g).then(void 0,v=>{if(!yi(v))return Promise.reject(v)})}async $validateInput(f){if(!this.d)return;const g=await this.d(f);if(!g||typeof g=="string")return g;let v;switch(g.severity){case ec.Info:v=Mt.Info;break;case ec.Warning:v=Mt.Warning;break;case ec.Error:v=Mt.Error;break;default:v=g.message?Mt.Error:Mt.Ignore;break}return{content:g.message,severity:v}}async showWorkspaceFolderPick(f,g=Je.None){const v=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[f]);if(!v)return;const b=await this.a.getWorkspaceFolders2();if(b)return b.find(x=>x.uri.toString()===v.uri.toString())}createQuickPick(f){const g=new u(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}createInputBox(f){const g=new h(f,()=>this.e.delete(g._id));return this.e.set(g._id,g),g}$onDidChangeValue(f,g){this.e.get(f)?._fireDidChangeValue(g)}$onDidAccept(f){this.e.get(f)?._fireDidAccept()}$onDidChangeActive(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeActive(g)}$onDidChangeSelection(f,g){const v=this.e.get(f);v instanceof u&&v._fireDidChangeSelection(g)}$onDidTriggerButton(f,g){this.e.get(f)?._fireDidTriggerButton(g)}$onDidTriggerItemButton(f,g,v){const b=this.e.get(f);b instanceof u&&b._fireDidTriggerItemButton(g,v)}$onDidHide(f){this.e.get(f)?._fireDidHide()}}class n{static{this.a=1}constructor(f,g){this.y=f,this.z=g,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new $,this.r=new $,this.s=new $,this.t=new $,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(f){this.b=f,this.A({title:f})}get step(){return this.c}set step(f){this.c=f,this.A({step:f})}get totalSteps(){return this.d}set totalSteps(f){this.d=f,this.A({totalSteps:f})}get enabled(){return this.g}set enabled(f){this.g=f,this.A({enabled:f})}get busy(){return this.j}set busy(f){this.j=f,this.A({busy:f})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(f){this.k=f,this.A({ignoreFocusOut:f})}get value(){return this.l}set value(f){this.l=f,this.A({value:f})}get valueSelection(){return this.m}set valueSelection(f){this.m=f,this.A({valueSelection:f})}get placeholder(){return this.n}set placeholder(f){this.n=f,this.A({placeholder:f})}get buttons(){return this.o}set buttons(f){const g=et(this.y,"quickInputButtonLocation");!g&&f.some(v=>v.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=f.slice(),this.p.clear(),f.forEach((v,b)=>{const x=v===lu.Back?-1:b;this.p.set(x,v)}),this.A({buttons:f.map((v,b)=>({...l(v.iconPath),tooltip:v.tooltip,handle:v===lu.Back?-1:b,location:g?v.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(f){this.l=f,this.r.fire(f)}_fireDidTriggerButton(f){const g=this.p.get(f);g&&this.s.fire(g)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=wr(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),r.$dispose(this._id))}A(f){if(!this.w){for(const g of Object.keys(f)){const v=f[g];this.v[g]=v===void 0?null:v}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){r.$createOrUpdate(this.v),this.v={id:this._id}}}function o(d){if(d instanceof hi)return{id:d.id};const f=c(d),g=a(d);return{dark:typeof f=="string"?A.file(f):f,light:typeof g=="string"?A.file(g):g}}function a(d){return typeof d=="object"&&"light"in d?d.light:d}function c(d){return typeof d=="object"&&"dark"in d?d.dark:d}function l(d){const f=o(d);let g,v;return"id"in f?v=jt.asClassName(f):g=f,{iconPath:g,iconClass:v}}class u extends n{constructor(f,g){super(f,g),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new $,this.M=[],this.N=new $,this.O=new $,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(f){this.C=f.slice(),this.D.clear(),this.E.clear(),f.forEach((b,x)=>{this.D.set(x,b),this.E.set(b,x)});const g=et(this.y,"quickPickItemTooltip"),v=[];for(let b=0;b<f.length;b++){const x=f[b];if(x.kind===uu.Separator)v.push({type:"separator",label:x.label});else{x.tooltip&&!g&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const E=x.iconPath?l(x.iconPath):void 0;v.push({handle:b,label:x.label,iconPath:E?.iconPath,iconClass:E?.iconClass,description:x.description,detail:x.detail,picked:x.picked,alwaysShow:x.alwaysShow,tooltip:g?xe.fromStrict(x.tooltip):void 0,buttons:x.buttons?.map((I,U)=>({...l(I.iconPath),tooltip:I.tooltip,handle:U}))})}}this.A({items:v})}get canSelectMany(){return this.F}set canSelectMany(f){this.F=f,this.A({canSelectMany:f})}get matchOnDescription(){return this.G}set matchOnDescription(f){this.G=f,this.A({matchOnDescription:f})}get matchOnDetail(){return this.H}set matchOnDetail(f){this.H=f,this.A({matchOnDetail:f})}get sortByLabel(){return this.I}set sortByLabel(f){this.I=f,this.A({sortByLabel:f})}get keepScrollPosition(){return this.J}set keepScrollPosition(f){this.J=f,this.A({keepScrollPosition:f})}get activeItems(){return this.K}set activeItems(f){this.K=f.filter(g=>this.E.has(g)),this.A({activeItems:this.K.map(g=>this.E.get(g))})}get selectedItems(){return this.M}set selectedItems(f){this.M=f.filter(g=>this.E.has(g)),this.A({selectedItems:this.M.map(g=>this.E.get(g))})}_fireDidChangeActive(f){const g=yt(f.map(v=>this.D.get(v)));this.K=g,this.L.fire(g)}_fireDidChangeSelection(f){const g=yt(f.map(v=>this.D.get(v)));this.M=g,this.N.fire(g)}_fireDidTriggerItemButton(f,g){const v=this.D.get(f);if(!v||!v.buttons||!v.buttons.length)return;const b=v.buttons[g];b&&this.O.fire({button:b,item:v})}}class h extends n{constructor(f,g){super(f,g),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(f){this.C=f,this.A({password:f})}get prompt(){return this.D}set prompt(f){this.D=f,this.A({prompt:f})}get validationMessage(){return this.E}set validationMessage(f){this.E=f,f?typeof f=="string"?this.A({validationMessage:f,severity:Mt.Error}):this.A({validationMessage:f.message,severity:f.severity??Mt.Error}):this.A({validationMessage:void 0,severity:Mt.Ignore})}}return new s(t,i)}var IA;function nD(e){return e instanceof A}function oq(e,t){return e.scheme===q.file&&t.scheme===q.file&&Et?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function CA(e){if(e)return typeof e.iconPath=="string"?A.file(e.iconPath):A.isUri(e.iconPath)||jt.isThemeIcon(e.iconPath)?e.iconPath:void 0}function ea(e){if(e){if(A.isUri(e))return e;if(jt.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function aq(e){const t=ea(e.authorIcon),i=e.references?.map(r=>({...r,icon:ea(r.icon)}));return{...e,authorIcon:t,references:i}}function $A(e){return e?{...e,icon:ea(e.icon)}:void 0}function DA(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:A.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,r=typeof t.iconPath=="string"?t.iconPath:A.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return _g(i,r)}function cq(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=DA(e,t),i!==0)return i;if(e.light&&t.light)i=DA(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=DA(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function lq(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],s=t.arguments[i];if(r!==s&&!(nD(r)&&nD(s)&&oq(r,s)))return r<s?-1:1}return 0}function oD(e,t){let i=_g(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=lq(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=cq(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(i!==0)return i;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=_g(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(i!==0)return i;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=_g(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function uq(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function hq(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?uq(e.arguments,t.arguments):e.arguments===t.arguments)}function dq(e,t){return Ri(e,t,hq)}var fq=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return M(this.l,"scmValidation"),this.h}set validateInput(e){if(M(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return M(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,r,s){this.l=e,this.m=r,this.n=s,this.d="",this.f=new $,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){M(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},pq=class yP{static{this.d=0}get disposed(){return this.m}get id(){return this.w}get label(){return this.x}set label(t){this.x=t,this.t.$updateGroupLabel(this.v,this.handle,t)}get contextValue(){return this.q}set contextValue(t){this.q=t,this.t.$updateGroup(this.v,this.handle,this.features)}get hideWhenEmpty(){return this.s}set hideWhenEmpty(t){this.s=t,this.t.$updateGroup(this.v,this.handle,this.features)}get features(){return{contextValue:this.contextValue,hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,i,r,s,n,o,a){this.t=t,this.u=i,this.v=r,this.w=s,this.x=n,this.multiDiffEditorEnableViewChanges=o,this.y=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new $,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new $,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.s=void 0,this.handle=yP.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,i){const r=this.j.get(t);return r?si(()=>this.u.executeCommand(r.command,...r.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(oD),r=z4(this.p,t,oD).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const B=new le;h=this.u.converter.toInternal(c.command,B),this.k.set(l,B)}else this.j.set(l,c.command);const d=et(this.y,"scmMultiDiffEditor"),f=d?c.multiDiffEditorOriginalUri:void 0,g=d?c.multiFileDiffEditorModifiedUri:void 0,v=CA(c.decorations),b=c.decorations&&CA(c.decorations.light)||v,x=c.decorations&&CA(c.decorations.dark)||v,E=[b,x],I=c.decorations&&c.decorations.tooltip||"",U=c.decorations&&!!c.decorations.strikeThrough,j=c.decorations&&!!c.decorations.faded,ee=c.contextValue||"";return{rawResource:[l,u,E,I,U,j,ee,h,f,g],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=r.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=r.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},PA=class AP{static{this.d=0}#e;get id(){return this.A}get label(){return this.B}get rootUri(){return this.C}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.x,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let i;et(this.y,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.x,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get secondaryQuickDiffProvider(){return M(this.y,"quickDiffProvider"),this.k}set secondaryQuickDiffProvider(t){M(this.y,"quickDiffProvider"),this.k=t;const i=t?.label;this.#e.$updateSourceControl(this.x,{hasSecondaryQuickDiffProvider:!!t,secondaryQuickDiffLabel:i})}get historyProvider(){return M(this.y,"scmHistoryProvider"),this.l}set historyProvider(t){M(this.y,"scmHistoryProvider"),this.l=t,this.m.value=new le,this.#e.$updateSourceControl(this.x,{hasHistoryProvider:!!t}),t&&(this.m.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const i=$A(t?.currentHistoryItemRef),r=$A(t?.currentHistoryItemRemoteRef),s=$A(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.x,i,r,s)})),this.m.value.add(t.onDidChangeHistoryItemRefs(i=>{if(i.added.length===0&&i.modified.length===0&&i.removed.length===0)return;const r=i.added.map(o=>({...o,icon:ea(o.icon)})),s=i.modified.map(o=>({...o,icon:ea(o.icon)})),n=i.removed.map(o=>({...o,icon:ea(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.x,{added:r,modified:s,removed:n,silent:i.silent})})))}get commitTemplate(){return this.n}set commitTemplate(t){t!==this.n&&(this.n=t,this.#e.$updateSourceControl(this.x,{commitTemplate:t}))}get acceptInputCommand(){return this.p}set acceptInputCommand(t){this.o.value=new le,this.p=t;const i=this.z.converter.toInternal(t,this.o.value);this.#e.$updateSourceControl(this.x,{acceptInputCommand:i})}get actionButton(){return M(this.y,"scmActionButton"),this.s}set actionButton(t){if(M(this.y,"scmActionButton"),Nb(this.s,t))return;this.s=t,this.q.value=new le;const i=t!==void 0?{command:{...this.z.converter.toInternal(t.command,this.q.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(r=>r.map(s=>this.z.converter.toInternal(s,this.q.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.x,{actionButton:i??null})}get statusBarCommands(){return this.u}set statusBarCommands(t){if(this.u&&t&&dq(this.u,t))return;this.t.value=new le,this.u=t;const i=(t||[]).map(r=>this.z.converter.toInternal(r,this.t.value));this.#e.$updateSourceControl(this.x,{statusBarCommands:i})}get selected(){return this.v}constructor(t,i,r,s,n,o,a){this.y=t,this.z=s,this.A=n,this.B=o,this.C=a,this.f=new Map,this.h=void 0,this.j=void 0,this.k=void 0,this.m=new Hr,this.n=void 0,this.o=new Hr,this.p=void 0,this.q=new Hr,this.t=new Hr,this.u=void 0,this.v=!1,this.w=new $,this.onDidChangeSelection=this.w.event,this.x=AP.d++,this.D=new Map,this.E=new Set,this.#e=r;const c=A.from({scheme:q.vscodeSourceControl,path:`${n}/scm${this.x}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new fq(t,i,this.#e,this.x,c),this.#e.$registerSourceControl(this.x,n,o,a,c)}createResourceGroup(t,i,r){const s=et(this.y,"scmMultiDiffEditor")&&r?.multiDiffEditorEnableViewChanges===!0,n=new pq(this.#e,this.z,this.x,t,i,s,this.y),o=We.once(n.onDidDispose)(()=>this.D.delete(n));return this.D.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],i=[];for(const[r,s]of this.D){s.dispose();const n=r.onDidUpdateResourceStates(()=>{this.E.add(r),this.eventuallyUpdateResourceStates()});We.once(r.onDidDispose)(()=>{this.E.delete(r),n.dispose(),this.f.delete(r.handle),this.#e.$unregisterGroup(this.x,r.handle)}),t.push([r.handle,r.id,r.label,r.features,r.multiDiffEditorEnableViewChanges]);const o=r._takeResourceStateSnapshot();o.length>0&&i.push([r.handle,o]),this.f.set(r.handle,r)}this.#e.$registerGroups(this.x,t,i),this.D.clear()}eventuallyUpdateResourceStates(){const t=[];this.E.forEach(i=>{const r=i._takeResourceStateSnapshot();r.length!==0&&t.push([i.handle,r])}),t.length>0&&this.#e.$spliceResourceStates(this.x,t),this.E.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.v=t,this.w.fire(t)}dispose(){this.o.dispose(),this.q.dispose(),this.t.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.x)}};__decorate([Ad(100)],PA.prototype,"eventuallyAddResourceGroups",null),__decorate([Ad(100)],PA.prototype,"eventuallyUpdateResourceStates",null);var TA=class{static{IA=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,i,r,s){this.m=i,this.n=r,this.o=s,this.h=new Map,this.j=new ks,this.k=new $,this.f=t.getProxy(Y.MainThreadSCM),this.g=t.getProxy(Y.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,i,r,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,r,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=IA.d++,o=new PA(t,this.n,this.f,this.m,i,r,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.j.get(t.identifier),r=i&&i[i.length-1];return r&&r.inputBox}$provideOriginalResource(t,i,r){const s=A.revive(i);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):si(()=>n.quickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$provideSecondaryOriginalResource(t,i,r){const s=A.revive(i);this.o.trace("ExtHostSCM#$provideSecondaryOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.secondaryQuickDiffProvider||!n.secondaryQuickDiffProvider.provideOriginalResource?Promise.resolve(null):si(()=>n.secondaryQuickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const r=this.h.get(t);return r&&r.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,r,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,i,r);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(i);return o?o.$executeResourceCommand(r,s):Promise.resolve(void 0)}$validateInput(t,i,r){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):si(()=>s.inputBox.validateInput(i,r)).then(n=>{if(!n)return Promise.resolve(void 0);const o=xe.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemChatContext(t,i,r){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemChatContext(i,r)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemChatContext",s);return}}async $resolveHistoryItemRefsCommonAncestor(t,i,r){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(i,r)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(i,r))?.map(o=>({...o,icon:ea(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(i,r))?.map(o=>aq(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,i,r,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(i,r,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};TA=IA=__decorate([__param(3,Ce)],TA);var gq=class xP{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(Y.MainThreadShare)}async $provideShare(t,i,r){return await this.c.get(t)?.provideShare({selection:R.to(i.selection),resourceUri:A.revive(i.resourceUri)},r)??void 0}registerShareProvider(t,i){const r=xP.a++;return this.c.set(r,i),this.b.$registerShareProvider(r,nc.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(r),this.c.delete(r)}}}},mq=class EP{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(Y.MainThreadSpeech)}async $createSpeechToTextSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new le,o=new tt;this.d.set(i,o);const a=await s.provideSpeechToTextSession(o.token,r?{language:r}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new le,o=new tt;this.d.set(i,o);const a=await s.provideTextToSpeechSession(o.token,r?{language:r}:void 0);a&&(this.f.set(i,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const r=this.c.get(t);if(!r)return;const s=new le,n=new tt;this.d.set(i,n);const o=await r.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,r){const s=EP.a++;return this.c.set(s,r),this.b.$registerProvider(s,i,{extension:t,displayName:t.value}),re(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},vq=class Zm{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new eu("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new eu("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,r,s,n,o=In.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new le,this.#e=t,this.#t=i,n&&s){this.c=lj(s.identifier,n);const l=r.get(this.c);l&&(o=l.alignLeft?In.Left:In.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(Zm.a++);this.e=s,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(or(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&M(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&M(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!Zm.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new le,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.n?i=this.n:i=p(2936,null,this.e.displayName||this.e.name);let r=this.o;this.p&&(r=Zm.b.get(this.p.id));let s,n;typeof this.m=="function"?(s=xe.fromStrict(this.l),n=!0):(s=xe.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,s,n,this.s?.internal,r,this.p,this.g===In.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},wq=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",In.Left,Number.MIN_VALUE),this.a.name=p(2937,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Me(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},bq=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(Y.MainThreadStatusBar),this.b=t,this.c=new wq(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const i=this.e.get(e);if(!i)return;const r=typeof i.tooltip2=="function"?await i.tooltip2(t):i.tooltip2;return t.isCancellationRequested?void 0:xe.fromStrict(r)}createStatusBarEntry(e,t,i,r){const s=new vq(this.a,this.b,this.f,e,t,i,r,()=>this.e.delete(s.entryId));return this.e.set(s.entryId,s),s}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let r;return typeof t=="number"?r=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Me(()=>{i.dispose(),clearTimeout(r)})}},yq=class extends te{constructor(e,t){super(),this.n=t,this.a=new $,this.b=new $,this.c=new $,this.f=new $,this.g=new $,this.h=new $,this.j=new $,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(Y.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(i=>this.j.fire(i))),this.B(this.n.onDidChangeActiveTextEditor(i=>this.h.fire(i)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let r;typeof t=="number"?r={position:Bt.from(t),preserveFocus:i}:typeof t=="object"?r={position:Bt.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?R.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,r),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new Nz(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(Pr.to);i._acceptSelections(r)}if(t.visibleRanges){const r=yt(t.visibleRanges.map(R.to));i._acceptVisibleRanges(r)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:uc.to(t.options.lineNumbers)}}),t.selections){const r=za.fromValue(t.selections.source),s=t.selections.selections.map(Pr.to);this.a.fire({textEditor:i.value,selections:s,kind:r})}if(t.visibleRanges){const r=yt(t.visibleRanges.map(R.to));this.c.fire({textEditor:i.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const i=this.n.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=Bt.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this.f.fire({textEditor:i.value,viewColumn:r}))}}$acceptEditorDiffInformation(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(!t){i._acceptDiffInformation(void 0),this.g.fire({textEditor:i.value,diffInformation:void 0});return}const r=this,s=t.map(n=>{const o=A.revive(n.original),a=A.revive(n.modified),c=n.changes.map(l=>{const[u,h,d,f]=l;let g;return u===h?g=Ha.Addition:d===f?g=Ha.Deletion:g=Ha.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:d,endLineNumberExclusive:f},kind:g}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return r.n.getDocument(a)?.version!==n.documentVersion}})});i._acceptDiffInformation(s),this.g.fire({textEditor:i.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},MA=class{constructor(t){this.a=new _f(Pn.Dark),this.b=new $}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=Pn.Light;break;case"hcDark":i=Pn.HighContrast;break;case"hcLight":i=Pn.HighContrastLight;break;default:i=Pn.Dark}this.a=new _f(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};MA=__decorate([__param(0,De)],MA);var Uie=V("IExtHostTimeline"),Aq=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(Y.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,r)=>{if(i&&i.$mid===12)if(this.b.get(i.source)&&r&&et(r,"timeline")){const s=i.uri===void 0?void 0:A.revive(i.uri);return this.c.get(i.source)?.get(aD(s))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,r){return this.b.get(e)?.provider.provideTimeline(A.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const s=new le,n=this.d(t.id,r,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const d=n(c,l);return{...h,source:t.id,items:h.items.map(d)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},i)}d(e,t,i){return(r,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=aD(r);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,d;o.iconPath&&(a instanceof hi?d={id:a.id,color:a.color}:A.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let f;return Hi.isMarkdownString(c.tooltip)?f=xe.from(c.tooltip):Fe(c.tooltip)?f=c.tooltip:Hi.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=xe.from(c.detail)):Fe(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:h,themeIcon:d,tooltip:f,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),re(()=>{for(const r of this.c.values())r.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function aD(e){return e?.toString()}var Bie=p(4503,null),zie=sc("default-view-icon",ce.window,p(4504,null)),bm;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(bm||(bm={}));var cD;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(cD||(cD={}));var xq=class extends te{constructor(){super(...arguments),this.c=this.B(new $),this.onDidRegister=this.c.event,this.f=this.B(new $),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const s=e;return s.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},m2(this.g,t,[]).push(s),i?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),r=i?.indexOf(e);if(r!==-1){i?.splice(r,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Yt.add(bm.ViewContainersRegistry,new xq);var ym;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(ym||(ym={}));function Eq(e,t){const i=e.group??ym.More,r=t.group??ym.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}var Sq=class extends te{constructor(){super(...arguments),this.c=this.B(new $),this.onViewsRegistered=this.c.event,this.f=this.B(new $),this.onViewsDeregistered=this.f.event,this.g=this.B(new $),this.onDidChangeContainer=this.g.event,this.h=this.B(new $),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new J4}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.r(t,i)),this.c.fire(e)}deregisterViews(e,t){const i=this.s(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const r=this.s(e,i);r.length&&(this.r(r,t),this.g.fire({views:r,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(r=>r.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(r=>r.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),re(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,s]of t)this.n.add(e,s),i.set(r,re(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(Eq)}r(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const r of e){if(this.getView(r.id)!==null)throw new Error(p(4505,null,r.id));i.push(r)}}s(e,t){const i=this.m.get(t);if(!i)return[];const r=[],s=[];for(const n of i)e.includes(n)?r.push(n):s.push(n);return r.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),r}};Yt.add(bm.ViewsRegistry,new Sq);var Hie=V("viewDescriptorService"),lD;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(lD||(lD={}));var uD;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(uD||(uD={}));var Zs=class extends Error{constructor(e){super(p(4506,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},kq=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function hD(e,t){if(Fe(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let i;return Array.isArray(e.highlights)&&(i=e.highlights.filter(r=>r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"),i=i.length?i:void 0),{label:e.label,highlights:i}}}var Iq=class extends te{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new kq;function r(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>r(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>r(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return M(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return M(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){fo(h)&&M(i,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&S0.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,d)=>a.reveal(h,d),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const i=this.a.get(e);if(!i)return Promise.reject(new Zs(e));if(!t){const s=await i.getChildren();return s?[[0,...s]]:void 0}const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=await i.getChildren(n);o&&r.push([s,...o])}return r}async $handleDrop(e,t,i,r,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new Zs(e));const l=vc.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,r,s)}async j(e,t,i,r,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(i,e,r);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,i,r){const s=this.a.get(e);if(!s)return Promise.reject(new Zs(e));const n=await this.j(new qa,s,t,r,i);if(!(!n||r.isCancellationRequested))return vc.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new Zs(e);return t.hasResolve}$resolve(e,t,i){const r=this.a.get(e);if(!r)throw new Zs(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.a.get(e);if(!r)throw new Zs(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.a.get(e);if(!r)throw new Zs(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new Zs(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new Zs(e);i.setCheckboxState(t)}m(e,t,i){const r=this.B(new Cq(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,r),r}r(e){const t=this.a.get(e.$treeViewId),i=e;return t&&i.$treeItemHandle?t.getExtensionElement(i.$treeItemHandle):t&&e.$focusedTreeItem?t.focusedElement:null}},Cq=class N4 extends te{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!Dt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,i,r,s,n,o){if(super(),this.I=t,this.J=r,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new $),this.onDidExpandElement=this.u.event,this.w=this.B(new $),this.onDidCollapseElement=this.w.event,this.y=this.B(new $),this.onDidChangeSelection=this.y.event,this.z=this.B(new $),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new $),this.onDidChangeVisibility=this.C.event,this.D=this.B(new $),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new $),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new tt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=i.treeDataProvider,this.g=i.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=We.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(d=>c=d),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const d=c;return a=null,this.$(h).then(()=>d())})),u&&this.J.$setMessage(this.I,xe.fromStrict(this.O)??"")}))}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let r=this.X(t);return r||(r=await this.Y(i)),r?r.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const r=Dt(i.select)?!0:i.select,s=Dt(i.focus)?!1:i.focus,n=Dt(i.expand)?!1:i.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:r,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:r,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=Mp.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,i){const r=this.getExtensionElement(t);r&&(i?this.u.fire(Object.freeze({element:r})):this.w.fire(Object.freeze({element:r})))}setSelectionAndFocus(t,i){const r=!Ri(this.s,t);this.s=t;const s=this.t!==i;this.t=i,r&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async r=>{const s=this.getExtensionElement(r.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:r.newState?is.Checked:is.Unchecked}:Promise.resolve(void 0)}))).filter(r=>r!==void 0);i.forEach(r=>{r.treeItem.checkboxState=r.newState?is.Checked:is.Unchecked}),this.D.fire({items:i.map(r=>[r.extensionItem,r.newState])})}async handleDrag(t,i,r){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,i,r),i}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,i,r){const s=i?this.getExtensionElement(i):void 0;if(!(!s&&i||!this.g?.handleDrop))return si(()=>this.g?.handleDrop?this.g.handleDrop(s,t,r):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,i){if(!this.f.resolveTreeItem)return;const r=this.j.get(t);if(r){const s=this.m.get(r);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,r,i)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(i=>i?this.S(i).then(r=>this.W(i,r[r.length-1]).then(s=>(r.push(s),r))):Promise.resolve([]))}U(t){const i=this.m.get(t);return i?Promise.resolve(i.parent?this.j.get(i.parent.item.handle):void 0):si(()=>this.f.getParent(t))}W(t,i){const r=this.m.get(t);return r?Promise.resolve(r):si(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,i,!0)).then(s=>this.getChildren(i?i.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let i;if(typeof t=="string"){const r=this.getExtensionElement(t);i=r?this.m.get(r):void 0}else i=t;return i&&i.children||void 0}return this.h}async Y(t){this.rb(t);const i=new tt(this.Z.token);try{const r=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(i.token.isCancellationRequested)return;const n=yt(s||[]),o=await Promise.all(yt(n).map(c=>this.f.getTreeItem(c)));if(i.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,r):null);return yt(a)}finally{i.dispose()}}$(t){if(t.some(r=>!r))return this.Z.dispose(!0),this.Z=new tt,this.tb(),this.J.$refresh(this.I);{const r=this.ab(t);if(r.length)return this.bb(r)}return Promise.resolve(void 0)}ab(t){const i=new Set,r=t.map(n=>this.m.get(n));for(const n of r)if(n&&!i.has(n.item.handle)){let o=n;for(;o&&o.parent&&r.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&i.add(n.item.handle)}const s=[];return i.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const i={};return Promise.all(t.map(r=>this.cb(r).then(s=>{s&&(i[r]=s.item)}))).then(()=>Object.keys(i).length?this.J.$refresh(this.I,i):void 0)}cb(t){const i=this.getExtensionElement(t);if(i){const r=this.m.get(i);if(r)return this.rb(i),si(()=>this.f.getTreeItem(i)).then(s=>{if(s){const n=this.ib(i,s,r.parent);return this.pb(i,n,r,r.parent),r.dispose(),n}return null})}return Promise.resolve(null)}db(t,i,r){const s=this.ib(t,i,r);if(i.id&&this.j.has(s.item.handle))throw new Error(p(2940,null,i.id));return this.ob(t,s),this.qb(s,r),s}eb(t){return Hi.isMarkdownString(t)?xe.from(t):t}fb(t,i){return i?{...this.L.toInternal(i,t),originalId:i.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let i,r,s;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,r=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:i===is.Checked,tooltip:r,accessibilityInformation:s}}hb(t){if(!Lf.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,i,r){this.hb(i);const s=this.B(new le),n=this.kb(t,i,r),o=this.lb(i);return{item:{handle:n,parentHandle:r?r.item.handle:void 0,label:hD(i.label,this.N),description:i.description,resourceUri:i.resourceUri,tooltip:this.eb(i.tooltip),command:this.fb(s,i.command),contextValue:i.contextValue,icon:o,iconDark:this.mb(i)||o,themeIcon:this.jb(i),collapsibleState:Dt(i.collapsibleState)?Po.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.gb(i)},extensionItem:i,parent:r,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof hi?t.iconPath:void 0}kb(t,{id:i,label:r,resourceUri:s},n,o){if(i)return`${N4.b}/${i}`;const a=hD(r,this.N),c=n?n.item.handle:N4.a;let l=a?a.label:s?Ar(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let d,f=0;do{if(d=`${c}/${f}:${l}`,o||!this.j.has(d)||u===d)break;f++}while(f<=h.length);return d}lb(t){if(t.iconPath&&!(t.iconPath instanceof hi))return typeof t.iconPath=="string"||A.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof hi)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return A.isUri(t)?t:A.file(t)}ob(t,i){this.j.set(i.item.handle,t),this.m.set(t,i)}pb(t,i,r,s){this.j.delete(i.item.handle),this.m.delete(t),i.item.handle!==r.item.handle&&this.j.delete(r.item.handle),this.ob(t,i);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===r.item.handle)[0];o&&n.splice(n.indexOf(o),1,i)}qb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}i.children=void 0}}else this.tb()}sb(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(i.item.handle),i.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},$q=class SP{static{this.a=new Set([q.http,q.https])}constructor(t){this.c=new Map,this.b=t.getProxy(Y.MainThreadUriOpeners)}registerExternalUriOpener(t,i,r,s){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const n=s.schemes.find(o=>!SP.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(i,r),this.b.$registerUriOpener(i,s.schemes,t,s.label),re(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=A.revive(i);return s.canOpenExternalUri(n,r)}async $openUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(A.revive(i.resolvedUri),{sourceUri:A.revive(i.sourceUri)},r)}},Dq=class extends te{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,r){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new $),this.onDidDispose=this.#d.event,this.#h=this.B(new $),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#r=i,this.#i=r.viewType,this.#n=r.panelOptions,this.#o=r.viewColumn,this.#s=r.title,this.#l=r.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#r.dispose(),super.dispose())}get webview(){return this.c(),this.#r}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,A.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Bt.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},Pq=class kP extends te{static c(){return kt()}constructor(t,i,r){super(),this.j=i,this.m=r,this.g=new Map,this.h=new Map,this.f=t.getProxy(Y.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,r,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Bt.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=Rc(t),l=kP.c();this.f.$createWebviewPanel(em(t),l,i,{title:r,panelOptions:Tq(n),webviewOptions:t$(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,i,r,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((r,s)=>{const n=t[r],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const r of i){const s=this.getWebviewPanel(r);if(!s)continue;const n=t[r];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Bt.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,r){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:r,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:Rc(t)}),new Me(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,r,s){const n=this.h.get(i);if(!n)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,r.webviewOptions,a),l=this.createNewWebviewPanel(t,i,r.title,s,r.panelOptions,c,r.active);await o.deserializeWebviewPanel(l,r.state)}createNewWebviewPanel(t,i,r,s,n,o,a){const c=new Dq(t,this.f,o,{viewType:i,title:r,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function Tq(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var Mq=class extends te{#e;#t;#i;#r;#n;#s;#a;#o;#c;constructor(e,t,i,r,s,n){super(),this.#n=!1,this.#l=this.B(new $),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new $),this.onDidDispose=this.#u.event,this.#i=i,this.#a=r,this.#e=e,this.#t=t,this.#r=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#r.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#r}get viewType(){return this.#i}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=Mp.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},Nq=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(Y.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(em(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:Rc(e)}),new Me(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new Mq(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:r},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},Lq=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(Y.MainThreadAiSettingsSearch)}async $startSearch(e,t,i,r){if(this.a.size===0)throw new Error("No related information providers registered");const s=this.a.get(e);if(!s)throw new Error("Settings search provider not found");const n=new pg(o=>{this.c.$handleSearchResult(e,Vw.fromSettingsSearchResult(o))});return s.provideSettingsSearchResults(t,i,n,r)}registerSettingsSearchProvider(e,t){const i=this.b;return this.b++,this.a.set(i,t),this.c.$registerAiSettingsSearchProvider(i),new Me(()=>{this.c.$unregisterAiSettingsSearchProvider(i),this.a.delete(i)})}};function Rq(e){const t=e.get(At),i=e.get(ka),r=e.get(zu),s=e.get(Ws),n=e.get(Mr),o=e.get(dg),a=e.get(hr),c=e.get(Sl),l=e.get(De),u=e.get(fb),h=e.get(gb),d=e.get(vn),f=e.get(Ce),g=e.get(ug),v=e.get(Pc),b=e.get(gg),x=e.get(vg),E=e.get(Kb),I=e.get(Tc),U=e.get(iy),j=e.get(wg),ee=e.get(Hb),O=e.get(_b),B=e.get(Bg);l.set(ae.ExtHostFileSystemInfo,i),l.set(ae.ExtHostLogLevelServiceShape,d),l.set(ae.ExtHostWorkspace,n),l.set(ae.ExtHostConfiguration,a),l.set(ae.ExtHostExtensionService,s),l.set(ae.ExtHostStorage,u),l.set(ae.ExtHostTunnelService,g),l.set(ae.ExtHostWindow,b),l.set(ae.ExtHostUrls,x),l.set(ae.ExtHostSecretState,E),l.set(ae.ExtHostTelemetry,o),l.set(ae.ExtHostEditorTabs,I),l.set(ae.ExtHostManagedSockets,U),l.set(ae.ExtHostProgress,j),l.set(ae.ExtHostAuthentication,ee),l.set(ae.ExtHostChatProvider,O);const F=l.set(ae.ExtHostDecorations,e.get(h7)),J=l.set(ae.ExtHostDocumentsAndEditors,e.get(Yo)),he=l.set(ae.ExtHostCommands,e.get(Nr)),se=l.set(ae.ExtHostTerminalService,e.get(Bs)),ht=l.set(ae.ExtHostTerminalShellIntegration,e.get(Ny)),W=l.set(ae.ExtHostDebugService,e.get(Dy)),H=l.set(ae.ExtHostSearch,e.get(My)),Q=l.set(ae.ExtHostTask,e.get(Iy)),X=l.set(ae.ExtHostOutputService,e.get(u7)),ne=l.set(ae.ExtHostLocalization,e.get(ty)),de=l.set(ae.ExtHostDocuments,new z_(l,J)),Pe=l.set(ae.ExtHostDocumentContentProviders,new U_(l,J,f)),ot=l.set(ae.ExtHostDocumentSaveParticipant,new B_(f,de,l.getProxy(Y.MainThreadBulkEdits))),ke=l.set(ae.ExtHostNotebook,new ZV(l,he,J,de,r,H,f)),Wt=l.set(ae.ExtHostNotebookDocuments,new YV(ke)),Ct=l.set(ae.ExtHostNotebookEditors,new SA(f,ke)),_t=l.set(ae.ExtHostNotebookKernels,new kA(l,t,ke,he,f)),di=l.set(ae.ExtHostNotebookRenderers,new iq(l,ke)),bi=l.set(ae.ExtHostNotebookDocumentSaveParticipant,new JV(f,ke,l.getProxy(Y.MainThreadBulkEdits))),Rt=l.set(ae.ExtHostEditors,new yq(l,J)),Vn=l.set(ae.ExtHostTreeViews,new Iq(l.getProxy(Y.MainThreadTreeViews),he,f)),Fh=l.set(ae.ExtHostEditorInsets,new v_(l.getProxy(Y.MainThreadEditorInsets),Rt,t.remote)),Zi=l.set(ae.ExtHostDiagnostics,new eA(l,f,i,J)),rr=l.set(ae.ExtHostLanguages,new EV(l,de,he.converter,c)),oe=l.set(ae.ExtHostLanguageFeatures,new uV(l,c,de,he,Zi,f,v,o)),jh=l.set(ae.ExtHostCodeMapper,new w_(l)),tn=l.set(ae.ExtHostFileSystem,new J_(l,oe)),ai=l.set(ae.ExtHostFileSystemEventService,new nV(l,f,J)),zr=l.set(ae.ExtHostQuickOpen,nq(l,n,he)),qn=l.set(ae.ExtHostSCM,new TA(l,he,de,f)),Zc=l.set(ae.ExtHostQuickDiff,new sq(l,c)),Uh=l.set(ae.ExtHostShare,new gq(l,c)),Jc=l.set(ae.ExtHostComments,b_(l,he,de)),Yc=l.set(ae.ExtHostLabelService,new aV(l)),Gn=l.set(ae.ExtHostTheming,new MA(l)),Li=l.set(ae.ExtHostTimeline,new Aq(l,he)),gs=l.set(ae.ExtHostWebviews,new $_(l,t.remote,n,f,v)),gt=l.set(ae.ExtHostWebviewPanels,new Pq(l,gs,n)),ci=l.set(ae.ExtHostCustomEditors,new L_(l,de,h,gs,gt)),Ym=l.set(ae.ExtHostWebviewViews,new Nq(l,gs)),rn=l.set(ae.ExtHostTesting,e.get(th)),la=l.set(ae.ExtHostUriOpeners,new $q(l)),Qc=l.set(ae.ExtHostProfileContentHandlers,new rq(l));l.set(ae.ExtHostInteractive,new oV(l,ke,J,he,f));const C=l.set(ae.ExtHostLanguageModelTools,new xV(l,O)),T=l.set(ae.ExtHostChatAgents2,new c_(l,f,he,de,O,Zi,C)),L=l.set(ae.ExtHostAiRelatedInformation,new KW(l)),ge=l.set(ae.ExtHostAiEmbeddingVector,new W_(l)),Se=l.set(ae.ExtHostAiSettingsSearch,new Lq(l)),Ot=l.set(ae.ExtHostStatusBar,new bq(l,he.converter)),Ze=l.set(ae.ExtHostSpeech,new mq(l)),Vt=l.set(ae.ExtHostEmbeddings,new H_(l));l.set(ae.ExtHostMcp,e.get(Bg));const $t=Object.values(ae);l.assertRegistered($t);const ii=new Xy(l,J),sr=new p_(l),bt=new dA(l,f),qt=new j_(l),fi=new d_(l);return s_.register(he),function(S,Ae,Le){function G(w){return(y,k,Ee)=>{const at=w(Kt=>{try{y.call(k,Kt)}catch(_P){Wh(new OE(S.identifier,_P,"FAILED to handle event"))}});return Ee?.push(at),at}}const ye=function(){let w=!S.isUnderDevelopment;function y(){w||(f.info(`Extension '${S.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),w=!0)}return function k(Ee){if(Array.isArray(Ee))Ee.forEach(k);else if(typeof Ee=="string")y();else{const at=Ee;typeof at.scheme>"u"&&y(),typeof at.exclusive=="boolean"&&M(S,"documentFiltersExclusive")}return Ee}}(),Xt={getSession(w,y,k){return(typeof k?.forceNewSession=="object"&&k.forceNewSession.learnMore||typeof k?.createIfNone=="object"&&k.createIfNone.learnMore)&&M(S,"authLearnMore"),k?.authorizationServer&&M(S,"authIssuers"),ee.getSession(S,w,y,k)},getAccounts(w){return ee.getAccounts(w)},async hasSession(w,y){return M(S,"authSession"),!!await ee.getSession(S,w,y,{silent:!0})},get onDidChangeSessions(){return G(ee.getExtensionScopedSessionsEvent(S.identifier.value))},registerAuthenticationProvider(w,y,k,Ee){return Ee?.supportedAuthorizationServers&&M(S,"authIssuers"),ee.registerAuthenticationProvider(w,y,k,Ee)}},Bh={registerCommand(w,y,k){return he.registerCommand(!0,w,y,k,void 0,S)},registerTextEditorCommand(w,y,k){return he.registerCommand(!0,w,(...Ee)=>{const at=Rt.getActiveTextEditor();if(!at){f.warn("Cannot execute "+w+" because there is no active text editor.");return}return at.edit(Kt=>{y.apply(k,[at,Kt,...Ee])}).then(Kt=>{Kt||f.warn("Edits from command "+w+" were not applied.")},Kt=>{f.warn("An error occurred while running command "+w,Kt)})},void 0,void 0,S)},registerDiffInformationCommand:(w,y,k)=>(M(S,"diffCommand"),he.registerCommand(!0,w,async(...Ee)=>{const at=J.activeEditor(!0);if(!at){f.warn("Cannot execute "+w+" because there is no active text editor.");return}const Kt=await Rt.getDiffInformation(at.id);y.apply(k,[Kt,...Ee])},void 0,void 0,S)),executeCommand(w,...y){return he.executeCommand(w,...y)},getCommands(w=!1){return he.getCommands(w)}},sn={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return sr.value},get shell(){return se.getDefaultShell(!1)},get onDidChangeShell(){return G(se.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return G(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return M(S,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return M(S,"telemetry"),G(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return VI(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(w,y){return _I.validateSender(w),o.instantiateLogger(S,w,y)},openExternal(w,y){return b.openUri(w,{allowTunneling:!!t.remote.authority,allowContributedOpeners:y?.allowContributedOpeners})},async asExternalUri(w){if(w.scheme===t.environment.appUriScheme)return x.createAppUri(w);try{return await b.asExternalUri(w,{allowTunneling:!!t.remote.authority})}catch(y){if(k1(w,q.http)||k1(w,q.https))return w;throw y}},get remoteName(){return J1(t.remote.authority)},get remoteAuthority(){return M(S,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return G(f.onDidChangeLogLevel)},get appQuality(){return M(S,"resolvers"),t.quality},get appCommit(){return M(S,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(sn);const Zn={createTestController(w,y,k){return rn.createTestController(S,w,y,k)},createTestObserver(){return M(S,"testObserver"),rn.createTestObserver()},runTests(w){return M(S,"testObserver"),rn.runTests(w)},registerTestFollowupProvider(w){return M(S,"testObserver"),rn.registerTestFollowupProvider(w)},get onDidChangeTestResults(){return M(S,"testObserver"),G(rn.onResultsChanged)},get testResults(){return M(S,"testObserver"),rn.results}},zh=t.remote.isRemote?No.Workspace:No.UI,PP={getExtension(w,y){et(S,"extensionsAny")||(y=!1);const k=Ae.mine.getExtensionDescription(w);if(k)return new Gu(s,S.identifier,k,zh,!1);if(y){const Ee=Ae.all.getExtensionDescription(w);if(Ee)return new Gu(s,S.identifier,Ee,zh,!0)}},get all(){const w=[];for(const y of Ae.mine.getAllExtensionDescriptions())w.push(new Gu(s,S.identifier,y,zh,!1));return w},get allAcrossExtensionHosts(){M(S,"extensionsAny");const w=new lo(Ae.mine.getAllExtensionDescriptions().map(k=>k.identifier)),y=[];for(const k of Ae.all.getAllExtensionDescriptions()){const Ee=!w.has(k.identifier);y.push(new Gu(s,S.identifier,k,zh,Ee))}return y},get onDidChange(){return et(S,"extensionsAny")?G(We.any(Ae.mine.onDidChange,Ae.all.onDidChange)):G(Ae.mine.onDidChange)}},TP={createDiagnosticCollection(w){return Zi.createDiagnosticCollection(S.identifier,w)},get onDidChangeDiagnostics(){return G(Zi.onDidChangeDiagnostics)},getDiagnostics:w=>Zi.getDiagnostics(w),getLanguages(){return rr.getLanguages()},setTextDocumentLanguage(w,y){return rr.changeLanguage(w.uri,y)},match(w,y){const k=Iw.from(w);let Ee;return N8(k)&&(Ee=ke.notebookDocuments.find(at=>at.apiNotebook.getCells().find(Kt=>Kt.document===y))?.apiNotebook),M8(k,y.uri,y.languageId,!0,Ee?.uri,Ee?.notebookType)},registerCodeActionsProvider(w,y,k){return oe.registerCodeActionProvider(S,ye(w),y,k)},registerDocumentPasteEditProvider(w,y,k){return oe.registerDocumentPasteEditProvider(S,ye(w),y,k)},registerCodeLensProvider(w,y){return oe.registerCodeLensProvider(S,ye(w),y)},registerDefinitionProvider(w,y){return oe.registerDefinitionProvider(S,ye(w),y)},registerDeclarationProvider(w,y){return oe.registerDeclarationProvider(S,ye(w),y)},registerImplementationProvider(w,y){return oe.registerImplementationProvider(S,ye(w),y)},registerTypeDefinitionProvider(w,y){return oe.registerTypeDefinitionProvider(S,ye(w),y)},registerHoverProvider(w,y){return oe.registerHoverProvider(S,ye(w),y,S.identifier)},registerEvaluatableExpressionProvider(w,y){return oe.registerEvaluatableExpressionProvider(S,ye(w),y,S.identifier)},registerInlineValuesProvider(w,y){return oe.registerInlineValuesProvider(S,ye(w),y,S.identifier)},registerDocumentHighlightProvider(w,y){return oe.registerDocumentHighlightProvider(S,ye(w),y)},registerMultiDocumentHighlightProvider(w,y){return oe.registerMultiDocumentHighlightProvider(S,ye(w),y)},registerLinkedEditingRangeProvider(w,y){return oe.registerLinkedEditingRangeProvider(S,ye(w),y)},registerReferenceProvider(w,y){return oe.registerReferenceProvider(S,ye(w),y)},registerRenameProvider(w,y){return oe.registerRenameProvider(S,ye(w),y)},registerNewSymbolNamesProvider(w,y){return M(S,"newSymbolNamesProvider"),oe.registerNewSymbolNamesProvider(S,ye(w),y)},registerDocumentSymbolProvider(w,y,k){return oe.registerDocumentSymbolProvider(S,ye(w),y,k)},registerWorkspaceSymbolProvider(w){return oe.registerWorkspaceSymbolProvider(S,w)},registerDocumentFormattingEditProvider(w,y){return oe.registerDocumentFormattingEditProvider(S,ye(w),y)},registerDocumentRangeFormattingEditProvider(w,y){return oe.registerDocumentRangeFormattingEditProvider(S,ye(w),y)},registerOnTypeFormattingEditProvider(w,y,k,...Ee){return oe.registerOnTypeFormattingEditProvider(S,ye(w),y,[k].concat(Ee))},registerDocumentSemanticTokensProvider(w,y,k){return oe.registerDocumentSemanticTokensProvider(S,ye(w),y,k)},registerDocumentRangeSemanticTokensProvider(w,y,k){return oe.registerDocumentRangeSemanticTokensProvider(S,ye(w),y,k)},registerSignatureHelpProvider(w,y,k,...Ee){return typeof k=="object"?oe.registerSignatureHelpProvider(S,ye(w),y,k):oe.registerSignatureHelpProvider(S,ye(w),y,typeof k>"u"?[]:[k,...Ee])},registerCompletionItemProvider(w,y,...k){return oe.registerCompletionItemProvider(S,ye(w),y,k)},registerInlineCompletionItemProvider(w,y,k){return y.handleDidShowCompletionItem&&M(S,"inlineCompletionsAdditions"),y.handleDidPartiallyAcceptCompletionItem&&M(S,"inlineCompletionsAdditions"),k&&M(S,"inlineCompletionsAdditions"),oe.registerInlineCompletionsProvider(S,ye(w),y,k)},registerDocumentLinkProvider(w,y){return oe.registerDocumentLinkProvider(S,ye(w),y)},registerColorProvider(w,y){return oe.registerColorProvider(S,ye(w),y)},registerFoldingRangeProvider(w,y){return oe.registerFoldingRangeProvider(S,ye(w),y)},registerSelectionRangeProvider(w,y){return oe.registerSelectionRangeProvider(S,w,y)},registerCallHierarchyProvider(w,y){return oe.registerCallHierarchyProvider(S,w,y)},registerTypeHierarchyProvider(w,y){return oe.registerTypeHierarchyProvider(S,w,y)},setLanguageConfiguration:(w,y)=>oe.setLanguageConfiguration(S,w,y),getTokenInformationAtPosition(w,y){return M(S,"tokenInformation"),rr.tokenAtPosition(w,y)},registerInlayHintsProvider(w,y){return oe.registerInlayHintsProvider(S,w,y)},createLanguageStatusItem(w,y){return rr.createLanguageStatusItem(S,w,y)},registerDocumentDropEditProvider(w,y,k){return oe.registerDocumentOnDropEditProvider(S,w,y,k)}},MP={get activeTextEditor(){return Rt.getActiveTextEditor()},get visibleTextEditors(){return Rt.getVisibleTextEditors()},get activeTerminal(){return se.activeTerminal},get terminals(){return se.terminals},async showTextDocument(w,y,k){A.isUri(w)&&w.scheme===q.vscodeRemote&&!w.authority&&v.report("workspace.showTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority.");const Ee=await(A.isUri(w)?Promise.resolve(L4.openTextDocument(w)):Promise.resolve(w));return Rt.showTextDocument(Ee,y,k)},createTextEditorDecorationType(w){return Rt.createTextEditorDecorationType(S,w)},onDidChangeActiveTextEditor(w,y,k){return G(Rt.onDidChangeActiveTextEditor)(w,y,k)},onDidChangeVisibleTextEditors(w,y,k){return G(Rt.onDidChangeVisibleTextEditors)(w,y,k)},onDidChangeTextEditorSelection(w,y,k){return G(Rt.onDidChangeTextEditorSelection)(w,y,k)},onDidChangeTextEditorOptions(w,y,k){return G(Rt.onDidChangeTextEditorOptions)(w,y,k)},onDidChangeTextEditorVisibleRanges(w,y,k){return G(Rt.onDidChangeTextEditorVisibleRanges)(w,y,k)},onDidChangeTextEditorViewColumn(w,y,k){return G(Rt.onDidChangeTextEditorViewColumn)(w,y,k)},onDidChangeTextEditorDiffInformation(w,y,k){return M(S,"textEditorDiffInformation"),G(Rt.onDidChangeTextEditorDiffInformation)(w,y,k)},onDidCloseTerminal(w,y,k){return G(se.onDidCloseTerminal)(w,y,k)},onDidOpenTerminal(w,y,k){return G(se.onDidOpenTerminal)(w,y,k)},onDidChangeActiveTerminal(w,y,k){return G(se.onDidChangeActiveTerminal)(w,y,k)},onDidChangeTerminalDimensions(w,y,k){return M(S,"terminalDimensions"),G(se.onDidChangeTerminalDimensions)(w,y,k)},onDidChangeTerminalState(w,y,k){return G(se.onDidChangeTerminalState)(w,y,k)},onDidWriteTerminalData(w,y,k){return M(S,"terminalDataWriteEvent"),G(se.onDidWriteTerminalData)(w,y,k)},onDidExecuteTerminalCommand(w,y,k){return M(S,"terminalExecuteCommandEvent"),G(se.onDidExecuteTerminalCommand)(w,y,k)},onDidChangeTerminalShellIntegration(w,y,k){return G(ht.onDidChangeTerminalShellIntegration)(w,y,k)},onDidStartTerminalShellExecution(w,y,k){return G(ht.onDidStartTerminalShellExecution)(w,y,k)},onDidEndTerminalShellExecution(w,y,k){return G(ht.onDidEndTerminalShellExecution)(w,y,k)},get state(){return b.getState()},onDidChangeWindowState(w,y,k){return G(b.onDidChangeWindowState)(w,y,k)},showInformationMessage(w,...y){return bt.showMessage(S,Mt.Info,w,y[0],y.slice(1))},showWarningMessage(w,...y){return bt.showMessage(S,Mt.Warning,w,y[0],y.slice(1))},showErrorMessage(w,...y){return bt.showMessage(S,Mt.Error,w,y[0],y.slice(1))},showQuickPick(w,y,k){return zr.showQuickPick(S,w,y,k)},showWorkspaceFolderPick(w){return zr.showWorkspaceFolderPick(w)},showInputBox(w,y){return zr.showInput(w,y)},showOpenDialog(w){return qt.showOpenDialog(w)},showSaveDialog(w){return qt.showSaveDialog(w)},createStatusBarItem(w,y,k){let Ee,at,Kt;return typeof w=="string"?(Ee=w,at=y,Kt=k):(at=w,Kt=y),Ot.createStatusBarEntry(S,Ee,at,Kt)},setStatusBarMessage(w,y){return Ot.setStatusBarMessage(w,y)},withScmProgress(w){return v.report("window.withScmProgress",S,"Use 'withProgress' instead."),j.withProgress(S,{location:$n.SourceControl},(y,k)=>w({report(Ee){}}))},withProgress(w,y){return j.withProgress(S,w,y)},createOutputChannel(w,y){return X.createOutputChannel(w,y,S)},createWebviewPanel(w,y,k,Ee){return gt.createWebviewPanel(S,w,y,k,Ee)},createWebviewTextEditorInset(w,y,k,Ee){return M(S,"editorInsets"),Fh.createWebviewEditorInset(w,y,k,Ee,S)},createTerminal(w,y,k){return typeof w=="object"?"pty"in w?se.createExtensionTerminal(w):se.createTerminalFromOptions(w):se.createTerminal(w,y,k)},registerTerminalLinkProvider(w){return se.registerLinkProvider(w)},registerTerminalProfileProvider(w,y){return se.registerProfileProvider(S,w,y)},registerTerminalCompletionProvider(w,...y){return M(S,"terminalCompletionProvider"),se.registerTerminalCompletionProvider(S,w,...y)},registerTerminalQuickFixProvider(w,y){return M(S,"terminalQuickFixProvider"),se.registerTerminalQuickFixProvider(w,S.identifier.value,y)},registerTreeDataProvider(w,y){return Vn.registerTreeDataProvider(w,y,S)},createTreeView(w,y){return Vn.createTreeView(w,y,S)},registerWebviewPanelSerializer:(w,y)=>gt.registerWebviewPanelSerializer(S,w,y),registerCustomEditorProvider:(w,y,k={})=>ci.registerCustomEditorProvider(S,w,y,k),registerFileDecorationProvider(w){return F.registerFileDecorationProvider(w,S)},registerUriHandler(w){return x.registerUriHandler(S,w)},createQuickPick(){return zr.createQuickPick(S)},createInputBox(){return zr.createInputBox(S)},get activeColorTheme(){return Gn.activeColorTheme},onDidChangeActiveColorTheme(w,y,k){return G(Gn.onDidChangeActiveColorTheme)(w,y,k)},registerWebviewViewProvider(w,y,k){return Ym.registerWebviewViewProvider(S,w,y,k?.webviewOptions)},get activeNotebookEditor(){return ke.activeNotebookEditor},onDidChangeActiveNotebookEditor(w,y,k){return G(ke.onDidChangeActiveNotebookEditor)(w,y,k)},get visibleNotebookEditors(){return ke.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return G(ke.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(w,y,k){return G(Ct.onDidChangeNotebookEditorSelection)(w,y,k)},onDidChangeNotebookEditorVisibleRanges(w,y,k){return G(Ct.onDidChangeNotebookEditorVisibleRanges)(w,y,k)},showNotebookDocument(w,y){return ke.showNotebookDocument(w,y)},registerExternalUriOpener(w,y,k){return M(S,"externalUriOpener"),la.registerExternalUriOpener(S.identifier,w,y,k)},registerProfileContentHandler(w,y){return M(S,"profileContentHandlers"),Qc.registerProfileContentHandler(S,w,y)},registerQuickDiffProvider(w,y,k,Ee,at){return M(S,"quickDiffProvider"),Zc.registerQuickDiffProvider(S,ye(w),y,k,Ee,at)},get tabGroups(){return I.tabGroups},registerShareProvider(w,y){return M(S,"shareProvider"),Uh.registerShareProvider(ye(w),y)},get nativeHandle(){return M(S,"nativeWindowHandle"),b.nativeHandle},createChatStatusItem:w=>(M(S,"chatStatusItem"),fi.createChatStatusItem(S,w))},L4={get rootPath(){return v.report("workspace.rootPath",S,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(w){throw new Jn("rootPath")},getWorkspaceFolder(w){return n.getWorkspaceFolder(w)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(w){throw new Jn("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(w){throw new Jn("workspaceFile")},updateWorkspaceFolders:(w,y,...k)=>n.updateWorkspaceFolders(S,w,y||0,...k),onDidChangeWorkspaceFolders:function(w,y,k){return G(n.onDidChangeWorkspace)(w,y,k)},asRelativePath:(w,y)=>n.getRelativePath(w,y),findFiles:(w,y,k,Ee)=>n.findFiles(w,y,k,S.identifier,Ee),findFiles2:(w,y,k)=>(M(S,"findFiles2"),n.findFiles2(w,y,S.identifier,k)),findTextInFiles:(w,y,k,Ee)=>{M(S,"findTextInFiles");let at,Kt;return typeof y=="object"?(at=y,Kt=k):(at={},Kt=y,Ee=k),n.findTextInFiles(w,at||{},Kt,S.identifier,Ee)},findTextInFiles2:(w,y,k)=>(M(S,"findTextInFiles2"),M(S,"textSearchProvider2"),n.findTextInFiles2(w,y,S.identifier,k)),save:w=>n.save(w),saveAs:w=>n.saveAs(w),saveAll:w=>n.saveAll(w),applyEdit(w,y){return ii.applyWorkspaceEdit(w,S,y)},createFileSystemWatcher:(w,y,k,Ee)=>{const at={ignoreCreateEvents:!!y,ignoreChangeEvents:!!k,ignoreDeleteEvents:!!Ee};return ai.createFileSystemWatcher(n,Le,S,w,at)},get textDocuments(){return de.getAllDocumentData().map(w=>w.document)},set textDocuments(w){throw new Jn("textDocuments")},openTextDocument(w,y){let k;if(y=y??w,typeof w=="string")k=Promise.resolve(A.file(w));else if(A.isUri(w))k=Promise.resolve(w);else if(!y||typeof y=="object")k=de.createDocumentData(y);else throw new Error("illegal argument - uriOrFileNameOrOptions");return k.then(Ee=>(f.trace(`openTextDocument from ${S.identifier}`),Ee.scheme===q.vscodeRemote&&!Ee.authority&&v.report("workspace.openTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority."),de.ensureDocumentData(Ee,y).then(at=>at.document)))},onDidOpenTextDocument:(w,y,k)=>G(de.onDidAddDocument)(w,y,k),onDidCloseTextDocument:(w,y,k)=>G(de.onDidRemoveDocument)(w,y,k),onDidChangeTextDocument:(w,y,k)=>et(S,"textDocumentChangeReason")?G(de.onDidChangeDocumentWithReason)(w,y,k):G(de.onDidChangeDocument)(w,y,k),onDidSaveTextDocument:(w,y,k)=>G(de.onDidSaveDocument)(w,y,k),onWillSaveTextDocument:(w,y,k)=>G(ot.getOnWillSaveTextDocumentEvent(S))(w,y,k),get notebookDocuments(){return ke.notebookDocuments.map(w=>w.apiNotebook)},async openNotebookDocument(w,y){let k;if(A.isUri(w))k=w,await ke.openNotebookDocument(w);else if(typeof w=="string")k=A.revive(await ke.createNotebookDocument({viewType:w,content:y}));else throw new Error("Invalid arguments");return ke.getNotebookDocument(k).apiNotebook},onDidSaveNotebookDocument(w,y,k){return G(Wt.onDidSaveNotebookDocument)(w,y,k)},onDidChangeNotebookDocument(w,y,k){return G(Wt.onDidChangeNotebookDocument)(w,y,k)},onWillSaveNotebookDocument(w,y,k){return G(bi.getOnWillSaveNotebookDocumentEvent(S))(w,y,k)},get onDidOpenNotebookDocument(){return G(ke.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return G(ke.onDidCloseNotebookDocument)},registerNotebookSerializer(w,y,k,Ee){return ke.registerNotebookSerializer(S,w,y,k,et(S,"notebookLiveShare")?Ee:void 0)},onDidChangeConfiguration:(w,y,k)=>G(Le.onDidChangeConfiguration)(w,y,k),getConfiguration(w,y){return y=arguments.length===1?void 0:y,Le.getConfiguration(w,y,S)},registerTextDocumentContentProvider(w,y){return Pe.registerTextDocumentContentProvider(w,y)},registerTaskProvider:(w,y)=>(v.report("window.registerTaskProvider",S,"Use the corresponding function on the 'tasks' namespace instead"),Q.registerTaskProvider(S,w,y)),registerFileSystemProvider(w,y,k){return u1(tn.registerFileSystemProvider(S,w,y,k),r.addFileSystemProvider(w,y,k))},get fs(){return r.value},registerFileSearchProvider:(w,y)=>(M(S,"fileSearchProvider"),H.registerFileSearchProviderOld(w,y)),registerTextSearchProvider:(w,y)=>(M(S,"textSearchProvider"),H.registerTextSearchProviderOld(w,y)),registerAITextSearchProvider:(w,y)=>(M(S,"aiTextSearchProvider"),M(S,"textSearchProvider2"),H.registerAITextSearchProvider(w,y)),registerFileSearchProvider2:(w,y)=>(M(S,"fileSearchProvider2"),H.registerFileSearchProvider(w,y)),registerTextSearchProvider2:(w,y)=>(M(S,"textSearchProvider2"),H.registerTextSearchProvider(w,y)),registerRemoteAuthorityResolver:(w,y)=>(M(S,"resolvers"),s.registerRemoteAuthorityResolver(w,y)),registerResourceLabelFormatter:w=>(M(S,"resolvers"),Yc.$registerResourceLabelFormatter(w)),getRemoteExecServer:w=>(M(S,"resolvers"),s.getRemoteExecServer(w)),onDidCreateFiles:(w,y,k)=>G(ai.onDidCreateFile)(w,y,k),onDidDeleteFiles:(w,y,k)=>G(ai.onDidDeleteFile)(w,y,k),onDidRenameFiles:(w,y,k)=>G(ai.onDidRenameFile)(w,y,k),onWillCreateFiles:(w,y,k)=>G(ai.getOnWillCreateFileEvent(S))(w,y,k),onWillDeleteFiles:(w,y,k)=>G(ai.getOnWillDeleteFileEvent(S))(w,y,k),onWillRenameFiles:(w,y,k)=>G(ai.getOnWillRenameFileEvent(S))(w,y,k),openTunnel:w=>(M(S,"tunnels"),g.openTunnel(S,w).then(y=>{if(!y)throw new Error("cannot open tunnel");return y})),get tunnels(){return M(S,"tunnels"),g.getTunnels()},onDidChangeTunnels:(w,y,k)=>(M(S,"tunnels"),G(g.onDidChangeTunnels)(w,y,k)),registerPortAttributesProvider:(w,y)=>(M(S,"portsAttributes"),g.registerPortsAttributesProvider(w,y)),registerTunnelProvider:(w,y)=>(M(S,"tunnelFactory"),g.registerTunnelProvider(w,y)),registerTimelineProvider:(w,y)=>(M(S,"timeline"),Li.registerTimelineProvider(w,y,S.identifier,he.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:w=>(M(S,"workspaceTrust"),n.requestWorkspaceTrust(w)),onDidGrantWorkspaceTrust:(w,y,k)=>G(n.onDidGrantWorkspaceTrust)(w,y,k),registerEditSessionIdentityProvider:(w,y)=>(M(S,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(w,y)),onWillCreateEditSessionIdentity:(w,y,k)=>(M(S,"editSessionIdentityProvider"),G(n.getOnWillCreateEditSessionIdentityEvent(S))(w,y,k)),registerCanonicalUriProvider:(w,y)=>(M(S,"canonicalUriProvider"),n.registerCanonicalUriProvider(w,y)),getCanonicalUri:(w,y,k)=>(M(S,"canonicalUriProvider"),n.provideCanonicalUri(w,y,k)),decode(w,y){return n.decode(w,y)},encode(w,y){return n.encode(w,y)}},NP={get inputBox(){return v.report("scm.inputBox",S,"Use 'SourceControl.inputBox' instead"),qn.getLastInputBox(S)},createSourceControl(w,y,k){return qn.createSourceControl(S,w,y,k)}},LP={createCommentController(w,y){return Jc.createCommentController(S,w,y)}},RP={get activeDebugSession(){return W.activeDebugSession},get activeDebugConsole(){return W.activeDebugConsole},get breakpoints(){return W.breakpoints},get activeStackItem(){return W.activeStackItem},registerDebugVisualizationProvider(w,y){return M(S,"debugVisualization"),W.registerDebugVisualizationProvider(S,w,y)},registerDebugVisualizationTreeProvider(w,y){return M(S,"debugVisualization"),W.registerDebugVisualizationTree(S,w,y)},onDidStartDebugSession(w,y,k){return G(W.onDidStartDebugSession)(w,y,k)},onDidTerminateDebugSession(w,y,k){return G(W.onDidTerminateDebugSession)(w,y,k)},onDidChangeActiveDebugSession(w,y,k){return G(W.onDidChangeActiveDebugSession)(w,y,k)},onDidReceiveDebugSessionCustomEvent(w,y,k){return G(W.onDidReceiveDebugSessionCustomEvent)(w,y,k)},onDidChangeBreakpoints(w,y,k){return G(W.onDidChangeBreakpoints)(w,y,k)},onDidChangeActiveStackItem(w,y,k){return G(W.onDidChangeActiveStackItem)(w,y,k)},registerDebugConfigurationProvider(w,y,k){return W.registerDebugConfigurationProvider(w,y,k||Qg.Initial)},registerDebugAdapterDescriptorFactory(w,y){return W.registerDebugAdapterDescriptorFactory(S,w,y)},registerDebugAdapterTrackerFactory(w,y){return W.registerDebugAdapterTrackerFactory(w,y)},startDebugging(w,y,k){return!k||typeof k=="object"&&"configuration"in k?W.startDebugging(w,y,{parentSession:k}):W.startDebugging(w,y,k||{})},stopDebugging(w){return W.stopDebugging(w)},addBreakpoints(w){return W.addBreakpoints(w)},removeBreakpoints(w){return W.removeBreakpoints(w)},asDebugSourceUri(w,y){return W.asDebugSourceUri(w,y)}},OP={registerTaskProvider:(w,y)=>Q.registerTaskProvider(S,w,y),fetchTasks:w=>Q.fetchTasks(w),executeTask:w=>Q.executeTask(S,w),get taskExecutions(){return Q.taskExecutions},onDidStartTask:(w,y,k)=>G(Q.onDidStartTask)(w,y,k),onDidEndTask:(w,y,k)=>G(Q.onDidEndTask)(w,y,k),onDidStartTaskProcess:(w,y,k)=>G(Q.onDidStartTaskProcess)(w,y,k),onDidEndTaskProcess:(w,y,k)=>G(Q.onDidEndTaskProcess)(w,y,k),onDidStartTaskProblemMatchers:(w,y,k)=>(M(S,"taskProblemMatcherStatus"),G(Q.onDidStartTaskProblemMatchers)(w,y,k)),onDidEndTaskProblemMatchers:(w,y,k)=>(M(S,"taskProblemMatcherStatus"),G(Q.onDidEndTaskProblemMatchers)(w,y,k))},FP={createNotebookController(w,y,k,Ee,at){return _t.createNotebookController(S,w,y,k,Ee,et(S,"notebookMessaging")?at:void 0)},registerNotebookCellStatusBarItemProvider:(w,y)=>ke.registerNotebookCellStatusBarItemProvider(S,w,y),createRendererMessaging(w){return di.createRendererMessaging(S,w)},createNotebookControllerDetectionTask(w){return M(S,"notebookKernelSource"),_t.createNotebookControllerDetectionTask(S,w)},registerKernelSourceActionProvider(w,y){return M(S,"notebookKernelSource"),_t.registerKernelSourceActionProvider(S,w,y)}},jP={t(...w){if(typeof w[0]=="string"){const y=w.shift(),k=!w||typeof w[0]!="object"?w:w[0];return ne.getMessage(S.identifier.value,{message:y,args:k})}return ne.getMessage(S.identifier.value,w[0])},get bundle(){return ne.getBundle(S.identifier.value)},get uri(){return ne.getBundleUri(S.identifier.value)}},UP={transferActiveChat(w){return M(S,"interactive"),T.transferActiveChat(w)}},BP={getRelatedInformation(w,y){return M(S,"aiRelatedInformation"),L.getRelatedInformation(S,w,y)},registerRelatedInformationProvider(w,y){return M(S,"aiRelatedInformation"),L.registerRelatedInformationProvider(S,w,y)},registerEmbeddingVectorProvider(w,y){return M(S,"aiRelatedInformation"),ge.registerEmbeddingVectorProvider(S,w,y)},registerSettingsSearchProvider(w){return M(S,"aiSettingsSearch"),Se.registerSettingsSearchProvider(S,w)}},zP={registerMappedEditsProvider(w,y){return M(S,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(w){return M(S,"mappedEditsProvider"),jh.registerMappedEditsProvider(S,w)},createChatParticipant(w,y){return T.createChatAgent(S,w,y)},createDynamicChatParticipant(w,y,k){return M(S,"chatParticipantPrivate"),T.createDynamicChatAgent(S,w,y,k)},registerChatParticipantDetectionProvider(w){return M(S,"chatParticipantPrivate"),T.registerChatParticipantDetectionProvider(S,w)},registerRelatedFilesProvider(w,y){return M(S,"chatEditing"),T.registerRelatedFilesProvider(S,w,y)},onDidDisposeChatSession:(w,y,k)=>(M(S,"chatParticipantPrivate"),G(T.onDidDisposeChatSession)(w,y,k))},HP={selectChatModels:w=>O.selectLanguageModels(S,w??{}),onDidChangeChatModels:(w,y,k)=>O.onDidChangeProviders(w,y,k),registerChatModelProvider:(w,y,k)=>(M(S,"chatProvider"),O.registerLanguageModel(S,w,y,k)),get embeddingModels(){return M(S,"embeddings"),Vt.embeddingsModels},onDidChangeEmbeddingModels:(w,y,k)=>(M(S,"embeddings"),Vt.onDidChange(w,y,k)),registerEmbeddingsProvider(w,y){return M(S,"embeddings"),Vt.registerEmbeddingsProvider(S,w,y)},async computeEmbeddings(w,y,k){return M(S,"embeddings"),Vt.computeEmbeddings(w,y,k)},registerTool(w,y){return C.registerTool(S,w,y)},invokeTool(w,y,k){return C.invokeTool(S,w,y,k)},get tools(){return C.getTools(S)},fileIsIgnored(w,y){return O.fileIsIgnored(S,w,y)},registerIgnoredFileProvider(w){return O.registerIgnoredFileProvider(S,w)},registerMcpServerDefinitionProvider(w,y){return B.registerMcpConfigurationProvider(S,w,y)}},WP={registerSpeechProvider(w,y){return M(S,"speech"),Ze.registerProvider(S.identifier,w,y)}};return{version:t.version,ai:BP,authentication:Xt,commands:Bh,comments:LP,chat:zP,debug:RP,env:sn,extensions:PP,interactive:UP,l10n:jP,languages:TP,lm:HP,notebooks:FP,scm:NP,speech:WP,tasks:OP,tests:Zn,window:MP,workspace:L4,Breakpoint:Ja,TerminalOutputAnchor:r0,ChatResultFeedbackKind:fu,ChatVariableLevel:J0,ChatCompletionItem:Pj,ChatReferenceDiagnostic:P9,CallHierarchyIncomingCall:n9,CallHierarchyItem:o0,CallHierarchyOutgoingCall:o9,CancellationError:mt,CancellationTokenSource:tt,CandidatePortSource:q1,CodeAction:Gl,CodeActionKind:pt,CodeActionTriggerKind:ql,CodeLens:kf,Color:_a,ColorInformation:Tf,ColorPresentation:Mf,ColorThemeKind:Pn,CommentMode:P0,CommentState:T0,CommentThreadCollapsibleState:nu,CommentThreadState:ou,CommentThreadApplicability:au,CommentThreadFocus:cu,CompletionItem:$f,CompletionItemKind:me,CompletionItemTag:Jl,CompletionList:ja,CompletionTriggerKind:Fa,ConfigurationTarget:Ga,CustomExecution:E0,DebugAdapterExecutable:Ya,DebugAdapterInlineImplementation:iu,DebugAdapterNamedPipeServer:tu,DebugAdapterServer:Qa,DebugConfigurationProviderTriggerKind:Qg,DebugConsoleMode:Wf,DebugVisualization:Ej,DecorationRangeBehavior:$o,Diagnostic:yf,DiagnosticRelatedInformation:zl,DiagnosticSeverity:oi,DiagnosticTag:Io,Disposable:Me,DocumentHighlight:Ef,DocumentHighlightKind:Hl,MultiDocumentHighlight:Sf,DocumentLink:Pf,DocumentSymbol:Vl,EndOfLine:Cr,EnvironmentVariableMutatorType:Ra,EvaluatableExpression:jf,InlineValueText:Uf,InlineValueVariableLookup:Bf,InlineValueEvaluatableExpression:zf,InlineCompletionTriggerKind:ru,InlineCompletionsDisposeReasonKind:Ts,EventEmitter:$,ExtensionKind:No,ExtensionMode:tc,ExternalUriOpenerPriority:U0,FileChangeType:Xa,FileDecoration:L0,FileDecoration2:L0,FileSystemError:Ut,FileType:zi,FilePermission:bn,FoldingRange:D0,FoldingRangeKind:Ms,FunctionBreakpoint:Mo,InlineCompletionItem:d0,InlineCompletionList:f0,Hover:Af,VerboseHover:xf,HoverVerbosityAction:n0,IndentAction:Jy,Location:tr,MarkdownString:Hi,OverviewRulerLane:Gb,ParameterInformation:a0,PortAutoForwardAction:z0,Position:Ne,ProcessExecution:Va,ProgressLocation:$n,QuickInputButtonLocation:N0,QuickInputButtons:lu,Range:Ie,RelativePattern:Za,Selection:ts,SelectionRange:Zl,SemanticTokens:Ka,SemanticTokensBuilder:xj,SemanticTokensEdit:d9,SemanticTokensEdits:Hf,SemanticTokensLegend:M0,ShellExecution:Do,ShellQuoting:x0,SignatureHelp:l0,SignatureHelpTriggerKind:u0,SignatureInformation:c0,SnippetString:ko,SourceBreakpoint:To,StandardTokenType:Tn,StatusBarAlignment:In,SymbolInformation:_l,SymbolKind:st,SymbolTag:Wl,Task:Nf,TaskEventKind:y0,TaskGroup:Kl,TaskPanelKind:A0,TaskRevealKind:b0,TaskScope:Cn,TerminalLink:uj,TerminalQuickFixTerminalCommand:dj,TerminalQuickFixOpener:hj,TerminalLocation:v0,TerminalProfile:fj,TerminalExitReason:g0,TerminalShellExecutionCommandLineConfidence:Xl,TerminalCompletionItem:pj,TerminalCompletionItemKind:w0,TerminalCompletionList:gj,TerminalShellType:m0,TextDocumentSaveReason:Ba,TextEdit:kn,SnippetTextEdit:s0,TextEditorCursorStyle:xr,TextEditorChangeKind:Ha,TextEditorLineNumbersStyle:$r,TextEditorRevealType:Df,TextEditorSelectionChangeKind:za,SyntaxTokenType:Wa,TextDocumentChangeReason:Ql,ThemeColor:eu,ThemeIcon:hi,TreeItem:Lf,TreeItemCheckboxState:is,TreeItemCollapsibleState:Po,TypeHierarchyItem:H0,UIKind:_u,Uri:A,ViewColumn:Yl,WorkspaceEdit:So,DocumentPasteTriggerKind:I0,DocumentDropEdit:k0,DocumentDropOrPasteEditKind:Dn,DocumentPasteEdit:wj,InlayHint:Cf,InlayHintLabelPart:If,InlayHintKind:h0,RemoteAuthorityResolverError:La,ResolvedAuthority:cj,ManagedResolvedAuthority:wf,SourceControlInputBoxValidationType:p0,ExtensionRuntime:Yf,TimelineItem:F0,NotebookRange:rs,NotebookCellKind:Lo,NotebookCellExecutionState:R0,NotebookCellData:Vf,NotebookData:f9,NotebookRendererScript:g9,NotebookCellStatusBarAlignment:Gf,NotebookEditorRevealType:Zf,NotebookCellOutput:qf,NotebookCellOutputItem:p9,CellErrorStackFrame:Sj,NotebookCellStatusBarItem:kj,NotebookControllerAffinity:O0,NotebookControllerAffinity2:Jf,NotebookEdit:bf,NotebookKernelSourceAction:Ij,NotebookVariablesRequestKind:hu,PortAttributes:$j,LinkedEditingRanges:Cj,TestResultState:j0,TestRunRequest:Qf,TestMessage:Xf,TestMessageStackFrame:Dj,TestTag:du,TestRunProfileKind:ic,TextSearchCompleteMessageType:Qp,DataTransfer:qa,DataTransferItem:Rf,TestCoverageCount:Kf,FileCoverage:tp,StatementCoverage:v9,BranchCoverage:w9,DeclarationCoverage:b9,WorkspaceTrustState:B0,LanguageStatusSeverity:Oa,QuickPickItemKind:uu,InputBoxValidationSeverity:ec,TabInputText:W0,TabInputTextDiff:ip,TabInputTextMerge:y9,TabInputCustom:_0,TabInputNotebook:V0,TabInputNotebookDiff:q0,TabInputWebview:A9,TabInputTerminal:x9,TabInputInteractiveWindow:E9,TabInputChat:S9,TabInputTextMultiDiff:k9,TelemetryTrustedValue:Zv,LogLevel:ie,EditSessionIdentityMatch:Yy,InteractiveSessionVoteDirection:G0,ChatCopyKind:Z0,ChatEditingSessionActionOutcome:Ro,InteractiveEditorResponseFeedbackKind:Q0,DebugStackFrame:u9,DebugThread:h9,RelatedInformationType:nw,SpeechToTextStatus:aw,TextToSpeechStatus:cw,PartialAcceptTriggerKind:Co,InlineCompletionEndOfLifeReasonKind:Ua,KeywordRecognitionStatus:lw,ChatImageMimeType:Ls,ChatResponseMarkdownPart:rp,ChatResponseFileTreePart:np,ChatResponseAnchorPart:gu,ChatResponseProgressPart:X0,ChatResponseProgressPart2:op,ChatResponseReferencePart:Oo,ChatResponseReferencePart2:Oo,ChatResponseCodeCitationPart:lp,ChatResponseCodeblockUriPart:cp,ChatResponseWarningPart:mu,ChatResponseTextEditPart:vu,ChatResponseNotebookEditPart:hp,ChatResponseMarkdownWithVulnerabilitiesPart:pu,ChatResponseCommandButtonPart:ap,ChatResponseConfirmationPart:sp,ChatResponseMovePart:up,ChatResponseExtensionsPart:K0,ChatPrepareToolInvocationPart:wu,ChatResponseReferencePartStatusKind:tw,ChatRequestTurn:ew,ChatRequestTurn2:ew,ChatResponseTurn:I9,ChatLocation:Dr,ChatRequestEditorData:C9,ChatRequestNotebookData:$9,ChatReferenceBinaryData:D9,ChatRequestEditedFileEventKind:Y0,LanguageModelChatMessageRole:Wi,LanguageModelChatMessage:T9,LanguageModelChatMessage2:M9,LanguageModelToolResultPart:dp,LanguageModelToolResultPart2:iw,LanguageModelTextPart:It,LanguageModelToolCallPart:Fo,LanguageModelError:Rs,LanguageModelToolResult:fp,LanguageModelToolResult2:N9,LanguageModelDataPart:Ns,ExtendedLanguageModelToolResult:Mj,PreparedTerminalToolInvocation:Tj,LanguageModelChatToolMode:sw,LanguageModelPromptTsxPart:ss,NewSymbolName:yj,NewSymbolNameTag:$0,NewSymbolNameTriggerKind:su,ExcludeSettingOptions:js,TextSearchContext2:Yp,TextSearchMatch2:Fs,AISearchKeyword:qw,TextSearchCompleteMessageTypeNew:Qp,ChatErrorLevel:rw,McpHttpServerDefinition:Lj,McpStdioServerDefinition:Nj,SettingsSearchResultKind:ow}}}var Am,xm=class{constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.i=o,this.j=a,this.a=new Map,this.b=[]}async install(){this.k(),St("code/extHost/willWaitForConfig");const t=await this.g.getConfigProvider();St("code/extHost/didWaitForConfig");const i=await this.h.getExtensionPathIndex();this.register(new Oq(this.c,i,this.d,t,this.j)),this.register(this.f.createInstance(NA)),this.i.remote.isRemote&&this.register(this.f.createInstance(LA,i,this.i.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};xm=__decorate([__param(2,wl),__param(3,hr),__param(4,Ws),__param(5,At),__param(6,Ce)],xm);var NA=class{static{Am=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Am.a.size){const i=ln(this.c(t.environment.appRoot.fsPath)),r="[a-z0-9_.-]",s=`@${r}+\\/${r}+|${r}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,r,s,n]=i,o=Am.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),r+o+n}c(t){return t.replace(/\\/g,"/")}};NA=Am=__decorate([__param(0,At)],NA);var Oq=class{constructor(e,t,i,r,s){this.c=e,this.d=t,this.e=i,this.f=r,this.g=s,this.nodeModuleName="vscode",this.a=new ks}load(e,t){const i=this.d.findSubstr(t);if(i){let r=this.a.get(i.identifier);return r||(r=this.c(i,this.e,this.f),this.a.set(i.identifier,r)),r}if(!this.b){let r="";this.d.forEach((s,n)=>r+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${r}`),this.b=this.c(JF,this.e,this.f)}return this.b}},LA=class{constructor(t,i,r){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=r.getProxy(Y.MainThreadTelemetry);const s=r.getProxy(Y.MainThreadWindow);this.c=(n,o)=>{const a=A.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,i,r){const s=this.e.findSubstr(i);return s&&(this.a=s.identifier.value,this.h()),this.b=r(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};LA=__decorate([__param(2,De)],LA);import{LogLevel as ta,createHttpPatch as dD,createProxyResolver as Fq,createTlsPatch as jq,createNetPatch as Uq,loadSystemCertificates as Bq}from"@vscode/proxy-agent";import{createRequire as zq}from"node:module";import{parse as fD}from"url";import{spawn as Hq}from"child_process";import{userInfo as Wq}from"os";import*as pD from"os";var gD=/^\d+$/,_q=/^Microsoft.PowerShell_.*/,Vq=/^Microsoft.PowerShellPreview_.*/,mD;(function(e){e[e.x64=0]="x64",e[e.x86=1]="x86",e[e.ARM=2]="ARM"})(mD||(mD={}));var wh;switch(process.arch){case"ia32":wh=1;break;case"arm":case"arm64":wh=2;break;default:wh=0;break}var Fc;process.env.PROCESSOR_ARCHITEW6432?Fc=process.env.PROCESSOR_ARCHITEW6432==="ARM64"?2:0:process.env.PROCESSOR_ARCHITECTURE==="ARM64"?Fc=2:process.env.PROCESSOR_ARCHITECTURE==="X86"?Fc=1:Fc=0;var bh=class{constructor(e,t,i){this.exePath=e,this.displayName=t,this.a=i}async exists(){return this.a===void 0&&(this.a=await xi.existsFile(this.exePath)),this.a}};function qq({useAlternateBitness:e=!1}={}){return e?wh===0?process.env["ProgramFiles(x86)"]||null:Fc===0&&process.env.ProgramW6432||null:process.env.ProgramFiles||null}async function Em({useAlternateBitness:e=!1,findPreview:t=!1}={}){const i=qq({useAlternateBitness:e});if(!i)return null;const r=He(i,"PowerShell");if(!await xi.existsDirectory(r))return null;let s=-1,n=null;for(const c of await Qe.readdir(r)){let l=-1;if(t){const h=c.indexOf("-");if(h<0)continue;const d=c.substring(0,h);if(!gD.test(d)||c.substring(h+1)!=="preview")continue;l=parseInt(d,10)}else{if(!gD.test(c))continue;l=parseInt(c,10)}if(l<=s)continue;const u=He(r,c,"pwsh.exe");await xi.existsFile(u)&&(n=u,s=l)}if(!n)return null;const o=i.includes("x86")?" (x86)":"",a=t?" Preview":"";return new bh(n,`PowerShell${a}${o}`,!0)}async function vD({findPreview:e}={}){if(!process.env.LOCALAPPDATA)return null;const t=He(process.env.LOCALAPPDATA,"Microsoft","WindowsApps");if(!await xi.existsDirectory(t))return null;const{pwshMsixDirRegex:i,pwshMsixName:r}=e?{pwshMsixDirRegex:Vq,pwshMsixName:"PowerShell Preview (Store)"}:{pwshMsixDirRegex:_q,pwshMsixName:"PowerShell (Store)"};for(const s of await Qe.readdir(t))if(i.test(s)){const n=He(t,s,"pwsh.exe");return new bh(n,r)}return null}function Gq(){const e=He(pD.homedir(),".dotnet","tools","pwsh.exe");return new bh(e,".NET Core PowerShell Global Tool")}function Zq(){const e=He(pD.homedir(),"scoop","apps"),t=He(e,"pwsh","current","pwsh.exe");return new bh(t,"PowerShell (Scoop)")}function Jq(){const e=He(process.env.windir,wh===1&&Fc!==1?"SysNative":"System32","WindowsPowerShell","v1.0","powershell.exe");return new bh(e,"Windows PowerShell",!0)}async function*Yq(){let e=await Em();e&&(yield e),e=await Em({useAlternateBitness:!0}),e&&(yield e),e=await vD(),e&&(yield e),e=Gq(),e&&(yield e),e=await Em({findPreview:!0}),e&&(yield e),e=await vD({findPreview:!0}),e&&(yield e),e=await Em({useAlternateBitness:!0,findPreview:!0}),e&&(yield e),e=await Zq(),e&&(yield e),e=Jq(),e&&(yield e)}async function*Qq(){for await(const e of Yq())await e.exists()&&(yield e)}async function Xq(){for await(const e of Qq())return e;return null}async function Kq(e,t){return e===1?je?tG():X7(t):eG(e,t)}var RA=null;function eG(e,t){if(Et&&e===2||Ft&&e===3)return"/bin/bash";if(!RA){let i;if(je)i="/bin/bash";else{if(i=t.SHELL,!i)try{i=Wq().shell}catch{}i||(i="sh"),i==="/bin/false"&&(i="/bin/bash")}RA=i}return RA}var OA=null;async function tG(){return OA||(OA=(await Xq()).exePath),OA}import"assert";var Kie=O4(F4(),1),ere={o:p(1850,null),e:p(1851,null),t:p(1852,null),m:p(1853,null)},tre={chat:{type:"subcommand",description:"Pass in a prompt to run in a chat session in the current working directory.",options:{_:{type:"string[]",description:p(1854,null)},mode:{type:"string",cat:"o",alias:"m",args:"mode",description:p(1855,null)},"add-file":{type:"string[]",cat:"o",alias:"a",args:"path",description:p(1856,null)},maximize:{type:"boolean",cat:"o",description:p(1857,null)},"reuse-window":{type:"boolean",cat:"o",alias:"r",description:p(1858,null)},"new-window":{type:"boolean",cat:"o",alias:"n",description:p(1859,null)},help:{type:"boolean",alias:"h",description:p(1860,null)}}},"serve-web":{type:"subcommand",description:"Run a server that displays the editor UI in browsers.",options:{"cli-data-dir":{type:"string",args:"dir",description:p(1861,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"}}},tunnel:{type:"subcommand",description:"Make the current machine accessible from vscode.dev or other machines through a secure tunnel.",options:{"cli-data-dir":{type:"string",args:"dir",description:p(1862,null)},"disable-telemetry":{type:"boolean"},"telemetry-level":{type:"string"},user:{type:"subcommand",options:{login:{type:"subcommand",options:{provider:{type:"string"},"access-token":{type:"string"}}}}}}},diff:{type:"boolean",cat:"o",alias:"d",args:["file","file"],description:p(1863,null)},merge:{type:"boolean",cat:"o",alias:"m",args:["path1","path2","base","result"],description:p(1864,null)},add:{type:"boolean",cat:"o",alias:"a",args:"folder",description:p(1865,null)},remove:{type:"boolean",cat:"o",args:"folder",description:p(1866,null)},goto:{type:"boolean",cat:"o",alias:"g",args:"file:line[:character]",description:p(1867,null)},"new-window":{type:"boolean",cat:"o",alias:"n",description:p(1868,null)},"reuse-window":{type:"boolean",cat:"o",alias:"r",description:p(1869,null)},wait:{type:"boolean",cat:"o",alias:"w",description:p(1870,null)},waitMarkerFilePath:{type:"string"},locale:{type:"string",cat:"o",args:"locale",description:p(1871,null)},"user-data-dir":{type:"string",cat:"o",args:"dir",description:p(1872,null)},profile:{type:"string",cat:"o",args:"profileName",description:p(1873,null)},help:{type:"boolean",cat:"o",alias:"h",description:p(1874,null)},"extensions-dir":{type:"string",deprecates:["extensionHomePath"],cat:"e",args:"dir",description:p(1875,null)},"extensions-download-dir":{type:"string"},"builtin-extensions-dir":{type:"string"},"list-extensions":{type:"boolean",cat:"e",description:p(1876,null)},"show-versions":{type:"boolean",cat:"e",description:p(1877,null)},category:{type:"string",allowEmptyValue:!0,cat:"e",description:p(1878,null),args:"category"},"install-extension":{type:"string[]",cat:"e",args:"ext-id | path",description:p(1879,null)},"pre-release":{type:"boolean",cat:"e",description:p(1880,null)},"uninstall-extension":{type:"string[]",cat:"e",args:"ext-id",description:p(1881,null)},"update-extensions":{type:"boolean",cat:"e",description:p(1882,null)},"enable-proposed-api":{type:"string[]",allowEmptyValue:!0,cat:"e",args:"ext-id",description:p(1883,null)},"add-mcp":{type:"string[]",cat:"m",args:"json",description:p(1884,null)},version:{type:"boolean",cat:"t",alias:"v",description:p(1885,null)},verbose:{type:"boolean",cat:"t",global:!0,description:p(1886,null)},log:{type:"string[]",cat:"t",args:"level",global:!0,description:p(1887,null)},status:{type:"boolean",alias:"s",cat:"t",description:p(1888,null)},"prof-startup":{type:"boolean",cat:"t",description:p(1889,null)},"prof-append-timers":{type:"string"},"prof-duration-markers":{type:"string[]"},"prof-duration-markers-file":{type:"string"},"no-cached-data":{type:"boolean"},"prof-startup-prefix":{type:"string"},"prof-v8-extensions":{type:"boolean"},"disable-extensions":{type:"boolean",deprecates:["disableExtensions"],cat:"t",description:p(1890,null)},"disable-extension":{type:"string[]",cat:"t",args:"ext-id",description:p(1891,null)},sync:{type:"string",cat:"t",description:p(1892,null),args:["on | off"]},"inspect-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugPluginHost"],args:"port",cat:"t",description:p(1893,null)},"inspect-brk-extensions":{type:"string",allowEmptyValue:!0,deprecates:["debugBrkPluginHost"],args:"port",cat:"t",description:p(1894,null)},"disable-lcd-text":{type:"boolean",cat:"t",description:p(1895,null)},"disable-gpu":{type:"boolean",cat:"t",description:p(1896,null)},"disable-chromium-sandbox":{type:"boolean",cat:"t",description:p(1897,null)},sandbox:{type:"boolean"},"locate-shell-integration-path":{type:"string",cat:"t",args:["shell"],description:p(1898,null)},telemetry:{type:"boolean",cat:"t",description:p(1899,null)},remote:{type:"string",allowEmptyValue:!0},"folder-uri":{type:"string[]",cat:"o",args:"uri"},"file-uri":{type:"string[]",cat:"o",args:"uri"},"locate-extension":{type:"string[]"},extensionDevelopmentPath:{type:"string[]"},extensionDevelopmentKind:{type:"string[]"},extensionTestsPath:{type:"string"},extensionEnvironment:{type:"string"},debugId:{type:"string"},debugRenderer:{type:"boolean"},"inspect-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-brk-ptyhost":{type:"string",allowEmptyValue:!0},"inspect-search":{type:"string",deprecates:["debugSearch"],allowEmptyValue:!0},"inspect-brk-search":{type:"string",deprecates:["debugBrkSearch"],allowEmptyValue:!0},"inspect-sharedprocess":{type:"string",allowEmptyValue:!0},"inspect-brk-sharedprocess":{type:"string",allowEmptyValue:!0},"export-default-configuration":{type:"string"},"install-source":{type:"string"},"enable-smoke-test-driver":{type:"boolean"},logExtensionHostCommunication:{type:"boolean"},"skip-release-notes":{type:"boolean"},"skip-welcome":{type:"boolean"},"disable-telemetry":{type:"boolean"},"disable-updates":{type:"boolean"},"use-inmemory-secretstorage":{type:"boolean",deprecates:["disable-keytar"]},"password-store":{type:"string"},"disable-workspace-trust":{type:"boolean"},"disable-crash-reporter":{type:"boolean"},"crash-reporter-directory":{type:"string"},"crash-reporter-id":{type:"string"},"skip-add-to-recently-opened":{type:"boolean"},"open-url":{type:"boolean"},"file-write":{type:"boolean"},"file-chmod":{type:"boolean"},"install-builtin-extension":{type:"string[]"},force:{type:"boolean"},"do-not-sync":{type:"boolean"},"do-not-include-pack-dependencies":{type:"boolean"},trace:{type:"boolean"},"trace-memory-infra":{type:"boolean"},"trace-category-filter":{type:"string"},"trace-options":{type:"string"},"preserve-env":{type:"boolean"},"force-user-env":{type:"boolean"},"force-disable-user-env":{type:"boolean"},"open-devtools":{type:"boolean"},"disable-gpu-sandbox":{type:"boolean"},logsPath:{type:"string"},"__enable-file-policy":{type:"boolean"},editSessionId:{type:"string"},continueOn:{type:"string"},"enable-coi":{type:"boolean"},"unresponsive-sample-interval":{type:"string"},"unresponsive-sample-period":{type:"string"},"enable-rdp-display-tracking":{type:"boolean"},"disable-layout-restore":{type:"boolean"},"startup-experiment-group":{type:"string",cat:"t",args:"control|maximizedChat|splitEmptyEditorChat|splitWelcomeChat",description:p(1900,null)},"no-proxy-server":{type:"boolean"},"no-sandbox":{type:"boolean",alias:"sandbox"},"proxy-server":{type:"string"},"proxy-bypass-list":{type:"string"},"proxy-pac-url":{type:"string"},"js-flags":{type:"string"},inspect:{type:"string",allowEmptyValue:!0},"inspect-brk":{type:"string",allowEmptyValue:!0},nolazy:{type:"boolean"},"force-device-scale-factor":{type:"string"},"force-renderer-accessibility":{type:"boolean"},"ignore-certificate-errors":{type:"boolean"},"allow-insecure-localhost":{type:"boolean"},"log-net-log":{type:"string"},vmodule:{type:"string"},_urls:{type:"string[]"},"disable-dev-shm-usage":{type:"boolean"},"profile-temp":{type:"boolean"},"ozone-platform":{type:"string"},"enable-tracing":{type:"string"},"trace-startup-format":{type:"string"},"trace-startup-file":{type:"string"},"trace-startup-duration":{type:"string"},"xdg-portal-required-version":{type:"string"},_:{type:"string[]"}};function wD(e){return e.VSCODE_CLI==="1"}var FA=void 0;async function iG(e,t,i,r){return i["force-disable-user-env"]?(t.trace("resolveShellEnv(): skipped (--force-disable-user-env)"),{}):je?(t.trace("resolveShellEnv(): skipped (Windows)"),{}):wD(r)&&!i["force-user-env"]?(t.trace("resolveShellEnv(): skipped (VSCODE_CLI is set)"),{}):(wD(r)?t.trace("resolveShellEnv(): running (--force-user-env)"):t.trace("resolveShellEnv(): running (macOS/Linux)"),FA||(FA=fn.withAsyncBody(async(s,n)=>{const o=new tt;let a=1e4;const c=e.getValue("application.shellEnvironmentResolutionTimeout");typeof c=="number"&&(a=AR(c,1,120)*1e3);const l=setTimeout(()=>{o.dispose(!0),n(new Error(p(2253,null)))},a);try{s(await rG(t,o.token))}catch(u){!yi(u)&&!o.token.isCancellationRequested?n(new Error(p(2254,null,Zr(u)))):s({})}finally{clearTimeout(l),o.dispose()}})),FA)}async function rG(e,t){const i=process.env.ELECTRON_RUN_AS_NODE;e.trace("getUnixShellEnvironment#runAsNode",i);const r=process.env.ELECTRON_NO_ATTACH_CONSOLE;e.trace("getUnixShellEnvironment#noAttach",r);const s=kt().replace(/-/g,"").substr(0,12),n=new RegExp(s+"({.*})"+s),o={...process.env,ELECTRON_RUN_AS_NODE:"1",ELECTRON_NO_ATTACH_CONSOLE:"1",VSCODE_RESOLVING_ENVIRONMENT:"1"};e.trace("getUnixShellEnvironment#env",o);const a=await Kq(Xn,o);return e.trace("getUnixShellEnvironment#shell",a),new Promise((c,l)=>{if(t.isCancellationRequested)return l(new mt);const u=dt(a);let h,d;const f="";/^(?:pwsh|powershell)(?:-preview)?$/.test(u)?(h=`& '${process.execPath}' ${f} -p '''${s}'' + JSON.stringify(process.env) + ''${s}'''`,d=["-Login","-Command"]):u==="nu"?(h=`^'${process.execPath}' ${f} -p '"${s}" + JSON.stringify(process.env) + "${s}"'`,d=["-i","-l","-c"]):u==="xonsh"?(h=`import os, json; print("${s}", json.dumps(dict(os.environ)), "${s}")`,d=["-i","-l","-c"]):(h=`'${process.execPath}' ${f} -p '"${s}" + JSON.stringify(process.env) + "${s}"'`,u==="tcsh"||u==="csh"?d=["-ic"]:d=["-i","-l","-c"]),e.trace("getUnixShellEnvironment#spawn",JSON.stringify(d),h);const g=Hq(a,[...d,h],{detached:!0,stdio:["ignore","pipe","pipe"],env:o});t.onCancellationRequested(()=>(g.kill(),l(new mt))),g.on("error",x=>{e.error("getUnixShellEnvironment#errorChildProcess",Zr(x)),l(x)});const v=[];g.stdout.on("data",x=>v.push(x));const b=[];g.stderr.on("data",x=>b.push(x)),g.on("close",(x,E)=>{const I=Buffer.concat(v).toString("utf8");e.trace("getUnixShellEnvironment#raw",I);const U=Buffer.concat(b).toString("utf8");if(U.trim()&&e.trace("getUnixShellEnvironment#stderr",U),x||E)return l(new Error(p(2255,null,x,E)));const j=n.exec(I),ee=j?j[1]:"{}";try{const O=JSON.parse(ee);i?O.ELECTRON_RUN_AS_NODE=i:delete O.ELECTRON_RUN_AS_NODE,r?O.ELECTRON_NO_ATTACH_CONSOLE=r:delete O.ELECTRON_NO_ATTACH_CONSOLE,delete O.VSCODE_RESOLVING_ENVIRONMENT,delete O.XDG_RUNTIME_DIR,e.trace("getUnixShellEnvironment#result",O),c(O)}catch(O){e.error("getUnixShellEnvironment#errorCaught",Zr(O)),l(O)}})})}var ire=V("requestService"),sG=class{constructor(e){this.b=e}toJSON(){if(!this.a){const e=Object.create(null);for(const t in this.b)t.toLowerCase()==="authorization"||t.toLowerCase()==="proxy-authorization"?e[t]="*****":e[t]=this.b[t];this.a=e}return this.a}},nG=class extends te{constructor(e){super(),this.b=e,this.a=0}async c(e,t){const i=`#${++this.a}: ${e.url}`;this.b.trace(`${i} - begin`,e.type,new sG(e.headers??{}));try{const r=await t();return this.b.trace(`${i} - end`,e.type,r.res.statusCode,r.res.headers),r}catch(r){throw this.b.error(`${i} - error`,e.type,B4(r)),r}}},jA=[],bD=void 0,yD=void 0;function oG(e=!0,t=!0){if(bD===e&&yD===t)return;bD=e,yD=t;const i=Yt.as(bo.Configuration),r=jA;jA=[{id:"http",order:15,title:p(2235,null),type:"object",scope:2,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:t,markdownDescription:p(2236,null),restricted:!0}}},{id:"http",order:15,title:p(2237,null),type:"object",scope:1,properties:{"http.electronFetch":{type:"boolean",default:!1,description:p(2238,null),restricted:!0}}},{id:"http",order:15,title:p(2239,null),type:"object",scope:e?1:2,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:p(2240,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:p(2241,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:p(2242,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:p(2243,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:p(2244,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[p(2245,null),p(2246,null),p(2247,null),p(2248,null)],default:"override",markdownDescription:p(2249,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:p(2250,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:p(2251,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:p(2252,null,"`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}}],i.updateConfigurations({add:jA,remove:r})}oG();import{parse as AD}from"url";function aG(e,t){return e.protocol==="http:"?t.HTTP_PROXY||t.http_proxy||null:e.protocol==="https:"&&(t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy)||null}async function cG(e,t,i={}){const r=AD(e),s=i.proxyUrl||aG(r,t);if(!s)return null;const n=AD(s);if(!/^https?:$/.test(n.protocol||""))return null;const o={host:n.hostname||"",port:(n.port?+n.port:0)||(n.protocol==="https"?443:80),auth:n.auth,rejectUnauthorized:Q4(i.strictSSL)?i.strictSSL:!0};if(r.protocol==="http:"){const{default:a}=await import("http-proxy-agent");return new a.HttpProxyAgent(s,o)}else{const{default:a}=await import("https-proxy-agent");return new a.HttpsProxyAgent(s,o)}}import{createGunzip as lG}from"zlib";var xD=class extends nG{constructor(t,i,r,s){super(s),this.m=t,this.n=i,this.r=r,this.s(),this.B(i.onDidChangeConfiguration(n=>{n.affectsConfiguration("http")&&this.s()}))}s(){this.f=this.t("http.proxy"),this.g=!!this.t("http.proxyStrictSSL"),this.h=this.t("http.proxyAuthorization")}async request(t,i){const{f:r,g:s}=this;let n;try{n=await iG(this.n,this.b,this.r.args,process.env)}catch(c){this.j||(this.j=!0,this.b.error("resolving shell environment failed",B4(c)))}const o={...process.env,...n},a=t.agent?t.agent:await cG(t.url||"",o,{proxyUrl:r,strictSSL:s});return t.agent=a,t.strictSSL=s,this.h&&(t.headers={...t.headers||{},"Proxy-Authorization":this.h}),this.c(t,()=>SD(t,i))}async resolveProxy(t){}async lookupAuthorization(t){}async lookupKerberosAuthorization(t){try{const i=this.t("http.proxyKerberosServicePrincipal");return"Negotiate "+await ED(t,i,this.b,"RequestService#lookupKerberosAuthorization")}catch(i){this.b.debug("RequestService#lookupKerberosAuthorization Kerberos authentication failed",i);return}}async loadCertificates(){return(await import("@vscode/proxy-agent")).loadSystemCertificates({log:this.b})}t(t){if(this.m==="remote")return this.n.getValue(t);const i=this.n.inspect(t);return i.userLocalValue||i.defaultValue}};xD=__decorate([__param(1,Ds),__param(2,iz),__param(3,Ce)],xD);async function ED(e,t,i,r){const s=await import("kerberos"),n=s.default||s,o=new URL(e),a=t||(process.platform==="win32"?`HTTP/${o.hostname}`:`HTTP@${o.hostname}`);return i.debug(`${r} Kerberos authentication lookup`,`proxyURL:${o}`,`spn:${a}`),(await n.initializeClient(a)).step("")}async function uG(e){return(fD(e.url).protocol==="https:"?await import("https"):await import("http")).request}async function SD(e,t){return fn.withAsyncBody(async(i,r)=>{const s=fD(e.url),n=e.getRawRequest?e.getRawRequest(e):await uG(e),o={hostname:s.hostname,port:s.port?parseInt(s.port):s.protocol==="https:"?443:80,protocol:s.protocol,path:s.path,method:e.type||"GET",headers:e.headers,agent:e.agent,rejectUnauthorized:Q4(e.strictSSL)?e.strictSSL:!0};e.user&&e.password&&(o.auth=e.user+":"+e.password),e.disableCache&&(o.cache="no-store");const a=n(o,c=>{const l=or(e.followRedirects)?e.followRedirects:3;if(c.statusCode&&c.statusCode>=300&&c.statusCode<400&&l>0&&c.headers.location)SD({...e,url:c.headers.location,followRedirects:l-1},t).then(i,r);else{let u=c;!e.isChromiumNetwork&&c.headers["content-encoding"]==="gzip"&&(u=c.pipe(lG())),i({res:c,stream:jM(u)})}});if(a.on("error",r),e.timeout)if(e.isChromiumNetwork){const c=setTimeout(()=>{a.abort(),r(new Error(`Request timeout after ${e.timeout}ms`))},e.timeout);a.on("response",()=>clearTimeout(c)),a.on("error",()=>clearTimeout(c)),a.on("abort",()=>clearTimeout(c))}else a.setTimeout(e.timeout);e.isChromiumNetwork&&a.removeHeader("Content-Length"),e.data&&typeof e.data=="string"&&a.write(e.data),a.end(),t.onCancellationRequested(()=>{a.abort(),r(new mt)})})}import*as Sm from"@vscode/proxy-agent";var jc=zq(import.meta.url),kD=jc("http"),km=jc("https"),ID=jc("tls"),CD=jc("net"),$D=!1,DD=!1;function hG(e,t,i,r,s,n,o){const a=n.remote.isRemote,c=n.environment.useHostProxy??!a,l=c,u=c,h=()=>!a||t.getConfiguration("http").get("useLocalProxyConfiguration",c),d={resolveProxy:x=>e.resolveProxy(x),lookupProxyAuthorization:bG.bind(void 0,e,r,s,t,{},{},n.remote.isRemote,l),getProxyURL:()=>Js(t,a,"http.proxy"),getProxySupport:()=>Js(t,a,"http.proxySupport")||"off",getNoProxyConfig:()=>Js(t,a,"http.noProxy")||[],isAdditionalFetchSupportEnabled:()=>Js(t,a,"http.fetchAdditionalSupport",!0),addCertificatesV1:()=>mG(t,a),addCertificatesV2:()=>vG(t,a),log:r,getLogLevel:()=>{const x=r.getLevel();switch(x){case ie.Trace:return ta.Trace;case ie.Debug:return ta.Debug;case ie.Info:return ta.Info;case ie.Warning:return ta.Warning;case ie.Error:return ta.Error;case ie.Off:return ta.Off;default:return E(x)}function E(I){return r.error("Unknown log level",I),ta.Debug}},proxyResolveTelemetry:()=>{},isUseHostProxyEnabled:h,loadAdditionalCertificates:async()=>{const x=[];if(n.remote.isRemote&&x.push(Bq({log:r})),u){r.trace("ProxyResolver#loadAdditionalCertificates: Loading certificates from main process");const E=e.loadCertificates();E.then(I=>r.trace("ProxyResolver#loadAdditionalCertificates: Loaded certificates from main process",I.length)),x.push(E)}return n.environment.extensionTestsLocationURI&&km.globalAgent.testCertificates?.length&&(r.trace("ProxyResolver#loadAdditionalCertificates: Loading test certificates"),x.push(Promise.resolve(km.globalAgent.testCertificates))),(await Promise.all(x)).flat()},env:process.env},{resolveProxyWithRequest:f,resolveProxyURL:g}=Fq(d),v=Sm.default||Sm;v.resolveProxyURL=g,fG(d,t,s,n,g,o);const b=gG(d,f);return wG(i,b)}var dG=["content-length","host","trailer","te","upgrade","cookie2","keep-alive","transfer-encoding","set-cookie"];function fG(e,t,i,r,s,n){if(!globalThis.__vscodeOriginalFetch){const o=globalThis.fetch;globalThis.__vscodeOriginalFetch=o;const a=Sm.createFetchPatch(e,o,s);globalThis.__vscodePatchedFetch=a;let c=!1;r.remote.isRemote||(c=t.getConfiguration("http").get("electronFetch",DD),n.add(t.onDidChangeConfiguration(l=>{l.affectsConfiguration("http.electronFetch")&&(c=t.getConfiguration("http").get("electronFetch",DD))}))),globalThis.fetch=async function(u,h){function d(j){return h&&j in h?h[j]:typeof u=="object"&&"cache"in u?u[j]:void 0}const f=typeof u=="string"?u:"cache"in u?u.url:u.toString(),g=f.startsWith("data:");g&&Uc(i,"data");const v=f.startsWith("blob:");v&&Uc(i,"blob");const b=d("redirect")==="manual";b&&Uc(i,"manualRedirect");const x=d("integrity");if(x&&Uc(i,"integrity"),!c||g||v||b||x){const j=await a(u,h);return PD(i,j,f),j}if(h?.headers){const j=new Headers(h.headers);for(const ee of dG)j.delete(ee);h={...h,headers:j}}const E=u instanceof URL?u.toString():u,U=await jc("electron").net.fetch(E,h);return PD(i,U,f),U}}}function PD(e,t,i){const r=t.url;Object.defineProperty(t,"url",{get(){return Uc(e,"url"),r||i}});const s=t.type;Object.defineProperty(t,"type",{get(){return Uc(e,"typeProperty"),s!=="default"?s:"basic"}})}var TD={url:0,typeProperty:0,data:0,blob:0,integrity:0,manualRedirect:0},Im,pG=!1;function Uc(e,t){pG&&!TD[t]++&&(Im&&clearTimeout(Im),Im=setTimeout(()=>{e.$publicLog2("fetchFeatureUse",TD)},1e4),Im.unref?.())}function gG(e,t){function i(r,s){const n=r.default||r;return n.__vscodeOriginal=Object.assign({},n),Object.assign(n,s)}return{http:i(kD,dD(e,kD,t)),https:i(km,dD(e,km,t)),net:i(CD,Uq(e,CD)),tls:i(ID,jq(e,ID))}}function mG(e,t){return!Js(e,t,"http.experimental.systemCertificatesV2",$D)&&!!Js(e,t,"http.systemCertificates")}function vG(e,t){return!!Js(e,t,"http.experimental.systemCertificatesV2",$D)&&!!Js(e,t,"http.systemCertificates")}var MD=new Map;function wG(e,t){return e.getExtensionPathIndex().then(i=>{const r=jc("module"),s=r._load;r._load=function(o,a,c){if(o==="net")return t.net;if(o==="tls")return t.tls;if(o!=="http"&&o!=="https"&&o!=="undici")return s.apply(this,arguments);const l=i.findSubstr(A.file(a.filename));let u=MD.get(l);if(u||MD.set(l,u={}),!u[o])if(o==="undici"){const h=s.apply(this,arguments);Sm.patchUndici(h),u[o]=h}else{const h=t[o];u[o]={...h}}return u[o]}})}async function bG(e,t,i,r,s,n,o,a,c,l,u){const h=s[c];l&&(s[c]=l),t.trace("ProxyResolver#lookupProxyAuthorization callback",`proxyURL:${c}`,`proxyAuthenticate:${l}`,`proxyAuthenticateCache:${h}`);const d=l||h,f=Array.isArray(d)?d:typeof d=="string"?[d]:[];if(AG(i,f,o),f.some(v=>/^(Negotiate|Kerberos)( |$)/i.test(v))&&!u.kerberosRequested){u.kerberosRequested=!0;try{const v=Js(r,o,"http.proxyKerberosServicePrincipal");return"Negotiate "+await ED(c,v,t,"ProxyResolver#lookupProxyAuthorization")}catch(v){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication failed",v)}if(o&&a){t.debug("ProxyResolver#lookupProxyAuthorization Kerberos authentication lookup on host",`proxyURL:${c}`);const v=await e.lookupKerberosAuthorization(c);if(v)return"Negotiate "+v}}const g=f.find(v=>/^Basic( |$)/i.test(v));if(g)try{const v=n[c];if(v)if(u.basicAuthCacheUsed)t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication deleting cached credentials",`proxyURL:${c}`),delete n[c];else return t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication using cached credentials",`proxyURL:${c}`),u.basicAuthCacheUsed=!0,v;u.basicAuthAttempt=(u.basicAuthAttempt||0)+1;const b=/ realm="([^"]+)"/i.exec(g)?.[1];t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication lookup",`proxyURL:${c}`,`realm:${b}`);const x=new URL(c),E={scheme:"basic",host:x.hostname,port:Number(x.port),realm:b||"",isProxy:!0,attempt:u.basicAuthAttempt},I=await e.lookupAuthorization(E);if(I){t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received credentials",`proxyURL:${c}`,`realm:${b}`);const U="Basic "+Buffer.from(`${I.username}:${I.password}`).toString("base64");return n[c]=U,U}else t.debug("ProxyResolver#lookupProxyAuthorization Basic authentication received no credentials",`proxyURL:${c}`,`realm:${b}`)}catch(v){t.error("ProxyResolver#lookupProxyAuthorization Basic authentication failed",v)}}var ND=!1,yG=!1;function AG(e,t,i){!yG||ND||!t.length||(ND=!0,e.$publicLog2("proxyAuthenticationRequest",{authenticationType:t.map(r=>r.split(" ")[0]).join(","),extensionHostType:i?"remote":"local"}))}function Js(e,t,i,r){if(t)return e.getConfiguration().get(i)??r;const s=e.getConfiguration().inspect(i);return s?.globalLocalValue??s?.defaultValue??r}import{tmpdir as xG}from"os";var UA=class extends te{constructor(t,i){super();const r=t.getProxy(Y.MainThreadDownloadService);i.registerCommand(!1,"_workbench.downloadResource",async s=>{const n=A.file(He(xG(),kt()));return await r.$download(s,n),n})}};UA=__decorate([__param(0,De),__param(1,Nr)],UA);import*as EG from"http";import*as LD from"fs";var SG=class{constructor(e,t,i){this.b=e,this.c=t,this.f=i,this.a=EG.createServer((r,s)=>this.h(r,s)),this.g().catch(r=>(t.error(r),""))}get ipcHandlePath(){return this.f}async g(){try{this.a.listen(this.ipcHandlePath),this.a.on("error",e=>this.c.error(e))}catch{this.c.error("Could not start open from terminal server.")}return this.f}h(e,t){const i=(s,n)=>{t.writeHead(s,{"content-type":"application/json"}),t.end(JSON.stringify(n||null),o=>o&&this.c.error(o))},r=[];e.setEncoding("utf8"),e.on("data",s=>r.push(s)),e.on("end",async()=>{try{const s=JSON.parse(r.join(""));let n;switch(s.type){case"open":n=await this.i(s);break;case"openExternal":n=await this.j(s);break;case"status":n=await this.l(s);break;case"extensionManagement":n=await this.k(s);break;default:i(404,`Unknown message type: ${s.type}`);break}i(200,n)}catch(s){const n=s instanceof Error?s.message:JSON.stringify(s);i(500,n),this.c.error("Error while processing pipe request",s)}})}async i(e){const{fileURIs:t,folderURIs:i,forceNewWindow:r,diffMode:s,mergeMode:n,addMode:o,removeMode:a,forceReuseWindow:c,gotoLineMode:l,waitMarkerFilePath:u,remoteAuthority:h}=e,d=[];if(Array.isArray(i))for(const b of i)try{d.push({folderUri:A.parse(b)})}catch{}if(Array.isArray(t))for(const b of t)try{DR(b)?d.push({workspaceUri:A.parse(b)}):d.push({fileUri:A.parse(b)})}catch{}const f=u?A.file(u):void 0,v={forceNewWindow:r,diffMode:s,mergeMode:n,addMode:o,removeMode:a,gotoLineMode:l,forceReuseWindow:c,preferNewWindow:!c&&!f&&!o&&!a,waitMarkerFileURI:f,remoteAuthority:h};this.b.executeCommand("_remoteCLI.windowOpen",d,v)}async j(e){for(const t of e.uris){const i=A.parse(t),r=i.scheme==="file"?i:t;await this.b.executeCommand("_remoteCLI.openExternal",r)}}async k(e){const t=r=>r?.map(s=>/\.vsix$/i.test(s)?A.parse(s):s),i={list:e.list,install:t(e.install),uninstall:t(e.uninstall),force:e.force};return await this.b.executeCommand("_remoteCLI.manageExtensions",i)}async l(e){return await this.b.executeCommand("_remoteCLI.getSystemStatus")}dispose(){this.a.close(),this.f&&process.platform!=="win32"&&LD.existsSync(this.f)&&LD.unlinkSync(this.f)}},BA=class extends SG{constructor(t,i){super(t,i,DN())}};BA=__decorate([__param(0,Nr),__param(1,Ce)],BA);var zA=class{constructor(t,i){this.a=t.getProxy(Y.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const r=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){r.e(t,i,s,arguments)}})}e(t,i,r,s){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:IG(s,this.b)}),this.c&&this.f(t,r,s)}};zA=__decorate([__param(0,De),__param(1,At)],zA);var kG=1e5;function IG(e,t){const i=[];if(e.length)for(let r=0;r<e.length;r++){let s=e[r];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}i.push(s)}if(t){const r=new Error().stack;r&&i.push({__$stack:r.split(`
`).slice(3).join(`
`)})}try{const r=TN(i);return r.length>kG?"Output omitted for a large object that exceeds the limits":r}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}var CG=1024*1024,HA=class extends zA{constructor(t,i){super(t,i),this.g=!1,this.j("stderr","error"),this.j("stdout","log")}f(t,i,r){const s=t==="error"||t==="warn"?process.stderr:process.stdout;this.g=!0,s.write(`
START_NATIVE_LOG
`),i.apply(console,r),s.write(`
END_NATIVE_LOG
`),this.g=!1}j(t,i){const r=process[t],s=r.write;let n="";Object.defineProperty(r,"write",{set:()=>{},get:()=>(o,a,c)=>{if(!this.g){n+=o.toString(a);const l=n.length>CG?n.length:n.lastIndexOf(`
`);l!==-1&&(console[i](n.slice(0,l)),n=n.slice(l+1))}s.call(r,o,a,c)}})}};HA=__decorate([__param(0,De),__param(1,At)],HA);import{promises as ia}from"fs";async function $G(e,t,i,r,s,n){let o;try{await DG(e,t,i,r,s,n)}catch(a){o=a}finally{o&&s.errorTransformer&&(o=s.errorTransformer(o)),typeof o<"u"&&i.error(o),i.end()}}async function DG(e,t,i,r,s,n){WA(n);const o=await e.open(t,{create:!1});try{WA(n);let a=0,c=0,l=s&&typeof s.length=="number"?s.length:void 0,u=_.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),h=s&&typeof s.position=="number"?s.position:0,d=0;do c=await e.read(o,h,u.buffer,d,u.byteLength-d),h+=c,d+=c,a+=c,typeof l=="number"&&(l-=c),d===u.byteLength&&(await i.write(r(u)),u=_.alloc(Math.min(s.bufferSize,typeof l=="number"?l:s.bufferSize)),d=0);while(c>0&&(typeof l!="number"||l>0)&&WA(n)&&PG(a,s));if(d>0){let f=d;typeof l=="number"&&(f=Math.min(d,l)),i.write(r(u.slice(0,f)))}}catch(a){throw LO(a)}finally{await e.close(o)}}function WA(e){if(e.isCancellationRequested)throw Kc();return!0}function PG(e,t){if(typeof t?.limits?.size=="number"&&e>t.limits.size)throw $s(p(2074,null),pe.FileTooLarge);return!0}var TG=class extends te{constructor(e,t){super(),this.a=e,this.b=t,this.c=this.B(new $),this.onDidChangeFile=this.c.event,this.g=this.B(new $),this.onDidWatchError=this.g.event,this.m=[],this.n=this.B(new fd(this.h(this.m.length))),this.z=[],this.C=this.B(new fd(this.h(this.z.length)))}watch(e,t){return t.recursive||this.b?.watcher?.forceUniversal?this.r(e,t):this.D(e,t)}h(e){return e>200?500:0}r(e,t){const i=this.s(e,t),r=H4(this.m,i);return this.t(),re(()=>{r(),this.t()})}s(e,t){const i={path:this.M(e),excludes:t.excludes,includes:t.includes,recursive:t.recursive,filter:t.filter,correlationId:t.correlationId};if(Y_(i)){const r=this.b?.watcher?.recursive?.usePolling;r===!0?i.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3:Array.isArray(r)&&r.includes(i.path)&&(i.pollingInterval=this.b?.watcher?.recursive?.pollingInterval??5e3)}return i}t(){this.n.trigger(()=>this.u(),this.h(this.m.length)).catch(e=>lt(e))}u(){return this.j||(this.j=this.B(this.w(e=>this.c.fire(l$(e)),e=>this.I(e),this.a.getLevel()===ie.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.j?.setVerboseLogging(this.a.getLevel()===ie.Trace)}))),this.j.watch(this.m)}D(e,t){const i={path:this.M(e),excludes:t.excludes,includes:t.includes,recursive:!1,filter:t.filter,correlationId:t.correlationId},r=H4(this.z,i);return this.F(),re(()=>{r(),this.F()})}F(){this.C.trigger(()=>this.G(),this.h(this.z.length)).catch(e=>lt(e))}G(){return this.y||(this.y=this.B(this.H(e=>this.c.fire(l$(e)),e=>this.I(e),this.a.getLevel()===ie.Trace)),this.B(this.a.onDidChangeLogLevel(()=>{this.y?.setVerboseLogging(this.a.getLevel()===ie.Trace)}))),this.y.watch(this.z)}I(e){e.type==="error"&&this.g.fire(e.message),this.J(e)}J(e){this.a[e.type](e.message)}L(e){return ys(e.fsPath)}M(e){const t=this.L(e);return zT(t)}};import{fork as MG}from"child_process";function NG(e){const t=e;return t&&typeof t.type=="string"&&typeof t.severity=="string"}function LG(e){const t=[];let i;try{const r=JSON.parse(e.arguments),s=r[r.length-1];s&&s.__$stack&&(r.pop(),i=s.__$stack),t.push(...r)}catch{t.push("Unable to log remote console arguments",e.arguments)}return{args:t,stack:i}}function RG(e){if(!e)return e;const t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function OG(e,t){const{args:i,stack:r}=LG(e),s=typeof i[0]=="string"&&i.length===1;let n=RG(r);n&&(n=`(${n.trim()})`);let o=[];if(typeof i[0]=="string"?n&&s?o=[`%c[${t}] %c${i[0]} %c${n}`,Bc("blue"),Bc(""),Bc("grey")]:o=[`%c[${t}] %c${i[0]}`,Bc("blue"),Bc(""),...i.slice(1)]:o=[`%c[${t}]%`,Bc("blue"),...i],n&&!s&&o.push(n),typeof console[e.severity]!="function")throw new Error("Unknown console method");console[e.severity].apply(console,o)}function Bc(e){return`color: ${e}`}var FG=class{constructor(e,t){this.i=e,this.j=t,this.c=new Set,this.g=new Map,this.h=new $,this.onDidProcessExit=this.h.event;const i=t&&t.timeout?t.timeout:6e4;this.b=new rx(i),this.d=null,this.f=null}getChannel(e){const t=this;return{call(i,r,s){return t.k(e,i,r,s)},listen(i,r){return t.l(e,i,r)}}}k(e,t,i,r=Je.None){if(!this.b)return Promise.reject(new Error("disposed"));if(r.isCancellationRequested)return Promise.reject(Kc());this.b.cancel();const s=this.n(e),n=As(c=>s.call(t,i,c)),o=r.onCancellationRequested(()=>n.cancel()),a=re(()=>n.cancel());return this.c.add(a),n.finally(()=>{o.dispose(),this.c.delete(a),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}),n}l(e,t,i){if(!this.b)return We.None;this.b.cancel();let r;const s=new $({onWillAddFirstListener:()=>{r=this.n(e).listen(t,i)(s.fire,s),this.c.add(r)},onDidRemoveLastListener:()=>{this.c.delete(r),r.dispose(),this.c.size===0&&this.b&&this.b.trigger(()=>this.o())}});return s.event}get m(){if(!this.f){const e=this.j&&this.j.args?this.j.args:[],t=Object.create(null);t.env={...Xe(process.env),VSCODE_PARENT_PID:String(process.pid)},this.j&&this.j.env&&(t.env={...t.env,...this.j.env}),this.j&&this.j.freshExecArgv&&(t.execArgv=[]),this.j&&typeof this.j.debug=="number"&&(t.execArgv=["--nolazy","--inspect="+this.j.debug]),this.j&&typeof this.j.debugBrk=="number"&&(t.execArgv=["--nolazy","--inspect-brk="+this.j.debugBrk]),t.execArgv===void 0&&(t.execArgv=process.execArgv.filter(u=>!/^--inspect(-brk)?=/.test(u)).filter(u=>!u.startsWith("--vscode-"))),zH(t.env),this.d=MG(this.i,e,t);const i=new $,s=We.fromNodeEventEmitter(this.d,"message",u=>u)(u=>{if(NG(u)){OG(u,`IPC Library: ${this.j.serverName}`);return}i.fire(_.wrap(Buffer.from(u,"base64")))}),n=this.j.useQueue?HH(this.d):this.d,o=u=>this.d&&this.d.connected&&n.send(u.buffer.toString("base64")),a=i.event,c={send:o,onMessage:a};this.f=new Rx(c);const l=()=>this.o();process.once("exit",l),this.d.on("error",u=>console.warn('IPC "'+this.j.serverName+'" errored with '+u)),this.d.on("exit",(u,h)=>{process.removeListener("exit",l),s.dispose(),this.c.forEach(d=>wr(d)),this.c.clear(),u!==0&&h!=="SIGTERM"&&console.warn('IPC "'+this.j.serverName+'" crashed with exit code '+u+" and signal "+h),this.b?.cancel(),this.o(),this.h.fire({code:u,signal:h})})}return this.f}n(e){let t=this.g.get(e);return t||(t=this.m.getChannel(e),this.g.set(e,t)),t}o(){this.f&&(this.d&&(this.d.kill(),this.d=null),this.f=null,this.g.clear())}dispose(){this.h.dispose(),this.b?.cancel(),this.b=void 0,this.o(),this.c.clear()}},jG=class extends X_{constructor(e,t,i){super(e,t,i),this.s()}r(e){const t=e.add(new FG(ud.asFileUri("bootstrap-fork").fsPath,{serverName:"File Watcher",args:["--type=fileWatcher"],env:{VSCODE_ESM_ENTRYPOINT:"vs/platform/files/node/watcher/watcherMain",VSCODE_PIPE_LOGGING:"true",VSCODE_VERBOSE_LOGGING:"true"}}));return e.add(t.onDidProcessExit(({code:i,signal:r})=>this.t(`terminated by itself with code ${i}, signal: ${r} (ETERM)`))),B1.toService(gN(t.getChannel("watcher")))}};import{watchFile as UG,unwatchFile as BG}from"fs";var zG=class extends te{constructor(){super(),this.a=this.B(new $),this.onDidChangeFile=this.a.event,this.b=this.B(new $),this.onDidLogMessage=this.b.event,this.c=this.B(new $),this.f=this.c.event,this.g=new Map,this.h=new Map,this.j=this.B(new ga),this.m=new Set,this.n=this.B(new fd(this.y())),this.r=5007,this.s=new Xi,this.R=!1,this.B(this.f(e=>this.z({id:this.u(e),correlationId:this.t(e)?e.correlationId:void 0,path:e.path})))}t(e){return a$(e)}u(e){return this.t(e)?e.correlationId:Is(e)}async watch(e){this.s.isSettled||this.s.complete(),this.s=new Xi;try{this.g.clear(),this.h.clear();for(const t of e)this.t(t)?this.g.set(t.correlationId,t):this.h.set(this.u(t),t);for(const[t]of this.j)!this.h.has(t)&&!this.g.has(t)&&(this.j.deleteAndDispose(t),this.m.delete(t));return await this.w(!1)}finally{this.s.complete()}}w(e){const t=[];for(const[i,r]of[...this.h,...this.g])this.j.has(i)||t.push(r);return this.n.trigger(()=>this.N(t),e?this.y():0).catch(i=>lt(i))}y(){return 800}isSuspended(e){const t=this.u(e);return this.m.has(t)?"polling":this.j.has(t)}async z(e){if(this.j.has(e.id))return;const t=new le;this.j.set(e.id,t),await this.s.p,!t.isDisposed&&(this.D(e,t),this.w(!0))}C(e){this.j.deleteAndDispose(e.id),this.m.delete(e.id),this.w(!1)}D(e,t){this.F(e,t)?(this.P(`reusing an existing recursive watcher to monitor ${e.path}`),this.m.delete(e.id)):(this.G(e,t),this.m.add(e.id))}F(e,t){const i=this.O?.subscribe(e.path,(r,s)=>{t.isDisposed||(r?this.D(e,t):s?.type===1&&this.H(e))});return i?(t.add(i),!0):!1}G(e,t){let i=!1;const r=(s,n)=>{if(t.isDisposed)return;const o=this.I(s),a=this.I(n),c=i;i=o,!o&&(a||c)&&this.H(e)};this.P(`starting fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{UG(e.path,{persistent:!1,interval:this.r},r)}catch(s){this.Q(`fs.watchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}t.add(re(()=>{this.P(`stopping fs.watchFile() on ${e.path} (correlationId: ${e.correlationId})`);try{BG(e.path,r)}catch(s){this.Q(`fs.unwatchFile() failed with error ${s} on path ${e.path} (correlationId: ${e.correlationId})`)}}))}H(e){this.P(`detected ${e.path} exists again, resuming watcher (correlationId: ${e.correlationId})`);const t={resource:A.file(e.path),type:1,cId:e.correlationId};this.a.fire([t]),this.J(t,e),this.C(e)}I(e){return e.ctimeMs===0&&e.ino===0}async stop(){this.j.clearAndDisposeAll(),this.m.clear()}J(e,t){if(this.R){const i=` >> normalized ${e.type===1?"[ADDED]":e.type===2?"[DELETED]":"[CHANGED]"} ${e.resource.fsPath}`;this.L(i,t)}}L(e,t){this.R&&this.P(`${e}${typeof t.correlationId=="number"?` <${t.correlationId}> `:""}`)}M(e){return`${e.path} (excludes: ${e.excludes.length>0?e.excludes:"<none>"}, includes: ${e.includes&&e.includes.length>0?JSON.stringify(e.includes):"<all>"}, filter: ${iV(e.filter)}, correlationId: ${typeof e.correlationId=="number"?e.correlationId:"<none>"})`}async setVerboseLogging(e){this.R=e}};import{watch as HG,promises as WG}from"fs";var _G=class Jm extends te{static{this.a=100}static{this.b=75}get isReusingRecursiveWatcher(){return this.r}get failed(){return this.s}constructor(t,i,r,s,n,o){super(),this.t=t,this.u=i,this.w=r,this.y=s,this.z=n,this.C=o,this.c=this.B(new cx({maxWorkChunkSize:100,throttleDelay:200,maxBufferedWork:1e4},a=>this.w(a))),this.f=this.B(new yM(a=>this.M(a),Jm.b)),this.m=new tt,this.n=new Zt(async()=>{let a=this.t.path;try{a=await Qe.realpath(this.t.path),this.t.path!==a&&this.Q(`correcting a path to watch that seems to be a symbolic link (original: ${this.t.path}, real: ${a})`)}catch{}return a}),this.r=!1,this.s=!1,this.g=h$(this.t.path,this.t.excludes),this.h=this.t.includes?h$(this.t.path,this.t.includes):void 0,this.j=a$(this.t)?this.t.filter:void 0,this.ready=this.D()}async D(){try{const t=await WG.stat(this.t.path);if(this.m.token.isCancellationRequested)return;this.B(await this.G(t.isDirectory()))}catch(t){t.code!=="ENOENT"?this.O(t):this.Q(`ignoring a path for watching who's stat info failed to resolve: ${this.t.path} (error: ${t})`),this.F()}}F(){this.s=!0,this.y?.()}async G(t){const i=new le;return this.H(t,i)?(this.Q(`reusing an existing recursive watcher for ${this.t.path}`),this.r=!0):(this.r=!1,await this.I(t,i)),i}H(t,i){if(t)return!1;const r=A.file(this.t.path),s=this.u?.subscribe(this.t.path,async(n,o)=>{if(!i.isDisposed)if(n){const a=await this.G(t);i.isDisposed?a.dispose():i.add(a)}else o&&(typeof o.cId=="number"||typeof this.t.correlationId=="number")&&this.L({resource:r,type:o.type,cId:this.t.correlationId},!0)});return s?(i.add(s),!0):!1}async I(t,i){const r=await this.n.value;if(this.m.token.isCancellationRequested)return;if(Ft&&ro(r,"/Volumes/",!0)){this.O(`Refusing to watch ${r} for changes using fs.watch() for possibly being a network share where watching is unreliable and unstable.`);return}const s=new tt(this.m.token);i.add(re(()=>s.dispose(!0)));const n=new le;i.add(n);try{const o=A.file(this.t.path),a=dt(r),c=HG(r);n.add(re(()=>{c.removeAllListeners(),c.close()})),this.Q(`Started watching: '${r}'`);const l=new Set;if(t)try{for(const h of await Qe.readdir(r))l.add(h)}catch(h){this.O(h)}if(s.token.isCancellationRequested)return;const u=new Map;n.add(re(()=>{for(const[,h]of u)h.dispose();u.clear()})),c.on("error",(h,d)=>{s.token.isCancellationRequested||(this.O(`Failed to watch ${r} for changes using fs.watch() (${h}, ${d})`),this.F())}),c.on("change",(h,d)=>{if(s.token.isCancellationRequested)return;this.C&&this.R(`[raw] ["${h}"] ${d}`);let f="";if(d&&(f=d.toString(),Ft&&(f=bd(f))),!(!f||h!=="change"&&h!=="rename"))if(t)if(h==="rename"){u.get(f)?.dispose();const g=setTimeout(async()=>{if(u.delete(f),ad(f,a,!Et)&&!await Qe.exists(r)){this.J(o);return}if(s.token.isCancellationRequested)return;const v=await this.N(He(r,f));if(s.token.isCancellationRequested)return;let b;v?l.has(f)?b=0:(b=1,l.add(f)):(l.delete(f),b=2),this.L({resource:wt(o,f),type:b,cId:this.t.correlationId})},Jm.a);u.set(f,re(()=>clearTimeout(g)))}else{let g;l.has(f)?g=0:(g=1,l.add(f)),this.L({resource:wt(o,f),type:g,cId:this.t.correlationId})}else if(h==="rename"||!ad(f,a,!Et)){const g=setTimeout(async()=>{const v=await Qe.exists(r);s.token.isCancellationRequested||(v?(this.L({resource:o,type:0,cId:this.t.correlationId},!0),n.add(await this.G(!1))):this.J(o))},Jm.a);n.clear(),n.add(re(()=>clearTimeout(g)))}else this.L({resource:o,type:0,cId:this.t.correlationId},!0)})}catch(o){if(s.token.isCancellationRequested)return;this.O(`Failed to watch ${r} for changes using fs.watch() (${o.toString()})`),this.F()}}J(t){this.P("Watcher shutdown because watched path got deleted"),this.L({resource:t,type:2,cId:this.t.correlationId},!0),this.f.flush(),this.F()}L(t,i=!1){this.m.token.isCancellationRequested||(this.C&&this.R(`${t.type===1?"[ADDED]":t.type===2?"[DELETED]":"[CHANGED]"} ${t.resource.fsPath}`),!i&&this.g.some(r=>r(t.resource.fsPath))?this.C&&this.R(` >> ignored (excluded) ${t.resource.fsPath}`):!i&&this.h&&this.h.length>0&&!this.h.some(r=>r(t.resource.fsPath))?this.C&&this.R(` >> ignored (not included) ${t.resource.fsPath}`):this.f.work(t))}M(t){const i=K_(t),r=[];for(const n of i){if(tV(n,this.j)){this.C&&this.R(` >> ignored (filtered) ${n.resource.fsPath}`);continue}r.push(n)}if(r.length===0)return;if(this.C)for(const n of r)this.R(` >> normalized ${n.type===1?"[ADDED]":n.type===2?"[DELETED]":"[CHANGED]"} ${n.resource.fsPath}`);this.c.work(r)?this.c.pending>0&&this.Q(`started throttling events due to large amount of file change events at once (pending: ${this.c.pending}, most recent change: ${r[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`):this.P(`started ignoring events due to too many file change events at once (incoming: ${r.length}, most recent change: ${r[0].resource.fsPath}). Use 'files.watcherExclude' setting to exclude folders with lots of changing files (e.g. compilation output).`)}async N(t){if(Et)return Qe.exists(t);try{const i=dt(t);return(await Qe.readdir(Ai(t))).some(s=>s===i)}catch(i){return this.Q(i),!1}}setVerboseLogging(t){this.C=t}O(t){this.m.token.isCancellationRequested||this.z?.({type:"error",message:`[File Watcher (node.js)] ${t}`})}P(t){this.m.token.isCancellationRequested||this.z?.({type:"warn",message:`[File Watcher (node.js)] ${t}`})}Q(t){!this.m.token.isCancellationRequested&&this.C&&this.z?.({type:"trace",message:`[File Watcher (node.js)] ${t}`})}R(t){!this.m.token.isCancellationRequested&&this.C&&this.Q(`${t}${typeof this.t.correlationId=="number"?` <${this.t.correlationId}> `:""}`)}dispose(){this.m.dispose(!0),super.dispose()}},VG=class extends zG{get watchers(){return this.S.values()}constructor(e){super(),this.O=e,this.onDidError=We.None,this.S=new Map,this.U=this.B(new Hr)}async N(e){e=this.cb(e);const t=[],i=new Set(Array.from(this.watchers));for(const r of e){const s=this.S.get(this.Z(r));s&&_k(s.request.excludes,r.excludes)&&_k(s.request.includes,r.includes)?i.delete(s):t.push(r)}t.length&&this.P(`Request to start watching: ${t.map(r=>this.M(r)).join(",")}`),i.size&&this.P(`Request to stop watching: ${Array.from(i).map(r=>this.M(r.request)).join(",")}`),this.U.clear();for(const r of i)this.bb(r);this.Y().work(t)}Y(){return this.U.value=new cx({maxWorkChunkSize:100,throttleDelay:100,maxBufferedWork:Number.MAX_VALUE},e=>{for(const t of e)this.ab(t)}),this.U.value}Z(e){return typeof e.correlationId=="number"?e.correlationId:this.$(e.path)}$(e){return Et?e:e.toLowerCase()}ab(e){const t=new _G(e,this.O,r=>this.a.fire(r),()=>this.c.fire(e),r=>this.b.fire(r),this.R),i={request:e,instance:t};this.S.set(this.Z(e),i)}async stop(){await super.stop();for(const e of this.watchers)this.bb(e)}bb(e){this.P("stopping file watcher",e),this.S.delete(this.Z(e.request)),e.instance.dispose()}cb(e){const t=new Map;for(const i of e){let r=t.get(i.correlationId);r||(r=new Map,t.set(i.correlationId,r));const s=this.$(i.path);r.has(s)&&this.P(`ignoring a request for watching who's path is already watched: ${this.M(i)}`),r.set(s,i)}return Array.from(t.values()).map(i=>Array.from(i.values())).flat()}async setVerboseLogging(e){super.setVerboseLogging(e);for(const t of this.watchers)t.instance.setVerboseLogging(e)}P(e,t){this.R&&this.b.fire({type:"trace",message:this.fb(e,t)})}Q(e){this.b.fire({type:"warn",message:this.fb(e)})}fb(e,t){return t?`[File Watcher (node.js)] ${e} (${this.M(t.request)})`:`[File Watcher (node.js)] ${e}`}},qG=class extends Q_{constructor(e,t,i){super(e,t,i),this.s()}r(e){return e.add(new VG(void 0))}},GG=class Oh extends TG{static{this.N=!1}constructor(t,i){super(t,i),this.onDidChangeCapabilities=We.None,this.R=new Gt(r=>I1.getComparisonKey(r)),this.Z=new Map,this.$=new Map,this.ab=new Map}get capabilities(){return this.O||(this.O=516126,Et&&(this.O|=1024)),this.O}async stat(t){try{const{stat:i,symbolicLink:r}=await xi.stat(this.L(t));return{type:this.Q(i,r),ctime:i.birthtime.getTime(),mtime:i.mtime.getTime(),size:i.size,permissions:(i.mode&128)===0?bn.Locked:void 0}}catch(i){throw this.jb(i)}}async P(t){try{return await this.stat(t)}catch{return}}async realpath(t){const i=this.L(t);return Qe.realpath(i)}async readdir(t){try{const i=await Qe.readdir(this.L(t),{withFileTypes:!0}),r=[];return await Promise.all(i.map(async s=>{try{let n;s.isSymbolicLink()?n=(await this.stat(wt(t,s.name))).type:n=this.Q(s),r.push([s.name,n])}catch(n){this.a.trace(n)}})),r}catch(i){throw this.jb(i)}}Q(t,i){let r;return i?.dangling?r=zi.Unknown:t.isFile()?r=zi.File:t.isDirectory()?r=zi.Directory:r=zi.Unknown,i&&(r|=zi.SymbolicLink),r}async S(t){const i=this.L(t);this.U(`[Disk FileSystemProvider]: createResourceLock() - request to acquire resource lock (${i})`);let r;for(;r=this.R.get(t);)this.U(`[Disk FileSystemProvider]: createResourceLock() - waiting for resource lock to be released (${i})`),await r.wait();const s=new cr;return this.R.set(t,s),this.U(`[Disk FileSystemProvider]: createResourceLock() - new resource lock created (${i})`),re(()=>{this.U(`[Disk FileSystemProvider]: createResourceLock() - resource lock dispose() (${i})`),this.R.get(t)===s&&(this.U(`[Disk FileSystemProvider]: createResourceLock() - resource lock removed from resource-lock map (${i})`),this.R.delete(t)),this.U(`[Disk FileSystemProvider]: createResourceLock() - resource lock barrier open() (${i})`),s.open()})}async readFile(t,i){let r;try{i?.atomic&&(this.U(`[Disk FileSystemProvider]: atomic read operation started (${this.L(t)})`),r=await this.S(t));const s=this.L(t);return await ia.readFile(s)}catch(s){throw this.jb(s)}finally{r?.dispose()}}U(t){Oh.N&&this.a.trace(t)}readFileStream(t,i,r){const s=gd(n=>_.concat(n.map(o=>_.wrap(o))).buffer);return $G(this,t,s,n=>n.buffer,{...i,bufferSize:256*1024},r),s}async writeFile(t,i,r){return r?.atomic!==!1&&r?.atomic?.postfix&&await this.W(t)?this.X(t,wt(hd(t),`${Ar(t)}${r.atomic.postfix}`),i,r):this.Y(t,i,r)}async W(t){try{const i=this.L(t),{symbolicLink:r}=await xi.stat(i);if(r)return!1}catch{}return!0}async X(t,i,r,s){const n=new le;try{n.add(await this.S(t)),n.add(await this.S(i)),await this.Y(i,r,s,!0);try{await this.rename(i,t,{overwrite:!0})}catch(o){try{await this.delete(i,{recursive:!1,useTrash:!1,atomic:!1})}catch{}throw o}}finally{n.dispose()}}async Y(t,i,r,s){let n;try{const o=this.L(t);if(!r.create||!r.overwrite){if(await Qe.exists(o)){if(!r.overwrite)throw $s(p(2077,null),pe.FileExists)}else if(!r.create)throw $s(p(2078,null),pe.FileNotFound)}n=await this.open(t,{create:!0,unlock:r.unlock},s),await this.write(n,0,i,0,i.byteLength)}catch(o){throw await this.kb(t,o)}finally{typeof n=="number"&&await this.close(n)}}static{this.bb=!0}static configureFlushOnWrite(t){Oh.bb=t}async open(t,i,r){const s=this.L(t);let n;Da(i)&&!r&&(n=await this.S(t));let o;try{if(Da(i)&&i.unlock)try{const{stat:a}=await xi.stat(s);a.mode&128||await ia.chmod(s,a.mode|128)}catch(a){a.code!=="ENOENT"&&this.a.trace(a)}if(je&&Da(i))try{o=await Qe.open(s,"r+"),await Qe.ftruncate(o,0)}catch(a){if(a.code!=="ENOENT"&&this.a.trace(a),typeof o=="number"){try{await Qe.close(o)}catch(c){this.a.trace(c)}o=void 0}}typeof o!="number"&&(o=await Qe.open(s,Da(i)?"w":"r"))}catch(a){throw n?.dispose(),Da(i)?await this.kb(t,a):this.jb(a)}if(this.Z.set(o,0),Da(i)&&this.ab.set(o,t),n){const a=this.$.get(o);this.U(`[Disk FileSystemProvider]: open() - storing lock for handle ${o} (${s})`),this.$.set(o,n),a&&(this.U(`[Disk FileSystemProvider]: open() - disposing a previous lock that was still stored on same handle ${o} (${s})`),a.dispose())}return o}async close(t){const i=this.$.get(t);try{if(this.Z.delete(t),this.ab.delete(t)&&Oh.bb)try{await Qe.fdatasync(t)}catch(r){Oh.configureFlushOnWrite(!1),this.a.error(r)}return await Qe.close(t)}catch(r){throw this.jb(r)}finally{i&&(this.$.get(t)===i&&(this.U(`[Disk FileSystemProvider]: close() - resource lock removed from handle-lock map ${t}`),this.$.delete(t)),this.U(`[Disk FileSystemProvider]: close() - disposing lock for handle ${t}`),i.dispose())}}async read(t,i,r,s,n){const o=this.cb(t,i);let a=null;try{a=(await Qe.read(t,r,s,n,o)).bytesRead}catch(c){throw this.jb(c)}finally{this.db(t,o,a)}return a}cb(t,i){return i===this.Z.get(t)?null:i}db(t,i,r){const s=this.Z.get(t);typeof s=="number"&&(typeof i=="number"||(typeof r=="number"?this.Z.set(t,s+r):this.Z.delete(t)))}async write(t,i,r,s,n){return EM(()=>this.eb(t,i,r,s,n),100,3)}async eb(t,i,r,s,n){const o=this.cb(t,i);let a=null;try{a=(await Qe.write(t,r,s,n,o)).bytesWritten}catch(c){throw await this.kb(this.ab.get(t),c)}finally{this.db(t,o,a)}return a}async mkdir(t){try{await ia.mkdir(this.L(t))}catch(i){throw this.jb(i)}}async delete(t,i){try{const r=this.L(t);if(i.recursive){let s;i?.atomic!==!1&&i.atomic.postfix&&(s=He(Ai(r),`${dt(r)}${i.atomic.postfix}`)),await Qe.rm(r,so.MOVE,s)}else try{await ia.unlink(r)}catch(s){if(s.code==="EPERM"||s.code==="EISDIR"){let n=!1;try{const{stat:o,symbolicLink:a}=await xi.stat(r);n=o.isDirectory()&&!a}catch{}if(n)await ia.rmdir(r);else throw s}else throw s}}catch(r){throw this.jb(r)}}async rename(t,i,r){const s=this.L(t),n=this.L(i);if(s!==n)try{await this.fb(t,i,"move",r.overwrite),await Qe.rename(s,n)}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(2079,null,dt(s),dt(Ai(n)),o.toString()))),this.jb(o)}}async copy(t,i,r){const s=this.L(t),n=this.L(i);if(s!==n)try{await this.fb(t,i,"copy",r.overwrite),await Qe.copy(s,n,{preserveSymlinks:!0})}catch(o){throw(o.code==="EINVAL"||o.code==="EBUSY"||o.code==="ENAMETOOLONG")&&(o=new Error(p(2080,null,dt(s),dt(Ai(n)),o.toString()))),this.jb(o)}}async fb(t,i,r,s){const n=this.L(t),o=this.L(i);let a=!1;if(!!(this.capabilities&1024)||(a=ad(n,o,!0)),a){if(r==="copy")throw $s(p(2081,null),pe.FileExists);if(r==="move")return}const l=await this.P(t);if(!l)throw $s(p(2082,null),pe.FileNotFound);const u=await this.P(i);if(u){if(!s)throw $s(p(2083,null),pe.FileExists);(l.type&zi.File)!==0&&(u.type&zi.File)!==0||await this.delete(i,{recursive:!0,useTrash:!1,atomic:!1})}}async cloneFile(t,i){return this.gb(t,i,!1)}async gb(t,i,r){const s=this.L(t),n=this.L(i),o=!!(this.capabilities&1024);if(ad(s,n,!o))return;const a=new le;try{a.add(await this.S(t)),a.add(await this.S(i)),r&&await ia.mkdir(Ai(n),{recursive:!0}),await ia.copyFile(s,n)}catch(c){if(c.code==="ENOENT"&&!r)return this.gb(t,i,!0);throw this.jb(c)}finally{a.dispose()}}w(t,i,r){return new jG(s=>t(s),s=>i(s),r)}H(t,i,r){return new qG(s=>t(s),s=>i(s),r)}jb(t){if(t instanceof zd)return t;let i=t,r;switch(t.code){case"ENOENT":r=pe.FileNotFound;break;case"EISDIR":r=pe.FileIsADirectory;break;case"ENOTDIR":r=pe.FileNotADirectory;break;case"EEXIST":r=pe.FileExists;break;case"EPERM":case"EACCES":r=pe.NoPermissions;break;case"ERR_UNC_HOST_NOT_ALLOWED":i=`${t.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`,r=pe.Unknown;break;default:r=pe.Unknown}return $s(i,r)}async kb(t,i){let r=this.jb(i);if(t&&r.code===pe.NoPermissions)try{const{stat:s}=await xi.stat(this.L(t));s.mode&128||(r=$s(i,pe.FileWriteLocked))}catch(s){this.a.trace(s)}return r}},_A=class{constructor(t,i){t.addFileSystemProvider(q.file,new ZG(i),{isCaseSensitive:Et})}};_A=__decorate([__param(0,zu),__param(1,Ce)],_A);var ZG=class{constructor(e){this.a=new GG(e)}async stat(e){const t=await this.a.stat(e);return{type:t.type,ctime:t.ctime,mtime:t.mtime,size:t.size,permissions:t.permissions===bn.Readonly?1:void 0}}readDirectory(e){return this.a.readdir(e)}createDirectory(e){return this.a.mkdir(e)}readFile(e){return this.a.readFile(e)}writeFile(e,t,i){return this.a.writeFile(e,t,{...i,unlock:!1,atomic:!1})}delete(e,t){return this.a.delete(e,{...t,useTrash:!1,atomic:!1})}rename(e,t,i){return this.a.rename(e,t,i)}copy(e,t,i){return this.a.copy(e,t,i)}get onDidChangeFile(){throw new Error("Method not implemented.")}watch(e,t){throw new Error("Method not implemented.")}};import RD from"node:module";var OD=RD.createRequire(import.meta.url),JG=class extends xm{k(){const e=this,t=OD("module"),i=t._load;t._load=function(a,c,l){return a=n(a),e.a.has(a)?e.a.get(a).load(a,A.file(kx(c.filename)),u=>i.apply(this,[u,c,l])):i.apply(this,arguments)};const r=t._resolveLookupPaths;t._resolveLookupPaths=(o,a)=>r.call(this,n(o),a);const s=t._resolveFilename;t._resolveFilename=function(a,c,l,u){return a==="vsda"&&Array.isArray(u?.paths)&&u.paths.length===0&&(u.paths=t._nodeModulePaths(import.meta.dirname)),s.call(this,a,c,l,u)};const n=o=>{for(const a of e.b){const c=a(o);if(c){o=c;break}}return o}}},YG=class Gc extends xm{constructor(){super(...arguments),this.o=new le}static l(t){return`data:text/javascript;base64,${Buffer.from(t).toString("base64")}`}static{this.m=`
	let lookup;
	export const initialize = async (context) => {
		let requestIds = 0;
		const { port } = context;
		const pendingRequests = new Map();
		port.onmessage = (event) => {
			const { id, url } = event.data;
			pendingRequests.get(id)?.(url);
		};
		lookup = url => {
			// debugger;
			const myId = requestIds++;
			return new Promise((resolve) => {
				pendingRequests.set(myId, resolve);
				port.postMessage({ id: myId, url, });
			});
		};
	};
	export const resolve = async (specifier, context, nextResolve) => {
		if (specifier !== 'vscode' || !context.parentURL) {
			return nextResolve(specifier, context);
		}
		const otherUrl = await lookup(context.parentURL);
		return {
			url: otherUrl,
			shortCircuit: true,
		};
	};`}static{this.n="_VSCODE_IMPORT_VSCODE_API"}dispose(){this.o.dispose()}k(){const t=new A2,i=new Map;Object.defineProperty(globalThis,Gc.n,{enumerable:!1,configurable:!1,writable:!1,value:a=>t.getKey(a)});const{port1:r,port2:s}=new MessageChannel;let n;const o=r;o.onmessage=a=>{n||(n=this.a.get("vscode"),c1(n));const{id:c,url:l}=a.data,u=A.parse(l),h=n.load("_not_used",u,()=>{throw new Error("CANNOT LOAD MODULE from here.")});let d=t.get(h);d||(d=kt(),t.set(h,d));let f=i.get(d);if(!f){const g=`const _vscodeInstance = globalThis.${Gc.n}('${d}');

${Object.keys(h).map(v=>`export const ${v} = _vscodeInstance['${v}'];`).join(`
`)}`;f=Gc.l(g),i.set(d,f)}r.postMessage({id:c,url:f})},RD.register(Gc.l(Gc.m),{parentURL:import.meta.url,data:{port:s},transferList:[s]}),this.o.add(re(()=>{r.close(),s.close()}))}},QG=class extends ny{constructor(){super(...arguments),this.extensionRuntime=Yf.Node}async wb(){this.h.createInstance(HA);const e=this.h.invokeFunction(Rq);if(this.h.createInstance(UA),this.f.remote.isRemote&&this.f.remote.authority){const i=this.h.createInstance(BA);process.env.VSCODE_IPC_HOOK_CLI=i.ipcHandlePath}this.h.createInstance(_A),await this.h.createInstance(JG,e,{mine:this.J,all:this.L}).install(),await this.q.add(this.h.createInstance(YG,e,{mine:this.J,all:this.L})).install(),St("code/extHost/didInitAPI");const t=await this.m.getConfigProvider();await hG(this.j,t,this,this.s,this.z,this.f,this.q),St("code/extHost/didInitProxyResolver")}xb(e){return e.main}async Cb(e,t,i,r){if(t.scheme!==q.file)throw new Error(`Cannot load URI: '${t}', must be of file-scheme`);let s=null;i.codeLoadingStart(),this.s.trace(`ExtensionService#loadModule [${r}] -> ${t.toString(!0)}`),this.s.flush();const n=e?.identifier.value;e&&await this.w.initializeLocalizedMessages(e);try{n&&St(`code/extHost/willLoadExtensionCode/${n}`),r==="esm"?s=await import(t.toString(!0)):s=OD(t.fsPath)}finally{n&&St(`code/extHost/didLoadExtensionCode/${n}`),i.codeLoadingStop()}return s}async yb(e,t,i){return this.Cb(e,t,i,"cjs")}async zb(e,t,i){return this.Cb(e,t,i,"esm")}async $setRemoteEnvironment(e){if(this.f.remote.isRemote)for(const t in e){const i=e[t];i===null?delete process.env[t]:process.env[t]=i}}};import*as yh from"fs";import{exec as FD}from"child_process";var XG=(e,t,i)=>{const r=new Uint8Array(16);for(let o=0;o<16;o++)r[o]=Math.round(Math.random()*256);const s=fl(_.wrap(r));return[`GET ws://localhost${e}?${t}&skipWebSocketFrames=true HTTP/1.1`,"Connection: Upgrade","Upgrade: websocket",`Sec-WebSocket-Key: ${s}`].join(`\r
`)+`\r
\r
`},jD=_.fromString(`\r
\r
`);async function KG(e,t,i,r,s){e.write(_.fromString(XG(t,i,r)));const n=new le;try{return await new Promise((o,a)=>{let c;n.add(e.onData(l=>{c?c=_.concat([c,l],c.byteLength+l.byteLength):c=l;const u=c.indexOf(jD);if(u===-1)return;o(e),e.pauseData();const h=c.slice(u+jD.byteLength);h.byteLength&&s.onData.fire(h)})),n.add(e.onClose(l=>a(l??new Error("socket closed")))),n.add(e.onEnd(()=>a(new Error("socket ended"))))})}catch(o){throw e.dispose(),o}finally{n.dispose()}}var eZ=class extends te{constructor(e,t){super(),this.g=e,this.a=this.B(new nl),this.onData=(...i)=>(this.a.isPaused&&queueMicrotask(()=>this.a.resume()),this.a.event(...i)),this.b=this.B(new $),this.onDidDispose=this.b.event,this.f=!1,this.B(t.onData),this.B(t.onData.event(i=>this.a.fire(i))),this.onClose=this.B(t.onClose).event,this.onEnd=this.B(t.onEnd).event}pauseData(){this.a.pause()}drain(){return Promise.resolve()}end(){this.f=!0,this.h()}traceSocketEvent(e,t){xd.traceSocketEvent(this,this.g,e,t)}dispose(){this.f||this.h(),this.b.fire(),super.dispose()}},tZ="signService",Ah=V(tZ);import*as iZ from"net";import*as rZ from"os";import*as sZ from"net";var UD={1:!0,7:!0,9:!0,11:!0,13:!0,15:!0,17:!0,19:!0,20:!0,21:!0,22:!0,23:!0,25:!0,37:!0,42:!0,43:!0,53:!0,69:!0,77:!0,79:!0,87:!0,95:!0,101:!0,102:!0,103:!0,104:!0,109:!0,110:!0,111:!0,113:!0,115:!0,117:!0,119:!0,123:!0,135:!0,137:!0,139:!0,143:!0,161:!0,179:!0,389:!0,427:!0,465:!0,512:!0,513:!0,514:!0,515:!0,526:!0,530:!0,531:!0,532:!0,540:!0,548:!0,554:!0,556:!0,563:!0,587:!0,601:!0,636:!0,989:!0,990:!0,993:!0,995:!0,1719:!0,1720:!0,1723:!0,2049:!0,3659:!0,4045:!0,5060:!0,5061:!0,6e3:!0,6566:!0,6665:!0,6666:!0,6667:!0,6668:!0,6669:!0,6697:!0,10080:!0};function nZ(e,t,i,r="127.0.0.1"){let s=!1,n,o=1;const a=sZ.createServer({pauseOnConnect:!0});function c(l,u){s||(s=!0,a.removeAllListeners(),a.close(),n&&clearTimeout(n),u(l))}return new Promise(l=>{n=setTimeout(()=>{c(0,l)},i),a.on("listening",()=>{c(e,l)}),a.on("error",u=>{u&&(u.code==="EADDRINUSE"||u.code==="EACCES")&&o<t?(e++,o++,a.listen(e,r)):c(0,l)}),a.on("close",()=>{c(0,l)}),a.listen(e,r)})}var oZ=30*1e3,BD;(function(e){e[e.Management=1]="Management",e[e.ExtensionHost=2]="ExtensionHost",e[e.Tunnel=3]="Tunnel"})(BD||(BD={}));function VA(e){switch(e){case 1:return"Management";case 2:return"ExtensionHost";case 3:return"Tunnel"}}function zD(e){const t=new tt;return setTimeout(()=>t.cancel(),e),t.token}function aZ(e,t){if(e.isCancellationRequested||t.isCancellationRequested)return Je.Cancelled;const i=new tt;return e.onCancellationRequested(()=>i.cancel()),t.onCancellationRequested(()=>i.cancel()),i.token}var qA=class{get didTimeout(){return this.c==="timedout"}constructor(e){this.c="pending",this.d=new le,{promise:this.promise,resolve:this.f,reject:this.g}=ix(),e.isCancellationRequested?this.h():this.d.add(e.onCancellationRequested(()=>this.h()))}registerDisposable(e){this.c==="pending"?this.d.add(e):e.dispose()}h(){this.c==="pending"&&(this.d.dispose(),this.c="timedout",this.g(this.i()))}i(){const e=new Error("Time limit reached");return e.code="ETIMEDOUT",e.syscall="connect",e}resolve(e){this.c==="pending"&&(this.d.dispose(),this.c="resolved",this.f(e))}reject(e){this.c==="pending"&&(this.d.dispose(),this.c="rejected",this.g(e))}};function cZ(e,t){const i=new qA(t);return i.registerDisposable(e.onControlMessage(r=>{const s=JSON.parse(r.toString()),n=wZ(s);n?i.reject(n):i.resolve(s)})),i.promise}function lZ(e,t,i,r,s,n,o,a){const c=new qA(a),l=Oi.create(!1);return e.info(`Creating a socket (${o})...`),St(`code/willCreateSocket/${n}`),t.connect(i,r,s,o).then(u=>{c.didTimeout?(St(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) finished after ${l.elapsed()} ms, but this is too late and has timed out already.`),u?.dispose()):(St(`code/didCreateSocketOK/${n}`),e.info(`Creating a socket (${o}) was successful after ${l.elapsed()} ms.`),c.resolve(u))},u=>{St(`code/didCreateSocketError/${n}`),e.info(`Creating a socket (${o}) returned an error after ${l.elapsed()} ms.`),e.error(u),c.reject(u)}),c.promise}function GA(e,t){const i=new qA(t);return e.then(r=>{i.didTimeout||i.resolve(r)},r=>{i.didTimeout||i.reject(r)}),i.promise}async function uZ(e,t,i,r){const s=qD(e,t);e.logService.trace(`${s} 1/6. invoking socketFactory.connect().`);let n;try{n=await lZ(e.logService,e.remoteSocketFactoryService,e.connectTo,Z5.getServerRootPath(),`reconnectionToken=${e.reconnectionToken}&reconnection=${e.reconnectionProtocol?"true":"false"}`,VA(t),`renderer-${VA(t)}-${e.reconnectionToken}`,r)}catch(u){throw e.logService.error(`${s} socketFactory.connect() failed or timed out. Error:`),e.logService.error(u),u}e.logService.trace(`${s} 2/6. socketFactory.connect() was successful.`);let o,a;e.reconnectionProtocol?(e.reconnectionProtocol.beginAcceptReconnection(n,null),o=e.reconnectionProtocol,a=!1):(o=new H1({socket:n}),a=!0),e.logService.trace(`${s} 3/6. sending AuthRequest control message.`);const c=await GA(e.signService.createNewMessage(kt()),r),l={type:"auth",auth:e.connectionToken||"00000000000000000000",data:c.data};o.sendControl(_.fromString(JSON.stringify(l)));try{const u=await cZ(o,aZ(r,zD(1e4)));if(u.type!=="sign"||typeof u.data!="string"){const g=new Error("Unexpected handshake message");throw g.code="VSCODE_CONNECTION_ERROR",g}if(e.logService.trace(`${s} 4/6. received SignRequest control message.`),!await GA(e.signService.validate(c,u.signedData),r)){const g=new Error("Refused to connect to unsupported server");throw g.code="VSCODE_CONNECTION_ERROR",g}const d=await GA(e.signService.sign(u.data),r),f={type:"connectionType",commit:e.commit,signedData:d,desiredConnectionType:t};return i&&(f.args=i),e.logService.trace(`${s} 5/6. sending ConnectionTypeRequest control message.`),o.sendControl(_.fromString(JSON.stringify(f))),{protocol:o,ownsProtocol:a}}catch(u){throw u&&u.code==="ETIMEDOUT"&&(e.logService.error(`${s} the handshake timed out. Error:`),e.logService.error(u)),u&&u.code==="VSCODE_CONNECTION_ERROR"&&(e.logService.error(`${s} received error control message when negotiating connection. Error:`),e.logService.error(u)),a&&VD(o),u}}async function hZ(e,t,i){const r=Date.now(),s=qD(e,3),{protocol:n}=await uZ(e,3,t,i);return e.logService.trace(`${s} 6/6. handshake finished, connection is up and running after ${AZ(r)}!`),n}async function HD(e,t,i){const{connectTo:r,connectionToken:s}=await e.addressProvider.getAddress();return{commit:e.commit,quality:e.quality,connectTo:r,connectionToken:s,reconnectionToken:t,reconnectionProtocol:i,remoteSocketFactoryService:e.remoteSocketFactoryService,signService:e.signService,logService:e.logService}}async function dZ(e,t,i){const r=await HD(e,kt(),null);return await hZ(r,{host:t,port:i},Je.None)}function fZ(e){return As(t=>new Promise((i,r)=>{const s=setTimeout(i,e*1e3);t.onCancellationRequested(()=>{clearTimeout(s),i()})}))}var WD;(function(e){e[e.ConnectionLost=0]="ConnectionLost",e[e.ReconnectionWait=1]="ReconnectionWait",e[e.ReconnectionRunning=2]="ReconnectionRunning",e[e.ReconnectionPermanentFailure=3]="ReconnectionPermanentFailure",e[e.ConnectionGain=4]="ConnectionGain"})(WD||(WD={}));var pZ=class{constructor(e,t){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.type=0}},gZ=class{constructor(e,t,i,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.durationSeconds=i,this.c=r,this.type=1}skipWait(){this.c.cancel()}},mZ=class{constructor(e,t,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.type=2}},_D=class{constructor(e,t,i){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.type=4}},vZ=class{constructor(e,t,i,r){this.reconnectionToken=e,this.millisSinceLastIncomingData=t,this.attempt=i,this.handled=r,this.type=3}},wre=class en extends te{static triggerPermanentFailure(t,i,r){this._permanentFailure=!0,this.f=t,this.g=i,this.h=r,this.j.forEach(s=>s.D(this.f,this.g,this.h))}static debugTriggerReconnection(){this.j.forEach(t=>t.y())}static debugPauseSocketWriting(){this.j.forEach(t=>t.F())}static{this._permanentFailure=!1}static{this.f=0}static{this.g=0}static{this.h=!1}static{this.j=[]}get n(){return this.c||en._permanentFailure}constructor(t,i,r,s,n){super(),this.t=t,this.u=i,this.reconnectionToken=r,this.protocol=s,this.w=n,this.m=this.B(new $),this.onDidStateChange=this.m.event,this.c=!1,this.r=!1,this.s=!1,this.m.fire(new _D(this.reconnectionToken,0,0)),this.B(s.onSocketClose(o=>{const a=Cm(this.t,this.reconnectionToken,!0);o?o.type===0?(this.u.logService.info(`${a} received socket close event (hadError: ${o.hadError}).`),o.error&&this.u.logService.error(o.error)):(this.u.logService.info(`${a} received socket close event (wasClean: ${o.wasClean}, code: ${o.code}, reason: ${o.reason}).`),o.event&&this.u.logService.error(o.event)):this.u.logService.info(`${a} received socket close event.`),this.y()})),this.B(s.onSocketTimeout(o=>{const a=Cm(this.t,this.reconnectionToken,!0);this.u.logService.info(`${a} received socket timeout event (unacknowledgedMsgCount: ${o.unacknowledgedMsgCount}, timeSinceOldestUnacknowledgedMsg: ${o.timeSinceOldestUnacknowledgedMsg}, timeSinceLastReceivedSomeData: ${o.timeSinceLastReceivedSomeData}).`),this.y()})),en.j.push(this),this.B(re(()=>{const o=en.j.indexOf(this);o>=0&&en.j.splice(o,1)})),this.n&&this.D(en.f,en.g,en.h)}dispose(){super.dispose(),this.s=!0}async y(){if(!this.r)try{this.r=!0,await this.z()}finally{this.r=!1}}async z(){if(this.n||this.s)return;const t=Cm(this.t,this.reconnectionToken,!0);this.u.logService.info(`${t} starting reconnecting loop. You can get more information with the trace log level.`),this.m.fire(new pZ(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData()));const i=[0,5,5,10,10,10,10,10,30];let r=-1;do{r++;const s=r<i.length?i[r]:i[i.length-1];try{if(s>0){const o=fZ(s);this.m.fire(new gZ(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),s,o)),this.u.logService.info(`${t} waiting for ${s} seconds before reconnecting...`);try{await o}catch{}}if(this.n){this.u.logService.error(`${t} permanent failure occurred while running the reconnecting loop.`);break}this.m.fire(new mZ(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),r+1)),this.u.logService.info(`${t} resolving connection...`);const n=await HD(this.u,this.reconnectionToken,this.protocol);this.u.logService.info(`${t} connecting to ${n.connectTo}...`),await this.G(n,zD(oZ)),this.u.logService.info(`${t} reconnected!`),this.m.fire(new _D(this.reconnectionToken,this.protocol.getMillisSinceLastIncomingData(),r+1));break}catch(n){if(n.code==="VSCODE_CONNECTION_ERROR"){this.u.logService.error(`${t} A permanent error occurred in the reconnecting loop! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),r+1,!1);break}if(r>360){this.u.logService.error(`${t} An error occurred while reconnecting, but it will be treated as a permanent error because the reconnection grace time has expired! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),r+1,!1);break}if(Jv.isTemporarilyNotAvailable(n)){this.u.logService.info(`${t} A temporarily not available error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if((n.code==="ETIMEDOUT"||n.code==="ENETUNREACH"||n.code==="ECONNREFUSED"||n.code==="ECONNRESET")&&n.syscall==="connect"){this.u.logService.info(`${t} A network error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(yi(n)){this.u.logService.info(`${t} A promise cancelation error occurred while trying to reconnect, will try again...`),this.u.logService.trace(n);continue}if(n instanceof Jv){this.u.logService.error(`${t} A RemoteAuthorityResolverError occurred while trying to reconnect. Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),r+1,Jv.isHandled(n));break}this.u.logService.error(`${t} An unknown error occurred while trying to reconnect, since this is an unknown case, it will be treated as a permanent error! Will give up now! Error:`),this.u.logService.error(n),this.C(this.protocol.getMillisSinceLastIncomingData(),r+1,!1);break}}while(!this.n&&!this.s)}C(t,i,r){this.w?en.triggerPermanentFailure(t,i,r):this.D(t,i,r)}D(t,i,r){this.m.fire(new vZ(this.reconnectionToken,t,i,r)),VD(this.protocol)}F(){this.protocol.pauseSocketWriting()}};function VD(e){try{e.acceptDisconnect();const t=e.getSocket();e.dispose(),t.dispose()}catch(t){lt(t)}}function wZ(e){if(e&&e.type==="error"){const t=new Error(`Connection error: ${e.reason}`);return t.code="VSCODE_CONNECTION_ERROR",t}return null}function bZ(e,t){for(;e.length<t;)e+=" ";return e}function yZ(e,t){return`[remote-connection][${bZ(VA(e),13)}][${t.substr(0,5)}\u2026]`}function Cm(e,t,i){return`${yZ(e,t)}[${i?"reconnect":"initial"}]`}function qD(e,t){return`${Cm(t,e.reconnectionToken,!!e.reconnectionProtocol)}[${e.connectTo}]`}function AZ(e){return`${Date.now()-e} ms`}var ZA=V("remoteSocketFactoryService");async function xZ(e,t,i,r,s){let n;for(let o=3;o&&(n?.dispose(),n=await new GD(e,t,i,r,s).waitForReady(),!(s&&UD[s]||!UD[n.tunnelLocalPort]));o--);return n}var GD=class extends te{constructor(e,t,i,r,s){super(),this.m=t,this.n=s,this.privacy=cs.Private,this.j=new Map,this.a=e,this.b=iZ.createServer(),this.c=new cr,this.f=()=>this.c.open(),this.b.on("listening",this.f),this.g=n=>this.r(n),this.b.on("connection",this.g),this.h=()=>{},this.b.on("error",this.h),this.tunnelRemotePort=r,this.tunnelRemoteHost=i}async dispose(){super.dispose(),this.b.removeListener("listening",this.f),this.b.removeListener("connection",this.g),this.b.removeListener("error",this.h),this.b.close(),Array.from(this.j.values()).forEach(t=>{t()})}async waitForReady(){const e=this.n??this.tunnelRemotePort,t=Us(this.m)?"0.0.0.0":"127.0.0.1";let i=await nZ(e,2,1e3,t),r=null;return this.b.listen(i,this.m),await this.c.wait(),r=this.b.address(),r||(i=0,this.b.listen(i,this.m),await this.c.wait(),r=this.b.address()),this.tunnelLocalPort=r.port,this.localAddress=`${this.tunnelRemoteHost==="127.0.0.1"?"127.0.0.1":"localhost"}:${r.port}`,this}async r(e){e.pause();const t=qo(this.tunnelRemoteHost)||Us(this.tunnelRemoteHost)?"localhost":this.tunnelRemoteHost,i=await dZ(this.a,t,this.tunnelRemotePort),r=i.getSocket(),s=i.readEntireBuffer();i.dispose(),s.byteLength>0&&e.write(s.buffer),e.on("end",()=>{e.localAddress&&this.j.delete(e.localAddress),r.end()}),e.on("close",()=>r.end()),e.on("error",()=>{e.localAddress&&this.j.delete(e.localAddress),r instanceof gl?r.socket.destroy():r.end()}),r instanceof gl?this.t(e,r):this.s(e,r),e.localAddress&&this.j.set(e.localAddress,()=>{e.end(),r.end()})}s(e,t){t.onClose(()=>e.destroy()),t.onEnd(()=>e.end()),t.onData(i=>e.write(i.buffer)),e.on("data",i=>t.write(_.wrap(i))),e.resume()}t(e,t){const i=t.socket;i.on("end",()=>e.end()),i.on("close",()=>e.end()),i.on("error",()=>{e.destroy()}),i.pipe(e),e.pipe(i)}},JA=class extends vb{constructor(t,i,r,s,n){super(i,n),this.H=t,this.I=r,this.J=s}isPortPrivileged(t){return zU(t,this.t,Xn,rZ.release())}F(t,i,r,s,n,o,a,c){const l=this.D(i,r);if(l)return++l.refcount,l.value;if(UU(t))return this.G(t,i,r,n,o,a,c);{this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel without provider ${i}:${r} on local port ${n}.`);const u={commit:this.J.commit,quality:this.J.quality,addressProvider:t,remoteSocketFactoryService:this.H,signService:this.I,logService:this.r,ipcLogger:null},h=xZ(u,s,i,r,n);return this.r.trace("ForwardedPorts: (TunnelService) Tunnel created without provider."),this.z(i,r,h),h}}};JA=__decorate([__param(0,ZA),__param(1,Ce),__param(2,Ah),__param(3,py),__param(4,Ds)],JA);var YA=class extends JA{constructor(t,i,r,s,n){super(t,i,r,s,n)}};YA=__decorate([__param(0,ZA),__param(1,Ce),__param(2,Ah),__param(3,py),__param(4,Ds)],YA);var ZD=class extends te{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.f=r,this.g=s,this.h=n,this.a=new Map}async openTunnel(t,i,r,s,n,o,a,c,l){if(this.c.trace(`ForwardedPorts: (SharedTunnelService) openTunnel request for ${r}:${s} on local port ${o}.`),!this.a.has(t)){const u=new YA(this.b,this.c,this.g,this.f,this.h);this.B(u),this.a.set(t,u),u.onTunnelClosed(async()=>{(await u.tunnels).length===0&&(u.dispose(),this.a.delete(t))})}return this.a.get(t).openTunnel(i,r,s,n,o,a,c,l)}};ZD=__decorate([__param(0,ZA),__param(1,Ce),__param(2,py),__param(3,Ah),__param(4,Ds)],ZD);var EZ=V("dialogService"),JD;(function(e){e[e.Confirmation=1]="Confirmation",e[e.Prompt=2]="Prompt",e[e.Input=3]="Input"})(JD||(JD={}));var xre=V("fileDialogService"),YD;(function(e){e[e.SAVE=0]="SAVE",e[e.DONT_SAVE=1]="DONT_SAVE",e[e.CANCEL=2]="CANCEL"})(YD||(YD={}));var xh;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(xh||(xh={}));var jr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(jr||(jr={}));var Ere=class IP extends te{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.r=t,this.s=i,this.b=this.B(new nl),this.onDidChangeStorage=this.b.event,this.c=jr.None,this.f=new Map,this.g=this.B(new fd(IP.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((i,r)=>this.w(r,i)),t.deleted?.forEach(i=>this.w(i,void 0))}finally{this.b.resume()}}w(t,i){if(this.c===jr.Closed)return;let r=!1;Dt(i)?r=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),r=!0),r&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===jr.None&&(this.c=jr.Initialized,this.s.hint!==xh.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,i){const r=this.f.get(t);return Dt(r)?i:r}getBoolean(t,i){const r=this.get(t);return Dt(r)?i:r==="true"}getNumber(t,i){const r=this.get(t);return Dt(r)?i:parseInt(r,10)}getObject(t,i){const r=this.get(t);return Dt(r)?i:Dx(r)}async set(t,i,r=!1){if(this.c===jr.Closed)return;if(Dt(i))return this.delete(t,r);const s=xt(i)||Array.isArray(i)?uN(i):String(i);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:r}),this.D()}async delete(t,i=!1){if(!(this.c===jr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.D()}async optimize(){if(this.c!==jr.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=jr.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===jr.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===xh.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===xh.STORAGE_IN_MEMORY}},SZ="__$__isNewStorageMarker",$m="__$__targetStorageMarker",kZ=V("storageService"),zc;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(zc||(zc={}));var QD;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(QD||(QD={}));var XD;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(XD||(XD={}));function IZ(e){const t=e.get($m);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var Sre=class CP extends te{static{this.a=60*1e3}constructor(t={flushInterval:CP.a}){super(),this.b=this.B(new nl),this.f=this.B(new nl),this.onDidChangeTarget=this.f.event,this.g=this.B(new $),this.onWillSaveState=this.g.event,this.m=this.B(new Hr),this.C=void 0,this.F=void 0,this.H=void 0,this.j=this.B(new Vr(()=>this.n(),t.flushInterval))}onDidChangeValue(t,i,r){return We.filter(this.b.event,s=>s.scope===t&&(i===void 0||s.key===i),r)}n(){this.m.value=lx(()=>{this.r()&&this.flush(),this.j.schedule()})}r(){return!0}t(){wr([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{St("code/willInitStorage");try{await this.O()}finally{St("code/didInitStorage")}this.j.schedule()})()),this.h}u(t,i){const{key:r,external:s}=i;if(r===$m){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:r,target:this.J(t)[r],external:s})}w(t){this.g.fire({reason:t})}get(t,i,r){return this.P(i)?.get(t,r)}getBoolean(t,i,r){return this.P(i)?.getBoolean(t,r)}getNumber(t,i,r){return this.P(i)?.getNumber(t,r)}getObject(t,i,r){return this.P(i)?.getObject(t,r)}storeAll(t,i){this.y(()=>{for(const r of t)this.store(r.key,r.value,r.scope,r.target,i)})}store(t,i,r,s,n=!1){if(Dt(i)){this.remove(t,r,n);return}this.y(()=>{this.z(t,r,s),this.P(r)?.set(t,i,n)})}remove(t,i,r=!1){this.y(()=>{this.z(t,i,void 0),this.P(i)?.delete(t,r)})}y(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,i){const r=[],s=this.J(t);for(const n of Object.keys(s))s[n]===i&&r.push(n);return r}z(t,i,r,s=!1){const n=this.J(i);typeof r=="number"?n[t]!==r&&(n[t]=r,this.P(i)?.set($m,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(i)?.set($m,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const i=this.P(t);return i?IZ(i):Object.create(null)}isNew(t){return this.getBoolean(SZ,t)===!0}async flush(t=zc.NONE){this.g.fire({reason:t});const i=this.P(-1),r=this.P(0),s=this.P(1);switch(t){case zc.NONE:await fn.settled([i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case zc.SHUTDOWN:await fn.settled([i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,i=this.P(0)?.items??new Map,r=this.P(1)?.items??new Map;return CZ(t,i,r,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,i){return this.w(zc.NONE),jV(t)?this.R(t,i):this.S(t,i)}M(t,i){return!(t.id===i.id||KD(i)&&KD(t))}N(t,i,r){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),i.get(n)!==o&&this.u(r,{key:n,external:!0});for(const[n]of i.items)s.has(n)||this.u(r,{key:n,external:!0})})}};function KD(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function CZ(e,t,i,r,s,n){const o=v=>{try{return JSON.parse(v)}catch{return v}},a=new Map,c=new Map;e.forEach((v,b)=>{a.set(b,v),c.set(b,o(v))});const l=new Map,u=new Map;t.forEach((v,b)=>{l.set(b,v),u.set(b,o(v))});const h=new Map,d=new Map;i.forEach((v,b)=>{h.set(b,v),d.set(b,o(v))}),console.group(r!==s?`Storage: Application (path: ${r})`:`Storage: Application & Profile (path: ${r}, default profile)`);const f=[];if(a.forEach((v,b)=>{f.push({key:b,value:v})}),console.table(f),console.groupEnd(),console.log(c),r!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const v=[];l.forEach((b,x)=>{v.push({key:x,value:b})}),console.table(v),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const g=[];h.forEach((v,b)=>{g.push({key:b,value:v})}),console.table(g),console.groupEnd(),console.log(d)}var $Z=10*1e3,Dm="remote.tunnels.toRestore",QA="remote.tunnels.toRestoreExpiration",DZ=1e3*60*60*24*14,e3="onTunnel",kre=new Z("forwardedPortsViewEnabled",!1,p(14587,null)),PZ=new Z("forwardedPortsViewOnlyEnabled",!1,p(14588,null));function t3(e){const t=e.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(t)return{host:t[1]?.substring(0,t[1].length-1)||"localhost",port:Number(t[2])}}var Eh;(function(e){e.Other="Other",e.User="User",e.AutoForwardEnd="AutoForwardEnd"})(Eh||(Eh={}));var Ys;(function(e){e[e.User=0]="User",e[e.Auto=1]="Auto",e[e.Extension=2]="Extension"})(Ys||(Ys={}));var XA={source:Ys.User,description:p(14589,null)},Ire={source:Ys.Auto,description:p(14590,null)};function i3(e,t,i){const r=e.get(qi(t,i));if(r)return r;if(qo(t))for(const s of Hu){const n=qi(s,i);if(e.has(n))return e.get(n)}else if(Us(t))for(const s of lg){const n=qi(s,i);if(e.has(n))return e.get(n)}}function Mi(e,t,i){const r=i3(e,t,i);if(r)return r;const s=Us(t)?"localhost":qo(t)?"0.0.0.0":void 0;if(s)return i3(e,s,i)}function qi(e,t){return e+":"+t}var Hn;(function(e){e.Notify="notify",e.OpenBrowser="openBrowser",e.OpenBrowserOnce="openBrowserOnce",e.OpenPreview="openPreview",e.Silent="silent",e.Ignore="ignore"})(Hn||(Hn={}));function TZ(e){return e&&"host"in e&&typeof e.host=="string"&&"port"in e&&typeof e.port=="number"&&(!("detail"in e)||typeof e.detail=="string")&&(!("pid"in e)||typeof e.pid=="string")}var r3=class Br extends te{static{this.c="remote.portsAttributes"}static{this.f="remote.otherPortsAttributes"}static{this.g=/^(\d+)\-(\d+)$/}static{this.h=/^([a-z0-9\-]+):(\d{1,5})$/}constructor(t){super(),this.r=t,this.j=[],this.n=new $,this.onDidChangeAttributes=this.n.event,this.B(t.onDidChangeConfiguration(i=>{(i.affectsConfiguration(Br.c)||i.affectsConfiguration(Br.f))&&this.s()})),this.s()}s(){this.j=this.y(),this.n.fire()}getAttributes(t,i,r){let s=this.w(t,i,r,this.j,0);const n={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;s>=0;){const o=this.j[s];o.key===t?(n.onAutoForward=o.onAutoForward??n.onAutoForward,n.elevateIfNeeded=o.elevateIfNeeded!==void 0?o.elevateIfNeeded:n.elevateIfNeeded,n.label=o.label??n.label,n.requireLocalPort=o.requireLocalPort,n.protocol=o.protocol):(n.onAutoForward=n.onAutoForward??o.onAutoForward,n.elevateIfNeeded=n.elevateIfNeeded!==void 0?n.elevateIfNeeded:o.elevateIfNeeded,n.label=n.label??o.label,n.requireLocalPort=n.requireLocalPort!==void 0?n.requireLocalPort:void 0,n.protocol=n.protocol??o.protocol),s=this.w(t,i,r,this.j,s+1)}return n.onAutoForward!==void 0||n.elevateIfNeeded!==void 0||n.label!==void 0||n.requireLocalPort!==void 0||n.protocol!==void 0?n:this.C()}t(t){return t.start!==void 0&&t.end!==void 0}u(t){return t.host!==void 0&&t.port!==void 0&&Fe(t.host)&&or(t.port)}w(t,i,r,s,n){if(n>=s.length)return-1;const o=!qo(i)&&!Us(i),c=s.slice(n).findIndex(l=>or(l.key)?o?!1:l.key===t:this.t(l.key)?o?!1:t>=l.key.start&&t<=l.key.end:this.u(l.key)?t===l.key.port&&i===l.key.host:r?l.key.test(r):!1);return c>=0?c+n:-1}y(){const t=this.r.getValue(Br.c);if(!t||!xt(t))return[];const i=[];for(const s in t){if(s===void 0)continue;const n=t[s];let o;if(Number(s))o=Number(s);else if(Fe(s))if(Br.g.test(s)){const a=s.match(Br.g);o={start:Number(a[1]),end:Number(a[2])}}else if(Br.h.test(s)){const a=s.match(Br.h);o={host:a[1],port:Number(a[2])}}else{let a;try{a=RegExp(s)}catch{}a&&(o=a)}o&&i.push({key:o,elevateIfNeeded:n.elevateIfNeeded,onAutoForward:n.onAutoForward,label:n.label,requireLocalPort:n.requireLocalPort,protocol:n.protocol})}const r=this.r.getValue(Br.f);return r&&(this.m={elevateIfNeeded:r.elevateIfNeeded,label:r.label,onAutoForward:r.onAutoForward,requireLocalPort:r.requireLocalPort,protocol:r.protocol}),this.z(i)}z(t){function i(r,s){return or(r.key)?r.key:s.t(r.key)?r.key.start:s.u(r.key)?r.key.port:Number.MAX_VALUE}return t.sort((r,s)=>i(r,this)-i(s,this))}C(){return this.m}static providedActionToAction(t){switch(t){case jn.Notify:return Hn.Notify;case jn.OpenBrowser:return Hn.OpenBrowser;case jn.OpenBrowserOnce:return Hn.OpenBrowserOnce;case jn.OpenPreview:return Hn.OpenPreview;case jn.Silent:return Hn.Silent;case jn.Ignore:return Hn.Ignore;default:return}}async addAttributes(t,i,r){const n=this.r.inspect(Br.c).userRemoteValue;let o;!n||!xt(n)?o={}:o=Xe(n),o[`${t}`]||(o[`${t}`]={});for(const a in i)o[`${t}`][a]=i[a];return this.r.updateValue(Br.c,o,r)}},KA=class extends te{constructor(t,i,r,s,n,o,a,c,l,u){super(),this.H=t,this.I=i,this.J=r,this.L=s,this.M=n,this.N=o,this.O=a,this.P=c,this.Q=l,this.R=u,this.c=new Map,this.g=new $,this.onForwardPort=this.g.event,this.h=new $,this.onClosePort=this.h.event,this.j=new $,this.onPortName=this.j.event,this.n=new $,this.onCandidatesChanged=this.n.event,this.t=new $,this.onEnvironmentTunnelsSet=this.t.event,this.u=!1,this.w=void 0,this.z=!1,this.C=new $,this.D=new Map,this.F=new Map,this.G=[],this.U=!1,this.eb=new Date,this.configPortsAttributes=new r3(r),this.s=this.bb(),this.B(this.configPortsAttributes.onDidChangeAttributes(this.kb,this)),this.forwarded=new Map,this.f=new Map,this.H.tunnels.then(async h=>{const d=await this.getAttributes(h.map(f=>({port:f.tunnelRemotePort,host:f.tunnelRemoteHost})));for(const f of h)if(f.localAddress){const g=qi(f.tunnelRemoteHost,f.tunnelRemotePort),v=Mi(this.m??new Map,f.tunnelRemoteHost,f.tunnelRemotePort);this.forwarded.set(g,{remotePort:f.tunnelRemotePort,remoteHost:f.tunnelRemoteHost,localAddress:f.localAddress,protocol:d?.get(f.tunnelRemotePort)?.protocol??dr.Http,localUri:await this.Y(f.localAddress,d?.get(f.tunnelRemotePort)),localPort:f.tunnelLocalPort,name:d?.get(f.tunnelRemotePort)?.label,runningProcess:v?.detail,hasRunningProcess:!!v,pid:v?.pid,privacy:f.privacy,source:XA}),this.f.set(g,f)}}),this.detected=new Map,this.B(this.H.onTunnelOpened(async h=>{const d=qi(h.tunnelRemoteHost,h.tunnelRemotePort);if(!Mi(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Mi(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Mi(this.c,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){const f=Mi(this.m??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),g=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(d,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:g?.protocol??dr.Http,localUri:await this.Y(h.localAddress,g),localPort:h.tunnelLocalPort,name:g?.label,closeable:!0,runningProcess:f?.detail,hasRunningProcess:!!f,pid:f?.pid,privacy:h.privacy,source:XA})}await this.db(),this.W(!0),this.f.set(d,h),this.g.fire(this.forwarded.get(d))})),this.B(this.H.onTunnelClosed(h=>this.X(h,Eh.Other))),this.W(!1)}S(){return this.Q.extensions.find(t=>t.activationEvents?.includes(e3))?(this.R.createKey(PZ.key,!0),!0):!1}W(t){if(this.U||(t&&(this.U=!0),this.L.remoteAuthority!==void 0&&!t)||this.S())return;const r=this.B(this.Q.onDidRegisterExtensions(()=>{this.S()&&r.dispose()}))}async X(t,i){const r=qi(t.host,t.port);this.forwarded.has(r)&&(this.forwarded.delete(r),await this.db(),this.h.fire(t))}Y(t,i){if(t.startsWith("http"))return A.parse(t);const r=i?.protocol??"http";return A.parse(`${r}://${t}`)}async Z(t){const i=this.N.getWorkspace(),r=i.configuration?Is(i.configuration.path):i.folders.length>0?Is(i.folders[0].uri.path):void 0;if(r===void 0){this.O.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${t}.${this.L.remoteAuthority}.${r}`}async $(){return this.Z(Dm)}async ab(){return this.Z(QA)}async bb(){const t=this.I.get(Dm,1);if(t)return this.I.remove(Dm,1),await this.db(),t;const i=await this.$();if(i)return this.I.get(i,0)}async restoreForwarded(){if(this.cb(),this.J.getValue("remote.restoreForwardedPorts")){const t=await this.s;if(t&&t!==this.y){const i=JSON.parse(t)??[];this.O.trace(`ForwardedPorts: (TunnelModel) restoring ports ${i.map(r=>r.remotePort).join(", ")}`);for(const r of i){const s=Mi(this.detected,r.remoteHost,r.remotePort);r.source.source!==Ys.Extension&&!s||r.source.source===Ys.Extension&&s?await this.gb({remote:{host:r.remoteHost,port:r.remotePort},local:r.localPort,name:r.name,elevateIfNeeded:!0,source:r.source}):r.source.source===Ys.Extension&&!s&&this.D.set(qi(r.remoteHost,r.remotePort),r)}}}if(this.z=!0,this.C.fire(),!this.w){const t=await this.$();this.w=this.B(new le),this.w.add(this.I.onDidChangeValue(0,void 0,this.w)(async i=>{i.key===t&&(this.s=Promise.resolve(this.I.get(t,0)),await this.restoreForwarded())}))}}cb(){const t=this.I.keys(0,0).filter(i=>i.startsWith(QA));for(const i of t){const r=this.I.getNumber(i,0);if(r&&r<Date.now()){this.s=Promise.resolve(void 0);const s=i.replace(QA,Dm);this.I.remove(i,0),this.I.remove(s,0)}}}async db(){if(this.J.getValue("remote.restoreForwardedPorts")){const t=Array.from(this.forwarded.values()),i=t.map(o=>({remoteHost:o.remoteHost,remotePort:o.remotePort,localPort:o.localPort,name:o.name,localAddress:o.localAddress,localUri:o.localUri,protocol:o.protocol,source:o.source}));let r;t.length>0&&(r=JSON.stringify(i));const s=await this.$(),n=await this.ab();!r&&s&&n?(this.I.remove(s,0),this.I.remove(n,0)):r!==this.y&&s&&n&&(this.I.store(s,r,0,0),this.I.store(n,Date.now()+DZ,0,0)),this.y=r}}async fb(t,i,r){if(!t.tunnelLocalPort||!r?.requireLocalPort||t.tunnelLocalPort===i)return;const s=new Date;if(this.eb.getTime()+$Z>s.getTime())return;this.eb=s;const n=p(14591,null,i,t.tunnelRemotePort,t.tunnelLocalPort);return this.P.info(n)}async forward(t,i){return!this.z&&this.L.remoteAuthority&&await We.toPromise(this.C.event),this.gb(t,i)}async gb(t,i){await this.Q.activateByEvent(e3);const r=Mi(this.forwarded,t.remote.host,t.remote.port);i=i??(i!==null?(await this.getAttributes([t.remote]))?.get(t.remote.port):void 0);const s=t.local!==void 0?t.local:t.remote.port;let n;if(r)return this.ib(r,t,i);{const o=this.L.remoteAuthority,a=o?{getAddress:async()=>(await this.M.resolveAuthority(o)).authority}:void 0,c=qi(t.remote.host,t.remote.port);this.c.set(c,!0),t=this.hb(c,t);const l=await this.H.openTunnel(a,t.remote.host,t.remote.port,void 0,s,t.elevateIfNeeded?t.elevateIfNeeded:i?.elevateIfNeeded,t.privacy,i?.protocol);if(typeof l=="string")n=l;else if(l&&l.localAddress){const u=Mi(this.m??new Map,t.remote.host,t.remote.port),h=l.protocol?l.protocol===dr.Https?dr.Https:dr.Http:i?.protocol??dr.Http,d={remoteHost:l.tunnelRemoteHost,remotePort:l.tunnelRemotePort,localPort:l.tunnelLocalPort,name:i?.label??t.name,closeable:!0,localAddress:l.localAddress,protocol:h,localUri:await this.Y(l.localAddress,i),runningProcess:u?.detail,hasRunningProcess:!!u,pid:u?.pid,source:t.source??XA,privacy:l.privacy};return this.forwarded.set(c,d),this.f.set(c,l),this.c.delete(c),await this.db(),await this.fb(l,s,i),this.g.fire(d),l}this.c.delete(c)}return n}hb(t,i){const r=this.D.has(t)?this.D:this.F.has(t)?this.F:void 0;if(r){const s=r.get(t);r.delete(t),s&&(i.name=s.name??i.name,i.local=("local"in s?s.local:"localPort"in s?s.localPort:void 0)??i.local,i.privacy=i.privacy)}return i}async ib(t,i,r){const s=r?.label??i.name;let n;(function(a){a[a.None=0]="None",a[a.Fire=1]="Fire",a[a.Reopen=2]="Reopen"})(n||(n={}));let o=n.None;switch(s!==t.name&&(t.name=s,o=n.Fire),(r?.protocol||t.protocol!==dr.Http)&&r?.protocol!==t.protocol&&(i.source=t.source,o=n.Reopen),i.privacy&&t.privacy!==i.privacy&&(o=n.Reopen),o){case n.Fire:{this.g.fire();break}case n.Reopen:await this.close(t.remoteHost,t.remotePort,Eh.User),await this.gb(i,r)}return Mi(this.f,i.remote.host,i.remote.port)}async name(t,i,r){const s=Mi(this.forwarded,t,i),n=qi(t,i);if(s){s.name=r,await this.db(),this.j.fire({host:t,port:i});return}else this.detected.has(n)&&(this.detected.get(n).name=r,this.j.fire({host:t,port:i}))}async close(t,i,r){const s=qi(t,i),n=this.forwarded.get(s);return r===Eh.AutoForwardEnd&&n&&n.source.source===Ys.Auto&&this.F.set(s,{local:n.localPort,name:n.name,privacy:n.privacy}),await this.H.closeTunnel(t,i),this.X({host:t,port:i},r)}address(t,i){const r=qi(t,i);return(this.forwarded.get(r)||this.detected.get(r))?.localAddress}get environmentTunnelsSet(){return this.u}addEnvironmentTunnels(t){if(t)for(const i of t){const r=Mi(this.m??new Map,i.remoteAddress.host,i.remoteAddress.port),s=typeof i.localAddress=="string"?i.localAddress:qi(i.localAddress.host,i.localAddress.port);this.detected.set(qi(i.remoteAddress.host,i.remoteAddress.port),{remoteHost:i.remoteAddress.host,remotePort:i.remoteAddress.port,localAddress:s,protocol:dr.Http,localUri:this.Y(s),closeable:!1,runningProcess:r?.detail,hasRunningProcess:!!r,pid:r?.pid,privacy:cs.ConstantPrivate,source:{source:Ys.Extension,description:p(14592,null)}}),this.H.setEnvironmentTunnel(i.remoteAddress.host,i.remoteAddress.port,s,cs.ConstantPrivate,dr.Http)}this.u=!0,this.t.fire(),this.g.fire()}setCandidateFilter(t){this.r=t}async setCandidates(t){let i=t;this.r&&(i=await this.r(t));const r=this.jb(i);this.O.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(r.values()).map(s=>s.port).join(", ")}`),this.n.fire(r)}jb(t){const i=this.m??new Map,r=new Map;return this.m=r,t.forEach(s=>{const n=qi(s.host,s.port);r.set(n,{host:s.host,port:s.port,detail:s.detail,pid:s.pid}),i.has(n)&&i.delete(n);const o=Mi(this.forwarded,s.host,s.port);o&&(o.runningProcess=s.detail,o.hasRunningProcess=!0,o.pid=s.pid)}),i.forEach((s,n)=>{const o=t3(n);if(!o)return;const a=Mi(this.forwarded,o.host,o.port);a&&(a.runningProcess=void 0,a.hasRunningProcess=!1,a.pid=void 0);const c=Mi(this.detected,o.host,o.port);c&&(c.runningProcess=void 0,c.hasRunningProcess=!1,c.pid=void 0)}),i}get candidates(){return this.m?Array.from(this.m.values()):[]}get candidatesOrUndefined(){return this.m?this.candidates:void 0}async kb(){const t=Array.from(this.forwarded.values()),i=await this.getAttributes(t.map(r=>({port:r.remotePort,host:r.remoteHost})),!1);if(i)for(const r of t){const s=i.get(r.remotePort);(s?.protocol||r.protocol!==dr.Http)&&s?.protocol!==r.protocol&&await this.gb({remote:{host:r.remoteHost,port:r.remotePort},local:r.localPort,name:r.name,source:r.source},s),s&&s.label&&s.label!==r.name&&await this.name(r.remoteHost,r.remotePort,s.label)}}async getAttributes(t,i=!0){const r=new Map,s=new Map;t.forEach(l=>{const u=Mi(this.m??new Map,Hu[0],l.port)??l;if(u){r.set(l.port,u);const h=TZ(u)?u.pid:void 0;s.has(h)||s.set(h,[]),s.get(h)?.push(l.port)}});const n=new Map;if(t.forEach(l=>{const u=this.configPortsAttributes.getAttributes(l.port,l.host,r.get(l.port)?.detail);u&&n.set(l.port,u)}),this.G.length===0||!i)return n.size>0?n:void 0;const o=await Promise.all(this.G.flatMap(l=>Array.from(s.entries()).map(u=>{const h=u[1],d=r.get(h[0]);return l.providePortAttributes(h,d?.pid,d?.detail,Je.None)}))),a=new Map;if(o.forEach(l=>l.forEach(u=>{u&&a.set(u.port,u)})),!n&&!a)return;const c=new Map;return t.forEach(l=>{const u=n.get(l.port),h=a.get(l.port);c.set(l.port,{elevateIfNeeded:u?.elevateIfNeeded,label:u?.label,onAutoForward:u?.onAutoForward??r3.providedActionToAction(h?.autoForwardAction),requireLocalPort:u?.requireLocalPort,protocol:u?.protocol})}),c}addAttributesProvider(t){this.G.push(t)}};__decorate([Ad(1e3)],KA.prototype,"db",null),KA=__decorate([__param(0,jU),__param(1,kZ),__param(2,Ds),__param(3,XC),__param(4,nj),__param(5,Dd),__param(6,Ce),__param(7,EZ),__param(8,YF),__param(9,ZE)],KA);function MZ(e){const t=e.trim().split(`
`),i=[];return t.forEach(s=>{const n=/\/proc\/(\d+)\/fd\/\d+ -> socket:\[(\d+)\]/.exec(s);n&&n.length>=3&&i.push({pid:parseInt(n[1],10),socket:parseInt(n[2],10)})}),i.reduce((s,n)=>(s[n.socket]=n,s),{})}function NZ(...e){const t=[].concat(...e.map(RZ));return[...new Map(t.filter(i=>i.st==="0A").map(i=>{const r=i.local_address.split(":");return{socket:parseInt(i.inode,10),ip:LZ(r[0]),port:parseInt(r[1],16)}}).map(i=>[i.ip+":"+i.port,i])).values()]}function LZ(e){let t="";if(e.length===8)for(let i=e.length-2;i>=0;i-=2)t+=parseInt(e.substr(i,2),16),i!==0&&(t+=".");else for(let i=0;i<e.length;i+=8){const r=e.substring(i,i+8);let s="";for(let n=8;n>=2;n-=2)s+=r.substring(n-2,n),(n===6||n===2)&&(s=parseInt(s,16).toString(16),t+=`${s}`,s="",i+n!==e.length-6&&(t+=":"))}return t}function RZ(e){const t=e.trim().split(`
`),i=t.shift().trim().split(/\s+/).filter(s=>s!=="rx_queue"&&s!=="tm->when");return t.map(s=>s.trim().split(/\s+/).reduce((n,o,a)=>(n[i[a]||a]=o,n),{}))}function OZ(e){return e.length>500?!1:!!e.match(/.*\.vscode-server-[a-zA-Z]+\/bin.*/)||e.indexOf("out/server-main.js")!==-1||e.indexOf("_productName=VSCode")!==-1}function FZ(e){const t=e.trim().split(`
`),i=[];return t.forEach(r=>{const s=/^\d+\s+\D+\s+root\s+(\d+)\s+(\d+).+\d+\:\d+\:\d+\s+(.+)$/.exec(r);s&&s.length>=4&&i.push({pid:parseInt(s[1],10),ppid:parseInt(s[2]),cmd:s[3]})}),i}async function jZ(e,t,i){const r=i.reduce((n,o)=>(n[o.pid]=o,n),{}),s=[];return e.forEach(({socket:n,ip:o,port:a})=>{const c=t[n]?t[n].pid:void 0,l=c?r[c]?.cmd:void 0;c&&l&&!OZ(l)&&s.push({host:o,port:a,detail:l,pid:c})}),s}function UZ(e,t,i){const r=new Map,s=FZ(t);for(const n of e){const o=i.get(n.port);if(o){r.set(n.port,o);continue}const a=s.find(c=>c.cmd.includes(`${n.port}`));if(a){let c=a,l;do l=s.find(u=>u.ppid===c.pid),l&&(c=l);while(l);r.set(n.port,{host:n.ip,port:n.port,pid:c.pid,detail:c.cmd,ppid:c.ppid})}else r.set(n.port,{host:n.ip,port:n.port,ppid:Number.MAX_VALUE})}return r}var e4=class extends hg{constructor(t,i,r,s){super(t,i,r),this.D=i,this.F=s,this.y=void 0,this.z=new Map,this.C=!1,Et&&i.remote.isRemote&&i.remote.authority&&(this.a.$setRemoteTunnelService(process.pid),this.H())}async $registerCandidateFinder(t){if(t&&this.C)return;this.C=t;let i;this.y&&(i=this.y,await this.a.$onFoundNewCandidates(this.y));const r=new ER;let s=0;for(;this.C;){const n=new Date().getTime(),o=(await this.I()).filter(l=>qo(l.host)||Us(l.host));this.s.trace(`ForwardedPorts: (ExtHostTunnelService) found candidate ports ${o.map(l=>l.port).join(", ")}`);const a=new Date().getTime()-n;this.s.trace(`ForwardedPorts: (ExtHostTunnelService) candidate port scan took ${a} ms.`),s++>3&&r.update(a),(!i||JSON.stringify(i)!==JSON.stringify(o))&&(i=o,await this.a.$onFoundNewCandidates(i));const c=this.G(r.value);this.s.trace(`ForwardedPorts: (ExtHostTunnelService) next candidate port scan in ${c} ms.`),await new Promise(l=>setTimeout(()=>l(),c))}}G(t){return Math.max(t*20,2e3)}async H(){this.y=await this.I(),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) Initial candidates found: ${this.y.map(t=>t.port).join(", ")}`)}async I(){let t="",i="";try{t=await yh.promises.readFile("/proc/net/tcp","utf8"),i=await yh.promises.readFile("/proc/net/tcp6","utf8")}catch{}const r=NZ(t,i),s=await new Promise(d=>{FD("ls -l /proc/[0-9]*/fd/[0-9]* | grep socket:",(f,g,v)=>{d(g)})}),n=MZ(s),o=await Qe.readdir("/proc"),a=[];for(const d of o)try{const f=Number(d),g=wt(A.file("/proc"),d);if((await yh.promises.stat(g.fsPath)).isDirectory()&&!isNaN(f)){const b=await yh.promises.readlink(wt(g,"cwd").fsPath),x=await yh.promises.readFile(wt(g,"cmdline").fsPath,"utf8");a.push({pid:f,cwd:b,cmd:x})}}catch{}const c=[],l=r.filter(d=>{const f=n[d.socket];return f||c.push(d),f}),u=jZ(l,n,a);let h;if(this.s.trace(`ForwardedPorts: (ExtHostTunnelService) number of possible root ports ${c.length}`),c.length>0){const d=await new Promise(f=>{FD("ps -F -A -l | grep root",(g,v,b)=>{f(v)})});this.z=UZ(c,d,this.z),h=Array.from(this.z.values()),this.s.trace(`ForwardedPorts: (ExtHostTunnelService) heuristic ports ${h.map(f=>f.port).join(", ")}`)}return u.then(d=>h?d.concat(h):d)}w(t){return async i=>{const r=new GD({commit:this.D.commit,quality:this.D.quality,logService:this.s,ipcLogger:null,remoteSocketFactoryService:{_serviceBrand:void 0,async connect(n,o,a,c){const l=await t.makeConnection();return BZ.connect(l,o,a,c)},register(){throw new Error("not implemented")}},addressProvider:{getAddress(){return Promise.resolve({connectTo:new K6(0),connectionToken:t.connectionToken})}},signService:this.F},"localhost",i.remoteAddress.host||"localhost",i.remoteAddress.port,i.localAddressPort);await r.waitForReady();const s=new $;return{localAddress:t3(r.localAddress)??r.localAddress,remoteAddress:{port:r.tunnelRemotePort,host:r.tunnelRemoteHost},onDidDispose:s.event,dispose:()=>{r.dispose(),s.fire(),s.dispose()}}}}};e4=__decorate([__param(0,De),__param(1,At),__param(2,Ce),__param(3,Ah)],e4);var BZ=class $P extends eZ{static connect(t,i,r,s){const n=new le,o={onClose:n.add(new $),onData:n.add(new $),onEnd:n.add(new $)};n.add(t.onDidReceiveMessage(c=>o.onData.fire(_.wrap(c)))),n.add(t.onDidEnd(()=>o.onEnd.fire())),n.add(t.onDidClose(c=>o.onClose.fire({type:0,error:c,hadError:!!c})));const a=new $P(t,s,o);return a.B(n),KG(a,i,r,s,o)}constructor(t,i,r){super(i,r),this.n=t}write(t){this.n.send(t.buffer)}h(){this.n.end()}async drain(){await this.n.drain?.()}};import*as ra from"fs";var zZ=class extends mb{constructor(){super(...arguments),this.i=null}async g(e){const t=await super.g(e);if(t.scheme!==q.file)return t;if(this.b.skipWorkspaceStorageLock)return this.d.info(`Skipping acquiring lock for ${t.fsPath}.`),t;const i=t.fsPath;let r=0;do{let s;r===0?s=i:s=/[/\\]$/.test(i)?`${i.substr(0,i.length-1)}-${r}`:`${i}-${r}`,await HZ(s);const n=He(s,"vscode.lock"),o=await n3(this.d,n,!1);if(o)return this.i=o,process.on("exit",()=>{o.dispose()}),A.file(s);r++}while(r<10);return t}onWillDeactivateAll(){this.i?.setWillRelease(6e3)}};async function HZ(e){try{await ra.promises.stat(e);return}catch{}try{await ra.promises.mkdir(e,{recursive:!0})}catch{}}var WZ=1e3,s3=10*60*1e3,_Z=class extends te{constructor(e,t){super(),this.b=e,this.c=t,this.a=this.B(new ox),this.a.cancelAndSet(async()=>{const i=await t4(e,t);(!i||i.pid!==process.pid)&&(e.info(`Lock '${t}': The lock was lost unexpectedly.`),this.a.cancel());try{await ra.promises.utimes(t,new Date,new Date)}catch(r){e.error(r),e.info(`Lock '${t}': Could not update mtime.`)}},WZ)}dispose(){super.dispose();try{ra.unlinkSync(this.c)}catch{}}async setWillRelease(e){this.b.info(`Lock '${this.c}': Marking the lockfile as scheduled to be released in ${e} ms.`);try{const t={pid:process.pid,willReleaseAt:Date.now()+e};await Qe.writeFile(this.c,JSON.stringify(t),{flag:"w"})}catch(t){this.b.error(t)}}};async function n3(e,t,i){try{const s={pid:process.pid,willReleaseAt:0};await Qe.writeFile(t,JSON.stringify(s),{flag:"wx"})}catch(s){e.error(s)}const r=await t4(e,t);return!r||r.pid!==process.pid?i?(e.info(`Lock '${t}': Could not acquire lock, giving up.`),null):(e.info(`Lock '${t}': Could not acquire lock, checking if the file is stale.`),qZ(e,t)):(e.info(`Lock '${t}': Lock acquired.`),new _Z(e,t))}async function t4(e,t){let i;try{i=await ra.promises.readFile(t)}catch(r){return e.error(r),null}try{return JSON.parse(String(i))}catch(r){return e.error(r),null}}async function i4(e,t){let i;try{i=await ra.promises.stat(t)}catch(r){return e.error(r),0}return i.mtime.getTime()}function VZ(e){try{return process.kill(e,0),!0}catch{return!1}}async function qZ(e,t){const i=await t4(e,t);if(!i)return e.info(`Lock '${t}': Could not read pid of lock holder.`),Sh(e,t);if(i.willReleaseAt){let a=i.willReleaseAt-Date.now();if(a<5e3){for(a>0?e.info(`Lock '${t}': The lockfile is scheduled to be released in ${a} ms.`):e.info(`Lock '${t}': The lockfile is scheduled to have been released.`);a>0;){if(await ni(Math.min(100,a)),await i4(e,t)===0)return Sh(e,t);a=i.willReleaseAt-Date.now()}return Sh(e,t)}}if(!VZ(i.pid))return e.info(`Lock '${t}': The pid ${i.pid} appears to be gone.`),Sh(e,t);const r=await i4(e,t),s=Date.now()-r;if(s<=s3)return e.info(`Lock '${t}': The lock does not look stale, elapsed: ${s} ms, giving up.`),null;e.info(`Lock '${t}': The lock looks stale, waiting for 2s.`),await ni(2e3);const n=await i4(e,t),o=Date.now()-n;return o<=s3?(e.info(`Lock '${t}': The lock does not look stale, elapsed: ${o} ms, giving up.`),null):(e.info(`Lock '${t}': The lock looks stale even after waiting for 2s.`),Sh(e,t))}async function Sh(e,t){e.info(`Lock '${t}': Deleting a stale lock.`);try{await ra.promises.unlink(t)}catch{}return n3(e,t,!0)}var Qs;(function(e){e[e.Trace=0]="Trace",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical",e[e.Off=6]="Off"})(Qs||(Qs={}));async function GZ(e,t,i,r,s){try{const n=await import("@vscode/spdlog");n.setFlushOn(Qs.Trace);const o=await n.createAsyncRotatingLogger(e,t,i,r);return s?o.clearFormatters():o.setPattern("%Y-%m-%d %H:%M:%S.%e [%l] %v"),o}catch(n){console.error(n)}return null}function o3(e,t,i){switch(t){case ie.Trace:e.trace(i);break;case ie.Debug:e.debug(i);break;case ie.Info:e.info(i);break;case ie.Warning:e.warn(i);break;case ie.Error:e.error(i);break;case ie.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function a3(e,t){switch(t){case ie.Trace:e.setLevel(Qs.Trace);break;case ie.Debug:e.setLevel(Qs.Debug);break;case ie.Info:e.setLevel(Qs.Info);break;case ie.Warning:e.setLevel(Qs.Warning);break;case ie.Error:e.setLevel(Qs.Error);break;case ie.Off:e.setLevel(Qs.Off);break;default:throw new Error(`Invalid log level ${t}`)}}var ZZ=class extends lv{constructor(e,t,i,r,s){super(),this.n=[],this.setLevel(s),this.r=this.t(e,t,i,r),this.B(this.onDidChangeLogLevel(n=>{this.s&&a3(this.s,n)}))}async t(e,t,i,r){const s=i?6:1,n=30/s*vk.MB,o=await GZ(e,t,n,s,r);if(o){this.s=o,a3(this.s,this.getLevel());for(const{level:a,message:c}of this.n)o3(this.s,a,c);this.n=[]}}m(e,t){this.s?o3(this.s,e,t):this.getLevel()<=e&&this.n.push({level:e,message:t})}flush(){this.s?this.w():this.r.then(()=>this.w())}dispose(){this.s?this.y():this.r.then(()=>this.y()),super.dispose()}w(){this.s&&this.s.flush()}y(){this.s&&(this.s.drop(),this.s=void 0)}},JZ=class extends jg{t(e,t,i){return e.scheme===q.file?new ZZ(i?.name||kt(),e.fsPath,!i?.donotRotate,!!i?.donotUseFormatters,t):super.t(e,t,i)}registerLogger(e){super.registerLogger(e),this.c.$registerLogger(e)}deregisterLogger(e){super.deregisterLogger(e),this.c.$deregisterLogger(e)}};import{homedir as YZ}from"os";var QZ=class extends Lg{m(){return YZ()}},XZ=class extends te{constructor(e,t=[]){super(),this.a=new lR([e,...t]),this.B(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},r4=class extends XZ{constructor(t,i,r){const s=r.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=r.remote.isRemote?p(2931,null):p(t?2932:2933,null);super(i.createLogger(s,{name:n}))}};r4=__decorate([__param(1,vn),__param(2,At)],r4);import{spawn as KZ}from"child_process";import{readFile as eJ}from"fs/promises";import{homedir as tJ}from"os";function iJ(e){const t=new Map,r=e.replace(/\r\n?/g,`
`).split(`
`);for(let o of r){if(o=o.trim(),!o||o.startsWith("#"))continue;const[a,c]=s(o);a&&t.set(a,c)}return t;function s(o){o.startsWith("export ")&&(o=o.substring(7).trim());const a=n(o,h=>h==="="||h===":");if(a===-1)return[null,null];const c=o.substring(0,a).trim();let l=o.substring(a+1).trim();const u=n(l,h=>h==="#");if(u!==-1&&(l=l.substring(0,u).trim()),l.length>=2){const h=l[0],d=l[l.length-1];(h==='"'&&d==='"'||h==="'"&&d==="'"||h==="`"&&d==="`")&&(l=l.substring(1,l.length-1),h==='"'&&(l=l.replace(/\\n/g,`
`).replace(/\\r/g,"\r")))}return[c,l]}function n(o,a){let c=!1,l="";for(let u=0;u<o.length;u++){const h=o[u];if(c)h===l&&o[u-1]!=="\\"&&(c=!1);else if(h==='"'||h==="'"||h==="`")c=!0,l=h;else if(a(h))return u}return-1}}import{Transform as rJ}from"stream";var c3=class extends rJ{constructor(e){if(super(),typeof e=="number")this.b=e,this.c=1;else{const t=Buffer.isBuffer(e)?e:Buffer.from(e);this.b=t.length===1?t[0]:t,this.c=t.length}}_transform(e,t,i){this.a?this.a=Buffer.concat([this.a,e]):this.a=e;let r=0;for(;r<this.a.length;){const s=typeof this.b=="number"?this.a.indexOf(this.b,r):dx(this.a,this.b,r);if(s===-1)break;this.push(this.a.slice(r,s+this.c)),r=s+this.c}this.a=r===this.a.length?void 0:this.a.slice(r),i()}_flush(e){this.a&&this.push(this.a),e()}},l3;(function(e){e[e.Running=0]="Running",e[e.StdinEnded=1]="StdinEnded",e[e.KilledPolite=2]="KilledPolite",e[e.KilledForceful=3]="KilledForceful"})(l3||(l3={}));var sJ=class DP{static{this.a=1e4}get stopped(){return this.b!==0}constructor(t,i=DP.a){this.d=t,this.e=i,this.b=0}stop(){if(this.b===0){try{this.d.stdin.end()}catch{}this.c=new nx(()=>this.f(),this.e)}else this.c?.dispose(),this.g()}async f(){this.b=2,this.c=new nx(()=>this.g(),this.e),this.d.pid?je||await Fy(this.d.pid,!1).catch(()=>{this.d.kill("SIGTERM")}):this.d.kill("SIGTERM")}async g(){this.b=3,this.d.pid?await Fy(this.d.pid,!0).catch(()=>{this.d.kill("SIGKILL")}):this.d.kill()}write(t){this.stopped||this.d.stdin.write(t+`
`)}dispose(){this.c?.dispose()}},s4=class extends zg{constructor(t,i,r){super(t,r,i),this.r=this.B(new ga)}n(t,i){i.type===1?this.u(t,i):super.n(t,i)}$stopMcp(t){const i=this.r.get(t);i?i.stop():super.$stopMcp(t)}$sendMessage(t,i){const r=this.r.get(t);r?r.write(i):super.$sendMessage(t,i)}async u(t,i){const r=a=>this.b.$onDidChangeState(t,{state:3,code:a.hasOwnProperty("code")?String(a.code):void 0,message:typeof a=="string"?a:a.message}),s={...process.env};if(i.envFile)try{for(const[a,c]of iJ(await eJ(i.envFile,"utf-8")))s[a]=c}catch(a){r(`Failed to read envFile '${i.envFile}': ${a.message}`);return}for(const[a,c]of Object.entries(i.env))s[a]=c===null?void 0:String(c);let n;try{const a=tJ();let c=i.cwd?Ag(i.cwd,a):a;ar(c)||(c=He(a,c));const{executable:l,args:u,shell:h}=await oJ(Ag(i.command,a),i.args.map(d=>Ag(d,a)),c,s);this.b.$onDidPublishLog(t,ie.Debug,`Server command line: ${l} ${u.join(" ")}`),n=KZ(l,u,{stdio:"pipe",cwd:c,env:s,shell:h})}catch(a){r(a);return}const o=new sJ(n);this.b.$onDidChangeState(t,{state:1}),n.stdout.pipe(new c3(`
`)).on("data",a=>this.b.$onDidReceiveMessage(t,a.toString())),n.stdin.on("error",r),n.stdout.on("error",r),n.stderr.pipe(new c3(`
`)).on("data",a=>this.b.$onDidPublishLog(t,ie.Warning,`[server stderr] ${a.toString().trimEnd()}`)),n.on("spawn",()=>this.b.$onDidChangeState(t,{state:2})),n.on("error",a=>{r(a)}),n.on("exit",a=>{this.r.deleteAndDispose(t),a===0||o.stopped?this.b.$onDidChangeState(t,{state:0}):this.b.$onDidChangeState(t,{state:3,message:`Process exited with code ${a}`})}),this.r.set(t,o)}};s4=__decorate([__param(0,De),__param(1,At),__param(2,Ce)],s4);var nJ=/\.(bat|cmd)$/i,oJ=async(e,t,i,r)=>{if(process.platform!=="win32")return{executable:e,args:t,shell:!1};const s=await Hg(e,i,void 0,r);if(s&&nJ.test(s)){const n=o=>o.includes(" ")?`"${o}"`:o;return{executable:n(s),args:t.map(n),shell:!0}}return{executable:e,args:t,shell:!1}};import{URL as aJ}from"url";import{randomBytes as cJ}from"crypto";import*as lJ from"http";import{URL as uJ}from"url";var hJ=class{constructor(e,t,i){this.e=e,this.f=t,this.g=i,this.c=cJ(16).toString("base64");const r=new Xi;this.b=r.p,this.a=lJ.createServer((s,n)=>{const o=new uJ(s.url,`http://${s.headers.host}`);switch(o.pathname){case"/":{const a=o.searchParams.get("code")??void 0,c=o.searchParams.get("state")??void 0,l=o.searchParams.get("error")??void 0;if(l){n.writeHead(302,{location:`/done?error=${o.searchParams.get("error_description")||l}`}),n.end(),r.error(new Error(l));break}if(!a||!c){n.writeHead(400),n.end();break}if(this.state!==c){n.writeHead(302,{location:`/done?error=${encodeURIComponent("State does not match.")}`}),n.end(),r.error(new Error("State does not match."));break}r.complete({code:a,state:c}),n.writeHead(302,{location:"/done"}),n.end();break}case"/done":this.h(n);break;default:n.writeHead(404),n.end();break}})}get state(){return this.c}get redirectUri(){if(this.d===void 0)throw new Error("Server is not started yet");return`http://127.0.0.1:${this.d}/`}h(e){const t=this.getHtml();e.writeHead(200,{"Content-Type":"text/html","Content-Length":Buffer.byteLength(t,"utf8")}),e.end(t)}start(){const e=new Xi;if(this.a.listening)throw new Error("Server is already started");const t=setTimeout(()=>{e.error(new Error("Timeout waiting for port"))},5e3);return this.a.on("listening",()=>{const i=this.a.address();if(typeof i=="string")this.d=parseInt(i);else if(i instanceof Object)this.d=i.port;else throw new Error("Unable to determine port");clearTimeout(t),e.complete()}),this.a.on("error",i=>{if("code"in i&&i.code==="EADDRINUSE"){this.e.error("Address in use, retrying with a different port..."),this.a.listen(0,"127.0.0.1");return}clearTimeout(t),e.error(new Error(`Error listening to server: ${i}`))}),this.a.on("close",()=>{e.error(new Error("Closed"))}),this.a.listen(Cb,"127.0.0.1"),e.p}stop(){const e=new Xi;return this.a.listening?(this.a.close(t=>{t?e.error(t):e.complete()}),setTimeout(()=>{e.isResolved||e.error(new Error("Timeout waiting for server to close"))},5e3),e.p):(e.complete(),e.p)}waitForOAuthResponse(){return this.b}getHtml(){let e="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQABAMAAACNMzawAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAJ1BMVEUAAAD///9Qm8+ozed8tNsWer+Lvd9trNfF3u9Ck8slgsMzi8eZxeM/Qa6mAAAAAXRSTlMAQObYZgAAAAFiS0dEAf8CLd4AAAAHdElNRQfiCwYULRt0g+ZLAAAJRUlEQVR42u3SUY0CQRREUSy0hSZtBA+wfOwv4wAPYwAJSMAfAthkB6YD79HnKqikzmYjSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIk6cmKhg4AAASAABAAAkAACAABIAAEgAAQAAJAAAgAAaBvBVAjtV2wfFe1ogcA+0gdFgBoe60IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnAjAP/1MkWoAvBvAsUTqBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAgAASAABIAAEAACQAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKA7gDlbFwC6AijZagAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQDM2boA0BXAqAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIATARAAAkAAvF7N1hWArgBKthoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfBrAlK0bAF0BjBoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4EQABIAAEwOtN2boB0BVAyVYDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgE8DqNm6AtAVwKgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAEwEQAAJAAPzd7xypMwDvBnAskToBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAIAAkAACAABIAAEgAAQAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAkAACAABIAAEgAAQAAJAAAgAASAABIAAEAACQAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBKBGarsAwK5qRQ8ANGYAACAABIAAEAACQAAIAAEgAASAABAAAkDfCUCSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJEmSJC3uDtO80OSql+i8AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTExLTA2VDIwOjQ1OjI3KzAwOjAwEjLurQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0xMS0wNlQyMDo0NToyNyswMDowMGNvVhEAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC')";return this.g==="Visual Studio Code"?e="url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxtYXNrIGlkPSJtYXNrMCIgbWFzay10eXBlPSJhbHBoYSIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE4MS41MzQgMjU0LjI1MkMxODUuNTY2IDI1NS44MjMgMTkwLjE2NCAyNTUuNzIyIDE5NC4yMzQgMjUzLjc2NEwyNDYuOTQgMjI4LjQwM0MyNTIuNDc4IDIyNS43MzggMjU2IDIyMC4xMzIgMjU2IDIxMy45ODNWNDIuMDE4MUMyNTYgMzUuODY4OSAyNTIuNDc4IDMwLjI2MzggMjQ2Ljk0IDI3LjU5ODhMMTk0LjIzNCAyLjIzNjgxQzE4OC44OTMgLTAuMzMzMTMyIDE4Mi42NDIgMC4yOTYzNDQgMTc3Ljk1NSAzLjcwNDE4QzE3Ny4yODUgNC4xOTEgMTc2LjY0NyA0LjczNDU0IDE3Ni4wNDkgNS4zMzM1NEw3NS4xNDkgOTcuMzg2MkwzMS4xOTkyIDY0LjAyNDdDMjcuMTA3OSA2MC45MTkxIDIxLjM4NTMgNjEuMTczNSAxNy41ODU1IDY0LjYzTDMuNDg5MzYgNzcuNDUyNUMtMS4xNTg1MyA4MS42ODA1IC0xLjE2Mzg2IDg4Ljk5MjYgMy40Nzc4NSA5My4yMjc0TDQxLjU5MjYgMTI4TDMuNDc3ODUgMTYyLjc3M0MtMS4xNjM4NiAxNjcuMDA4IC0xLjE1ODUzIDE3NC4zMiAzLjQ4OTM2IDE3OC41NDhMMTcuNTg1NSAxOTEuMzdDMjEuMzg1MyAxOTQuODI3IDI3LjEwNzkgMTk1LjA4MSAzMS4xOTkyIDE5MS45NzZMNzUuMTQ5IDE1OC42MTRMMTc2LjA0OSAyNTAuNjY3QzE3Ny42NDUgMjUyLjI2NCAxNzkuNTE5IDI1My40NjcgMTgxLjUzNCAyNTQuMjUyWk0xOTIuMDM5IDY5Ljg4NTNMMTE1LjQ3OSAxMjhMMTkyLjAzOSAxODYuMTE1VjY5Ljg4NTNaIiBmaWxsPSJ3aGl0ZSIvPgo8L21hc2s+CjxnIG1hc2s9InVybCgjbWFzazApIj4KPHBhdGggZD0iTTI0Ni45NCAyNy42MzgzTDE5NC4xOTMgMi4yNDEzOEMxODguMDg4IC0wLjY5ODMwMiAxODAuNzkxIDAuNTQxNzIxIDE3NS45OTkgNS4zMzMzMkwzLjMyMzcxIDE2Mi43NzNDLTEuMzIwODIgMTY3LjAwOCAtMS4zMTU0OCAxNzQuMzIgMy4zMzUyMyAxNzguNTQ4TDE3LjQzOTkgMTkxLjM3QzIxLjI0MjEgMTk0LjgyNyAyNi45NjgyIDE5NS4wODEgMzEuMDYxOSAxOTEuOTc2TDIzOS4wMDMgMzQuMjI2OUMyNDUuOTc5IDI4LjkzNDcgMjU1Ljk5OSAzMy45MTAzIDI1NS45OTkgNDIuNjY2N1Y0Mi4wNTQzQzI1NS45OTkgMzUuOTA3OCAyNTIuNDc4IDMwLjMwNDcgMjQ2Ljk0IDI3LjYzODNaIiBmaWxsPSIjMDA2NUE5Ii8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2QpIj4KPHBhdGggZD0iTTI0Ni45NCAyMjguMzYyTDE5NC4xOTMgMjUzLjc1OUMxODguMDg4IDI1Ni42OTggMTgwLjc5MSAyNTUuNDU4IDE3NS45OTkgMjUwLjY2N0wzLjMyMzcxIDkzLjIyNzJDLTEuMzIwODIgODguOTkyNSAtMS4zMTU0OCA4MS42ODAyIDMuMzM1MjMgNzcuNDUyM0wxNy40Mzk5IDY0LjYyOThDMjEuMjQyMSA2MS4xNzMzIDI2Ljk2ODIgNjAuOTE4OCAzMS4wNjE5IDY0LjAyNDVMMjM5LjAwMyAyMjEuNzczQzI0NS45NzkgMjI3LjA2NSAyNTUuOTk5IDIyMi4wOSAyNTUuOTk5IDIxMy4zMzNWMjEzLjk0NkMyNTUuOTk5IDIyMC4wOTIgMjUyLjQ3OCAyMjUuNjk1IDI0Ni45NCAyMjguMzYyWiIgZmlsbD0iIzAwN0FDQyIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIxX2QpIj4KPHBhdGggZD0iTTE5NC4xOTYgMjUzLjc2M0MxODguMDg5IDI1Ni43IDE4MC43OTIgMjU1LjQ1OSAxNzYgMjUwLjY2N0MxODEuOTA0IDI1Ni41NzEgMTkyIDI1Mi4zODkgMTkyIDI0NC4wMzlWMTEuOTYwNkMxOTIgMy42MTA1NyAxODEuOTA0IC0wLjU3MTE3NSAxNzYgNS4zMzMyMUMxODAuNzkyIDAuNTQxMTY2IDE4OC4wODkgLTAuNzAwNjA3IDE5NC4xOTYgMi4yMzY0OEwyNDYuOTM0IDI3LjU5ODVDMjUyLjQ3NiAzMC4yNjM1IDI1NiAzNS44Njg2IDI1NiA0Mi4wMTc4VjIxMy45ODNDMjU2IDIyMC4xMzIgMjUyLjQ3NiAyMjUuNzM3IDI0Ni45MzQgMjI4LjQwMkwxOTQuMTk2IDI1My43NjNaIiBmaWxsPSIjMUY5Q0YwIi8+CjwvZz4KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOm92ZXJsYXkiIG9wYWNpdHk9IjAuMjUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE4MS4zNzggMjU0LjI1MkMxODUuNDEgMjU1LjgyMiAxOTAuMDA4IDI1NS43MjIgMTk0LjA3NyAyNTMuNzY0TDI0Ni43ODMgMjI4LjQwMkMyNTIuMzIyIDIyNS43MzcgMjU1Ljg0NCAyMjAuMTMyIDI1NS44NDQgMjEzLjk4M1Y0Mi4wMTc5QzI1NS44NDQgMzUuODY4NyAyNTIuMzIyIDMwLjI2MzYgMjQ2Ljc4NCAyNy41OTg2TDE5NC4wNzcgMi4yMzY2NUMxODguNzM3IC0wLjMzMzI5OSAxODIuNDg2IDAuMjk2MTc3IDE3Ny43OTggMy43MDQwMUMxNzcuMTI5IDQuMTkwODMgMTc2LjQ5MSA0LjczNDM3IDE3NS44OTIgNS4zMzMzN0w3NC45OTI3IDk3LjM4NkwzMS4wNDI5IDY0LjAyNDVDMjYuOTUxNyA2MC45MTg5IDIxLjIyOSA2MS4xNzM0IDE3LjQyOTIgNjQuNjI5OEwzLjMzMzExIDc3LjQ1MjNDLTEuMzE0NzggODEuNjgwMyAtMS4zMjAxMSA4OC45OTI1IDMuMzIxNiA5My4yMjczTDQxLjQzNjQgMTI4TDMuMzIxNiAxNjIuNzczQy0xLjMyMDExIDE2Ny4wMDggLTEuMzE0NzggMTc0LjMyIDMuMzMzMTEgMTc4LjU0OEwxNy40MjkyIDE5MS4zN0MyMS4yMjkgMTk0LjgyNyAyNi45NTE3IDE5NS4wODEgMzEuMDQyOSAxOTEuOTc2TDc0Ljk5MjcgMTU4LjYxNEwxNzUuODkyIDI1MC42NjdDMTc3LjQ4OCAyNTIuMjY0IDE3OS4zNjMgMjUzLjQ2NyAxODEuMzc4IDI1NC4yNTJaTTE5MS44ODMgNjkuODg1MUwxMTUuMzIzIDEyOEwxOTEuODgzIDE4Ni4xMTVWNjkuODg1MVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiLz4KPC9nPgo8L2c+CjxkZWZzPgo8ZmlsdGVyIGlkPSJmaWx0ZXIwX2QiIHg9Ii0yMS40ODk2IiB5PSI0MC41MjI1IiB3aWR0aD0iMjk4LjgyMiIgaGVpZ2h0PSIyMzYuMTQ5IiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIi8+CjxmZU9mZnNldC8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEwLjY2NjciLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMjUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJvdmVybGF5IiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3ciLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3ciIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjFfZCIgeD0iMTU0LjY2NyIgeT0iLTIwLjY3MzUiIHdpZHRoPSIxMjIuNjY3IiBoZWlnaHQ9IjI5Ny4zNDciIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiLz4KPGZlT2Zmc2V0Lz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTAuNjY2NyIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4yNSAwIi8+CjxmZUJsZW5kIG1vZGU9Im92ZXJsYXkiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvdyIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvdyIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iMTI3Ljg0NCIgeTE9IjAuNjU5OTg4IiB4Mj0iMTI3Ljg0NCIgeTI9IjI1NS4zNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSJ3aGl0ZSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIiBzdG9wLW9wYWNpdHk9IjAiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K')":this.g==="Visual Studio Code - Insiders"&&(e="url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDI1NiAyNTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxtYXNrIGlkPSJtYXNrMCIgbWFzay10eXBlPSJhbHBoYSIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeD0iMCIgeT0iMCIgd2lkdGg9IjI1NiIgaGVpZ2h0PSIyNTYiPgo8cGF0aCBkPSJNMTc2LjA0OSAyNTAuNjY5QzE4MC44MzggMjU1LjQ1OSAxODguMTMgMjU2LjcgMTk0LjIzNCAyNTMuNzY0TDI0Ni45NCAyMjguNDE5QzI1Mi40NzggMjI1Ljc1NSAyNTYgMjIwLjE1NCAyNTYgMjE0LjAwOFY0Mi4xNDc5QzI1NiAzNi4wMDI1IDI1Mi40NzggMzAuNDAwOCAyNDYuOTQgMjcuNzM3NEwxOTQuMjM0IDIuMzkwODlDMTg4LjEzIC0wLjU0NDQxNiAxODAuODM4IDAuNjk2NjA3IDE3Ni4wNDkgNS40ODU3MkMxODEuOTUgLTAuNDE1MDYgMTkyLjAzOSAzLjc2NDEzIDE5Mi4wMzkgMTIuMTA5MVYyNDQuMDQ2QzE5Mi4wMzkgMjUyLjM5MSAxODEuOTUgMjU2LjU3IDE3Ni4wNDkgMjUwLjY2OVoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xODEuMzc5IDE4MC42NDZMMTE0LjMzIDEyOC42MzNMMTgxLjM3OSA3NS41MTE0VjE3Ljc5NEMxODEuMzc5IDEwLjg0NzcgMTczLjEyOCA3LjIwNjczIDE2Ny45OTYgMTEuODg2Mkw3NC42NTE0IDk3Ljg1MThMMzEuMTk5NCA2NC4xNDM4QzI3LjEwODEgNjEuMDM5IDIxLjM4NTEgNjEuMjk0IDE3LjU4NTMgNjQuNzQ3NkwzLjQ4OTc0IDc3LjU2MjdDLTEuMTU4NDcgODEuNzg5MyAtMS4xNjM2NyA4OS4wOTQ4IDMuNDc2NzIgOTMuMzI5MkwxNjcuOTggMjQ0LjE4NUMxNzMuMTA3IDI0OC44ODcgMTgxLjM3OSAyNDUuMjQ5IDE4MS4zNzkgMjM4LjI5MlYxODAuNjQ2WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTM2LjY5MzcgMTM0LjE5NUwzLjQ3NjcyIDE2Mi44MjhDLTEuMTYzNjcgMTY3LjA2MiAtMS4xNTg0NyAxNzQuMzcgMy40ODk3NCAxNzguNTk0TDE3LjU4NTMgMTkxLjQwOUMyMS4zODUxIDE5NC44NjMgMjcuMTA4MSAxOTUuMTE4IDMxLjE5OTQgMTkyLjAxM0w2OS40NDcyIDE2NC4wNTdMMzYuNjkzNyAxMzQuMTk1WiIgZmlsbD0id2hpdGUiLz4KPC9tYXNrPgo8ZyBtYXNrPSJ1cmwoI21hc2swKSI+CjxwYXRoIGQ9Ik0xNjcuOTk2IDExLjg4NTdDMTczLjEyOCA3LjIwNjI3IDE4MS4zNzkgMTAuODQ3MyAxODEuMzc5IDE3Ljc5MzZWNzUuNTEwOUwxMDQuOTM4IDEzNi4wNzNMNjUuNTc0MiAxMDYuMjExTDE2Ny45OTYgMTEuODg1N1oiIGZpbGw9IiMwMDlBN0MiLz4KPHBhdGggZD0iTTM2LjY5MzcgMTM0LjE5NEwzLjQ3NjcyIDE2Mi44MjdDLTEuMTYzNjcgMTY3LjA2MiAtMS4xNTg0NyAxNzQuMzcgMy40ODk3NCAxNzguNTk0TDE3LjU4NTMgMTkxLjQwOUMyMS4zODUxIDE5NC44NjMgMjcuMTA4MSAxOTUuMTE4IDMxLjE5OTQgMTkyLjAxM0w2OS40NDcyIDE2NC4wNTZMMzYuNjkzNyAxMzQuMTk0WiIgZmlsbD0iIzAwOUE3QyIvPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMF9kKSI+CjxwYXRoIGQ9Ik0xODEuMzc5IDE4MC42NDVMMzEuMTk5NCA2NC4xNDI3QzI3LjEwODEgNjEuMDM3OSAyMS4zODUxIDYxLjI5MjkgMTcuNTg1MyA2NC43NDY1TDMuNDg5NzQgNzcuNTYxNkMtMS4xNTg0NyA4MS43ODgyIC0xLjE2MzY3IDg5LjA5MzcgMy40NzY3MiA5My4zMjgxTDE2Ny45NzIgMjQ0LjE3NkMxNzMuMTAyIDI0OC44ODEgMTgxLjM3OSAyNDUuMjQxIDE4MS4zNzkgMjM4LjI4VjE4MC42NDVaIiBmaWxsPSIjMDBCMjk0Ii8+CjwvZz4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjFfZCkiPgo8cGF0aCBkPSJNMTk0LjIzMyAyNTMuNzY2QzE4OC4xMyAyNTYuNzAxIDE4MC44MzcgMjU1LjQ2IDE3Ni4wNDggMjUwLjY3MUMxODEuOTQ5IDI1Ni41NzEgMTkyLjAzOSAyNTIuMzkyIDE5Mi4wMzkgMjQ0LjA0N1YxMi4xMTAzQzE5Mi4wMzkgMy43NjUzNSAxODEuOTQ5IC0wLjQxMzgzOSAxNzYuMDQ4IDUuNDg2OTRDMTgwLjgzNyAwLjY5NzgyNCAxODguMTI5IC0wLjU0MzE5MSAxOTQuMjMzIDIuMzkyMUwyNDYuOTM5IDI3LjczODZDMjUyLjQ3OCAzMC40MDIgMjU2IDM2LjAwMzcgMjU2IDQyLjE0OTFWMjE0LjAwOUMyNTYgMjIwLjE1NSAyNTIuNDc4IDIyNS43NTcgMjQ2LjkzOSAyMjguNDJMMTk0LjIzMyAyNTMuNzY2WiIgZmlsbD0iIzI0QkZBNSIvPgo8L2c+CjwvZz4KPGRlZnM+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZCIgeD0iLTIxLjMzMzMiIHk9IjQwLjY0MTMiIHdpZHRoPSIyMjQuMDQ1IiBoZWlnaHQ9IjIyNi45ODgiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiLz4KPGZlT2Zmc2V0Lz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTAuNjY2NyIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMC4xNSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93Ii8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8ZmlsdGVyIGlkPSJmaWx0ZXIxX2QiIHg9IjE1NC43MTUiIHk9Ii0yMC41MTY5IiB3aWR0aD0iMTIyLjYxOCIgaGVpZ2h0PSIyOTcuMTkxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIi8+CjxmZU9mZnNldC8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEwLjY2NjciLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAuMjUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJvdmVybGF5IiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3ciLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3ciIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjwvZGVmcz4KPC9zdmc+Cg==')"),`<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>GitHub Authentication - Sign In</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		html {
			height: 100%;
		}

		body {
			box-sizing: border-box;
			min-height: 100%;
			margin: 0;
			padding: 15px 30px;
			display: flex;
			flex-direction: column;
			color: white;
			font-family: "Segoe UI","Helvetica Neue","Helvetica",Arial,sans-serif;
			background-color: #2C2C32;
		}

		.branding {
			background-image: ${e};
			background-size: 24px;
			background-repeat: no-repeat;
			background-position: left center;
			padding-left: 36px;
			font-size: 20px;
			letter-spacing: -0.04rem;
			font-weight: 400;
			color: white;
			text-decoration: none;
		}

		.message-container {
			flex-grow: 1;
			display: flex;
			align-items: center;
			justify-content: center;
			margin: 0 30px;
		}

		.message {
			font-weight: 300;
			font-size: 1.4rem;
		}

		body.error .message {
			display: none;
		}

		body.error .error-message {
			display: block;
		}

		.error-message {
			display: none;
			font-weight: 300;
			font-size: 1.3rem;
		}

		.error-text {
			color: red;
			font-size: 1rem;
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Light"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/light/latest.svg#web") format("svg");
			font-weight: 200
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Semilight"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff2") format("woff2"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semilight/latest.svg#web") format("svg");
			font-weight: 300
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/normal/latest.svg#web") format("svg");
			font-weight: 400
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Semibold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/semibold/latest.svg#web") format("svg");
			font-weight: 600
		}

		@font-face {
			font-family: 'Segoe UI';
			src: url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.eot?#iefix") format("embedded-opentype");
			src: local("Segoe UI Bold"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff2") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.woff") format("woff"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.ttf") format("truetype"),url("https://c.s-microsoft.com/static/fonts/segoe-ui/west-european/bold/latest.svg#web") format("svg");
			font-weight: 700
		}
	</style>
</head>

<body>
	<a class="branding" href="https://code.visualstudio.com/">
		${this.g}
	</a>
	<div class="message-container">
		<div class="message">
			Sign-in successful! Returning to ${this.g}...
			<br><br>
			If you're not redirected automatically, <a href="${this.f.toString(!0)}" style="color: #85CEFF;">click here</a> or close this page.
		</div>
		<div class="error-message">
			An error occurred while signing in:
			<div class="error-text"></div>
		</div>
	</div>
	<script>
		const search = window.location.search;
		const error = (/[?&^]error=([^&]+)/.exec(search) || [])[1];
		if (error) {
			document.querySelector('.error-text')
				.textContent = decodeURIComponent(error);
			document.querySelector('body')
				.classList.add('error');
		} else {
			// Redirect to the app URI after a 1-second delay to allow page to load
			setTimeout(function() {
				window.location.href = '${this.f.toString(!0)}';
			}, 1000);
		}
	</script>
</body>
</html>`}},dJ=class extends bg{constructor(e,t,i,r,s,n,o,a,c,l,u,h){super(e,t,i,r,s,n,o,a,c,l,u,h),i.remote.isRemote||this.g.unshift({label:p(2956,null),handler:(d,f,g)=>this.A(d,f,g)}),a.device_authorization_endpoint&&this.g.push({label:p(2957,null),handler:(d,f,g)=>this.B(d,f,g)})}async A(e,t,i){const r=this.u(64),s=await this.v(r),n=this.u(32),o=A.parse(`${this.m.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/redirect?nonce=${n}`);let a;try{a=await this.l.createAppUri(o)}catch(d){throw new Error(`Failed to create external URI: ${d}`)}const c=new aJ(this.p.authorization_endpoint);c.searchParams.append("client_id",this.r),c.searchParams.append("response_type","code"),c.searchParams.append("code_challenge",s),c.searchParams.append("code_challenge_method","S256");const l=e.join(" ");l&&c.searchParams.append("scope",l),this.q?.resource&&c.searchParams.append("resource",this.q.resource);const u=new hJ(this.h,a,this.m.environment.appName);try{await u.start()}catch(d){throw new Error(`Failed to start loopback server: ${d}`)}c.searchParams.set("redirect_uri",u.redirectUri),c.searchParams.set("state",u.state);const h=u.waitForOAuthResponse();this.o.$waitForUriHandler(a);try{if(this.h.info(`Opening authorization URL for scopes: ${l}`),this.h.trace(`Authorization URL: ${c.toString()}`),!await this.k.openUri(c.toString(),{}))throw new mt;t.report({message:p(2958,null)});let f;try{f=(await dd(h,i)).code}catch(v){throw yi(v)?(this.h.info("Authorization code request was cancelled by the user."),v):(this.h.error(`Failed to receive authorization code: ${v}`),new Error(`Failed to receive authorization code: ${v}`))}return this.h.info(`Authorization code received for scopes: ${l}`),await this.x(f,r,u.redirectUri)}finally{setTimeout(()=>{u.stop()},5e3)}}async B(e,t,i){if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");if(!this.p.device_authorization_endpoint)throw new Error("Device authorization endpoint not available in server metadata");const r=this.p.device_authorization_endpoint,s=e.join(" ");this.h.info(`Starting device code flow for scopes: ${s}`);const n=new URLSearchParams;n.append("client_id",this.r),s&&n.append("scope",s),this.q?.resource&&n.append("resource",this.q.resource);let o;try{o=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:n.toString()})}catch(h){throw this.h.error(`Failed to request device code: ${h}`),new Error(`Failed to request device code: ${h}`)}if(!o.ok){const h=await o.text();throw new Error(`Device code request failed: ${o.status} ${o.statusText} - ${h}`)}const a=await o.json();if(!aB(a))throw this.h.error("Invalid device code response received from server"),new Error("Invalid device code response received from server");if(this.h.info(`Device code received: ${a.user_code}`),!await this.o.$showDeviceCodeModal(a.user_code,a.verification_uri))throw new mt;t.report({message:p(2959,null,a.verification_uri,a.user_code)});const l=(a.interval||5)*1e3,u=Date.now()+a.expires_in*1e3;for(;Date.now()<u;){if(i.isCancellationRequested)throw new mt;if(await new Promise(d=>setTimeout(d,l)),i.isCancellationRequested)throw new mt;const h=new URLSearchParams;h.append("grant_type","urn:ietf:params:oauth:grant-type:device_code"),h.append("device_code",a.device_code),h.append("client_id",this.r);try{const d=await fetch(this.p.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:h.toString()});if(d.ok){const f=await d.json();if(!Ib(f))throw this.h.error("Invalid token response received from server"),new Error("Invalid token response received from server");return this.h.info(`Device code flow completed successfully for scopes: ${s}`),f}else{let f;try{f=await d.json()}catch(g){throw this.h.error(`Failed to parse error response: ${g}`),new Error(`Token request failed with status ${d.status}: ${d.statusText}`)}if(f.error==="authorization_pending")continue;if(f.error==="slow_down"){await new Promise(g=>setTimeout(g,l));continue}else throw f.error==="expired_token"?new Error("Device code expired. Please try again."):f.error==="access_denied"?new mt:f.error==="invalid_client"?(this.h.warn(`Client ID (${this.r}) was invalid, generated a new one.`),await this.z(),new Error("Client ID was invalid, generated a new one. Please try again.")):new Error(`Token request failed: ${f.error_description||f.error||"Unknown error"}`)}}catch(d){throw yi(d)?d:new Error(`Error polling for token: ${d}`)}}throw new Error("Device code flow timed out. Please try again.")}},fJ=class extends Wb{constructor(e,t,i,r,s,n,o){super(e,t,i,r,s,n,o),this.c=dJ}};Te(Ws,QG,0),Te(vn,JZ,1),Te(Ce,new Jr(r4,[!1],!0)),Te(Ah,t8,1),Te(gb,zZ,0),Te(dg,new Jr(yb,[!1],!0)),Te(Hb,fJ,0),Te(Dy,Hy,0),Te(My,Zy,0),Te(Iy,jy,0),Te(Bs,Oy,0),Te(ug,e4,0),Te(Mc,QZ,0),Te(Bg,s4,0);import{createRequire as pJ}from"node:module";var u3=pJ(import.meta.url);(function(){for(let t=0;t<process.execArgv.length;t++)process.execArgv[t]==="--inspect-port=0"&&(process.execArgv.splice(t,1),t--)})();var kh=(0,e2.default)(process.argv.slice(2),{boolean:["transformURIs","skipWorkspaceStorageLock","supportGlobalNavigator"],string:["useHostProxy"]});(function(){const e=u3("module"),t=e._load;e._load=function(i){if(i==="natives")throw new Error('Either the extension or an NPM dependency is using the [unsupported "natives" node module](https://go.microsoft.com/fwlink/?linkid=871887).');return t.apply(this,arguments)}})();var Pm=process.exit.bind(process),gJ=process.on.bind(process);function mJ(e){process.exit=function(t){if(e)Pm(t);else{const i=new Error("An extension called process.exit() and this was prevented.");console.warn(i.stack)}},process.crash=function(){const t=new Error("An extension called process.crash() and this was prevented.");console.warn(t.stack)},process.env.ELECTRON_RUN_AS_NODE="1",process.on=function(t,i){if(t==="uncaughtException"){const r=i;i=function(...s){try{return r.apply(void 0,s)}catch{}}}gJ(t,i)}}kh.supportGlobalNavigator||Object.defineProperty(globalThis,"navigator",{get:()=>{Wh(new t1("navigator is now a global in nodejs, please see https://aka.ms/vscode-extensions/navigator for additional info on this error."))}});var us=function(e){Pm()};function vJ(){const e=Az(process.env);if(e.type===3)return new Promise((t,i)=>{const r=s=>{const n=s[0],o=new ao;n.on("message",a=>o.fire(_.wrap(a.data))),n.on("close",()=>{us("renderer closed the MessagePort")}),n.start(),t({onMessage:o.event,send:a=>n.postMessage(a.buffer)})};process.parentPort.on("message",s=>r(s.ports))});if(e.type===2)return new Promise((t,i)=>{let r=null;const s=setTimeout(()=>{us("VSCODE_EXTHOST_IPC_SOCKET timeout")},6e4),n=108e5,o=3e5,a=new ax(()=>us("renderer disconnected for too long (1)"),n),c=new ax(()=>us("renderer disconnected for too long (2)"),o);process.on("message",(u,h)=>{if(u&&u.type==="VSCODE_EXTHOST_IPC_SOCKET"){h.setNoDelay(!0);const d=_.wrap(Buffer.from(u.initialDataChunk,"base64"));let f;if(u.skipWebSocketFrames)f=new gl(h,"extHost-socket");else{const g=_.wrap(Buffer.from(u.inflateBytes,"base64"));f=new EN(new gl(h,"extHost-socket"),u.permessageDeflate,g,!1)}r?(a.cancel(),c.cancel(),r.beginAcceptReconnection(f,d),r.endAcceptReconnection(),r.sendResume()):(clearTimeout(s),r=new H1({socket:f,initialChunk:d}),r.sendResume(),r.onDidDispose(()=>us("renderer disconnected")),t(r),r.onSocketClose(()=>{a.schedule()}))}if(u&&u.type==="VSCODE_EXTHOST_IPC_REDUCE_GRACE_TIME"){if(c.isScheduled())return;a.isScheduled()&&c.schedule()}});const l={type:"VSCODE_EXTHOST_IPC_READY"};process.send?.(l)});{const t=e.pipeName;return new Promise((i,r)=>{const s=t2.createConnection(t,()=>{s.removeListener("error",r);const n=new H1({socket:new gl(s,"extHost-renderer")});n.sendResume(),i(n)});s.once("error",r),s.on("close",()=>{us("renderer closed the socket")})})}}async function wJ(){const e=await vJ();return new class{constructor(){this.a=new ao,this.onMessage=this.a.event,this.b=!1,this.d=e.onMessage(t=>{YU(t,2)?(this.b=!0,this.d.dispose(),us("received terminate message from renderer")):this.a.fire(t)})}send(t){this.b||e.send(t)}async drain(){if(e.drain)return e.drain()}}}function bJ(e){return new Promise(t=>{const i=e.onMessage(r=>{i.dispose();const s=JSON.parse(r.toString()),n=s.commit,o=LL.commit;if(n&&o&&n!==o&&Pm(55),s.parentPid){let a=0;setInterval(function(){try{process.kill(s.parentPid,0),a=0}catch(l){l&&l.code==="EPERM"?(a++,a>=3&&us(`parent process ${s.parentPid} does not exist anymore (3 x EPERM): ${l.message} (code: ${l.code}) (errno: ${l.errno})`)):us(`parent process ${s.parentPid} does not exist anymore: ${l.message} (code: ${l.code}) (errno: ${l.errno})`)}},1e3);let c;try{c=u3("native-watchdog"),c.start(s.parentPid)}catch(l){lt(l)}}e.send(HI(0)),t({protocol:e,initData:s})});e.send(HI(1))})}async function yJ(){const e=[];process.on("unhandledRejection",(a,c)=>{e.push(c),setTimeout(()=>{const l=e.indexOf(c);l>=0&&c.catch(u=>{e.splice(l,1),yi(u)||(console.warn(`rejected promise not handled within 1 second: ${u}`),u&&u.stack&&console.warn(`stack trace: ${u.stack}`),a&&lt(a))})},1e3)}),process.on("rejectionHandled",a=>{const c=e.indexOf(a);c>=0&&e.splice(c,1)}),process.on("uncaughtException",function(a){s2(a)||lt(a)}),St("code/extHost/willConnectToRenderer");const t=await wJ();St("code/extHost/didConnectToRenderer");const i=await bJ(t);St("code/extHost/didWaitForInitData");const{initData:r}=i;mJ(!!r.environment.extensionTestsLocationURI),r.environment.useHostProxy=kh.useHostProxy!==void 0?kh.useHostProxy!=="false":void 0,r.environment.skipWorkspaceStorageLock=K(kh.skipWorkspaceStorageLock,!1);const s=new class{constructor(){this.pid=process.pid}exit(c){Pm(c)}fsExists(c){return Qe.exists(c)}fsRealpath(c){return Qe.realpath(c)}};let n=null;r.remote.authority&&kh.transformURIs&&(n=bz(r.remote.authority));const o=new vz(i.protocol,r,s,n);us=a=>o.terminate(a)}yJ().catch(e=>console.log(e));

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/488a1f239235055e34e673291fb8d8c810886f81/core/vs/workbench/api/node/extensionHostProcess.js.map
